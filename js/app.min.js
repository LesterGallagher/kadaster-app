/* onsenui v2.10.1 - 2018-05-28 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ons=e()}(this,function(){"use strict";function t(t){kt.set(t,!0)}function e(t){var e=wt.get(t,[])||[];wt.delete(t),e.forEach(function(t){return t()})}function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(void 0===kt&&(kt=new WeakMap,wt=new WeakMap),function(t,e){wt.has(t)||wt.set(t,[]),wt.get(t).push(e)}(n,i),function(e){return e.childNodes.length>0&&t(e),kt.has(e)}(n))e(n);else{new MutationObserver(function(i){t(n),e(n)}).observe(n,{childList:!0,characterData:!0}),setImmediate(function(){t(n),e(n)})}}function i(t){t._destroy instanceof Function?t._destroy():t.remove()}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e=gi.has(t),n=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t);return!e&&n}function a(t){var e=t.isConnected;if(void 0!==e)return e;for(var n=t;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function s(t,e){for(var n=e;n&&n!==t&&!n.nextSibling;)n=n.parentNode;return n&&n!==t?n.nextSibling:null}function l(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=t;i;){if(i.nodeType===Node.ELEMENT_NODE){var o=i;e(o);var r=o.localName;if("link"===r&&"import"===o.getAttribute("rel")){var a=o.import;if(a instanceof Node&&!n.has(a)){n.add(a);for(var u=a.firstChild;u;u=u.nextSibling)l(u,e,n)}i=s(t,o);continue}if("template"===r){i=s(t,o);continue}var c=o.__CE_shadowRoot;if(c)for(var h=c.firstChild;h;h=h.nextSibling)l(h,e,n)}i=function(t,e){return e.firstChild?e.firstChild:s(t,e)}(t,i)}}function u(t,e,n){t[e]=n}var c={},h=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return function(t){return"-"+e+"-"+Q.hyphenate(t)}}(),d=function(t,e){return Object.keys(e).forEach(function(n){n in t.style?t.style[n]=e[n]:h(n)in t.style?t.style[h(n)]=e[n]:Q.warn("No such style property: "+n)}),t};d.clear=function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(/\s+/).reduce(function(t,e){return t.concat([Q.hyphenate(e),h(e)])},[]),n=[],i=t.style.length-1;i>=0;i--)!function(i){var o=t.style[i];(0===e.length||e.some(function(t){return 0===o.indexOf(t)}))&&n.push(o)}(i);n.forEach(function(e){return t.style[e]=""}),""===t.getAttribute("style")&&t.removeAttribute("style")};var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},k=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},w=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},E=window.HTMLElement,C=new(function(){function t(){p(this,t),this._selectedPlatform=null,this._ignorePlatformSelect=!1}return g(t,[{key:"select",value:function(t){"string"==typeof t&&(this._selectedPlatform=t.trim().toLowerCase())}},{key:"_getSelectedPlatform",value:function(){return this._ignorePlatformSelect?null:this._selectedPlatform}},{key:"_runOnActualPlatform",value:function(t){this._ignorePlatformSelect=!0;var e=t();return this._ignorePlatformSelect=!1,e}},{key:"isWebView",value:function(){if("loading"===document.readyState||"uninitialized"==document.readyState)throw new Error("isWebView() method is available after dom contents loaded.");return!!(window.cordova||window.phonegap||window.PhoneGap)}},{key:"isIPhone",value:function(){return/iPhone/i.test(navigator.userAgent)}},{key:"isIPhoneX",value:function(){return this.isIPhone()&&(375===window.screen.width&&812===window.screen.height||812===window.screen.width&&375===window.screen.height)}},{key:"isIPad",value:function(){return/iPad/i.test(navigator.userAgent)}},{key:"isIPod",value:function(){return/iPod/i.test(navigator.userAgent)}},{key:"isIOS",value:function(){return this._getSelectedPlatform()?"ios"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/iPhone|iPad|iPod/i.test(navigator.userAgent):/iOS/i.test(device.platform)}},{key:"isIOS7above",value:function(){if("object"===("undefined"==typeof device?"undefined":f(device))&&!/browser/i.test(device.platform))return/iOS/i.test(device.platform)&&parseInt(device.version.split(".")[0])>=7;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".");return parseInt(t.split(".")[0])>=7}return!1}},{key:"isIOSSafari",value:function(){var t=window.navigator,e=t.userAgent;return!(!this.isIOS()||-1===e.indexOf("Safari")||-1===e.indexOf("Version")||t.standalone)}},{key:"isWKWebView",value:function(){var t=/constructor/i.test(E);return!(!(this.isIOS()&&window.webkit&&window.webkit.messageHandlers&&window.indexedDB)||t)}},{key:"isUIWebView",value:function(){return!(!this.isIOS()||this.isIOSSafari()||this.isWKWebView())}},{key:"isAndroidPhone",value:function(){return/Android/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)}},{key:"isAndroidTablet",value:function(){return/Android/i.test(navigator.userAgent)&&!/Mobile/i.test(navigator.userAgent)}},{key:"isAndroid",value:function(){return this._getSelectedPlatform()?"android"===this._getSelectedPlatform():/Android/i.test("object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?navigator.userAgent:device.platform)}},{key:"isWP",value:function(){return this._getSelectedPlatform()?"wp"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/Windows Phone|IEMobile|WPDesktop/i.test(navigator.userAgent):/Win32NT|WinCE/i.test(device.platform)}},{key:"isBlackBerry",value:function(){return this._getSelectedPlatform()?"blackberry"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/BlackBerry|RIM Tablet OS|BB10/i.test(navigator.userAgent):/BlackBerry/i.test(device.platform)}},{key:"isOpera",value:function(){return this._getSelectedPlatform()?"opera"===this._getSelectedPlatform():!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0}},{key:"isFirefox",value:function(){return this._getSelectedPlatform()?"firefox"===this._getSelectedPlatform():"undefined"!=typeof InstallTrigger}},{key:"isSafari",value:function(){return this._getSelectedPlatform()?"safari"===this._getSelectedPlatform():Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window["safari"]||safari.pushNotification).toString()}},{key:"isChrome",value:function(){return this._getSelectedPlatform()?"chrome"===this._getSelectedPlatform():!(!window.chrome||window.opera||navigator.userAgent.indexOf(" OPR/")>=0||navigator.userAgent.indexOf(" Edge/")>=0)}},{key:"isIE",value:function(){return this._getSelectedPlatform()?"ie"===this._getSelectedPlatform():!!document.documentMode}},{key:"isEdge",value:function(){return this._getSelectedPlatform()?"edge"===this._getSelectedPlatform():navigator.userAgent.indexOf(" Edge/")>=0}},{key:"getMobileOS",value:function(){return this.isAndroid()?"android":this.isIOS()?"ios":this.isWP()?"wp":"other"}},{key:"getIOSDevice",value:function(){return this.isIPhone()?"iphone":this.isIPad()?"ipad":this.isIPod()?"ipod":"na"}}]),t}()),A=function(t){return Q.throw("In PageAttributeExpression: "+t)},S={_variables:{},defineVariable:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"!=typeof t?A("Variable name must be a string"):"string"!=typeof e&&"function"!=typeof e?A("Variable value must be a string or a function"):this._variables.hasOwnProperty(t)&&!n&&A('"'+t+'" is already defined'),this._variables[t]=e},getVariable:function(t){return this._variables.hasOwnProperty(t)?this._variables[t]:null},removeVariable:function(t){delete this._variables[t]},getAllVariables:function(){return this._variables},_parsePart:function(t){var e=void 0,n=!1,i=0,o=[];0===t.length&&A("Unable to parse empty string");for(var r=0;r<t.length;r++)if("$"===(e=t.charAt(r))&&"{"===t.charAt(r+1)){n&&A("Nested interpolation not supported");t.substring(i,r).length>0&&o.push(t.substring(i,r)),i=r,n=!0}else if("}"===e){n||A("} must be preceeded by ${");t.substring(i,r+1).length>0&&o.push(t.substring(i,r+1)),i=r+1,n=!1}return n&&A("Unterminated interpolation"),o.push(t.substring(i,t.length)),o},_replaceToken:function(t){var e=t.match(/^\${(.*?)}$/);if(!e)return t;var n=e[1].trim(),i=this.getVariable(n);if(null!==i){if("string"==typeof i)return i;var o=i();return"string"!=typeof o&&A("Must return a string"),o}A('Variable "'+n+'" does not exist')},_replaceTokens:function(t){return t.map(this._replaceToken.bind(this))},_parseExpression:function(t){return t.split(",").map(function(t){return t.trim()}).map(this._parsePart.bind(this)).map(this._replaceTokens.bind(this)).map(function(t){return t.join("")})},evaluate:function(t){return t?this._parseExpression(t):[]}};S.defineVariable("mobileOS",C.getMobileOS()),S.defineVariable("iOSDevice",C.getIOSDevice()),S.defineVariable("runtime",function(){return C.isWebView()?"cordova":"browser"});var P={};P.config={autoStatusBarFill:!0,animationsDisabled:!1,warningsDisabled:!1},P.nullElement=window.document.createElement("div"),P.isEnabledAutoStatusBarFill=function(){return!!P.config.autoStatusBarFill},P.normalizePageHTML=function(t){return(""+t).trim()},P.waitDOMContentLoaded=function(t){if("loading"===window.document.readyState||"uninitialized"==window.document.readyState){window.document.addEventListener("DOMContentLoaded",function e(){t(),window.document.removeEventListener("DOMContentLoaded",e)})}else setImmediate(t)},P.autoStatusBarFill=function(t){var e=function e(){P.shouldFillStatusBar()&&t(),document.removeEventListener("deviceready",e)};"object"===("undefined"==typeof device?"undefined":f(device))?document.addEventListener("deviceready",e):-1===["complete","interactive"].indexOf(document.readyState)?P.waitDOMContentLoaded(e):e()},P.shouldFillStatusBar=function(){return P.isEnabledAutoStatusBarFill()&&(C.isWebView()&&C.isIOS7above()&&!C.isIPhoneX()||document.body.querySelector(".ons-status-bar-mock.ios"))},P.templateStore={_storage:{},get:function(t){return P.templateStore._storage[t]||null},set:function(t,e){P.templateStore._storage[t]=e}},window.document.addEventListener("_templateloaded",function(t){"ons-template"===t.target.nodeName.toLowerCase()&&P.templateStore.set(t.templateId,t.template)},!1),P.waitDOMContentLoaded(function(){function t(t){for(var e=window.document.querySelectorAll(t),n=0;n<e.length;n++)P.templateStore.set(e[n].getAttribute("id"),e[n].textContent||e[n].content)}t('script[type="text/ons-template"]'),t('script[type="text/template"]'),t('script[type="text/ng-template"]'),t("template")}),P.getTemplateHTMLAsync=function(t){return new Promise(function(e,n){P.waitDOMContentLoaded(function(){var i=P.templateStore.get(t);if(i){if(i instanceof DocumentFragment)return e(i);var o="string"==typeof i?i:i[1];return e(P.normalizePageHTML(o))}var r=window.document.getElementById(t);if(r){var a=r.textContent||r.content;return e(a)}var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){var i=s.responseText;if(s.status>=400&&s.status<600)n(i);else{var o=Q.createFragment(i);Q.arrayFrom(o.querySelectorAll("script")).forEach(function(t){var e=document.createElement("script");e.type=t.type||"text/javascript",e.appendChild(document.createTextNode(t.text||t.textContent||t.innerHTML)),t.parentNode.replaceChild(e,t)}),P.templateStore.set(t,o),e(o)}},s.onerror=function(){Q.throw("Page template not found: "+t)},s.send(null)})})},P.getPageHTMLAsync=function(t){var e=S.evaluate(t);return function t(n){return"string"!=typeof n?Promise.reject("Must specify a page."):P.getTemplateHTMLAsync(n).catch(function(n){return 0===e.length?Promise.reject(n):t(e.shift())})}(e.shift())};var O=function(){function t(e){p(this,t),this._animators=e.animators,this._baseClass=e.baseClass,this._baseClassName=e.baseClassName||e.baseClass.name,this._animation=e.defaultAnimation||"default",this._animationOptions=e.defaultAnimationOptions||{},this._animators[this._animation]||Q.throw("No such animation: "+this._animation)}return g(t,[{key:"setAnimationOptions",value:function(t){this._animationOptions=t}},{key:"newAnimator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=null;if(t.animation instanceof this._baseClass)return t.animation;var i=null;if("string"==typeof t.animation&&(i=this._animators[t.animation]),!i&&e)n=e;else{i=i||this._animators[this._animation];var o=Q.extend({},this._animationOptions,t.animationOptions||{},P.config.animationsDisabled?{duration:0,delay:0}:{});"function"==typeof(n=new i(o))&&(n=new n(o))}return n instanceof this._baseClass||Q.throw('"animator" is not an instance of '+this._baseClassName),n}}],[{key:"parseAnimationOptionsString",value:function(t){try{if("string"==typeof t){var e=Q.animationOptionsParse(t);if("object"===(void 0===e?"undefined":f(e))&&null!==e)return e;console.error('"animation-options" attribute must be a JSON object string: '+t)}return{}}catch(e){return console.error('"animation-options" attribute must be a JSON object string: '+t),{}}}}]),t}(),x=!0,T={quiet:"material--flat",light:"material--flat",outline:"material--flat",cta:"","large--quiet":"material--flat large","large--cta":"large",noborder:"",tappable:""},L={};L.android=function(t){var e=t.tagName.toLowerCase();if(!Q.hasModifier(t,"material")){var n=(t.getAttribute("modifier")||"").trim().split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t});n.unshift("material"),t.setAttribute("modifier",n.join(" ").trim())}-1===["ons-alert-dialog-button","ons-toolbar-button","ons-back-button","ons-button","ons-list-item","ons-fab","ons-speed-dial","ons-speed-dial-item","ons-tab"].indexOf(e)||t.hasAttribute("ripple")||t.querySelector("ons-ripple")||("ons-list-item"===e?t.hasAttribute("tappable")&&(t.setAttribute("ripple",""),t.removeAttribute("tappable")):t.setAttribute("ripple",""))},L.ios=function(t){Q.removeModifier(t,"material")&&(Q.removeModifier(t,"material--flat")&&Q.addModifier(t,Q.removeModifier(t,"large")?"large--quiet":"quiet"),t.getAttribute("modifier")||t.removeAttribute("modifier")),t.hasAttribute("ripple")&&("ons-list-item"===t.tagName.toLowerCase()&&t.setAttribute("tappable",""),t.removeAttribute("ripple"))};var M={android:!0},D=function(t,e){if(x&&!t.hasAttribute("disable-auto-styling")){var n=C.getMobileOS();if(L.hasOwnProperty(n)&&(M.hasOwnProperty(n)||e))return n}return null},I=function(t,e,n){return D(e,n)?t.split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t}).join(" "):t},N={isEnabled:function(){return x},enable:function(){return x=!0},disable:function(){return x=!1},prepare:function(t,e){var n=D(t,e);n&&L[n](t)},mapModifier:I,getPlatform:D,restoreModifier:function(t){if("android"===D(t)){var e=t.getAttribute("modifier")||"",n=I(e,t);if(/(^|\s+)material($|\s+)/i.test(e)||(n="material "+n),n!==e)return t.setAttribute("modifier",n.trim()),!0}return!1}},B=function(){function t(){p(this,t)}return g(t,null,[{key:"diff",value:function(e,n){function i(e){var n={};return t.split(e).forEach(function(t){return n[t]=t}),n}e=i((""+e).trim()),n=i((""+n).trim());var o=Object.keys(e).reduce(function(t,e){return n[e]||t.push(e),t},[]);return{added:Object.keys(n).reduce(function(t,n){return e[n]||t.push(n),t},[]),removed:o}}},{key:"applyDiffToClassList",value:function(t,e,n){t.added.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.add(t)})}),t.removed.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.remove(t)})})}},{key:"applyDiffToElement",value:function(e,n,i){Object.keys(i).forEach(function(o){for(var r=!o||Q.match(n,o)?[n]:Array.prototype.filter.call(n.querySelectorAll(o),function(t){return!Q.findParent(t,n.tagName,function(t){return t===n})}),a=0;a<r.length;a++)t.applyDiffToClassList(e,r[a].classList,i[o])})}},{key:"onModifierChanged",value:function(e,n,i,o){t.applyDiffToElement(t.diff(e,n),i,o),N.restoreModifier(i)}},{key:"refresh",value:function(e,n){t.applyDiffToElement(t.diff("",e.getAttribute("modifier")||""),e,n)}},{key:"initModifier",value:function(e,n){var i=e.getAttribute("modifier");"string"==typeof i&&t.applyDiffToElement({removed:[],added:t.split(i)},e,n)}},{key:"split",value:function(t){return"string"!=typeof t?[]:t.trim().split(/ +/).filter(function(t){return""!==t})}},{key:"addModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier"));-1==i.indexOf(n)&&(i.push(n),e.setAttribute("modifier",i.join(" ")))}else e.setAttribute("modifier",n)}},{key:"removeModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier")),o=i.indexOf(n);-1!==o&&(i.splice(o,1),e.setAttribute("modifier",i.join(" ")))}}}]),t}(),j={_ready:!1,_domContentLoaded:!1,_onDOMContentLoaded:function(){j._domContentLoaded=!0,C.isWebView()?window.document.addEventListener("deviceready",function(){j._ready=!0},!1):j._ready=!0},addBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.addEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.addEventListener("backbutton",t,!1)})},removeBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.removeEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.removeEventListener("backbutton",t,!1)})}};window.addEventListener("DOMContentLoaded",function(){return j._onDOMContentLoaded()},!1);var H={_store:{},_genId:function(){var t=0;return function(){return t++}}(),set:function(t,e){t.dataset.deviceBackButtonHandlerId&&this.remove(t);var n=t.dataset.deviceBackButtonHandlerId=H._genId();this._store[n]=e},remove:function(t){t.dataset.deviceBackButtonHandlerId&&(delete this._store[t.dataset.deviceBackButtonHandlerId],delete t.dataset.deviceBackButtonHandlerId)},get:function(t){if(t.dataset.deviceBackButtonHandlerId){var e=t.dataset.deviceBackButtonHandlerId;if(!this._store[e])throw new Error;return this._store[e]}},has:function(t){if(!t.dataset)return!1;var e=t.dataset.deviceBackButtonHandlerId;return!!this._store[e]}},R=new(function(){function t(){p(this,t),this._isEnabled=!1,this._boundCallback=this._callback.bind(this)}return g(t,[{key:"enable",value:function(){this._isEnabled||(j.addBackButtonListener(this._boundCallback),this._isEnabled=!0)}},{key:"disable",value:function(){this._isEnabled&&(j.removeBackButtonListener(this._boundCallback),this._isEnabled=!1)}},{key:"fireDeviceBackButtonEvent",value:function(){var t=document.createEvent("Event");t.initEvent("backbutton",!0,!0),document.dispatchEvent(t)}},{key:"_callback",value:function(){this._dispatchDeviceBackButtonEvent()}},{key:"createHandler",value:function(t,e){if(!(t instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");if(!(e instanceof Function))throw new Error("callback must be an instance of Function");var n={_callback:e,_element:t,disable:function(){H.remove(t)},setListener:function(t){this._callback=t},enable:function(){H.set(t,this)},isEnabled:function(){return H.get(t)===this},destroy:function(){H.remove(t),this._callback=this._element=null}};return n.enable(),n}},{key:"_dispatchDeviceBackButtonEvent",value:function(){function t(e){return{_element:e,callParentHandler:function(){for(var e=this._element.parentNode;e;){if(i=H.get(e))return i._callback(t(e));e=e.parentNode}}}}var e=this._captureTree(),n=this._findHandlerLeafElement(e),i=H.get(n);i._callback(t(n))}},{key:"_captureTree",value:function(){function t(e){var n={element:e,children:Array.prototype.concat.apply([],function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}(e.children).map(function(e){if("none"===e.style.display||!1===e._isShown)return[];if(0===e.children.length&&!H.has(e))return[];var n=t(e);return 0!==n.children.length||H.has(n.element)?[n]:[]}))};if(!H.has(n.element))for(var i=0;i<n.children.length;i++){var o=n.children[i];if(H.has(o.element))return o}return n}return t(document.body)}},{key:"_findHandlerLeafElement",value:function(t){function e(t){return 0===t.children.length?t.element:1===t.children.length?e(t.children[0]):t.children.map(function(t){return t.element}).reduce(function(t,e){if(!t)return e;var n=parseInt(window.getComputedStyle(t,"").zIndex,10),i=parseInt(window.getComputedStyle(e,"").zIndex,10);if(!isNaN(n)&&!isNaN(i))return n>i?t:e;throw new Error("Capturing backbutton-handler is failure.")},null)}return e(t)}}]),t}());P.AnimatorFactory=O,P.ModifierUtil=B,P.dbbDispatcher=R;var F=function(t,e){return t.substr(0,e.length)===e},q=function(t,e){return t.substr(t.length-e.length,e.length)===e},z=function(t){return t.slice(1,-1)},V=function(t){return F(t,"{")&&q(t,"}")},W=function(t){return F(t,"[")&&q(t,"]")},U=function(t){return F(t,"'")&&q(t,"'")||F(t,'"')&&q(t,'"')},X=function(t,e,n){throw new Error("Unexpected token '"+t+"' at position "+(n.length-e.length-1)+" in string: '"+n+"'")},Y=function(t,e,n){return"true"===t||"false"===t?"true"===t:U(t)?z(t):isNaN(t)?V(t)?$(z(t)):W(t)?K(z(t)):void X(t,e,n):+t},G=function(t){var e=(t=t.trim()).length;if(":"===t[0]||","===t[0])e=1;else if("{"===t[0]||"["===t[0]){for(var n=t.charCodeAt(0),i=1,o=1;o<t.length;o++)if(t.charCodeAt(o)===n)i++;else if(t.charCodeAt(o)===n+2&&0==--i){e=o+1;break}}else if("'"===t[0]||'"'===t[0]){for(var r=1;r<t.length;r++)if(t[r]===t[0]){e=r+1;break}}else for(var a=1;a<t.length;a++)if(-1!==[" ",",",":"].indexOf(t[a])){e=a;break}return t.slice(0,e)},$=function(t){for(var e=t=t.trim(),n={},i=!0,o=void 0,r=void 0,a=void 0;t.length>0;)if(r=a,a=G(t),t=t.slice(a.length,t.length).trim(),":"===a&&(!i||!r||","===r)||","===a&&i||":"!==a&&","!==a&&r&&","!==r&&":"!==r)X(a,t,e);else if(":"===a&&i&&r){if(r=U(r)?z(r):r,!function(t){return/^[A-Z_$][A-Z0-9_$]*$/i.test(t)}(r))throw new Error("Invalid key token '"+r+"' at position 0 in string: '"+e+"'");o=r,i=!1}else","===a&&!i&&r&&(n[o]=Y(r,t,e),i=!0);return a&&(n[o]=Y(a,t,e)),n},K=function(t){for(var e=t=t.trim(),n=[],i=void 0,o=void 0;t.length>0;)i=o,o=G(t),t=t.slice(o.length,t.length).trim(),","!==o||i&&","!==i?","===o&&n.push(Y(i,t,e)):X(o,t,e);return o&&(","!==o?n.push(Y(o,t,e)):X(o,t,e)),n},Q={},J="[Onsen UI]";Q.globals={fabOffset:0,errorPrefix:J,supportsPassive:!1},C._runOnActualPlatform(function(){Q.globals.actualMobileOS=C.getMobileOS(),Q.globals.isUIWebView=C.isUIWebView(),Q.globals.isWKWebView=C.isWKWebView()});try{var Z=Object.defineProperty({},"passive",{get:function(){Q.globals.supportsPassive=!0}});window.addEventListener("testPassive",null,Z),window.removeEventListener("testPassive",null,Z)}catch(t){}Q.addEventListener=function(t,e,n,i,o){t.addEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.removeEventListener=function(t,e,n,i,o){t.removeEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.prepareQuery=function(t){return t instanceof Function?t:function(e){return Q.match(e,t)}},Q.match=function(t,e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector).call(t,e)},Q.findChild=function(t,e){for(var n=Q.prepareQuery(e),i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(o.nodeType===Node.ELEMENT_NODE&&n(o))return o}return null},Q.findParent=function(t,e,n){for(var i=Q.prepareQuery(e),o=t.parentNode;;){if(!o||o===document||o instanceof DocumentFragment||n&&n(o))return null;if(i(o))return o;o=o.parentNode}},Q.isAttached=function(t){return document.body.contains(t)},Q.hasAnyComponentAsParent=function(t){for(;t&&document.documentElement!==t;)if((t=t.parentNode)&&t.nodeName.toLowerCase().match(/(ons-navigator|ons-tabbar|ons-modal)/))return!0;return!1},Q.getAllChildNodes=function(t){var e;return(e=[t]).concat.apply(e,w(Array.from(t.children).map(function(t){return Q.getAllChildNodes(t)})))},Q.isPageControl=function(t){return t.nodeName.match(/^ons-(navigator|splitter|tabbar|page)$/i)},Q.propagateAction=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];i[e]instanceof Function?i[e]():Q.propagateAction(i,e)}},Q.camelize=function(t){return t.toLowerCase().replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})},Q.hyphenate=function(t){return t.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase()},Q.create=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.split("."),i=document.createElement(n.shift()||"div");return n.length&&(i.className=n.join(" ")),d(i,e),i},Q.createElement=function(t){var e=document.createElement("div");t instanceof DocumentFragment?e.appendChild(document.importNode(t,!0)):e.innerHTML=t.trim(),e.children.length>1&&Q.throw("HTML template must contain a single root element");var n=e.children[0];return e.children[0].remove(),n},Q.createFragment=function(t){var e=document.createElement("template");return e.innerHTML=t,document.importNode(e.content,!0)},Q.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++)if(n[o])for(var r=Object.keys(n[o]),a=0;a<r.length;a++){var s=r[a];t[s]=n[o][s]}return t},Q.arrayFrom=function(t){return Array.prototype.slice.apply(t)},Q.parseJSONObjectSafely=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=JSON.parse(""+t);if("object"===(void 0===n?"undefined":f(n))&&null!==n)return n}catch(t){return e}return e},Q.findFromPath=function(t){t=t.split(".");for(var e,n=window;e=t.shift();)n=n[e];return n},Q.getTopPage=function(t){return t&&("ons-page"===t.tagName.toLowerCase()?t:t.topPage)||null},Q.findToolbarPage=function(t){var e=Q.getTopPage(t);if(e){if(e._canAnimateToolbar())return e;for(var n=0;n<e._contentElement.children.length;n++){var i=Q.getTopPage(e._contentElement.children[n]);if(i&&!/ons-tabbar/i.test(e._contentElement.children[n].tagName))return Q.findToolbarPage(i)}}return null},Q.triggerElementEvent=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});return Object.keys(n).forEach(function(t){i[t]=n[t]}),t.dispatchEvent(i),i},Q.hasModifier=function(t,e){return!!t.hasAttribute("modifier")&&RegExp("(^|\\s+)"+e+"($|\\s+)","i").test(t.getAttribute("modifier"))},Q.addModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!Q.hasModifier(t,e)&&(t.setAttribute("modifier",((t.getAttribute("modifier")||"")+" "+e).trim()),!0)},Q.removeModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!t.getAttribute("modifier")||!Q.hasModifier(t,e))return!1;var i=t.getAttribute("modifier").split(/\s+/).filter(function(t){return t&&t!==e});return i.length?t.setAttribute("modifier",i.join(" ")):t.removeAttribute("modifier"),!0},Q.toggleModifier=function(){var t=arguments.length>2?arguments.length<=2?void 0:arguments[2]:{},e="boolean"==typeof t?t:t.force;("boolean"==typeof e?e:!Q.hasModifier.apply(Q,arguments))?Q.addModifier.apply(Q,arguments):Q.removeModifier.apply(Q,arguments)},Q.restoreClass=function(t,e,n){e.split(/\s+/).forEach(function(e){return""!==e&&!t.classList.contains(e)&&t.classList.add(e)}),t.hasAttribute("modifier")&&B.refresh(t,n)},Q.updateParentPosition=function(t){!t._parentUpdated&&t.parentElement&&("static"===window.getComputedStyle(t.parentElement).getPropertyValue("position")&&(t.parentElement.style.position="relative"),t._parentUpdated=!0)},Q.toggleAttribute=function(t,e,n){n?t.setAttribute(e,"boolean"==typeof n?"":n):t.removeAttribute(e)},Q.bindListeners=function(t,e){e.forEach(function(e){var n=e.replace(/^_[a-z]/,"_bound"+e[1].toUpperCase());t[n]=t[n]||t[e].bind(t)})},Q.each=function(t,e){return Object.keys(t).forEach(function(n){return e(n,t[n])})},Q.updateRipple=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0===e&&(e=t.hasAttribute("ripple"));var i=Q.findChild(t,"ons-ripple");if(e){if(!i){var o=document.createElement("ons-ripple");Object.keys(n).forEach(function(t){return o.setAttribute(t,n[t])}),t.insertBefore(o,t.firstChild)}}else i&&i.remove()},Q.animationOptionsParse=function(t){if(t=t.trim(),V(t))return $(z(t));if(W(t))return K(z(t));throw new Error("Provided string must be object or array like: "+t)},Q.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Q.defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},Q.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!P.config.warningsDisabled){var i;(i=console).warn.apply(i,[J].concat(e))}},Q.throw=function(t){throw new Error(J+" "+t)},Q.throwAbstract=function(){return Q.throw("Cannot instantiate abstract class")},Q.throwMember=function(){return Q.throw("Class member must be implemented")},Q.throwPageLoader=function(){return Q.throw("First parameter should be an instance of PageLoader")},Q.throwAnimator=function(t){return Q.throw('"Animator" param must inherit '+t+"Animator")};var tt=function(t){return t.cancelable&&t.preventDefault()};Q.iosPreventScroll=function(t){if("ios"===Q.globals.actualMobileOS){t.on("touchmove",tt),t.on("dragend",function e(n){t.off("touchmove",tt),t.off("dragend",e)})}},Q.iosPageScrollFix=function(t){"ios"===Q.globals.actualMobileOS&&(document.body.classList.toggle("ons-ios-scroll",t),Q.globals.isUIWebView&&!P.config.forceUIWebViewScrollFix||document.body.classList.toggle("ons-ios-scroll-fix",t))},Q.iosMaskScrollFix=function(t,e){if(Q.globals.isUIWebView){t[(e?"add":"remove")+"EventListener"]("touchmove",tt,!1)}},Q.isValidGesture=function(t){return void 0!==t.gesture&&(t.gesture.distance<=15||t.gesture.deltaTime<=100)},Q.checkMissingImport=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){c[t]||Q.throw("Ons"+t+" is required but was not imported (Custom Elements)")})};var et={};et.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},et.buildTransitionValue=function(t){t.property=t.property||"all",t.duration=t.duration||.4,t.timing=t.timing||"linear";return t.property.split(/ +/).map(function(e){return e+" "+t.duration+"s "+t.timing}).join(", ")},et.onceOnTransitionEnd=function(t,e){if(!t)return function(){};var n=function(n){t==n.target&&(n.stopPropagation(),i(),e())},i=function(){et._transitionEndEvents.forEach(function(e){t.removeEventListener(e,n,!1)})};return et._transitionEndEvents.forEach(function(e){t.addEventListener(e,n,!1)}),i},et._transitionEndEvents="ontransitionend"in window?["transitionend"]:"onwebkittransitionend"in window?["webkitTransitionEnd"]:"webkit"===et.vendorPrefix||"o"===et.vendorPrefix||"moz"===et.vendorPrefix||"ms"===et.vendorPrefix?[et.vendorPrefix+"TransitionEnd","transitionend"]:[],et._cssPropertyDict=function(){for(var t=window.getComputedStyle(document.documentElement,""),e={},n="A".charCodeAt(0),i="z".charCodeAt(0),o=0;o<t.length;o++){var r=t[o].replace(/^[-]+/,"").replace(/[-][a-z]/g,function(t){return t.substr(1).toUpperCase()}).replace(/^moz/,"Moz");n<=r.charCodeAt(0)&&i>=r.charCodeAt(0)&&"cssText"!==r&&"parentText"!==r&&(e[r]=!0)}return e}(),et.hasCssProperty=function(t){return t in et._cssPropertyDict},et.vendorPrefix=function(){var t=window.getComputedStyle(document.documentElement,"");return(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1]}(),et.forceLayoutAtOnce=function(t,e){this.batchImmediate(function(){t.forEach(function(t){t.offsetHeight}),e()})},et.batchImmediate=function(){var t=[];return function(e){0===t.length&&setImmediate(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(e)}}(),et.batchAnimationFrame=function(){var t=[],e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};return function(n){0===t.length&&e(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(n)}}(),et.transitionPropertyName=function(){if(et.hasCssProperty("transitionDuration"))return"transition";if(et.hasCssProperty(et.vendorPrefix+"TransitionDuration"))return et.vendorPrefix+"Transition";throw new Error("Invalid state")}();var nt=function t(e,n){if(!(this instanceof t))return new t(e,n);if(e instanceof HTMLElement)this.elements=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("First argument must be an array or an instance of HTMLElement.");this.elements=e}this.defaults=n,this.transitionQueue=[],this.lastStyleAttributeDict=[]};nt.prototype={transitionQueue:void 0,elements:void 0,defaults:void 0,play:function(t){return"function"==typeof t&&this.transitionQueue.push(function(e){t(),e()}),this.startAnimation(),this},default:function(t,e,n){function i(t,e,n){return void 0!==t.duration&&(e=t.duration),void 0!==t.timing&&(n=t.timing),{css:t.css||t,duration:e,timing:n}}return this.saveStyle().queue(i(t,0,this.defaults.timing)).wait(void 0===n?this.defaults.delay:n).queue(i(e,this.defaults.duration,this.defaults.timing)).restoreStyle()},queue:function(t,e){var n=this.transitionQueue;if(t&&e&&(e.css=t,t=new nt.Transition(e)),t instanceof Function||t instanceof nt.Transition||(t=new nt.Transition(t.css?t:{css:t})),t instanceof Function)n.push(t);else{if(!(t instanceof nt.Transition))throw new Error("Invalid arguments");n.push(t.build())}return this},wait:function(t){return t>0&&this.transitionQueue.push(function(e){setTimeout(e,1e3*t)}),this},saveStyle:function(){return this.transitionQueue.push(function(t){this.elements.forEach(function(t,e){for(var n=this.lastStyleAttributeDict[e]={},i=0;i<t.style.length;i++)n[t.style[i]]=t.style[t.style[i]]}.bind(this)),t()}.bind(this)),this},restoreStyle:function(t){var e=this;if((t=t||{}).transition&&!t.duration)throw new Error('"options.duration" is required when "options.transition" is enabled.');var n=et.transitionPropertyName;if(t.transition||t.duration&&t.duration>0){var i=t.transition||"all "+t.duration+"s "+(t.timing||"linear");this.transitionQueue.push(function(o){var r,a=this.elements,s=function(){a.forEach(function(t){t.style[n]=""})},l=et.onceOnTransitionEnd(a[0],function(){clearTimeout(r),s(),o()});r=setTimeout(function(){l(),s(),o()},1e3*t.duration*1.4),a.forEach(function(t,o){var r=e.lastStyleAttributeDict[o];if(!r)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[o]=void 0;for(var a,s=0,l=t.style.length;s<l;s++)a=t.style[s],void 0===r[a]&&(r[a]="");t.style[n]=i,Object.keys(r).forEach(function(e){e!==n&&(t.style[e]=r[e])}),t.style[n]=i})})}else this.transitionQueue.push(function(t){e.elements.forEach(function(t,i){t.style[n]="none";var o=e.lastStyleAttributeDict[i];if(!o)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[i]=void 0;for(var r=0;r<t.style.length;r++)t.style[r],void 0===o[t.style[r]]&&(o[t.style[r]]="");Object.keys(o).forEach(function(e){t.style[e]=o[e]})}),t()});return this},startAnimation:function(){return this._dequeueTransition(),this},_dequeueTransition:function(){var t=this.transitionQueue.shift();if(this._currentTransition)throw new Error("Current transition exists.");this._currentTransition=t;var e=this,n=!1;t&&t.call(this,function(){if(n)throw new Error("Invalid state: This callback is called twice.");n=!0,e._currentTransition=void 0,e._dequeueTransition()})}},nt.runAll=function(){for(var t=0;t<arguments.length;t++)arguments[t].play()},(nt.Transition=function(t){this.options=t||{},this.options.duration=this.options.duration||0,this.options.timing=this.options.timing||"linear",this.options.css=this.options.css||{},this.options.property=this.options.property||"all"}).prototype={build:function(){if(0===Object.keys(this.options.css).length)throw new Error("options.css is required.");var t=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(et.hasCssProperty(n))e[n]=i;else{var o=et.vendorPrefix+et.capitalize(n);et.hasCssProperty(o)?e[o]=i:(e[o]=i,e[n]=i)}}),e}(this.options.css);if(this.options.duration>0){var e=et.buildTransitionValue(this.options),n=this;return function(i){var o,r=this.elements,a=1e3*n.options.duration*1.4,s=et.onceOnTransitionEnd(r[0],function(){clearTimeout(o),i()});o=setTimeout(function(){s(),i()},a),r.forEach(function(n){n.style[et.transitionPropertyName]=e,Object.keys(t).forEach(function(e){n.style[e]=t[e]})})}}if(this.options.duration<=0)return function(e){var n=this.elements;n.forEach(function(e){e.style[et.transitionPropertyName]="",Object.keys(t).forEach(function(n){e.style[n]=t[n]})}),n.length>0?et.forceLayoutAtOnce(n,function(){et.batchAnimationFrame(e)}):et.batchAnimationFrame(e)}}};var it,ot,rt,at,st=function t(e,n){return new t.Instance(e,n||{})};st.defaults={behavior:{touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},st.DOCUMENT=document,st.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,st.HAS_TOUCHEVENTS="ontouchstart"in window,st.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),st.NO_MOUSEEVENTS=st.HAS_TOUCHEVENTS&&st.IS_MOBILE||st.HAS_POINTEREVENTS,st.CALCULATE_INTERVAL=25;var lt={},ut=st.DIRECTION_DOWN="down",ct=st.DIRECTION_LEFT="left",ht=st.DIRECTION_UP="up",dt=st.DIRECTION_RIGHT="right",ft=st.POINTER_MOUSE="mouse",pt=st.POINTER_TOUCH="touch",gt=st.POINTER_PEN="pen",mt=st.EVENT_START="start",_t=st.EVENT_MOVE="move",vt=st.EVENT_END="end",bt=st.EVENT_RELEASE="release",yt=st.EVENT_TOUCH="touch";st.READY=!1,st.plugins=st.plugins||{},st.gestures=st.gestures||{},ot=st.utils={extend:function(t,e,n){for(var i in e)!e.hasOwnProperty(i)||void 0!==t[i]&&n||(t[i]=e[i]);return t},on:function(t,e,n,i){Q.addEventListener(t,e,n,i,!0)},off:function(t,e,n,i){Q.removeEventListener(t,e,n,i,!0)},each:function(t,e,n){var i,o;if("forEach"in t)t.forEach(e,n);else if(void 0!==t.length){for(i=0,o=t.length;i<o;i++)if(!1===e.call(n,t[i],i,t))return}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return},inStr:function(t,e){return t.indexOf(e)>-1},inArray:function(t,e,n){if(n){for(var i=0,o=t.length;i<o;i++)if(Object.keys(e).every(function(n){return t[i][n]===e[n]}))return i;return-1}if(t.indexOf)return t.indexOf(e);for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1},toArray:function(t){return Array.prototype.slice.call(t,0)},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],n=[],i=[],o=[],r=Math.min,a=Math.max;return 1===t.length?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(ot.each(t,function(t){e.push(t.pageX),n.push(t.pageY),i.push(t.clientX),o.push(t.clientY)}),{pageX:(r.apply(Math,e)+a.apply(Math,e))/2,pageY:(r.apply(Math,n)+a.apply(Math,n))/2,clientX:(r.apply(Math,i)+a.apply(Math,i))/2,clientY:(r.apply(Math,o)+a.apply(Math,o))/2})},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(t,e){return Math.abs(t.clientX-e.clientX)>=Math.abs(t.clientY-e.clientY)?t.clientX-e.clientX>0?ct:dt:t.clientY-e.clientY>0?ht:ut},getDistance:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==ht||t==ut},setPrefixedCss:function(t,e,n,i){var o=["","Webkit","Moz","O","ms"];e=ot.toCamelCase(e);for(var r=0;r<o.length;r++){var a=e;if(o[r]&&(a=o[r]+a.slice(0,1).toUpperCase()+a.slice(1)),a in t.style){t.style[a]=(null===i||i)&&n||"";break}}},toggleBehavior:function(t,e,n){if(e&&t&&t.style){ot.each(e,function(e,i){ot.setPrefixedCss(t,i,e,n)});var i=n&&function(){return!1};"none"==e.userSelect&&(t.onselectstart=i),"none"==e.userDrag&&(t.ondragstart=i)}},toCamelCase:function(t){return t.replace(/[_-]([a-z])/g,function(t){return t[1].toUpperCase()})}},it=st.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.on(t,e,n,i),o&&o(e)})},off:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.off(t,e,n,i),o&&o(e)})},onTouch:function(t,e,n,i){var o=this,r=function(i){var r,a=i.type.toLowerCase(),s=st.HAS_POINTEREVENTS,l=ot.inStr(a,"mouse");l&&o.preventMouseEvents||(l&&e==mt&&0===i.button?(o.preventMouseEvents=!1,o.shouldDetect=!0):s&&e==mt?o.shouldDetect=1===i.buttons||at.matchType(pt,i):l||e!=mt||(o.preventMouseEvents=!0,o.shouldDetect=!0),s&&e!=vt&&at.updatePointer(e,i),o.shouldDetect&&(r=o.doDetect.call(o,i,e,t,n)),r==vt&&(o.preventMouseEvents=!1,o.shouldDetect=!1,at.reset()),s&&e==vt&&at.updatePointer(e,i))};return this.on(t,lt[e],r,i),r},doDetect:function(t,e,n,i){var o=this.getTouchList(t,e),r=o.length,a=e,s=o.trigger,l=r;e==mt?s=yt:e==vt&&(s=bt,l=o.length-(t.changedTouches?t.changedTouches.length:1)),l>0&&this.started&&(a=_t),this.started=!0;var u=this.collectEventData(n,a,o,t);return e!=vt&&i.call(rt,u),s&&(u.changedLength=l,u.eventType=s,i.call(rt,u),u.eventType=a,delete u.changedLength),a==vt&&(i.call(rt,u),this.started=!1),a},determineEventTypes:function(){var t;return t=st.HAS_POINTEREVENTS?window.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:st.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],lt[mt]=t[0],lt[_t]=t[1],lt[vt]=t[2],lt},getTouchList:function(t,e){if(st.HAS_POINTEREVENTS)return at.getTouchList();if(t.touches){if(e==_t)return t.touches;var n=[],i=[].concat(ot.toArray(t.touches),ot.toArray(t.changedTouches)),o=[];return ot.each(i,function(t){-1===ot.inArray(n,t.identifier)&&o.push(t),n.push(t.identifier)}),o}return t.identifier=1,[t]},collectEventData:function(t,e,n,i){var o=pt;return ot.inStr(i.type,"mouse")||at.matchType(ft,i)?o=ft:at.matchType(gt,i)&&(o=gt),{center:ot.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:e,pointerType:o,srcEvent:i,preventDefault:function(){var t=this.srcEvent;t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return rt.stopDetect()}}}},at=st.PointerEvent={pointers:{},getTouchList:function(){var t=[];return ot.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,e){t==vt||t!=vt&&1!==e.buttons?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e)},matchType:function(t,e){if(!e.pointerType)return!1;var n=e.pointerType,i={};return i[ft]=n===(e.MSPOINTER_TYPE_MOUSE||ft),i[pt]=n===(e.MSPOINTER_TYPE_TOUCH||pt),i[gt]=n===(e.MSPOINTER_TYPE_PEN||gt),i[t]},reset:function(){this.pointers={}}},rt=st.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:ot.extend({},e),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst,n=e.options;return ot.each(this.gestures,function(i){!this.stopped&&e.enabled&&n[i.name]&&i.handler.call(i,t,e)},this),this.current&&(this.current.lastEvent=t),t.eventType==vt&&this.stopDetect(),t}},stopDetect:function(){this.previous=ot.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(t,e,n,i,o){var r=this.current,a=!1,s=r.lastCalcEvent,l=r.lastCalcData;s&&t.timeStamp-s.timeStamp>st.CALCULATE_INTERVAL&&(e=s.center,n=t.timeStamp-s.timeStamp,i=t.center.clientX-s.center.clientX,o=t.center.clientY-s.center.clientY,a=!0),t.eventType!=yt&&t.eventType!=bt||(r.futureCalcEvent=t),r.lastCalcEvent&&!a||(l.velocity=ot.getVelocity(n,i,o),l.angle=ot.getAngle(e,t.center),l.direction=ot.getDirection(e,t.center),r.lastCalcEvent=r.futureCalcEvent||t,r.futureCalcEvent=t),t.velocityX=l.velocity.x,t.velocityY=l.velocity.y,t.interimAngle=l.angle,t.interimDirection=l.direction},extendEventData:function(t){var e=this.current,n=e.startEvent,i=e.lastEvent||n;t.eventType!=yt&&t.eventType!=bt||(n.touches=[],ot.each(t.touches,function(t){n.touches.push({clientX:t.clientX,clientY:t.clientY})}));var o=t.timeStamp-n.timeStamp,r=t.center.clientX-n.center.clientX,a=t.center.clientY-n.center.clientY;return this.getCalculatedData(t,i.center,o,r,a),ot.extend(t,{startEvent:n,deltaTime:o,deltaX:r,deltaY:a,distance:ot.getDistance(n.center,t.center),angle:ot.getAngle(n.center,t.center),direction:ot.getDirection(n.center,t.center),scale:ot.getScale(n.touches,t.touches),rotation:ot.getRotation(n.touches,t.touches)}),t},register:function(t){var e=t.defaults||{};return void 0===e[t.name]&&(e[t.name]=!0),ot.extend(st.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},st.Instance=function(t,e){var n=this,i=e&&e.passive?{passive:!0}:void 0;!function(t){st.READY||(it.determineEventTypes(),ot.each(st.gestures,function(t){rt.register(t)}),it.onTouch(st.DOCUMENT,_t,rt.detect,t),it.onTouch(st.DOCUMENT,vt,rt.detect,t),st.READY=!0)}(i),this.element=t,this.enabled=!0,ot.each(e,function(t,n){delete e[n],e[ot.toCamelCase(n)]=t}),this.options=ot.extend(ot.extend({},st.defaults),e||{}),this.options.listenerOptions=i,this.options.behavior&&ot.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=it.onTouch(t,mt,function(t){n.enabled&&t.eventType==mt?rt.startDetect(n,t):t.eventType==yt&&rt.detect(t)},i),this.eventHandlers=[]},st.Instance.prototype={on:function(t,e,n){var i=this;return it.on(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){i.eventHandlers.push({gesture:t,handler:e})}),i},off:function(t,e,n){var i=this;return it.off(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){var n=ot.inArray(i.eventHandlers,{gesture:t,handler:e},!0);n>=0&&i.eventHandlers.splice(n,1)}),i},trigger:function(t,e){e||(e={});var n=st.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var i=this.element;return ot.hasParent(e.target,i)&&(i=e.target),i.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,e;for(ot.toggleBehavior(this.element,this.options.behavior,!1),t=-1;e=this.eventHandlers[++t];)ot.off(this.element,e.gesture,e.handler);return this.eventHandlers=[],it.off(this.element,lt[mt],this.eventStartHandler),null}},function(t){var e=!1;st.gestures.Drag={name:t,index:50,handler:function(n,i){var o=rt.current;if(!(i.options.dragMaxTouches>0&&n.touches.length>i.options.dragMaxTouches))switch(n.eventType){case mt:e=!1;break;case _t:if(n.distance<i.options.dragMinDistance&&o.name!=t)return;var r=o.startEvent.center;if(o.name!=t&&(o.name=t,i.options.dragDistanceCorrection&&n.distance>0)){var a=Math.abs(i.options.dragMinDistance/n.distance);r.pageX+=n.deltaX*a,r.pageY+=n.deltaY*a,r.clientX+=n.deltaX*a,r.clientY+=n.deltaY*a,n=rt.extendEventData(n)}(o.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=n.distance)&&(n.dragLockToAxis=!0);var s=o.lastEvent.direction;n.dragLockToAxis&&s!==n.direction&&(ot.isVertical(s)?n.direction=n.deltaY<0?ht:ut:n.direction=n.deltaX<0?ct:dt),e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),i.trigger(t+n.direction,n);var l=ot.isVertical(n.direction);(i.options.dragBlockVertical&&l||i.options.dragBlockHorizontal&&!l)&&n.preventDefault();break;case bt:e&&n.changedLength<=i.options.dragMaxTouches&&(i.trigger(t+"end",n),e=!1);break;case vt:e=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),st.gestures.Gesture={name:"gesture",index:1337,handler:function(t,e){e.trigger(this.name,t)}},function(t){var e;st.gestures.Hold={name:t,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(n,i){var o=i.options,r=rt.current;switch(n.eventType){case mt:clearTimeout(e),r.name=t,e=setTimeout(function(){r&&r.name==t&&i.trigger(t,n)},o.holdTimeout);break;case _t:n.distance>o.holdThreshold&&clearTimeout(e);break;case bt:clearTimeout(e)}}}}("hold"),st.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==bt&&e.trigger(this.name,t)}},st.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(t,e){if(t.eventType==bt){var n=t.touches.length,i=e.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(t.velocityX>i.swipeVelocityX||t.velocityY>i.swipeVelocityY)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},function(t){var e=!1;st.gestures.Tap={name:t,index:100,handler:function(n,i){var o,r,a=i.options,s=rt.current,l=rt.previous;switch(n.eventType){case mt:e=!1;break;case _t:e=e||n.distance>a.tapMaxDistance;break;case vt:!ot.inStr(n.srcEvent.type,"cancel")&&n.deltaTime<a.tapMaxTime&&!e&&(o=l&&l.lastEvent&&n.timeStamp-l.lastEvent.timeStamp,r=!1,l&&l.name==t&&o&&o<a.doubleTapInterval&&n.distance<a.doubleTapDistance&&(i.trigger("doubletap",n),r=!0),r&&!a.tapAlways||(s.name=t,i.trigger(s.name,n)))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),st.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(t,e){e.options.preventMouse&&t.pointerType==ft?t.stopDetect():(e.options.preventDefault&&t.preventDefault(),t.eventType==yt&&e.trigger("touch",t))}},function(t){var e=!1;st.gestures.Transform={name:t,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(n,i){switch(n.eventType){case mt:e=!1;break;case _t:if(n.touches.length<2)return;var o=Math.abs(1-n.scale),r=Math.abs(n.rotation);if(o<i.options.transformMinScale&&r<i.options.transformMinRotation)return;rt.current.name=t,e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),r>i.options.transformMinRotation&&i.trigger("rotate",n),o>i.options.transformMinScale&&(i.trigger("pinch",n),i.trigger("pinch"+(n.scale<1?"in":"out"),n));break;case bt:e&&n.changedLength<2&&(i.trigger(t+"end",n),e=!1)}}}}("transform");var kt=void 0,wt=void 0,Et=new(function(){function t(){p(this,t),this.queue=[]}return g(t,[{key:"add",value:function(t,e){var n=this;this.queue.push(t),1===this.queue.length&&setImmediate(this.queue[0]),e.then(function(){n.queue.shift(),n.queue.length>0&&setTimeout(n.queue[0],1e3/30)})}}]),t}()),Ct=function(t,e){["id","class","animation"].forEach(function(n){return e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}),e.modifier&&Q.addModifier(t,e.modifier)},At=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=_({},e),"string"==typeof t?e.message=t:e=t,e&&(e.message||e.messageHTML)||Q.throw("Notifications must contain a message"),(e.hasOwnProperty("buttonLabels")||e.hasOwnProperty("buttonLabel"))&&(e.buttonLabels=e.buttonLabels||e.buttonLabel,Array.isArray(e.buttonLabels)||(e.buttonLabels=[e.buttonLabels||""])),Q.extend({compile:function(t){return t},callback:function(t){return t},animation:"default",cancelable:!1,primaryButtonIndex:(e.buttonLabels||n.buttonLabels||[]).length-1},n,e)},St={};St._createAlertDialog=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new Promise(function(t){var i=At.apply(void 0,e);Q.checkMissingImport("AlertDialog","AlertDialogButton");var o="";i.isPrompt&&(o='\n      <input\n        class="text-input text-input--underbar"\n        type="'+(i.inputType||"text")+'"\n        placeholder="'+(i.placeholder||"")+'"\n        value="'+(i.defaultValue||"")+'"\n        style="width: 100%; margin-top: 10px;"\n      />\n    ');var r="";i.buttonLabels.forEach(function(t,e){r+='\n      <ons-alert-dialog-button\n        class="\n          '+(e===i.primaryButtonIndex?" alert-dialog-button--primal":"")+"\n          "+(i.buttonLabels.length<=2?" alert-dialog-button--rowfooter":"")+'\n        "\n        style="position: relative;">\n        '+t+"\n      </ons-alert-dialog-button>\n    "});var a={},s=function(){a.dialog.onDialogCancel&&a.dialog.removeEventListener("dialog-cancel",a.dialog.onDialogCancel),Object.keys(a).forEach(function(t){return delete a[t]}),a=null,i.destroy instanceof Function&&i.destroy()};a.dialog=document.createElement("ons-alert-dialog"),a.dialog.innerHTML='\n    <div class="alert-dialog-mask"\n      style="\n        '+(i.maskColor?"background-color: "+i.maskColor:"")+'\n      "></div>\n    <div class="alert-dialog">\n      <div class="alert-dialog-container">\n        <div class="alert-dialog-title">\n          '+(i.title||"")+'\n        </div>\n        <div class="alert-dialog-content">\n          '+(i.message||i.messageHTML)+"\n          "+o+'\n        </div>\n        <div class="\n          alert-dialog-footer\n          '+(i.buttonLabels.length<=2?" alert-dialog-footer--rowfooter":"")+'\n        ">\n          '+r+"\n        </div>\n      </div>\n    </div>\n  ",n(a.dialog),Ct(a.dialog,i),i.isPrompt&&i.submitOnEnter&&(a.input=a.dialog.querySelector(".text-input"),a.input.onkeypress=function(e){13===e.keyCode&&a.dialog.hide().then(function(){if(a){var e=a.input.value;s(),i.callback(e),t(e)}})}),a.footer=a.dialog.querySelector(".alert-dialog-footer"),Q.arrayFrom(a.dialog.querySelectorAll(".alert-dialog-button")).forEach(function(e,n){e.onclick=function(){a.dialog.hide().then(function(){if(a){var e=n;i.isPrompt&&(e=n===i.primaryButtonIndex?a.input.value:null),a.dialog.remove(),s(),i.callback(e),t(e)}})},a.footer.appendChild(e)}),i.cancelable&&(a.dialog.cancelable=!0,a.dialog.onDialogCancel=function(){setImmediate(function(){a.dialog.remove(),s()});var e=i.isPrompt?null:-1;i.callback(e),t(e)},a.dialog.addEventListener("dialog-cancel",a.dialog.onDialogCancel,!1)),document.body.appendChild(a.dialog),i.compile(a.dialog),setImmediate(function(){a.dialog.show().then(function(){if(a.input&&i.isPrompt&&i.autofocus){var t=a.input.value.length;a.input.focus(),a.input.setSelectionRange(t,t)}})})})},St.alert=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert"})},St.confirm=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["Cancel","OK"],title:"Confirm"})},St.prompt=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert",isPrompt:!0,autofocus:!0,submitOnEnter:!0})},St.toast=function(t,e){var n=new Promise(function(i){Q.checkMissingImport("Toast"),e=At(t,e,{timeout:0,force:!1});var o=Q.createElement("\n      <ons-toast>\n        "+e.message+"\n        "+(e.buttonLabels?"<button>"+e.buttonLabels[0]+"</button>":"")+"\n      </ons-toast>\n    ");Ct(o,e);var r=function(t){o&&o.hide().then(function(){o&&(o.remove(),o=null,e.callback(t),i(t))})};e.buttonLabels&&(Q.findChild(o._toast,"button").onclick=function(){return r(0)}),document.body.appendChild(o),e.compile(o);var a=function(){o.parentElement&&o.show(e).then(function(){e.timeout&&setTimeout(function(){return r(-1)},e.timeout)})};setImmediate(function(){return e.force?a():Et.add(a,n)})});return n};var Pt=function(){};Pt.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},once:function(t,e){var n=this;this.on(t,function i(){return n.off(t,i),e.apply(null,arguments)})},off:function(t,e){this._events=this._events||{},t in this._events!=!1&&(this._events[t]=this._events[t].filter(function(t){return!!e&&e!==t}))},emit:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},Pt.mixin=function(t){for(var e=["on","once","off","emit"],n=0;n<e.length;n++)"function"==typeof t?t.prototype[e[n]]=Pt.prototype[e[n]]:t[e[n]]=Pt.prototype[e[n]]},window.MicroEvent=Pt;var Ot=function(){var t={_isPortrait:!1,isPortrait:function(){return this._isPortrait()},isLandscape:function(){return!this.isPortrait()},_init:function(){return document.addEventListener("DOMContentLoaded",this._onDOMContentLoaded.bind(this),!1),"orientation"in window?window.addEventListener("orientationchange",this._onOrientationChange.bind(this),!1):window.addEventListener("resize",this._onResize.bind(this),!1),this._isPortrait=function(){return window.innerHeight>window.innerWidth},this},_onDOMContentLoaded:function(){this._installIsPortraitImplementation(),this.emit("change",{isPortrait:this.isPortrait()})},_installIsPortraitImplementation:function(){var t=window.innerWidth<window.innerHeight;"orientation"in window?window.orientation%180==0?this._isPortrait=function(){return 0===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return 90===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return window.innerHeight>window.innerWidth}},_onOrientationChange:function(){var t=this,e=this._isPortrait(),n=0,i=setInterval(function(){n++;var o=window.innerWidth,r=window.innerHeight;e&&o<=r||!e&&o>=r?(t.emit("change",{isPortrait:e}),clearInterval(i)):50===n&&(t.emit("change",{isPortrait:e}),clearInterval(i))},20)},_onResize:function(){this.emit("change",{isPortrait:this.isPortrait()})}};return Pt.mixin(t),t}()._init(),xt={add:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.addModifier(t,e)})},remove:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.removeModifier(t,e)})},contains:Q.hasModifier,toggle:Q.toggleModifier},Tt=new Pt;Tt._visible=!1;var Lt=function(){Tt._visible=!0,Tt.emit("show")},Mt=function(){Tt._visible=!1,Tt.emit("hide")},Dt=function(){Q.warn("ons-keyboard: Cordova Keyboard plugin is not present.")};document.addEventListener("deviceready",function(){("undefined"!=typeof Keyboard?(Keyboard.onshow=Lt,Keyboard.onhide=Mt,Tt.emit("init",{visible:Keyboard.isVisible}),!0):void 0!==cordova.plugins&&void 0!==cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",Lt),window.addEventListener("native.keyboardhide",Mt),Tt.emit("init",{visible:cordova.plugins.Keyboard.isVisible}),!0))||((document.querySelector("[ons-keyboard-active]")||document.querySelector("[ons-keyboard-inactive]"))&&Dt(),Tt.on=Dt)});var It=function(){var t=0;return function(){return t++}}(),Nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this._lockList=[],this._waitList=[],this._log=e.log||function(){}}return g(t,[{key:"lock",value:function(){var t=this,e=function e(){t._unlock(e)};return e.id=It(),this._lockList.push(e),this._log("lock: "+e.id),e}},{key:"_unlock",value:function(t){var e=this._lockList.indexOf(t);if(-1===e)throw new Error("This function is not registered in the lock list.");this._lockList.splice(e,1),this._log("unlock: "+t.id),this._tryToFreeWaitList()}},{key:"_tryToFreeWaitList",value:function(){for(;!this.isLocked()&&this._waitList.length>0;)this._waitList.shift()()}},{key:"waitUnlock",value:function(t){if(!(t instanceof Function))throw new Error("The callback param must be a function.");this.isLocked()?this._waitList.push(t):t()}},{key:"isLocked",value:function(){return this._lockList.length>0}}]),t}(),Bt=function(){function t(e,n){p(this,t),this._loader=e instanceof Function?e:function(t,e){var n=t.page,i=t.parent;t.params,P.getPageHTMLAsync(n).then(function(t){var n=Q.createElement(t);i.appendChild(n),e(n)})},this._unloader=n instanceof Function?n:i}return g(t,[{key:"load",value:function(t,e){var n=t.page,i=t.parent,o=t.params,r=void 0===o?{}:o;this._loader({page:n,parent:i,params:r},function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");e(t)})}},{key:"unload",value:function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");this._unloader(t)}},{key:"internalLoader",set:function(t){if(!(t instanceof Function))throw Error("First parameter must be an instance of Function");this._loader=t},get:function(){return this._loader}}]),t}(),jt=new Bt,Ht=new Bt(function(t,e){var n=t.page,i=t.parent,o=(t.params,Q.createElement(n.trim()));i.appendChild(o),e(o)},i),Rt={animit:nt,defaultPageLoader:jt,elements:c,GestureDetector:st,modifier:xt,notification:St,orientation:Ot,pageAttributeExpression:S,PageLoader:Bt,platform:C,softwareKeyboard:Tt,_autoStyle:N,_internal:P,_readyLock:new Nt,_util:Q};Rt.platform.select((window.location.search.match(/platform=([\w-]+)/)||[])[1]),function(){var t=Rt._readyLock.lock();window.addEventListener("DOMContentLoaded",function(){Rt.isWebView()?window.document.addEventListener("deviceready",t,!1):t()},!1)}();var Ft=function(t){return Q.throw("This method must be called "+(t?"after":"before")+" ons.isReady() is true")};Rt.isReady=function(){return!Rt._readyLock.isLocked()},Rt.isWebView=Rt.platform.isWebView,Rt.ready=function(t){Rt.isReady()?t():Rt._readyLock.waitUnlock(t)},Rt.setDefaultDeviceBackButtonListener=function(t){Rt.isReady()||Ft(!0),Rt._defaultDeviceBackButtonHandler.setListener(t)},Rt.disableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.disable()},Rt.enableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.enable()},Rt.fireDeviceBackButtonEvent=function(){P.dbbDispatcher.fireDeviceBackButtonEvent()},Rt.enableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!0},Rt.disableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!1},Rt.mockStatusBar=function(){Rt.isReady()&&Ft(!1);var t=function(){if(!document.body.children[0]||!document.body.children[0].classList.contains("ons-status-bar-mock")){var t=C.isAndroid(),e=function(t){return'<i class="'+t.split("-")[0]+" "+t+'"></i>'},n=t?e("zmdi-twitter")+" "+e("zmdi-google-play"):"No SIM "+e("fa-wifi"),i=t?"":"12:28 PM",o=t?e("zmdi-network")+" "+e("zmdi-wifi")+" "+e("zmdi-battery")+" 12:28 PM":"80% "+e("fa-battery-three-quarters");document.body.insertBefore(Q.createElement('<div class="ons-status-bar-mock '+(t?"android":"ios")+'"><div>'+n+"</div><div>"+i+"</div><div>"+o+"</div></div>"),document.body.firstChild)}};document.body?t():P.waitDOMContentLoaded(t)},Rt.disableAnimations=function(){P.config.animationsDisabled=!0},Rt.enableAnimations=function(){P.config.animationsDisabled=!1},Rt._disableWarnings=function(){P.config.warningsDisabled=!0},Rt._enableWarnings=function(){P.config.warningsDisabled=!1},Rt.disableAutoStyling=N.disable,Rt.enableAutoStyling=N.enable,Rt.disableIconAutoPrefix=function(){Q.checkMissingImport("Icon"),c.Icon.setAutoPrefix(!1)},Rt.forceUIWebViewScrollFix=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];P.config.forceUIWebViewScrollFix=t},Rt.forcePlatformStyling=function(t){Rt.enableAutoStyling(),Rt.platform.select(t||"ios"),Rt._util.arrayFrom(document.querySelectorAll("*")).forEach(function(t){"ons-if"===t.tagName.toLowerCase()?t._platformUpdate():t.tagName.match(/^ons-/i)&&(N.prepare(t,!0),"ons-tabbar"===t.tagName.toLowerCase()&&t._updatePosition())})},Rt.preload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all((t instanceof Array?t:[t]).map(function(t){return"string"!=typeof t&&Q.throw("Expected string arguments but got "+(void 0===t?"undefined":f(t))),P.getTemplateHTMLAsync(t)}))},Rt.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(t){var n=Rt._util.createElement(t);if(n.remove(),e.append){(e.append instanceof HTMLElement?e.append:document.body).insertBefore(n,e.insertBefore||null),e.link instanceof Function&&e.link(n)}return n};return"<"===(t=t.trim()).charAt(0)?n(t):P.getPageHTMLAsync(t).then(n)},Rt.createPopover=Rt.createDialog=Rt.createAlertDialog=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rt.createElement(t,_({append:!0},e))},Rt.openActionSheet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e){Q.checkMissingImport("ActionSheet"),function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Function";return Q.throw('"options.'+t+'" must be an instance of '+e)},n=function(e){return Object.hasOwnProperty.call(t,e)},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function;return t[e]instanceof n},o="buttons",r="callback",a="compile",s="destroy";(!n(o)||!i(o,Array))&&e(o,"Array"),n(r)&&!i(r)&&e(r),n(a)&&!i(a)&&e(a),n(s)&&!i(s)&&e(s)}(t);var n=Q.createElement("\n    <ons-action-sheet\n      "+(t.title?'title="'+t.title+'"':"")+"\n      "+(t.cancelable?"cancelable":"")+"\n      "+(t.modifier?'modifier="'+t.modifier+'"':"")+"\n      "+(t.maskColor?'mask-color="'+t.maskColor+'"':"")+"\n      "+(t.id?'id="'+t.id+'"':"")+"\n      "+(t.class?'class="'+t.class+'"':"")+'\n    >\n      <div class="action-sheet"></div>\n    </ons-action-sheet>\n  '),i=function i(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n&&(t.destroy&&t.destroy(n),n.removeEventListener("dialog-cancel",i,!1),n.remove(),n=null,t.callback&&t.callback(r),e(r))};n.addEventListener("dialog-cancel",i,!1);var o=document.createDocumentFragment();t.buttons.forEach(function(e,r){var a="string"==typeof e?{label:e}:_({},e);t.destructive===r&&(a.modifier=(a.modifier||"")+" destructive");var s=Q.createElement("\n      <ons-action-sheet-button\n        "+(a.icon?'icon="'+a.icon+'"':"")+"\n        "+(a.modifier?'modifier="'+a.modifier+'"':"")+"\n      >\n        "+a.label+"\n      </ons-action-sheet-button>\n    ");s.onclick=function(t){return n.hide().then(function(){return i(t,r)})},o.appendChild(s)}),Q.findChild(n,".action-sheet").appendChild(o),document.body.appendChild(n),t.compile&&t.compile(el.dialog),setImmediate(function(){return n.show({animation:t.animation,animationOptions:t.animationOptions})})})},Rt.resolveLoadingPlaceholder=function(t,e){var n=Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]"));0===n.length&&Q.throw("No ons-loading-placeholder exists"),n.filter(function(t){return!t.getAttribute("page")}).forEach(function(n){n.setAttribute("ons-loading-placeholder",t),Rt._resolveLoadingPlaceholder(n,t,e)})},Rt._setupLoadingPlaceHolders=function(){Rt.ready(function(){Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]")).forEach(function(t){var e=t.getAttribute("ons-loading-placeholder");"string"==typeof e&&Rt._resolveLoadingPlaceholder(t,e)})})},Rt._resolveLoadingPlaceholder=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return e()};e&&Rt.createElement(e).then(function(e){e.style.display="none",t.appendChild(e),n(e,function(){for(;t.firstChild&&t.firstChild!==e;)t.removeChild(t.firstChild);e.style.display=""})}).catch(function(t){return Promise.reject("Unabled to resolve placeholder: "+t)})};var qt="currentScript"in document?function(){return document.currentScript}:function(){return document.scripts[document.scripts.length-1]};Rt.getScriptPage=function(){return qt()&&/ons-page/i.test(qt().parentElement.tagName)&&qt().parentElement||null};var zt=o(function(t){!function(){function e(t,n){var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=0,s=r.length;a<s;a++)this[r[a]]=function(t,e){return function(){return t.apply(e,arguments)}}(this[r[a]],this);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(t){o(t)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!n,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=o&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0,l=["email","number","password","search","tel","text","url"];e.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},e.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},e.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},e.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type&&"email"!==t.type&&"number"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},e.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},e.prototype.isTextField=function(t){return"textarea"===t.tagName.toLowerCase()||-1!==l.indexOf(t.type)},e.prototype.onTouchStart=function(t){var e,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],e.isContentEditable)return!0;if(o){if(e===document.activeElement&&this.isTextField(e))return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1&&t.preventDefault(),!0},e.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(t){var e,n,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(u=t.changedTouches[0],(c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=c.tagName.toLowerCase())){if(e=this.findControl(c)){if(this.focus(c),i)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-n>100||o&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),r&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return!(!o||r||!(l=c.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},e.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},e.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(t){var e,n,o;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},e.attach=function(t,n){return new e(t,n)},t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()}).FastClick;window.customElements&&(window.customElements.forcePolyfill=!0);var Vt=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Wt=o(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),Ut=(Wt.version,function(t){return"object"===(void 0===t?"undefined":f(t))?null!==t:"function"==typeof t}),Xt=function(t){if(!Ut(t))throw TypeError(t+" is not an object!");return t},Yt=function(t){try{return!!t()}catch(t){return!0}},Gt=!Yt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),$t=Vt.document,Kt=Ut($t)&&Ut($t.createElement),Qt=function(t){return Kt?$t.createElement(t):{}},Jt=!Gt&&!Yt(function(){return 7!=Object.defineProperty(Qt("div"),"a",{get:function(){return 7}}).a}),Zt=function(t,e){if(!Ut(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Ut(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},te=Object.defineProperty,ee={f:Gt?Object.defineProperty:function(t,e,n){if(Xt(t),e=Zt(e,!0),Xt(n),Jt)try{return te(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},ne=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ie=Gt?function(t,e,n){return ee.f(t,e,ne(1,n))}:function(t,e,n){return t[e]=n,t},oe={}.hasOwnProperty,re=function(t,e){return oe.call(t,e)},ae=0,se=Math.random(),le=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ae+se).toString(36))},ue=o(function(t){var e=le("src"),n=Function.toString,i=(""+n).split("toString");Wt.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,o,r){var a="function"==typeof o;a&&(re(o,"name")||ie(o,"name",n)),t[n]!==o&&(a&&(re(o,e)||ie(o,e,t[n]?""+t[n]:i.join(String(n)))),t===Vt?t[n]=o:r?t[n]?t[n]=o:ie(t,n,o):(delete t[n],ie(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),ce=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},he=function(t,e,n){if(ce(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},de=function t(e,n,i){var o,r,a,s,l=e&t.F,u=e&t.G,c=e&t.P,h=e&t.B,d=u?Vt:e&t.S?Vt[n]||(Vt[n]={}):(Vt[n]||{}).prototype,f=u?Wt:Wt[n]||(Wt[n]={}),p=f.prototype||(f.prototype={});u&&(i=n);for(o in i)a=((r=!l&&d&&void 0!==d[o])?d:i)[o],s=h&&r?he(a,Vt):c&&"function"==typeof a?he(Function.call,a):a,d&&ue(d,o,a,e&t.U),f[o]!=a&&ie(f,o,s),c&&p[o]!=a&&(p[o]=a)};Vt.core=Wt,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128;var fe=de,pe={f:{}.propertyIsEnumerable},ge={}.toString,me=function(t){return ge.call(t).slice(8,-1)},_e=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==me(t)?t.split(""):Object(t)},ve=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},be=function(t){return _e(ve(t))},ye=Object.getOwnPropertyDescriptor,ke={f:Gt?ye:function(t,e){if(t=be(t),e=Zt(e,!0),Jt)try{return ye(t,e)}catch(t){}if(re(t,e))return ne(!pe.f.call(t,e),t[e])}},we=function(t,e){if(Xt(t),!Ut(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ee={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=he(Function.call,ke.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return we(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:we};fe(fe.S,"Object",{setPrototypeOf:Ee.set});Wt.Object.setPrototypeOf;var Ce=Vt["__core-js_shared__"]||(Vt["__core-js_shared__"]={}),Ae=function(t){return Ce[t]||(Ce[t]={})},Se=o(function(t){var e=Ae("wks"),n=Vt.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:le)("Symbol."+t))}).store=e}),Pe=Se("toStringTag"),Oe="Arguments"==me(function(){return arguments}()),xe=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Pe))?n:Oe?me(e):"Object"==(i=me(e))&&"function"==typeof e.callee?"Arguments":i},Te={};Te[Se("toStringTag")]="z",Te+""!="[object z]"&&ue(Object.prototype,"toString",function(){return"[object "+xe(this)+"]"},!0);var Le=Math.ceil,Me=Math.floor,De=function(t){return isNaN(t=+t)?0:(t>0?Me:Le)(t)},Ie={},Ne=Math.min,Be=function(t){return t>0?Ne(De(t),9007199254740991):0},je=Math.max,He=Math.min,Re=Ae("keys"),Fe=function(t){return Re[t]||(Re[t]=le(t))},qe=function(t){return function(e,n,i){var o,r=be(e),a=Be(r.length),s=function(t,e){return(t=De(t))<0?je(t+e,0):He(t,e)}(i,a);if(t&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}}(!1),ze=Fe("IE_PROTO"),Ve="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),We=Object.keys||function(t){return function(t,e){var n,i=be(t),o=0,r=[];for(n in i)n!=ze&&re(i,n)&&r.push(n);for(;e.length>o;)re(i,n=e[o++])&&(~qe(r,n)||r.push(n));return r}(t,Ve)},Ue=Gt?Object.defineProperties:function(t,e){Xt(t);for(var n,i=We(e),o=i.length,r=0;o>r;)ee.f(t,n=i[r++],e[n]);return t},Xe=Vt.document,Ye=Xe&&Xe.documentElement,Ge=Fe("IE_PROTO"),$e=function(){},Ke=function(){var t,e=Qt("iframe"),n=Ve.length;for(e.style.display="none",Ye.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ke=t.F;n--;)delete Ke.prototype[Ve[n]];return Ke()},Qe=Object.create||function(t,e){var n;return null!==t?($e.prototype=Xt(t),n=new $e,$e.prototype=null,n[Ge]=t):n=Ke(),void 0===e?n:Ue(n,e)},Je=ee.f,Ze=Se("toStringTag"),tn=function(t,e,n){t&&!re(t=n?t:t.prototype,Ze)&&Je(t,Ze,{configurable:!0,value:e})},en={};ie(en,Se("iterator"),function(){return this});var nn=function(t,e,n){t.prototype=Qe(en,{next:ne(1,n)}),tn(t,e+" Iterator")},on=function(t){return Object(ve(t))},rn=Fe("IE_PROTO"),an=Object.prototype,sn=Object.getPrototypeOf||function(t){return t=on(t),re(t,rn)?t[rn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?an:null},ln=Se("iterator"),un=!([].keys&&"next"in[].keys()),cn=function(){return this},hn=function(t,e,n,i,o,r,a){nn(n,e,i);var s,l,u,c=function(t){if(!un&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",d="values"==o,f=!1,p=t.prototype,g=p[ln]||p["@@iterator"]||o&&p[o],m=g||c(o),_=o?d?c("entries"):m:void 0,v="Array"==e?p.entries||g:g;if(v&&(u=sn(v.call(new t)))!==Object.prototype&&u.next&&(tn(u,h,!0),re(u,ln)||ie(u,ln,cn)),d&&g&&"values"!==g.name&&(f=!0,m=function(){return g.call(this)}),(un||f||!p[ln])&&ie(p,ln,m),Ie[e]=m,Ie[h]=cn,o)if(s={values:d?m:c("values"),keys:r?m:c("keys"),entries:_},a)for(l in s)l in p||ue(p,l,s[l]);else fe(fe.P+fe.F*(un||f),e,s);return s},dn=function(t){return function(e,n){var i,o,r=String(ve(e)),a=De(n),s=r.length;return a<0||a>=s?t?"":void 0:(i=r.charCodeAt(a))<55296||i>56319||a+1===s||(o=r.charCodeAt(a+1))<56320||o>57343?t?r.charAt(a):i:t?r.slice(a,a+2):o-56320+(i-55296<<10)+65536}}(!0);hn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=dn(e,n),this._i+=t.length,{value:t,done:!1})});var fn=Se("unscopables"),pn=Array.prototype;void 0==pn[fn]&&ie(pn,fn,{});var gn=function(t){pn[fn][t]=!0},mn=function(t,e){return{value:e,done:!!t}},_n=hn(Array,"Array",function(t,e){this._t=be(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,mn(1)):"keys"==e?mn(0,n):"values"==e?mn(0,t[n]):mn(0,[n,t[n]])},"values");Ie.Arguments=Ie.Array,gn("keys"),gn("values"),gn("entries");for(var vn=Se("iterator"),bn=Se("toStringTag"),yn=Ie.Array,kn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wn=We(kn),En=0;En<wn.length;En++){var Cn,An=wn[En],Sn=kn[An],Pn=Vt[An],On=Pn&&Pn.prototype;if(On&&(On[vn]||ie(On,vn,yn),On[bn]||ie(On,bn,An),Ie[An]=yn,Sn))for(Cn in _n)On[Cn]||ue(On,Cn,_n[Cn],!0)}var xn=function(t,e,n){for(var i in e)ue(t,i,e[i],n);return t},Tn=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},Ln=function(t,e,n,i){try{return i?e(Xt(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&Xt(o.call(t)),e}},Mn=Se("iterator"),Dn=Array.prototype,In=function(t){return void 0!==t&&(Ie.Array===t||Dn[Mn]===t)},Nn=Se("iterator"),Bn=Wt.getIteratorMethod=function(t){if(void 0!=t)return t[Nn]||t["@@iterator"]||Ie[xe(t)]},jn=o(function(t){var e={},n={},i=t.exports=function(t,i,o,r,a){var s,l,u,c,h=a?function(){return t}:Bn(t),d=he(o,r,i?2:1),f=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(In(h)){for(s=Be(t.length);s>f;f++)if((c=i?d(Xt(l=t[f])[0],l[1]):d(t[f]))===e||c===n)return c}else for(u=h.call(t);!(l=u.next()).done;)if((c=Ln(u,d,l.value,i))===e||c===n)return c};i.BREAK=e,i.RETURN=n}),Hn=Se("species"),Rn=o(function(t){var e=le("meta"),n=ee.f,i=0,o=Object.isExtensible||function(){return!0},r=!Yt(function(){return o(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!Ut(t))return"symbol"==(void 0===t?"undefined":f(t))?t:("string"==typeof t?"S":"P")+t;if(!re(t,e)){if(!o(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!re(t,e)){if(!o(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return r&&s.NEED&&o(t)&&!re(t,e)&&a(t),t}}}),Fn=(Rn.KEY,Rn.NEED,Rn.fastKey,Rn.getWeak,Rn.onFreeze,function(t,e){if(!Ut(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),qn=ee.f,zn=Rn.fastKey,Vn=Gt?"_s":"size",Wn=function(t,e){var n,i=zn(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n},Un={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=Qe(null),t._f=void 0,t._l=void 0,t[Vn]=0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{clear:function(){for(var t=Fn(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[Vn]=0},delete:function(t){var n=Fn(this,e),i=Wn(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[Vn]--}return!!i},forEach:function(t){Fn(this,e);for(var n,i=he(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Wn(Fn(this,e),t)}}),Gt&&qn(o.prototype,"size",{get:function(){return Fn(this,e)[Vn]}}),o},def:function(t,e,n){var i,o,r=Wn(t,e);return r?r.v=n:(t._l=r={i:o=zn(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[Vn]++,"F"!==o&&(t._i[o]=r)),t},getEntry:Wn,setStrong:function(t,e,n){hn(t,e,function(t,n){this._t=Fn(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?"keys"==t?mn(0,e.k):"values"==t?mn(0,e.v):mn(0,[e.k,e.v]):(this._t=void 0,mn(1))},n?"entries":"values",!n,!0),function(t){var e=Vt[t];Gt&&e&&!e[Hn]&&ee.f(e,Hn,{configurable:!0,get:function(){return this}})}(e)}},Xn=Se("iterator"),Yn=!1;try{[7][Xn]().return=function(){Yn=!0}}catch(t){}var Gn=function(t,e){if(!e&&!Yn)return!1;var n=!1;try{var i=[7],o=i[Xn]();o.next=function(){return{done:n=!0}},i[Xn]=function(){return o},t(i)}catch(t){}return n},$n=Ee.set,Kn=function(t,e,n,i,o,r){var a=Vt[t],s=a,l=o?"set":"add",u=s&&s.prototype,c={},h=function(t){var e=u[t];ue(u,t,"delete"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!Ut(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(r||u.forEach&&!Yt(function(){(new s).entries().next()}))){var d=new s,f=d[l](r?{}:-0,1)!=d,p=Yt(function(){d.has(1)}),g=Gn(function(t){new s(t)}),m=!r&&Yt(function(){for(var t=new s,e=5;e--;)t[l](e,e);return!t.has(-0)});g||((s=e(function(e,n){Tn(e,s,t);var i=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&Ut(i)&&$n&&$n(t,i),t}(new a,e,s);return void 0!=n&&jn(n,o,i[l],i),i})).prototype=u,u.constructor=s),(p||m)&&(h("delete"),h("has"),o&&h("get")),(m||f)&&h(l),r&&u.clear&&delete u.clear}else s=i.getConstructor(e,t,o,l),xn(s.prototype,n),Rn.NEED=!0;return tn(s,t),c[t]=s,fe(fe.G+fe.W+fe.F*(s!=a),c),r||i.setStrong(s,t,o),s},Qn=(Kn("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Un.def(Fn(this,"Set"),t=0===t?0:t,t)}},Un),function(t){return function(){if(xe(this)!=t)throw TypeError(t+"#toJSON isn't generic");return function(t,e){var n=[];return jn(t,!1,n.push,n,e),n}(this)}});fe(fe.P+fe.R,"Set",{toJSON:Qn("Set")});var Jn=function(t){fe(fe.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Jn("Set");var Zn=function(t){fe(fe.S,t,{from:function(t){var e,n,i,o,r=arguments[1];return ce(this),(e=void 0!==r)&&ce(r),void 0==t?new this:(n=[],e?(i=0,o=he(r,arguments[2],2),jn(t,!1,function(t){n.push(o(t,i++))})):jn(t,!1,n.push,n),new this(n))}})};Zn("Set");Wt.Set,Kn("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=Un.getEntry(Fn(this,"Map"),t);return e&&e.v},set:function(t,e){return Un.def(Fn(this,"Map"),0===t?0:t,e)}},Un,!0);fe(fe.P+fe.R,"Map",{toJSON:Qn("Map")}),Jn("Map"),Zn("Map");Wt.Map;var ti=Array.isArray||function(t){return"Array"==me(t)},ei=Se("species"),ni=function(t,e){var n=1==t,i=2==t,o=3==t,r=4==t,a=6==t,s=5==t||a,l=e||function(t,e){return new(function(t){var e;return ti(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!ti(e.prototype)||(e=void 0),Ut(e)&&null===(e=e[ei])&&(e=void 0)),void 0===e?Array:e}(t))(e)};return function(e,u,c){for(var h,d,f=on(e),p=_e(f),g=he(u,c,3),m=Be(p.length),_=0,v=n?l(e,m):i?l(e,0):void 0;m>_;_++)if((s||_ in p)&&(h=p[_],d=g(h,_,f),t))if(n)v[_]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return _;case 2:v.push(h)}else if(r)return!1;return a?-1:o||r?r:v}},ii={f:Object.getOwnPropertySymbols},oi=Object.assign,ri=!oi||Yt(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=oi({},t)[n]||Object.keys(oi({},e)).join("")!=i})?function(t,e){for(var n=on(t),i=arguments.length,o=1,r=ii.f,a=pe.f;i>o;)for(var s,l=_e(arguments[o++]),u=r?We(l).concat(r(l)):We(l),c=u.length,h=0;c>h;)a.call(l,s=u[h++])&&(n[s]=l[s]);return n}:oi,ai=Rn.getWeak,si=ni(5),li=ni(6),ui=0,ci=function(t){return t._l||(t._l=new hi)},hi=function(){this.a=[]},di=function(t,e){return si(t.a,function(t){return t[0]===e})};hi.prototype={get:function(t){var e=di(this,t);if(e)return e[1]},has:function(t){return!!di(this,t)},set:function(t,e){var n=di(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=li(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var fi={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=ui++,t._l=void 0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{delete:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).delete(t):n&&re(n,this._i)&&delete n[this._i]},has:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).has(t):n&&re(n,this._i)}}),o},def:function(t,e,n){var i=ai(Xt(e),!0);return!0===i?ci(t).set(e,n):i[t._i]=n,t},ufstore:ci};o(function(t){var e,n=ni(0),i=Rn.getWeak,o=Object.isExtensible,r=fi.ufstore,a={},s=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},l={get:function(t){if(Ut(t)){var e=i(t);return!0===e?r(Fn(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return fi.def(Fn(this,"WeakMap"),t,e)}},u=t.exports=Kn("WeakMap",s,l,fi,!0,!0);Yt(function(){return 7!=(new u).set((Object.freeze||Object)(a),7).get(a)})&&(e=fi.getConstructor(s,"WeakMap"),ri(e.prototype,l),Rn.NEED=!0,n(["delete","has","get","set"],function(t){var n=u.prototype,i=n[t];ue(n,t,function(n,r){if(Ut(n)&&!o(n)){this._f||(this._f=new e);var a=this._f[t](n,r);return"set"==t?this:a}return i.call(this,n,r)})}))});Jn("WeakMap"),Zn("WeakMap");Wt.WeakMap;var pi=function(t,e,n){e in t?ee.f(t,e,ne(0,n)):t[e]=n};fe(fe.S+fe.F*!Gn(function(t){}),"Array",{from:function(t){var e,n,i,o,r=on(t),a="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,u=void 0!==l,c=0,h=Bn(r);if(u&&(l=he(l,s>2?arguments[2]:void 0,2)),void 0==h||a==Array&&In(h))for(n=new a(e=Be(r.length));e>c;c++)pi(n,c,u?l(r[c],c):r[c]);else for(o=h.call(r),n=new a;!(i=o.next()).done;c++)pi(n,c,u?Ln(o,l,[i.value,c],!0):i.value);return n.length=c,n}});Wt.Array.from;var gi=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),mi={custom:1,failed:2},_i=function(){function t(){p(this,t),this._localNameToDefinition=new Map,this._constructorToDefinition=new Map,this._patches=[],this._hasPatches=!1}return g(t,[{key:"setDefinition",value:function(t,e){this._localNameToDefinition.set(t,e),this._constructorToDefinition.set(e.constructor,e)}},{key:"localNameToDefinition",value:function(t){return this._localNameToDefinition.get(t)}},{key:"constructorToDefinition",value:function(t){return this._constructorToDefinition.get(t)}},{key:"addPatch",value:function(t){this._hasPatches=!0,this._patches.push(t)}},{key:"patchTree",value:function(t){var e=this;this._hasPatches&&l(t,function(t){return e.patch(t)})}},{key:"patch",value:function(t){if(this._hasPatches&&!t.__CE_patched){t.__CE_patched=!0;for(var e=0;e<this._patches.length;e++)this._patches[e](t)}}},{key:"connectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom?a(i)&&this.connectedCallback(i):this.upgradeElement(i)}}},{key:"disconnectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom&&this.disconnectedCallback(i)}}},{key:"patchAndUpgradeTree",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=[];if(l(t,function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var o=t.import;o instanceof Node&&"complete"===o.readyState?(o.__CE_isImportDocument=!0,o.__CE_hasRegistry=!0):t.addEventListener("load",function(){var i=t.import;i.__CE_documentLoadHandled||(i.__CE_documentLoadHandled=!0,i.__CE_isImportDocument=!0,i.__CE_hasRegistry=!0,n.delete(i),e.patchAndUpgradeTree(i,n))})}else i.push(t)},n),this._hasPatches)for(var o=0;o<i.length;o++)this.patch(i[o]);for(var r=0;r<i.length;r++)this.upgradeElement(i[r])}},{key:"upgradeElement",value:function(t){if(void 0===t.__CE_state){var e=this.localNameToDefinition(t.localName);if(e){e.constructionStack.push(t);var n=e.constructor;try{try{if(new n!==t)throw new Error("The custom element constructor did not produce the element being upgraded.")}finally{e.constructionStack.pop()}}catch(e){throw t.__CE_state=mi.failed,e}if(t.__CE_state=mi.custom,t.__CE_definition=e,e.attributeChangedCallback)for(var i=e.observedAttributes,o=0;o<i.length;o++){var r=i[o],s=t.getAttribute(r);null!==s&&this.attributeChangedCallback(t,r,null,s,null)}a(t)&&this.connectedCallback(t)}}}},{key:"connectedCallback",value:function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t),t.__CE_isConnectedCallbackCalled=!0}},{key:"disconnectedCallback",value:function(t){t.__CE_isConnectedCallbackCalled||this.connectedCallback(t);var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t),t.__CE_isConnectedCallbackCalled=void 0}},{key:"attributeChangedCallback",value:function(t,e,n,i,o){var r=t.__CE_definition;r.attributeChangedCallback&&r.observedAttributes.indexOf(e)>-1&&r.attributeChangedCallback.call(t,e,n,i,o)}}]),t}(),vi=function(){function t(e,n){p(this,t),this._internals=e,this._document=n,this._observer=void 0,this._internals.patchAndUpgradeTree(this._document),"loading"===this._document.readyState&&(this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this._document,{childList:!0,subtree:!0}))}return g(t,[{key:"disconnect",value:function(){this._observer&&this._observer.disconnect()}},{key:"_handleMutations",value:function(t){var e=this._document.readyState;"interactive"!==e&&"complete"!==e||this.disconnect();for(var n=0;n<t.length;n++)for(var i=t[n].addedNodes,o=0;o<i.length;o++){var r=i[o];this._internals.patchAndUpgradeTree(r)}}}]),t}(),bi=function(){function t(){var e=this;p(this,t),this._value=void 0,this._resolve=void 0,this._promise=new Promise(function(t){e._resolve=t,e._value&&t(e._value)})}return g(t,[{key:"resolve",value:function(t){if(this._value)throw new Error("Already resolved.");this._value=t,this._resolve&&this._resolve(t)}},{key:"toPromise",value:function(){return this._promise}}]),t}(),yi=function(){function t(e){p(this,t),this._elementDefinitionIsRunning=!1,this._internals=e,this._whenDefinedDeferred=new Map,this._flushCallback=function(t){return t()},this._flushPending=!1,this._unflushedLocalNames=[],this._documentConstructionObserver=new vi(e,document)}return g(t,[{key:"define",value:function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!r(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this._internals.localNameToDefinition(t))throw new Error("A custom element with name '"+t+"' has already been defined.");if(this._elementDefinitionIsRunning)throw new Error("A custom element is already being defined.");this._elementDefinitionIsRunning=!0;var i=void 0,o=void 0,a=void 0,s=void 0,l=void 0;try{var u=function(t){var e=c[t];if(void 0!==e&&!(e instanceof Function))throw new Error("The '"+t+"' callback must be a function.");return e},c=e.prototype;if(!(c instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");i=u("connectedCallback"),o=u("disconnectedCallback"),a=u("adoptedCallback"),s=u("attributeChangedCallback"),l=e.observedAttributes||[]}catch(t){return}finally{this._elementDefinitionIsRunning=!1}var h={localName:t,constructor:e,connectedCallback:i,disconnectedCallback:o,adoptedCallback:a,attributeChangedCallback:s,observedAttributes:l,constructionStack:[]};this._internals.setDefinition(t,h),this._unflushedLocalNames.push(t),this._flushPending||(this._flushPending=!0,this._flushCallback(function(){return n._flush()}))}},{key:"_flush",value:function(){if(!1!==this._flushPending)for(this._flushPending=!1,this._internals.patchAndUpgradeTree(document);this._unflushedLocalNames.length>0;){var t=this._unflushedLocalNames.shift(),e=this._whenDefinedDeferred.get(t);e&&e.resolve(void 0)}}},{key:"get",value:function(t){var e=this._internals.localNameToDefinition(t);if(e)return e.constructor}},{key:"whenDefined",value:function(t){if(!r(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this._whenDefinedDeferred.get(t);if(e)return e.toPromise();var n=new bi;this._whenDefinedDeferred.set(t,n);return this._internals.localNameToDefinition(t)&&-1===this._unflushedLocalNames.indexOf(t)&&n.resolve(void 0),n.toPromise()}},{key:"polyfillWrapFlushCallback",value:function(t){this._documentConstructionObserver.disconnect();var e=this._flushCallback;this._flushCallback=function(n){return t(function(){return e(n)})}}}]),t}();window.CustomElementRegistry=yi,yi.prototype.define=yi.prototype.define,yi.prototype.get=yi.prototype.get,yi.prototype.whenDefined=yi.prototype.whenDefined,yi.prototype.polyfillWrapFlushCallback=yi.prototype.polyfillWrapFlushCallback;var ki={Document_createElement:window.Document.prototype.createElement,Document_createElementNS:window.Document.prototype.createElementNS,Document_importNode:window.Document.prototype.importNode,Document_prepend:window.Document.prototype.prepend,Document_append:window.Document.prototype.append,Node_cloneNode:window.Node.prototype.cloneNode,Node_appendChild:window.Node.prototype.appendChild,Node_insertBefore:window.Node.prototype.insertBefore,Node_removeChild:window.Node.prototype.removeChild,Node_replaceChild:window.Node.prototype.replaceChild,Node_textContent:Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),Element_attachShadow:window.Element.prototype.attachShadow,Element_innerHTML:Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Element_getAttribute:window.Element.prototype.getAttribute,Element_setAttribute:window.Element.prototype.setAttribute,Element_removeAttribute:window.Element.prototype.removeAttribute,Element_getAttributeNS:window.Element.prototype.getAttributeNS,Element_setAttributeNS:window.Element.prototype.setAttributeNS,Element_removeAttributeNS:window.Element.prototype.removeAttributeNS,Element_insertAdjacentElement:window.Element.prototype.insertAdjacentElement,Element_prepend:window.Element.prototype.prepend,Element_append:window.Element.prototype.append,Element_before:window.Element.prototype.before,Element_after:window.Element.prototype.after,Element_replaceWith:window.Element.prototype.replaceWith,Element_remove:window.Element.prototype.remove,HTMLElement:window.HTMLElement,HTMLElement_innerHTML:Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),HTMLElement_insertAdjacentElement:window.HTMLElement.prototype.insertAdjacentElement},wi=new function t(){p(this,t)},Ei=function(t,e,n){e.prepend=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.prepend.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.append=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.append.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}}},Ci=window.customElements;if(!Ci||Ci.forcePolyfill||"function"!=typeof Ci.define||"function"!=typeof Ci.get){var Ai=new _i;!function(t){window.HTMLElement=function(){function e(){var e=this.constructor,n=t.constructorToDefinition(e);if(!n)throw new Error("The custom element being constructed was not registered with `customElements`.");var i=n.constructionStack;if(0===i.length){var o=ki.Document_createElement.call(document,n.localName);return Object.setPrototypeOf(o,e.prototype),o.__CE_state=mi.custom,o.__CE_definition=n,t.patch(o),o}var r=i.length-1,a=i[r];if(a===wi)throw new Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return i[r]=wi,Object.setPrototypeOf(a,e.prototype),t.patch(a),a}return e.prototype=ki.HTMLElement.prototype,e}()}(Ai),function(t){u(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.localNameToDefinition(e);if(n)return new n.constructor}var i=ki.Document_createElement.call(this,e);return t.patch(i),i}),u(Document.prototype,"importNode",function(e,n){var i=ki.Document_importNode.call(this,e,n);return this.__CE_hasRegistry?t.patchAndUpgradeTree(i):t.patchTree(i),i});u(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var i=t.localNameToDefinition(n);if(i)return new i.constructor}var o=ki.Document_createElementNS.call(this,e,n);return t.patch(o),o}),Ei(t,Document.prototype,{prepend:ki.Document_prepend,append:ki.Document_append})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType!==Node.TEXT_NODE){var i=void 0;if(this.firstChild){var o=this.childNodes,r=o.length;if(r>0&&a(this)){i=new Array(r);for(var s=0;s<r;s++)i[s]=o[s]}}if(n.set.call(this,e),i)for(var l=0;l<i.length;l++)t.disconnectTree(i[l])}else n.set.call(this,e)}})}u(Node.prototype,"insertBefore",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_insertBefore.call(this,e,n);if(a(this))for(var r=0;r<i.length;r++)t.connectTree(i[r]);return o}var s=a(e),l=ki.Node_insertBefore.call(this,e,n);return s&&t.disconnectTree(e),a(this)&&t.connectTree(e),l}),u(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var n=Array.prototype.slice.apply(e.childNodes),i=ki.Node_appendChild.call(this,e);if(a(this))for(var o=0;o<n.length;o++)t.connectTree(n[o]);return i}var r=a(e),s=ki.Node_appendChild.call(this,e);return r&&t.disconnectTree(e),a(this)&&t.connectTree(e),s}),u(Node.prototype,"cloneNode",function(e){var n=ki.Node_cloneNode.call(this,e);return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(n):t.patchTree(n),n}),u(Node.prototype,"removeChild",function(e){var n=a(e),i=ki.Node_removeChild.call(this,e);return n&&t.disconnectTree(e),i}),u(Node.prototype,"replaceChild",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_replaceChild.call(this,e,n);if(a(this)){t.disconnectTree(n);for(var r=0;r<i.length;r++)t.connectTree(i[r])}return o}var s=a(e),l=ki.Node_replaceChild.call(this,e,n),u=a(this);return u&&t.disconnectTree(n),s&&t.disconnectTree(e),u&&t.connectTree(e),l}),ki.Node_textContent&&ki.Node_textContent.get?e(Node.prototype,ki.Node_textContent):t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)ki.Node_removeChild.call(this,this.firstChild);ki.Node_appendChild.call(this,document.createTextNode(t))}})})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var i=this,o=void 0;if(a(this)&&(o=[],l(this,function(t){t!==i&&o.push(t)})),n.set.call(this,e),o)for(var r=0;r<o.length;r++){var s=o[r];s.__CE_state===mi.custom&&t.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(this):t.patchTree(this),e}})}function n(e,n){u(e,"insertAdjacentElement",function(e,i){var o=a(i),r=n.call(this,e,i);return o&&t.disconnectTree(i),a(r)&&t.connectTree(i),r})}if(ki.Element_attachShadow?u(Element.prototype,"attachShadow",function(t){var e=ki.Element_attachShadow.call(this,t);return this.__CE_shadowRoot=e,e}):console.warn("Custom Elements: `Element#attachShadow` was not patched."),ki.Element_innerHTML&&ki.Element_innerHTML.get)e(Element.prototype,ki.Element_innerHTML);else if(ki.HTMLElement_innerHTML&&ki.HTMLElement_innerHTML.get)e(HTMLElement.prototype,ki.HTMLElement_innerHTML);else{var i=ki.Document_createElement.call(document,"div");t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){return ki.Node_cloneNode.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName?this.content:this;for(i.innerHTML=t;e.childNodes.length>0;)ki.Node_removeChild.call(e,e.childNodes[0]);for(;i.childNodes.length>0;)ki.Node_appendChild.call(e,i.childNodes[0])}})})}u(Element.prototype,"setAttribute",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_setAttribute.call(this,e,n);var i=ki.Element_getAttribute.call(this,e);ki.Element_setAttribute.call(this,e,n),n=ki.Element_getAttribute.call(this,e),t.attributeChangedCallback(this,e,i,n,null)}),u(Element.prototype,"setAttributeNS",function(e,n,i){if(this.__CE_state!==mi.custom)return ki.Element_setAttributeNS.call(this,e,n,i);var o=ki.Element_getAttributeNS.call(this,e,n);ki.Element_setAttributeNS.call(this,e,n,i),i=ki.Element_getAttributeNS.call(this,e,n),t.attributeChangedCallback(this,n,o,i,e)}),u(Element.prototype,"removeAttribute",function(e){if(this.__CE_state!==mi.custom)return ki.Element_removeAttribute.call(this,e);var n=ki.Element_getAttribute.call(this,e);ki.Element_removeAttribute.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)}),u(Element.prototype,"removeAttributeNS",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_removeAttributeNS.call(this,e,n);var i=ki.Element_getAttributeNS.call(this,e,n);ki.Element_removeAttributeNS.call(this,e,n);var o=ki.Element_getAttributeNS.call(this,e,n);i!==o&&t.attributeChangedCallback(this,n,i,o,e)}),ki.HTMLElement_insertAdjacentElement?n(HTMLElement.prototype,ki.HTMLElement_insertAdjacentElement):ki.Element_insertAdjacentElement?n(Element.prototype,ki.Element_insertAdjacentElement):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Ei(t,Element.prototype,{prepend:ki.Element_prepend,append:ki.Element_append}),function(t,e,n){e.before=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.before.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.after=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.after.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.replaceWith=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)}),s=a(this);n.replaceWith.apply(this,i);for(var l=0;l<r.length;l++)t.disconnectTree(r[l]);if(s){t.disconnectTree(this);for(var u=0;u<i.length;u++){var c=i[u];c instanceof Element&&t.connectTree(c)}}},e.remove=function(){var e=a(this);n.remove.call(this),e&&t.disconnectTree(this)}}(t,Element.prototype,{before:ki.Element_before,after:ki.Element_after,replaceWith:ki.Element_replaceWith,remove:ki.Element_remove})}(Ai),document.__CE_hasRegistry=!0;var Si=new yi(Ai);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:Si})}!function(t){function e(){d=!1;var t=f;f=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();!function(t){t.nodes_.forEach(function(e){var n=u.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function n(t,e){for(var n=t;n;n=n.parentNode){var i=u.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],a=r.options;if(n===t||a.subtree){var s=e(a);s&&r.enqueue(s)}}}}function i(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++p}function o(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function r(t,e){return g=new o(t,e)}function a(t){return m||(m=function(t){var e=new o(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(g),m.oldValue=t,m)}function s(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var l,u=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))l=setTimeout;else if(window.setImmediate)l=window.setImmediate;else{var c=[],h=String(Math.random());window.addEventListener("message",function(t){if(t.data===h){var e=c;c=[],e.forEach(function(t){t()})}}),l=function(t){c.push(t),window.postMessage(h,"*")}}var d=!1,f=[],p=0;i.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=u.get(t);n||u.set(t,n=[]);for(var i,o=0;o<n.length;o++)if(n[o].observer===this){(i=n[o]).removeListeners(),i.options=e;break}i||(i=new s(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=u.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var g,m;s.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var o=function(t,e){return t===e?t:m&&function(t){return t===m||t===g}(t)?m:null}(n[i-1],t);if(o)return void(n[i-1]=o)}else!function(t){f.push(t),d||(d=!0,l(e))}(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=u.get(t);e||u.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=u.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,o=t.target;(s=new r("attributes",o)).attributeName=e,s.attributeNamespace=i;l=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;n(o,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(e)||-1!==t.attributeFilter.indexOf(i)))return t.attributeOldValue?a(l):s});break;case"DOMCharacterDataModified":var s=r("characterData",o=t.target),l=t.prevValue;n(o,function(t){if(t.characterData)return t.characterDataOldValue?a(l):s});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var u,c,h=t.target;"DOMNodeInserted"===t.type?(u=[h],c=[]):(u=[],c=[h]);var d=h.previousSibling,f=h.nextSibling;(s=r("childList",t.target.parentNode)).addedNodes=u,s.removedNodes=c,s.previousSibling=d,s.nextSibling=f,n(t.relatedNode,function(t){if(t.childList)return s})}g=m=void 0}},t.JsMutationObserver=i,t.MutationObserver||(t.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(t,e){function n(t){return l[s]=i.apply(e,t),s++}function i(t){var n=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,n):new Function(""+t)()}}function o(t){if(u)setTimeout(i(o,t),0);else{var e=l[t];if(e){u=!0;try{e()}finally{r(t),u=!1}}}}function r(t){delete l[t]}if(!t.setImmediate){var a,s=1,l={},u=!1,c=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(){var t=n(arguments);return process.nextTick(i(o,t)),t}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(){var i=n(arguments);return t.postMessage(e+i,"*"),i}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(){var e=n(arguments);return t.port2.postMessage(e),e}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;a=function(){var e=n(arguments),i=c.createElement("script");return i.onreadystatechange=function(){o(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i),e}}():a=function(){var t=n(arguments);return setTimeout(i(o,t),0),t},h.setImmediate=a,h.clearImmediate=r}}(self),function(){var t={ensureViewportElement:function(){var t=document.querySelector("meta[name=viewport]");return t||((t=document.createElement("meta")).name="viewport",document.head.appendChild(t)),t},setup:function(){var e=t.ensureViewportElement();e&&(e.hasAttribute("content")||e.setAttribute("content","width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"))}};window.Viewport=t}();var Pi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return b(e,t),e}(function(){if("function"!=typeof HTMLElement){var t=function(){};return t.prototype=document.createElement("div"),t}return HTMLElement}()),Oi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(t.template=t.innerHTML;t.firstChild;)t.removeChild(t.firstChild);return t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.parentNode&&this.parentNode!==document.body&&Q.warn("ons-template (id = "+this.getAttribute("id")+") must be located just under document.body"+(this.parentNode.outerHTML?":\n\n"+this.parentNode.outerHTML:"."));var t=new CustomEvent("_templateloaded",{bubbles:!0,cancelable:!0});t.template=this.template,t.templateId=this.getAttribute("id"),this.dispatchEvent(t)}}]),e}();c.Template=Oi,customElements.define("ons-template",Oi);var xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){if(null!==C._getSelectedPlatform())t._platformUpdate();else if(!t._isAllowedPlatform()){for(;t.childNodes[0];)t.childNodes[0].remove();t._platformUpdate()}}),t._onOrientationChange(),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Ot.on("change",this._onOrientationChange.bind(this))}},{key:"attributeChangedCallback",value:function(t){"orientation"===t&&this._onOrientationChange()}},{key:"disconnectedCallback",value:function(){Ot.off("change",this._onOrientationChange)}},{key:"_platformUpdate",value:function(){this.style.display=this._isAllowedPlatform()?"":"none"}},{key:"_isAllowedPlatform",value:function(){return!this.getAttribute("platform")||this.getAttribute("platform").split(/\s+/).indexOf(C.getMobileOS())>=0}},{key:"_onOrientationChange",value:function(){if(this.hasAttribute("orientation")&&this._isAllowedPlatform()){var t=this.getAttribute("orientation").toLowerCase(),e=Ot.isPortrait()?"portrait":"landscape";this.style.display=t===e?"":"none"}}}],[{key:"observedAttributes",get:function(){return["orientation"]}}]),e}();c.If=xi,customElements.define("ons-if",xi);var Ti=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.timing=e.timing||"linear",this.duration=e.duration||0,this.delay=e.delay||0,this.def={timing:this.timing,duration:this.duration,delay:this.delay}}return g(t,null,[{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=function(){e.apply(this,arguments),Q.extend(this,t)};return n.prototype=this.prototype,n}}]),t}(),Li={};Li.isIPhoneXPortraitPatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-portrait")&&window.innerWidth<window.innerHeight},Li.isIPhoneXLandscapePatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-landscape")&&window.innerWidth>=window.innerHeight},Li.getSafeAreaLengths=function(){return Li.isIPhoneXPortraitPatchActive()?{top:44,right:0,bottom:34,left:0}:Li.isIPhoneXLandscapePatchActive()?{top:0,right:44,bottom:21,left:44}:{top:0,right:0,bottom:0,left:0}},Li.getSafeAreaDOMRect=function(){var t=void 0;return t=Li.isIPhoneXPortraitPatchActive()?{x:0,y:44,width:window.innerWidth,height:window.innerHeight-78}:Li.isIPhoneXLandscapePatchActive()?{x:44,y:0,width:window.innerWidth-88,height:window.innerHeight-21}:{x:0,y:0,width:window.innerWidth,height:window.innerHeight},_({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})};var Mi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Di=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 80%, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, 80%, 0)",opacity:0}).queue(function(t){e&&e(),t()}))}}]),e}(),Ii=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 48px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 33px)":l.liftAmount=document.body.clientHeight/2-1+"px",l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.liftAmount+", 0)"}).queue(function(t){e&&e(),t()}))}}]),e}(),Ni=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),t._visible=!1,t._doorLock=new Nt,t._cancel=t._cancel.bind(t),t._selfCamelName=Q.camelize(t.tagName.slice(4)),t._defaultDBB=function(e){return t.cancelable?t._cancel():e.callParentHandler()},t._animatorFactory=t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"_updateAnimatorFactory",value:function(){Q.throwMember()}},{key:"_toggleStyle",value:function(t){this.style.display=t?"block":"none"}},{key:"_scheme",get:function(){Q.throwMember()}}]),g(e,[{key:"_cancel",value:function(){var t=this;this.cancelable&&!this._running&&(this._running=!0,this.hide().then(function(){t._running=!1,Q.triggerElementEvent(t,"dialog-cancel")},function(){return t._running=!1}))}},{key:"show",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!0].concat(e))}},{key:"hide",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!1].concat(e))}},{key:"toggle",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!this.visible].concat(e))}},{key:"_setVisible",value:function(t){var e,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?"show":"hide";(o=_({},o)).animationOptions=Q.extend(o.animationOptions||{},O.parseAnimationOptionsString(this.getAttribute("animation-options")));var a=!1;return Q.triggerElementEvent(this,"pre"+r,(e={},m(e,this._selfCamelName,this),m(e,"cancel",function(){return a=!0}),e)),a?Promise.reject("Canceled in pre"+r+" event."):new Promise(function(e){i._doorLock.waitUnlock(function(){var a=i._doorLock.lock(),s=i._animatorFactory.newAnimator(o);t&&i._toggleStyle(!0,o),i._visible=t,Q.iosPageScrollFix(t),n(i,function(){s[r](i,function(){!t&&i._toggleStyle(!1,o),a(),Q.propagateAction(i,"_"+r),Q.triggerElementEvent(i,"post"+r,m({},i._selfCamelName,i)),o.callback instanceof Function&&o.callback(i),e(i)})})})})}},{key:"_updateMask",value:function(){var t=this;n(this,function(){t._mask&&t.getAttribute("mask-color")&&(t._mask.style.backgroundColor=t.getAttribute("mask-color"))})}},{key:"connectedCallback",value:function(){var t=this;this.onDeviceBackButton=this._defaultDBB.bind(this),n(this,function(){t._mask&&(t._mask.addEventListener("click",t._cancel,!1),Q.iosMaskScrollFix(t._mask,!0))})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._mask&&(this._mask.removeEventListener("click",this._cancel,!1),Q.iosMaskScrollFix(this._mask,!1))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"animation":this._animatorFactory=this._updateAnimatorFactory();break;case"mask-color":this._updateMask()}}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"visible",get:function(){return this._visible}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"cancelable",set:function(t){return Q.toggleAttribute(this,"cancelable",t)},get:function(){return this.hasAttribute("cancelable")}}],[{key:"observedAttributes",get:function(){return["modifier","animation","mask-color"]}},{key:"events",get:function(){return["preshow","postshow","prehide","posthide","dialog-cancel"]}}]),e}(),Bi={".action-sheet":"action-sheet--*",".action-sheet-mask":"action-sheet-mask--*",".action-sheet-title":"action-sheet-title--*"},ji={default:function(){return C.isAndroid()?Di:Ii},none:Mi},Hi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:ji,baseClass:Mi,baseClassName:"ActionSheetAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._sheet){var t=document.createElement("div");for(t.classList.add("action-sheet");this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}if(!this._title&&this.hasAttribute("title")){var e=document.createElement("div");e.innerHTML=this.getAttribute("title"),e.classList.add("action-sheet-title"),this._sheet.insertBefore(e,this._sheet.firstChild)}if(!this._mask){var n=document.createElement("div");n.classList.add("action-sheet-mask"),this.insertBefore(n,this.firstChild)}this._sheet.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_updateTitle",value:function(){this._title&&(this._title.innerHTML=this.getAttribute("title"))}},{key:"attributeChangedCallback",value:function(t,n,i){"title"===t?this._updateTitle():v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Bi}},{key:"_mask",get:function(){return Q.findChild(this,".action-sheet-mask")}},{key:"_sheet",get:function(){return Q.findChild(this,".action-sheet")}},{key:"_title",get:function(){return this.querySelector(".action-sheet-title")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Mi||Q.throwAnimator("ActionSheet"),ji[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["title"])}},{key:"animators",get:function(){return ji}},{key:"ActionSheetAnimator",get:function(){return Mi}}]),e}();c.ActionSheet=Hi,customElements.define("ons-action-sheet",Hi);var Ri=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_scheme",get:function(){Q.throwMember()}},{key:"_defaultClassName",get:function(){Q.throwMember()}},{key:"_rippleOpt",get:function(){return[this]}}]),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add(this._defaultClassName),!this._icon&&this.hasAttribute("icon")){Q.checkMissingImport("Icon");var t=Q.createElement('<ons-icon icon="'+this.getAttribute("icon")+'"></ons-icon>');t.classList.add(this._defaultClassName.replace("button","icon")),this.insertBefore(t,this.firstChild)}this._updateRipple(),B.initModifier(this,this._scheme)}},{key:"_updateIcon",value:function(){this._icon&&this._icon.setAttribute("icon",this.getAttribute("icon"))}},{key:"_updateRipple",value:function(){this._rippleOpt&&Q.updateRipple.apply(Q,w(this._rippleOpt))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,this._defaultClassName,this._scheme);break;case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"icon":this._updateIcon();break;case"ripple":this.classList.contains(this._defaultClassName)&&this._updateRipple()}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"_icon",get:function(){return Q.findChild(this,"ons-icon")}}],[{key:"observedAttributes",get:function(){return["modifier","class","icon","ripple"]}}]),e}(),Fi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"action-sheet-button--*",".action-sheet-icon":"action-sheet-icon--*"}}},{key:"_defaultClassName",get:function(){return"action-sheet-button"}},{key:"_rippleOpt",get:function(){}}]),e}();c.ActionSheetButton=Fi,customElements.define("ons-action-sheet-button",Fi);var qi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),zi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1},{transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Vi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1.3, 1.3, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Wi={".alert-dialog":"alert-dialog--*",".alert-dialog-container":"alert-dialog-container--*",".alert-dialog-title":"alert-dialog-title--*",".alert-dialog-content":"alert-dialog-content--*",".alert-dialog-footer":"alert-dialog-footer--*",".alert-dialog-footer--rowfooter":"alert-dialog-footer--rowfooter--*",".alert-dialog-button--rowfooter":"alert-dialog-button--rowfooter--*",".alert-dialog-button--primal":"alert-dialog-button--primal--*",".alert-dialog-button":"alert-dialog-button--*","ons-alert-dialog-button":"alert-dialog-button--*",".alert-dialog-mask":"alert-dialog-mask--*",".text-input":"text-input--*"},Ui={none:qi,default:function(){return C.isAndroid()?zi:Vi},fade:function(){return C.isAndroid()?zi:Vi}},Xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Ui,baseClass:qi,baseClassName:"AlertDialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=10001;var t=document.createDocumentFragment();if(!this._mask&&!this._dialog)for(;this.firstChild;)t.appendChild(this.firstChild);if(!this._mask){var e=document.createElement("div");e.classList.add("alert-dialog-mask"),this.insertBefore(e,this.children[0])}if(!this._dialog){var n=document.createElement("div");n.classList.add("alert-dialog"),this.insertBefore(n,null)}if(!Q.findChild(this._dialog,".alert-dialog-container")){var i=document.createElement("div");i.classList.add("alert-dialog-container"),this._dialog.appendChild(i)}this._dialog.children[0].appendChild(t),this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Wi}},{key:"_mask",get:function(){return Q.findChild(this,".alert-dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".alert-dialog")}},{key:"_titleElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-title")}},{key:"_contentElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-content")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof qi||Q.throwAnimator("AlertDialog"),Ui[t]=e}},{key:"animators",get:function(){return Ui}},{key:"AlertDialogAnimator",get:function(){return qi}}]),e}();c.AlertDialog=Xi,customElements.define("ons-alert-dialog",Xi);var Yi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"alert-dialog-button--*"}}},{key:"_defaultClassName",get:function(){return"alert-dialog-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{modifier:"light-gray"}]}}]),e}();c.AlertDialogButton=Yi,customElements.define("ons-alert-dialog-button",Yi);var Gi={"":"back-button--*",".back-button__icon":"back-button--*__icon",".back-button__label":"back-button--*__label"},$i=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._options={},t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_updateIcon",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q.findChild(this,".back-button__icon")).innerHTML="android"===N.getPlatform(this)||Q.hasModifier(this,"material")?'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>md-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="android" transform="translate(-32.000000, -32.000000)" fill-rule="nonzero">\n            <polygon id="md-back-button-icon" points="48 39 35.83 39 41.42 33.41 40 32 32 40 40 48 41.41 46.59 35.83 41 48 41"></polygon>\n        </g>\n    </g>\n</svg>\n':'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="13px" height="21px" viewBox="0 0 13 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ios-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="ios" transform="translate(-34.000000, -30.000000)">\n            <polygon id="ios-back-button-icon" points="34 40.5 44.5 30 46.5 32 38 40.5 46.5 49 44.5 51"></polygon>\n        </g>\n    </g>\n</svg>\n'}},{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("back-button"),!Q.findChild(this,".back-button__label")){for(var t=Q.create("span.back-button__label");this.childNodes[0];)t.appendChild(this.childNodes[0]);this.appendChild(t)}if(!Q.findChild(this,".back-button__icon")){var e=Q.create("span.back-button__icon");this._updateIcon(e),this.insertBefore(e,this.children[0])}Q.updateRipple(this,void 0,{center:"",size:"contain",background:"transparent"}),B.initModifier(this,Gi)}},{key:"_onClick",value:function(){if(this.onClick)this.onClick.apply(this);else{var t=Q.findParent(this,"ons-navigator");t&&t.popPage(this.options)}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"back-button",Gi);break;case"modifier":B.onModifierChanged(e,n,this,Gi)&&this._updateIcon()}}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"show",value:function(){this.style.display="inline-block"}},{key:"hide",value:function(){this.style.display="none"}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BackButton=$i,customElements.define("ons-back-button",$i);var Ki="bottom-bar",Qi={"":"bottom-bar--*"},Ji=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.classList.add(Ki),B.initModifier(t,Qi),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-page")&&this.parentNode.classList.add("page-with-bottom-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,Ki,Qi);break;case"modifier":B.onModifierChanged(e,n,this,Qi)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BottomToolbar=Ji,customElements.define("ons-bottom-toolbar",Ji);var Zi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"button--*"}}},{key:"_defaultClassName",get:function(){return"button"}}]),e}();c.Button=Zi,customElements.define("ons-button",Zi);var to={"":"card--*",".card__title":"card--*__title",".card__content":"card--*__content"},eo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.classList.contains("title")?e.classList.add("card__title"):e.classList.contains("content")&&e.classList.add("card__content")}N.prepare(this),this.classList.add("card"),B.initModifier(this,to)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"card",to);break;case"modifier":B.onModifierChanged(e,n,this,to)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Card=eo,customElements.define("ons-card",eo);var no={"":"carousel-item--*"},io=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.style.width="100%",B.initModifier(t,no),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t)return B.onModifierChanged(e,n,this,no)}}],[{key:"observedAttributes",get:function(){return["modifier"]}}]),e}();c.CarouselItem=io,customElements.define("ons-carousel-item",io);var oo={vertical:{axis:"Y",size:"Height",dir:["up","down"],t3d:["0px, ","px, 0px"]},horizontal:{axis:"X",size:"Width",dir:["left","right"],t3d:["","px, 0px, 0px"]}},ro=function(){function t(e){var n=this;p(this,t);"getInitialIndex getBubbleWidth isVertical isOverScrollable isCentered\n    isAutoScrollable refreshHook preChangeHook postChangeHook overScrollHook".split(/\s+/).forEach(function(t){return n[t]=e[t]||function(){return!1}}),this.getElement=e.getElement,this.scrollHook=e.scrollHook,this.itemSize=e.itemSize||"100%",this.getAutoScrollRatio=function(){var t=e.getAutoScrollRatio&&e.getAutoScrollRatio.apply(e,arguments);return((t="number"==typeof t&&t==t?t:.5)<0||t>1)&&Q.throw("Invalid auto-scroll-ratio "+t+". Must be between 0 and 1"),t},this.shouldBlock="other"===Q.globals.actualMobileOS,this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onResize=this.onResize.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.swipeable,i=e.autoRefresh;this.initialized=!0,this.target=this.getElement().children[0],this.blocker=this.getElement().children[1],this.target&&this.blocker||Q.throw('Expected "target" and "blocker" elements to exist before initializing Swiper'),this.shouldBlock||(this.blocker.style.display="none"),this.getElement().classList.add("ons-swiper"),this.target.classList.add("ons-swiper-target"),this.blocker.classList.add("ons-swiper-blocker"),this._gestureDetector=new st(this.getElement(),{dragMinDistance:1,dragLockToAxis:!0,passive:!this._shouldFixScroll}),this._mutationObserver=new MutationObserver(function(){return t.refresh()}),this.updateSwipeable(n),this.updateAutoRefresh(i),this._scroll=this._offset=this._lastActiveIndex=0,this._updateLayout(),this._setupInitialIndex(),setImmediate(function(){return t.initialized&&t._setupInitialIndex()}),window===window.parent&&0!==this.offsetHeight||window.requestAnimationFrame(function(){return t.initialized&&t.onResize()})}},{key:"dispose",value:function(){this.initialized=!1,this.updateSwipeable(!1),this.updateAutoRefresh(!1),this._gestureDetector&&this._gestureDetector.dispose(),this.target=this.blocker=this._gestureDetector=this._mutationObserver=null,this.setupResize(!1)}},{key:"onResize",value:function(){var t=this._scroll/this.targetSize;this._reset(),this.setActiveIndex(t),this.refresh()}},{key:"_calculateItemSize",value:function(){var t=this.itemSize.match(/^(\d+)(px|%)/);t||Q.throw("Invalid state: swiper's size unit must be '%' or 'px'");var e=parseInt(t[1],10);return"%"===t[2]?Math.round(e/100*this.targetSize):e}},{key:"_setupInitialIndex",value:function(){this._reset(),this._lastActiveIndex=Math.max(Math.min(Number(this.getInitialIndex()),this.itemCount),0),this._scroll=this._offset+this.itemNumSize*this._lastActiveIndex,this._scrollTo(this._scroll)}},{key:"_setSwiping",value:function(t){this.target.classList.toggle("swiping",t)}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._setSwiping(!0),t=Math.max(0,Math.min(t,this.itemCount-1));var i=Math.max(0,Math.min(this.maxScroll,this._offset+this.itemNumSize*t));if(C.isUIWebView()){var o=function(t){return Array.prototype.concat.apply([],t)}(Q.arrayFrom(this.target.children).map(function(t){return Q.arrayFrom(t.children).filter(function(t){return t.classList.contains("page__content")})})),r=new Map;return new Promise(function(t){o.forEach(function(t){r.set(t,t.getAttribute("class")),t.classList.add("page__content--suppress-layer-creation")}),requestAnimationFrame(t)}).then(function(){return e._changeTo(i,n)}).then(function(){return new Promise(function(t){o.forEach(function(t){t.setAttribute("class",r.get(t))}),requestAnimationFrame(t)})})}return this._changeTo(i,n)}},{key:"getActiveIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._scroll;t-=this._offset;var e=this.itemCount,n=this.itemNumSize;if(0===this.itemNumSize||!Q.isInteger(t))return this._lastActiveIndex;if(t<=0)return 0;for(var i=0;i<e;i++)if(n*i<=t&&n*(i+1)>t)return i;return e-1}},{key:"setupResize",value:function(t){window[(t?"add":"remove")+"EventListener"]("resize",this.onResize,!0)}},{key:"show",value:function(){var t=this;this.setupResize(!0),this.onResize(),setTimeout(function(){return t.target&&t.target.classList.add("active")},1e3/60)}},{key:"hide",value:function(){this.setupResize(!1),this.target.classList.remove("active")}},{key:"updateSwipeable",value:function(t){if(this._gestureDetector){var e=t?"on":"off";this._gestureDetector[e]("drag",this.onDrag),this._gestureDetector[e]("dragstart",this.onDragStart),this._gestureDetector[e]("dragend",this.onDragEnd)}}},{key:"updateAutoRefresh",value:function(t){this._mutationObserver&&(t?this._mutationObserver.observe(this.target,{childList:!0}):this._mutationObserver.disconnect())}},{key:"updateItemSize",value:function(t){this.itemSize=t||"100%",this.refresh()}},{key:"toggleBlocker",value:function(t){this.blocker.style.pointerEvents=t?"auto":"none"}},{key:"_canConsumeGesture",value:function(t){var e=t.direction,n=0===this._scroll&&!this.isOverScrollable(),i=this._scroll===this.maxScroll&&!this.isOverScrollable();return this.isVertical()?"down"===e&&!n||"up"===e&&!i:"right"===e&&!n||"left"===e&&!i}},{key:"onDragStart",value:function(t){var e=this;if(this._ignoreDrag=t.consumed||!Q.isValidGesture(t),!this._ignoreDrag){var n=t.consume;if(t.consume=function(){n&&n(),e._ignoreDrag=!0},this._canConsumeGesture(t.gesture)){var i=t.gesture.center&&t.gesture.center.clientX||0,o=this.getBubbleWidth()||0,r=function(){n&&n(),t.consumed=!0,e._started=!0,e.shouldBlock&&e.toggleBlocker(!0),e._setSwiping(!0),Q.iosPreventScroll(e._gestureDetector)};i<o||i>this.targetSize-o?setImmediate(function(){return!e._ignoreDrag&&r()}):r()}}}},{key:"onDrag",value:function(t){t.gesture&&!this._ignoreDrag&&this._started&&(this._continued=!0,t.stopPropagation(),this._scrollTo(this._scroll-this._getDelta(t),{throttle:!0}))}},{key:"onDragEnd",value:function(t){if(this._started=!1,t.gesture&&!this._ignoreDrag&&this._continued){this._continued=!1,t.stopPropagation();var e=this._scroll-this._getDelta(t),n=this._normalizeScroll(e);e===n?this._startMomentumScroll(e,t):this._killOverScroll(n),this.shouldBlock&&this.toggleBlocker(!1)}else this._ignoreDrag=!0}},{key:"_startMomentumScroll",value:function(t,e){var n=this._getVelocity(e),i=e.gesture.interimDirection===this.dM.dir[this._getDelta(e)<0?0:1],o=this._getAutoScroll(t,n,i),r=Math.abs(o-t)/(n+.01)/1e3;r=Math.min(.25,Math.max(.1,r)),this._changeTo(o,{swipe:!0,animationOptions:{duration:r,timing:"cubic-bezier(.4, .7, .5, 1)"}})}},{key:"_killOverScroll",value:function(t){var e=this;this._scroll=t;var n=this.dM.dir[Number(t>0)],i=function(){return e._changeTo(t,{animationOptions:{duration:.4,timing:"cubic-bezier(.1, .4, .1, 1)"}})};this.overScrollHook({direction:n,killOverScroll:i})||i()}},{key:"_changeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={activeIndex:this.getActiveIndex(t),lastActiveIndex:this._lastActiveIndex,swipe:n.swipe||!1},o=i.activeIndex!==i.lastActiveIndex,r=!!o&&this.preChangeHook(i);return this._scroll=r?this._offset+i.lastActiveIndex*this.itemNumSize:t,this._lastActiveIndex=r?i.lastActiveIndex:i.activeIndex,this._scrollTo(this._scroll,n).then(function(){if(t!==e._scroll||r){if(n.reject)return e._setSwiping(!1),Promise.reject("Canceled")}else e._setSwiping(!1),o&&e.postChangeHook(i)})}},{key:"_scrollTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.throttle){if(t<0)t=this.isOverScrollable()?Math.round(.35*t):0;else{var i=this.maxScroll;i<t&&(t=this.isOverScrollable()?i+Math.round(.35*(t-i)):i)}}var o="none"===n.animation?{}:n.animationOptions;return this.scrollHook&&this.itemNumSize>0&&this.scrollHook((t/this.itemNumSize).toFixed(2),n.animationOptions||{}),new Promise(function(n){return nt(e.target).queue({transform:e._getTransform(t)},o).play(n)})}},{key:"_getAutoScroll",value:function(t,e,n){var i=this.maxScroll,o=this._offset,r=this.itemNumSize;if(!this.isAutoScrollable())return Math.max(0,Math.min(i,t));for(var a=[],s=o;s<i;s+=r)a.push(s);a.push(i);var l=(a=a.sort(function(e,n){return Math.abs(e-t)-Math.abs(n-t)}).filter(function(t,e){return!e||t!==a[e-1]}))[0],u=this._lastActiveIndex*r+o,c=Math.abs(t-u)/r;return c<=this.getAutoScrollRatio(n,e,r)?l=u:c<1&&a[0]===u&&a.length>1&&(l=a[1]),Math.max(0,Math.min(i,l))}},{key:"_reset",value:function(){this._targetSize=this._itemNumSize=void 0}},{key:"_normalizeScroll",value:function(t){return Math.max(Math.min(t,this.maxScroll),0)}},{key:"refresh",value:function(){if(this._reset(),this._updateLayout(),Q.isInteger(this._scroll)){var t=this._normalizeScroll(this._scroll);t!==this._scroll?this._killOverScroll(t):this._changeTo(t)}else this._setupInitialIndex();this.refreshHook()}},{key:"_getDelta",value:function(t){return t.gesture["delta"+this.dM.axis]}},{key:"_getVelocity",value:function(t){return t.gesture["velocity"+this.dM.axis]}},{key:"_getTransform",value:function(t){return"translate3d("+this.dM.t3d[0]+-t+this.dM.t3d[1]+")"}},{key:"_updateLayout",value:function(){this.dM=oo[this.isVertical()?"vertical":"horizontal"],this.target.classList.toggle("ons-swiper-target--vertical",this.isVertical());for(var t=this.target.children[0];t;t=t.nextElementSibling)t.style[this.dM.size.toLowerCase()]=this.itemSize;this.isCentered()&&(this._offset=(this.targetSize-this.itemNumSize)/-2||0)}},{key:"itemCount",get:function(){return this.target.children.length}},{key:"itemNumSize",get:function(){return"number"==typeof this._itemNumSize&&this._itemNumSize==this._itemNumSize||(this._itemNumSize=this._calculateItemSize()),this._itemNumSize}},{key:"maxScroll",get:function(){var t=this.itemCount*this.itemNumSize-this.targetSize;return Math.ceil(t<0?0:t)}},{key:"targetSize",get:function(){return this._targetSize||(this._targetSize=this.target["offset"+this.dM.size]),this._targetSize}}]),t}(),ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this.children[0]&&"ONS-CAROUSEL-ITEM"!==this.children[0].tagName&&this.children[0]||document.createElement("div");if(!t.parentNode){for(;this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}!this.children[1]&&this.appendChild(document.createElement("div")),this.appendChild=this.appendChild.bind(t),this.insertBefore=this.insertBefore.bind(t)}},{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t},getInitialIndex:function(){return t.getAttribute("initial-index")},getAutoScrollRatio:function(){return t.autoScrollRatio},isVertical:function(){return t.vertical},isOverScrollable:function(){return t.overscrollable},isCentered:function(){return t.centered},isAutoScrollable:function(){return t.autoScroll},itemSize:this.itemSize,overScrollHook:this._onOverScroll.bind(this),preChangeHook:this._onChange.bind(this,"prechange"),postChangeHook:this._onChange.bind(this,"postchange"),refreshHook:this._onRefresh.bind(this),scrollHook:function(){return t._onSwipe&&t._onSwipe.apply(t,arguments)}}),n(this,function(){return t._swiper.init({swipeable:t.hasAttribute("swipeable"),autoRefresh:t.hasAttribute("auto-refresh")})}))}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null)}},{key:"attributeChangedCallback",value:function(t,e,n){if(this._swiper)switch(t){case"swipeable":this._swiper.updateSwipeable(this.hasAttribute("swipeable"));break;case"auto-refresh":this._swiper.updateAutoRefresh(this.hasAttribute("auto-refresh"));break;case"item-height":this.vertical&&this._swiper.updateItemSize(this.itemSize);break;case"item-width":this.vertical||this._swiper.updateItemSize(this.itemSize);break;case"direction":this._swiper.refresh()}}},{key:"_show",value:function(){this._swiper.show()}},{key:"_hide",value:function(){this._swiper.hide()}},{key:"_onOverScroll",value:function(t){var e=t.direction,n=t.killOverScroll,i=!1;return Q.triggerElementEvent(this,"overscroll",{carousel:this,activeIndex:this.getActiveIndex(),direction:e,waitToReturn:function(t){i=!0,t.then(n)}}),i}},{key:"_onChange",value:function(t,e){var n=e.activeIndex,i=e.lastActiveIndex;Q.triggerElementEvent(this,t,{carousel:this,activeIndex:n,lastActiveIndex:i})}},{key:"_onRefresh",value:function(){Q.triggerElementEvent(this,"refresh",{carousel:this})}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=_({animation:this.getAttribute("animation"),animationOptions:this.hasAttribute("animation-options")?Q.animationOptionsParse(this.getAttribute("animation-options")):{duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"}},n),this._swiper.setActiveIndex(t,n).then(function(){return n.callback instanceof Function&&n.callback(e),Promise.resolve(e)})}},{key:"getActiveIndex",value:function(){return this._swiper.getActiveIndex()}},{key:"next",value:function(t){return this.setActiveIndex(this.getActiveIndex()+1,t)}},{key:"prev",value:function(t){return this.setActiveIndex(this.getActiveIndex()-1,t)}},{key:"first",value:function(t){return this.setActiveIndex(0,t)}},{key:"last",value:function(t){this.setActiveIndex(Math.max(this.itemCount-1,0),t)}},{key:"refresh",value:function(){this._swiper.refresh()}},{key:"itemCount",get:function(){return this._swiper.itemCount}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"autoScroll",get:function(){return this.hasAttribute("auto-scroll")},set:function(t){return Q.toggleAttribute(this,"auto-scroll",t)}},{key:"vertical",get:function(){return"vertical"===this.getAttribute("direction")}},{key:"itemSize",get:function(){var t=(this.getAttribute("item-"+(this.vertical?"height":"width"))||"").trim();return t.match(/^\d+(px|%)$/)?t:"100%"}},{key:"autoScrollRatio",get:function(){return parseFloat(this.getAttribute("auto-scroll-ratio"))},set:function(t){this.setAttribute("auto-scroll-ratio",t)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(t){return Q.toggleAttribute(this,"disabled",t)}},{key:"overscrollable",get:function(){return this.hasAttribute("overscrollable")},set:function(t){return Q.toggleAttribute(this,"overscrollable",t)}},{key:"centered",get:function(){return this.hasAttribute("centered")},set:function(t){return Q.toggleAttribute(this,"centered",t)}}],[{key:"observedAttributes",get:function(){return["swipeable","auto-refresh","direction","item-height","item-width"]}},{key:"events",get:function(){return["postchange","refresh","overscroll"]}}]),e}();c.Carousel=ao,customElements.define("ons-carousel",ao);var so=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.getAttribute("width")&&t._updateWidth(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"width"===t&&this._updateWidth()}},{key:"_updateWidth",value:function(){var t=this.getAttribute("width");t?(t=t.trim().match(/^\d+$/)?t+"%":t,d(this,{flex:"0 0 "+t,maxWidth:t})):d.clear(this,"flex maxWidth")}}],[{key:"observedAttributes",get:function(){return["width"]}}]),e}();c.Col=so,customElements.define("ons-col",so);var lo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -60%, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)",opacity:1},{transform:"translate3d(-50%, -60%, 0)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),co=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),ho={".dialog":"dialog--*",".dialog-container":"dialog-container--*",".dialog-mask":"dialog-mask--*"},fo={default:function(){return C.isAndroid()?uo:co},slide:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),none:lo},po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:fo,baseClass:lo,baseClassName:"DialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._dialog){var t=document.createElement("div");t.classList.add("dialog");var e=document.createElement("div");for(e.classList.add("dialog-container");this.firstChild;)e.appendChild(this.firstChild);t.appendChild(e),this.appendChild(t)}if(!this._mask){var n=document.createElement("div");n.classList.add("dialog-mask"),this.insertBefore(n,this.firstChild)}this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,this.setAttribute("status-bar-fill",""),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return ho}},{key:"_mask",get:function(){return Q.findChild(this,".dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".dialog")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof lo||Q.throwAnimator("Dialog"),fo[t]=e}},{key:"animators",get:function(){return fo}},{key:"DialogAnimator",get:function(){return lo}}]),e}();c.Dialog=po,customElements.define("ons-dialog",po);var go="fab",mo={"":"fab--*",".fab__icon":"fab--*__icon"},_o=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.hide(),t.classList.add(go),n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),!Q.findChild(this,".fab__icon")){var t=document.createElement("span");t.classList.add("fab__icon"),Q.arrayFrom(this.childNodes).forEach(function(e){e.tagName&&"ons-ripple"===e.tagName.toLowerCase()||t.appendChild(e)}),this.appendChild(t)}this._updateRipple(),B.initModifier(this,mo),this._updatePosition()}},{key:"connectedCallback",value:function(){var t=this;setImmediate(function(){return t.show()})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,go,mo);break;case"modifier":B.onModifierChanged(e,n,this,mo);break;case"ripple":this._updateRipple();break;case"position":this._updatePosition()}}},{key:"_show",value:function(){this.show()}},{key:"_hide",value:function(){var t=this;setImmediate(function(){return t.hide()})}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"show",value:function(){this.toggle(!0)}},{key:"hide",value:function(){this.toggle(!1)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible,e=(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px)":"";d(this,{transform:e+" scale("+Number(t)+")"})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"visible",get:function(){return-1===this.style.transform.indexOf("scale(0)")&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","position","class"]}}]),e}();c.Fab=_o,customElements.define("ons-fab",_o);var vo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._gestureDetector=new st(t,{passive:!0}),t}return b(e,Pi),e}();c.GestureDetector=vo,customElements.define("ons-gesture-detector",vo);var bo="fa",yo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){this._cleanClassAttribute("icon"===t?e:this.getAttribute("icon"),"modifier"===t?e:void 0),this._update()}},{key:"_compile",value:function(){N.prepare(this),this._update()}},{key:"_update",value:function(){var t=this,e=this._buildClassAndStyle(this._parseAttr("icon"),this._parseAttr("size")),n=e.classList,i=e.style;Q.extend(this.style,i),n.forEach(function(e){return t.classList.add(e)})}},{key:"_parseAttr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAttribute("modifier")||"",n=(this.getAttribute(t)||t||"").split(/\s*,\s*/),i=n[0],o=n[1];return o=(o||"").split(/\s*:\s*/),(e&&RegExp("(^|\\s+)"+o[0]+"($|\\s+)","i").test(e)?o[1]:i)||""}},{key:"_cleanClassAttribute",value:function(t,e){var n=this,i=this._prefixIcon(this._parseAttr(t,e)),o=i.className,r=i.prefix,a=o!==r?"|"+r+"$|"+r+"-":"|"+o+"$"||"",s=new RegExp("^(fa$|fa-|ion-|zmdi$|zmdi-|ons-icon--"+a+")");Q.arrayFrom(this.classList).filter(function(t){return s.test(t)}).forEach(function(t){return n.classList.remove(t)})}},{key:"_prefixIcon",value:function(t){var e=bo+(bo?"-":"")+t;return{className:e,prefix:e.split("-")[0]}}},{key:"_buildClassAndStyle",value:function(t,e){var n=["ons-icon"],i={};if(0===t.indexOf("ion-"))n.push(t),n.push("ons-icon--ion");else if(0===t.indexOf("fa-"))n.push(t),n.push("fa");else if(0===t.indexOf("md-"))n.push("zmdi"),n.push("zmdi-"+t.split(/-(.+)?/)[1]);else{var o=this._prefixIcon(t),r=o.className,a=o.prefix;a&&n.push(a),r&&n.push(r)}return e.match(/^[1-5]x|lg$/)?(n.push("ons-icon--"+e),this.style.removeProperty("font-size")):i.fontSize=e,{classList:n,style:i}}}],[{key:"setAutoPrefix",value:function(t){bo=t?"string"==typeof t&&t||"fa":""}},{key:"observedAttributes",get:function(){return["icon","size","modifier","class"]}}]),e}();c.Icon=yo,customElements.define("ons-icon",yo);var ko=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;p(this,t),"object"===(void 0===e?"undefined":f(e))&&null!==e||Q.throw('"delegate" parameter must be an object'),this._userDelegate=e,n instanceof Element||null===n||Q.throw('"templateElement" parameter must be an instance of Element or null'),this._templateElement=n}return g(t,[{key:"hasRenderFunction",value:function(){return this._userDelegate._render instanceof Function}},{key:"_render",value:function(){this._userDelegate._render.apply(this._userDelegate,arguments)}},{key:"loadItemElement",value:function(t,e){if(this._userDelegate.loadItemElement instanceof Function)this._userDelegate.loadItemElement(t,e);else{var n=this._userDelegate.createItemContent(t,this._templateElement);n instanceof Element||Q.throw('"createItemContent" must return an instance of Element'),e({element:n})}}},{key:"countItems",value:function(){var t=this._userDelegate.countItems();return"number"!=typeof t&&Q.throw('"countItems" must return a number'),t}},{key:"updateItem",value:function(t,e){this._userDelegate.updateItemContent instanceof Function&&this._userDelegate.updateItemContent(t,e)}},{key:"calculateItemHeight",value:function(t){if(this._userDelegate.calculateItemHeight instanceof Function){var e=this._userDelegate.calculateItemHeight(t);return"number"!=typeof e&&Q.throw('"calculateItemHeight" must return a number'),e}return 0}},{key:"destroyItem",value:function(t,e){this._userDelegate.destroyItem instanceof Function&&this._userDelegate.destroyItem(t,e)}},{key:"destroy",value:function(){this._userDelegate.destroy instanceof Function&&this._userDelegate.destroy(),this._userDelegate=this._templateElement=null}},{key:"itemHeight",get:function(){return this._userDelegate.itemHeight}}]),t}(),wo=function(){function t(e,n){p(this,t),n instanceof ko||Q.throw('"delegate" parameter must be an instance of LazyRepeatDelegate'),this._wrapperElement=e,this._delegate=n,this._insertIndex=this._wrapperElement.children[0]&&"ONS-LAZY-REPEAT"===this._wrapperElement.children[0].tagName?1:0,"ons-list"===e.tagName.toLowerCase()&&e.classList.add("lazy-list"),this._pageContent=this._findPageContentElement(e),this._pageContent||Q.throw("LazyRepeat must be descendant of a Page element"),this.lastScrollTop=this._pageContent.scrollTop,this.padding=0,this._topPositions=[0],this._renderedItems={},this._delegate.itemHeight||this._delegate.calculateItemHeight(0)||(this._unknownItemHeight=!0),this._addEventListeners(),this._onChange()}return g(t,[{key:"_findPageContentElement",value:function(t){var e=Q.findParent(t,".page__content");if(e)return e;var n=Q.findParent(t,"ons-page");if(n){var i=Q.findChild(n,".content");if(i)return i}return null}},{key:"_checkItemHeight",value:function(t){var e=this;this._delegate.loadItemElement(0,function(n){e._unknownItemHeight||Q.throw("Invalid state"),e._wrapperElement.appendChild(n.element);var i=function(){e._delegate.destroyItem(0,n),n.element&&n.element.remove(),delete e._unknownItemHeight,t()};e._itemHeight=n.element.offsetHeight,e._itemHeight>0?i():(e._wrapperElement.style.visibility="hidden",n.element.style.visibility="hidden",setImmediate(function(){e._itemHeight=n.element.offsetHeight,0==e._itemHeight&&Q.throw('Invalid state: "itemHeight" must be greater than zero'),e._wrapperElement.style.visibility="",i()}))})}},{key:"_countItems",value:function(){return this._delegate.countItems()}},{key:"_getItemHeight",value:function(t){return this._renderedItems.hasOwnProperty(t)?(this._renderedItems[t].hasOwnProperty("height")||(this._renderedItems[t].height=this._renderedItems[t].element.offsetHeight),this._renderedItems[t].height):this._topPositions[t+1]&&this._topPositions[t]?this._topPositions[t+1]-this._topPositions[t]:this.staticItemHeight||this._delegate.calculateItemHeight(t)}},{key:"_calculateRenderedHeight",value:function(){var t=this;return Object.keys(this._renderedItems).reduce(function(e,n){return e+t._getItemHeight(+n)},0)}},{key:"_onChange",value:function(){this._render()}},{key:"_lastItemRendered",value:function(){return Math.max.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"_firstItemRendered",value:function(){return Math.min.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"refresh",value:function(){var t={forceScrollDown:!0},e=Math.min(this._lastItemRendered(),this._countItems()-1),n=this._firstItemRendered();Q.isInteger(e)&&(t.forceLastIndex=e),Q.isInteger(n)&&(this._wrapperElement.style.height=this._topPositions[n]+this._calculateRenderedHeight()+"px",this.padding=this._topPositions[n],t.forceFirstIndex=n),this._removeAllElements(),this._render(t),this._wrapperElement.style.height="inherit"}},{key:"_render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.forceScrollDown,i=void 0!==n&&n,o=e.forceFirstIndex,r=e.forceLastIndex;if(this._unknownItemHeight)return this._checkItemHeight(this._render.bind(this,arguments[0]));var a=!i&&this.lastScrollTop>this._pageContent.scrollTop;this.lastScrollTop=this._pageContent.scrollTop;for(var s={},l=this._wrapperElement.getBoundingClientRect().top,u=4*window.innerHeight-l,c=this._countItems(),h=o||Math.max(0,this._calculateStartIndex(l)-30),d=h,f=this._topPositions[d];d<c&&f<u;d++)d>=this._topPositions.length&&(this._topPositions.length+=100),this._topPositions[d]=f,f+=this._getItemHeight(d);if(this._delegate.hasRenderFunction&&this._delegate.hasRenderFunction())return this._delegate._render(h,d,function(){t.padding=t._topPositions[h]});if(a)for(var p=d-1;p>=h;p--)s[p]=!0,this._renderElement(p,a);else for(var g=r||Math.max.apply(Math,[d-1].concat(w(Object.keys(this._renderedItems)))),m=h;m<=g;m++)s[m]=!0,this._renderElement(m,a);Object.keys(this._renderedItems).forEach(function(e){return s[e]||t._removeElement(e,a)})}},{key:"_renderElement",value:function(t,e){var n=this,i=this._renderedItems[t];i?this._delegate.updateItem(t,i):this._delegate.loadItemElement(t,function(i){e?(n._wrapperElement.insertBefore(i.element,n._wrapperElement.children[n._insertIndex]),n.padding=n._topPositions[t],i.height=n._topPositions[t+1]-n._topPositions[t]):n._wrapperElement.appendChild(i.element),n._renderedItems[t]=i})}},{key:"_removeElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=+t;var n=this._renderedItems[t];this._delegate.destroyItem(t,n),e?this._topPositions[t+1]=void 0:this.padding=this.padding+this._getItemHeight(t),n.element.parentElement&&n.element.parentElement.removeChild(n.element),delete this._renderedItems[t]}},{key:"_removeAllElements",value:function(){var t=this;Object.keys(this._renderedItems).forEach(function(e){return t._removeElement(e)})}},{key:"_recalculateTopPositions",value:function(t,e){for(var n=t;n<=e;n++)this._topPositions[n+1]=this._topPositions[n]+this._getItemHeight(n)}},{key:"_calculateStartIndex",value:function(t){var e=this._firstItemRendered(),n=this._lastItemRendered();this._recalculateTopPositions(e,n);for(var i=0,o=this._countItems()-1;;){var r=Math.floor((i+o)/2),a=t+this._topPositions[r];if(o<i)return 0;if(a<=0&&a+this._getItemHeight(r)>0)return r;isNaN(a)||a>=0?o=r-1:i=r+1}}},{key:"_debounce",value:function(t,e,n){var i=void 0;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),a?t.apply(this,arguments):i=setTimeout(function(){i=null,t.apply(o,r)},e)}}},{key:"_doubleFireOnTouchend",value:function(){this._render(),this._debounce(this._render.bind(this),100)}},{key:"_addEventListeners",value:function(){Q.bindListeners(this,["_onChange","_doubleFireOnTouchend"]),C.isIOS()&&(this._boundOnChange=this._debounce(this._boundOnChange,30)),this._pageContent.addEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.addEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.addEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.addEventListener("resize",this._boundOnChange,!0)}},{key:"_removeEventListeners",value:function(){this._pageContent.removeEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.removeEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.removeEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.removeEventListener("resize",this._boundOnChange,!0)}},{key:"destroy",value:function(){this._removeAllElements(),this._delegate.destroy(),this._parentElement=this._delegate=this._renderedItems=null,this._removeEventListeners()}},{key:"padding",get:function(){return parseInt(this._wrapperElement.style.paddingTop,10)},set:function(t){this._wrapperElement.style.paddingTop=t+"px"}},{key:"staticItemHeight",get:function(){return this._delegate.itemHeight||this._itemHeight}}]),t}(),Eo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.hasAttribute("delegate")&&(this.delegate=window[this.getAttribute("delegate")])}},{key:"refresh",value:function(){this._lazyRepeatProvider&&this._lazyRepeatProvider.refresh()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"disconnectedCallback",value:function(){this._lazyRepeatProvider&&(this._lazyRepeatProvider.destroy(),this._lazyRepeatProvider=null)}},{key:"delegate",set:function(t){this._lazyRepeatProvider&&this._lazyRepeatProvider.destroy(),!this._templateElement&&this.children[0]&&(this._templateElement=this.removeChild(this.children[0]));var e=new ko(t,this._templateElement||null);this._lazyRepeatProvider=new wo(this.parentElement,e)},get:function(){Q.throw("No delegate getter")}}]),e}();P.LazyRepeatDelegate=ko,P.LazyRepeatProvider=wo,c.LazyRepeat=Eo,customElements.define("ons-lazy-repeat",Eo);var Co={"":"list-header--*"},Ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-header"),B.initModifier(this,Co)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-header",Co);break;case"modifier":B.onModifierChanged(e,n,this,Co)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListHeader=Ao,customElements.define("ons-list-header",Ao);var So={"":"list-title--*"},Po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-title"),B.initModifier(this,So)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-title",So);break;case"modifier":B.onModifierChanged(e,n,this,So)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListTitle=Po,customElements.define("ons-list-title",Po);var Oo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"showExpansion",value:function(t,e){e()}},{key:"hideExpansion",value:function(t,e){e()}}]),e}(),xo={".list-item":"list-item--*",".list-item__left":"list-item--*__left",".list-item__center":"list-item--*__center",".list-item__right":"list-item--*__right",".list-item__label":"list-item--*__label",".list-item__title":"list-item--*__title",".list-item__subtitle":"list-item--*__subtitle",".list-item__thumbnail":"list-item--*__thumbnail",".list-item__icon":"list-item--*__icon"},To={default:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Oo),g(e,[{key:"showExpansion",value:function(t,e){this._animateExpansion(t,!0,e)}},{key:"hideExpansion",value:function(t,e){this._animateExpansion(t,!1,e)}},{key:"_animateExpansion",value:function(t,e,n){var i,o=t.expandableContent.style.height,r=t.expandableContent.style.display;t.expandableContent.style.height="auto",t.expandableContent.style.display="block";var a=window.getComputedStyle(t.expandableContent),s=[{height:0,paddingTop:0,paddingBottom:0},{height:a.height,paddingTop:a.paddingTop,paddingBottom:a.paddingBottom}],l=[{transform:"rotate(45deg)"},{transform:"rotate(225deg)"}];if(t.expandableContent.style.height=o,(i=nt(t.expandableContent,{duration:this.duration,property:"height padding-top padding-bottom"})).default.apply(i,w(e?s:s.reverse())).play(function(){t.expandableContent.style.display=r,n&&n()}),t.expandChevron){var u;(u=nt(t.expandChevron,{duration:this.duration,property:"transform"})).default.apply(u,w(e?l:l.reverse())).play()}}}]),e}(),none:Oo},Lo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._animatorFactory=t._updateAnimatorFactory(),t.toggleExpansion=t.toggleExpansion.bind(t);var i=/^ons-(?!col$|row$|if$)/i;return t._shouldIgnoreTap=function(t){return t.hasAttribute("prevent-tap")||i.test(t.tagName)},t.show=t.showExpansion,t.hide=t.hideExpansion,n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-item"),this.hasAttribute("expandable")&&this.classList.add("list-item--expandable");for(var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,r=Q.getAllChildNodes(this),a=0;a<r.length;a++){var s=r[a];s.classList.contains("left")?(s.classList.add("list-item__left"),t=s):s.classList.contains("center")?e=s:s.classList.contains("right")?(s.classList.add("list-item__right"),n=s):s.classList.contains("top")?(s.classList.add("list-item__top"),i=s):s.classList.contains("expandable-content")&&(s.classList.add("list-item__expandable-content"),o=s)}if(!n&&this.hasAttribute("expandable")){(n=document.createElement("div")).classList.add("list-item__right","right");var l=document.createElement("span");l.classList.add("list-item__expand-chevron"),n.appendChild(l)}if(!e){if(e=document.createElement("div"),t||n||o)for(var u=this.childNodes.length-1;u>=0;u--){var c=this.childNodes[u];c!==t&&c!==n&&c!==o&&"ONS-RIPPLE"!==c.tagName&&e.insertBefore(c,e.firstChild)}else for(;this.childNodes[0];)e.appendChild(this.childNodes[0]);o||this.insertBefore(e,n||null)}e.classList.add("center","list-item__center"),o&&(this._top=i||document.createElement("div"),this._top.classList.add("top","list-item__top"),this.appendChild(this._top),this._top.appendChild(e),t&&this._top.appendChild(t),n&&this._top.appendChild(n)),Q.updateRipple(this),B.initModifier(this,xo)}},{key:"showExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!0,this._expanding=!0;this._animatorFactory.newAnimator().showExpansion(this,function(){t.classList.add("expanded"),t._expanding=!1})}}},{key:"hideExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!1,this._expanding=!0;this._animatorFactory.newAnimator().hideExpansion(this,function(){t.classList.remove("expanded"),t._expanding=!1})}}},{key:"toggleExpansion",value:function(){this.classList.contains("expanded")?this.hideExpansion():this.showExpansion()}},{key:"_updateAnimatorFactory",value:function(){return new O({animators:To,baseClass:Oo,baseClassName:"ListItemAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-item",xo);break;case"modifier":B.onModifierChanged(e,n,this,xo);break;case"ripple":Q.updateRipple(this);break;case"animation":this._animatorFactory=this._updateAnimatorFactory()}}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._setupListeners(!0),t._originalBackgroundColor=t.style.backgroundColor,t.tapped=!1})}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouch,{passive:!0}),Q[e](this,"touchmove",this._onRelease,{passive:!0}),this[e]("touchcancel",this._onRelease),this[e]("touchend",this._onRelease),this[e]("touchleave",this._onRelease),this[e]("drag",this._onDrag),this[e]("mousedown",this._onTouch),this[e]("mouseup",this._onRelease),this[e]("mouseout",this._onRelease),this._top&&this._top[e]("click",this.toggleExpansion)}},{key:"_onDrag",value:function(t){var e=t.gesture;this.hasAttribute("lock-on-drag")&&["left","right"].indexOf(e.direction)>-1&&e.preventDefault()}},{key:"_onTouch",value:function(t){var e=this;if(!(this.tapped||this!==t.target&&(this._shouldIgnoreTap(t.target)||Q.findParent(t.target,this._shouldIgnoreTap,function(t){return t===e})))){this.tapped=!0;var n={transition:"background-color 0.0s linear 0.02s, box-shadow 0.0s linear 0.02s"};this.hasAttribute("tappable")&&(this.style.backgroundColor&&(this._originalBackgroundColor=this.style.backgroundColor),n.backgroundColor=this.getAttribute("tap-background-color")||"#d9d9d9",n.boxShadow="0px -1px 0px 0px "+n.backgroundColor),d(this,n)}}},{key:"_onRelease",value:function(){this.tapped=!1,this.style.backgroundColor=this._originalBackgroundColor||"",d.clear(this,"transition boxShadow")}},{key:"expandableContent",get:function(){return this.querySelector(".list-item__expandable-content")}},{key:"expandChevron",get:function(){return this.querySelector(".list-item__expand-chevron")}}],[{key:"observedAttributes",get:function(){return["modifier","class","ripple","animation"]}}]),e}();c.ListItem=Lo,customElements.define("ons-list-item",Lo);var Mo={"":"list--*"},Do=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list"),B.initModifier(this,Mo)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list",Mo);break;case"modifier":B.onModifierChanged(e,n,this,Mo)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.List=Do,customElements.define("ons-list",Do);var Io=["autocapitalize","autocomplete","autocorrect","autofocus","disabled","inputmode","max","maxlength","min","minlength","name","pattern","placeholder","readonly","required","size","step","validator","value"],No=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t._boundDelegateEvent=t._delegateEvent.bind(t),t}return b(e,Pi),g(e,[{key:"_update",value:function(){}},{key:"_scheme",get:function(){Q.throwMember()}},{key:"_template",get:function(){Q.throwMember()}},{key:"type",get:function(){Q.throwMember()}}]),g(e,[{key:"_compile",value:function(){N.prepare(this),this._defaultClassName&&this.classList.add(this._defaultClassName),0===this.children.length&&(this.appendChild(Q.createFragment(this._template)),this._setInputId(),this._updateBoundAttributes(),B.initModifier(this,this._scheme))}},{key:"_updateBoundAttributes",value:function(){var t=this;Io.forEach(function(e){t.hasAttribute(e)?t._input.setAttribute(e,t.getAttribute(e)):t._input.removeAttribute(e)}),this._update()}},{key:"_delegateEvent",value:function(t){var e=new CustomEvent(t.type,{bubbles:!1,cancelable:!0});return this.dispatchEvent(e)}},{key:"_setInputId",value:function(){this.hasAttribute("input-id")&&(this._input.id=this.getAttribute("input-id"))}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("focus",t._boundDelegateEvent),t._input.addEventListener("blur",t._boundDelegateEvent)})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("focus",t._boundDelegateEvent),t._input.removeEventListener("blur",t._boundDelegateEvent)})}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,o._scheme)});break;case"input-id":n(this,function(){return o._setInputId()});break;case"class":Q.restoreClass(this,this._defaultClassName,this._scheme)}Io.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_defaultClassName",get:function(){return""}},{key:"_input",get:function(){return this.querySelector("input")}},{key:"value",get:function(){return null===this._input?this.getAttribute("value"):this._input.value},set:function(t){var e=this;n(this,function(){t instanceof Date&&(t=t.toISOString().substring(0,10)),e._input.value=t,e._update()})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["modifier","input-id","class"].concat(Io)}}]),e}(),Bo={".text-input":"text-input--*",".text-input__label":"text-input--*__label"},jo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnInput=t._update.bind(t),t._boundOnFocusin=t._update.bind(t),t}return b(e,No),g(e,[{key:"_update",value:function(){this._updateLabel(),this._updateLabelClass()}},{key:"_updateLabel",value:function(){var t=this.getAttribute("placeholder")||"";void 0!==this._helper.textContent?this._helper.textContent=t:this._helper.innerText=t}},{key:"_updateLabelClass",value:function(){""===this.value?this._helper.classList.remove("text-input--material__label--active"):this._helper.classList.add("text-input--material__label--active")}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),n(this,function(){t._input.addEventListener("input",t._boundOnInput),t._input.addEventListener("focusin",t._boundOnFocusin)});var i=this.getAttribute("type");["checkbox","radio"].indexOf(i)>=0&&Q.warn('Warn: <ons-input type="'+i+'"> is deprecated since v2.4.0. Use <ons-'+i+"> instead.")}},{key:"disconnectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),n(this,function(){t._input.removeEventListener("input",t._boundOnInput),t._input.removeEventListener("focusin",t._boundOnFocusin)})}},{key:"attributeChangedCallback",value:function(t,i,o){var r=this;switch(t){case"type":n(this,function(){return r._input.setAttribute("type",r.type)});break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,i,o)}}},{key:"_scheme",get:function(){return Bo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="text-input">\n      <span class="text-input__label"></span>\n    '}},{key:"type",get:function(){var t=this.getAttribute("type");return["checkbox","radio"].indexOf(t)<0&&t||"text"}},{key:"_helper",get:function(){return this.querySelector("span")}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["type"])}}]),e}();c.Input=jo,customElements.define("ons-input",jo);var Ho=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&util.throwAbstract(),n(t,function(){t.attributeChangedCallback("checked",null,t.getAttribute("checked"))}),t}return b(e,No),g(e,[{key:"attributeChangedCallback",value:function(t,n,i){switch(t){case"checked":this.checked=null!==i;break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <span class="'+this._defaultClassName+'__checkmark"></span>\n    '}},{key:"_helper",get:function(){return this.querySelector("span")}},{key:"checked",get:function(){return this._input.checked},set:function(t){var e=this;n(this,function(){e._input.checked=t})}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["checked"])}}]),e}(),Ro={".checkbox":"checkbox--*",".checkbox__input":"checkbox--*__input",".checkbox__checkmark":"checkbox--*__checkmark"},Fo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return Ro}},{key:"_defaultClassName",get:function(){return"checkbox"}},{key:"type",get:function(){return"checkbox"}}]),e}();c.Checkbox=Fo,customElements.define("ons-checkbox",Fo);var qo={".radio-button":"radio-button--*",".radio-button__input":"radio-button--*__input",".radio-button__checkmark":"radio-button--*__checkmark"},zo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return qo}},{key:"_defaultClassName",get:function(){return"radio-button"}},{key:"type",get:function(){return"radio"}}]),e}();c.Radio=zo,customElements.define("ons-radio",zo);var Vo={".search-input":"search-input--*"},Wo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,No),g(e,[{key:"_scheme",get:function(){return Vo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="search-input">\n    '}},{key:"type",get:function(){return"search"}}]),e}();c.SearchInput=Wo,customElements.define("ons-search-input",Wo);var Uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Xo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),Yo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier( .1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}).queue(function(t){e(),t()}).play()}}]),e}(),Go={"":"modal--*",modal__content:"modal--*__content"},$o={default:Uo,fade:Xo,lift:Yo,none:Uo},Ko=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(){},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:$o,baseClass:Uo,baseClassName:"ModalAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(this.style.display="none",this.style.zIndex=10001,this.classList.add("modal"),!Q.findChild(this,".modal__content")){var t=document.createElement("div");for(t.classList.add("modal__content");this.childNodes[0];){var e=this.childNodes[0];this.removeChild(e),t.insertBefore(e,null)}this.appendChild(t)}B.initModifier(this,this._scheme)}},{key:"_toggleStyle",value:function(t){this.style.display=t?"table":"none"}},{key:"connectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,n,i){"class"===t?Q.restoreClass(this,"modal",Go):v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Go}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Uo||Q.throwAnimator("Modal"),$o[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["class"])}},{key:"animators",get:function(){return $o}},{key:"ModalAnimator",get:function(){return Uo}}]),e}();c.Modal=Ko,customElements.define("ons-modal",Ko);var Qo=function(){function t(e){var n=this;p(this,t),"element ignoreSwipe isInitialState onDragCallback swipeMax swipeMin swipeMid".split(/\s+/).forEach(function(t){return n[t]=e[t]}),this.elementHandler=e.elementHandler||e.element,this.getThreshold=e.getThreshold||function(){return.5},this.getSide=e.getSide||function(){return"left"},this.handleGesture=this.handleGesture.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element.hasAttribute("swipeable");this.gestureDetector||(this.gestureDetector=new st(this.elementHandler,{dragMinDistance:1,passive:!this._shouldFixScroll}));var e=t?"on":"off";this.gestureDetector[e]("drag dragstart dragend",this.handleGesture)}},{key:"handleGesture",value:function(t){t.gesture&&("dragstart"===t.type?this.onDragStart(t):this._ignoreDrag||("dragend"===t.type?this.onDragEnd(t):this.onDrag(t)))}},{key:"onDragStart",value:function(t){var e=this;this._ignoreDrag=t.consumed||!Q.isValidGesture(t)||this.ignoreSwipe(t,"left"===e.getSide()?t.gesture.center.clientX:window.innerWidth-t.gesture.center.clientX),this._ignoreDrag||(t.consume&&t.consume(),t.consumed=!0,this._width=function(t){var e=[parseInt(t,10),/px/.test(t)],n=e[0];return e[1]?n:Math.round(document.body.offsetWidth*n/100)}(this.element.style.width||"100%"),this._startDistance=this._distance=this.isInitialState instanceof Function&&!this.isInitialState()?this._width:0,Q.iosPreventScroll(this.gestureDetector))}},{key:"onDrag",value:function(t){t.stopPropagation();var e="left"===this.getSide()?t.gesture.deltaX:-t.gesture.deltaX,n=Math.max(0,Math.min(this._width,this._startDistance+e));n!==this._distance&&(this._distance=n,this.swipeMid(this._distance,this._width))}},{key:"onDragEnd",value:function(t){t.stopPropagation();var e=t.gesture.interimDirection;this.getSide()!==e&&this._distance>this._width*this.getThreshold()?this.swipeMax():this.swipeMin()}},{key:"dispose",value:function(){this.gestureDetector&&this.gestureDetector.dispose(),this.gestureDetector=this.element=this.elementHandler=null}}]),t}(),Jo=function(t){function e(t){return p(this,e),t=Q.extend({timing:"linear",duration:"0.4",delay:"0"},t||{}),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Ti),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}},{key:"block",value:function(t){var e=Q.createElement('\n      <div style="position: absolute; background-color: transparent; width: 100%; height: 100%; z-index: 100000"></div>\n    ');return t.parentNode.appendChild(e),function(){return e.remove()}}}]),e}(),Zo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.durationRestore,i=void 0===n?.1:n,o=t.durationSwipe,r=void 0===o?.15:o,a=t.timingSwipe,s=void 0===a?"linear":a,l=y(t,["durationRestore","durationSwipe","timingSwipe"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({},l)));return u.constructor===e&&Q.throwAbstract(),u.durationRestore=i,u.durationSwipe=r,u.timingSwipe=s,u.optSwipe={timing:s,duration:r},u.optRestore={timing:s,duration:i},u.swipeShadow=Q.createElement('<div style="position: absolute; height: 100%; width: 12px; right: 100%; top: 0; bottom: 0; z-index: -1;background: linear-gradient(to right, transparent 0, rgba(0,0,0,.04) 40%, rgba(0,0,0,.12) 80%, rgba(0,0,0,.16) 100%);"></div>'),u.isDragStart=!0,u}return b(e,Jo),g(e,null,[{key:"swipeable",get:function(){return!0}}]),g(e,[{key:"_decompose",value:function(){Q.throwMember()}},{key:"_shouldAnimateToolbar",value:function(){Q.throwMember()}},{key:"_calculateDelta",value:function(){Q.throwMember()}},{key:"_dragStartSetup",value:function(t,n){this.isDragStart=!1,this.unblock=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,n),t.parentElement.insertBefore(this.backgroundMask,t),this.target={enter:Q.findToolbarPage(t)||t,leave:Q.findToolbarPage(n)||n},this.decomp={enter:this._decompose(this.target.enter),leave:this._decompose(this.target.leave)},this.delta=this._calculateDelta(n,this.decomp.leave),this.shouldAnimateToolbar=this._shouldAnimateToolbar(this.target.enter,this.target.leave),this.shouldAnimateToolbar?(this.swipeShadow.style.top=this.decomp.leave.toolbar.offsetHeight+"px",this.target.leave.appendChild(this.swipeShadow),this._saveStyle(this.target.enter,this.target.leave)):(n.appendChild(this.swipeShadow),this._saveStyle(t,n)),n.classList.add("overflow-visible"),this.overflowElement=n,this.decomp.leave.content.classList.add("content-swiping")}},{key:"translate",value:function(t,e,n,i){this.isSwiping=!0,"none"===n.style.display&&(n.style.display=""),this.isDragStart&&(this.maxWidth=e,this._dragStartSetup(n,i));var o=(t-e)/e;this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d("+this.delta.title*o+"px, 0, 0)",opacity:1+o}),nt(this.decomp.enter.backButtonLabel).queue({opacity:1+10*o/100,transform:"translate3d("+this.delta.label*o+"px, 0, 0)"}),nt(this.decomp.enter.other).queue({opacity:1+o}),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(this.decomp.leave.toolbar).queue({opacity:-1*o}),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d("+125*(1+o)+"%, 0, 0)"}),nt(this.decomp.leave.backButtonLabel).queue({opacity:-1*o,transform:"translate3d("+this.delta.title*(1+o)+"px, 0, 0)"}),nt(this.swipeShadow).queue({opacity:-1*o})):nt.runAll(nt(i).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(n).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.swipeShadow).queue({opacity:-1*o}))}},{key:"restore",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(-25%, 0, 0)",opacity:.9},this.optRestore),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(-"+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe,opacity:0}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(-"+this.delta.label+"px, 0, 0)"},this.optRestore),nt(this.decomp.enter.other).queue({opacity:0},this.optRestore),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.toolbar).queue({opacity:1},this.optRestore),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.backButtonLabel).queue({opacity:1,transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0},this.optRestore).queue(function(e){i._reset(i.target.enter,i.target.leave),t.style.display="none",n&&n(),e()})):nt.runAll(nt(t).queue({transform:"translate3D(-25%, 0, 0)",opacity:.9},this.optRestore),nt(e).queue({transform:"translate3D(0, 0, 0)"},this.optRestore).queue(function(o){i._reset(t,e),t.style.display="none",n&&n(),o()})))}},{key:"popSwipe",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(0, 0, 0)",opacity:1},this.optSwipe),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe,opacity:1}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(0, 0, 0)"},this.optSwipe),nt(this.decomp.enter.other).queue({opacity:1},this.optSwipe),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background]).queue({transform:"translate3d(100%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.toolbar).queue({opacity:0},this.optSwipe),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(125%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.backButtonLabel).queue({opacity:0,transform:"translate3d("+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0,transform:"translate3d("+this.maxWidth+"px, 0, 0)"},this.optSwipe).queue(function(t){i._reset(i.target.enter,i.target.leave),n&&n(),t()})):nt.runAll(nt(t).queue({transform:"translate3D(0, 0, 0)",opacity:1},this.optSwipe),nt(e).queue({transform:"translate3D(100%, 0, 0)"},this.optSwipe).queue(function(o){i._reset(t,e),n&&n(),o()})))}},{key:"_saveStyle",value:function(){var t=this;this._savedStyle=new WeakMap;for(var e=function(e){return t._savedStyle.set(e,e.getAttribute("style"))},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_restoreStyle",value:function(){for(var t=this,e=function(e){null===t._savedStyle.get(e)?e.removeAttribute("style"):e.setAttribute("style",t._savedStyle.get(e)),t._savedStyle.delete(e)},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_reset",value:function(){this.isSwiping=!1,this._savedStyle&&this._restoreStyle.apply(this,arguments),this.unblock&&this.unblock(),this.swipeShadow.remove(),this.backgroundMask.remove(),this.overflowElement.classList.remove("overflow-visible"),this.decomp.leave.content.classList.remove("content-swiping"),this.decomp=this.target=this.overflowElement=this._savedStyle=null,this.isDragStart=!0}}]),e}(),tr=function(){return"translate3d("+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)+", "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+")"},er=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.3, .4, 0, .9)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a,l=y(t,["timing","delay","duration"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({timing:i,delay:r,duration:s},l)));return u.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black; z-index: 2"></div>'),u}return b(e,Zo),g(e,[{key:"_decompose",value:function(t){var e=t._getToolbarElement(),n=e._getToolbarLeftItemsElement(),i=e._getToolbarRightItemsElement(),o=function(t){for(var e=[],n=0;n<t.length;n++)"ons-back-button"!==t[n].nodeName.toLowerCase()&&e.push(t[n]);return e},r=[].concat(0===n.children.length?n:o(n.children)).concat(0===i.children.length?i:o(i.children));return{toolbarCenter:e._getToolbarCenterItemsElement(),backButtonIcon:e._getToolbarBackButtonIconElement(),backButtonLabel:e._getToolbarBackButtonLabelElement(),other:r,content:t._getContentElement(),background:t._getBackgroundElement(),toolbar:e,bottomToolbar:t._getBottomToolbarElement()}}},{key:"_shouldAnimateToolbar",value:function(t,e){var n=t._canAnimateToolbar()&&e._canAnimateToolbar(),i=t._getToolbarElement(),o=e._getToolbarElement(),r=i.hasAttribute("static")||o.hasAttribute("static"),a=Q.hasModifier(i,"material")||Q.hasModifier(o,"material"),s=Q.hasModifier(i,"transparent")||Q.hasModifier(o,"transparent");return n&&!r&&!a&&!s}},{key:"_calculateDelta",value:function(t,e){var n=void 0,i=void 0,o=t.getBoundingClientRect();if(e.backButtonLabel.classList.contains("back-button__label")){var r=e.backButtonLabel.getBoundingClientRect();n=Math.round(o.width/2-r.width/2-r.left)}else n=Math.round(o.width/2*.6);return e.backButtonIcon.classList.contains("back-button__icon")&&(i=e.backButtonIcon.getBoundingClientRect().right-2),{title:n,label:i}}},{key:"push",value:function(t,i,o){var r=this;this.backgroundMask.remove(),i.parentNode.insertBefore(this.backgroundMask,i);var a=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);n(t,function(){var e=Q.findToolbarPage(t)||t,n=Q.findToolbarPage(i)||i,s=r._decompose(e),l=r._decompose(n),u=r._calculateDelta(i,s);r._shouldAnimateToolbar(e,n)?nt.runAll(nt([s.content,s.bottomToolbar,s.background],r.def).default({transform:tr("100%")},{transform:tr()}),nt(s.toolbar,r.def).default({opacity:0},{opacity:1}),nt(s.toolbarCenter,r.def).default({transform:tr("125%"),opacity:1},{transform:tr(),opacity:1}),nt(s.backButtonLabel,r.def).default({transform:tr(u.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(s.other,r.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([l.content,l.bottomToolbar,l.background],r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}),nt(l.toolbarCenter,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.title+"px"),opacity:0,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(l.backButtonLabel,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.label+"px"),opacity:0}),nt(l.other,r.def).default({opacity:1},{css:{opacity:0},timing:"linear"})):nt.runAll(nt(t,r.def).default({transform:tr("100%")},{transform:tr()}),nt(i,r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}))})}},{key:"pop",value:function(t,n,i){var o=this;if(this.isSwiping)return this.popSwipe(t,n,i);this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=Q.findToolbarPage(t)||t,s=Q.findToolbarPage(n)||n,l=this._decompose(a),u=this._decompose(s),c=this._calculateDelta(n,u);this._shouldAnimateToolbar(a,s)?nt.runAll(nt([l.content,l.bottomToolbar,l.background],this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(l.toolbarCenter,this.def).default({transform:tr("-"+c.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing}),nt(l.backButtonLabel,this.def).default({transform:tr("-"+c.label+"px")},{transform:tr()}),nt(l.other,this.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([u.content,u.bottomToolbar,u.background],this.def).default({transform:tr()},{transform:tr("100%")}).wait(0).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(u.toolbar,this.def).default({opacity:1},{opacity:0}),nt(u.toolbarCenter,this.def).default({transform:tr()},{transform:tr("125%")}),nt(u.backButtonLabel,this.def).default({transform:tr(),opacity:1},{transform:tr(c.title+"px"),opacity:0,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing})):nt.runAll(nt(t,this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(n,this.def).default({transform:tr()},{transform:tr("100%")}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}}]),e}(),nr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background: linear-gradient(black, white);"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 100%, 0)"},{transform:"translate3D(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, -10%, 0)",opacity:.9}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, -43px, 0)",opacity:.9},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)"},{transform:"translate3D(0, 100%, 0)"}))}}]),e}(),ir="translate3d(0, 0, 0)",or=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:ir,opacity:0},{transform:ir,opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:ir,opacity:1},{transform:ir,opacity:0}).queue(function(t){o(),i(),t()}))}}]),e}(),rr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.blackMaskOpacity=.4,l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%; z-index: 2;background-color: black; opacity: 0;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentElement.insertBefore(this.backgroundMask,n.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:0},{opacity:this.blackMaskOpacity}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(100%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(-45%, 0, 0)"}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:this.blackMaskOpacity},{opacity:0}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(-45%, 0, 0)",opacity:.9},{transform:"translate3d(0, 0, 0)",opacity:1}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(100%, 0, 0)"}).queue(function(t){r(),i(),t()}))}}]),e}(),ar=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?.05:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()});nt.runAll(a,nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({opacity:1},{opacity:.4}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({opacity:.4},{opacity:1}).queue(function(t){r(),i(),t()}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}))}}]),e}(),sr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.4, 0, 0.2, 1)":n,o=t.timingPop,r=void 0===o?"cubic-bezier(0.4, 0, 1, 1)":o,a=t.delay,s=void 0===a?0:a,l=t.duration,u=void 0===l?.2:l;p(this,e);var c=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:s,duration:u}));return c.timingPop=r,c}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 42px, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{css:{transform:"translate3D(0, 38px, 0)",opacity:0},timing:this.timingPop}).queue(function(t){o(),i(),t()}))}}]),e}(),lr=function(t){function e(t){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Jo),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}}]),e}(),ur={default:function(){return C.isAndroid()?sr:er},slide:function(){return C.isAndroid()?rr:er},lift:function(){return C.isAndroid()?ar:nr},fade:function(){return C.isAndroid()?sr:or},"slide-ios":er,"slide-md":rr,"lift-ios":nr,"lift-md":ar,"fade-ios":or,"fade-md":sr,none:lr},cr={ready:function(t,e){e()}},hr=function(t){return"ONS-PAGE"!==t.nodeName&&Q.throw("Only page elements can be children of navigator")},dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._isRunning=!1,t._initialized=!1,t._pageLoader=jt,t._pageMap=new WeakMap,t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"animatorFactory",get:function(){return this._animatorFactory}}]),g(e,[{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"connectedCallback",value:function(){var t=this;if(this.onDeviceBackButton=this._onDeviceBackButton.bind(this),!C.isAndroid()||"force"===this.getAttribute("swipeable")){var e=void 0;this._swipe=new Qo({element:this,getThreshold:function(){return Math.max(.2,parseFloat(t.getAttribute("swipe-threshold"))||0)},swipeMax:function(){t._onSwipe&&t._onSwipe(1,{duration:e.durationSwipe,timing:e.timingSwipe}),t[t.swipeMax?"swipeMax":"popPage"]({animator:e}),e=null},swipeMid:function(n,i){t._onSwipe&&t._onSwipe(n/i),e.translate(n,i,t.topPage.previousElementSibling,t.topPage)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,{duration:e.durationRestore,timing:e.timingSwipe}),e.restore(t.topPage.previousElementSibling,t.topPage),e=null},ignoreSwipe:function(n,i){if(!t._isRunning&&t.children.length>1){var o=parseInt(t.getAttribute("swipe-target-width")||25,10);if("right"===n.gesture.direction&&o>i){var r=function(t){return/ons-back-button/i.test(t.tagName)};if(!r(n.target)&&!Q.findParent(n.target,r,function(t){return/ons-page/i.test(t.tagName)})){var a=(t.topPage.pushedOptions||{}).animation||t.animatorFactory._animation,s=ur[a]instanceof Function?ur[a].call():ur[a];if(void 0!==s&&s.swipeable)return e=new s,!1}}}return!0}}),this.attributeChangedCallback("swipeable")}if(!this._initialized){this._initialized=!0;var i=Q.defer();this.loaded=i.promise,cr.ready(this,function(){var e=!Q.hasAnyComponentAsParent(t),o={animation:"none",show:e};if(0===t.pages.length&&t._getPageTarget())t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()});else if(t.pages.length>0){for(var r=0;r<t.pages.length;r++)hr(t.pages[r]);t.topPage&&n(t.topPage,function(){return setTimeout(function(){i.resolve(),e&&t.topPage._show(),t._updateLastPageBackButton()},0)})}else n(t,function(){0===t.pages.length&&t._getPageTarget()?t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()}):i.resolve()})})}}},{key:"_updateAnimatorFactory",value:function(){this._animatorFactory=new O({animators:ur,baseClass:Jo,baseClassName:"NavigatorAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._swipe&&this._swipe.dispose(),this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"animation":this._updateAnimatorFactory();break;case"swipeable":this._swipe&&this._swipe.update()}}},{key:"popPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this._preparePageAndOptions(null,e).options,Q.isInteger(e.times)&&e.times>1&&this._removePages(e.times);return this._popPage(e,function(){return new Promise(function(e){t._pageLoader.unload(t.pages[t.pages.length-1]),e()})})}},{key:"_popPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("popPage is already running.");if(this.pages.length<=1)return Promise.reject("ons-navigator's page stack is empty.");if(this._emitPrePopEvent())return Promise.reject("Canceled in prepop event.");var i=this.pages.length;return this._isRunning=!0,this.pages[i-2].updateBackButton(i-2>0),new Promise(function(o){var r=e.pages[i-1],a=e.pages[i-2];(t=Q.extend({},e.options||{},r.pushedOptions||{},t)).data&&(a.data=Q.extend({},a.data||{},t.data||{}));r._hide(),a.style.display="";(t.animator||e._animatorFactory.newAnimator(t)).pop(e.pages[i-2],e.pages[i-1],function(){n().then(function(){e._isRunning=!1,a._show(),Q.triggerElementEvent(e,"postpop",{leavePage:r,enterPage:a,navigator:e}),t.callback&&t.callback(a),o(a)})})}).catch(function(){return e._isRunning=!1})}},{key:"pushPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);t=i.page;var o=function(i){hr(i),e._pageMap.set(i,t),(i=Q.extend(i,{data:n.data})).style.visibility="hidden"};return(n=i.options).pageHTML?this._pushPage(n,function(){return new Promise(function(t){Ht.load({page:n.pageHTML,parent:e,params:n.data},function(e){o(e),t()})})}):this._pushPage(n,function(){return new Promise(function(i){e._pageLoader.load({page:t,parent:e,params:n.data},function(t){o(t),i()})})})}},{key:"_pushPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("pushPage is already running.");if(this._emitPrePushEvent())return Promise.reject("Canceled in prepush event.");this._isRunning=!0;var i=O.parseAnimationOptionsString(this.getAttribute("animation-options"));e=Q.extend({},this.options||{},{animationOptions:i},e);var o=this._animatorFactory.newAnimator(e);return n().then(function(){var n=t.pages.length,i=t.pages[n-1],r=e.leavePage||t.pages[n-2];return hr(i),i.updateBackButton(n>(e._replacePage?2:1)),i.pushedOptions=Q.extend({},i.pushedOptions||{},e||{}),i.data=Q.extend({},i.data||{},e.data||{}),i.unload=i.unload||e.unload,new Promise(function(n){var a=function(){t._isRunning=!1,!1!==e.show&&setImmediate(function(){return i._show()}),Q.triggerElementEvent(t,"postpush",{leavePage:r,enterPage:i,navigator:t}),r&&(r.style.display="none"),e.callback&&e.callback(i),n(i)};i.style.visibility="",r?(r._hide(),o.push(i,r,a)):a()})}).catch(function(e){throw t._isRunning=!1,e})}},{key:"replacePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pushPage(t,n).then(function(t){return e.pages.length>1&&e._pageLoader.unload(e.pages[e.pages.length-2]),e._updateLastPageBackButton(),Promise.resolve(t)})}},{key:"insertPage",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._preparePageAndOptions(e,i);if(e=o.page,i=o.options,(t=this._normalizeIndex(t))>=this.pages.length)return this.pushPage(e,i);e="string"==typeof i.pageHTML?i.pageHTML:e;var r="string"==typeof i.pageHTML?Ht:this._pageLoader;return new Promise(function(o){r.load({page:e,parent:n},function(r){hr(r),n._pageMap.set(r,e),r=Q.extend(r,{data:i.data,pushedOptions:i}),i.animationOptions=Q.extend({},O.parseAnimationOptionsString(n.getAttribute("animation-options")),i.animationOptions||{}),r.style.display="none",n.insertBefore(r,n.pages[t]),n.topPage.updateBackButton(!0),setTimeout(function(){r=null,o(n.pages[t])},1e3/60)})})}},{key:"removePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=this._normalizeIndex(t))<this.pages.length-1?new Promise(function(n){var i=e.pages[t],o=e.topPage;e._pageMap.delete(i),e._pageLoader.unload(i),1===e.pages.length&&e.topPage.updateBackButton(!1),n(o)}):this.popPage(n)}},{key:"resetToPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);if(t=i.page,(n=i.options).animator||n.animation||n.pop||(n.animation="none"),n.page||n.pageHTML||!this._getPageTarget()||(t=n.page=this._getPageTarget()),n.pop)return this._removePages(),this.insertPage(0,t,{data:n.data}).then(function(){return e.popPage(n)});var o=n.callback;return n.callback=function(t){e._removePages(),t.updateBackButton(!1),o&&o(t)},this.pushPage(t,n)}},{key:"bringPageTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===["number","string"].indexOf(void 0===t?"undefined":f(t))&&Q.throw("First argument must be a page name or the index of an existing page. You supplied "+t);var n="number"==typeof t?this._normalizeIndex(t):this._lastIndexOfPage(t),i=this.pages[n];if(n<0)return this.pushPage(t,e);return e=this._preparePageAndOptions(i,e).options,n===this.pages.length-1?Promise.resolve(i):(i||Q.throw("Failed to find item "+t),this._isRunning?Promise.reject("pushPage is already running."):this._emitPrePushEvent()?Promise.reject("Canceled in prepush event."):(i.style.display="",i.style.visibility="hidden",i.parentNode.appendChild(i),this._pushPage(e)))}},{key:"_preparePageAndOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"!=(void 0===e?"undefined":f(e))&&Q.throw("options must be an object. You supplied "+e),null!==t&&void 0!==t||!e.page||(t=e.page),e=Q.extend({},this.options||{},e,{page:t}),{page:t,options:e}}},{key:"_removePages",value:function(t){var e=this.pages,n=void 0===t?0:e.length-t;n=n<0?1:n;for(var i=e.length-2;i>=n;i--)this._pageMap.delete(e[i]),this._pageLoader.unload(e[i])}},{key:"_updateLastPageBackButton",value:function(){var t=this.pages.length-1;t>=0&&this.pages[t].updateBackButton(t>0)}},{key:"_normalizeIndex",value:function(t){return t>=0?t:Math.abs(this.pages.length+t)%this.pages.length}},{key:"_onDeviceBackButton",value:function(t){this.pages.length>1?this.popPage():t.callParentHandler()}},{key:"_lastIndexOfPage",value:function(t){var e=void 0;for(e=this.pages.length-1;e>=0&&(this._pageMap.has(this.pages[e])||Q.throw("Incorrect state of pageMap"),t!==this._pageMap.get(this.pages[e]));e--);return e}},{key:"_emitPreEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;return Q.triggerElementEvent(this,"pre"+t,Q.extend({navigator:this,currentPage:this.pages[this.pages.length-1],cancel:function(){return n=!0}},e)),n}},{key:"_emitPrePushEvent",value:function(){return this._emitPreEvent("push")}},{key:"_emitPrePopEvent",value:function(){var t=this.pages.length;return this._emitPreEvent("pop",{leavePage:this.pages[t-1],enterPage:this.pages[t-2]})}},{key:"_createPageElement",value:function(t){var e=Q.createElement(P.normalizePageHTML(t));return hr(e),e}},{key:"_show",value:function(){var t=this;this.loaded.then(function(){return t.topPage&&t.topPage._show()})}},{key:"_hide",value:function(){this.topPage&&this.topPage._hide()}},{key:"_destroy",value:function(){for(var t=this.pages.length-1;t>=0;t--)this._pageLoader.unload(this.pages[t]);this.remove()}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"topPage",get:function(){for(var t=this.lastElementChild;t&&"ONS-PAGE"!==t.tagName;)t=t.previousElementSibling;return t}},{key:"pages",get:function(){return Q.arrayFrom(this.children).filter(function(t){return"ONS-PAGE"===t.tagName})}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}},{key:"_isRunning",set:function(t){this.setAttribute("_is-running",t?"true":"false")},get:function(){return JSON.parse(this.getAttribute("_is-running"))}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Jo||Q.throwAnimator("Navigator"),ur[t]=e}},{key:"observedAttributes",get:function(){return["animation","swipeable"]}},{key:"animators",get:function(){return ur}},{key:"NavigatorAnimator",get:function(){return Jo}},{key:"events",get:function(){return["prepush","postpush","prepop","postpop"]}},{key:"rewritables",get:function(){return cr}}]),e}();c.Navigator=dr,customElements.define("ons-navigator",dr);var fr={"":"toolbar--*",".toolbar__left":"toolbar--*__left",".toolbar__center":"toolbar--*__center",".toolbar__right":"toolbar--*__right"},pr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"toolbar",fr);break;case"modifier":B.onModifierChanged(e,n,this,fr)}}},{key:"_getToolbarLeftItemsElement",value:function(){return this.querySelector(".left")||P.nullElement}},{key:"_getToolbarCenterItemsElement",value:function(){return this.querySelector(".center")||P.nullElement}},{key:"_getToolbarRightItemsElement",value:function(){return this.querySelector(".right")||P.nullElement}},{key:"_getToolbarBackButtonLabelElement",value:function(){return this.querySelector("ons-back-button .back-button__label")||P.nullElement}},{key:"_getToolbarBackButtonIconElement",value:function(){return this.querySelector("ons-back-button .back-button__icon")||P.nullElement}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("toolbar"),this._ensureToolbarItemElements(),B.initModifier(this,fr)}},{key:"_ensureToolbarItemElements",value:function(){for(var t=this.childNodes.length-1;t>=0;t--)1!=this.childNodes[t].nodeType&&this.removeChild(this.childNodes[t]);var e=this._ensureToolbarElement("center");if(e.classList.add("toolbar__title"),1!==this.children.length||!this.children[0].classList.contains("center")){var n=this._ensureToolbarElement("left"),i=this._ensureToolbarElement("right");this.children[0]===n&&this.children[1]===e&&this.children[2]===i||(this.appendChild(n),this.appendChild(e),this.appendChild(i))}}},{key:"_ensureToolbarElement",value:function(t){if(Q.findChild(this,".toolbar__"+t)){var e=Q.findChild(this,".toolbar__"+t);return e.classList.add(t),e}var n=Q.findChild(this,"."+t)||Q.create("."+t);return n.classList.add("toolbar__"+t),n}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Toolbar=pr,customElements.define("ons-toolbar",pr);var gr="page",mr={"":"page--*",".page__content":"page--*__content",".page__background":"page--*__background"},_r=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._deriveHooks(),t._defaultClassName=gr,t.classList.add(gr),t._initialized=!1,n(t,function(){t._compile(),t._isShown=!1,t._contentElement=t._getContentElement(),t._backgroundElement=t._getBackgroundElement()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this;N.prepare(this);var e=Q.findChild(this,"ons-toolbar"),n=Q.findChild(this,".page__background")||Q.findChild(this,".background")||document.createElement("div");n.classList.add("page__background"),this.insertBefore(n,!e&&this.firstChild||e&&e.nextSibling);var i=Q.findChild(this,".page__content")||Q.findChild(this,".content")||document.createElement("div");i.classList.add("page__content"),i.parentElement||Q.arrayFrom(this.childNodes).forEach(function(e){(1!==e.nodeType||t._elementShouldBeMoved(e))&&i.appendChild(e)}),this._tryToFillStatusBar(i),this.insertBefore(i,n.nextSibling),e&&Q.hasModifier(e,"transparent")||1!==i.children.length||!Q.isPageControl(i.children[0])||(this._defaultClassName+=" page--wrapper",this.attributeChangedCallback("class")),B.initModifier(this,mr)}},{key:"_elementShouldBeMoved",value:function(t){if(t.classList.contains("page__background"))return!1;var e=t.tagName.toLowerCase();if("ons-fab"===e)return!t.hasAttribute("position");return t.hasAttribute("inline")||-1===["script","ons-toolbar","ons-bottom-toolbar","ons-modal","ons-speed-dial","ons-dialog","ons-alert-dialog","ons-popover","ons-action-sheet"].indexOf(e)}},{key:"_tryToFillStatusBar",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;P.autoStatusBarFill(function(){Q.toggleAttribute(t,"status-bar-fill",!Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")})&&(t._canAnimateToolbar(e)||!Q.findChild(e,Q.isPageControl)))})}},{key:"_canAnimateToolbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;return!!Q.findChild(this,"ons-toolbar")||!!Q.findChild(t,function(t){return Q.match(t,"ons-toolbar")&&!t.hasAttribute("inline")})}},{key:"connectedCallback",value:function(){var t=this;Q.isAttached(this)&&n(this,function(){t._tryToFillStatusBar(),t.hasAttribute("on-infinite-scroll")&&t.attributeChangedCallback("on-infinite-scroll",null,t.getAttribute("on-infinite-scroll")),t._initialized||(t._initialized=!0,setImmediate(function(){t.onInit&&t.onInit(),Q.triggerElementEvent(t,"init")}),Q.hasAnyComponentAsParent(t)||setImmediate(function(){return t._show()}))})}},{key:"updateBackButton",value:function(t){this.backButton&&(t?this.backButton.show():this.backButton.hide())}},{key:"_onScroll",value:function(){var t=this,e=this._contentElement,n=(e.scrollTop+e.clientHeight)/e.scrollHeight>=this._infiniteScrollLimit;this._onInfiniteScroll&&!this._loadingContent&&n&&(this._loadingContent=!0,this._onInfiniteScroll(function(){return t._loadingContent=!1}))}},{key:"_getContentElement",value:function(){var t=Q.findChild(this,".page__content");if(t)return t;Q.throw('Fail to get ".page__content" element')}},{key:"_getBackgroundElement",value:function(){var t=Q.findChild(this,".page__background");if(t)return t;Q.throw('Fail to get ".page__background" element')}},{key:"_getBottomToolbarElement",value:function(){return Q.findChild(this,"ons-bottom-toolbar")||P.nullElement}},{key:"_getToolbarElement",value:function(){return Q.findChild(this,"ons-toolbar")||document.createElement("ons-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){var i=this;switch(t){case"class":Q.restoreClass(this,this._defaultClassName,mr);break;case"modifier":B.onModifierChanged(e,n,this,mr);break;case"on-infinite-scroll":this.onInfiniteScroll=null===n?null:function(t){var e=Q.findFromPath(n);i.onInfiniteScroll=e,e(t)}}}},{key:"_show",value:function(){!this._isShown&&Q.isAttached(this)&&(this._isShown=!0,this.setAttribute("shown",""),this.onShow&&this.onShow(),Q.triggerElementEvent(this,"show"),Q.propagateAction(this,"_show"))}},{key:"_hide",value:function(){this._isShown&&(this._isShown=!1,this.removeAttribute("shown"),this.onHide&&this.onHide(),Q.triggerElementEvent(this,"hide"),Q.propagateAction(this,"_hide"))}},{key:"_destroy",value:function(){this._hide(),this.onDestroy&&this.onDestroy(),Q.triggerElementEvent(this,"destroy"),this.onDeviceBackButton&&this.onDeviceBackButton.destroy(),Q.propagateAction(this,"_destroy"),this.remove()}},{key:"_deriveHooks",value:function(){var t=this;this.constructor.events.forEach(function(e){var n="on"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return t["_"+n]},set:function(e){e instanceof Function||Q.throw('"'+n+'" hook must be a function'),t["_"+n]=e.bind(t)}})})}},{key:"name",set:function(t){this.setAttribute("name",t)},get:function(){return this.getAttribute("name")}},{key:"backButton",get:function(){return this.querySelector("ons-back-button")}},{key:"onInfiniteScroll",set:function(t){var e=this;!t||t instanceof Function||Q.throw('"onInfiniteScroll" must be function or null'),n(this,function(){t?e._onInfiniteScroll||(e._infiniteScrollLimit=.9,e._boundOnScroll=e._onScroll.bind(e),setImmediate(function(){return e._contentElement.addEventListener("scroll",e._boundOnScroll)})):e._contentElement.removeEventListener("scroll",e._boundOnScroll),e._onInfiniteScroll=t})},get:function(){return this._onInfiniteScroll}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"scrollTop",get:function(){return this._contentElement.scrollTop},set:function(t){this._contentElement.scrollTop=t}}],[{key:"observedAttributes",get:function(){return["modifier","on-infinite-scroll","class"]}},{key:"events",get:function(){return["init","show","hide","destroy"]}}]),e}();c.Page=_r,customElements.define("ons-page",_r);var vr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}},{key:"_animate",value:function(t,e){var n=e.from,i=e.to,o=e.options,r=e.callback,a=e.restore,s=void 0!==a&&a,l=e.animation;return o=Q.extend({},this.options,o),l&&(n=l.from,i=l.to),l=nt(t),s&&(l=l.saveStyle()),l=l.queue(n).wait(this.delay).queue({css:i,duration:this.duration,timing:this.timing}),s&&(l=l.restoreStyle()),r&&(l=l.queue(function(t){r(),t()})),l}},{key:"_animateAll",value:function(t,e){var n=this;Object.keys(e).forEach(function(i){return n._animate(t[i],e[i]).play()})}}]),e}(),br={out:{from:{opacity:1},to:{opacity:0}},in:{from:{opacity:0},to:{opacity:1}}},yr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,vr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{animation:br.in,restore:!0,callback:e}})}},{key:"hide",value:function(t,e){this._animateAll(t,{_mask:br.out,_popover:{animation:br.out,restore:!0,callback:e}})}}]),e}(),kr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,yr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{from:{transform:"scale3d(1.3, 1.3, 1.0)",opacity:0},to:{transform:"scale3d(1.0, 1.0,  1.0)",opacity:1},restore:!0,callback:e}})}}]),e}(),wr={".popover":"popover--*",".popover-mask":"popover-mask--*",".popover__content":"popover--*__content",".popover__arrow":"popover--*__arrow"},Er={default:function(){return C.isAndroid()?yr:kr},none:vr,"fade-ios":kr,"fade-md":yr},Cr={up:"bottom",left:"right",down:"top",right:"left"},Ar=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnChange=t._onChange.bind(t),n(t,function(){t._compile(),t.style.display="none"}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Er,baseClass:vr,baseClassName:"PopoverAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"_toggleStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?(this.style.display="block",this._currentTarget=e.target,this._positionPopover(e.target)):(this.style.display="none",this._clearStyles())}},{key:"_positionPopover",value:function(t){var e=this._radius,n=this._content,i=this._margin,o=Li.getSafeAreaLengths(),r=Li.getSafeAreaDOMRect(),a=t.getBoundingClientRect(),s=Q.hasModifier(this,"material"),l=s&&this.hasAttribute("cover-target"),u=(Q.findParent(this,"ons-page")||document.body).getBoundingClientRect(),c={top:Math.max(u.top,r.top),left:Math.max(u.left,r.left),bottom:Math.min(u.bottom,r.bottom),right:Math.min(u.right,r.right)},h={top:a.top-(c.top+i),left:a.left-(c.left+i),bottom:c.bottom-i-a.bottom,right:c.right-i-a.right},d={top:a.top+Math.round(a.height/2)-(c.top+i),left:a.left+Math.round(a.width/2)-(c.left+i),bottom:c.bottom-i-a.bottom+Math.round(a.height/2),right:c.right-i-a.right+Math.round(a.width/2)},f=this._calculateDirections(h),p=f.vertical,g=f.primary,m=f.secondary;this._currentDirection=g,Q.addModifier(this,g);var _=p?"width":"height",v=function(t){return{width:parseInt(t.getPropertyValue("width"),10),height:parseInt(t.getPropertyValue("height"),10)}}(window.getComputedStyle(n)),b=l?0:(p?a.height:a.width)+(s?0:14),y=Math.max(o[g]+i,o[g]+i+h[g]+b),k=Math.max(o[m]+i,o[m]+i+d[m]-v[_]/2);this._popover.style[g]=y+"px",this._popover.style[m]=k+"px",this._arrow.style[m]=Math.max(e,o[m]+i+d[m]-k)+"px"}},{key:"_calculateDirections",value:function(t){var e=(this.getAttribute("direction")||"up down left right").split(/\s+/).map(function(t){return Cr[t]}).sort(function(e,n){return t[e]-t[n]})[0],n="top"==e||"bottom"==e,i=void 0;return i=n?t.left<t.right?"left":"right":t.top<t.bottom?"top":"bottom",{vertical:n,primary:e,secondary:i}}},{key:"_clearStyles",value:function(){var t=this;this._currentDirection=null,["top","bottom","left","right"].forEach(function(e){t._arrow.style[e]=t._content.style[e]=t._popover.style[e]="",Q.removeModifier(t,e)})}},{key:"_onChange",value:function(){var t=this;setImmediate(function(){t._currentTarget&&t._positionPopover(t._currentTarget)})}},{key:"_compile",value:function(){if(N.prepare(this),!this._popover||!this._mask){if(this._popover&&this._content){if(!this._mask){var t=document.createElement("div");t.classList.add("popover-mask"),this.insertBefore(t,this.firstChild)}if(!this._arrow){var e=document.createElement("div");e.classList.add("popover__arrow"),this._popover.appendChild(e)}}else{for(var n=Q.createFragment('\n        <div class="popover-mask"></div>\n        <div class="popover">\n          <div class="popover__content"></div>\n          <div class="popover__arrow"></div>\n        </div>\n      '),i=n.querySelector(".popover__content");this.childNodes[0];)i.appendChild(this.childNodes[0]);this.appendChild(n)}this.hasAttribute("style")&&(this._popover.setAttribute("style",this.getAttribute("style")),this.removeAttribute("style")),B.initModifier(this,this._scheme)}}},{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof(n=!t||"object"!==(void 0===t?"undefined":f(t))||t instanceof Event||t instanceof HTMLElement?_({},n,{target:t}):_({},t)).target?n.target=document.querySelector(n.target):n.target instanceof Event&&(n.target=n.target.target),n.target instanceof HTMLElement||Q.throw("Invalid target type or undefined"),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,n)}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this._boundOnChange,!1),this._margin=this._margin||parseInt(window.getComputedStyle(this).getPropertyValue("top")),this._margin=this._margin||6,n(this,function(){t._radius=parseInt(window.getComputedStyle(t._content).getPropertyValue("border-top-left-radius"))})}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._boundOnChange,!1)}},{key:"attributeChangedCallback",value:function(t,n,i){if("direction"===t)return this._boundOnChange();"modifier"===t&&this._currentDirection&&Q.addModifier(this,this._currentDirection),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return wr}},{key:"_mask",get:function(){return Q.findChild(this,".popover-mask")}},{key:"_popover",get:function(){return Q.findChild(this,".popover")}},{key:"_content",get:function(){return Q.findChild(this._popover,".popover__content")}},{key:"_arrow",get:function(){return Q.findChild(this._popover,".popover__arrow")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof vr||Q.throwAnimator("Popover"),Er[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["direction"])}},{key:"animators",get:function(){return Er}},{key:"PopoverAnimator",get:function(){return vr}}]),e}();c.Popover=Ar,customElements.define("ons-popover",Ar);var Sr={".progress-bar":"progress-bar--*",".progress-bar__primary":"progress-bar--*__primary",".progress-bar__secondary":"progress-bar--*__secondary"},Pr=Q.createElement('\n  <div class="progress-bar">\n    <div class="progress-bar__secondary"></div>\n    <div class="progress-bar__primary"></div>\n  </div>\n'),Or="indeterminate",xr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-bar"):this._template=Pr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-bar__primary"),this._secondary=Q.findChild(this._template,".progress-bar__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Sr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-bar"))return!1;var t=Q.findChild(this,".progress-bar");return!!Q.findChild(t,".progress-bar__secondary")&&!!Q.findChild(t,".progress-bar__primary")}},{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Sr),this.hasAttribute(Or)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Or&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Or,{force:t.hasAttribute(Or)})})}},{key:"_updateValue",value:function(){var t=this;n(this,function(){t._primary.style.width=t.hasAttribute("value")?t.getAttribute("value")+"%":"0%",t._secondary.style.width=t.hasAttribute("secondary-value")?t.getAttribute("secondary-value")+"%":"0%"})}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Or,""):this.removeAttribute(Or)},get:function(){return this.hasAttribute(Or)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Or]}}]),e}();c.ProgressBar=xr,customElements.define("ons-progress-bar",xr);var Tr={".progress-circular":"progress-circular--*",".progress-circular__background":"progress-circular--*__background",".progress-circular__primary":"progress-circular--*__primary",".progress-circular__secondary":"progress-circular--*__secondary"},Lr=Q.createElement('\n  <svg class="progress-circular">\n    <circle class="progress-circular__background" />\n    <circle class="progress-circular__secondary" cx="50%" cy="50%" r="40%" />\n    <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" />\n  </svg>\n'),Mr="indeterminate",Dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Tr),this.hasAttribute(Mr)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Mr&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Mr,{force:t.hasAttribute(Mr)})})}},{key:"_updateValue",value:function(){var t=this;this.hasAttribute("value")&&n(this,function(){var e=Math.ceil(251.32*t.getAttribute("value")*.01);t._primary.style["stroke-dasharray"]=e+"%, 251.32%"}),this.hasAttribute("secondary-value")?n(this,function(){var e=Math.ceil(251.32*t.getAttribute("secondary-value")*.01);t._secondary.style.display=null,t._secondary.style["stroke-dasharray"]=e+"%, 251.32%"}):n(this,function(){t._secondary.style.display="none"})}},{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-circular"):this._template=Lr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-circular__primary"),this._secondary=Q.findChild(this._template,".progress-circular__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Tr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-circular"))return!1;var t=Q.findChild(this,".progress-circular");return!!Q.findChild(t,".progress-circular__secondary")&&!!Q.findChild(t,".progress-circular__primary")}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Mr,""):this.removeAttribute(Mr)},get:function(){return this.hasAttribute(Mr)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Mr]}}]),e}();c.ProgressCircular=Dr,customElements.define("ons-progress-circular",Dr);var Ir="initial",Nr=function(t,e){return Q.throw('"'+t+'" must be '+e)},Br=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._shouldFixScroll=Q.globals.isUIWebView,t._onDrag=t._onDrag.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onDragEnd=t._onDragEnd.bind(t),t._onScroll=t._onScroll.bind(t),t._setState(Ir,!0),t._hide(),t}return b(e,Pi),g(e,[{key:"_setStyle",value:function(){var t=this.height+"px";d(this,{height:t,lineHeight:t}),""===this.style.display&&this._show()}},{key:"_onScroll",value:function(t){var e=this._pageElement;e.scrollTop<0&&(e.scrollTop=0)}},{key:"_canConsumeGesture",value:function(t){return"up"===t.direction||"down"===t.direction}},{key:"_onDragStart",value:function(t){var e=this;if(t.gesture&&!this.disabled){var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight,o=this._shouldFixScroll?.8:1;if(this._ignoreDrag=t.consumed||n>i*o,!this._ignoreDrag){var r=t.consume;t.consume=function(){r&&r(),e._ignoreDrag=!0,e._hide()},this._canConsumeGesture(t.gesture)&&(r&&r(),t.consumed=!0,this._show())}this._startScroll=this._pageElement.scrollTop}}},{key:"_onDrag",value:function(t){var e=this;if(t.gesture&&!this.disabled&&!this._ignoreDrag&&this._canConsumeGesture(t.gesture)){"none"===this.style.display&&this._show(),t.stopPropagation();var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight;this._shouldFixScroll&&(this._pageElement.scrollTop=this._startScroll-t.gesture.deltaY,("up"!==t.gesture.interimDirection||n<=.5*i)&&t.gesture.preventDefault());var o=Math.max(t.gesture.deltaY-this._startScroll,0);if(o!==this._currentTranslation){var r=this.thresholdHeight;r>0&&o>=r?(t.gesture.stopDetect(),setImmediate(function(){return e._finish()})):o>=this.height?this._setState("preaction"):this._setState(Ir),this._translateTo(o)}}}},{key:"_onDragEnd",value:function(t){if(t.gesture&&!this.disabled&&!this._ignoreDrag&&(t.stopPropagation(),this._currentTranslation>0)){this._currentTranslation>this.height?this._finish():this._translateTo(0,{animate:!0})}}},{key:"_finish",value:function(){var t=this;this._setState("action"),this._translateTo(this.height,{animate:!0});(this.onAction||function(t){return t()})(function(){t._translateTo(0,{animate:!0}),t._setState(Ir)})}},{key:"_setState",value:function(t,e){var n=this.state;this.setAttribute("state",t),e||n===this.state||Q.triggerElementEvent(this,"changestate",{pullHook:this,state:t,lastState:n})}},{key:"_show",value:function(){var t=this;setImmediate(function(){t.style.display="",t._pageElement&&(t._pageElement.style.marginTop="-"+t.height+"px")})}},{key:"_hide",value:function(){this.style.display="none",this._pageElement&&(this._pageElement.style.marginTop="")}},{key:"_translateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!=this._currentTranslation||0!=t){this._currentTranslation=t;var n=e.animate?{duration:.3,timing:"cubic-bezier(.1, .7, .1, 1)"}:{};this._onPull&&this._onPull((t/this.height).toFixed(2),n);var i=this.hasAttribute("fixed-content")?this:this._pageElement;nt(i).queue({transform:"translate3d(0px, "+t+"px, 0px)"},n).play(function(){0===t&&d.clear(i,"transition transform"),e.callback instanceof Function&&e.callback()})}}},{key:"_disableDragLock",value:function(){this._dragLockDisabled=!0,this._setupListeners(!0)}},{key:"_setupListeners",value:function(t){var e=this,n=function(t){return e._pageElement[t+"EventListener"]("scroll",e._onScroll,!1)},i=function(t){var n={passive:!0};e._gestureDetector[t]("drag",e._onDrag,n),e._gestureDetector[t]("dragstart",e._onDragStart,n),e._gestureDetector[t]("dragend",e._onDragEnd,n)};this._gestureDetector&&(i("off"),this._gestureDetector.dispose(),this._gestureDetector=null),n("remove"),t&&(this._gestureDetector=new st(this._pageElement,{dragMinDistance:1,dragDistanceCorrection:!1,dragLockToAxis:!this._dragLockDisabled,passive:!this._shouldFixScroll}),i("on"),n("add"))}},{key:"connectedCallback",value:function(){this._currentTranslation=0,this._pageElement=this.parentNode,this._setupListeners(!0),this._setStyle()}},{key:"disconnectedCallback",value:function(){this._hide(),this._setupListeners(!1)}},{key:"attributeChangedCallback",value:function(t,e,n){"height"===t&&this._pageElement&&this._setStyle()}},{key:"onAction",get:function(){return this._onAction},set:function(t){!t||t instanceof Function||Nr("onAction","function or null"),this._onAction=t}},{key:"onPull",get:function(){return this._onPull},set:function(t){!t||t instanceof Function||Nr("onPull","function or null"),this._onPull=t}},{key:"height",set:function(t){Q.isInteger(t)||Nr("height","integer"),this.setAttribute("height",t+"px")},get:function(){return parseInt(this.getAttribute("height")||"64",10)}},{key:"thresholdHeight",set:function(t){Q.isInteger(t)||Nr("thresholdHeight","integer"),this.setAttribute("threshold-height",t+"px")},get:function(){return parseInt(this.getAttribute("threshold-height")||"96",10)}},{key:"state",get:function(){return this.getAttribute("state")}},{key:"pullDistance",get:function(){return this._currentTranslation}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["height"]}},{key:"events",get:function(){return["changestate"]}}]),e}();c.PullHook=Br,customElements.define("ons-pull-hook",Br);var jr={"":"range--*",".range__input":"range--*__input",".range__focus-ring":"range--*__focus-ring"},Hr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onMouseDown=t._onMouseDown.bind(t),t._onMouseUp=t._onMouseUp.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onTouchEnd=t._onTouchEnd.bind(t),t._onInput=t._update.bind(t),t._onDragstart=t._onDragstart.bind(t),t._onDragend=t._onDragend.bind(t),t}return b(e,No),g(e,[{key:"_compile",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_compile",this).call(this),this._updateDisabled(this.hasAttribute("disabled"))}},{key:"_update",value:function(){var t=this._input,e=this._focusRing;t.style.backgroundSize=100*this._ratio+"% 2px",e.value=this.value,""===t.min&&"0"===t.value||t.min===t.value?t.setAttribute("_zero",""):t.removeAttribute("_zero"),["min","max"].forEach(function(n){return e[n]=t[n]})}},{key:"_onMouseDown",value:function(t){var e=this;this._input.classList.add("range__input--active"),setImmediate(function(){return e._input.focus()})}},{key:"_onTouchStart",value:function(t){this._onMouseDown()}},{key:"_onMouseUp",value:function(t){this._input.classList.remove("range__input--active")}},{key:"_onTouchEnd",value:function(t){this._onMouseUp(t)}},{key:"_onDragstart",value:function(t){t.consumed=!0,t.gesture.stopPropagation(),this._input.classList.add("range__input--active"),this.addEventListener("drag",this._onDrag)}},{key:"_onDrag",value:function(t){t.stopPropagation()}},{key:"_onDragend",value:function(t){this._input.classList.remove("range__input--active"),this.removeEventListener("drag",this._onDrag)}},{key:"attributeChangedCallback",value:function(t,n,i){"disabled"===t&&this._updateDisabled(i),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_updateDisabled",value:function(t){t?this.classList.add("range--disabled"):this.classList.remove("range--disabled")}},{key:"connectedCallback",value:function(){this._setupListeners(!0)}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouchStart,{passive:!0}),this[e]("mousedown",this._onMouseDown),this[e]("mouseup",this._onMouseUp),this[e]("touchend",this._onTouchEnd),this[e]("dragstart",this._onDragstart),this[e]("dragend",this._onDragend),this[e]("input",this._onInput)}},{key:"_scheme",get:function(){return jr}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <input type="range" class="range__focus-ring" tabIndex="-1">\n    '}},{key:"_defaultClassName",get:function(){return"range"}},{key:"type",get:function(){return"range"}},{key:"_focusRing",get:function(){return this.children[1]}},{key:"_ratio",get:function(){var t=""===this._input.min?0:parseInt(this._input.min),e=""===this._input.max?100:parseInt(this._input.max);return(this.value-t)/(e-t)}}],[{key:"observedAttributes",get:function(){return["disabled"].concat(w(No.observedAttributes))}}]),e}();c.Range=Hr,customElements.define("ons-range",Hr);var Rr=function(){function t(){p(this,t),this._queue=[],this._index=0}return g(t,[{key:"animate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=(new Date).getTime(),o={},r=!1,a=!1,s=!1,l=Object.keys(e),u={stop:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&clearTimeout(s);var h=Math.min(1,((new Date).getTime()-i)/n);return l.forEach(function(n){t.style[n]=(1-h)*o[n]+h*e[n]+("opacity"==n?"":"px")}),t.style.transitionDuration="0s",c.stopNext?a=!1:r||(r=!0,a&&a()),u},then:function(t){return a=t,r&&a&&a(),u},speed:function(a){if(P.config.animationsDisabled&&(a=0),!r){s&&clearTimeout(s);var c=((new Date).getTime()-i)/n,h=a*(1-c);l.forEach(function(n){t.style[n]=(1-c)*o[n]+c*e[n]+("opacity"==n?"":"px")}),function(){var e=window.getComputedStyle(t);l.forEach(e.getPropertyValue.bind(e)),e=t.offsetHeight}(),i=t.speedUpTime,n=h,t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")}),s=setTimeout(u.stop,h)}return u},finish:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=((new Date).getTime()-i)/n;return u.speed(t/(1-e)),u}};if(t.hasAttribute("disabled")||r||P.config.animationsDisabled)return u;var c=window.getComputedStyle(t);return l.forEach(function(t){var e=parseFloat(c.getPropertyValue(t));o[t]=isNaN(e)?0:e}),r||(t.style.transitionProperty=l.join(","),t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")})),s=setTimeout(u.stop,n),this._onStopAnimations(t,u.stop),u}}]),g(t,[{key:"_onStopAnimations",value:function(t,e){var n=this._queue,i=this._index++;n[t]=n[t]||[],n[t][i]=function(o){return delete n[t][i],n[t]&&0==n[t].length&&delete n[t],e(o)}}},{key:"stopAnimations",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t))return t.forEach(function(t){e.stopAnimations(t,n)});(this._queue[t]||[]).forEach(function(t){t(n||{})})}},{key:"stopAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stopAnimations(Object.keys(this._queue),t)}},{key:"fade",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return this.animate(t,{opacity:0},e)}}]),t}(),Fr={"":"ripple--*",".ripple__wave":"ripple--*__wave",".ripple__background":"ripple--*__background"},qr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onTap=t._onTap.bind(t),t._onHold=t._onHold.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onRelease=t._onRelease.bind(t),n(t,function(){return t._compile()}),t._animator=new Rr,["color","center","start-radius","background","modifier"].forEach(function(e){t.attributeChangedCallback(e,null,t.getAttribute(e))}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("ripple"),this._wave=this.getElementsByClassName("ripple__wave")[0],this._background=this.getElementsByClassName("ripple__background")[0],this._background&&this._wave||(this._wave=Q.create(".ripple__wave"),this._background=Q.create(".ripple__background"),this.appendChild(this._wave),this.appendChild(this._background)),B.initModifier(this,Fr)}},{key:"_getEffectSize",value:function(){if(this.hasAttribute("size")){var t=this.getAttribute("size");if(-1!==["cover","contain"].indexOf(t))return t}return"cover"}},{key:"_calculateCoords",value:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=this.getBoundingClientRect(),s=this._getEffectSize(),l=function(){return Q.throw("Ripple invalid state")};return this._center?(e=a.width/2,n=a.height/2,"cover"===s?r=Math.sqrt(e*e+n*n):"contain"===s?r=Math.min(e,n):l()):(e=("number"==typeof t.clientX?t.clientX:t.changedTouches[0].clientX)-a.left,n=("number"==typeof t.clientY?t.clientY:t.changedTouches[0].clientY)-a.top,i=Math.max(n,a.height-n),o=Math.max(e,a.width-e),"cover"===s?r=Math.sqrt(i*i+o*o):"contain"===s?r=Math.min(Math.round(i/2),Math.round(o/2)):l()),{x:e,y:n,r:r}}},{key:"_rippleAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=this._animator,i=this._wave,o=this._background,r=this._minR,a=this._calculateCoords(t),s=a.x,l=a.y,u=a.r;return n.stopAll({stopNext:1}),n.animate(o,{opacity:1},e),Q.extend(i.style,{opacity:1,top:l-r+"px",left:s-r+"px",width:2*r+"px",height:2*r+"px"}),n.animate(i,{top:l-u,left:s-u,height:2*u,width:2*u},e)}},{key:"_updateParent",value:function(){if(!this._parentUpdated&&this.parentNode){"static"===window.getComputedStyle(this.parentNode).getPropertyValue("position")&&(this.parentNode.style.position="relative"),this._parentUpdated=!0}}},{key:"_onTap",value:function(t){var e=this;this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._rippleAnimation(t.gesture.srcEvent).then(function(){e._animator.fade(e._wave),e._animator.fade(e._background)}))}},{key:"_onHold",value:function(t){this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._holding=this._rippleAnimation(t.gesture.srcEvent,2e3),document.addEventListener("release",this._onRelease))}},{key:"_onRelease",value:function(t){var e=this;this._holding&&!t.ripple&&(t.ripple=!0,this._holding.speed(300).then(function(){e._animator.stopAll({stopNext:!0}),e._animator.fade(e._wave),e._animator.fade(e._background)}),this._holding=!1),document.removeEventListener("release",this._onRelease)}},{key:"_onDragStart",value:function(t){if(this._holding)return this._onRelease(t);-1!=["left","right"].indexOf(t.gesture.direction)&&this._onTap(t)}},{key:"connectedCallback",value:function(){this._parentNode=this.parentNode,P.config.animationsDisabled?this.disabled=!0:(this._parentNode.addEventListener("tap",this._onTap),this._parentNode.addEventListener("hold",this._onHold),this._parentNode.addEventListener("dragstart",this._onDragStart))}},{key:"disconnectedCallback",value:function(){var t=this._parentNode||this.parentNode;t.removeEventListener("tap",this._onTap),t.removeEventListener("hold",this._onHold),t.removeEventListener("dragstart",this._onDragStart)}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"ripple",Fr);break;case"modifier":B.onModifierChanged(e,i,this,Fr);break;case"start-radius":this._minR=Math.max(0,parseFloat(i)||0);break;case"color":i&&n(this,function(){o._wave.style.background=i,o.hasAttribute("background")||(o._background.style.background=i)});break;case"background":(i||e)&&("none"===i?n(this,function(){o._background.setAttribute("disabled","disabled"),o._background.style.background="transparent"}):n(this,function(){o._background.hasAttribute("disabled")&&o._background.removeAttribute("disabled"),o._background.style.background=i}));break;case"center":"center"===t&&(this._center=null!=i&&"false"!=i)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["start-radius","color","background","center","class","modifier"]}}]),e}();c.Ripple=qr,customElements.define("ons-ripple",qr);var zr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),e}();c.Row=zr,customElements.define("ons-row",zr);var Vr={"":"segment--*",".segment__item":"segment--*__item",".segment__input":"segment--*__input",".segment__button":"segment--*__button"},Wr=function(){var t=0;return function(){return"ons-segment-gen-"+t++}}(),Ur=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._segmentId=Wr(),t._tabbar=null,t._onChange=t._onChange.bind(t),t._onTabbarPreChange=t._onTabbarPreChange.bind(t),n(t,function(){t._compile(),setImmediate(function(){return t._lastActiveIndex=t._tabbar?t._tabbar.getActiveTabIndex():t.getActiveButtonIndex()})}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("segment");for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];e.classList.add("segment__item");var n=Q.findChild(e,".segment__input")||Q.create("input.segment__input");n.type="radio",n.value=t,n.name=n.name||this._segmentId,n.checked=!this.hasAttribute("tabbar-id")&&t===(parseInt(this.getAttribute("active-index"))||0);var i=Q.findChild(e,".segment__button")||Q.create(".segment__button");if(i.parentElement!==e)for(;e.firstChild;)i.appendChild(e.firstChild);e.appendChild(n),e.appendChild(i)}B.initModifier(this,Vr)}},{key:"connectedCallback",value:function(){var t=this;this.hasAttribute("tabbar-id")&&n(this,function(){var e=Q.findParent(t,"ons-page");t._tabbar=e&&e.querySelector("#"+t.getAttribute("tabbar-id")),t._tabbar&&"ONS-TABBAR"===t._tabbar.tagName||Q.throw("No tabbar with id "+t.getAttribute("tabbar-id")+" was found."),t._tabbar.setAttribute("hide-tabs",""),setImmediate(function(){return t._setChecked(t._tabbar.getActiveTabIndex())}),t._tabbar.addEventListener("prechange",t._onTabbarPreChange)}),this.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._tabbar&&(t._tabbar.removeEventListener("prechange",t._onTabbarPreChange),t._tabbar=null)}),this.removeEventListener("change",this._onChange)}},{key:"_setChecked",value:function(t){this.children[t].firstElementChild.checked=!0}},{key:"setActiveButton",value:function(t,e){return this._tabbar?this._tabbar.setActiveTab(t,e):(this._setChecked(t),this._postChange(t),Promise.resolve(t))}},{key:"getActiveButtonIndex",value:function(){for(var t=this.children.length-1;t>=0;t--)if(this.children[t].firstElementChild.checked)return t;return-1}},{key:"_onChange",value:function(t){t.stopPropagation(),this._tabbar?this._tabbar.setActiveTab(this.getActiveButtonIndex(),{reject:!1}):this._postChange(this.getActiveButtonIndex())}},{key:"_onTabbarPreChange",value:function(t){var e=this;setImmediate(function(){t.detail.canceled||(e._setChecked(t.index),e._postChange(t.index))})}},{key:"_postChange",value:function(t){Q.triggerElementEvent(this,"postchange",{index:t,activeIndex:t,lastActiveIndex:this._lastActiveIndex,segmentItem:this.children[t]}),this._lastActiveIndex=t}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"segment",Vr);break;case"modifier":B.onModifierChanged(e,n,this,Vr)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["class","modifier"]}},{key:"events",get:function(){return["postchange"]}}]),e}();c.Segment=Ur,customElements.define("ons-segment",Ur);var Xr={"":"select-* select--*",".select-input":"select-input--*"},Yr=["autofocus","disabled","form","multiple","name","required","size"],Gr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t._deriveGetters(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"select",Xr);break;case"modifier":B.onModifierChanged(e,i,this,Xr)}Yr.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_updateBoundAttributes",value:function(){var t=this;Yr.forEach(function(e){t.hasAttribute(e)?t._select.setAttribute(e,t.getAttribute(e)):t._select.removeAttribute(e)})}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("select");var t=this._select||document.createElement("select");!t.id&&this.hasAttribute("select-id")&&(t.id=this.getAttribute("select-id")),t.classList.add("select-input"),this._select||(Q.arrayFrom(this.childNodes).forEach(function(e){return t.appendChild(e)}),this.appendChild(t)),B.initModifier(this,Xr)}},{key:"_deriveGetters",value:function(){var t=this;["disabled","length","multiple","name","options","selectedIndex","size","value","form","type"].forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._select[e]},set:-1===["form","type"].indexOf(e)?function(i){return n(t,function(){return t._select[e]=i})}:void 0})})}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._select.add(t,e)}},{key:"remove",value:function(t){this._select.remove(t)}},{key:"_select",get:function(){return this.querySelector("select")}}],[{key:"observedAttributes",get:function(){return["modifier","class"].concat(Yr)}}]),e}();c.Select=Gr,customElements.define("ons-select",Gr);var $r={"":"fab--* speed-dial__item--*"},Kr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"fab fab--mini speed-dial__item",$r);break;case"modifier":B.onModifierChanged(e,n,this,$r),Q.addModifier(this,"mini");break;case"ripple":this._updateRipple()}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_onClick",value:function(t){t.stopPropagation()}},{key:"_compile",value:function(){var t=this;N.prepare(this),"fab fab--mini speed-dial__item".split(/\s+/).forEach(function(e){return t.classList.add(e)}),Q.addModifier(this,"mini"),this._updateRipple(),B.initModifier(this,$r)}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","class"]}}]),e}();c.SpeedDialItem=Kr,customElements.define("ons-speed-dial-item",Kr);var Qr={"":"speed-dial--*"},Jr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._itemShown=!1,t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("speed-dial"),N.prepare(this),this._updateRipple(),B.initModifier(this,Qr),this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up"),this._updatePosition()}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"speed-dial",Qr);break;case"modifier":B.onModifierChanged(e,i,this,Qr);break;case"ripple":n(this,function(){return o._updateRipple()});break;case"direction":n(this,function(){return o._updateDirection(i)});break;case"position":n(this,function(){return o._updatePosition()})}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_onClick",value:function(t){return this.onClick?(this.onClick.apply(this),Promise.resolve()):!this.disabled&&this.visible?this.toggleItems():void 0}},{key:"_show",value:function(){return this.inline?Promise.resolve():this.show()}},{key:"_hide",value:function(){var t=this;return new Promise(function(e){t.inline?e():setImmediate(function(){return t.hide().then(e)})})}},{key:"_updateRipple",value:function(){this._fab&&(this.hasAttribute("ripple")?this._fab.setAttribute("ripple",""):this._fab.removeAttribute("ripple"))}},{key:"_updateDirection",value:function(t){for(var e=this.items,n=0;n<e.length;n++)d(e[n],{transitionDelay:25*n+"ms",bottom:"auto",right:"auto",top:"auto",left:"auto"});switch(t){case"up":for(var i=0;i<e.length;i++)e[i].style.bottom=72+56*i+"px",e[i].style.right="8px";break;case"down":for(var o=0;o<e.length;o++)e[o].style.top=72+56*o+"px",e[o].style.left="8px";break;case"left":for(var r=0;r<e.length;r++)e[r].style.top="8px",e[r].style.right=72+56*r+"px";break;case"right":for(var a=0;a<e.length;a++)e[a].style.top="8px",e[a].style.left=72+56*a+"px";break;default:Q.throw("Argument must be one of up, down, left or right.")}}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"_getTranslate",value:function(){return(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px) ":""}},{key:"show",value:function(){return this._fab.show(),d(this,{transform:this._getTranslate}),Promise.resolve()}},{key:"hide",value:function(){var t=this;return this.hideItems().then(function(){return t._fab.hide()})}},{key:"showItems",value:function(){this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up");var t=0;if(!this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*n;t+=i,d(e[n],{transform:"scale(1)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!0,Q.triggerElementEvent(this,"open")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"hideItems",value:function(){var t=0;if(this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*(e.length-n);t+=i,d(e[n],{transform:"scale(0)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!1,Q.triggerElementEvent(this,"close")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"isOpen",value:function(){return this._itemShown}},{key:"toggle",value:function(){return this.visible?this.hide():this.show()}},{key:"toggleItems",value:function(){return this.isOpen()?this.hideItems():this.showItems()}},{key:"items",get:function(){return Q.arrayFrom(this.querySelectorAll("ons-speed-dial-item"))}},{key:"_fab",get:function(){return Q.findChild(this,"ons-fab")}},{key:"disabled",set:function(t){return t&&this.hideItems(),Q.arrayFrom(this.children).forEach(function(e){Q.match(e,".fab")&&Q.toggleAttribute(e,"disabled",t)}),Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"inline",get:function(){return this.hasAttribute("inline")}},{key:"visible",get:function(){return this._fab.visible&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["class","modifier","ripple","direction","position"]}},{key:"events",get:function(){return["open","close"]}}]),e}();c.SpeedDial=Jr,customElements.define("ons-speed-dial",Jr);var Zr={ready:function(t,e){setImmediate(e)}},ta=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._pageLoader=jt,n(t,function(){Zr.ready(t,function(){var e=t._getPageTarget();e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-splitter")||Q.throw('"ons-splitter-content" must have "ons-splitter" as parent')}},{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}}],[{key:"observedAttributes",get:function(){return[]}},{key:"rewritables",get:function(){return Zr}}]),e}();c.SplitterContent=ta,customElements.define("ons-splitter-content",ta);var ea=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnClick=t._onClick.bind(t),n(t,function(){t.parentNode._sides.every(function(t){return"split"===t.mode})&&t.setAttribute("style","display: none !important")}),t}return b(e,Pi),g(e,[{key:"_onClick",value:function(t){this.onClick instanceof Function?this.onClick():Q.match(this.parentNode,"ons-splitter")&&this.parentNode._sides.forEach(function(t){return t.close("left").catch(function(){})}),t.stopPropagation()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!0)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!1)}}],[{key:"observedAttributes",get:function(){return[]}}]),e}();c.SplitterMask=ea,customElements.define("ons-splitter-mask",ea);var na=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.duration,r=void 0===o?.3:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,duration:r,delay:s}))}return b(e,Ti),g(e,[{key:"updateOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q.extend(this,{timing:this.timing,duration:this.duration,delay:this.delay},t)}},{key:"activate",value:function(t){var e=this,i=t.parentNode;n(i,function(){e._side=t,e._oppositeSide=i.right!==t&&i.right||i.left!==t&&i.left,e._content=i.content,e._mask=i.mask})}},{key:"deactivate",value:function(){this.clearTransition(),this._mask&&this.clearMask(),this._content=this._side=this._oppositeSide=this._mask=null}},{key:"clearTransition",value:function(){var t=this;"side mask content".split(/\s+/).forEach(function(e){return t["_"+e]&&d.clear(t["_"+e],"transform transition")})}},{key:"clearMask",value:function(){this._oppositeSide&&"split"!==this._oppositeSide.mode&&this._oppositeSide.isOpen||(this._mask.style.opacity="",this._mask.style.display="none")}},{key:"translate",value:function(t){}},{key:"open",value:function(t){t()}},{key:"close",value:function(t){t()}},{key:"minus",get:function(){return"right"===this._side.side?"-":""}}]),e}(),ia=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"translate",value:function(t){this._mask.style.display="block",nt(this._side).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d("+this.minus+"100%, 0, 0)"},this.def).queue(function(e){e(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}).queue({opacity:"1"},{duration:this.duration,timing:"linear"}))}},{key:"close",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(e){t&&t(),e()}),nt(this._mask).wait(this.delay).queue({opacity:"0"},{duration:this.duration,timing:"linear"}).queue({display:"none"}))}}]),e}(),oa={default:ia,overlay:ia,push:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._side,this._content];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"translate",value:function(t){this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){var e=this,n=this._side.offsetWidth;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d("+(this.minus+n)+"px, 0, 0)"},this.def).queue(function(n){e._slidingElements=null,n(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}))}},{key:"close",value:function(t){var n=this;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(i){n._slidingElements=null,v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clearTransition",n).call(n),t&&t(),i()}),nt(this._mask).wait(this.delay).queue({display:"none"}))}}]),e}(),reveal:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._content,this._mask];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"activate",value:function(t){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",this).call(this,t),"collapse"===t.mode&&this._setStyles(t)}},{key:"deactivate",value:function(){this._side&&this._unsetStyles(this._side),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deactivate",this).call(this)}},{key:"_setStyles",value:function(t){d(t,{left:"right"===t.side?"auto":0,right:"right"===t.side?0:"auto",zIndex:0,backgroundColor:"black",transform:this._generateBehindPageStyle(0).container.transform,display:"none"});var e=t.parentElement;n(e,function(){return e.content&&d(e.content,{boxShadow:"0 0 12px 0 rgba(0, 0, 0, 0.2)"})})}},{key:"_unsetStyles",value:function(t){d.clear(t,"left right zIndex backgroundColor display"),t._content&&(t._content.style.opacity=""),this._oppositeSide&&"split"!==this._oppositeSide.mode||t.parentElement.content&&d.clear(t.parentElement.content,"boxShadow")}},{key:"_generateBehindPageStyle",value:function(t){var e=this.maxWidth,n=(t-e)/e*10;return{content:{opacity:1+(n=isNaN(n)?0:Math.max(Math.min(n,0),-10))/100},container:{transform:"translate3d("+(this.minus?-1:1)*n+"%, 0, 0)"}}}},{key:"translate",value:function(t){this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var e=this._generateBehindPageStyle(Math.min(t,this.maxWidth));this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt.runAll(nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}),nt(this._side._content).queue(e.content),nt(this._side).queue(e.container))}},{key:"open",value:function(t){var e=this;this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var n=this._generateBehindPageStyle(this.maxWidth);this._slidingElements=this._getSlidingElements(),setTimeout(function(){nt.runAll(nt(e._slidingElements).wait(e.delay).queue({transform:"translate3d("+(e.minus+e.maxWidth)+"px, 0, 0)"},e.def),nt(e._mask).wait(e.delay).queue({display:"block"}),nt(e._side._content).wait(e.delay).queue(n.content,e.def),nt(e._side).wait(e.delay).queue(n.container,e.def).queue(function(n){e._slidingElements=null,n(),t&&t()}))},1e3/60)}},{key:"close",value:function(t){var e=this,n=this._generateBehindPageStyle(0);this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def),nt(this._mask).wait(this.delay).queue({display:"none"}),nt(this._side._content).wait(this.delay).queue(n.content,this.def),nt(this._side).wait(this.delay).queue(n.container,this.def).queue(function(n){e._slidingElements=null,e._side.style.zIndex=0,e._side.style.display="none",e._side._content.style.opacity="",t&&t(),n()}))}},{key:"_getMaxWidth",value:function(){return this._side.offsetWidth}}]),e}()},ra=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onModeChange=t._onModeChange.bind(t),n(t,function(){!t.mask&&t.appendChild(document.createElement("ons-splitter-mask")),t._layout()}),t}return b(e,Pi),g(e,[{key:"_getSide",value:function(t){return Q.findChild(this,function(e){return Q.match(e,"ons-splitter-side")&&e.getAttribute("side")===t})}},{key:"_onDeviceBackButton",value:function(t){this._sides.some(function(t){return!!t.isOpen&&t.close()})||t.callParentHandler()}},{key:"_onModeChange",value:function(t){var e=this;t.target.parentNode&&n(this,function(){e._layout()})}},{key:"_layout",value:function(){var t=this;this._sides.forEach(function(e){t.content&&(t.content.style[e.side]="split"===e.mode?e.style.width:0)})}},{key:"left",get:function(){return this._getSide("left")}},{key:"right",get:function(){return this._getSide("right")}},{key:"side",get:function(){return Q.findChild(this,"ons-splitter-side")}},{key:"_sides",get:function(){return[this.left,this.right].filter(function(t){return t})}},{key:"content",get:function(){return Q.findChild(this,"ons-splitter-content")}},{key:"topPage",get:function(){return this.content._content}},{key:"mask",get:function(){return Q.findChild(this,"ons-splitter-mask")}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}}]),g(e,[{key:"connectedCallback",value:function(){this.onDeviceBackButton=this._onDeviceBackButton.bind(this),this.addEventListener("modechange",this._onModeChange,!1)}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this.removeEventListener("modechange",this._onModeChange,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"_show",value:function(){Q.propagateAction(this,"_show")}},{key:"_hide",value:function(){Q.propagateAction(this,"_hide")}},{key:"_destroy",value:function(){Q.propagateAction(this,"_destroy"),this.remove()}}],[{key:"registerAnimator",value:function(t,e){e instanceof SplitterAnimator||Q.throwAnimator("Splitter"),oa[t]=e}},{key:"SplitterAnimator",get:function(){return SplitterAnimator}},{key:"animators",get:function(){return oa}}]),e}();c.Splitter=ra,customElements.define("ons-splitter",ra);var aa="closed",sa={ready:function(t,e){setImmediate(e)}},la=function(){function t(e,n){p(this,t),this._element=e,this._onChange=this._onChange.bind(this),n&&this.changeTarget(n)}return g(t,[{key:"changeTarget",value:function(t){this.disable(),this._target=t,t&&(this._orientation=-1!==["portrait","landscape"].indexOf(t),this.activate())}},{key:"_match",value:function(t){return this._orientation?this._target===(t.isPortrait?"portrait":"landscape"):t.matches}},{key:"_onChange",value:function(t){this._element._updateMode(this._match(t)?"collapse":"split")}},{key:"activate",value:function(){this._orientation?(Ot.on("change",this._onChange),this._onChange({isPortrait:Ot.isPortrait()})):(this._queryResult=window.matchMedia(this._target),this._queryResult.addListener(this._onChange),this._onChange(this._queryResult))}},{key:"disable",value:function(){this._orientation?Ot.off("change",this._onChange):this._queryResult&&(this._queryResult.removeListener(this._onChange),this._queryResult=null)}}]),t}(),ua=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._state=aa,t._lock=new Nt,t._pageLoader=jt,t._collapseDetection=new la(t),t._animatorFactory=new O({animators:ra.animators,baseClass:na,baseClassName:"SplitterAnimator",defaultAnimation:t.getAttribute("animation")}),n(t,function(){t.attributeChangedCallback("width"),t.hasAttribute("side")||t.setAttribute("side","left"),sa.ready(t,function(){var e=t._page||t.getAttribute("page");e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;Q.match(this.parentNode,"ons-splitter")||Q.throw("Parent must be an ons-splitter element"),this._swipe=new Qo({element:this,elementHandler:this.parentElement,swipeMax:function(){t._onSwipe&&t._onSwipe(1,t._animationOpt),t.open()},swipeMid:function(e,n){t._onSwipe&&t._onSwipe(e/n),t._animator.translate(e)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,t._animationOpt),t.close()},getThreshold:function(){return Math.max(0,Math.min(1,parseFloat(t.getAttribute("open-threshold"))||.3))},getSide:function(){return t.side},isInitialState:function(){var e=t._state===aa;return t._state="changing",e},ignoreSwipe:function(e,n){var i=t.isOpen,o=Math.max(0,parseInt(t.getAttribute("swipe-target-width"),10)||0);return"split"===t._mode||t._lock.isLocked()||t._isOtherSideOpen()||!function(e){return"left"===t.side?"left"===e&&i||"right"===e&&!i:"left"===e&&!i||"right"===e&&i}(e.gesture.direction)||!i&&0!==o&&n>o}}),this.attributeChangedCallback("swipeable"),n(this,function(){t.constructor.observedAttributes.forEach(function(e){return t.attributeChangedCallback(e,null,t.getAttribute(e))})})}},{key:"disconnectedCallback",value:function(){this._swipe&&this._swipe.dispose(),this._animator=this._animationOpt=this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"swipeable":this._swipe&&this._swipe.update();break;case"width":n=this.getAttribute("width"),this.style.width=/^\d+(px|%)$/.test(n)?n:"80%";break;default:this[Q.camelize("_update-"+t)](n)}}},{key:"_emitEvent",value:function(t){if("pre"!==t.slice(0,3))return Q.triggerElementEvent(this,t,{side:this});var e=!1;return Q.triggerElementEvent(this,t,{side:this,cancel:function(){return e=!0}}),e}},{key:"_isOtherSideOpen",value:function(){var t=this;return!!Q.findChild(this.parentElement,function(e){return e instanceof t.constructor&&e!==t&&"collapse"===e._mode&&e.isOpen})}},{key:"_updateCollapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("collapse");return null===t||"split"===t?(this._collapseDetection.disable(),this._updateMode("split")):""===t||"collapse"===t?(this._collapseDetection.disable(),this._updateMode("collapse")):void this._collapseDetection.changeTarget(t)}},{key:"_updateMode",value:function(t){t!==this._mode&&(this._mode=t,this.setAttribute("mode",t),"split"===t?(this._animator&&this._animator.deactivate(),this._state=aa):(this._animator&&this._animator.activate(this),"open"===this._state&&this._animator.open()),Q.triggerElementEvent(this,"modechange",{side:this,mode:t}))}},{key:"_updateAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation");this.parentNode&&(this._animator&&this._animator.deactivate(),this._animator=this._animatorFactory.newAnimator({animation:t}),this._animator.activate(this),this._animationOpt={timing:this._animator.duration,duration:this._animator.duration})}},{key:"_updateAnimationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation-options");this._animator.updateOptions(O.parseAnimationOptionsString(t))}},{key:"open",value:function(t){return this.toggle(t,!0)}},{key:"close",value:function(t){return this.toggle(t,!1)}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i="boolean"==typeof n?n:!this.isOpen,o=i?"open":"close",r=i?"open":aa;if("split"===this._mode)return Promise.resolve(!1);if(this._state===r)return Promise.resolve(this);if(this._lock.isLocked())return Promise.reject("Another splitter-side action is already running.");if(i&&this._isOtherSideOpen())return Promise.reject("Another menu is already open.");if(this._emitEvent("pre"+o))return Promise.reject("Canceled in pre"+o+" event.");var a=this._lock.lock();return this._state="changing",new Promise(function(n){t._animator[o](function(){Q.iosPageScrollFix(i),t._state=r,a(),t._emitEvent("post"+o),e.callback instanceof Function&&e.callback(t),n(t)})})}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"side",get:function(){return"right"===this.getAttribute("side")?"right":"left"}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"mode",get:function(){return this._mode}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"isOpen",get:function(){return"collapse"===this._mode&&this._state!==aa}}],[{key:"observedAttributes",get:function(){return["animation","width","collapse","swipeable","animation-options"]}},{key:"events",get:function(){return["preopen","postopen","preclose","postclose","modechange"]}},{key:"rewritables",get:function(){return sa}}]),e}();c.SplitterSide=ua,customElements.define("ons-splitter-side",ua);var ca={"":"switch--*",".switch__input":"switch--*__input",".switch__handle":"switch--*__handle",".switch__toggle":"switch--*__toggle"},ha={ios:[1,21],material:[0,16]},da=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t.attributeChangedCallback("modifier",null,t.getAttribute("modifier"))}),t._onChange=t._onChange.bind(t),t._onRelease=t._onRelease.bind(t),t._lastTimeStamp=0,t}return b(e,Ho),g(e,[{key:"_getPosition",value:function(t){var e=this._locations;return Math.min(e[1],Math.max(e[0],this._startX+t.gesture.deltaX))}},{key:"_emitChangeEvent",value:function(){Q.triggerElementEvent(this,"change",{value:this.checked,switch:this,isInteractive:!0})}},{key:"_onChange",value:function(t){t&&t.stopPropagation&&t.stopPropagation(),this._emitChangeEvent()}},{key:"_onClick",value:function(t){(t.target.classList.contains(this.defaultElementClass+"__touch")||t.timeStamp-this._lastTimeStamp<50)&&t.preventDefault(),this._lastTimeStamp=t.timeStamp}},{key:"_onHold",value:function(t){this.disabled||(B.addModifier(this,"active"),document.addEventListener("release",this._onRelease))}},{key:"_onDragStart",value:function(t){this.disabled||-1===["left","right"].indexOf(t.gesture.direction)?B.removeModifier(this,"active"):(t.consumed=!0,B.addModifier(this,"active"),this._startX=this._locations[this.checked?1:0],this.addEventListener("drag",this._onDrag),document.addEventListener("release",this._onRelease))}},{key:"_onDrag",value:function(t){t.stopPropagation(),this._handle.style.left=this._getPosition(t)+"px"}},{key:"_onRelease",value:function(t){var e=this._locations,n=this._getPosition(t),i=this.checked;this.checked=n>=(e[0]+e[1])/2,this.checked!==i&&this._emitChangeEvent(),this.removeEventListener("drag",this._onDrag),document.removeEventListener("release",this._onRelease),this._handle.style.left="",B.removeModifier(this,"active")}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disabled||(this.checked=!this.checked,this._emitChangeEvent(),this._lastTimeStamp=t.timeStamp||0)}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("change",t._onChange)}),this.addEventListener("dragstart",this._onDragStart),this.addEventListener("hold",this._onHold),this.addEventListener("tap",this.click),this.addEventListener("click",this._onClick),this._gestureDetector=new st(this,{dragMinDistance:1,holdTimeout:251,passive:!0})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("change",t._onChange)}),this.removeEventListener("dragstart",this._onDragStart),this.removeEventListener("hold",this._onHold),this.removeEventListener("tap",this.click),this.removeEventListener("click",this._onClick),this._gestureDetector&&this._gestureDetector.dispose()}},{key:"attributeChangedCallback",value:function(t,n,i){if("modifier"===t){var o=-1!==(i||"").indexOf("material");this._locations=ha[o?"material":"ios"]}v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return ca}},{key:"_defaultClassName",get:function(){return"switch"}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <div class="'+this._defaultClassName+'__toggle">\n        <div class="'+this._defaultClassName+'__handle">\n          <div class="'+this._defaultClassName+'__touch"></div>\n        </div>\n      </div>\n    '}},{key:"type",get:function(){return"checkbox"}},{key:"_handle",get:function(){return this.querySelector("."+this._defaultClassName+"__handle")}},{key:"checkbox",get:function(){return this._input}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["modifier"])}}]),e}();c.Switch=da,customElements.define("ons-switch",da);var fa={".tabbar__content":"tabbar--*__content",".tabbar__border":"tabbar--*__border",".tabbar":"tabbar--*"},pa={ready:function(t,e){e()}},ga=function(t,e,n){return(1-n)*t+n*e},ma=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._loadInactive=Q.defer(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t._contentElement},getInitialIndex:function(){return t.getAttribute("activeIndex")||t.getAttribute("active-index")},getAutoScrollRatio:this._getAutoScrollRatio.bind(this),getBubbleWidth:function(){return parseInt(t.getAttribute("ignore-edge-width")||25,10)},isAutoScrollable:function(){return!0},preChangeHook:this._onPreChange.bind(this),postChangeHook:this._onPostChange.bind(this),refreshHook:this._onRefresh.bind(this),scrollHook:this._onScroll.bind(this)}),n(this,function(){t._tabbarBorder=Q.findChild(t._tabbarElement,".tabbar__border"),t._swiper.init({swipeable:t.hasAttribute("swipeable")})})),n(this,function(){t._updatePosition(),Q.findParent(t,"ons-page",function(t){return t===document.body})||t._show()})}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null,this._tabbarBorder=null,this._tabsRect=null)}},{key:"_normalizeEvent",value:function(t){return _({},t,{index:t.activeIndex,tabItem:this.tabs[t.activeIndex]})}},{key:"_onPostChange",value:function(t){t=this._normalizeEvent(t),Q.triggerElementEvent(this,"postchange",t);var e=t.tabItem.pageElement;e&&e._show()}},{key:"_onPreChange",value:function(t){if(t=this._normalizeEvent(t),t.cancel=function(){return t.canceled=!0},Q.triggerElementEvent(this,"prechange",t),!t.canceled){var e=t,n=e.activeIndex,i=e.lastActiveIndex,o=this.tabs;if(o[n].setActive(!0),i>=0){var r=o[i];r.setActive(!1),r.pageElement&&r.pageElement._hide()}}return t.canceled}},{key:"_onScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._tabbarBorder)if(this._tabbarBorder.style.transition="all "+(e.duration||0)+"s "+(e.timing||""),this._autogrow&&this._tabsRect.length>0){var n=Math.floor(t),i=Math.ceil(t),o=t%1;this._tabbarBorder.style.width=ga(this._tabsRect[n].width,this._tabsRect[i].width,o)+"px",this._tabbarBorder.style.transform="translate3d("+ga(this._tabsRect[n].left,this._tabsRect[i].left,o)+"px, 0, 0)"}else this._tabbarBorder.style.transform="translate3d("+100*t+"%, 0, 0)";this._onSwipe&&this._onSwipe(t,e)}},{key:"_onRefresh",value:function(){if(this._autogrow=Q.hasModifier(this,"autogrow"),this._tabsRect=this.tabs.map(function(t){return t.getBoundingClientRect()}),this._tabbarBorder){this._tabbarBorder.style.display=this.hasAttribute("tab-border")||Q.hasModifier(this,"material")?"block":"none";var t=this.getActiveTabIndex();this._tabsRect.length>0&&t>=0&&(this._tabbarBorder.style.width=this._tabsRect[t].width+"px")}}},{key:"_getAutoScrollRatio",value:function(t,e,n){var i=n/300*(t?-1:1);return Math.min(1,Math.max(0,.6+e*i))}},{key:"_compile",value:function(){N.prepare(this);var t=this._contentElement||Q.create(".tabbar__content");t.classList.add("ons-tabbar__content");var e=this._tabbarElement||Q.create(".tabbar");if(e.classList.add("ons-tabbar__footer"),!e.parentNode)for(;this.firstChild;)e.appendChild(this.firstChild);var n=Number(this.getAttribute("activeIndex"));e.children.length>n&&!Q.findChild(e,"[active]")&&e.children[n].setAttribute("active",""),this._tabbarBorder=Q.findChild(e,".tabbar__border")||Q.create(".tabbar__border"),e.appendChild(this._tabbarBorder),e.classList.add("ons-swiper-tabbar"),!t.children[0]&&t.appendChild(document.createElement("div")),!t.children[1]&&t.appendChild(document.createElement("div")),t.appendChild=t.appendChild.bind(t.children[0]),t.insertBefore=t.insertBefore.bind(t.children[0]),this.appendChild(t),this.appendChild(e),B.initModifier(this,fa)}},{key:"_updatePosition",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("position"),i=this._top="top"===e||"auto"===e&&Q.hasModifier(this,"material"),o=i?Q.addModifier:Q.removeModifier;o(this,"top");var r=Q.findParent(this,"ons-page");r&&n(r,function(){var e=0;r.children[0]&&Q.match(r.children[0],"ons-toolbar")&&(o(r.children[0],"noshadow"),e=1);var n=r._getContentElement(),a=window.getComputedStyle(r._getContentElement(),null);t.style.top=i?parseInt(a.getPropertyValue("padding-top"),10)-e+"px":"",n.style.top=a.top,n.style.top=""}),P.autoStatusBarFill(function(){var e=Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")});Q.toggleAttribute(t,"status-bar-fill",i&&!e)})}},{key:"setActiveTab",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getActiveTabIndex(),o=this.tabs[i],r=this.tabs[t];if(!r)return Promise.reject("Specified index does not match any tab.");if(t===i)return Q.triggerElementEvent(this,"reactive",{index:t,activeIndex:t,tabItem:r}),Promise.resolve(r.pageElement);var a=r.pageElement;return(a?Promise.resolve(a):r.loaded).then(function(i){return e._swiper.setActiveIndex(t,_({reject:!0},n,{animation:o&&i?n.animation||e.getAttribute("animation"):"none",animationOptions:Q.extend({duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"},e.hasAttribute("animation-options")?Q.animationOptionsParse(e.getAttribute("animation-options")):{},n.animationOptions||{})})).then(function(){return n.callback instanceof Function&&n.callback(i),i})})}},{key:"setTabbarVisibility",value:function(t){var e=this;n(this,function(){e._contentElement.style[e._top?"top":"bottom"]=t?"":"0px",e._tabbarElement.style.display=t?"":"none",t&&e._onRefresh()})}},{key:"show",value:function(){this.setTabbarVisibility(!0)}},{key:"hide",value:function(){this.setTabbarVisibility(!1)}},{key:"getActiveTabIndex",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tabs,e=0;e<t.length;e++)if(t[e]&&"ONS-TAB"===t[e].tagName&&t[e].isActive())return e;return-1}},{key:"_show",value:function(){var t=this;this._swiper.show(),setImmediate(function(){var e=t.tabs,n=t.getActiveTabIndex(e);t._loadInactive.resolve(),e.length>0&&n>=0&&e[n].loaded.then(function(t){return t&&setImmediate(function(){return t._show()})})})}},{key:"_hide",value:function(){this._swiper.hide();var t=this.topPage;t&&t._hide()}},{key:"_destroy",value:function(){this.tabs.forEach(function(t){return t.remove()}),this.remove()}},{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t){B.onModifierChanged(e,n,this,fa);var i=function(t){return/(^|\s+)top($|\s+)/i.test(t)};i(e)!==i(n)&&this._updatePosition()}else"position"===t?Q.isAttached(this)&&this._updatePosition():"swipeable"===t?this._swiper&&this._swiper.updateSwipeable(this.hasAttribute("swipeable")):"hide-tabs"===t&&this.setTabbarVisibility(!this.hasAttribute("hide-tabs")||"false"===n)}},{key:"_tabbarElement",get:function(){return Q.findChild(this,".tabbar")}},{key:"_contentElement",get:function(){return Q.findChild(this,".tabbar__content")}},{key:"_targetElement",get:function(){var t=this._contentElement;return t&&t.children[0]||null}},{key:"topPage",get:function(){var t=this.tabs,e=this.getActiveTabIndex();return t[e]?t[e].pageElement||this.pages[0]||null:null}},{key:"pages",get:function(){return Q.arrayFrom(this._targetElement.children)}},{key:"tabs",get:function(){return Array.prototype.filter.call(this._tabbarElement.children,function(t){return"ONS-TAB"===t.tagName})}},{key:"visible",get:function(){return"none"!==this._tabbarElement.style.display}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}}],[{key:"observedAttributes",get:function(){return["modifier","position","swipeable","tab-border","hide-tabs"]}},{key:"rewritables",get:function(){return pa}},{key:"events",get:function(){return["prechange","postchange","reactive"]}}]),e}();c.Tabbar=ma,customElements.define("ons-tabbar",ma);var _a={"":"tabbar--*__item",".tabbar__button":"tabbar--*__button"},va=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return["label","icon","badge"].some(t.hasAttribute.bind(t))?t._compile():n(t,function(){return t._compile()}),t._pageLoader=jt,t._onClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("tabbar__item"),!this._button){for(var t=Q.create("button.tabbar__button");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.create("input",{display:"none"});e.type="radio",this.appendChild(e),this.appendChild(t),this._updateButtonContent(),B.initModifier(this,_a),this._updateRipple()}}},{key:"_updateRipple",value:function(){this._button&&Q.updateRipple(this._button,this.hasAttribute("ripple"))}},{key:"_updateButtonContent",value:function(){var t=this,e=this._button,n=this._icon;if(this.hasAttribute("icon")){var i=(n=n||Q.createElement('<div class="tabbar__icon"><ons-icon></ons-icon></div>')).children[0],o=function(e){return function(){return i.attributeChangedCallback("icon",e,t.getAttribute("icon"))}}(i.getAttribute("icon"));i.setAttribute("icon",this.getAttribute("icon")),n.parentElement!==e&&e.insertBefore(n,e.firstChild),i.attributeChangedCallback instanceof Function?o():setImmediate(function(){return i.attributeChangedCallback instanceof Function&&o()})}else n&&n.remove();["label","badge"].forEach(function(n,i){var o=t.querySelector(".tabbar__"+n);t.hasAttribute(n)?((o=o||Q.create(".tabbar__"+n+("badge"===n?" notification":""))).textContent=t.getAttribute(n),o.parentElement!==e&&e.appendChild(o)):o&&o.remove()})}},{key:"_onClick",value:function(){this.onClick instanceof Function?this.onClick():this._tabbar.setActiveTab(this.index,{reject:!1})}},{key:"setActive",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._input.checked=t,this.classList.toggle("active",t),Q.toggleAttribute(this,"active",t),this.hasAttribute("icon")&&this.hasAttribute("active-icon")&&this._icon.children[0].setAttribute("icon",this.getAttribute(t?"active-icon":"icon"))}},{key:"_loadPageElement",value:function(t,e){var n=this;return this._hasLoaded=!0,new Promise(function(i){n._pageLoader.load({parent:t,page:e},function(e){t.replaceChild(e,t.children[n.index]),n._loadedPage=e,i(e)})})}},{key:"isActive",value:function(){return this.classList.contains("active")}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._onClick,!1),this._loadedPage&&(this._pageLoader.unload(this._loadedPage),this._loadedPage=null,this._hasLoaded=!1,this.loaded=null)}},{key:"connectedCallback",value:function(){var t=this;if(this.addEventListener("click",this._onClick,!1),Q.isAttached(this)&&!this.loaded){var e=Q.defer();this.loaded=e.promise,n(this,function(){var n=t.index,i=t._tabbar;i||Q.throw("Tab elements must be children of Tabbar"),i.hasAttribute("modifier")&&Q.addModifier(t,i.getAttribute("modifier")),t._hasLoaded||(t.hasAttribute("active")&&(t.setActive(!0),i.setAttribute("activeIndex",n)),n===i.tabs.length-1&&(i._onRefresh(),setImmediate(function(){return i._onRefresh()})),ma.rewritables.ready(i,function(){var o=t.page||t.getAttribute("page");if(!t.pageElement&&o){var r=i._targetElement,a=Q.create("div",{height:"100%",width:"100%",visibility:"hidden"});r.insertBefore(a,r.children[n]);var s=function(){return t._loadPageElement(r,o).then(e.resolve)};return t.isActive()?s():i._loadInactive.promise.then(s)}return e.resolve(t.pageElement)}))})}}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"tabbar__item",_a);break;case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,_a)});break;case"ripple":n(this,function(){return o._updateRipple()});break;case"icon":case"label":case"badge":n(this,function(){return o._updateButtonContent()});break;case"page":this.page=i||""}}},{key:"pageLoader",set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t},get:function(){return this._pageLoader}},{key:"_input",get:function(){return Q.findChild(this,"input")}},{key:"_button",get:function(){return Q.findChild(this,".tabbar__button")}},{key:"_icon",get:function(){return this.querySelector(".tabbar__icon")}},{key:"_tabbar",get:function(){return Q.findParent(this,"ons-tabbar")}},{key:"index",get:function(){return Array.prototype.indexOf.call(this.parentElement.children,this)}},{key:"pageElement",get:function(){if(this._loadedPage)return this._loadedPage;var t=this._tabbar;return t.pages.length===t.tabs.length?t.pages[this.index]:null}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","icon","label","page","badge","class"]}}]),e}();c.Tab=va,customElements.define("ons-tab",va);var ba=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),ya=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,ba),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),ka=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.25:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.messageDelay=.4*l.duration+l.delay,C.isAndroid()?l.ascension=48:Li.isIPhoneXPortraitPatchActive()?l.ascension=98:Li.isIPhoneXLandscapePatchActive()?l.ascension=85:l.ascension=64,l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,Q.globals.fabOffset=this.ascension,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.ascension+"px, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs()).wait(this.delay).queue({transform:"translate3d(0, -"+this.ascension+"px, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:0},{opacity:1}))}},{key:"hide",value:function(t,e){t=t._toast,Q.globals.fabOffset=0,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.ascension+"px, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs(),this.def).wait(this.delay).queue({transform:"translate3d(0, 0, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:1},{opacity:0}))}},{key:"_getFabs",value:function(){return Q.arrayFrom(document.querySelectorAll("ons-fab[position~=bottom], ons-speed-dial[position~=bottom]")).filter(function(t){return t.visible})}}]),e}(),wa=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 34px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 21px)":l.liftAmount="100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0}).queue(function(t){e&&e(),t()}))}},{key:"_updatePosition",value:function(t){0===parseInt(t.style.top,10)&&(t.style.top=t.style.bottom="")}}]),e}(),Ea=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return Li.isIPhoneXPortraitPatchActive()?l.fallAmount="calc(-100% - 44px)":l.fallAmount="-100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){var n=this;t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0}).queue(function(i){n._updatePosition(t,!0),e&&e(),i()}))}},{key:"_updatePosition",value:function(t,e){var n=void 0;n=Li.isIPhoneXPortraitPatchActive()?"44px":"0",t.style.top!==n&&(t.style.top=n,t.style.bottom="initial")}}]),e}(),Ca={".toast":"toast--*",".toast__message":"toast--*__message",".toast__button":"toast--*__button"},Aa={default:C.isAndroid()?ka:wa,fade:ya,ascend:ka,lift:wa,fall:Ea,none:ba},Sa=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(t){return t.callParentHandler()},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return this._toast&&(this._toast.style.top=this._toast.style.bottom=""),new O({animators:Aa,baseClass:ba,baseClassName:"ToastAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=1e4;var t=Q.findChild(this,".toast");if(!t)for((t=document.createElement("div")).classList.add("toast");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.findChild(t,".toast__button");if(e||(e=Q.findChild(t,function(t){return Q.match(t,".button")||Q.match(t,"button")}))&&(e.classList.remove("button"),e.classList.add("toast__button"),t.appendChild(e)),!Q.findChild(t,".toast__message")){var n=Q.findChild(t,".message");if(!n){n=document.createElement("div");for(var i=t.childNodes.length-1;i>=0;i--)t.childNodes[i]!==e&&n.insertBefore(t.childNodes[i],n.firstChild)}n.classList.add("toast__message"),t.insertBefore(n,t.firstChild)}t.parentNode!==this&&this.appendChild(t),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Ca}},{key:"_toast",get:function(){return Q.findChild(this,".toast")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof ba||Q.throw('"Animator" param must inherit OnsToastElement.ToastAnimator'),Aa[t]=e}},{key:"animators",get:function(){return Aa}},{key:"ToastAnimator",get:function(){return ba}}]),e}();c.Toast=Sa,customElements.define("ons-toast",Sa);var Pa=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"toolbar-button--*"}}},{key:"_defaultClassName",get:function(){return"toolbar-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{center:"",size:"contain",background:"transparent"}]}}]),e}();return c.ToolbarButton=Pa,customElements.define("ons-toolbar-button",Pa),function(t){window._onsLoaded&&t._util.warn("Onsen UI is loaded more than once."),window._onsLoaded=!0,window.addEventListener("load",function(){t.fastClick=zt.attach(document.body);var e="touch-action"in document.body.style;t.platform._runOnActualPlatform(function(){t.platform.isAndroid()?t.fastClick.destroy():t.platform.isIOS()&&e&&(t.platform.isIOSSafari()||t.platform.isWKWebView())&&t.fastClick.destroy()})},!1),t.ready(function(){t.enableDeviceBackButtonHandler(),t._defaultDeviceBackButtonHandler=t._internal.dbbDispatcher.createHandler(window.document.body,function(){Object.hasOwnProperty.call(navigator,"app")?navigator.app.exitApp():console.warn("Could not close the app. Is 'cordova.js' included?\nError: 'window.navigator.app' is undefined.")}),document.body._gestureDetector=new t.GestureDetector(document.body,{passive:!0}),t.platform.isWebView()||document.body.addEventListener("keydown",function(e){27===e.keyCode&&t.fireDeviceBackButtonEvent()}),t._setupLoadingPlaceHolders()}),Viewport.setup()}(Rt),window._superSecretOns=Rt,Rt});
/*
 Leaflet 1.0.3, a JS library for interactive maps. http://leafletjs.com
 (c) 2010-2016 Vladimir Agafonkin, (c) 2010-2011 CloudMade
*/
!function(t,e,i){function n(){var e=t.L;o.noConflict=function(){return t.L=e,this},t.L=o}var o={version:"1.0.3"};"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),"undefined"!=typeof t&&n(),o.Util={extend:function(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){o=arguments[i];for(e in o)t[e]=o[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++o.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}},wrapNum:function(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?o.Util.create(t.options):{});for(var i in e)t.options[i]=e[i];return t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+n.join("&")},template:function(t,e){return t.replace(o.Util.templateRe,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){return t["webkit"+e]||t["moz"+e]||t["ms"+e]}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFrame||e("RequestAnimationFrame")||i,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,r){return r&&s===i?void e.call(n):s.call(t,o.bind(e,n))},o.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=o.Util.create(i);n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);return t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=o.Util.extend(o.Util.create(n.options),t.options)),o.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){return o.extend(this.prototype,t),this},o.Class.mergeOptions=function(t){return o.extend(this.prototype.options,t),this},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},o.Evented=o.Class.extend({on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=o.Util.splitWords(t);for(var s=0,r=t.length;s<r;s++)this._on(t[s],e,i)}return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=o.Util.splitWords(t);for(var s=0,r=t.length;s<r;s++)this._off(t[s],e,i)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),n===this&&(n=i);for(var s={fn:e,ctx:n},r=o,a=0,h=r.length;a<h;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(s)},_off:function(t,e,n){var s,r,a;if(this._events&&(s=this._events[t])){if(!e){for(r=0,a=s.length;r<a;r++)s[r].fn=o.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=i),s)for(r=0,a=s.length;r<a;r++){var h=s[r];if(h.ctx===n&&h.fn===e)return h.fn=o.Util.falseFn,this._firingCount&&(this._events[t]=s=s.slice()),void s.splice(r,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=o.Util.extend({},e,{type:t,target:this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var s=o.bind(function(){this.off(t,e,i).off(t,s,i)},this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,o.extend({layer:t.target},t),!0)}});var s=o.Evented.prototype;s.addEventListener=s.on,s.removeEventListener=s.clearAllEventListeners=s.off,s.addOneTimeEventListener=s.once,s.fireEvent=s.fire,s.hasEventListeners=s.listens,o.Mixin={Events:s},function(){var i=navigator.userAgent.toLowerCase(),n=e.documentElement,s="ActiveXObject"in t,r=i.indexOf("webkit")!==-1,a=i.indexOf("phantom")!==-1,h=i.search("android [23]")!==-1,l=i.indexOf("chrome")!==-1,u=i.indexOf("gecko")!==-1&&!r&&!t.opera&&!s,c=0===navigator.platform.indexOf("Win"),d="undefined"!=typeof orientation||i.indexOf("mobile")!==-1,_=!t.PointerEvent&&t.MSPointerEvent,m=t.PointerEvent||_,p=s&&"transition"in n.style,f="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!h,g="MozPerspective"in n.style,v="OTransition"in n.style,y=!t.L_NO_TOUCH&&(m||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch);o.Browser={ie:s,ielt9:s&&!e.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in e),webkit:r,gecko:u,android:i.indexOf("android")!==-1,android23:h,chrome:l,safari:!l&&i.indexOf("safari")!==-1,win:c,ie3d:p,webkit3d:f,gecko3d:g,opera12:v,any3d:!t.L_DISABLE_3D&&(p||f||g)&&!v&&!a,mobile:d,mobileWebkit:d&&r,mobileWebkit3d:d&&f,mobileOpera:d&&t.opera,mobileGecko:d&&u,touch:!!y,msPointer:!!_,pointer:!!m,retina:(t.devicePixelRatio||t.screen.deviceXDPI/t.screen.logicalXDPI)>1}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new o.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new o.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new o.Point(t.x,t.y):new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>=e.x&&n.x<=i.x,a=s.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>e.x&&n.x<i.x,a=s.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},create:function(t,i,n){var o=e.createElement(t);return o.className=i||"",n&&n.appendChild(o),o},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),s=0,r=n.length;s<r;s++)t.classList.add(n[s]);else if(!o.DomUtil.hasClass(t,e)){var a=o.DomUtil.getClass(t);o.DomUtil.setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil.setClass(t,o.Util.trim((" "+o.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&o.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},setTransform:function(t,e,i){var n=e||new o.Point(0,0);t.style[o.DomUtil.TRANSFORM]=(o.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")},setPosition:function(t,e){t._leaflet_pos=e,o.Browser.any3d?o.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new o.Point(0,0)}},function(){o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var i=o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(o.DomUtil.TRANSITION_END="webkitTransition"===i||"OTransition"===i?i+"End":"transitionend","onselectstart"in e)o.DomUtil.disableTextSelection=function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},o.DomUtil.enableTextSelection=function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)};else{var n=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.DomUtil.disableTextSelection=function(){if(n){var t=e.documentElement.style;this._userSelect=t[n],t[n]="none"}},o.DomUtil.enableTextSelection=function(){n&&(e.documentElement.style[n]=this._userSelect,delete this._userSelect)}}o.DomUtil.disableImageDrag=function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},o.DomUtil.enableImageDrag=function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)},o.DomUtil.preventOutline=function(e){for(;e.tabIndex===-1;)e=e.parentNode;e&&e.style&&(o.DomUtil.restoreOutline(),this._outlineElement=e,this._outlineStyle=e.style.outline,e.style.outline="none",o.DomEvent.on(t,"keydown",o.DomUtil.restoreOutline,this))},o.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,o.DomEvent.off(t,"keydown",o.DomUtil.restoreOutline,this))}}(),o.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==i&&(this.alt=+n)},o.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=o.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===i?1e-9:e)},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return o.CRS.Earth.distance(this,o.latLng(t))},wrap:function(){return o.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return o.latLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new o.LatLng(this.lat,this.lng,this.alt)}},o.latLng=function(t,e,n){return t instanceof o.LatLng?t:o.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new o.LatLng(t[0],t[1],t[2]):2===t.length?new o.LatLng(t[0],t[1]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===i?null:new o.LatLng(t,e,n)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,s=this._northEast;if(t instanceof o.LatLng)e=t,i=t;else{if(!(t instanceof o.LatLngBounds))return t?this.extend(o.latLng(t)||o.latLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||s?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),s.lat=Math.max(i.lat,s.lat),s.lng=Math.max(i.lng,s.lng)):(this._southWest=new o.LatLng(e.lat,e.lng),this._northEast=new o.LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng||"lat"in t?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>=e.lat&&n.lat<=i.lat,a=s.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>e.lat&&n.lat<i.lat,a=s.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)},bounds:o.bounds([-180,-90],[180,90])},o.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=Math.sin(n*e);return new o.Point(this.R*t.lng*e,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(t){var e=180/Math.PI;return new o.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return o.bounds([-t,-t],[t,t])}()},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),s=this.transformation.transform(e.max,i);return o.bounds(n,s)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?o.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return o.latLng(i,e,n)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,s=e.lng-i.lng;if(0===n&&0===s)return t;var r=t.getSouthWest(),a=t.getNorthEast(),h=o.latLng({lat:r.lat-n,lng:r.lng-s}),l=o.latLng({lat:a.lat-n,lng:a.lng-s});return new o.LatLngBounds(h,l)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0}),o.CRS.Earth=o.extend({},o.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos((e.lng-t.lng)*i);return this.R*Math.acos(Math.min(s,1))}}),o.CRS.EPSG3857=o.extend({},o.CRS.Earth,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*o.Projection.SphericalMercator.R);return new o.Transformation(t,.5,-t,.5)}()}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS.Earth,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/180,1,-1/180,.5)}),o.Map=o.Evented.extend({options:{crs:o.CRS.EPSG3857,center:i,zoom:i,minZoom:i,maxZoom:i,layers:[],maxBounds:i,renderer:i,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==i&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),o.DomEvent.on(this._proxy,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(o.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(o.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),r=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=r.subtract(s).multiplyBy(1-1/n),h=this.containerPointToLatLng(s.add(a));return this.setView(h,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n));s="number"==typeof e.maxZoom?Math.min(e.maxZoom,s):s;var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),s),h=this.project(t.getNorthEast(),s),l=this.unproject(a.add(h).divideBy(2).add(r),s);return{center:l,zoom:s}},fitBounds:function(t,e){if(t=o.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function s(t){var e=t?-1:1,i=t?v:g,n=v*v-g*g+e*L*L*y*y,o=2*i*L*y,s=n/o,r=Math.sqrt(s*s+1)-s,a=r<1e-9?-18:Math.log(r);return a}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}function h(t){return r(t)/a(t)}function l(t){return g*(a(x)/a(x+P*t))}function u(t){return g*(a(x)*h(x+P*t)-r(x))/L}function c(t){return 1-Math.pow(1-t,1.5)}function d(){var i=(Date.now()-w)/T,n=c(i)*b;i<=1?(this._flyToFrame=o.Util.requestAnimFrame(d,this),this._move(this.unproject(_.add(m.subtract(_).multiplyBy(u(n)/y)),f),this.getScaleZoom(g/l(n),f),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!o.Browser.any3d)return this.setView(t,e,n);this._stop();var _=this.project(this.getCenter()),m=this.project(t),p=this.getSize(),f=this._zoom;t=o.latLng(t),e=e===i?f:e;var g=Math.max(p.x,p.y),v=g*this.getZoomScale(f,e),y=m.distanceTo(_)||1,P=1.42,L=P*P,x=s(0),w=Date.now(),b=(s(1)-x)/P,T=n.duration?1e3*n.duration:1e3*b*.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=o.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,o.latLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),s=i.divideBy(2).round(),r=n.subtract(s);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=n.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(s);this.setView(n,r.maxZoom?Math.min(a,r.maxZoom):a)}var h={latlng:n,bounds:s,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(h[l]=t.coords[l]);this.fire("locationfound",h)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=i,this._containerId=i}o.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=o.DomUtil.create("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t),i=o.point(i||[0,0]);var n=this.getZoom()||0,s=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),h=t.getSouthEast(),l=this.getSize().subtract(i),u=o.bounds(this.project(h,n),this.project(a,n)).getSize(),c=o.Browser.any3d?this.options.zoomSnap:1,d=Math.min(l.x/u.x,l.y/u.y);return n=this.getScaleZoom(d,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(s,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new o.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new o.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===i?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===i?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===i?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(o.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(o.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(o.latLng(t),o.latLng(e))},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");o.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=o.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&o.Browser.any3d,o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(o.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));
var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),o.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){o.DomUtil.setPosition(this._mapPane,new o.Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===i&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return o.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){this._targets={},this._targets[o.stamp(this._container)]=this;var i=e?"off":"on";o.DomEvent[i](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&o.DomEvent[i](t,"resize",this._onResize,this),o.Browser.any3d&&this.options.transform3DLimit&&this[i]("moveend",this._onMoveEnd)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],s="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if(i=this._targets[o.stamp(r)],i&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(s&&!o.DomEvent._isExternalTarget(r,t))break;if(n.push(i),s)break}if(r===this._container)break;r=r.parentNode}return n.length||a||s||!o.DomEvent._isExternalTarget(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&o.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=o.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var s=i[0];"contextmenu"===e&&s.listens(e,!0)&&o.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=s instanceof o.Marker;r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var h=0;h<i.length;h++)if(i[h].fire(e,r,!0),r.originalEvent._stopped||i[h].options.nonBubblingEvents&&o.Util.indexOf(i[h].options.nonBubblingEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)||new o.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==i?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return o.bounds([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),s=this.getSize().divideBy(2),r=new o.Bounds(n.subtract(s),n.add(s)),a=this._getBoundsOffset(r,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=o.bounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),s=n.min.subtract(t.min),r=n.max.subtract(t.max),a=this._rebound(s.x,-r.x),h=this._rebound(s.y,-r.y);return new o.Point(a,h)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=o.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=o.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=o.DomUtil.TRANSFORM,n=t.style[i];o.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===t.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),i=this.getZoom();o.DomUtil.setTransform(t,this.project(e,i),this.getZoomScale(i,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/n);return!(i.animate!==!0&&!this.getSize().contains(s))&&(o.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(o.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),o.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),o.map=function(t,e){return new o.Map(t,e)},o.Layer=o.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),o.Map.include({addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var s=this._zoomBoundLayers[o].options;t=s.minZoom===i?t:Math.min(t,s.minZoom),e=s.maxZoom===i?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-(1/0)?i:e,this._layersMinZoom=t===1/0?i:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===i&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===i&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var r="_leaflet_events";o.DomEvent={on:function(t,e,i,n){if("object"==typeof e)for(var s in e)this._on(t,s,e[s],i);else{e=o.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._on(t,e[r],i,n)}return this},off:function(t,e,i,n){if("object"==typeof e)for(var s in e)this._off(t,s,e[s],i);else{e=o.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._off(t,e[r],i,n)}return this},_on:function(e,i,n,s){var a=i+o.stamp(n)+(s?"_"+o.stamp(s):"");if(e[r]&&e[r][a])return this;var h=function(i){return n.call(s||e,i||t.event)},l=h;return o.Browser.pointer&&0===i.indexOf("touch")?this.addPointerListener(e,i,h,a):!o.Browser.touch||"dblclick"!==i||!this.addDoubleTapListener||o.Browser.pointer&&o.Browser.chrome?"addEventListener"in e?"mousewheel"===i?e.addEventListener("onwheel"in e?"wheel":"mousewheel",h,!1):"mouseenter"===i||"mouseleave"===i?(h=function(i){i=i||t.event,o.DomEvent._isExternalTarget(e,i)&&l(i)},e.addEventListener("mouseenter"===i?"mouseover":"mouseout",h,!1)):("click"===i&&o.Browser.android&&(h=function(t){return o.DomEvent._filterClick(t,l)}),e.addEventListener(i,h,!1)):"attachEvent"in e&&e.attachEvent("on"+i,h):this.addDoubleTapListener(e,h,a),e[r]=e[r]||{},e[r][a]=h,this},_off:function(t,e,i,n){var s=e+o.stamp(i)+(n?"_"+o.stamp(n):""),a=t[r]&&t[r][s];return a?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,s):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,s):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[r][s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return o.DomEvent.on(t,"mousewheel",o.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,o.Draggable.START.join(" "),e),o.DomEvent.on(t,{click:o.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},_wheelPxFactor:o.Browser.win&&o.Browser.chrome?2:o.Browser.gecko?t.devicePixelRatio:1,getWheelDelta:function(t){return o.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/o.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,void e(t))}},o.DomEvent.addListener=o.DomEvent.on,o.DomEvent.removeListener=o.DomEvent.off,o.PosAnimation=o.Evented.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),o.DomUtil.setPosition(this._el,i),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:o.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,s=this.R_MINOR/i,r=Math.sqrt(1-s*s),a=r*Math.sin(n),h=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);return n=-i*Math.log(Math.max(h,1e-10)),new o.Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,s=this.R_MINOR/n,r=Math.sqrt(1-s*s),a=Math.exp(-t.y/n),h=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(h),e=Math.pow((1-e)/(1+e),r/2),u=Math.PI/2-2*Math.atan(a*e)-h,h+=u;return new o.LatLng(h*i,t.x*i/n)}},o.CRS.EPSG3395=o.extend({},o.CRS.Earth,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*o.Projection.Mercator.R);return new o.Transformation(t,.5,-t,.5)}()}),o.GridLayer=o.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:o.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:i,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){o.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),o.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(o.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(o.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return e.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof o.Point?t:new o.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-(1/0),1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!o.Browser.ielt9){o.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var s=this._tiles[n];if(s.current&&s.loaded){var r=Math.min(1,(t-s.loaded)/200);o.DomUtil.setOpacity(s.el,r),r<1?e=!0:(s.active&&(i=!0),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(o.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=o.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=o.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===i)return i;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(o.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var s=this._levels[t],r=this._map;return s||(s=this._levels[t]={},s.el=o.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,r.getCenter(),r.getZoom()),o.Util.falseFn(s.el.offsetWidth)),this._level=s,s},_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)o.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,i,n){var s=Math.floor(t/2),r=Math.floor(e/2),a=i-1,h=new o.Point(+s,+r);h.z=+a;var l=this._tileCoordsToKey(h),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>n&&this._retainParent(s,r,a,n))},_retainChildren:function(t,e,i,n){for(var s=2*t;s<2*t+2;s++)for(var r=2*e;r<2*e+2;r++){var a=new o.Point(s,r);a.z=i+1;var h=this._tileCoordsToKey(a),l=this._tiles[h];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(s,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,o){var s=Math.round(e);(this.options.maxZoom!==i&&s>this.options.maxZoom||this.options.minZoom!==i&&s<this.options.minZoom)&&(s=i);var r=this.options.updateWhenZooming&&s!==this._tileZoom;o&&!r||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),s=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();o.Browser.any3d?o.DomUtil.setTransform(t.el,s,n):o.DomUtil.setPosition(t.el,s)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),s=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new o.Bounds(s.subtract(r),s.add(r))},_update:function(t){var n=this._map;if(n){var s=n.getZoom();if(t===i&&(t=n.getCenter()),this._tileZoom!==i){var r=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(r),h=a.getCenter(),l=[],u=this.options.keepBuffer,c=new o.Bounds(a.getBottomLeft().subtract([u,-u]),a.getTopRight().add([u,-u]));for(var d in this._tiles){var _=this._tiles[d].coords;_.z===this._tileZoom&&c.contains(o.point(_.x,_.y))||(this._tiles[d].current=!1)}if(Math.abs(s-this._tileZoom)>1)return void this._setView(t,s);for(var m=a.min.y;m<=a.max.y;m++)for(var p=a.min.x;p<=a.max.x;p++){var f=new o.Point(p,m);if(f.z=this._tileZoom,this._isValidTile(f)){var g=this._tiles[this._tileCoordsToKey(f)];g?g.current=!0:l.push(f)}}if(l.sort(function(t,e){return t.distanceTo(h)-e.distanceTo(h)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var v=e.createDocumentFragment();for(p=0;p<l.length;p++)this._addTile(l[p],v);this._level.el.appendChild(v)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return o.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),s=n.add(i),r=e.unproject(n,t.z),a=e.unproject(s,t.z),h=new o.LatLngBounds(r,a);return this.options.noWrap||e.wrapLatLngBounds(h),h},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new o.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(o.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){o.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=o.Util.falseFn,t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity<1&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.android&&!o.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),o.bind(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&o.Util.requestAnimFrame(o.bind(this._tileReady,this,t,null,s)),o.DomUtil.setPosition(s,i),this._tiles[n]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(o.DomUtil.setOpacity(i.el,0),o.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=o.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(o.DomUtil.addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),o.Browser.ielt9||!this._map._fadeAnimated?o.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(o.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new o.Point(this._wrapX?o.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?o.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new o.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),o.gridLayer=function(t){return new o.GridLayer(t)},o.TileLayer=o.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),o.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,i){var n=e.createElement("img");return o.DomEvent.on(n,"load",o.bind(this._tileOnLoad,this,i,n)),o.DomEvent.on(n,"error",o.bind(this._tileOnError,this,i,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:o.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return o.Util.template(this._url,o.extend(e,this.options))},_tileOnLoad:function(t,e){o.Browser.ielt9?setTimeout(o.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.src!==n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=o.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.minNativeZoom,s=this.options.maxNativeZoom;return null!==n&&i<n?e.divideBy(t.getZoomScale(n,i)).round():null!==s&&i>s?e.divideBy(t.getZoomScale(s,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset,o=this.options.minNativeZoom,s=this.options.maxNativeZoom;return i&&(t=e-t),t+=n,null!==o&&t<o?o:null!==s&&t>s?s:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=o.Util.falseFn,e.onerror=o.Util.falseFn,e.complete||(e.src=o.Util.emptyImageUrl,o.DomUtil.remove(e)))}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=o.setOptions(this,e),i.width=i.height=e.tileSize*(e.detectRetina&&o.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),i=this._crs.project(e.getNorthWest()),n=this._crs.project(e.getSouthEast()),s=(this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[n.y,i.x,i.y,n.x]:[i.x,n.y,n.x,i.y]).join(","),r=o.TileLayer.prototype.getTileUrl.call(this,t);return r+o.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.ImageOverlay=o.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(o.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){o.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&o.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&o.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=o.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=o.Util.falseFn,t.onmousemove=o.Util.falseFn,t.onload=o.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;o.DomUtil.setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new o.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();
o.DomUtil.setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var s=o.point(n),r=o.point("shadow"===e&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,i){return i=i||e.createElement("img"),i.src=t,i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return o.Icon.Default.imagePath||(o.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||o.Icon.Default.imagePath)+o.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=o.DomUtil.create("div","leaflet-default-icon-path",e.body),i=o.DomUtil.getStyle(t,"background-image")||o.DomUtil.getStyle(t,"backgroundImage");return e.body.removeChild(t),0===i.indexOf("url")?i.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),o.Marker=o.Layer.extend({options:{icon:new o.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=o.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),o.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var s=t.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&(o.DomUtil.addClass(s,e),s.alt=""),this._shadow=s,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),o.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&o.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(o.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),o.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new o.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;o.DomUtil.setOpacity(this._icon,t),this._shadow&&o.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;if(i.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=o.point(n.bgPos);i.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.DivOverlay=o.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){o.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&o.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&o.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(o.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(o.bind(o.DomUtil.remove,o.DomUtil,this._container),200)):o.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&o.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&o.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=o.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?o.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}}),o.Popup=o.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){o.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof o.Path||this._source.on("preclick",o.DomEvent.stopPropagation))},onRemove:function(t){o.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof o.Path||this._source.off("preclick",o.DomEvent.stopPropagation))},getEvents:function(){var t=o.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=o.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var i=this._closeButton=o.DomUtil.create("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",o.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var n=this._wrapper=o.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=o.DomUtil.create("div",t+"-content",n),o.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",t+"-tip-container",e),this._tip=o.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,r)):o.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();o.DomUtil.setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(o.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,s=new o.Point(this._containerLeft,-i-this._containerBottom);s._add(o.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(s),a=o.point(this.options.autoPanPadding),h=o.point(this.options.autoPanPaddingTopLeft||a),l=o.point(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,d=0;r.x+n+l.x>u.x&&(c=r.x+n-u.x+l.x),r.x-c-h.x<0&&(c=r.x-h.x),r.y+i+l.y>u.y&&(d=r.y+i-u.y+l.y),r.y-d-h.y<0&&(d=r.y-h.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)},_getAnchor:function(){return o.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Map.include({openPopup:function(t,e,i){return t instanceof o.Popup||(t=new o.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),o.Layer.include({bindPopup:function(t,e){return t instanceof o.Popup?(o.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof o.Layer||(e=t,t=this),t instanceof o.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return o.DomEvent.stop(t),e instanceof o.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.Tooltip=o.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){o.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){o.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=o.DivOverlay.prototype.getEvents.call(this);return o.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=o.DomUtil.create("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),s=e.layerPointToContainerPoint(t),r=this.options.direction,a=i.offsetWidth,h=i.offsetHeight,l=o.point(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(o.point(-a/2+l.x,-h+l.y+u.y,!0)):"bottom"===r?t=t.subtract(o.point(a/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(o.point(a/2+l.x,h/2-u.y+l.y,!0)):"right"===r||"auto"===r&&s.x<n.x?(r="right",t=t.add(o.point(l.x+u.x,u.y-h/2+l.y,!0))):(r="left",t=t.subtract(o.point(a+u.x-l.x,h/2-u.y-l.y,!0))),o.DomUtil.removeClass(i,"leaflet-tooltip-right"),o.DomUtil.removeClass(i,"leaflet-tooltip-left"),o.DomUtil.removeClass(i,"leaflet-tooltip-top"),o.DomUtil.removeClass(i,"leaflet-tooltip-bottom"),o.DomUtil.addClass(i,"leaflet-tooltip-"+r),o.DomUtil.setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&o.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return o.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),o.tooltip=function(t,e){return new o.Tooltip(t,e)},o.Map.include({openTooltip:function(t,e,i){return t instanceof o.Tooltip||(t=new o.Tooltip(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),o.Layer.include({bindTooltip:function(t,e){return t instanceof o.Tooltip?(o.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=o.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),o.Browser.touch&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof o.Layer||(e=t,t=this),t instanceof o.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(o.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(o.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:i)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}}),o.LayerGroup=o.Layer.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),o.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),o.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Renderer=o.Layer.extend({options:{padding:.1},initialize:function(t){o.setOptions(this,t),o.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&o.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){o.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=o.DomUtil.getPosition(this._container),s=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),h=a.subtract(r),l=s.multiplyBy(-i).add(n).add(s).subtract(h);o.Browser.any3d?o.DomUtil.setTransform(this._container,l,i):o.DomUtil.setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new o.Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),o.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&o.canvas()||o.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===i)return!1;var e=this._paneRenderers[t];return e===i&&(e=o.SVG&&o.svg({pane:t})||o.Canvas&&o.canvas({pane:t}),this._paneRenderers[t]=e),e}}),o.Path=o.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return o.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(o.Browser.touch?10:0)}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var r,a=[];for(r=0;r<n;r++)s[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,i,n,o){var s,r,a,h=0;for(r=n+1;r<=o-1;r++)a=this._sqClosestPointOnSegment(t[r],t[n],t[o],!0),a>h&&(s=r,h=a);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n,o){var s,r,a,h=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(h|l))return[t,e];if(h&l)return!1;s=h||l,r=this._getEdgeIntersection(t,e,s,i,o),a=this._getBitCode(r,i),s===h?(t=r,h=a):(e=r,l=a)}},_getEdgeIntersection:function(t,e,i,n,s){var r,a,h=e.x-t.x,l=e.y-t.y,u=n.min,c=n.max;return 8&i?(r=t.x+h*(c.y-t.y)/l,a=c.y):4&i?(r=t.x+h*(u.y-t.y)/l,a=u.y):2&i?(r=c.x,a=t.y+l*(c.x-t.x)/h):1&i&&(r=u.x,a=t.y+l*(u.x-t.x)/h),new o.Point(r,a,s)},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,r=e.x,a=e.y,h=i.x-r,l=i.y-a,u=h*h+l*l;return u>0&&(s=((t.x-r)*h+(t.y-a)*l)/u,s>1?(r=i.x,a=i.y):s>0&&(r+=h*s,a+=l*s)),h=t.x-r,l=t.y-a,n?h*h+l*l:new o.Point(r,a)}},o.Polyline=o.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){o.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,s=null,r=o.LineUtil._sqClosestPointOnSegment,a=0,h=this._parts.length;a<h;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){e=l[u-1],i=l[u];var d=r(t,e,i,!0);d<n&&(n=d,s=r(t,e,i))}return s&&(s.distance=Math.sqrt(n)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(t=0,e=0;t<h-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],i=o.distanceTo(s),n+=i,n>e)return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=o.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new o.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return o.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=o.Polyline._flat(t),n=0,s=t.length;n<s;n++)i?(e[n]=o.latLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new o.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new o.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,s,r=t[0]instanceof o.LatLng,a=t.length;if(r){for(s=[],n=0;n<a;n++)s[n]=this._map.latLngToLayerPoint(t[n]),i.extend(s[n]);e.push(s)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,s,r,a,h,l=this._parts;for(e=0,n=0,s=this._rings.length;e<s;e++)for(h=this._rings[e],i=0,r=h.length;i<r-1;i++)a=o.LineUtil.clipSegment(h[i],h[i+1],t,i,!0),a&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===h[i+1]&&i!==r-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=o.LineUtil.simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.Polyline._flat=function(t){return!o.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e,i){var n,s,r,a,h,l,u,c,d,_=[1,4,2,8],m=o.LineUtil;for(s=0,u=t.length;s<u;s++)t[s]._code=m._getBitCode(t[s],e);for(a=0;a<4;a++){for(c=_[a],n=[],s=0,u=t.length,r=u-1;s<u;r=s++)h=t[s],l=t[r],h._code&c?l._code&c||(d=m._getEdgeIntersection(l,h,c,e,i),d._code=m._getBitCode(d,e),n.push(d)):(l._code&c&&(d=m._getEdgeIntersection(l,h,c,e,i),d._code=m._getBitCode(d,e),n.push(d)),n.push(h));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,h,l=this._rings[0],u=l.length;if(!u)return null;for(s=r=a=0,t=0,e=u-1;t<u;e=t++)i=l[t],n=l[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return h=0===s?l[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var e=o.Polyline.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof o.LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){o.Polyline.prototype._setLatLngs.call(this,t),o.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return o.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new o.Point(e,e);if(t=new o.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,s=0,r=this._rings.length;s<r;s++)n=o.PolyUtil.clipPolygon(this._rings[s],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),o.polygon=function(t,e){return new o.Polygon(t,e)},o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.CircleMarker=o.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return o.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new o.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Circle=o.CircleMarker.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=o.extend({},i,{radius:e})),o.setOptions(this,e),this._latlng=o.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new o.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)));
},setStyle:o.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===o.CRS.Earth.distance){var s=Math.PI/180,r=this._mRadius/o.CRS.Earth.R/s,a=i.project([e+r,t]),h=i.project([e-r,t]),l=a.add(h).divideBy(2),u=i.unproject(l).lat,c=Math.acos((Math.cos(r*s)-Math.sin(e*s)*Math.sin(u*s))/(Math.cos(e*s)*Math.cos(u*s)))/s;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(l.x-i.project([u,t-c]).x),1),this._radiusY=Math.max(Math.round(l.y-a.y),1)}else{var d=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(d).x}this._updateBounds()}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.SVG=o.Renderer.extend({getEvents:function(){var t=o.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=o.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=o.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){o.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),o.DomUtil.setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=o.SVG.create("path");t.options.className&&o.DomUtil.addClass(e,t.options.className),t.options.interactive&&o.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){o.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,o.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=t._radius,n=t._radiusY||i,o="a"+i+","+n+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+2*i+",0 "+o+2*-i+",0 ";this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){o.DomUtil.toFront(t._path)},_bringToBack:function(t){o.DomUtil.toBack(t._path)}}),o.extend(o.SVG,{create:function(t){return e.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var i,n,s,r,a,h,l="";for(i=0,s=t.length;i<s;i++){for(a=t[i],n=0,r=a.length;n<r;n++)h=a[n],l+=(n?"L":"M")+h.x+" "+h.y;l+=e?o.Browser.svg?"z":"x":""}return l||"M0 0"}}),o.Browser.svg=!(!e.createElementNS||!o.SVG.create("svg").createSVGRect),o.svg=function(t){return o.Browser.svg||o.Browser.vml?new o.SVG(t):null},o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}(),o.SVG.include(o.Browser.vml?{_initContainer:function(){this._container=o.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(o.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=o.SVG.create("shape");o.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=o.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;o.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[o.stamp(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,s=t._container;s.stroked=!!n.stroke,s.filled=!!n.fill,n.stroke?(e||(e=t._stroke=o.SVG.create("stroke")),s.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(s.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=o.SVG.create("fill")),s.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(s.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){o.DomUtil.toFront(t._container)},_bringToBack:function(t){o.DomUtil.toBack(t._container)}}:{}),o.Browser.vml&&(o.SVG.create=function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),o.Canvas=o.Renderer.extend({getEvents:function(){var t=o.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){o.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=e.createElement("canvas");o.DomEvent.on(t,"mousemove",o.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},o.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=o.Browser.retina?2:1;o.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",o.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){o.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[o.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||o.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new o.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,h.beginPath(),h.setLineDash&&h.setLineDash(t.options&&t.options._dashArray||[]),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],h[n?"lineTo":"moveTo"](s.x,s.y);e&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=t._radius,o=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),s=this._drawFirst;s;s=s.next)e=s.layer,e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(o.DomEvent._fakeStop(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(o.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,s=this._drawFirst;s;s=s.next)i=s.layer,i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(o.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.canvas=function(t){return o.Browser.canvas?new o.Canvas(t):null},o.Polyline.prototype._containsPoint=function(t,e){var i,n,s,r,a,h,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(h=this._parts[i],n=0,a=h.length,s=a-1;n<a;s=n++)if((e||0!==n)&&o.LineUtil.pointToSegmentDistance(t,h[s],h[n])<=l)return!0;return!1},o.Polygon.prototype._containsPoint=function(t){var e,i,n,s,r,a,h,l,u=!1;if(!this._pxBounds.contains(t))return!1;for(s=0,h=this._parts.length;s<h;s++)for(e=this._parts[s],r=0,l=e.length,a=l-1;r<l;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||o.Polyline.prototype._containsPoint.call(this,t,!0)},o.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,s=o.Util.isArray(t)?t:t.features;if(s){for(e=0,i=s.length;e<i;e++)n=s[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=o.GeoJSON.geometryToLayer(t,r);return a?(a.feature=o.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=o.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e){var i,n,s,r,a="Feature"===t.type?t.geometry:t,h=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||this.coordsToLatLng;if(!h&&!a)return null;switch(a.type){case"Point":return i=c(h),u?u(t,i):new o.Marker(i);case"MultiPoint":for(s=0,r=h.length;s<r;s++)i=c(h[s]),l.push(u?u(t,i):new o.Marker(i));return new o.FeatureGroup(l);case"LineString":case"MultiLineString":return n=this.coordsToLatLngs(h,"LineString"===a.type?0:1,c),new o.Polyline(n,e);case"Polygon":case"MultiPolygon":return n=this.coordsToLatLngs(h,"Polygon"===a.type?1:2,c),new o.Polygon(n,e);case"GeometryCollection":for(s=0,r=a.geometries.length;s<r;s++){var d=this.geometryToLayer({geometry:a.geometries[s],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new o.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?this.coordsToLatLngs(t[s],e-1,i):(i||this.coordsToLatLng)(t[s]),o.push(n);return o},latLngToCoords:function(t){return t.alt!==i?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,i){for(var n=[],s=0,r=t.length;s<r;s++)n.push(e?o.GeoJSON.latLngsToCoords(t[s],e-1,i):o.GeoJSON.latLngToCoords(t[s]));return!e&&i&&n.push(n[0]),n},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.prototype.toGeoJSON=function(){var t=!o.Polyline._flat(this._latlngs),e=o.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return o.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},o.Polygon.prototype.toGeoJSON=function(){var t=!o.Polyline._flat(this._latlngs),e=t&&!o.Polyline._flat(this._latlngs[0]),i=o.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(i=[i]),o.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:i})},o.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var n=t.toGeoJSON();i.push(e?n.geometry:o.GeoJSON.asFeature(n))}}),e?o.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}}),o.geoJSON=function(t,e){return new o.GeoJSON(t,e)},o.geoJson=o.geoJSON,o.Draggable=o.Evented.extend({options:{clickTolerance:3},statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(o.DomEvent.on(this._dragStartTarget,o.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(o.Draggable._dragging===this&&this.finishDrag(),o.DomEvent.off(this._dragStartTarget,o.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!o.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(o.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(o.Draggable._dragging=this,this._preventOutline&&o.DomUtil.preventOutline(this._element),o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var i=t.touches?t.touches[0]:t;this._startPoint=new o.Point(i.clientX,i.clientY),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(i){if(!i._simulated&&this._enabled){if(i.touches&&i.touches.length>1)return void(this._moved=!0);var n=i.touches&&1===i.touches.length?i.touches[0]:i,s=new o.Point(n.clientX,n.clientY),r=s.subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(o.DomEvent.preventDefault(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(r),o.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,t.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._lastEvent=i,this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){o.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove,this).off(e,o.Draggable.END[t],this._onUp,this);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,o.Draggable._dragging=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}o.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){o.DomUtil.removeClass(this._map._container,"leaflet-grab"),o.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=o.latLngBounds(this._map.options.maxBounds);this._offsetLimit=o.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,h=s.multiplyBy(a/r),l=h.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,l),c=h.multiplyBy(u/l),d=u/(i.inertiaDeceleration*a),_=c.multiplyBy(-d/2).round();_.x||_.y?(_=e._limitOffset(_,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(_,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function n(t){var e;if(o.Browser.pointer){if(!o.Browser.edge||"mouse"===t.pointerType)return;e=o.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var i=Date.now(),n=i-(r||i);a=t.touches?t.touches[0]:t,h=n>0&&n<=l,r=i}}function s(t){if(h&&!a.cancelBubble){if(o.Browser.pointer){if(!o.Browser.edge||"mouse"===t.pointerType)return;var i,n,s={};for(n in a)i=a[n],s[n]=i&&i.bind?i.bind(a):i;a=s}a.type="dblclick",e(a),r=null}}var r,a,h=!1,l=250,u="_leaflet_",c=this._touchstart,d=this._touchend;return t[u+c+i]=n,t[u+d+i]=s,t[u+"dblclick"+i]=e,t.addEventListener(c,n,!1),t.addEventListener(d,s,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_",n=t[i+this._touchstart+e],s=t[i+this._touchend+e],r=t[i+"dblclick"+e];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,s,!1),o.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,i,n){return"touchstart"===e?this._addPointerStart(t,i,n):"touchmove"===e?this._addPointerMove(t,i,n):"touchend"===e&&this._addPointerEnd(t,i,n),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,n,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,n,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,i,n){var s=o.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;o.DomEvent.preventDefault(t)}this._handlePointer(t,i)},this);if(t["_leaflet_touchstart"+n]=s,t.addEventListener(this.POINTER_DOWN,s,!1),!this._pointerDocListener){var r=o.bind(this._globalPointerUp,this);e.documentElement.addEventListener(this.POINTER_DOWN,o.bind(this._globalPointerDown,this),!0),e.documentElement.addEventListener(this.POINTER_MOVE,o.bind(this._globalPointerMove,this),!0),e.documentElement.addEventListener(this.POINTER_UP,r,!0),e.documentElement.addEventListener(this.POINTER_CANCEL,r,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var i in this._pointers)t.touches.push(this._pointers[i]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,i){var n=o.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+i]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,e,i){var n=o.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+i]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest);var a=o.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=o.Util.requestAnimFrame(a,this,!0),o.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),o.DomEvent.on(e,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY),
this._simulateEvent("mousemove",e)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._resetState(),o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void o.DomEvent.on(e,{contextmenu:o.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=o.DomUtil.create("div","leaflet-zoom-box",this._container),o.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new o.Bounds(this._point,this._startPoint),i=e.getSize();o.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(o.DomUtil.remove(this._box),o.DomUtil.removeClass(this._container,"leaflet-crosshair")),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,{contextmenu:o.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(o.bind(this._resetState,this),0);var e=new o.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),o.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),o.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=o.point(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;n.closePopup()}o.DomEvent.stop(t)}}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),o.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,i=e._shadow,n=o.DomUtil.getPosition(e._icon),s=e._map.layerPointToLatLng(n);i&&o.DomUtil.setPosition(i,n),e._latlng=s,t.latlng=s,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(o.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,s){var r=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){o.DomUtil.remove(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,s){var r=o.DomUtil.create("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),o.DomEvent.on(r,"mousedown dblclick",o.DomEvent.stopPropagation).on(r,"click",o.DomEvent.stop).on(r,"click",s,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&o.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent&&o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(new o.Control.Attribution).addTo(this)}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e,i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){o.setOptions(this,i),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(o.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):o.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return o.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),o.DomEvent.disableClickPropagation(e),o.Browser.touch||o.DomEvent.disableScrollPropagation(e);var n=this._form=o.DomUtil.create("form",t+"-list");i&&(this._map.on("click",this.collapse,this),o.Browser.android||o.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var s=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);s.href="#",s.title="Layers",o.Browser.touch?o.DomEvent.on(s,"click",o.DomEvent.stop).on(s,"click",this.expand,this):o.DomEvent.on(s,"focus",this.expand,this),o.DomEvent.on(n,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),i||this.expand(),this._baseLayersList=o.DomUtil.create("div",t+"-base",n),this._separator=o.DomUtil.create("div",t+"-separator",n),this._overlaysList=o.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(o.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;o.DomUtil.empty(this._baseLayersList),o.DomUtil.empty(this._overlaysList);var t,e,i,n,s=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,s+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o.stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var r=e.createElement("span");r.innerHTML=" "+t.name;var a=e.createElement("div");n.appendChild(a),a.appendChild(i),a.appendChild(r);var h=t.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=[],s=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,i=this._map.hasLayer(e),t.checked&&!i?o.push(e):!t.checked&&i&&s.push(e);for(r=0;r<s.length;r++)this._map.removeLayer(s[r]);for(r=0;r<o.length;r++)this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),o=this._map.getZoom(),s=n.length-1;s>=0;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==i&&o<e.options.minZoom||e.options.maxZoom!==i&&o>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)}}(window,document);
!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.proj4=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var c=a("mgrs");Point.fromMGRS=function(a){return new Point(c.toPoint(a))},Point.prototype.toMGRS=function(a){return c.forward([this.x,this.y],a)},b.exports=Point},{mgrs:66}],2:[function(a,b){function Projection(a,b){if(!(this instanceof Projection))return new Projection(a);b=b||function(a){if(a)throw a};var e=c(a);if("object"!=typeof e)return void b(a);var g=f(e),h=Projection.projections.get(g.projName);h?(d(this,g),d(this,h),this.init(),b(null,this)):b(a)}var c=a("./parseCode"),d=a("./extend"),e=a("./projections"),f=a("./deriveConstants");Projection.projections=e,Projection.projections.start(),b.exports=Projection},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(a,b){b.exports=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0;for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return null}return c}},{}],4:[function(a,b){var c=Math.PI/2,d=a("./sign");b.exports=function(a){return Math.abs(a)<c?a:a-d(a)*Math.PI}},{"./sign":21}],5:[function(a,b){var c=2*Math.PI,d=a("./sign");b.exports=function(a){return Math.abs(a)<Math.PI?a:a-d(a)*c}},{"./sign":21}],6:[function(a,b){b.exports=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}},{}],7:[function(a,b){b.exports=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))}},{}],8:[function(a,b){b.exports=function(a){return.375*a*(1+.25*a*(1+.46875*a))}},{}],9:[function(a,b){b.exports=function(a){return.05859375*a*a*(1+.75*a)}},{}],10:[function(a,b){b.exports=function(a){return a*a*a*(35/3072)}},{}],11:[function(a,b){b.exports=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)}},{}],12:[function(a,b){b.exports=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return 0/0}},{}],13:[function(a,b){var c=Math.PI/2;b.exports=function(a,b){var d=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-d)<1e-6)return 0>b?-1*c:c;for(var e,f,g,h,i=Math.asin(.5*b),j=0;30>j;j++)if(f=Math.sin(i),g=Math.cos(i),h=a*f,e=Math.pow(1-h*h,2)/(2*g)*(b/(1-a*a)-f/(1-h*h)+.5/a*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)<=1e-10)return i;return 0/0}},{}],14:[function(a,b){b.exports=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)}},{}],15:[function(a,b){b.exports=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)}},{}],16:[function(a,b){var c=Math.PI/2;b.exports=function(a,b){for(var d,e,f=.5*a,g=c-2*Math.atan(b),h=0;15>=h;h++)if(d=a*Math.sin(g),e=c-2*Math.atan(b*Math.pow((1-d)/(1+d),f))-g,g+=e,Math.abs(e)<=1e-10)return g;return-9999}},{}],17:[function(a,b){var c=1,d=.25,e=.046875,f=.01953125,g=.01068115234375,h=.75,i=.46875,j=.013020833333333334,k=.007120768229166667,l=.3645833333333333,m=.005696614583333333,n=.3076171875;b.exports=function(a){var b=[];b[0]=c-a*(d+a*(e+a*(f+a*g))),b[1]=a*(h-a*(e+a*(f+a*g)));var o=a*a;return b[2]=o*(i-a*(j+a*k)),o*=a,b[3]=o*(l-a*m),b[4]=o*a*n,b}},{}],18:[function(a,b){var c=a("./pj_mlfn"),d=1e-10,e=20;b.exports=function(a,b,f){for(var g=1/(1-b),h=a,i=e;i;--i){var j=Math.sin(h),k=1-b*j*j;if(k=(c(h,j,Math.cos(h),f)-a)*k*Math.sqrt(k)*g,h-=k,Math.abs(k)<d)return h}return h}},{"./pj_mlfn":19}],19:[function(a,b){b.exports=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))}},{}],20:[function(a,b){b.exports=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b}},{}],21:[function(a,b){b.exports=function(a){return 0>a?-1:1}},{}],22:[function(a,b){b.exports=function(a,b){return Math.pow((1-a)/(1+a),b)}},{}],23:[function(a,b){b.exports=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b}},{}],24:[function(a,b){var c=Math.PI/2;b.exports=function(a,b,d){var e=a*d,f=.5*a;return e=Math.pow((1-e)/(1+e),f),Math.tan(.5*(c-b))/e}},{}],25:[function(a,b,c){c.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},c.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},c.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},c.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},c.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},c.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},c.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},c.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},c.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},c.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},c.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},c.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},c.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},c.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},c.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},c.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(a,b,c){c.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},c.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},c.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},c.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},c.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},c.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},c.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},c.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},c.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},c.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},c.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},c.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},c.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},c.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},c.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},c.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},c.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},c.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},c.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},c.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},c.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},c.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},c.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},c.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},c.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},c.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},c.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},c.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},c.hough={a:6378270,rf:297,ellipseName:"Hough"},c.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},c.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},c.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},c.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},c.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},c.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},c.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},c.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},c.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},c.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},c.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},c.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},c.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},c.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(a,b,c){c.greenwich=0,c.lisbon=-9.131906111111,c.paris=2.337229166667,c.bogota=-74.080916666667,c.madrid=-3.687938888889,c.rome=12.452333333333,c.bern=7.439583333333,c.jakarta=106.807719444444,c.ferro=-17.666666666667,c.brussels=4.367975,c.stockholm=18.058277777778,c.athens=23.7163375,c.oslo=10.722916666667},{}],28:[function(a,b){function c(a,b,c){var d;return Array.isArray(c)?(d=f(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):f(a,b,c)}function d(a){return a instanceof e?a:a.oProj?a.oProj:e(a)}function proj4(a,b,e){a=d(a);var f,h=!1;return"undefined"==typeof b?(b=a,a=g,h=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(e=b,b=a,a=g,h=!0),b=d(b),e?c(a,b,e):(f={forward:function(d){return c(a,b,d)},inverse:function(d){return c(b,a,d)}},h&&(f.oProj=b),f)}var e=a("./Proj"),f=a("./transform"),g=e("WGS84");b.exports=proj4},{"./Proj":2,"./transform":64}],29:[function(a,b){var c=Math.PI/2,d=1,e=2,f=3,g=4,h=5,i=484813681109536e-20,j=1.0026,k=.3826834323650898,l=function(a){if(!(this instanceof l))return new l(a);if(this.datum_type=g,a){if(a.datumCode&&"none"===a.datumCode&&(this.datum_type=h),a.datum_params){for(var b=0;b<a.datum_params.length;b++)a.datum_params[b]=parseFloat(a.datum_params[b]);(0!==a.datum_params[0]||0!==a.datum_params[1]||0!==a.datum_params[2])&&(this.datum_type=d),a.datum_params.length>3&&(0!==a.datum_params[3]||0!==a.datum_params[4]||0!==a.datum_params[5]||0!==a.datum_params[6])&&(this.datum_type=e,a.datum_params[3]*=i,a.datum_params[4]*=i,a.datum_params[5]*=i,a.datum_params[6]=a.datum_params[6]/1e6+1)}this.datum_type=a.grids?f:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params,this.datum_type===f&&(this.grids=a.grids)}};l.prototype={compare_datums:function(a){return this.datum_type!==a.datum_type?!1:this.a!==a.a||Math.abs(this.es-a.es)>5e-11?!1:this.datum_type===d?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]:this.datum_type===e?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]&&this.datum_params[3]===a.datum_params[3]&&this.datum_params[4]===a.datum_params[4]&&this.datum_params[5]===a.datum_params[5]&&this.datum_params[6]===a.datum_params[6]:this.datum_type===f||a.datum_type===f?this.nadgrids===a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,d,e,f,g,h,i,j=a.x,k=a.y,l=a.z?a.z:0,m=0;if(-c>k&&k>-1.001*c)k=-c;else if(k>c&&1.001*c>k)k=c;else if(-c>k||k>c)return null;return j>Math.PI&&(j-=2*Math.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),b=(f+l)*i*Math.cos(j),d=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,a.x=b,a.y=d,a.z=e,m},geocentric_to_geodetic:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=a.x,x=a.y,y=a.z?a.z:0;if(o=!1,b=Math.sqrt(w*w+x*x),d=Math.sqrt(w*w+x*x+y*y),b/this.a<t){if(o=!0,q=0,d/this.a<t)return r=c,void(s=-this.b)}else q=Math.atan2(x,w);e=y/d,f=b/d,g=1/Math.sqrt(1-this.es*(2-this.es)*f*f),j=f*(1-this.es)*g,k=e*g,p=0;do p++,i=this.a/Math.sqrt(1-this.es*k*k),s=b*j+y*k-i*(1-this.es*k*k),h=this.es*i/(i+s),g=1/Math.sqrt(1-h*(2-h)*f*f),l=f*(1-h)*g,m=e*g,n=m*j-l*k,j=l,k=m;while(n*n>u&&v>p);return r=Math.atan(m/Math.abs(l)),a.x=q,a.y=r,a.z=s,a},geocentric_to_geodetic_noniter:function(a){var b,d,e,f,g,h,i,l,m,n,o,p,q,r,s,t,u,v=a.x,w=a.y,x=a.z?a.z:0;if(v=parseFloat(v),w=parseFloat(w),x=parseFloat(x),u=!1,0!==v)b=Math.atan2(w,v);else if(w>0)b=c;else if(0>w)b=-c;else if(u=!0,b=0,x>0)d=c;else{if(!(0>x))return d=c,void(e=-this.b);d=-c}return g=v*v+w*w,f=Math.sqrt(g),h=x*j,l=Math.sqrt(h*h+g),n=h/l,p=f/l,o=n*n*n,i=x+this.b*this.ep2*o,t=f-this.a*this.es*p*p*p,m=Math.sqrt(i*i+t*t),q=i/m,r=t/m,s=this.a/Math.sqrt(1-this.es*q*q),e=r>=k?f/r-s:-k>=r?f/-r-s:x/q+s*(this.es-1),u===!1&&(d=Math.atan(q/r)),a.x=b,a.y=d,a.z=e,a},geocentric_to_wgs84:function(a){if(this.datum_type===d)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type===e){var b=this.datum_params[0],c=this.datum_params[1],f=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=j*(a.x-i*a.y+h*a.z)+b,l=j*(i*a.x+a.y-g*a.z)+c,m=j*(-h*a.x+g*a.y+a.z)+f;a.x=k,a.y=l,a.z=m}},geocentric_from_wgs84:function(a){if(this.datum_type===d)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type===e){var b=this.datum_params[0],c=this.datum_params[1],f=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=(a.x-b)/j,l=(a.y-c)/j,m=(a.z-f)/j;a.x=k+i*l-h*m,a.y=-i*k+l+g*m,a.z=h*k-g*l+m}}},b.exports=l},{}],30:[function(a,b){var c=1,d=2,e=3,f=5,g=6378137,h=.006694379990141316;b.exports=function(a,b,i){function j(a){return a===c||a===d}var k,l,m;if(a.compare_datums(b))return i;if(a.datum_type===f||b.datum_type===f)return i;var n=a.a,o=a.es,p=b.a,q=b.es,r=a.datum_type;if(r===e)if(0===this.apply_gridshift(a,0,i))a.a=g,a.es=h;else{if(!a.datum_params)return a.a=n,a.es=a.es,i;for(k=1,l=0,m=a.datum_params.length;m>l;l++)k*=a.datum_params[l];if(0===k)return a.a=n,a.es=a.es,i;r=a.datum_params.length>3?d:c}return b.datum_type===e&&(b.a=g,b.es=h),(a.es!==b.es||a.a!==b.a||j(r)||j(b.datum_type))&&(a.geodetic_to_geocentric(i),j(a.datum_type)&&a.geocentric_to_wgs84(i),j(b.datum_type)&&b.geocentric_from_wgs84(i),b.geocentric_to_geodetic(i)),b.datum_type===e&&this.apply_gridshift(b,1,i),a.a=n,a.es=o,b.a=p,b.es=q,i}},{}],31:[function(a,b){function c(a){var b=this;if(2===arguments.length){var d=arguments[1];c[a]="string"==typeof d?"+"===d[0]?e(arguments[1]):f(arguments[1]):d}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?c.apply(b,a):c(a)});if("string"==typeof a){if(a in c)return c[a]}else"EPSG"in a?c["EPSG:"+a.EPSG]=a:"ESRI"in a?c["ESRI:"+a.ESRI]=a:"IAU2000"in a?c["IAU2000:"+a.IAU2000]=a:console.log(a);return}}var d=a("./global"),e=a("./projString"),f=a("./wkt");d(c),b.exports=c},{"./global":34,"./projString":37,"./wkt":65}],32:[function(a,b){var c=a("./constants/Datum"),d=a("./constants/Ellipsoid"),e=a("./extend"),f=a("./datum"),g=1e-10,h=.16666666666666666,i=.04722222222222222,j=.022156084656084655;b.exports=function(a){if(a.datumCode&&"none"!==a.datumCode){var b=c[a.datumCode];b&&(a.datum_params=b.towgs84?b.towgs84.split(","):null,a.ellps=b.ellipse,a.datumName=b.datumName?b.datumName:a.datumCode)}if(!a.a){var k=d[a.ellps]?d[a.ellps]:d.WGS84;e(a,k)}return a.rf&&!a.b&&(a.b=(1-1/a.rf)*a.a),(0===a.rf||Math.abs(a.a-a.b)<g)&&(a.sphere=!0,a.b=a.a),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=(a.a2-a.b2)/a.a2,a.e=Math.sqrt(a.es),a.R_A&&(a.a*=1-a.es*(h+a.es*(i+a.es*j)),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=0),a.ep2=(a.a2-a.b2)/a.b2,a.k0||(a.k0=1),a.axis||(a.axis="enu"),a.datum||(a.datum=f(a)),a}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(a,b){b.exports=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a}},{}],34:[function(a,b){b.exports=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}},{}],35:[function(a,b){var proj4=a("./core");proj4.defaultDatum="WGS84",proj4.Proj=a("./Proj"),proj4.WGS84=new proj4.Proj("WGS84"),proj4.Point=a("./Point"),proj4.toPoint=a("./common/toPoint"),proj4.defs=a("./defs"),proj4.transform=a("./transform"),proj4.mgrs=a("mgrs"),proj4.version=a("../package.json").version,a("./includedProjections")(proj4),b.exports=proj4},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"gWUPNW","./transform":64,mgrs:66}],36:[function(a,b){function c(a){return"string"==typeof a}function d(a){return a in h}function e(a){var b=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return b.reduce(function(b,c){return b+1+a.indexOf(c)},0)}function f(a){return"+"===a[0]}function g(a){return c(a)?d(a)?h[a]:e(a)?i(a):f(a)?j(a):void 0:a}var h=a("./defs"),i=a("./wkt"),j=a("./projString");b.exports=g},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(a,b){var c=.017453292519943295,d=a("./constants/PrimeMeridian");b.exports=function(a){var b={},e={};a.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var b=a.split("=");b.push(!0),e[b[0].toLowerCase()]=b[1]});var f,g,h,i={proj:"projName",datum:"datumCode",rf:function(a){b.rf=parseFloat(a,10)},lat_0:function(a){b.lat0=a*c},lat_1:function(a){b.lat1=a*c},lat_2:function(a){b.lat2=a*c},lat_ts:function(a){b.lat_ts=a*c},lon_0:function(a){b.long0=a*c},lon_1:function(a){b.long1=a*c},lon_2:function(a){b.long2=a*c},alpha:function(a){b.alpha=parseFloat(a)*c},lonc:function(a){b.longc=a*c},x_0:function(a){b.x0=parseFloat(a,10)},y_0:function(a){b.y0=parseFloat(a,10)},k_0:function(a){b.k0=parseFloat(a,10)},k:function(a){b.k0=parseFloat(a,10)},r_a:function(){b.R_A=!0},zone:function(a){b.zone=parseInt(a,10)},south:function(){b.utmSouth=!0},towgs84:function(a){b.datum_params=a.split(",").map(function(a){return parseFloat(a,10)})},to_meter:function(a){b.to_meter=parseFloat(a,10)},from_greenwich:function(a){b.from_greenwich=a*c},pm:function(a){b.from_greenwich=(d[a]?d[a]:parseFloat(a,10))*c},nadgrids:function(a){"@null"===a?b.datumCode="none":b.nadgrids=a},axis:function(a){var c="ewnsud";3===a.length&&-1!==c.indexOf(a.substr(0,1))&&-1!==c.indexOf(a.substr(1,1))&&-1!==c.indexOf(a.substr(2,1))&&(b.axis=a)}};for(f in e)g=e[f],f in i?(h=i[f],"function"==typeof h?h(g):b[h]=g):b[f]=g;return"string"==typeof b.datumCode&&"WGS84"!==b.datumCode&&(b.datumCode=b.datumCode.toLowerCase()),b}},{"./constants/PrimeMeridian":27}],38:[function(a,b,c){function d(a,b){var c=g.length;return a.names?(g[c]=a,a.names.forEach(function(a){f[a.toLowerCase()]=c}),this):(console.log(b),!0)}var e=[a("./projections/merc"),a("./projections/longlat")],f={},g=[];c.add=d,c.get=function(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof f[b]&&g[f[b]]?g[f[b]]:void 0},c.start=function(){e.forEach(d)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/qsfnz"),g=a("../common/adjust_lon"),h=a("../common/asinz");c.init=function(){Math.abs(this.lat1+this.lat2)<d||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=e(this.e3,this.sin_po,this.cos_po),this.qs1=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=e(this.e3,this.sin_po,this.cos_po),this.qs2=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=f(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>d?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},c.forward=function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=f(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,h=this.ns0*g(b-this.long0),i=e*Math.sin(h)+this.x0,j=this.rh-e*Math.cos(h)+this.y0;return a.x=i,a.y=j,a},c.inverse=function(a){var b,c,d,e,f,h;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?h=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,h=this.phi1z(this.e3,c)),f=g(e/this.ns0+this.long0),a.x=f,a.y=h,a},c.phi1z=function(a,b){var c,e,f,g,i,j=h(.5*b);if(d>a)return j;for(var k=a*a,l=1;25>=l;l++)if(c=Math.sin(j),e=Math.cos(j),f=a*c,g=1-f*f,i=.5*g*g/e*(b/(1-k)-c/g+.5/a*Math.log((1-f)/(1+f))),j+=i,Math.abs(i)<=1e-7)return j;return null},c.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/mlfn"),h=a("../common/e0fn"),i=a("../common/e1fn"),j=a("../common/e2fn"),k=a("../common/e3fn"),l=a("../common/gN"),m=a("../common/asinz"),n=a("../common/imlfn");c.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},c.forward=function(a){var b,c,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.x,I=a.y,J=Math.sin(a.y),K=Math.cos(a.y),L=d(H-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=f?(a.x=this.x0+this.a*(e-I)*Math.sin(L),a.y=this.y0-this.a*(e-I)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(a.x=this.x0+this.a*(e+I)*Math.sin(L),a.y=this.y0+this.a*(e+I)*Math.cos(L),a):(B=this.sin_p12*J+this.cos_p12*K*Math.cos(L),z=Math.acos(B),A=z/Math.sin(z),a.x=this.x0+this.a*A*K*Math.sin(L),a.y=this.y0+this.a*A*(this.cos_p12*J-this.sin_p12*K*Math.cos(L)),a):(b=h(this.es),c=i(this.es),m=j(this.es),n=k(this.es),Math.abs(this.sin_p12-1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o-p)*Math.sin(L),a.y=this.y0-(o-p)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o+p)*Math.sin(L),a.y=this.y0+(o+p)*Math.cos(L),a):(q=J/K,r=l(this.a,this.e,this.sin_p12),s=l(this.a,this.e,J),t=Math.atan((1-this.es)*q+this.es*r*this.sin_p12/(s*K)),u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(t)-this.sin_p12*Math.cos(L)),C=0===u?Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.abs(Math.abs(u)-Math.PI)<=f?-Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.asin(Math.sin(L)*Math.cos(t)/Math.sin(u)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),x=v*w,y=w*w,D=C*C,E=D*C,F=E*C,G=F*C,z=r*C*(1-D*y*(1-y)/6+E/8*x*(1-2*y)+F/120*(y*(4-7*y)-3*v*v*(1-7*y))-G/48*x),a.x=this.x0+z*Math.sin(u),a.y=this.y0+z*Math.cos(u),a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*e*this.a)return;return c=b/this.a,o=Math.sin(c),p=Math.cos(c),q=this.long0,Math.abs(b)<=f?r=this.lat0:(r=m(p*this.sin_p12+a.y*o*this.cos_p12/b),s=Math.abs(this.lat0)-e,q=d(Math.abs(s)<=f?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*o,b*this.cos_p12*p-a.y*this.sin_p12*o))),a.x=q,a.y=r,a}return t=h(this.es),u=i(this.es),v=j(this.es),w=k(this.es),Math.abs(this.sin_p12-1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=x-b,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,-1*a.y)),a.x=q,a.y=r,a):Math.abs(this.sin_p12+1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=b-x,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,a.y)),a.x=q,a.y=r,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),B=Math.atan2(a.x,a.y),z=l(this.a,this.e,this.sin_p12),C=Math.cos(B),D=this.e*this.cos_p12*C,E=-D*D/(1-this.es),F=3*this.es*(1-E)*this.sin_p12*this.cos_p12*C/(1-this.es),G=b/z,H=G-E*(1+E)*Math.pow(G,3)/6-F*(1+3*E)*Math.pow(G,4)/24,I=1-E*H*H/2-G*H*H*H/6,A=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*C),q=d(this.long0+Math.asin(Math.sin(B)*Math.sin(H)/Math.cos(A))),r=Math.atan((1-this.es*I*this.sin_p12/Math.sin(A))*Math.tan(A)/(1-this.es)),a.x=q,a.y=r,a)},c.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(a,b,c){var d=a("../common/mlfn"),e=a("../common/e0fn"),f=a("../common/e1fn"),g=a("../common/e2fn"),h=a("../common/e3fn"),i=a("../common/gN"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=Math.PI/2,n=1e-10;c.init=function(){this.sphere||(this.e0=e(this.es),this.e1=f(this.es),this.e2=g(this.es),this.e3=h(this.es),this.ml0=this.a*d(this.e0,this.e1,this.e2,this.e3,this.lat0))},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=j(e-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(f)*Math.sin(e)),c=this.a*(Math.atan2(Math.tan(f),Math.cos(e))-this.lat0);else{var g=Math.sin(f),h=Math.cos(f),k=i(this.a,this.e,g),l=Math.tan(f)*Math.tan(f),m=e*Math.cos(f),n=m*m,o=this.es*h*h/(1-this.es),p=this.a*d(this.e0,this.e1,this.e2,this.e3,f);b=k*m*(1-n*l*(1/6-(8-l+8*o)*n/120)),c=p-this.ml0+k*g/h*n*(.5+(5-l+6*o)*n/24)}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=l(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-m)<=n)return a.x=this.long0,a.y=m,0>e&&(a.y*=-1),a;var o=i(this.a,this.e,Math.sin(h)),p=o*o*o/this.a/this.a*(1-this.es),q=Math.pow(Math.tan(h),2),r=d*this.a/o,s=r*r;b=h-o*Math.tan(h)/p*r*r*(.5-(1+3*q)*r*r/24),c=r*(1-s*(q/3+(1+3*q)*q*s/15))/Math.cos(h)}return a.x=j(c+this.long0),a.y=k(b),a},c.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/qsfnz"),f=a("../common/msfnz"),g=a("../common/iqsfnz");c.init=function(){this.sphere||(this.k0=f(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},c.forward=function(a){var b,c,f=a.x,g=a.y,h=d(f-this.long0);if(this.sphere)b=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(g)/Math.cos(this.lat_ts);else{var i=e(this.e,Math.sin(g));b=this.x0+this.a*this.k0*h,c=this.y0+this.a*i*.5/this.k0}return a.x=b,a.y=c,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=d(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=g(this.e,2*a.y*this.k0/this.a),b=d(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a},c.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat");c.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},c.forward=function(a){var b=a.x,c=a.y,f=d(b-this.long0),g=e(c-this.lat0);return a.x=this.x0+this.a*f*this.rc,a.y=this.y0+this.a*g,a},c.inverse=function(a){var b=a.x,c=a.y;return a.x=d(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=e(this.lat0+(c-this.y0)/this.a),a},c.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/msfnz"),i=a("../common/mlfn"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=1e-10;c.init=function(){Math.abs(this.lat1+this.lat2)<m||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=h(this.e,this.sinphi,this.cosphi),this.ml1=i(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<m?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=h(this.e,this.sinphi,this.cosphi),this.ml2=i(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},c.forward=function(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=i(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*j(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a},c.inverse=function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=j(this.long0+f/this.ns),d=k(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=l(g,this.e0,this.e1,this.e2,this.e3),e=j(this.long0+f/this.ns),a.x=e,a.y=d,a},c.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(a,b,c){var d=Math.PI/4,e=a("../common/srat"),f=Math.PI/2,g=20;c.init=function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+d)/(Math.pow(Math.tan(.5*this.lat0+d),this.C)*e(this.e*a,this.ratexp))},c.forward=function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+d),this.C)*e(this.e*Math.sin(c),this.ratexp))-f,a.x=this.C*b,a},c.inverse=function(a){for(var b=1e-14,c=a.x/this.C,h=a.y,i=Math.pow(Math.tan(.5*h+d)/this.K,1/this.C),j=g;j>0&&(h=2*Math.atan(i*e(this.e*Math.sin(a.y),-.5*this.e))-f,!(Math.abs(h-a.y)<b));--j)a.y=h;return j?(a.x=c,a.y=h,a):null},c.names=["gauss"]},{"../common/srat":22}],46:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10,f=a("../common/asinz");c.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},c.forward=function(a){var b,c,f,g,h,i,j,k,l=a.x,m=a.y;return f=d(l-this.long0),b=Math.sin(m),c=Math.cos(m),g=Math.cos(f),i=this.sin_p14*b+this.cos_p14*c*g,h=1,i>0||Math.abs(i)<=e?(j=this.x0+this.a*h*c*Math.sin(f)/i,k=this.y0+this.a*h*(this.cos_p14*b-this.sin_p14*c*g)/i):(j=this.x0+this.infinity_dist*c*Math.sin(f),k=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*g)),a.x=j,a.y=k,a
},c.inverse=function(a){var b,c,e,g,h,i;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(g=Math.atan2(b,this.rc),c=Math.sin(g),e=Math.cos(g),i=f(e*this.sin_p14+a.y*c*this.cos_p14/b),h=Math.atan2(a.x*c,b*this.cos_p14*e-a.y*this.sin_p14*c),h=d(this.long0+h)):(i=this.phic0,h=0),a.x=h,a.y=i,a},c.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},c.forward=function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=d(j-this.long0);return b=Math.pow((1+this.e*Math.sin(k))/(1-this.e*Math.sin(k)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(k/2+this.s45),this.alfa)/b)-this.s45),e=-l*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(e)),g=Math.asin(Math.cos(c)*Math.sin(e)/Math.cos(f)),h=this.n*g,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),a.y=i*Math.cos(h)/1,a.x=i*Math.sin(h)/1,this.czech||(a.y*=-1,a.x*=-1),a},c.inverse=function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a},c.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],48:[function(a,b,c){var d=Math.PI/2,e=Math.PI/4,f=1e-10,g=a("../common/qsfnz"),h=a("../common/adjust_lon");c.S_POLE=1,c.N_POLE=2,c.EQUIT=3,c.OBLIQ=4,c.init=function(){var a=Math.abs(this.lat0);if(this.mode=Math.abs(a-d)<f?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<f?this.EQUIT:this.OBLIQ,this.es>0){var b;switch(this.qp=g(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=g(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},c.forward=function(a){var b,c,i,j,k,l,m,n,o,p,q=a.x,r=a.y;if(q=h(q-this.long0),this.sphere){if(k=Math.sin(r),p=Math.cos(r),i=Math.cos(q),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+p*i:1+this.sinph0*k+this.cosph0*p*i,f>=c)return null;c=Math.sqrt(2/c),b=c*p*Math.sin(q),c*=this.mode===this.EQUIT?k:this.cosph0*k-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(r+this.phi0)<f)return null;c=e-.5*r,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(q),c*=i}}else{switch(m=0,n=0,o=0,i=Math.cos(q),j=Math.sin(q),k=Math.sin(r),l=g(this.e,k),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=l/this.qp,n=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:o=1+this.sinb1*m+this.cosb1*n*i;break;case this.EQUIT:o=1+n*i;break;case this.N_POLE:o=d+r,l=this.qp-l;break;case this.S_POLE:o=r-d,l=this.qp+l}if(Math.abs(o)<f)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:o=Math.sqrt(2/o),c=this.mode===this.OBLIQ?this.ymf*o*(this.cosb1*m-this.sinb1*n*i):(o=Math.sqrt(2/(1+n*i)))*m*this.ymf,b=this.xmf*o*n*j;break;case this.N_POLE:case this.S_POLE:l>=0?(b=(o=Math.sqrt(l))*j,c=i*(this.mode===this.S_POLE?o:-o)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,e,g,i,j,k,l=a.x/this.a,m=a.y/this.a;if(this.sphere){var n,o=0,p=0;if(n=Math.sqrt(l*l+m*m),c=.5*n,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(c),o=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(n)<=f?0:Math.asin(m*p/n),l*=p,m=o*n;break;case this.OBLIQ:c=Math.abs(n)<=f?this.phi0:Math.asin(o*this.sinph0+m*p*this.cosph0/n),l*=p*this.cosph0,m=(o-Math.sin(c)*this.sinph0)*n;break;case this.N_POLE:m=-m,c=d-c;break;case this.S_POLE:c-=d}b=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,m):0}else{if(k=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,m*=this.dd,j=Math.sqrt(l*l+m*m),f>j)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(.5*j/this.rq),e=Math.cos(g),l*=g=Math.sin(g),this.mode===this.OBLIQ?(k=e*this.sinb1+m*g*this.cosb1/j,i=this.qp*k,m=j*this.cosb1*e-m*this.sinb1*g):(k=m*g/j,i=this.qp*k,m=j*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),i=l*l+m*m,!i)return a.x=0,a.y=this.phi0,a;k=1-i/this.qp,this.mode===this.S_POLE&&(k=-k)}b=Math.atan2(l,m),c=this.authlat(Math.asin(k),this.apa)}return a.x=h(this.long0+b),a.y=c,a},c.P00=.3333333333333333,c.P01=.17222222222222222,c.P02=.10257936507936508,c.P10=.06388888888888888,c.P11=.0664021164021164,c.P20=.016415012942191543,c.authset=function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},c.authlat=function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)},c.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/tsfnz"),g=Math.PI/2,h=a("../common/sign"),i=a("../common/adjust_lon"),j=a("../common/phi2z");c.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<d)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),g=e(this.e,b,c),h=f(this.e,this.lat1,b),i=Math.sin(this.lat2),j=Math.cos(this.lat2),k=e(this.e,i,j),l=f(this.e,this.lat2,i),m=f(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>d?Math.log(g/k)/Math.log(h/l):b,isNaN(this.ns)&&(this.ns=b),this.f0=g/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}},c.forward=function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=d&&(c=h(c)*(g-2*d));var e,j,k=Math.abs(Math.abs(c)-g);if(k>d)e=f(this.e,c,Math.sin(c)),j=this.a*this.f0*Math.pow(e,this.ns);else{if(k=c*this.ns,0>=k)return null;j=0}var l=this.ns*i(b-this.long0);return a.x=this.k0*j*Math.sin(l)+this.x0,a.y=this.k0*(this.rh-j*Math.cos(l))+this.y0,a},c.inverse=function(a){var b,c,d,e,f,h=(a.x-this.x0)/this.k0,k=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(h*h+k*k),c=1):(b=-Math.sqrt(h*h+k*k),c=-1);var l=0;if(0!==b&&(l=Math.atan2(c*h,c*k)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=j(this.e,d),-9999===e)return null}else e=-g;return f=i(l/this.ns+this.long0),a.x=f,a.y=e,a},c.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(a,b,c){function d(a){return a}c.init=function(){},c.forward=d,c.inverse=d,c.names=["longlat","identity"]},{}],51:[function(a,b,c){var d=a("../common/msfnz"),e=Math.PI/2,f=1e-10,g=57.29577951308232,h=a("../common/adjust_lon"),i=Math.PI/4,j=a("../common/tsfnz"),k=a("../common/phi2z");c.init=function(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):d(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},c.forward=function(a){var b=a.x,c=a.y;if(c*g>90&&-90>c*g&&b*g>180&&-180>b*g)return null;var d,k;if(Math.abs(Math.abs(c)-e)<=f)return null;if(this.sphere)d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*c));else{var l=Math.sin(c),m=j(this.e,c,l);d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0-this.a*this.k0*Math.log(m)}return a.x=d,a.y=k,a},c.inverse=function(a){var b,c,d=a.x-this.x0,f=a.y-this.y0;if(this.sphere)c=e-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var g=Math.exp(-f/(this.a*this.k0));if(c=k(this.e,g),-9999===c)return null}return b=h(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a},c.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){},c.forward=function(a){var b=a.x,c=a.y,e=d(b-this.long0),f=this.x0+this.a*e,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=f,a.y=g,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b=d(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a},c.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],53:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10;c.init=function(){},c.forward=function(a){for(var b=a.x,c=a.y,f=d(b-this.long0),g=c,h=Math.PI*Math.sin(c),i=0;!0;i++){var j=-(g+Math.sin(g)-h)/(1+Math.cos(g));if(g+=j,Math.abs(j)<e)break}g/=2,Math.PI/2-Math.abs(c)<e&&(f=0);var k=.900316316158*this.a*f*Math.cos(g)+this.x0,l=1.4142135623731*this.a*Math.sin(g)+this.y0;return a.x=k,a.y=l,a},c.inverse=function(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var e=d(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));e<-Math.PI&&(e=-Math.PI),e>Math.PI&&(e=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var f=Math.asin(c);return a.x=e,a.y=f,a},c.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],54:[function(a,b,c){var d=484813681109536e-20;c.iterations=1,c.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},c.forward=function(a){var b,c=a.x,e=a.y,f=e-this.lat0,g=c-this.long0,h=f/d*1e-5,i=g,j=1,k=0;for(b=1;10>=b;b++)j*=h,k+=this.A[b]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;for(b=1;6>=b;b++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[b]*p-this.B_im[b]*q,s=s+this.B_im[b]*p+this.B_re[b]*q;return a.x=s*this.a+this.x0,a.y=r*this.a+this.y0,a},c.inverse=function(a){var b,c,e,f=a.x,g=a.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(b=1;6>=b;b++)c=l*j-m*k,e=m*j+l*k,l=c,m=e,n=n+this.C_re[b]*l-this.C_im[b]*m,o=o+this.C_im[b]*l+this.C_re[b]*m;for(var p=0;p<this.iterations;p++){var q,r,s=n,t=o,u=j,v=k;for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(b-1)*(this.B_re[b]*s-this.B_im[b]*t),v+=(b-1)*(this.B_im[b]*s+this.B_re[b]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=b*(this.B_re[b]*s-this.B_im[b]*t),x+=b*(this.B_im[b]*s+this.B_re[b]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(b=1;9>=b;b++)B*=z,C+=this.D[b]*B;var D=this.lat0+C*d*1e5,E=this.long0+A;return a.x=E,a.y=D,a},c.names=["New_Zealand_Map_Grid","nzmg"]},{}],55:[function(a,b,c){var d=a("../common/tsfnz"),e=a("../common/adjust_lon"),f=a("../common/phi2z"),g=Math.PI/2,h=Math.PI/4,i=1e-10;c.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var f=d(this.e,this.lat0,a),g=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>g*g&&(g=1);var h,i;if(isNaN(this.longc)){var j=d(this.e,this.lat1,Math.sin(this.lat1)),k=d(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(g+Math.sqrt(g*g-1))*Math.pow(f,this.bl):(g-Math.sqrt(g*g-1))*Math.pow(f,this.bl);var l=Math.pow(j,this.bl),m=Math.pow(k,this.bl);h=this.el/l,i=.5*(h-1/h);var n=(this.el*this.el-m*l)/(this.el*this.el+m*l),o=(m-l)/(m+l),p=e(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(n*Math.tan(.5*this.bl*p)/o)/this.bl,this.long0=e(this.long0);var q=e(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*q)/i),this.alpha=Math.asin(g*Math.sin(this.gamma0))}else h=this.lat0>=0?g+Math.sqrt(g*g-1):g-Math.sqrt(g*g-1),this.el=h*Math.pow(f,this.bl),i=.5*(h-1/h),this.gamma0=Math.asin(Math.sin(this.alpha)/g),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha))},c.forward=function(a){var b,c,f,j=a.x,k=a.y,l=e(j-this.long0);if(Math.abs(Math.abs(k)-g)<=i)f=k>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(h+f*this.gamma0*.5)),b=-1*f*g*this.al/this.bl;else{var m=d(this.e,k,Math.sin(k)),n=this.el/Math.pow(m,this.bl),o=.5*(n-1/n),p=.5*(n+1/n),q=Math.sin(this.bl*l),r=(o*Math.sin(this.gamma0)-q*Math.cos(this.gamma0))/p;c=Math.abs(Math.abs(r)-1)<=i?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-r)/(1+r))/this.bl,b=Math.abs(Math.cos(this.bl*l))<=i?this.al*this.bl*l:this.al*Math.atan2(o*Math.cos(this.gamma0)+q*Math.sin(this.gamma0),Math.cos(this.bl*l))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a},c.inverse=function(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),h=.5*(d-1/d),j=.5*(d+1/d),k=Math.sin(this.bl*b/this.al),l=(k*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/j,m=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<i?(a.x=this.long0,a.y=g):Math.abs(l+1)<i?(a.x=this.long0,a.y=-1*g):(a.y=f(this.e,m),a.x=e(this.long0-Math.atan2(h*Math.cos(this.gamma0)-k*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a},c.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/adjust_lon"),i=a("../common/adjust_lat"),j=a("../common/mlfn"),k=1e-10,l=a("../common/gN"),m=20;c.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*j(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=h(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=k?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(i(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=k)b=this.a*g,c=-1*this.ml0;else{var m=l(this.a,this.e,Math.sin(f))/Math.tan(f);b=m*Math.sin(d),c=this.a*j(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+m*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){var b,c,d,e,f,g,i,l,n;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=k)b=h(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,i=d*d/this.a/this.a+g*g,l=g;var o;for(f=m;f;--f)if(o=Math.tan(l),n=-1*(g*(l*o+1)-l-.5*(l*l+i)*o)/((l-g)/o-1),l+=n,Math.abs(n)<=k){c=l;break}b=h(this.long0+Math.asin(d*Math.tan(l)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=k)c=0,b=h(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,i=d*d/this.a/this.a+g*g,l=g;var p,q,r,s,t;for(f=m;f;--f)if(t=this.e*Math.sin(l),p=Math.sqrt(1-t*t)*Math.tan(l),q=this.a*j(this.e0,this.e1,this.e2,this.e3,l),r=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),s=q/this.a,n=(g*(p*s+1)-s-.5*p*(s*s+i))/(this.es*Math.sin(2*l)*(s*s+i-2*g*s)/(4*p)+(g-s)*(p*r-2/Math.sin(2*l))-r),l-=n,Math.abs(n)<=k){c=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=h(this.long0+Math.asin(d*p/this.a)/Math.sin(c))}return a.x=b,a.y=c,a},c.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat"),f=a("../common/pj_enfn"),g=20,h=a("../common/pj_mlfn"),i=a("../common/pj_inv_mlfn"),j=Math.PI/2,k=1e-10,l=a("../common/asinz");c.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=f(this.es)},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=d(e-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(f),j=g;j;--j){var l=(this.m*f+Math.sin(f)-i)/(this.m+Math.cos(f));if(f-=l,Math.abs(l)<k)break}else f=1!==this.n?Math.asin(this.n*Math.sin(f)):f;b=this.a*this.C_x*e*(this.m+Math.cos(f)),c=this.a*this.C_y*f}else{var m=Math.sin(f),n=Math.cos(f);c=this.a*h(f,m,n,this.en),b=this.a*e*n/Math.sqrt(1-this.es*m*m)}return a.x=b,a.y=c,a},c.inverse=function(a){var b,c,f,g;return a.x-=this.x0,f=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,f/=this.C_x*(this.m+Math.cos(b)),this.m?b=l((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=l(Math.sin(b)/this.n)),f=d(f+this.long0),b=e(b)):(b=i(a.y/this.a,this.es,this.en),g=Math.abs(b),j>g?(g=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(b)),f=d(c)):j>g-k&&(f=this.long0)),a.x=f,a.y=b,a},c.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(a,b,c){c.init=function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},c.forward=function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},c.inverse=function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a},c.names=["somerc"]},{}],59:[function(a,b,c){var d=Math.PI/2,e=1e-10,f=a("../common/sign"),g=a("../common/msfnz"),h=a("../common/tsfnz"),i=a("../common/phi2z"),j=a("../common/adjust_lon");c.ssfn_=function(a,b,c){return b*=c,Math.tan(.5*(d+a))*Math.pow((1-b)/(1+b),.5*c)},c.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+f(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*this.cons*g(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/h(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=g(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},c.forward=function(a){var b,c,f,g,i,k,l=a.x,m=a.y,n=Math.sin(m),o=Math.cos(m),p=j(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=e&&Math.abs(m+this.lat0)<=e?(a.x=0/0,a.y=0/0,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(p)),a.x=this.a*b*o*Math.sin(p)+this.x0,a.y=this.a*b*(this.coslat0*n-this.sinlat0*o*Math.cos(p))+this.y0,a):(c=2*Math.atan(this.ssfn_(m,n,this.e))-d,g=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=e?(i=h(this.e,m*this.con,this.con*n),k=2*this.a*this.k0*i/this.cons,a.x=this.x0+k*Math.sin(l-this.long0),a.y=this.y0-this.con*k*Math.cos(l-this.long0),a):(Math.abs(this.sinlat0)<e?(b=2*this.a*this.k0/(1+g*Math.cos(p)),a.y=b*f):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*g*Math.cos(p))),a.y=b*(this.cosX0*f-this.sinX0*g*Math.cos(p))+this.y0),a.x=b*g*Math.sin(p)+this.x0,a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,f,g,h,k=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(k/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,e>=k?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/k),b=j(Math.abs(this.coslat0)<e?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(l),k*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=e){if(e>=k)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,f=k*this.cons/(2*this.a*this.k0),c=this.con*i(this.e,f),b=this.con*j(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else g=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,e>=k?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/k),b=j(this.long0+Math.atan2(a.x*Math.sin(g),k*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*i(this.e,Math.tan(.5*(d+h)));return a.x=b,a.y=c,a},c.names=["stere"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(a,b,c){var d=a("./gauss"),e=a("../common/adjust_lon");c.init=function(){d.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},c.forward=function(a){var b,c,f,g;return a.x=e(a.x-this.long0),d.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),f=Math.cos(a.x),g=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*f),a.x=g*c*Math.sin(a.x),a.y=g*(this.cosc0*b-this.sinc0*c*f),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},c.inverse=function(a){var b,c,f,g,h;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,h=Math.sqrt(a.x*a.x+a.y*a.y)){var i=2*Math.atan2(h,this.R2);b=Math.sin(i),c=Math.cos(i),g=Math.asin(c*this.sinc0+a.y*b*this.cosc0/h),f=Math.atan2(a.x*b,h*this.cosc0*c-a.y*this.sinc0*b)}else g=this.phic0,f=0;return a.x=f,a.y=g,d.inverse.apply(this,[a]),a.x=e(a.x+this.long0),a},c.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":45}],61:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/mlfn"),i=a("../common/adjust_lon"),j=Math.PI/2,k=1e-10,l=a("../common/sign"),m=a("../common/asinz");c.init=function(){this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=i(e-this.long0),j=Math.sin(f),k=Math.cos(f);if(this.sphere){var l=k*Math.sin(g);if(Math.abs(Math.abs(l)-1)<1e-10)return 93;c=.5*this.a*this.k0*Math.log((1+l)/(1-l)),b=Math.acos(k*Math.cos(g)/Math.sqrt(1-l*l)),0>f&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var m=k*g,n=Math.pow(m,2),o=this.ep2*Math.pow(k,2),p=Math.tan(f),q=Math.pow(p,2);b=1-this.es*Math.pow(j,2);var r=this.a/Math.sqrt(b),s=this.a*h(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*r*m*(1+n/6*(1-q+o+n/20*(5-18*q+Math.pow(q,2)+72*o-58*this.ep2)))+this.x0,d=this.k0*(s-this.ml0+r*p*n*(.5+n/24*(5-q+9*o+4*Math.pow(o,2)+n/30*(61-58*q+Math.pow(q,2)+600*o-330*this.ep2))))+this.y0}return a.x=c,a.y=d,a},c.inverse=function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var n=Math.exp(a.x/(this.a*this.k0)),o=.5*(n-1/n),p=this.lat0+a.y/(this.a*this.k0),q=Math.cos(p);b=Math.sqrt((1-q*q)/(1+o*o)),f=m(b),0>p&&(f=-f),g=0===o&&0===q?this.long0:i(Math.atan2(o,q)+this.long0)}else{var r=a.x-this.x0,s=a.y-this.y0;for(b=(this.ml0+s/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=k));e++)if(e>=h)return 95;if(Math.abs(c)<j){var t=Math.sin(c),u=Math.cos(c),v=Math.tan(c),w=this.ep2*Math.pow(u,2),x=Math.pow(w,2),y=Math.pow(v,2),z=Math.pow(y,2);b=1-this.es*Math.pow(t,2);var A=this.a/Math.sqrt(b),B=A*(1-this.es)/b,C=r/(A*this.k0),D=Math.pow(C,2);f=c-A*v*D/B*(.5-D/24*(5+3*y+10*w-4*x-9*this.ep2-D/30*(61+90*y+298*w+45*z-252*this.ep2-3*x))),g=i(this.long0+C*(1-D/6*(1+2*y+w-D/20*(5-2*w+28*y-3*x+8*this.ep2+24*z)))/u)}else f=j*l(s),g=this.long0}return a.x=g,a.y=f,a},c.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(a,b,c){var d=.017453292519943295,e=a("./tmerc");c.dependsOn="tmerc",c.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,e.init.apply(this),this.forward=e.forward,this.inverse=e.inverse)},c.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/asinz");c.init=function(){this.R=this.a},c.forward=function(a){var b,c,h=a.x,i=a.y,j=d(h-this.long0);Math.abs(i)<=f&&(b=this.x0+this.R*j,c=this.y0);var k=g(2*Math.abs(i/Math.PI));(Math.abs(j)<=f||Math.abs(Math.abs(i)-e)<=f)&&(b=this.x0,c=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*k):this.y0+Math.PI*this.R*-Math.tan(.5*k));var l=.5*Math.abs(Math.PI/j-j/Math.PI),m=l*l,n=Math.sin(k),o=Math.cos(k),p=o/(n+o-1),q=p*p,r=p*(2/n-1),s=r*r,t=Math.PI*this.R*(l*(p-s)+Math.sqrt(m*(p-s)*(p-s)-(s+m)*(q-s)))/(s+m);0>j&&(t=-t),b=this.x0+t;var u=m+p;return t=Math.PI*this.R*(r*u-l*Math.sqrt((s+m)*(m+1)-u*u))/(s+m),c=i>=0?this.y0+t:this.y0-t,a.x=b,a.y=c,a},c.inverse=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p;return a.x-=this.x0,a.y-=this.y0,n=Math.PI*this.R,e=a.x/n,g=a.y/n,h=e*e+g*g,i=-Math.abs(g)*(1+h),j=i-2*g*g+e*e,k=-2*i+1+2*g*g+h*h,p=g*g/k+(2*j*j*j/k/k/k-9*i*j/k/k)/27,l=(i-j*j/3/k)/k,m=2*Math.sqrt(-l/3),n=3*p/l/m,Math.abs(n)>1&&(n=n>=0?1:-1),o=Math.acos(n)/3,c=a.y>=0?(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI:-(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI,b=Math.abs(e)<f?this.long0:d(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(e*e-g*g)+h*h))/2/e),a.x=b,a.y=c,a},c.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(a,b){var c=.017453292519943295,d=57.29577951308232,e=1,f=2,g=a("./datum_transform"),h=a("./adjust_axis"),i=a("./Proj"),j=a("./common/toPoint");b.exports=function k(a,b,l){function m(a,b){return(a.datum.datum_type===e||a.datum.datum_type===f)&&"WGS84"!==b.datumCode}var n;return Array.isArray(l)&&(l=j(l)),a.datum&&b.datum&&(m(a,b)||m(b,a))&&(n=new i("WGS84"),k(a,n,l),a=n),"enu"!==a.axis&&h(a,!1,l),"longlat"===a.projName?(l.x*=c,l.y*=c):(a.to_meter&&(l.x*=a.to_meter,l.y*=a.to_meter),a.inverse(l)),a.from_greenwich&&(l.x+=a.from_greenwich),l=g(a.datum,b.datum,l),b.from_greenwich&&(l.x-=b.from_greenwich),"longlat"===b.projName?(l.x*=d,l.y*=d):(b.forward(l),b.to_meter&&(l.x/=b.to_meter,l.y/=b.to_meter)),"enu"!==b.axis&&h(b,!0,l),l}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(a,b){function c(a,b,c){a[b]=c.map(function(a){var b={};return d(a,b),b}).reduce(function(a,b){return i(a,b)},{})}function d(a,b){var e;return Array.isArray(a)?(e=a.shift(),"PARAMETER"===e&&(e=a.shift()),1===a.length?Array.isArray(a[0])?(b[e]={},d(a[0],b[e])):b[e]=a[0]:a.length?"TOWGS84"===e?b[e]=a:(b[e]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(e)>-1?(b[e]={name:a[0].toLowerCase(),convert:a[1]},3===a.length&&(b[e].auth=a[2])):"SPHEROID"===e?(b[e]={name:a[0],a:a[1],rf:a[2]},4===a.length&&(b[e].auth=a[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(e)>-1?(a[0]=["name",a[0]],c(b,e,a)):a.every(function(a){return Array.isArray(a)})?c(b,e,a):d(a,b[e])):b[e]=!0,void 0):void(b[a]=!0)}function e(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function f(a){return a*h}function g(a){function b(b){var c=a.to_meter||1;return parseFloat(b,10)*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):a.projName="object"==typeof a.PROJECTION?Object.keys(a.PROJECTION)[0]:a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&(a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.datumCode=a.GEOGCS.DATUM?a.GEOGCS.DATUM.name.toLowerCase():a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===a.datumCode||"new_zealand_1949"===a.datumCode)&&(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);
var c=function(b){return e(a,b)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",f],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",f],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",f],["lat0","latitude_of_origin",f],["lat0","standard_parallel_1",f],["lat1","standard_parallel_1",f],["lat2","standard_parallel_2",f],["alpha","azimuth",f],["srsCode","name"]];d.forEach(c),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==a.PROJECTION||(a.long0=a.longc)}var h=.017453292519943295,i=a("./extend");b.exports=function(a,b){var c=JSON.parse((","+a).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]')),e=c.shift(),f=c.shift();c.unshift(["name",f]),c.unshift(["type",e]),c.unshift("output");var h={};return d(c,h),g(h.output),i(b,h.output)}},{"./extend":33}],66:[function(a,b,c){function d(a){return a*(Math.PI/180)}function e(a){return 180*(a/Math.PI)}function f(a){var b,c,e,f,g,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=d(m),s=d(n);l=Math.floor((n+180)/6)+1,180===n&&(l=60),m>=56&&64>m&&n>=3&&12>n&&(l=32),m>=72&&84>m&&(n>=0&&9>n?l=31:n>=9&&21>n?l=33:n>=21&&33>n?l=35:n>=33&&42>n&&(l=37)),b=6*(l-1)-180+3,k=d(b),c=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),g=c*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+g)*i*i*i/6+(5-18*f+f*f+72*g-58*c)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*g+4*g*g)*i*i*i*i/24+(61-58*f+f*f+600*g-330*c)*i*i*i*i*i*i/720));return 0>m&&(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:h(m)}}function g(a){var b=a.northing,c=a.easting,d=a.zoneLetter,f=a.zoneNumber;if(0>f||f>60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;"N">d&&(w-=1e7),o=6*(f-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=e(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+e(y);var z;if(a.accuracy){var A=g({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function h(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function i(a,b){var c=""+a.easting,d=""+a.northing;return a.zoneNumber+a.zoneLetter+j(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function j(a,b,c){var d=k(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return l(e,f,d)}function k(a){var b=a%q;return 0===b&&(b=q),b}function l(a,b,c){var d=c-1,e=r.charCodeAt(d),f=s.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>x&&(g=g-x+t-1,i=!0),(g===u||u>e&&g>u||(g>u||u>e)&&i)&&g++,(g===v||v>e&&g>v||(g>v||v>e)&&i)&&(g++,g===u&&g++),g>x&&(g=g-x+t-1),h>w?(h=h-w+t-1,i=!0):i=!1,(h===u||u>f&&h>u||(h>u||u>f)&&i)&&h++,(h===v||v>f&&h>v||(h>v||v>f)&&i)&&(h++,h===u&&h++),h>w&&(h=h-w+t-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function m(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=k(g),j=n(d.charAt(0),i),l=o(d.charAt(1),i);l<p(h);)l+=2e6;var m=c-f;if(m%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var q,r,s,t,u,v=m/2,w=0,x=0;return v>0&&(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+j,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function n(a,b){for(var c=r.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>x){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function o(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=s.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>w){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function p(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}var q=6,r="AJSAJS",s="AFAFAF",t=65,u=73,v=79,w=86,x=90;c.forward=function(a,b){return b=b||5,i(f({lat:a[1],lon:a[0]}),b)},c.inverse=function(a){var b=g(m(a.toUpperCase()));return[b.left,b.bottom,b.right,b.top]},c.toPoint=function(a){var b=c.inverse(a);return[(b[2]+b[0])/2,(b[3]+b[1])/2]}},{}],67:[function(a,b){b.exports={name:"proj4",version:"2.2.2",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~3.24.5","grunt-browserify":"~1.3.0","grunt-contrib-uglify":"~0.3.2",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"0.0.0"}}},{}],"./includedProjections":[function(a,b){b.exports=a("gWUPNW")},{}],gWUPNW:[function(a,b){var c=[a("./lib/projections/tmerc"),a("./lib/projections/utm"),a("./lib/projections/sterea"),a("./lib/projections/stere"),a("./lib/projections/somerc"),a("./lib/projections/omerc"),a("./lib/projections/lcc"),a("./lib/projections/krovak"),a("./lib/projections/cass"),a("./lib/projections/laea"),a("./lib/projections/aea"),a("./lib/projections/gnom"),a("./lib/projections/cea"),a("./lib/projections/eqc"),a("./lib/projections/poly"),a("./lib/projections/nzmg"),a("./lib/projections/mill"),a("./lib/projections/sinu"),a("./lib/projections/moll"),a("./lib/projections/eqdc"),a("./lib/projections/vandg"),a("./lib/projections/aeqd")];b.exports=function(proj4){c.forEach(function(a){proj4.Proj.projections.add(a)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)});
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.geojson2svg=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(){function explode(g){return multies.indexOf(g.type)>-1?g.coordinates.map(function(part){var single={};return single.type=g.type.replace("Multi",""),single.coordinates=part,g.crs&&(single.crs=g.crs),single}):!1}function implode(gs){var sameType=gs.every(function(g){return singles.indexOf(g.type)>-1}),crs=gs[0].crs||0,sameCrs=gs.every(function(g){var gcrs=g.crs||0;return gcrs==crs});if(sameType&&sameCrs){var multi={};return multi.type="Multi"+gs[0].type,multi.coordinates=[],0!=crs&&(multi.crs=crs),gs.forEach(function(g){multi.coordinates.push(g.coordinates)}),multi}return!1}var singles=["Point","LineString","Polygon"],multies=["MultiPoint","MultiLineString","MultiPolygon"],multigeojson={explode:explode,implode:implode};"undefined"!=typeof module&&module.exports?module.exports=multigeojson:window&&(window.multigeojson=multigeojson)}()},{}],2:[function(require,module,exports){function getCoordString(coords,res,origin){var coordStr=coords.map(function(coord){return(coord[0]-origin.x)/res+","+(origin.y-coord[1])/res});return coordStr.join(" ")}function point(geom,res,origin,opt){var r=opt&&opt.r?opt.r:1,pointAsCircle=opt&&opt.hasOwnProperty("pointAsCircle")?opt.pointAsCircle:!1,coords=getCoordString([geom.coordinates],res,origin);return pointAsCircle?[coords]:["M"+coords+" m"+-r+",0 a"+r+","+r+" 0 1,1 "+2*r+",0 a"+r+","+r+" 0 1,1 "+-2*r+",0"]}function multiPoint(geom,res,origin,opt){var explode=opt&&opt.hasOwnProperty("explode")?opt.explode:!1,paths=multi.explode(geom).map(function(single){return point(single,res,origin,opt)[0]});return explode?paths:[paths.join(" ")]}function lineString(geom,res,origin,otp){var coords=getCoordString(geom.coordinates,res,origin),path="M"+coords;return[path]}function multiLineString(geom,res,origin,opt){var explode=opt&&opt.hasOwnProperty("explode")?opt.explode:!1,paths=multi.explode(geom).map(function(single){return lineString(single,res,origin,opt)[0]});return explode?paths:[paths.join(" ")]}function polygon(geom,res,origin,opt){var mainStr,holes;mainStr=getCoordString(geom.coordinates[0],res,origin),geom.coordinates.length>1&&(holes=geom.coordinates.slice(1,geom.coordinates.length));var path="M"+mainStr;if(holes)for(var i=0;i<holes.length;i++)path+=" M"+getCoordString(holes[i],res,origin);return path+="Z",[path]}function multiPolygon(geom,res,origin,opt){var explode=opt.hasOwnProperty("explode")?opt.explode:!1,paths=multi.explode(geom).map(function(single){return polygon(single,res,origin,opt)[0]});return explode?paths:[paths.join(" ").replace(/Z/g,"")+"Z"]}var multi=require("multigeojson");module.exports={Point:point,MultiPoint:multiPoint,LineString:lineString,MultiLineString:multiLineString,Polygon:polygon,MultiPolygon:multiPolygon}},{multigeojson:1}],3:[function(require,module,exports){module.exports=function(a,b){var c={};return Object.keys(a).forEach(function(key){c[key]=a[key]}),Object.keys(b).forEach(function(key){c[key]=b[key]}),c}},{}],4:[function(require,module,exports){function pathToSvgJson(path,type,attributes,opt){var svg={},pointAsCircle=opt&&opt.hasOwnProperty("pointAsCircle")?opt.pointAsCircle:!1;"Point"!=type&&"MultiPoint"!=type||!pointAsCircle?(svg={d:path},("Polygon"==type||"MultiPolygon"==type)&&"evenodd"==svg["fill-rule"]):(svg.cx=path.split(",")[0],svg.cy=path.split(",")[1],svg.r=opt&&opt.r?opt.r:"1");for(var key in attributes)svg[key]=attributes[key];return svg}function jsonToSvgElement(json,type,opt){var pointAsCircle=opt&&opt.hasOwnProperty("pointAsCircle")?opt.pointAsCircle:!1,ele="<path";"Point"!=type&&"MultiPoint"!=type||!pointAsCircle||(ele="<circle");for(var key in json)ele+=" "+key+'="'+json[key]+'"';return ele+="/>"}function valueAt(obj,path){function index(prev,cur,i,arr){if(prev.hasOwnProperty(cur))return prev[cur];throw new Error(arr.slice(0,i+1).join(".")+" is not a valid property path")}return path.split(".").reduce(index,obj)}var extend=require("./extend.js"),converter=require("./converter.js"),g2svg=function(options){this.options=options||{},this.viewportSize=this.options.viewportSize||{width:256,height:256},this.mapExtent=this.options.mapExtent||{left:-20037508.342789244,right:20037508.342789244,bottom:-20037508.342789244,top:20037508.342789244},this.res=this.calResolution(this.mapExtent,this.viewportSize,this.options.fitTo)};g2svg.prototype.calResolution=function(extent,size,fitTo){var xres=(extent.right-extent.left)/size.width,yres=(extent.top-extent.bottom)/size.height;if(fitTo){if("width"===fitTo.toLowerCase())return xres;if("height"===fitTo.toLowerCase())return yres;throw new Error('"fitTo" option should be "width" or "height" ')}return Math.max(xres,yres)},g2svg.prototype.convert=function(geojson,options){var opt=extend(this.options,options||{}),svgElements=[];if("FeatureCollection"==geojson.type)for(var i=0;i<geojson.features.length;i++)svgElements=svgElements.concat(this.convertFeature(geojson.features[i],opt));else if("Feature"==geojson.type)svgElements=this.convertFeature(geojson,opt);else if("GeometryCollection"==geojson.type)for(var i=0;i<geojson.geometries.length;i++)svgElements=svgElements.concat(this.convertGeometry(geojson.geometries[i],opt));else{if(!converter[geojson.type])return;svgElements=this.convertGeometry(geojson,opt)}return opt.callback&&opt.callback.call(this,svgElements),svgElements},g2svg.prototype.convertFeature=function(feature,options){if(feature||feature.geometry){var opt=extend(this.options,options||{});if(opt.attributes&&opt.attributes instanceof Array){var arr=opt.attributes;opt.attributes=arr.reduce(function(sum,property){if("string"==typeof property){var val,key=property.split(".").pop();try{val=valueAt(feature,property)}catch(e){val=!1}val&&(sum[key]=val)}else if("object"==typeof property&&property.type&&property.property)if("dynamic"===property.type){var val,key=property.key?property.key:property.property.split(".").pop();try{val=valueAt(feature,property.property)}catch(e){val=!1}val&&(sum[key]=val)}else"static"===property.type&&property.value&&(sum[property.property]=property.value);return sum},{})}else opt.attributes=opt.attributes||{};var id=opt.attributes.id||feature.id||(feature.properties&&feature.properties.id?feature.properties.id:null);return id&&(opt.attributes.id=id),this.convertGeometry(feature.geometry,opt)}},g2svg.prototype.convertGeometry=function(geom,options){if(converter[geom.type]){var svgJsons,svgEles,opt=extend(this.options,options||{}),output=opt.output||"svg",paths=converter[geom.type].call(this,geom,this.res,{x:this.mapExtent.left,y:this.mapExtent.top},opt);return"svg"==output.toLowerCase()?(svgJsons=paths.map(function(path){return pathToSvgJson(path,geom.type,opt.attributes,opt)}),svgEles=svgJsons.map(function(json){return jsonToSvgElement(json,geom.type,opt)})):paths}},module.exports=g2svg},{"./converter.js":2,"./extend.js":3}],5:[function(require,module,exports){var g2svg=require("./instance.js"),geojson2svg=function(options){return new g2svg(options)};module.exports=geojson2svg},{"./instance.js":4}]},{},[5])(5)});

function getJSON(url, cb) {
    var xmlhttp = new XMLHttpRequest();
    var onError = window.ons.notification.alert.bind(window.ons.notification, {
        message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
    });

    xmlhttp.onreadystatechange = function () {
        if (this.readyState === 4) {
            if (this.status == 200) {
                var myArr = JSON.parse(this.responseText);
                cb(JSON.parse(this.responseText));
            }
        }
    };
    xmlhttp.onerror = onError;
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}


function _promise() {
    var done = false;
    var res = undefined;
    var cbs = [];
    var d = function(result) {
        done = true;
        res = result; 
        for(var i = 0; i < cbs.length; i++) cbs[i](result);
    }
    d.then = function(cb) {
        if (done) cb(res);
        else cbs.push(cb);
    }
    return d;
}


document.addEventListener("DOMContentLoaded", function (event) {
    var websiteTitle = document.title;
    if (window.ons.platform.isWebView() && window.history) {
        window.fn.navigator.addEventListener('postpush', function (e) {
            if (e.detail.enterPage.id === 'splitter') return;
            var title = e.detail.enterPage.querySelector('.toolbar__center').innerText;
            document.title = websiteTitle + ' - ' + title;
            window.history.pushState(null, document.title);
        });
        var historyAPI = true;
        window.fn.navigator.addEventListener('postpop', function (e) {
            historyAPI = !!e.detail.enterPage.data.historyAPI;
            if (!e.detail.enterPage.data.historyAPI) history.back();
        });
        window.addEventListener('popstate', function (e) {
            if (historyAPI) window.fn.navigator.popPage({ data: { historyAPI: true } });
            historyAPI = true;
        });
    }
});
var cordova_ready = false;

var isOnline = function () {

}, isOffline = function () {
	window.ons.notification.alert({
		message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
	});
};

window.ons.disableAutoStatusBarFill();

if (window.addEventListener) {
	/*
		Works well in Firefox and Opera with the 
		Work Offline option in the File menu.
		Pulling the ethernet cable doesn't seem to trigger it.
		Later Google Chrome and Safari seem to trigger it well
	*/
	window.addEventListener("online", isOnline, false);
	window.addEventListener("offline", isOffline, false);
}
else {
	/*
		Works in IE with the Work Offline option in the 
		File menu and pulling the ethernet cable
	*/
	document.body.ononline = isOnline;
	document.body.onoffline = isOffline;
}

document.addEventListener("resume", function () {
	if (navigator.onLine === false) {
		window.ons.notification.alert({
			message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
		});
	}
}, false)

document.addEventListener('init', function (event) {
	var page = event.target;

	if (page.id === 'splitter') {

	}

	if (page.id === 'map-page') {
		window.initMap(page);
	}

	else if (page.id === 'details') {
		window.initDetails(page);
	}

	else if (page.id === 'details-general') {
		window.initDetailsGeneral(page);
	}

	else if (page.id === 'details-panden') {
		window.initDetailsPanden(page);
	}

	else if (page.id === 'details-verblijfplaatsen') {
		window.initDetailsVerblijfsPlaatsen(page);
	}

	else if (page.id === 'details-misc') {
		window.initDetailsMisc(page);
	}

	else if (page.id === 'details-verblijfobject-detail') {
		window.initDetailsVerblijfObjectDetail(page);
	}

	else if (page.id === 'search-page') {
		window.initSearchPage(page);
	}
});

document.addEventListener("deviceready", function () {
	cordova_ready = true;
	if (cordova.platformId === 'browser') {
		document.body.appendChild(document.createElement('script')).src = './js/browser.js';
	}
	if (navigator.onLine === false) {
		window.ons.notification.alert({
			message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.n',
		});
	}
}, false);

window.fn = {};

window.fn.navigator = document.getElementById('navigator');

window.fn.open = function () {
	var menu = document.getElementById('menu');
	menu.open();
};

window.fn.load = function (page) {
	var content = document.getElementById('content');
	var menu = document.getElementById('menu');
	content.load(page)
		.then(menu.close.bind(menu));
};

window.fn.loadkaart = function() {
	if (window.fn.map && window.fn.layer) {
		if (window.fn.layerType === 'sat') {
			window.fn.layer.remove();
			loadKaart();
			document.getElementById('menu').close();
		}
	} else {
		window.fn.layerType = 'kaart';
		window.fn.load('views/map.html');
	}
}

window.fn.loadluchtfoto = function () {
	if (window.fn.map && window.fn.layer) {
		if (window.fn.layerType === 'kaart') {
			window.fn.layer.remove();
			loadSat();
			document.getElementById('menu').close();
		}
	} else {
		window.fn.layerType = 'sat';
		window.fn.load('views/map.html');
	}
};

(function () {
	var gemeenteCodes;
	var cbs = [];
	getJSON('data/gemeente-codes.json', function (codes) {
		gemeenteCodes = codes;
		for (var i = 0; i < cbs.length; i++) {
			cbs(codes);
		}
	});

	window.fn.getGemeenteCodes = function (cb) {
		if (gemeenteCodes) cb(gemeenteCodes);
		else cbs.push(cb);
	}
})();






function initMap(page) {

    var interacted = false;
    var zoomedLowEnough = false;
    var L = window.L;

    var map = window.fn.map = L.map('map', {
        zoomControl: false,
        maxZoom: 21,
        bounceAtZoomLimits: false,
    });
    L.control.zoom({
        position: 'topright',
    }).addTo(map);
    
    map.setView([53.232, 6.569], 16);

    if (window.fn.layerType === 'sat') loadSat();
    else loadKaart();

    L.tileLayer.wms('https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wms?', {
        layers: 'kadastralekaartv3:kadastralegrens,perceel',
        format: 'image/png',
        transparent: true,
        version: '1.0.0',
        attribution: "www.nationaalgeoregister.nl",
        maxZoom: 21,
        minZoom: 10
    }).addTo(map);

    var geoJson = L.geoJson(undefined, { onEachFeature: onEachFeature });
    geoJson.addTo(map);

    var geoJson2 = L.geoJson(undefined, { onEachFeature: onEachFeature2 });
    geoJson2.addTo(map);

    var city = window.fn.city;
    if (city) {
        window.fn.city = null;
        getJSON(city._links['city:item'].href, function (cityInfo) {
            var latLon = cityInfo.location.latlon;
            map.setView(new L.LatLng(latLon.latitude, latLon.longitude), 13);
        });
    } else {
        map.locate({ setView: true, maxZoom: 30 });
    }


    map.on("moveend", function () {
        var zoom = map.getZoom();
        interacted = true;
        var zoomPercentage = Math.max(0, 100 - Math.min(100, zoom / 17) * 100);
        document.getElementById('zoomlevel-progress').setAttribute('style', 'top: ' + zoomPercentage + '%');
        if (zoom < 17) {
            geoJson.clearLayers();
            return;
        }
        zoomedLowEnough = true;
    });

    map.on('click', function (e) {
        var latLong = e.latlng;
        showLocationOnMap(latLong);
    });


    //---------------------------------------------------------------------------------------------------------------------------------//

    function onEachFeature(feature, layer) {
        if (feature.properties) {
            var properties = [];
            if (feature.properties.kadastraleGemeenteCode)
                properties.push('Gemeente Code: ' + feature.properties.kadastraleGemeenteCode);
            if (feature.properties.type)
                properties.push('Type: ' + feature.properties.type || "")
            if (feature.properties.kadastralegrootte)
                properties.push('Kadastrale grootte: ' + feature.properties.kadastralegrootte + 'm<sup>2</sup>')
            if (feature.properties.logischtijdstipOntstaan)
                properties.push('Logisch tijdstip ontstaan: ' + (feature.properties.logischtijdstipOntstaan 
                    ? new Date(feature.properties.logischtijdstipOntstaan ).toLocaleDateString('nl-NL')
                    : 'Niet beschikbaar'));
            if (feature.properties.logischtijdstipVervallen)
                properties.push('Logisch tijdstip vervallen: ' + feature.properties.logischtijdstipVervallen || "")
            if (feature.properties.lokaalID)
                properties.push('LokaalID: ' + feature.properties.lokaalID || "");
            if (feature.properties.perceelnummer)
                properties.push('Perceel nummer: ' + feature.properties.perceelnummer || "")
            if (feature.properties.sectie)
                properties.push('Sectie: ' + feature.properties.sectie || "")

            var id = 'popup-details-' + Math.random().toString(36);
            properties.push('<br><ons-button id="' + id + '" class="button popup-details">Details</ons-button>');

            layer.on('add', function (e) {
                e.target.openPopup();
                var btn = document.getElementById(id);
                btn.addEventListener('click', function () {
                    document.getElementById('navigator').pushPage('views/details.html', {
                        data: {
                            feature: feature,
                        }
                    });
                });
            });

            layer.bindPopup(properties.join('<br>'));
        }

        if (feature.geometry_name === "plaatscoordinaten") {
            layer.on({
                click: highlightFeature
            });
        }
    }

    function onEachFeature2() {

    }

    function showLocationOnMap(latLong) {
        if (map.getZoom() < 17) {
            geoJson.clearLayers();
            return;
        }
        getJSON('https://epsg.io/trans?data=' + latLong.lng + ',' + latLong.lat + '&s_srs=4326&&t_srs=28992',
            function (res) {
                var espg28992 = res[0];
                var params = 'request=getFeature&';
                params += 'srsName=EPSG:4326&';
                params += 'version=2.0.0&';
                params += 'typenames=kadastralekaartv3:perceel&';
                params += 'outputFormat=application/json&';
                params += 'cql_filter=CONTAINS(begrenzingperceel%2CPOINT(' + espg28992.x + ' ' + espg28992.y + '))'
                getJSON('https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wfs?' + params, function (data) {
                    geoJson.clearLayers();
                    geoJson.addData(data.features);
                })
            });
    }

    var info = L.control();

    info.onAdd = function (map) {
        this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
        this.update();
        return this._div;
    };

    // method that we will use to update the control based on feature properties passed
    info.update = function (props) {
        var content = "";
        if (props) {
            content += "<h4>Eigenschappen:</h4>";
            for (var p in props) {
                content += ("<br />" + p + ": " + props[p]);
            }
        }
        else {
            this._div.innerHTML = "<br />Selecteer een perceel";
        }

        this._div.innerHTML = content;
    };

    info.addTo(map);

    var timeout = setTimeout(function () {
        if (zoomedLowEnough) return;
        window.ons.notification.toast('Zoom in om kadaster informatie te bekijken.', { timeout: 4000, animation: 'fall' });
    }, 6000);

    page.addEventListener('hide', function () {
        clearTimeout(timeout);
    })

    page.addEventListener('destroy', function () {
        map.eachLayer(function (layer) {
            layer.remove();
        });
        map.remove();
        window.fn.map = null;
        document.getElementById('map').parentElement.removeChild(document.getElementById('map'));
    });



    //---------------------------------------------------------------------------------------------------------------------------------//

    function highlightFeature(e) {

        resetHighlight(e);
        var target = geoJson2.addData(e.target.feature.properties.begrenzingperceel);

        map.fitBounds(target.getBounds());
        info.update(e.target.feature.properties);
    }

    function resetHighlight(e) {
        info.update();
        geoJson2.clearLayers();
    }
}

function loadKaart() {
    // load OpenStreetMap basemap
    var kaart = window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        format: 'image/png',
        transparent: true,
        zIndex: 0,
        maxNativeZoom: 19,
        maxZoom: 21,
    });
    window.fn.layerType = 'kaart';
    window.fn.layer = kaart;
    window.fn.map.addLayer(kaart);
}

function loadSat() {
    var googleSat = window.L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
        maxZoom: 21,
        maxNativeZoom: 19,
        zIndex: 0,
        subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
    });
    window.fn.layerType = 'sat';
    window.fn.layer = googleSat;
    window.fn.map.addLayer(googleSat);
}




(function () {

    var _proj4_proj_epsg4326 = new window.proj4.Proj('EPSG:4326');    //source coordinates will be in Longitude/Latitude, WGS84
    var _proj4_proj_epsg3785 = new window.proj4.Proj('EPSG:3785');

    var pandenPromise;
    var verblijfPlaatsenPromise;
    var ligPlaatsenPromise;
    var standPlaatsenPromise;
    var woonPlaatsenPromise;

    var feature;
    var geojson3857;
    var xMax;
    var xMin;
    var yMax;
    var yMin;
    var panden;
    var detailsPage;
    var verblijfsObjecten;
    var ligPlaatsen;
    var standPlaatsen;
    var woonpPlaatsen;
    var svgHTML;

    window.initDetailsMisc = function (page) {
        woonPlaatsenPromise.then(function () {
            ligPlaatsenPromise.then(function () {
                standPlaatsenPromise.then(function () {
                    setupDetailMiscPage(page);
                });
            });
        });
    }

    function setupDetailMiscPage(page) {
        var woonplaatsenList = document.getElementById('woonplaats-misc-list-item-container');
        var ligPlaatsenList = document.getElementById('ligplaatsen-misc-list-item-container');
        var standPlaatsenList = document.getElementById('standplaatsen-misc-list-item-container');

        woonpPlaatsen.features.forEach(function (feature) {
            var props = feature.properties;
            var listItem = document.createElement('div');
            listItem.innerHTML =
                '<ons-list-item><div class="left">' + props.woonplaats +
                '</div><div class="right"><small>' + feature.id.replace('.', ' ') + ', ' + 'Identificatie: ' + 'props.identificatie' +
                ', Status: ' + props.status + '</small></div></ons-list-item>';
            woonplaatsenList.appendChild(listItem);
        });

        if (woonpPlaatsen.features.length === 0) {
            woonplaatsenList.innerHTML =
                '<ons-list-item>Geen woonplaatsen gevonden</ons-list-item>';
        }

        ligPlaatsen.features.forEach(function (feature) {
            var props = feature.properties;
            var html = '<ons-list-item expandable>';
            html += feature.id.replace('.', ' ');
            html += '<div class="expandable-content">';
            html += '<div><b>Actualiteitsdatum:</b> ' + (props.actualiteitsdatum
                ? new Date(props.actualiteitsdatum).toLocaleDateString('nl-NL')
                : 'Niet beschikbaar') + '</div>';
            html += '<div><b>Huisletter</b> ' + (props.huisletter || '') + '</div>';
            html += '<div><b>Huisnummer:</b> ' + props.huisnummer + '</div>';
            html += '<div><b>Identificatie:</b> ' + props.identificatie + '</div>';
            html += '<div><b>Openbare ruimte:</b> ' + props.openbare_ruimte + '</div>';
            html += '<div><b>Postcode:</b> ' + props.postcode + '</div>';
            html += '<div><b>Status:</b> ' + props.status + '</div>';
            html += '<div><b>Toevoeging:</b> ' + (props.toevoeging || '') + '</div>';
            html += '<div><b>Woonplaats:</b> ' + props.woonplaats + '</div>';
            html += '</div></ons-list-item>';
            var div = document.createElement('div');
            div.innerHTML = html;
            ligPlaatsenList.appendChild(div);
        });

        if (ligPlaatsen.features.length === 0) {
            ligPlaatsenList.innerHTML =
                '<ons-list-item>Geen ligplaatsen gevonden</ons-list-item>';
        }

        standPlaatsen.features.forEach(function (feature) {
            var props = feature.properties;
            var html = '<ons-list-item expandable>';
            html += feature.id.replace('.', ' ');
            html += '<div class="expandable-content">';
            html += '<div><b>Actualiteitsdatum:</b> ' + (props.actualiteitsdatum
                ? new Date(props.actualiteitsdatum).toLocaleDateString('nl-NL')
                : 'Niet beschikbaar') + '</div>';
            html += '<div><b>Huisletter</b> ' + (props.huisletter || '') + '</div>';
            html += '<div><b>Huisnummer:</b> ' + props.huisnummer + '</div>';
            html += '<div><b>Identificatie:</b> ' + props.identificatie + '</div>';
            html += '<div><b>Openbare ruimte:</b> ' + props.openbare_ruimte + '</div>';
            html += '<div><b>Postcode:</b> ' + props.postcode + '</div>';
            html += '<div><b>Status:</b> ' + props.status + '</div>';
            html += '<div><b>Toevoeging:</b> ' + (props.toevoeging || '') + '</div>';
            html += '<div><b>Woonplaats:</b> ' + props.woonplaats + '</div>';
            html += '</div></ons-list-item>';
            var div = document.createElement('div');
            div.innerHTML = html;
            standPlaatsenList.appendChild(div);
        });

        if (standPlaatsen.features.length === 0) {
            standPlaatsenList.innerHTML =
                '<ons-list-item>Geen standplaatsen gevonden</ons-list-item>';
        }
    }

    window.initDetailsVerblijfObjectDetail = function (page) {
        var verblijfsobject = page.data.verblijfobject;
        var props = verblijfsobject.properties;

        document.getElementById('details-vo-actualiteitsdatum').innerText =
            props.actualiteitsdatum
                ? new Date(props.actualiteitsdatum).toLocaleDateString('nl-NL')
                : 'Niet beschikbaar';

        document.getElementById('details-vo-bouwjaar').innerText =
            props.bouwjaar || 'Niet beschikbaar';

        document.getElementById('details-vo-gebruiksdoel').innerText =
            props.gebruiksdoel || 'Niet beschikbaar';

        document.getElementById('details-vo-huisletter').innerText =
            props.huisletter || 'Niet van toepassing';

        document.getElementById('details-vo-huisnummer').innerText =
            props.huisnummer || 'Niet beschikbaar';

        document.getElementById('details-vo-identificatie').innerText =
            props.identificatie || 'Niet beschikbaar';

        document.getElementById('details-vo-openbare-ruimte').innerText =
            props.openbare_ruimte || 'Niet beschikbaar';

        document.getElementById('details-vo-oppervlakte').innerText =
            props.oppervlakte || 'Niet beschikbaar';

        document.getElementById('details-vo-pandidentificatie').innerText =
            props.pandidentificatie || 'Niet beschikbaar';

        document.getElementById('details-vo-pandstatus').innerText =
            props.pandstatus || 'Niet beschikbaar';

        document.getElementById('details-vo-postcode').innerText =
            props.postcode;

        document.getElementById('details-vo-status').innerText =
            props.status || 'Niet beschikbaar';

        document.getElementById('details-vo-toevoeging').innerText =
            props.toevoeging || 'Niet van toepassing';

        document.getElementById('details-vo-woonplaats').innerText =
            props.woonplaats;

    }

    window.initDetailsPanden = function (page) {
        pandenPromise.then(function () {
            var list = document.getElementById('details-panden-list-content');

            var html = '';
            for (var i = 0; i < panden.features.length; i++) {
                var props = panden.features[i].properties;
                html += '<ons-list-item expandable>';
                var paths = toSVGPathsArr(panden.features[i], 250, 250, {
                    'style': 'stroke:#660000; fill: #F0F8FF;stroke-width:0.5px;',
                    'vector-effect': 'non-scaling-stroke'
                });
                html += panden.features[i].id.replace('.', ' ');
                html += '<div class="expandable-content">';
                html += '<svg class="pand-svg" width="200" height="200" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg">';
                html += paths.join('');
                html += '</svg>';
                html += '<div><b>Oppervlakte (min):</b> ' + props.oppervlakte_min + 'm<sup>2</sub></div>';
                html += '<div><b>Oppervlakte (max):</b> ' + props.oppervlakte_max + 'm<sup>2</sub></div>';
                html += '<div><b>Actualiteitsdatum:</b> ' + (props.actualiteitsdatum || 'Niet beschikbaar') + '</div>';
                html += '<div><b>Gebruiksdoel:</b> ' + (props.gebruiksdoel || 'Niet beschikbaar/van toepassing') + '</div>';
                html += '<div><b>Bouwjaar:</b> ' + (props.bouwjaar || 'Niet beschikbaar') + '</div>';
                html += '<div><b>Identificatie:</b> ' + (props.identificatie || 'Niet beschikbaar') + '</div>';
                html += '<div><b>Status:</b> ' + (props.status || 'Niet beschikbaar') + '</div>';
                html += '</div></ons-list-item>';
            }
            if (panden.features.length === 0) {
                html += '<h3>Geen panden op dit perceel.</h3>'
            }
            var d = document.createElement('div');
            d.innerHTML = html;
            list.appendChild(d);
        });
    }

    window.initDetailsVerblijfsPlaatsen = function (page) {
        verblijfPlaatsenPromise.then(function () {
            var list = document.getElementById('details-verblijfplaatsen-list');
            for (var i = 0; i < verblijfsObjecten.features.length; i++) {
                (function () {
                    var verblijfobject = verblijfsObjecten.features[i];
                    var props = verblijfobject.properties;
                    var paths = toSVGPathsArr({ type: verblijfobject.type, geometry: props.pandgeometrie }, 250, 250, {
                        'style': 'stroke:#660000; fill: #F0F8FF;stroke-width:0.5px;',
                        'vector-effect': 'non-scaling-stroke'
                    });
                    var html = '<ons-list-item tappable>';
                    html += '<div class="left">'
                    html += '<svg class="pand-svg" width="40" height="40" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg">';
                    html += paths.join('');
                    html += '</svg></div>';
                    html += '<div class="center">';
                    html += [props.openbare_ruimte, props.huisnummer + props.huisletter + (props.toevoeging || '') + ',', props.postcode + ',', props.woonplaats].join(' ');
                    html += '</div></ons-list-item>';
                    var el = document.createElement('div');
                    el.innerHTML = html;
                    var featureClosure = verblijfsObjecten.features[i];
                    el.firstChild.addEventListener('click', function (e) {
                        document.getElementById('navigator').pushPage('views/details-verblijfobject-detail.html', {
                            data: { verblijfobject: verblijfobject }
                        });
                    });
                    list.appendChild(el.firstChild);
                })();

            }
            if (verblijfsObjecten.features.length === 0) {
                var el = document.createElement('h3');
                el.innerText = 'Geen verblijfplaatsen op dit perceel.';
                list.appendChild(el);
            }
        });
    }

    window.initDetailsGeneral = function initDetailsGeneral(page) {
        pandenPromise.then(function () {
            var detailsSvg = document.getElementById('details-svg');
            detailsSvg.innerHTML = svgHTML;

            window.fn.getGemeenteCodes(function (codes) {
                document.getElementById('gemeente').innerText =
                    codes[feature.properties.kadastraleGemeenteCode];
            });

            document.getElementById('gemeente-code').innerText =
                feature.properties.kadastraleGemeenteCode;

            document.getElementById('kadastrale-grootte').innerHTML =
                feature.properties.kadastralegrootte.toLocaleString() + 'm<sup>2</sub>';

            document.getElementById('logisch-ontstaan').innerText =
                new Date(feature.properties.logischtijdstipOntstaan)
                    .toLocaleDateString('nl-NL');

            if (feature.properties.logischtijdstipVervallen) {
                document.getElementById('logisch-vervallen').innerText =
                    new Date(feature.properties.logischtijdstipOntstaan)
                        .toLocaleDateString('nl-NL');
            } else {
                document.getElementById('logisch-vervallen').innerText =
                    'Niet van toepassing';
            }

            document.getElementById('perceel-nummer').innerText =
                feature.properties.perceelnummer

            document.getElementById('perceel-lon').innerText =
                feature.properties.plaatscoordinaten.coordinates[0];

            document.getElementById('perceel-lat').innerText =
                feature.properties.plaatscoordinaten.coordinates[1];

            var dms = convertDMS(feature.properties.plaatscoordinaten.coordinates[1], feature.properties.plaatscoordinaten.coordinates[0]);

            document.getElementById('perceel-lon-dms').innerText = dms[1];

            document.getElementById('perceel-lat-dms').innerText = dms[0];

            document.getElementById('perceel-sectie').innerText = feature.properties.sectie;
        });
    }


    window.initDetails = function initDetails(page) {
        detailsPage = page;
        pandenPromise = _promise();
        verblijfPlaatsenPromise = _promise();
        woonPlaatsenPromise = _promise();
        ligPlaatsenPromise = _promise();
        standPlaatsenPromise = _promise();

        feature = JSON.parse(JSON.stringify(page.data.feature));

        transformToEspg3857OnSpot(feature);
        var geojson3857 = feature;

        xMin = Infinity;
        xMax = -Infinity;
        yMin = Infinity;
        yMax = -Infinity;
        for (var i = 0; i < geojson3857.geometry.coordinates.length; i++) {
            for (var j = 0; j < geojson3857.geometry.coordinates[i].length; j++) {
                var x = geojson3857.geometry.coordinates[i][j][0],
                    y = geojson3857.geometry.coordinates[i][j][1];
                if (x < xMin) xMin = x;
                if (x > xMax) xMax = x;
                if (y < yMin) yMin = y;
                if (y > yMax) yMax = y;
            }
        }

        var geojson2svg_converter = window.geojson2svg({
            viewportSize: { width: 250, height: 250 },
            attributes: {
                'style': 'stroke:#006600; fill: #F0F8FF;stroke-width:0.5px;',
                'vector-effect': 'non-scaling-stroke'
            },
            mapExtent: {
                left: xMin,
                right: xMax,
                bottom: yMin,
                top: yMax
            },
        });

        var svgStrings = geojson2svg_converter.convert(geojson3857);

        svgHTML = svgStrings.join('');

        var verblijfsobjectenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'verblijfsobject', 'EPSG:3857')
        getJSON(verblijfsobjectenURL, function (vo) {
            verblijfsObjecten = vo;
            document.getElementById('details-verblijfplaatsen-tab').setAttribute('badge', vo.features.length);
            verblijfPlaatsenPromise();
        });

        var ligPlaatsenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'ligplaats', 'EPSG:3857');
        getJSON(ligPlaatsenURL, function (lp) {
            ligPlaatsen = lp;
            ligPlaatsenPromise();
        });

        var standPlaatsenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'standplaats', 'EPSG:3857');
        getJSON(standPlaatsenURL, function (lp) {
            standPlaatsen = lp;
            standPlaatsenPromise();
        });

        var woonPlaatsenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'woonplaats', 'EPSG:3857');
        getJSON(woonPlaatsenURL, function (wp) {
            woonpPlaatsen = wp;
            woonPlaatsenPromise();
        });

        var pandenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'pand', 'EPSG:3857');
        getJSON(pandenURL, function (p) {
            panden = p;
            var pandenSVG = geojson2svg_converter.convert(panden,
                {
                    attributes: {
                        'style': 'stroke:#660000; fill:transparent; stroke-width:0.5px;',
                        'vector-effect': 'non-scaling-stroke'
                    }
                });

            svgHTML += pandenSVG.join('');
            svgHTML += '<text x="120" y="120" transform="rotate(' + -feature.properties.perceelnummer_rotatie + ', 120, 120)">' + feature.properties.perceelnummer + '</text>';

            document.getElementById('details-panden-tab').setAttribute('badge', panden.features.length);
            pandenPromise();
        });
    }

    function toDegreesMinutesAndSeconds(coordinate) {
        var absolute = Math.abs(coordinate);
        var degrees = Math.floor(absolute);
        var minutesNotTruncated = (absolute - degrees) * 60;
        var minutes = Math.floor(minutesNotTruncated);
        var seconds = Math.floor((minutesNotTruncated - minutes) * 60);

        return degrees + "° " + minutes + "' " + seconds + '"';
    }

    function convertDMS(lat, lng) {
        var latitude = toDegreesMinutesAndSeconds(lat);
        var latitudeCardinal = Math.sign(lat) >= 0 ? "N" : "S";

        var longitude = toDegreesMinutesAndSeconds(lng);
        var longitudeCardinal = Math.sign(lng) >= 0 ? "E" : "W";

        return [latitude + " " + latitudeCardinal, longitude + " " + longitudeCardinal];
    }

    function getBagTypesURL(bbox, type, srs) {
        var options = 'request=getFeature';
        options += '&version=2.0.0';
        options += '&typenames=bag:' + type;
        options += '&srsName=' + srs;
        options += '&outputFormat=application/json';
        options += "&cql_filter=BBOX(geometrie, " + bbox.join(',') + ",'" + srs + "')";
        return 'https://geodata.nationaalgeoregister.nl/bag/wfs?' + options;
    }

    function getPerceelImageURL(perceelNummer, latLonBbox) {
        var options = 'request=GetMap';
        options += '&layers=perceel';
        options += '&styles=';
        options += '&format=image/png';
        options += '&transparent=true';
        options += '&version=1.3.0';
        options += '&width=256';
        options += '&height=256';
        options += '&crs=EPSG:28992';
        options += '&cql_filter=perceelnummer%20%3D%20' + perceelNummer;
        options += '&bbox=' + latLonBbox.join(',');
        return 'https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wms?' + options;
    }

    function toSVGPathsArr(geojson3857, vbwidth, vbheight, attributes) {
        xMin = Infinity;
        xMax = -Infinity;
        yMin = Infinity;
        yMax = -Infinity;
        var coordinates = geojson3857.geometry.coordinates;
        if (geojson3857.geometry.type !== "MultiPolygon") coordinates = [coordinates]
        for (var i = 0; i < coordinates.length; i++) {
            for (var j = 0; j < coordinates[i].length; j++) {
                for (var k = 0; k < coordinates[i][j].length; k++) {
                    var x = coordinates[i][j][k][0],
                        y = coordinates[i][j][k][1];
                    if (x < xMin) xMin = x;
                    if (x > xMax) xMax = x;
                    if (y < yMin) yMin = y;
                    if (y > yMax) yMax = y;
                }
            }
        }
        var geojson2svg_converter = window.geojson2svg({
            viewportSize: { width: 250, height: 250 },
            attributes: attributes,
            // attributes: {
            //     'style': 'stroke:#00ff00; fill: #F0F8FF;stroke-width:0.5px;',
            //     'vector-effect': 'non-scaling-stroke'
            // },
            mapExtent: {
                left: xMin,
                right: xMax,
                bottom: yMin,
                top: yMax
            },
        });
        return geojson2svg_converter.convert(geojson3857);
    }

    function transformToEspg3857OnSpot(feature) {
        for (var h = 0; h < feature.geometry.coordinates.length; h++) {
            var c2 = feature.geometry.coordinates[h];
            for (var i = 0; i < c2.length; i++) {
                var p = new window.proj4.Point(c2[i][0], c2[i][1]);   //any object will do as long as it has 'x' and 'y' properties
                window.proj4.transform(_proj4_proj_epsg4326, _proj4_proj_epsg3785, p);
                c2[i][0] = p.x;
                c2[i][1] = p.y;
            }
        }
    }

})();




function initSearchPage(page) {

    document.getElementById('location-search')
        .addEventListener('click', function (e) {
            var term = document.getElementById('location-search-input').value;
            getJSON('https://api.teleport.org/api/cities/?search=' + term, function (res) {
                var list = res._embedded['city:search-results'];
                var filtered = [];
                for (var i = 0; i < list.length; i++) {
                    if (list[i].matching_full_name.match(/netherlands$/i)) {
                        filtered.push(list[i])
                    }
                }
                handleSearch(filtered);
            });
        });

    function handleSearch(results) {
        var list = document.getElementById('location-search-results');
        while (list.firstChild) list.removeChild(list.firstChild);
        results.forEach(function (city) {
            var div = document.createElement('div');
            var cityName = city.matching_full_name.split(', ').slice(0, 2).join(', ');
            div.innerHTML =
                '<ons-list-item tappable>' + cityName + '</ons-list-item>';
            div.firstChild.addEventListener('click', function () {
                window.fn.city = city;
                window.fn.load('views/map.html')
            });
            list.appendChild(div.firstChild);
        });
        document.getElementById('location-search-card').setAttribute('class', '');
        if (results.length === 0) {
            list.innerHTML = '<ons-list-item>Geen resultaten</ons-list-item>';
        }
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9saWIvb25zZW51aS5taW4uanMiLCJzcmMvanMvbGliL2xlYWZsZXQuanMiLCJzcmMvanMvbGliL3Byb2o0LmpzIiwic3JjL2pzL2xpYi9nZW9qc29uMnN2Zy5qcyIsInNyYy9qcy9jb3JlLmpzIiwic3JjL2pzL3B3YS1oaXN0b3J5LmpzIiwic3JjL2pzL2luZGV4LmpzIiwic3JjL2pzL2thZGFzdGVyLW1hcC5qcyIsInNyYy9qcy9kZXRhaWxzLmpzIiwic3JjL2pzL3NlYXJjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUkE7QUFDQTtBQUNBO0FDRkE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdE9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3RkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIG9uc2VudWkgdjIuMTAuMSAtIDIwMTgtMDUtMjggKi9cbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGUpOnQub25zPWUoKX0odGhpcyxmdW5jdGlvbigpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7a3Quc2V0KHQsITApfWZ1bmN0aW9uIGUodCl7dmFyIGU9d3QuZ2V0KHQsW10pfHxbXTt3dC5kZWxldGUodCksZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KX1mdW5jdGlvbiBuKG4pe3ZhciBpPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe307aWYodm9pZCAwPT09a3QmJihrdD1uZXcgV2Vha01hcCx3dD1uZXcgV2Vha01hcCksZnVuY3Rpb24odCxlKXt3dC5oYXModCl8fHd0LnNldCh0LFtdKSx3dC5nZXQodCkucHVzaChlKX0obixpKSxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZE5vZGVzLmxlbmd0aD4wJiZ0KGUpLGt0LmhhcyhlKX0obikpZShuKTtlbHNle25ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGkpe3QobiksZShuKX0pLm9ic2VydmUobix7Y2hpbGRMaXN0OiEwLGNoYXJhY3RlckRhdGE6ITB9KSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXt0KG4pLGUobil9KX19ZnVuY3Rpb24gaSh0KXt0Ll9kZXN0cm95IGluc3RhbmNlb2YgRnVuY3Rpb24/dC5fZGVzdHJveSgpOnQucmVtb3ZlKCl9ZnVuY3Rpb24gbyh0LGUpe3JldHVybiBlPXtleHBvcnRzOnt9fSx0KGUsZS5leHBvcnRzKSxlLmV4cG9ydHN9ZnVuY3Rpb24gcih0KXt2YXIgZT1naS5oYXModCksbj0vXlthLXpdWy4wLTlfYS16XSotW1xcLS4wLTlfYS16XSokLy50ZXN0KHQpO3JldHVybiFlJiZufWZ1bmN0aW9uIGEodCl7dmFyIGU9dC5pc0Nvbm5lY3RlZDtpZih2b2lkIDAhPT1lKXJldHVybiBlO2Zvcih2YXIgbj10O24mJiEobi5fX0NFX2lzSW1wb3J0RG9jdW1lbnR8fG4gaW5zdGFuY2VvZiBEb2N1bWVudCk7KW49bi5wYXJlbnROb2RlfHwod2luZG93LlNoYWRvd1Jvb3QmJm4gaW5zdGFuY2VvZiBTaGFkb3dSb290P24uaG9zdDp2b2lkIDApO3JldHVybiEoIW58fCEobi5fX0NFX2lzSW1wb3J0RG9jdW1lbnR8fG4gaW5zdGFuY2VvZiBEb2N1bWVudCkpfWZ1bmN0aW9uIHModCxlKXtmb3IodmFyIG49ZTtuJiZuIT09dCYmIW4ubmV4dFNpYmxpbmc7KW49bi5wYXJlbnROb2RlO3JldHVybiBuJiZuIT09dD9uLm5leHRTaWJsaW5nOm51bGx9ZnVuY3Rpb24gbCh0LGUpe2Zvcih2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06bmV3IFNldCxpPXQ7aTspe2lmKGkubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIG89aTtlKG8pO3ZhciByPW8ubG9jYWxOYW1lO2lmKFwibGlua1wiPT09ciYmXCJpbXBvcnRcIj09PW8uZ2V0QXR0cmlidXRlKFwicmVsXCIpKXt2YXIgYT1vLmltcG9ydDtpZihhIGluc3RhbmNlb2YgTm9kZSYmIW4uaGFzKGEpKXtuLmFkZChhKTtmb3IodmFyIHU9YS5maXJzdENoaWxkO3U7dT11Lm5leHRTaWJsaW5nKWwodSxlLG4pfWk9cyh0LG8pO2NvbnRpbnVlfWlmKFwidGVtcGxhdGVcIj09PXIpe2k9cyh0LG8pO2NvbnRpbnVlfXZhciBjPW8uX19DRV9zaGFkb3dSb290O2lmKGMpZm9yKHZhciBoPWMuZmlyc3RDaGlsZDtoO2g9aC5uZXh0U2libGluZylsKGgsZSxuKX1pPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUuZmlyc3RDaGlsZD9lLmZpcnN0Q2hpbGQ6cyh0LGUpfSh0LGkpfX1mdW5jdGlvbiB1KHQsZSxuKXt0W2VdPW59dmFyIGM9e30saD1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcIlwiKSxlPShBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KS5qb2luKFwiXCIpLm1hdGNoKC8tKG1venx3ZWJraXR8bXMpLS8pfHxcIlwiPT09dC5PTGluayYmW1wiXCIsXCJvXCJdKVsxXTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuXCItXCIrZStcIi1cIitRLmh5cGhlbmF0ZSh0KX19KCksZD1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24gaW4gdC5zdHlsZT90LnN0eWxlW25dPWVbbl06aChuKWluIHQuc3R5bGU/dC5zdHlsZVtoKG4pXT1lW25dOlEud2FybihcIk5vIHN1Y2ggc3R5bGUgcHJvcGVydHk6IFwiK24pfSksdH07ZC5jbGVhcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9KGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIlwiKS5zcGxpdCgvXFxzKy8pLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiB0LmNvbmNhdChbUS5oeXBoZW5hdGUoZSksaChlKV0pfSxbXSksbj1bXSxpPXQuc3R5bGUubGVuZ3RoLTE7aT49MDtpLS0pIWZ1bmN0aW9uKGkpe3ZhciBvPXQuc3R5bGVbaV07KDA9PT1lLmxlbmd0aHx8ZS5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiAwPT09by5pbmRleE9mKHQpfSkpJiZuLnB1c2gobyl9KGkpO24uZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5zdHlsZVtlXT1cIlwifSksXCJcIj09PXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIikmJnQucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIil9O3ZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbih0KXtyZXR1cm4gdHlwZW9mIHR9OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJnQuY29uc3RydWN0b3I9PT1TeW1ib2wmJnQhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIHR9LHA9ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBlKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpfSxnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuZW51bWVyYWJsZT1pLmVudW1lcmFibGV8fCExLGkuY29uZmlndXJhYmxlPSEwLFwidmFsdWVcImluIGkmJihpLndyaXRhYmxlPSEwKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxpLmtleSxpKX19cmV0dXJuIGZ1bmN0aW9uKGUsbixpKXtyZXR1cm4gbiYmdChlLnByb3RvdHlwZSxuKSxpJiZ0KGUsaSksZX19KCksbT1mdW5jdGlvbih0LGUsbil7cmV0dXJuIGUgaW4gdD9PYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6dFtlXT1uLHR9LF89T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7dmFyIG49YXJndW1lbnRzW2VdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYodFtpXT1uW2ldKX1yZXR1cm4gdH0sdj1mdW5jdGlvbiB0KGUsbixpKXtudWxsPT09ZSYmKGU9RnVuY3Rpb24ucHJvdG90eXBlKTt2YXIgbz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsbik7aWYodm9pZCAwPT09byl7dmFyIHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO3JldHVybiBudWxsPT09cj92b2lkIDA6dChyLG4saSl9aWYoXCJ2YWx1ZVwiaW4gbylyZXR1cm4gby52YWx1ZTt2YXIgYT1vLmdldDtpZih2b2lkIDAhPT1hKXJldHVybiBhLmNhbGwoaSl9LGI9ZnVuY3Rpb24odCxlKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBlJiZudWxsIT09ZSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIit0eXBlb2YgZSk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShlJiZlLnByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOnQsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMCxjb25maWd1cmFibGU6ITB9fSksZSYmKE9iamVjdC5zZXRQcm90b3R5cGVPZj9PYmplY3Quc2V0UHJvdG90eXBlT2YodCxlKTp0Ll9fcHJvdG9fXz1lKX0seT1mdW5jdGlvbih0LGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0KWUuaW5kZXhPZihpKT49MHx8T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsaSkmJihuW2ldPXRbaV0pO3JldHVybiBufSxrPWZ1bmN0aW9uKHQsZSl7aWYoIXQpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpO3JldHVybiFlfHxcIm9iamVjdFwiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT90OmV9LHc9ZnVuY3Rpb24odCl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Zm9yKHZhciBlPTAsbj1BcnJheSh0Lmxlbmd0aCk7ZTx0Lmxlbmd0aDtlKyspbltlXT10W2VdO3JldHVybiBufXJldHVybiBBcnJheS5mcm9tKHQpfSxFPXdpbmRvdy5IVE1MRWxlbWVudCxDPW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKHRoaXMsdCksdGhpcy5fc2VsZWN0ZWRQbGF0Zm9ybT1udWxsLHRoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0PSExfXJldHVybiBnKHQsW3trZXk6XCJzZWxlY3RcIix2YWx1ZTpmdW5jdGlvbih0KXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHRoaXMuX3NlbGVjdGVkUGxhdGZvcm09dC50cmltKCkudG9Mb3dlckNhc2UoKSl9fSx7a2V5OlwiX2dldFNlbGVjdGVkUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZ25vcmVQbGF0Zm9ybVNlbGVjdD9udWxsOnRoaXMuX3NlbGVjdGVkUGxhdGZvcm19fSx7a2V5OlwiX3J1bk9uQWN0dWFsUGxhdGZvcm1cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9pZ25vcmVQbGF0Zm9ybVNlbGVjdD0hMDt2YXIgZT10KCk7cmV0dXJuIHRoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0PSExLGV9fSx7a2V5OlwiaXNXZWJWaWV3XCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihcImxvYWRpbmdcIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwidW5pbml0aWFsaXplZFwiPT1kb2N1bWVudC5yZWFkeVN0YXRlKXRocm93IG5ldyBFcnJvcihcImlzV2ViVmlldygpIG1ldGhvZCBpcyBhdmFpbGFibGUgYWZ0ZXIgZG9tIGNvbnRlbnRzIGxvYWRlZC5cIik7cmV0dXJuISEod2luZG93LmNvcmRvdmF8fHdpbmRvdy5waG9uZWdhcHx8d2luZG93LlBob25lR2FwKX19LHtrZXk6XCJpc0lQaG9uZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL2lQaG9uZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fSx7a2V5OlwiaXNJUGhvbmVYXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0lQaG9uZSgpJiYoMzc1PT09d2luZG93LnNjcmVlbi53aWR0aCYmODEyPT09d2luZG93LnNjcmVlbi5oZWlnaHR8fDgxMj09PXdpbmRvdy5zY3JlZW4ud2lkdGgmJjM3NT09PXdpbmRvdy5zY3JlZW4uaGVpZ2h0KX19LHtrZXk6XCJpc0lQYWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi9pUGFkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0lQb2RcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi9pUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0lPU1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cImlvc1wiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOlwib2JqZWN0XCIhPT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSl8fC9icm93c2VyL2kudGVzdChkZXZpY2UucGxhdGZvcm0pPy9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTovaU9TL2kudGVzdChkZXZpY2UucGxhdGZvcm0pfX0se2tleTpcImlzSU9TN2Fib3ZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihcIm9iamVjdFwiPT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpJiYhL2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSkpcmV0dXJuL2lPUy9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKSYmcGFyc2VJbnQoZGV2aWNlLnZlcnNpb24uc3BsaXQoXCIuXCIpWzBdKT49NztpZigvaVBob25lfGlQYWR8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe3ZhciB0PShuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9cXGJbMC05XStfWzAtOV0rKD86X1swLTldKyk/XFxiLyl8fFtcIlwiXSlbMF0ucmVwbGFjZSgvXy9nLFwiLlwiKTtyZXR1cm4gcGFyc2VJbnQodC5zcGxpdChcIi5cIilbMF0pPj03fXJldHVybiExfX0se2tleTpcImlzSU9TU2FmYXJpXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cubmF2aWdhdG9yLGU9dC51c2VyQWdlbnQ7cmV0dXJuISghdGhpcy5pc0lPUygpfHwtMT09PWUuaW5kZXhPZihcIlNhZmFyaVwiKXx8LTE9PT1lLmluZGV4T2YoXCJWZXJzaW9uXCIpfHx0LnN0YW5kYWxvbmUpfX0se2tleTpcImlzV0tXZWJWaWV3XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0vY29uc3RydWN0b3IvaS50ZXN0KEUpO3JldHVybiEoISh0aGlzLmlzSU9TKCkmJndpbmRvdy53ZWJraXQmJndpbmRvdy53ZWJraXQubWVzc2FnZUhhbmRsZXJzJiZ3aW5kb3cuaW5kZXhlZERCKXx8dCl9fSx7a2V5OlwiaXNVSVdlYlZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMuaXNJT1MoKXx8dGhpcy5pc0lPU1NhZmFyaSgpfHx0aGlzLmlzV0tXZWJWaWV3KCkpfX0se2tleTpcImlzQW5kcm9pZFBob25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4vQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJi9Nb2JpbGUvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfX0se2tleTpcImlzQW5kcm9pZFRhYmxldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL0FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhL01vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fSx7a2V5OlwiaXNBbmRyb2lkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiYW5kcm9pZFwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOi9BbmRyb2lkL2kudGVzdChcIm9iamVjdFwiIT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpfHwvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKT9uYXZpZ2F0b3IudXNlckFnZW50OmRldmljZS5wbGF0Zm9ybSl9fSx7a2V5OlwiaXNXUFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cIndwXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJvYmplY3RcIiE9PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKXx8L2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSk/L1dpbmRvd3MgUGhvbmV8SUVNb2JpbGV8V1BEZXNrdG9wL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTovV2luMzJOVHxXaW5DRS9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKX19LHtrZXk6XCJpc0JsYWNrQmVycnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJibGFja2JlcnJ5XCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJvYmplY3RcIiE9PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKXx8L2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSk/L0JsYWNrQmVycnl8UklNIFRhYmxldCBPU3xCQjEwL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTovQmxhY2tCZXJyeS9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKX19LHtrZXk6XCJpc09wZXJhXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wib3BlcmFcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTohIXdpbmRvdy5vcGVyYXx8bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiIE9QUi9cIik+PTB9fSx7a2V5OlwiaXNGaXJlZm94XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiZmlyZWZveFwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBJbnN0YWxsVHJpZ2dlcn19LHtrZXk6XCJpc1NhZmFyaVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cInNhZmFyaVwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cuSFRNTEVsZW1lbnQpLmluZGV4T2YoXCJDb25zdHJ1Y3RvclwiKT4wfHxcIltvYmplY3QgU2FmYXJpUmVtb3RlTm90aWZpY2F0aW9uXVwiPT09KCF3aW5kb3dbXCJzYWZhcmlcIl18fHNhZmFyaS5wdXNoTm90aWZpY2F0aW9uKS50b1N0cmluZygpfX0se2tleTpcImlzQ2hyb21lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiY2hyb21lXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6ISghd2luZG93LmNocm9tZXx8d2luZG93Lm9wZXJhfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgT1BSL1wiKT49MHx8bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiIEVkZ2UvXCIpPj0wKX19LHtrZXk6XCJpc0lFXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiaWVcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTohIWRvY3VtZW50LmRvY3VtZW50TW9kZX19LHtrZXk6XCJpc0VkZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJlZGdlXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiIEVkZ2UvXCIpPj0wfX0se2tleTpcImdldE1vYmlsZU9TXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0FuZHJvaWQoKT9cImFuZHJvaWRcIjp0aGlzLmlzSU9TKCk/XCJpb3NcIjp0aGlzLmlzV1AoKT9cIndwXCI6XCJvdGhlclwifX0se2tleTpcImdldElPU0RldmljZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNJUGhvbmUoKT9cImlwaG9uZVwiOnRoaXMuaXNJUGFkKCk/XCJpcGFkXCI6dGhpcy5pc0lQb2QoKT9cImlwb2RcIjpcIm5hXCJ9fV0pLHR9KCkpLEE9ZnVuY3Rpb24odCl7cmV0dXJuIFEudGhyb3coXCJJbiBQYWdlQXR0cmlidXRlRXhwcmVzc2lvbjogXCIrdCl9LFM9e192YXJpYWJsZXM6e30sZGVmaW5lVmFyaWFibGU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXSYmYXJndW1lbnRzWzJdO1wic3RyaW5nXCIhPXR5cGVvZiB0P0EoXCJWYXJpYWJsZSBuYW1lIG11c3QgYmUgYSBzdHJpbmdcIik6XCJzdHJpbmdcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGU/QShcIlZhcmlhYmxlIHZhbHVlIG11c3QgYmUgYSBzdHJpbmcgb3IgYSBmdW5jdGlvblwiKTp0aGlzLl92YXJpYWJsZXMuaGFzT3duUHJvcGVydHkodCkmJiFuJiZBKCdcIicrdCsnXCIgaXMgYWxyZWFkeSBkZWZpbmVkJyksdGhpcy5fdmFyaWFibGVzW3RdPWV9LGdldFZhcmlhYmxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl92YXJpYWJsZXMuaGFzT3duUHJvcGVydHkodCk/dGhpcy5fdmFyaWFibGVzW3RdOm51bGx9LHJlbW92ZVZhcmlhYmxlOmZ1bmN0aW9uKHQpe2RlbGV0ZSB0aGlzLl92YXJpYWJsZXNbdF19LGdldEFsbFZhcmlhYmxlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92YXJpYWJsZXN9LF9wYXJzZVBhcnQ6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLG49ITEsaT0wLG89W107MD09PXQubGVuZ3RoJiZBKFwiVW5hYmxlIHRvIHBhcnNlIGVtcHR5IHN0cmluZ1wiKTtmb3IodmFyIHI9MDtyPHQubGVuZ3RoO3IrKylpZihcIiRcIj09PShlPXQuY2hhckF0KHIpKSYmXCJ7XCI9PT10LmNoYXJBdChyKzEpKXtuJiZBKFwiTmVzdGVkIGludGVycG9sYXRpb24gbm90IHN1cHBvcnRlZFwiKTt0LnN1YnN0cmluZyhpLHIpLmxlbmd0aD4wJiZvLnB1c2godC5zdWJzdHJpbmcoaSxyKSksaT1yLG49ITB9ZWxzZSBpZihcIn1cIj09PWUpe258fEEoXCJ9IG11c3QgYmUgcHJlY2VlZGVkIGJ5ICR7XCIpO3Quc3Vic3RyaW5nKGkscisxKS5sZW5ndGg+MCYmby5wdXNoKHQuc3Vic3RyaW5nKGkscisxKSksaT1yKzEsbj0hMX1yZXR1cm4gbiYmQShcIlVudGVybWluYXRlZCBpbnRlcnBvbGF0aW9uXCIpLG8ucHVzaCh0LnN1YnN0cmluZyhpLHQubGVuZ3RoKSksb30sX3JlcGxhY2VUb2tlbjpmdW5jdGlvbih0KXt2YXIgZT10Lm1hdGNoKC9eXFwkeyguKj8pfSQvKTtpZighZSlyZXR1cm4gdDt2YXIgbj1lWzFdLnRyaW0oKSxpPXRoaXMuZ2V0VmFyaWFibGUobik7aWYobnVsbCE9PWkpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpKXJldHVybiBpO3ZhciBvPWkoKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgbyYmQShcIk11c3QgcmV0dXJuIGEgc3RyaW5nXCIpLG99QSgnVmFyaWFibGUgXCInK24rJ1wiIGRvZXMgbm90IGV4aXN0Jyl9LF9yZXBsYWNlVG9rZW5zOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm1hcCh0aGlzLl9yZXBsYWNlVG9rZW4uYmluZCh0aGlzKSl9LF9wYXJzZUV4cHJlc3Npb246ZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltKCl9KS5tYXAodGhpcy5fcGFyc2VQYXJ0LmJpbmQodGhpcykpLm1hcCh0aGlzLl9yZXBsYWNlVG9rZW5zLmJpbmQodGhpcykpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5qb2luKFwiXCIpfSl9LGV2YWx1YXRlOmZ1bmN0aW9uKHQpe3JldHVybiB0P3RoaXMuX3BhcnNlRXhwcmVzc2lvbih0KTpbXX19O1MuZGVmaW5lVmFyaWFibGUoXCJtb2JpbGVPU1wiLEMuZ2V0TW9iaWxlT1MoKSksUy5kZWZpbmVWYXJpYWJsZShcImlPU0RldmljZVwiLEMuZ2V0SU9TRGV2aWNlKCkpLFMuZGVmaW5lVmFyaWFibGUoXCJydW50aW1lXCIsZnVuY3Rpb24oKXtyZXR1cm4gQy5pc1dlYlZpZXcoKT9cImNvcmRvdmFcIjpcImJyb3dzZXJcIn0pO3ZhciBQPXt9O1AuY29uZmlnPXthdXRvU3RhdHVzQmFyRmlsbDohMCxhbmltYXRpb25zRGlzYWJsZWQ6ITEsd2FybmluZ3NEaXNhYmxlZDohMX0sUC5udWxsRWxlbWVudD13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxQLmlzRW5hYmxlZEF1dG9TdGF0dXNCYXJGaWxsPWZ1bmN0aW9uKCl7cmV0dXJuISFQLmNvbmZpZy5hdXRvU3RhdHVzQmFyRmlsbH0sUC5ub3JtYWxpemVQYWdlSFRNTD1mdW5jdGlvbih0KXtyZXR1cm4oXCJcIit0KS50cmltKCl9LFAud2FpdERPTUNvbnRlbnRMb2FkZWQ9ZnVuY3Rpb24odCl7aWYoXCJsb2FkaW5nXCI9PT13aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZXx8XCJ1bmluaXRpYWxpemVkXCI9PXdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlKXt3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbiBlKCl7dCgpLHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGUpfSl9ZWxzZSBzZXRJbW1lZGlhdGUodCl9LFAuYXV0b1N0YXR1c0JhckZpbGw9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24gZSgpe1Auc2hvdWxkRmlsbFN0YXR1c0JhcigpJiZ0KCksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZSl9O1wib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSk/ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZSk6LTE9PT1bXCJjb21wbGV0ZVwiLFwiaW50ZXJhY3RpdmVcIl0uaW5kZXhPZihkb2N1bWVudC5yZWFkeVN0YXRlKT9QLndhaXRET01Db250ZW50TG9hZGVkKGUpOmUoKX0sUC5zaG91bGRGaWxsU3RhdHVzQmFyPWZ1bmN0aW9uKCl7cmV0dXJuIFAuaXNFbmFibGVkQXV0b1N0YXR1c0JhckZpbGwoKSYmKEMuaXNXZWJWaWV3KCkmJkMuaXNJT1M3YWJvdmUoKSYmIUMuaXNJUGhvbmVYKCl8fGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcihcIi5vbnMtc3RhdHVzLWJhci1tb2NrLmlvc1wiKSl9LFAudGVtcGxhdGVTdG9yZT17X3N0b3JhZ2U6e30sZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiBQLnRlbXBsYXRlU3RvcmUuX3N0b3JhZ2VbdF18fG51bGx9LHNldDpmdW5jdGlvbih0LGUpe1AudGVtcGxhdGVTdG9yZS5fc3RvcmFnZVt0XT1lfX0sd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJfdGVtcGxhdGVsb2FkZWRcIixmdW5jdGlvbih0KXtcIm9ucy10ZW1wbGF0ZVwiPT09dC50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmUC50ZW1wbGF0ZVN0b3JlLnNldCh0LnRlbXBsYXRlSWQsdC50ZW1wbGF0ZSl9LCExKSxQLndhaXRET01Db250ZW50TG9hZGVkKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXtmb3IodmFyIGU9d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodCksbj0wO248ZS5sZW5ndGg7bisrKVAudGVtcGxhdGVTdG9yZS5zZXQoZVtuXS5nZXRBdHRyaWJ1dGUoXCJpZFwiKSxlW25dLnRleHRDb250ZW50fHxlW25dLmNvbnRlbnQpfXQoJ3NjcmlwdFt0eXBlPVwidGV4dC9vbnMtdGVtcGxhdGVcIl0nKSx0KCdzY3JpcHRbdHlwZT1cInRleHQvdGVtcGxhdGVcIl0nKSx0KCdzY3JpcHRbdHlwZT1cInRleHQvbmctdGVtcGxhdGVcIl0nKSx0KFwidGVtcGxhdGVcIil9KSxQLmdldFRlbXBsYXRlSFRNTEFzeW5jPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlLG4pe1Aud2FpdERPTUNvbnRlbnRMb2FkZWQoZnVuY3Rpb24oKXt2YXIgaT1QLnRlbXBsYXRlU3RvcmUuZ2V0KHQpO2lmKGkpe2lmKGkgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXJldHVybiBlKGkpO3ZhciBvPVwic3RyaW5nXCI9PXR5cGVvZiBpP2k6aVsxXTtyZXR1cm4gZShQLm5vcm1hbGl6ZVBhZ2VIVE1MKG8pKX12YXIgcj13aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCk7aWYocil7dmFyIGE9ci50ZXh0Q29udGVudHx8ci5jb250ZW50O3JldHVybiBlKGEpfXZhciBzPW5ldyBYTUxIdHRwUmVxdWVzdDtzLm9wZW4oXCJHRVRcIix0LCEwKSxzLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBpPXMucmVzcG9uc2VUZXh0O2lmKHMuc3RhdHVzPj00MDAmJnMuc3RhdHVzPDYwMCluKGkpO2Vsc2V7dmFyIG89US5jcmVhdGVGcmFnbWVudChpKTtRLmFycmF5RnJvbShvLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzY3JpcHRcIikpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtlLnR5cGU9dC50eXBlfHxcInRleHQvamF2YXNjcmlwdFwiLGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodC50ZXh0fHx0LnRleHRDb250ZW50fHx0LmlubmVySFRNTCkpLHQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZSx0KX0pLFAudGVtcGxhdGVTdG9yZS5zZXQodCxvKSxlKG8pfX0scy5vbmVycm9yPWZ1bmN0aW9uKCl7US50aHJvdyhcIlBhZ2UgdGVtcGxhdGUgbm90IGZvdW5kOiBcIit0KX0scy5zZW5kKG51bGwpfSl9KX0sUC5nZXRQYWdlSFRNTEFzeW5jPWZ1bmN0aW9uKHQpe3ZhciBlPVMuZXZhbHVhdGUodCk7cmV0dXJuIGZ1bmN0aW9uIHQobil7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIG4/UHJvbWlzZS5yZWplY3QoXCJNdXN0IHNwZWNpZnkgYSBwYWdlLlwiKTpQLmdldFRlbXBsYXRlSFRNTEFzeW5jKG4pLmNhdGNoKGZ1bmN0aW9uKG4pe3JldHVybiAwPT09ZS5sZW5ndGg/UHJvbWlzZS5yZWplY3Qobik6dChlLnNoaWZ0KCkpfSl9KGUuc2hpZnQoKSl9O3ZhciBPPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXtwKHRoaXMsdCksdGhpcy5fYW5pbWF0b3JzPWUuYW5pbWF0b3JzLHRoaXMuX2Jhc2VDbGFzcz1lLmJhc2VDbGFzcyx0aGlzLl9iYXNlQ2xhc3NOYW1lPWUuYmFzZUNsYXNzTmFtZXx8ZS5iYXNlQ2xhc3MubmFtZSx0aGlzLl9hbmltYXRpb249ZS5kZWZhdWx0QW5pbWF0aW9ufHxcImRlZmF1bHRcIix0aGlzLl9hbmltYXRpb25PcHRpb25zPWUuZGVmYXVsdEFuaW1hdGlvbk9wdGlvbnN8fHt9LHRoaXMuX2FuaW1hdG9yc1t0aGlzLl9hbmltYXRpb25dfHxRLnRocm93KFwiTm8gc3VjaCBhbmltYXRpb246IFwiK3RoaXMuX2FuaW1hdGlvbil9cmV0dXJuIGcodCxbe2tleTpcInNldEFuaW1hdGlvbk9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9hbmltYXRpb25PcHRpb25zPXR9fSx7a2V5OlwibmV3QW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxlPWFyZ3VtZW50c1sxXSxuPW51bGw7aWYodC5hbmltYXRpb24gaW5zdGFuY2VvZiB0aGlzLl9iYXNlQ2xhc3MpcmV0dXJuIHQuYW5pbWF0aW9uO3ZhciBpPW51bGw7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQuYW5pbWF0aW9uJiYoaT10aGlzLl9hbmltYXRvcnNbdC5hbmltYXRpb25dKSwhaSYmZSluPWU7ZWxzZXtpPWl8fHRoaXMuX2FuaW1hdG9yc1t0aGlzLl9hbmltYXRpb25dO3ZhciBvPVEuZXh0ZW5kKHt9LHRoaXMuX2FuaW1hdGlvbk9wdGlvbnMsdC5hbmltYXRpb25PcHRpb25zfHx7fSxQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ/e2R1cmF0aW9uOjAsZGVsYXk6MH06e30pO1wiZnVuY3Rpb25cIj09dHlwZW9mKG49bmV3IGkobykpJiYobj1uZXcgbihvKSl9cmV0dXJuIG4gaW5zdGFuY2VvZiB0aGlzLl9iYXNlQ2xhc3N8fFEudGhyb3coJ1wiYW5pbWF0b3JcIiBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgJyt0aGlzLl9iYXNlQ2xhc3NOYW1lKSxufX1dLFt7a2V5OlwicGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nXCIsdmFsdWU6ZnVuY3Rpb24odCl7dHJ5e2lmKFwic3RyaW5nXCI9PXR5cGVvZiB0KXt2YXIgZT1RLmFuaW1hdGlvbk9wdGlvbnNQYXJzZSh0KTtpZihcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpmKGUpKSYmbnVsbCE9PWUpcmV0dXJuIGU7Y29uc29sZS5lcnJvcignXCJhbmltYXRpb24tb3B0aW9uc1wiIGF0dHJpYnV0ZSBtdXN0IGJlIGEgSlNPTiBvYmplY3Qgc3RyaW5nOiAnK3QpfXJldHVybnt9fWNhdGNoKGUpe3JldHVybiBjb25zb2xlLmVycm9yKCdcImFuaW1hdGlvbi1vcHRpb25zXCIgYXR0cmlidXRlIG11c3QgYmUgYSBKU09OIG9iamVjdCBzdHJpbmc6ICcrdCkse319fX1dKSx0fSgpLHg9ITAsVD17cXVpZXQ6XCJtYXRlcmlhbC0tZmxhdFwiLGxpZ2h0OlwibWF0ZXJpYWwtLWZsYXRcIixvdXRsaW5lOlwibWF0ZXJpYWwtLWZsYXRcIixjdGE6XCJcIixcImxhcmdlLS1xdWlldFwiOlwibWF0ZXJpYWwtLWZsYXQgbGFyZ2VcIixcImxhcmdlLS1jdGFcIjpcImxhcmdlXCIsbm9ib3JkZXI6XCJcIix0YXBwYWJsZTpcIlwifSxMPXt9O0wuYW5kcm9pZD1mdW5jdGlvbih0KXt2YXIgZT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZighUS5oYXNNb2RpZmllcih0LFwibWF0ZXJpYWxcIikpe3ZhciBuPSh0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpfHxcIlwiKS50cmltKCkuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIFQuaGFzT3duUHJvcGVydHkodCk/VFt0XTp0fSk7bi51bnNoaWZ0KFwibWF0ZXJpYWxcIiksdC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLG4uam9pbihcIiBcIikudHJpbSgpKX0tMT09PVtcIm9ucy1hbGVydC1kaWFsb2ctYnV0dG9uXCIsXCJvbnMtdG9vbGJhci1idXR0b25cIixcIm9ucy1iYWNrLWJ1dHRvblwiLFwib25zLWJ1dHRvblwiLFwib25zLWxpc3QtaXRlbVwiLFwib25zLWZhYlwiLFwib25zLXNwZWVkLWRpYWxcIixcIm9ucy1zcGVlZC1kaWFsLWl0ZW1cIixcIm9ucy10YWJcIl0uaW5kZXhPZihlKXx8dC5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIil8fHQucXVlcnlTZWxlY3RvcihcIm9ucy1yaXBwbGVcIil8fChcIm9ucy1saXN0LWl0ZW1cIj09PWU/dC5oYXNBdHRyaWJ1dGUoXCJ0YXBwYWJsZVwiKSYmKHQuc2V0QXR0cmlidXRlKFwicmlwcGxlXCIsXCJcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJ0YXBwYWJsZVwiKSk6dC5zZXRBdHRyaWJ1dGUoXCJyaXBwbGVcIixcIlwiKSl9LEwuaW9zPWZ1bmN0aW9uKHQpe1EucmVtb3ZlTW9kaWZpZXIodCxcIm1hdGVyaWFsXCIpJiYoUS5yZW1vdmVNb2RpZmllcih0LFwibWF0ZXJpYWwtLWZsYXRcIikmJlEuYWRkTW9kaWZpZXIodCxRLnJlbW92ZU1vZGlmaWVyKHQsXCJsYXJnZVwiKT9cImxhcmdlLS1xdWlldFwiOlwicXVpZXRcIiksdC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8dC5yZW1vdmVBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSksdC5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIikmJihcIm9ucy1saXN0LWl0ZW1cIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZ0LnNldEF0dHJpYnV0ZShcInRhcHBhYmxlXCIsXCJcIiksdC5yZW1vdmVBdHRyaWJ1dGUoXCJyaXBwbGVcIikpfTt2YXIgTT17YW5kcm9pZDohMH0sRD1mdW5jdGlvbih0LGUpe2lmKHgmJiF0Lmhhc0F0dHJpYnV0ZShcImRpc2FibGUtYXV0by1zdHlsaW5nXCIpKXt2YXIgbj1DLmdldE1vYmlsZU9TKCk7aWYoTC5oYXNPd25Qcm9wZXJ0eShuKSYmKE0uaGFzT3duUHJvcGVydHkobil8fGUpKXJldHVybiBufXJldHVybiBudWxsfSxJPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gRChlLG4pP3Quc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIFQuaGFzT3duUHJvcGVydHkodCk/VFt0XTp0fSkuam9pbihcIiBcIik6dH0sTj17aXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHh9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB4PSEwfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHg9ITF9LHByZXBhcmU6ZnVuY3Rpb24odCxlKXt2YXIgbj1EKHQsZSk7biYmTFtuXSh0KX0sbWFwTW9kaWZpZXI6SSxnZXRQbGF0Zm9ybTpELHJlc3RvcmVNb2RpZmllcjpmdW5jdGlvbih0KXtpZihcImFuZHJvaWRcIj09PUQodCkpe3ZhciBlPXQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIsbj1JKGUsdCk7aWYoLyhefFxccyspbWF0ZXJpYWwoJHxcXHMrKS9pLnRlc3QoZSl8fChuPVwibWF0ZXJpYWwgXCIrbiksbiE9PWUpcmV0dXJuIHQuc2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIixuLnRyaW0oKSksITB9cmV0dXJuITF9fSxCPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KX1yZXR1cm4gZyh0LG51bGwsW3trZXk6XCJkaWZmXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiBpKGUpe3ZhciBuPXt9O3JldHVybiB0LnNwbGl0KGUpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG5bdF09dH0pLG59ZT1pKChcIlwiK2UpLnRyaW0oKSksbj1pKChcIlwiK24pLnRyaW0oKSk7dmFyIG89T2JqZWN0LmtleXMoZSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5bZV18fHQucHVzaChlKSx0fSxbXSk7cmV0dXJue2FkZGVkOk9iamVjdC5rZXlzKG4pLnJlZHVjZShmdW5jdGlvbih0LG4pe3JldHVybiBlW25dfHx0LnB1c2gobiksdH0sW10pLHJlbW92ZWQ6b319fSx7a2V5OlwiYXBwbHlEaWZmVG9DbGFzc0xpc3RcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dC5hZGRlZC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4ucmVwbGFjZSgvXFwqL2csdCl9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5hZGQodCl9KX0pLHQucmVtb3ZlZC5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIG4ucmVwbGFjZSgvXFwqL2csdCl9KS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZS5yZW1vdmUodCl9KX0pfX0se2tleTpcImFwcGx5RGlmZlRvRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKGUsbixpKXtPYmplY3Qua2V5cyhpKS5mb3JFYWNoKGZ1bmN0aW9uKG8pe2Zvcih2YXIgcj0hb3x8US5tYXRjaChuLG8pP1tuXTpBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwobi5xdWVyeVNlbGVjdG9yQWxsKG8pLGZ1bmN0aW9uKHQpe3JldHVybiFRLmZpbmRQYXJlbnQodCxuLnRhZ05hbWUsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1ufSl9KSxhPTA7YTxyLmxlbmd0aDthKyspdC5hcHBseURpZmZUb0NsYXNzTGlzdChlLHJbYV0uY2xhc3NMaXN0LGlbb10pfSl9fSx7a2V5Olwib25Nb2RpZmllckNoYW5nZWRcIix2YWx1ZTpmdW5jdGlvbihlLG4saSxvKXt0LmFwcGx5RGlmZlRvRWxlbWVudCh0LmRpZmYoZSxuKSxpLG8pLE4ucmVzdG9yZU1vZGlmaWVyKGkpfX0se2tleTpcInJlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbihlLG4pe3QuYXBwbHlEaWZmVG9FbGVtZW50KHQuZGlmZihcIlwiLGUuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIpLGUsbil9fSx7a2V5OlwiaW5pdE1vZGlmaWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXt2YXIgaT1lLmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpO1wic3RyaW5nXCI9PXR5cGVvZiBpJiZ0LmFwcGx5RGlmZlRvRWxlbWVudCh7cmVtb3ZlZDpbXSxhZGRlZDp0LnNwbGl0KGkpfSxlLG4pfX0se2tleTpcInNwbGl0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQ/W106dC50cmltKCkuc3BsaXQoLyArLykuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVyblwiXCIhPT10fSl9fSx7a2V5OlwiYWRkTW9kaWZpZXJcIix2YWx1ZTpmdW5jdGlvbihlLG4pe2lmKGUuaGFzQXR0cmlidXRlKFwibW9kaWZpZXJcIikpe3ZhciBpPXQuc3BsaXQoZS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSk7LTE9PWkuaW5kZXhPZihuKSYmKGkucHVzaChuKSxlLnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsaS5qb2luKFwiIFwiKSkpfWVsc2UgZS5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLG4pfX0se2tleTpcInJlbW92ZU1vZGlmaWVyXCIsdmFsdWU6ZnVuY3Rpb24oZSxuKXtpZihlLmhhc0F0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKXt2YXIgaT10LnNwbGl0KGUuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIikpLG89aS5pbmRleE9mKG4pOy0xIT09byYmKGkuc3BsaWNlKG8sMSksZS5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLGkuam9pbihcIiBcIikpKX19fV0pLHR9KCksaj17X3JlYWR5OiExLF9kb21Db250ZW50TG9hZGVkOiExLF9vbkRPTUNvbnRlbnRMb2FkZWQ6ZnVuY3Rpb24oKXtqLl9kb21Db250ZW50TG9hZGVkPSEwLEMuaXNXZWJWaWV3KCk/d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7ai5fcmVhZHk9ITB9LCExKTpqLl9yZWFkeT0hMH0sYWRkQmFja0J1dHRvbkxpc3RlbmVyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9kb21Db250ZW50TG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBhZnRlciBET01Db250ZW50TG9hZGVkXCIpO3RoaXMuX3JlYWR5P3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpOndpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixmdW5jdGlvbigpe3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpfSl9LHJlbW92ZUJhY2tCdXR0b25MaXN0ZW5lcjpmdW5jdGlvbih0KXtpZighdGhpcy5fZG9tQ29udGVudExvYWRlZCl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIG1ldGhvZCBpcyBhdmFpbGFibGUgYWZ0ZXIgRE9NQ29udGVudExvYWRlZFwiKTt0aGlzLl9yZWFkeT93aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJhY2tidXR0b25cIix0LCExKTp3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZnVuY3Rpb24oKXt3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJhY2tidXR0b25cIix0LCExKX0pfX07d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtyZXR1cm4gai5fb25ET01Db250ZW50TG9hZGVkKCl9LCExKTt2YXIgSD17X3N0b3JlOnt9LF9nZW5JZDpmdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQrK319KCksc2V0OmZ1bmN0aW9uKHQsZSl7dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQmJnRoaXMucmVtb3ZlKHQpO3ZhciBuPXQuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkPUguX2dlbklkKCk7dGhpcy5fc3RvcmVbbl09ZX0scmVtb3ZlOmZ1bmN0aW9uKHQpe3QuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkJiYoZGVsZXRlIHRoaXMuX3N0b3JlW3QuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkXSxkZWxldGUgdC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQpfSxnZXQ6ZnVuY3Rpb24odCl7aWYodC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQpe3ZhciBlPXQuZGF0YXNldC5kZXZpY2VCYWNrQnV0dG9uSGFuZGxlcklkO2lmKCF0aGlzLl9zdG9yZVtlXSl0aHJvdyBuZXcgRXJyb3I7cmV0dXJuIHRoaXMuX3N0b3JlW2VdfX0saGFzOmZ1bmN0aW9uKHQpe2lmKCF0LmRhdGFzZXQpcmV0dXJuITE7dmFyIGU9dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQ7cmV0dXJuISF0aGlzLl9zdG9yZVtlXX19LFI9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9pc0VuYWJsZWQ9ITEsdGhpcy5fYm91bmRDYWxsYmFjaz10aGlzLl9jYWxsYmFjay5iaW5kKHRoaXMpfXJldHVybiBnKHQsW3trZXk6XCJlbmFibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzRW5hYmxlZHx8KGouYWRkQmFja0J1dHRvbkxpc3RlbmVyKHRoaXMuX2JvdW5kQ2FsbGJhY2spLHRoaXMuX2lzRW5hYmxlZD0hMCl9fSx7a2V5OlwiZGlzYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNFbmFibGVkJiYoai5yZW1vdmVCYWNrQnV0dG9uTGlzdGVuZXIodGhpcy5fYm91bmRDYWxsYmFjayksdGhpcy5faXNFbmFibGVkPSExKX19LHtrZXk6XCJmaXJlRGV2aWNlQmFja0J1dHRvbkV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpO3QuaW5pdEV2ZW50KFwiYmFja2J1dHRvblwiLCEwLCEwKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KHQpfX0se2tleTpcIl9jYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZGlzcGF0Y2hEZXZpY2VCYWNrQnV0dG9uRXZlbnQoKX19LHtrZXk6XCJjcmVhdGVIYW5kbGVyXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtpZighKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpdGhyb3cgbmV3IEVycm9yKFwiZWxlbWVudCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEhUTUxFbGVtZW50XCIpO2lmKCEoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJjYWxsYmFjayBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZ1bmN0aW9uXCIpO3ZhciBuPXtfY2FsbGJhY2s6ZSxfZWxlbWVudDp0LGRpc2FibGU6ZnVuY3Rpb24oKXtILnJlbW92ZSh0KX0sc2V0TGlzdGVuZXI6ZnVuY3Rpb24odCl7dGhpcy5fY2FsbGJhY2s9dH0sZW5hYmxlOmZ1bmN0aW9uKCl7SC5zZXQodCx0aGlzKX0saXNFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEguZ2V0KHQpPT09dGhpc30sZGVzdHJveTpmdW5jdGlvbigpe0gucmVtb3ZlKHQpLHRoaXMuX2NhbGxiYWNrPXRoaXMuX2VsZW1lbnQ9bnVsbH19O3JldHVybiBuLmVuYWJsZSgpLG59fSx7a2V5OlwiX2Rpc3BhdGNoRGV2aWNlQmFja0J1dHRvbkV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3JldHVybntfZWxlbWVudDplLGNhbGxQYXJlbnRIYW5kbGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZTtlOyl7aWYoaT1ILmdldChlKSlyZXR1cm4gaS5fY2FsbGJhY2sodChlKSk7ZT1lLnBhcmVudE5vZGV9fX19dmFyIGU9dGhpcy5fY2FwdHVyZVRyZWUoKSxuPXRoaXMuX2ZpbmRIYW5kbGVyTGVhZkVsZW1lbnQoZSksaT1ILmdldChuKTtpLl9jYWxsYmFjayh0KG4pKX19LHtrZXk6XCJfY2FwdHVyZVRyZWVcIix2YWx1ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49e2VsZW1lbnQ6ZSxjaGlsZHJlbjpBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspZS5wdXNoKHRbbl0pO3JldHVybiBlfShlLmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24oZSl7aWYoXCJub25lXCI9PT1lLnN0eWxlLmRpc3BsYXl8fCExPT09ZS5faXNTaG93bilyZXR1cm5bXTtpZigwPT09ZS5jaGlsZHJlbi5sZW5ndGgmJiFILmhhcyhlKSlyZXR1cm5bXTt2YXIgbj10KGUpO3JldHVybiAwIT09bi5jaGlsZHJlbi5sZW5ndGh8fEguaGFzKG4uZWxlbWVudCk/W25dOltdfSkpfTtpZighSC5oYXMobi5lbGVtZW50KSlmb3IodmFyIGk9MDtpPG4uY2hpbGRyZW4ubGVuZ3RoO2krKyl7dmFyIG89bi5jaGlsZHJlbltpXTtpZihILmhhcyhvLmVsZW1lbnQpKXJldHVybiBvfXJldHVybiBufXJldHVybiB0KGRvY3VtZW50LmJvZHkpfX0se2tleTpcIl9maW5kSGFuZGxlckxlYWZFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSh0KXtyZXR1cm4gMD09PXQuY2hpbGRyZW4ubGVuZ3RoP3QuZWxlbWVudDoxPT09dC5jaGlsZHJlbi5sZW5ndGg/ZSh0LmNoaWxkcmVuWzBdKTp0LmNoaWxkcmVuLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5lbGVtZW50fSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIGU7dmFyIG49cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodCxcIlwiKS56SW5kZXgsMTApLGk9cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZSxcIlwiKS56SW5kZXgsMTApO2lmKCFpc05hTihuKSYmIWlzTmFOKGkpKXJldHVybiBuPmk/dDplO3Rocm93IG5ldyBFcnJvcihcIkNhcHR1cmluZyBiYWNrYnV0dG9uLWhhbmRsZXIgaXMgZmFpbHVyZS5cIil9LG51bGwpfXJldHVybiBlKHQpfX1dKSx0fSgpKTtQLkFuaW1hdG9yRmFjdG9yeT1PLFAuTW9kaWZpZXJVdGlsPUIsUC5kYmJEaXNwYXRjaGVyPVI7dmFyIEY9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdWJzdHIoMCxlLmxlbmd0aCk9PT1lfSxxPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuc3Vic3RyKHQubGVuZ3RoLWUubGVuZ3RoLGUubGVuZ3RoKT09PWV9LHo9ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2xpY2UoMSwtMSl9LFY9ZnVuY3Rpb24odCl7cmV0dXJuIEYodCxcIntcIikmJnEodCxcIn1cIil9LFc9ZnVuY3Rpb24odCl7cmV0dXJuIEYodCxcIltcIikmJnEodCxcIl1cIil9LFU9ZnVuY3Rpb24odCl7cmV0dXJuIEYodCxcIidcIikmJnEodCxcIidcIil8fEYodCwnXCInKSYmcSh0LCdcIicpfSxYPWZ1bmN0aW9uKHQsZSxuKXt0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHRva2VuICdcIit0K1wiJyBhdCBwb3NpdGlvbiBcIisobi5sZW5ndGgtZS5sZW5ndGgtMSkrXCIgaW4gc3RyaW5nOiAnXCIrbitcIidcIil9LFk9ZnVuY3Rpb24odCxlLG4pe3JldHVyblwidHJ1ZVwiPT09dHx8XCJmYWxzZVwiPT09dD9cInRydWVcIj09PXQ6VSh0KT96KHQpOmlzTmFOKHQpP1YodCk/JCh6KHQpKTpXKHQpP0soeih0KSk6dm9pZCBYKHQsZSxuKTordH0sRz1mdW5jdGlvbih0KXt2YXIgZT0odD10LnRyaW0oKSkubGVuZ3RoO2lmKFwiOlwiPT09dFswXXx8XCIsXCI9PT10WzBdKWU9MTtlbHNlIGlmKFwie1wiPT09dFswXXx8XCJbXCI9PT10WzBdKXtmb3IodmFyIG49dC5jaGFyQ29kZUF0KDApLGk9MSxvPTE7bzx0Lmxlbmd0aDtvKyspaWYodC5jaGFyQ29kZUF0KG8pPT09bilpKys7ZWxzZSBpZih0LmNoYXJDb2RlQXQobyk9PT1uKzImJjA9PS0taSl7ZT1vKzE7YnJlYWt9fWVsc2UgaWYoXCInXCI9PT10WzBdfHwnXCInPT09dFswXSl7Zm9yKHZhciByPTE7cjx0Lmxlbmd0aDtyKyspaWYodFtyXT09PXRbMF0pe2U9cisxO2JyZWFrfX1lbHNlIGZvcih2YXIgYT0xO2E8dC5sZW5ndGg7YSsrKWlmKC0xIT09W1wiIFwiLFwiLFwiLFwiOlwiXS5pbmRleE9mKHRbYV0pKXtlPWE7YnJlYWt9cmV0dXJuIHQuc2xpY2UoMCxlKX0sJD1mdW5jdGlvbih0KXtmb3IodmFyIGU9dD10LnRyaW0oKSxuPXt9LGk9ITAsbz12b2lkIDAscj12b2lkIDAsYT12b2lkIDA7dC5sZW5ndGg+MDspaWYocj1hLGE9Ryh0KSx0PXQuc2xpY2UoYS5sZW5ndGgsdC5sZW5ndGgpLnRyaW0oKSxcIjpcIj09PWEmJighaXx8IXJ8fFwiLFwiPT09cil8fFwiLFwiPT09YSYmaXx8XCI6XCIhPT1hJiZcIixcIiE9PWEmJnImJlwiLFwiIT09ciYmXCI6XCIhPT1yKVgoYSx0LGUpO2Vsc2UgaWYoXCI6XCI9PT1hJiZpJiZyKXtpZihyPVUocik/eihyKTpyLCFmdW5jdGlvbih0KXtyZXR1cm4vXltBLVpfJF1bQS1aMC05XyRdKiQvaS50ZXN0KHQpfShyKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGtleSB0b2tlbiAnXCIrcitcIicgYXQgcG9zaXRpb24gMCBpbiBzdHJpbmc6ICdcIitlK1wiJ1wiKTtvPXIsaT0hMX1lbHNlXCIsXCI9PT1hJiYhaSYmciYmKG5bb109WShyLHQsZSksaT0hMCk7cmV0dXJuIGEmJihuW29dPVkoYSx0LGUpKSxufSxLPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10PXQudHJpbSgpLG49W10saT12b2lkIDAsbz12b2lkIDA7dC5sZW5ndGg+MDspaT1vLG89Ryh0KSx0PXQuc2xpY2Uoby5sZW5ndGgsdC5sZW5ndGgpLnRyaW0oKSxcIixcIiE9PW98fGkmJlwiLFwiIT09aT9cIixcIj09PW8mJm4ucHVzaChZKGksdCxlKSk6WChvLHQsZSk7cmV0dXJuIG8mJihcIixcIiE9PW8/bi5wdXNoKFkobyx0LGUpKTpYKG8sdCxlKSksbn0sUT17fSxKPVwiW09uc2VuIFVJXVwiO1EuZ2xvYmFscz17ZmFiT2Zmc2V0OjAsZXJyb3JQcmVmaXg6SixzdXBwb3J0c1Bhc3NpdmU6ITF9LEMuX3J1bk9uQWN0dWFsUGxhdGZvcm0oZnVuY3Rpb24oKXtRLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1M9Qy5nZXRNb2JpbGVPUygpLFEuZ2xvYmFscy5pc1VJV2ViVmlldz1DLmlzVUlXZWJWaWV3KCksUS5nbG9iYWxzLmlzV0tXZWJWaWV3PUMuaXNXS1dlYlZpZXcoKX0pO3RyeXt2YXIgWj1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJwYXNzaXZlXCIse2dldDpmdW5jdGlvbigpe1EuZ2xvYmFscy5zdXBwb3J0c1Bhc3NpdmU9ITB9fSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLG51bGwsWiksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0UGFzc2l2ZVwiLG51bGwsWil9Y2F0Y2godCl7fVEuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUsbixpLG8pe3QuYWRkRXZlbnRMaXN0ZW5lcihlLG4sUS5nbG9iYWxzLnN1cHBvcnRzUGFzc2l2ZT9pOihpfHx7fSkuY2FwdHVyZSl9LFEucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LGUsbixpLG8pe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4sUS5nbG9iYWxzLnN1cHBvcnRzUGFzc2l2ZT9pOihpfHx7fSkuY2FwdHVyZSl9LFEucHJlcGFyZVF1ZXJ5PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgRnVuY3Rpb24/dDpmdW5jdGlvbihlKXtyZXR1cm4gUS5tYXRjaChlLHQpfX0sUS5tYXRjaD1mdW5jdGlvbih0LGUpe3JldHVybih0Lm1hdGNoZXN8fHQud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHx0Lm1vek1hdGNoZXNTZWxlY3Rvcnx8dC5tc01hdGNoZXNTZWxlY3RvcikuY2FsbCh0LGUpfSxRLmZpbmRDaGlsZD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1RLnByZXBhcmVRdWVyeShlKSxpPTA7aTx0LmNoaWxkTm9kZXMubGVuZ3RoO2krKyl7dmFyIG89dC5jaGlsZE5vZGVzW2ldO2lmKG8ubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSYmbihvKSlyZXR1cm4gb31yZXR1cm4gbnVsbH0sUS5maW5kUGFyZW50PWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGk9US5wcmVwYXJlUXVlcnkoZSksbz10LnBhcmVudE5vZGU7Oyl7aWYoIW98fG89PT1kb2N1bWVudHx8byBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnR8fG4mJm4obykpcmV0dXJuIG51bGw7aWYoaShvKSlyZXR1cm4gbztvPW8ucGFyZW50Tm9kZX19LFEuaXNBdHRhY2hlZD1mdW5jdGlvbih0KXtyZXR1cm4gZG9jdW1lbnQuYm9keS5jb250YWlucyh0KX0sUS5oYXNBbnlDb21wb25lbnRBc1BhcmVudD1mdW5jdGlvbih0KXtmb3IoO3QmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCE9PXQ7KWlmKCh0PXQucGFyZW50Tm9kZSkmJnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKS5tYXRjaCgvKG9ucy1uYXZpZ2F0b3J8b25zLXRhYmJhcnxvbnMtbW9kYWwpLykpcmV0dXJuITA7cmV0dXJuITF9LFEuZ2V0QWxsQ2hpbGROb2Rlcz1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4oZT1bdF0pLmNvbmNhdC5hcHBseShlLHcoQXJyYXkuZnJvbSh0LmNoaWxkcmVuKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIFEuZ2V0QWxsQ2hpbGROb2Rlcyh0KX0pKSl9LFEuaXNQYWdlQ29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gdC5ub2RlTmFtZS5tYXRjaCgvXm9ucy0obmF2aWdhdG9yfHNwbGl0dGVyfHRhYmJhcnxwYWdlKSQvaSl9LFEucHJvcGFnYXRlQWN0aW9uPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPTA7bjx0LmNoaWxkTm9kZXMubGVuZ3RoO24rKyl7dmFyIGk9dC5jaGlsZE5vZGVzW25dO2lbZV1pbnN0YW5jZW9mIEZ1bmN0aW9uP2lbZV0oKTpRLnByb3BhZ2F0ZUFjdGlvbihpLGUpfX0sUS5jYW1lbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLy0oW2Etel0pL2csZnVuY3Rpb24odCxlKXtyZXR1cm4gZS50b1VwcGVyQ2FzZSgpfSl9LFEuaHlwaGVuYXRlPWZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoLyhbYS16QS1aXSkoW0EtWl0pL2csXCIkMS0kMlwiKS50b0xvd2VyQ2FzZSgpfSxRLmNyZWF0ZT1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTpcIlwiLGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49dC5zcGxpdChcIi5cIiksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KG4uc2hpZnQoKXx8XCJkaXZcIik7cmV0dXJuIG4ubGVuZ3RoJiYoaS5jbGFzc05hbWU9bi5qb2luKFwiIFwiKSksZChpLGUpLGl9LFEuY3JlYXRlRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50P2UuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuaW1wb3J0Tm9kZSh0LCEwKSk6ZS5pbm5lckhUTUw9dC50cmltKCksZS5jaGlsZHJlbi5sZW5ndGg+MSYmUS50aHJvdyhcIkhUTUwgdGVtcGxhdGUgbXVzdCBjb250YWluIGEgc2luZ2xlIHJvb3QgZWxlbWVudFwiKTt2YXIgbj1lLmNoaWxkcmVuWzBdO3JldHVybiBlLmNoaWxkcmVuWzBdLnJlbW92ZSgpLG59LFEuY3JlYXRlRnJhZ21lbnQ9ZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO3JldHVybiBlLmlubmVySFRNTD10LGRvY3VtZW50LmltcG9ydE5vZGUoZS5jb250ZW50LCEwKX0sUS5leHRlbmQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheShlPjE/ZS0xOjApLGk9MTtpPGU7aSsrKW5baS0xXT1hcmd1bWVudHNbaV07Zm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspaWYobltvXSlmb3IodmFyIHI9T2JqZWN0LmtleXMobltvXSksYT0wO2E8ci5sZW5ndGg7YSsrKXt2YXIgcz1yW2FdO3Rbc109bltvXVtzXX1yZXR1cm4gdH0sUS5hcnJheUZyb209ZnVuY3Rpb24odCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseSh0KX0sUS5wYXJzZUpTT05PYmplY3RTYWZlbHk9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RyeXt2YXIgbj1KU09OLnBhcnNlKFwiXCIrdCk7aWYoXCJvYmplY3RcIj09PSh2b2lkIDA9PT1uP1widW5kZWZpbmVkXCI6ZihuKSkmJm51bGwhPT1uKXJldHVybiBufWNhdGNoKHQpe3JldHVybiBlfXJldHVybiBlfSxRLmZpbmRGcm9tUGF0aD1mdW5jdGlvbih0KXt0PXQuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZSxuPXdpbmRvdztlPXQuc2hpZnQoKTspbj1uW2VdO3JldHVybiBufSxRLmdldFRvcFBhZ2U9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJihcIm9ucy1wYWdlXCI9PT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKT90OnQudG9wUGFnZSl8fG51bGx9LFEuZmluZFRvb2xiYXJQYWdlPWZ1bmN0aW9uKHQpe3ZhciBlPVEuZ2V0VG9wUGFnZSh0KTtpZihlKXtpZihlLl9jYW5BbmltYXRlVG9vbGJhcigpKXJldHVybiBlO2Zvcih2YXIgbj0wO248ZS5fY29udGVudEVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoO24rKyl7dmFyIGk9US5nZXRUb3BQYWdlKGUuX2NvbnRlbnRFbGVtZW50LmNoaWxkcmVuW25dKTtpZihpJiYhL29ucy10YWJiYXIvaS50ZXN0KGUuX2NvbnRlbnRFbGVtZW50LmNoaWxkcmVuW25dLnRhZ05hbWUpKXJldHVybiBRLmZpbmRUb29sYmFyUGFnZShpKX19cmV0dXJuIG51bGx9LFEudHJpZ2dlckVsZW1lbnRFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fSxpPW5ldyBDdXN0b21FdmVudChlLHtidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsZGV0YWlsOm59KTtyZXR1cm4gT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbih0KXtpW3RdPW5bdF19KSx0LmRpc3BhdGNoRXZlbnQoaSksaX0sUS5oYXNNb2RpZmllcj1mdW5jdGlvbih0LGUpe3JldHVybiEhdC5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSYmUmVnRXhwKFwiKF58XFxcXHMrKVwiK2UrXCIoJHxcXFxccyspXCIsXCJpXCIpLnRlc3QodC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSl9LFEuYWRkTW9kaWZpZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIG4uYXV0b1N0eWxlJiYoZT1OLm1hcE1vZGlmaWVyKGUsdCxuLmZvcmNlQXV0b1N0eWxlKSksIVEuaGFzTW9kaWZpZXIodCxlKSYmKHQuc2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIiwoKHQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIpK1wiIFwiK2UpLnRyaW0oKSksITApfSxRLnJlbW92ZU1vZGlmaWVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O2lmKG4uYXV0b1N0eWxlJiYoZT1OLm1hcE1vZGlmaWVyKGUsdCxuLmZvcmNlQXV0b1N0eWxlKSksIXQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fCFRLmhhc01vZGlmaWVyKHQsZSkpcmV0dXJuITE7dmFyIGk9dC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKS5zcGxpdCgvXFxzKy8pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCYmdCE9PWV9KTtyZXR1cm4gaS5sZW5ndGg/dC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLGkuam9pbihcIiBcIikpOnQucmVtb3ZlQXR0cmlidXRlKFwibW9kaWZpZXJcIiksITB9LFEudG9nZ2xlTW9kaWZpZXI9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjI/YXJndW1lbnRzLmxlbmd0aDw9Mj92b2lkIDA6YXJndW1lbnRzWzJdOnt9LGU9XCJib29sZWFuXCI9PXR5cGVvZiB0P3Q6dC5mb3JjZTsoXCJib29sZWFuXCI9PXR5cGVvZiBlP2U6IVEuaGFzTW9kaWZpZXIuYXBwbHkoUSxhcmd1bWVudHMpKT9RLmFkZE1vZGlmaWVyLmFwcGx5KFEsYXJndW1lbnRzKTpRLnJlbW92ZU1vZGlmaWVyLmFwcGx5KFEsYXJndW1lbnRzKX0sUS5yZXN0b3JlQ2xhc3M9ZnVuY3Rpb24odCxlLG4pe2Uuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVyblwiXCIhPT1lJiYhdC5jbGFzc0xpc3QuY29udGFpbnMoZSkmJnQuY2xhc3NMaXN0LmFkZChlKX0pLHQuaGFzQXR0cmlidXRlKFwibW9kaWZpZXJcIikmJkIucmVmcmVzaCh0LG4pfSxRLnVwZGF0ZVBhcmVudFBvc2l0aW9uPWZ1bmN0aW9uKHQpeyF0Ll9wYXJlbnRVcGRhdGVkJiZ0LnBhcmVudEVsZW1lbnQmJihcInN0YXRpY1wiPT09d2luZG93LmdldENvbXB1dGVkU3R5bGUodC5wYXJlbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwicG9zaXRpb25cIikmJih0LnBhcmVudEVsZW1lbnQuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSx0Ll9wYXJlbnRVcGRhdGVkPSEwKX0sUS50b2dnbGVBdHRyaWJ1dGU9ZnVuY3Rpb24odCxlLG4pe24/dC5zZXRBdHRyaWJ1dGUoZSxcImJvb2xlYW5cIj09dHlwZW9mIG4/XCJcIjpuKTp0LnJlbW92ZUF0dHJpYnV0ZShlKX0sUS5iaW5kTGlzdGVuZXJzPWZ1bmN0aW9uKHQsZSl7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWUucmVwbGFjZSgvXl9bYS16XS8sXCJfYm91bmRcIitlWzFdLnRvVXBwZXJDYXNlKCkpO3Rbbl09dFtuXXx8dFtlXS5iaW5kKHQpfSl9LFEuZWFjaD1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiBlKG4sdFtuXSl9KX0sUS51cGRhdGVSaXBwbGU9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307dm9pZCAwPT09ZSYmKGU9dC5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIikpO3ZhciBpPVEuZmluZENoaWxkKHQsXCJvbnMtcmlwcGxlXCIpO2lmKGUpe2lmKCFpKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib25zLXJpcHBsZVwiKTtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBvLnNldEF0dHJpYnV0ZSh0LG5bdF0pfSksdC5pbnNlcnRCZWZvcmUobyx0LmZpcnN0Q2hpbGQpfX1lbHNlIGkmJmkucmVtb3ZlKCl9LFEuYW5pbWF0aW9uT3B0aW9uc1BhcnNlPWZ1bmN0aW9uKHQpe2lmKHQ9dC50cmltKCksVih0KSlyZXR1cm4gJCh6KHQpKTtpZihXKHQpKXJldHVybiBLKHoodCkpO3Rocm93IG5ldyBFcnJvcihcIlByb3ZpZGVkIHN0cmluZyBtdXN0IGJlIG9iamVjdCBvciBhcnJheSBsaWtlOiBcIit0KX0sUS5pc0ludGVnZXI9ZnVuY3Rpb24odCl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIHQmJmlzRmluaXRlKHQpJiZNYXRoLmZsb29yKHQpPT09dH0sUS5kZWZlcj1mdW5jdGlvbigpe3ZhciB0PXt9O3JldHVybiB0LnByb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24oZSxuKXt0LnJlc29sdmU9ZSx0LnJlamVjdD1ufSksdH0sUS53YXJuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtpZighUC5jb25maWcud2FybmluZ3NEaXNhYmxlZCl7dmFyIGk7KGk9Y29uc29sZSkud2Fybi5hcHBseShpLFtKXS5jb25jYXQoZSkpfX0sUS50aHJvdz1mdW5jdGlvbih0KXt0aHJvdyBuZXcgRXJyb3IoSitcIiBcIit0KX0sUS50aHJvd0Fic3RyYWN0PWZ1bmN0aW9uKCl7cmV0dXJuIFEudGhyb3coXCJDYW5ub3QgaW5zdGFudGlhdGUgYWJzdHJhY3QgY2xhc3NcIil9LFEudGhyb3dNZW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUS50aHJvdyhcIkNsYXNzIG1lbWJlciBtdXN0IGJlIGltcGxlbWVudGVkXCIpfSxRLnRocm93UGFnZUxvYWRlcj1mdW5jdGlvbigpe3JldHVybiBRLnRocm93KFwiRmlyc3QgcGFyYW1ldGVyIHNob3VsZCBiZSBhbiBpbnN0YW5jZSBvZiBQYWdlTG9hZGVyXCIpfSxRLnRocm93QW5pbWF0b3I9ZnVuY3Rpb24odCl7cmV0dXJuIFEudGhyb3coJ1wiQW5pbWF0b3JcIiBwYXJhbSBtdXN0IGluaGVyaXQgJyt0K1wiQW5pbWF0b3JcIil9O3ZhciB0dD1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYW5jZWxhYmxlJiZ0LnByZXZlbnREZWZhdWx0KCl9O1EuaW9zUHJldmVudFNjcm9sbD1mdW5jdGlvbih0KXtpZihcImlvc1wiPT09US5nbG9iYWxzLmFjdHVhbE1vYmlsZU9TKXt0Lm9uKFwidG91Y2htb3ZlXCIsdHQpLHQub24oXCJkcmFnZW5kXCIsZnVuY3Rpb24gZShuKXt0Lm9mZihcInRvdWNobW92ZVwiLHR0KSx0Lm9mZihcImRyYWdlbmRcIixlKX0pfX0sUS5pb3NQYWdlU2Nyb2xsRml4PWZ1bmN0aW9uKHQpe1wiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1MmJihkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJvbnMtaW9zLXNjcm9sbFwiLHQpLFEuZ2xvYmFscy5pc1VJV2ViVmlldyYmIVAuY29uZmlnLmZvcmNlVUlXZWJWaWV3U2Nyb2xsRml4fHxkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJvbnMtaW9zLXNjcm9sbC1maXhcIix0KSl9LFEuaW9zTWFza1Njcm9sbEZpeD1mdW5jdGlvbih0LGUpe2lmKFEuZ2xvYmFscy5pc1VJV2ViVmlldyl7dFsoZT9cImFkZFwiOlwicmVtb3ZlXCIpK1wiRXZlbnRMaXN0ZW5lclwiXShcInRvdWNobW92ZVwiLHR0LCExKX19LFEuaXNWYWxpZEdlc3R1cmU9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQuZ2VzdHVyZSYmKHQuZ2VzdHVyZS5kaXN0YW5jZTw9MTV8fHQuZ2VzdHVyZS5kZWx0YVRpbWU8PTEwMCl9LFEuY2hlY2tNaXNzaW5nSW1wb3J0PWZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtlLmZvckVhY2goZnVuY3Rpb24odCl7Y1t0XXx8US50aHJvdyhcIk9uc1wiK3QrXCIgaXMgcmVxdWlyZWQgYnV0IHdhcyBub3QgaW1wb3J0ZWQgKEN1c3RvbSBFbGVtZW50cylcIil9KX07dmFyIGV0PXt9O2V0LmNhcGl0YWxpemU9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKX0sZXQuYnVpbGRUcmFuc2l0aW9uVmFsdWU9ZnVuY3Rpb24odCl7dC5wcm9wZXJ0eT10LnByb3BlcnR5fHxcImFsbFwiLHQuZHVyYXRpb249dC5kdXJhdGlvbnx8LjQsdC50aW1pbmc9dC50aW1pbmd8fFwibGluZWFyXCI7cmV0dXJuIHQucHJvcGVydHkuc3BsaXQoLyArLykubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBlK1wiIFwiK3QuZHVyYXRpb24rXCJzIFwiK3QudGltaW5nfSkuam9pbihcIiwgXCIpfSxldC5vbmNlT25UcmFuc2l0aW9uRW5kPWZ1bmN0aW9uKHQsZSl7aWYoIXQpcmV0dXJuIGZ1bmN0aW9uKCl7fTt2YXIgbj1mdW5jdGlvbihuKXt0PT1uLnRhcmdldCYmKG4uc3RvcFByb3BhZ2F0aW9uKCksaSgpLGUoKSl9LGk9ZnVuY3Rpb24oKXtldC5fdHJhbnNpdGlvbkVuZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4sITEpfSl9O3JldHVybiBldC5fdHJhbnNpdGlvbkVuZEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuYWRkRXZlbnRMaXN0ZW5lcihlLG4sITEpfSksaX0sZXQuX3RyYW5zaXRpb25FbmRFdmVudHM9XCJvbnRyYW5zaXRpb25lbmRcImluIHdpbmRvdz9bXCJ0cmFuc2l0aW9uZW5kXCJdOlwib253ZWJraXR0cmFuc2l0aW9uZW5kXCJpbiB3aW5kb3c/W1wid2Via2l0VHJhbnNpdGlvbkVuZFwiXTpcIndlYmtpdFwiPT09ZXQudmVuZG9yUHJlZml4fHxcIm9cIj09PWV0LnZlbmRvclByZWZpeHx8XCJtb3pcIj09PWV0LnZlbmRvclByZWZpeHx8XCJtc1wiPT09ZXQudmVuZG9yUHJlZml4P1tldC52ZW5kb3JQcmVmaXgrXCJUcmFuc2l0aW9uRW5kXCIsXCJ0cmFuc2l0aW9uZW5kXCJdOltdLGV0Ll9jc3NQcm9wZXJ0eURpY3Q9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFwiXCIpLGU9e30sbj1cIkFcIi5jaGFyQ29kZUF0KDApLGk9XCJ6XCIuY2hhckNvZGVBdCgwKSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciByPXRbb10ucmVwbGFjZSgvXlstXSsvLFwiXCIpLnJlcGxhY2UoL1stXVthLXpdL2csZnVuY3Rpb24odCl7cmV0dXJuIHQuc3Vic3RyKDEpLnRvVXBwZXJDYXNlKCl9KS5yZXBsYWNlKC9ebW96LyxcIk1velwiKTtuPD1yLmNoYXJDb2RlQXQoMCkmJmk+PXIuY2hhckNvZGVBdCgwKSYmXCJjc3NUZXh0XCIhPT1yJiZcInBhcmVudFRleHRcIiE9PXImJihlW3JdPSEwKX1yZXR1cm4gZX0oKSxldC5oYXNDc3NQcm9wZXJ0eT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbiBldC5fY3NzUHJvcGVydHlEaWN0fSxldC52ZW5kb3JQcmVmaXg9ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJcIik7cmV0dXJuKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpLmpvaW4oXCJcIikubWF0Y2goLy0obW96fHdlYmtpdHxtcyktLyl8fFwiXCI9PT10Lk9MaW5rJiZbXCJcIixcIm9cIl0pWzFdfSgpLGV0LmZvcmNlTGF5b3V0QXRPbmNlPWZ1bmN0aW9uKHQsZSl7dGhpcy5iYXRjaEltbWVkaWF0ZShmdW5jdGlvbigpe3QuZm9yRWFjaChmdW5jdGlvbih0KXt0Lm9mZnNldEhlaWdodH0pLGUoKX0pfSxldC5iYXRjaEltbWVkaWF0ZT1mdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiBmdW5jdGlvbihlKXswPT09dC5sZW5ndGgmJnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3ZhciBlPXQuc2xpY2UoMCk7dD1bXSxlLmZvckVhY2goZnVuY3Rpb24odCl7dCgpfSl9KSx0LnB1c2goZSl9fSgpLGV0LmJhdGNoQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXt2YXIgdD1bXSxlPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKHQpe3NldFRpbWVvdXQodCwxZTMvNjApfTtyZXR1cm4gZnVuY3Rpb24obil7MD09PXQubGVuZ3RoJiZlKGZ1bmN0aW9uKCl7dmFyIGU9dC5zbGljZSgwKTt0PVtdLGUuZm9yRWFjaChmdW5jdGlvbih0KXt0KCl9KX0pLHQucHVzaChuKX19KCksZXQudHJhbnNpdGlvblByb3BlcnR5TmFtZT1mdW5jdGlvbigpe2lmKGV0Lmhhc0Nzc1Byb3BlcnR5KFwidHJhbnNpdGlvbkR1cmF0aW9uXCIpKXJldHVyblwidHJhbnNpdGlvblwiO2lmKGV0Lmhhc0Nzc1Byb3BlcnR5KGV0LnZlbmRvclByZWZpeCtcIlRyYW5zaXRpb25EdXJhdGlvblwiKSlyZXR1cm4gZXQudmVuZG9yUHJlZml4K1wiVHJhbnNpdGlvblwiO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGVcIil9KCk7dmFyIG50PWZ1bmN0aW9uIHQoZSxuKXtpZighKHRoaXMgaW5zdGFuY2VvZiB0KSlyZXR1cm4gbmV3IHQoZSxuKTtpZihlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpdGhpcy5lbGVtZW50cz1bZV07ZWxzZXtpZihcIltvYmplY3QgQXJyYXldXCIhPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSkpdGhyb3cgbmV3IEVycm9yKFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBhcnJheSBvciBhbiBpbnN0YW5jZSBvZiBIVE1MRWxlbWVudC5cIik7dGhpcy5lbGVtZW50cz1lfXRoaXMuZGVmYXVsdHM9bix0aGlzLnRyYW5zaXRpb25RdWV1ZT1bXSx0aGlzLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3Q9W119O250LnByb3RvdHlwZT17dHJhbnNpdGlvblF1ZXVlOnZvaWQgMCxlbGVtZW50czp2b2lkIDAsZGVmYXVsdHM6dm9pZCAwLHBsYXk6ZnVuY3Rpb24odCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdCYmdGhpcy50cmFuc2l0aW9uUXVldWUucHVzaChmdW5jdGlvbihlKXt0KCksZSgpfSksdGhpcy5zdGFydEFuaW1hdGlvbigpLHRoaXN9LGRlZmF1bHQ6ZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIGkodCxlLG4pe3JldHVybiB2b2lkIDAhPT10LmR1cmF0aW9uJiYoZT10LmR1cmF0aW9uKSx2b2lkIDAhPT10LnRpbWluZyYmKG49dC50aW1pbmcpLHtjc3M6dC5jc3N8fHQsZHVyYXRpb246ZSx0aW1pbmc6bn19cmV0dXJuIHRoaXMuc2F2ZVN0eWxlKCkucXVldWUoaSh0LDAsdGhpcy5kZWZhdWx0cy50aW1pbmcpKS53YWl0KHZvaWQgMD09PW4/dGhpcy5kZWZhdWx0cy5kZWxheTpuKS5xdWV1ZShpKGUsdGhpcy5kZWZhdWx0cy5kdXJhdGlvbix0aGlzLmRlZmF1bHRzLnRpbWluZykpLnJlc3RvcmVTdHlsZSgpfSxxdWV1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMudHJhbnNpdGlvblF1ZXVlO2lmKHQmJmUmJihlLmNzcz10LHQ9bmV3IG50LlRyYW5zaXRpb24oZSkpLHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8dCBpbnN0YW5jZW9mIG50LlRyYW5zaXRpb258fCh0PW5ldyBudC5UcmFuc2l0aW9uKHQuY3NzP3Q6e2Nzczp0fSkpLHQgaW5zdGFuY2VvZiBGdW5jdGlvbiluLnB1c2godCk7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBudC5UcmFuc2l0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50c1wiKTtuLnB1c2godC5idWlsZCgpKX1yZXR1cm4gdGhpc30sd2FpdDpmdW5jdGlvbih0KXtyZXR1cm4gdD4wJiZ0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwxZTMqdCl9KSx0aGlzfSxzYXZlU3R5bGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50cmFuc2l0aW9uUXVldWUucHVzaChmdW5jdGlvbih0KXt0aGlzLmVsZW1lbnRzLmZvckVhY2goZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dGhpcy5sYXN0U3R5bGVBdHRyaWJ1dGVEaWN0W2VdPXt9LGk9MDtpPHQuc3R5bGUubGVuZ3RoO2krKyluW3Quc3R5bGVbaV1dPXQuc3R5bGVbdC5zdHlsZVtpXV19LmJpbmQodGhpcykpLHQoKX0uYmluZCh0aGlzKSksdGhpc30scmVzdG9yZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYoKHQ9dHx8e30pLnRyYW5zaXRpb24mJiF0LmR1cmF0aW9uKXRocm93IG5ldyBFcnJvcignXCJvcHRpb25zLmR1cmF0aW9uXCIgaXMgcmVxdWlyZWQgd2hlbiBcIm9wdGlvbnMudHJhbnNpdGlvblwiIGlzIGVuYWJsZWQuJyk7dmFyIG49ZXQudHJhbnNpdGlvblByb3BlcnR5TmFtZTtpZih0LnRyYW5zaXRpb258fHQuZHVyYXRpb24mJnQuZHVyYXRpb24+MCl7dmFyIGk9dC50cmFuc2l0aW9ufHxcImFsbCBcIit0LmR1cmF0aW9uK1wicyBcIisodC50aW1pbmd8fFwibGluZWFyXCIpO3RoaXMudHJhbnNpdGlvblF1ZXVlLnB1c2goZnVuY3Rpb24obyl7dmFyIHIsYT10aGlzLmVsZW1lbnRzLHM9ZnVuY3Rpb24oKXthLmZvckVhY2goZnVuY3Rpb24odCl7dC5zdHlsZVtuXT1cIlwifSl9LGw9ZXQub25jZU9uVHJhbnNpdGlvbkVuZChhWzBdLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpLHMoKSxvKCl9KTtyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtsKCkscygpLG8oKX0sMWUzKnQuZHVyYXRpb24qMS40KSxhLmZvckVhY2goZnVuY3Rpb24odCxvKXt2YXIgcj1lLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3Rbb107aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwicmVzdG9yZVN0eWxlKCk6IFRoZSBzdHlsZSBpcyBub3Qgc2F2ZWQuIEludm9rZSBzYXZlU3R5bGUoKSBiZWZvcmUuXCIpO2UubGFzdFN0eWxlQXR0cmlidXRlRGljdFtvXT12b2lkIDA7Zm9yKHZhciBhLHM9MCxsPXQuc3R5bGUubGVuZ3RoO3M8bDtzKyspYT10LnN0eWxlW3NdLHZvaWQgMD09PXJbYV0mJihyW2FdPVwiXCIpO3Quc3R5bGVbbl09aSxPYmplY3Qua2V5cyhyKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UhPT1uJiYodC5zdHlsZVtlXT1yW2VdKX0pLHQuc3R5bGVbbl09aX0pfSl9ZWxzZSB0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKHQpe2UuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbih0LGkpe3Quc3R5bGVbbl09XCJub25lXCI7dmFyIG89ZS5sYXN0U3R5bGVBdHRyaWJ1dGVEaWN0W2ldO2lmKCFvKXRocm93IG5ldyBFcnJvcihcInJlc3RvcmVTdHlsZSgpOiBUaGUgc3R5bGUgaXMgbm90IHNhdmVkLiBJbnZva2Ugc2F2ZVN0eWxlKCkgYmVmb3JlLlwiKTtlLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3RbaV09dm9pZCAwO2Zvcih2YXIgcj0wO3I8dC5zdHlsZS5sZW5ndGg7cisrKXQuc3R5bGVbcl0sdm9pZCAwPT09b1t0LnN0eWxlW3JdXSYmKG9bdC5zdHlsZVtyXV09XCJcIik7T2JqZWN0LmtleXMobykuZm9yRWFjaChmdW5jdGlvbihlKXt0LnN0eWxlW2VdPW9bZV19KX0pLHQoKX0pO3JldHVybiB0aGlzfSxzdGFydEFuaW1hdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZXF1ZXVlVHJhbnNpdGlvbigpLHRoaXN9LF9kZXF1ZXVlVHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMudHJhbnNpdGlvblF1ZXVlLnNoaWZ0KCk7aWYodGhpcy5fY3VycmVudFRyYW5zaXRpb24pdGhyb3cgbmV3IEVycm9yKFwiQ3VycmVudCB0cmFuc2l0aW9uIGV4aXN0cy5cIik7dGhpcy5fY3VycmVudFRyYW5zaXRpb249dDt2YXIgZT10aGlzLG49ITE7dCYmdC5jYWxsKHRoaXMsZnVuY3Rpb24oKXtpZihuKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgc3RhdGU6IFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkIHR3aWNlLlwiKTtuPSEwLGUuX2N1cnJlbnRUcmFuc2l0aW9uPXZvaWQgMCxlLl9kZXF1ZXVlVHJhbnNpdGlvbigpfSl9fSxudC5ydW5BbGw9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWFyZ3VtZW50c1t0XS5wbGF5KCl9LChudC5UcmFuc2l0aW9uPWZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucz10fHx7fSx0aGlzLm9wdGlvbnMuZHVyYXRpb249dGhpcy5vcHRpb25zLmR1cmF0aW9ufHwwLHRoaXMub3B0aW9ucy50aW1pbmc9dGhpcy5vcHRpb25zLnRpbWluZ3x8XCJsaW5lYXJcIix0aGlzLm9wdGlvbnMuY3NzPXRoaXMub3B0aW9ucy5jc3N8fHt9LHRoaXMub3B0aW9ucy5wcm9wZXJ0eT10aGlzLm9wdGlvbnMucHJvcGVydHl8fFwiYWxsXCJ9KS5wcm90b3R5cGU9e2J1aWxkOmZ1bmN0aW9uKCl7aWYoMD09PU9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5jc3MpLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoXCJvcHRpb25zLmNzcyBpcyByZXF1aXJlZC5cIik7dmFyIHQ9ZnVuY3Rpb24odCl7dmFyIGU9e307cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7dmFyIGk9dFtuXTtpZihldC5oYXNDc3NQcm9wZXJ0eShuKSllW25dPWk7ZWxzZXt2YXIgbz1ldC52ZW5kb3JQcmVmaXgrZXQuY2FwaXRhbGl6ZShuKTtldC5oYXNDc3NQcm9wZXJ0eShvKT9lW29dPWk6KGVbb109aSxlW25dPWkpfX0pLGV9KHRoaXMub3B0aW9ucy5jc3MpO2lmKHRoaXMub3B0aW9ucy5kdXJhdGlvbj4wKXt2YXIgZT1ldC5idWlsZFRyYW5zaXRpb25WYWx1ZSh0aGlzLm9wdGlvbnMpLG49dGhpcztyZXR1cm4gZnVuY3Rpb24oaSl7dmFyIG8scj10aGlzLmVsZW1lbnRzLGE9MWUzKm4ub3B0aW9ucy5kdXJhdGlvbioxLjQscz1ldC5vbmNlT25UcmFuc2l0aW9uRW5kKHJbMF0sZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQobyksaSgpfSk7bz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cygpLGkoKX0sYSksci5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uc3R5bGVbZXQudHJhbnNpdGlvblByb3BlcnR5TmFtZV09ZSxPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe24uc3R5bGVbZV09dFtlXX0pfSl9fWlmKHRoaXMub3B0aW9ucy5kdXJhdGlvbjw9MClyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5lbGVtZW50cztuLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdHlsZVtldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lXT1cIlwiLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7ZS5zdHlsZVtuXT10W25dfSl9KSxuLmxlbmd0aD4wP2V0LmZvcmNlTGF5b3V0QXRPbmNlKG4sZnVuY3Rpb24oKXtldC5iYXRjaEFuaW1hdGlvbkZyYW1lKGUpfSk6ZXQuYmF0Y2hBbmltYXRpb25GcmFtZShlKX19fTt2YXIgaXQsb3QscnQsYXQsc3Q9ZnVuY3Rpb24gdChlLG4pe3JldHVybiBuZXcgdC5JbnN0YW5jZShlLG58fHt9KX07c3QuZGVmYXVsdHM9e2JlaGF2aW9yOnt0b3VjaEFjdGlvbjpcInBhbi15XCIsdG91Y2hDYWxsb3V0Olwibm9uZVwiLGNvbnRlbnRab29taW5nOlwibm9uZVwiLHVzZXJEcmFnOlwibm9uZVwiLHRhcEhpZ2hsaWdodENvbG9yOlwicmdiYSgwLDAsMCwwKVwifX0sc3QuRE9DVU1FTlQ9ZG9jdW1lbnQsc3QuSEFTX1BPSU5URVJFVkVOVFM9bmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkfHxuYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxzdC5IQVNfVE9VQ0hFVkVOVFM9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyxzdC5JU19NT0JJTEU9L21vYmlsZXx0YWJsZXR8aXAoYWR8aG9uZXxvZCl8YW5kcm9pZHxzaWxrL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxzdC5OT19NT1VTRUVWRU5UUz1zdC5IQVNfVE9VQ0hFVkVOVFMmJnN0LklTX01PQklMRXx8c3QuSEFTX1BPSU5URVJFVkVOVFMsc3QuQ0FMQ1VMQVRFX0lOVEVSVkFMPTI1O3ZhciBsdD17fSx1dD1zdC5ESVJFQ1RJT05fRE9XTj1cImRvd25cIixjdD1zdC5ESVJFQ1RJT05fTEVGVD1cImxlZnRcIixodD1zdC5ESVJFQ1RJT05fVVA9XCJ1cFwiLGR0PXN0LkRJUkVDVElPTl9SSUdIVD1cInJpZ2h0XCIsZnQ9c3QuUE9JTlRFUl9NT1VTRT1cIm1vdXNlXCIscHQ9c3QuUE9JTlRFUl9UT1VDSD1cInRvdWNoXCIsZ3Q9c3QuUE9JTlRFUl9QRU49XCJwZW5cIixtdD1zdC5FVkVOVF9TVEFSVD1cInN0YXJ0XCIsX3Q9c3QuRVZFTlRfTU9WRT1cIm1vdmVcIix2dD1zdC5FVkVOVF9FTkQ9XCJlbmRcIixidD1zdC5FVkVOVF9SRUxFQVNFPVwicmVsZWFzZVwiLHl0PXN0LkVWRU5UX1RPVUNIPVwidG91Y2hcIjtzdC5SRUFEWT0hMSxzdC5wbHVnaW5zPXN0LnBsdWdpbnN8fHt9LHN0Lmdlc3R1cmVzPXN0Lmdlc3R1cmVzfHx7fSxvdD1zdC51dGlscz17ZXh0ZW5kOmZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGkgaW4gZSkhZS5oYXNPd25Qcm9wZXJ0eShpKXx8dm9pZCAwIT09dFtpXSYmbnx8KHRbaV09ZVtpXSk7cmV0dXJuIHR9LG9uOmZ1bmN0aW9uKHQsZSxuLGkpe1EuYWRkRXZlbnRMaXN0ZW5lcih0LGUsbixpLCEwKX0sb2ZmOmZ1bmN0aW9uKHQsZSxuLGkpe1EucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUsbixpLCEwKX0sZWFjaDpmdW5jdGlvbih0LGUsbil7dmFyIGksbztpZihcImZvckVhY2hcImluIHQpdC5mb3JFYWNoKGUsbik7ZWxzZSBpZih2b2lkIDAhPT10Lmxlbmd0aCl7Zm9yKGk9MCxvPXQubGVuZ3RoO2k8bztpKyspaWYoITE9PT1lLmNhbGwobix0W2ldLGksdCkpcmV0dXJufWVsc2UgZm9yKGkgaW4gdClpZih0Lmhhc093blByb3BlcnR5KGkpJiYhMT09PWUuY2FsbChuLHRbaV0saSx0KSlyZXR1cm59LGluU3RyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5kZXhPZihlKT4tMX0saW5BcnJheTpmdW5jdGlvbih0LGUsbil7aWYobil7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKWlmKE9iamVjdC5rZXlzKGUpLmV2ZXJ5KGZ1bmN0aW9uKG4pe3JldHVybiB0W2ldW25dPT09ZVtuXX0pKXJldHVybiBpO3JldHVybi0xfWlmKHQuaW5kZXhPZilyZXR1cm4gdC5pbmRleE9mKGUpO2Zvcih2YXIgaT0wLG89dC5sZW5ndGg7aTxvO2krKylpZih0W2ldPT09ZSlyZXR1cm4gaTtyZXR1cm4tMX0sdG9BcnJheTpmdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwKX0saGFzUGFyZW50OmZ1bmN0aW9uKHQsZSl7Zm9yKDt0Oyl7aWYodD09ZSlyZXR1cm4hMDt0PXQucGFyZW50Tm9kZX1yZXR1cm4hMX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKHQpe3ZhciBlPVtdLG49W10saT1bXSxvPVtdLHI9TWF0aC5taW4sYT1NYXRoLm1heDtyZXR1cm4gMT09PXQubGVuZ3RoP3twYWdlWDp0WzBdLnBhZ2VYLHBhZ2VZOnRbMF0ucGFnZVksY2xpZW50WDp0WzBdLmNsaWVudFgsY2xpZW50WTp0WzBdLmNsaWVudFl9OihvdC5lYWNoKHQsZnVuY3Rpb24odCl7ZS5wdXNoKHQucGFnZVgpLG4ucHVzaCh0LnBhZ2VZKSxpLnB1c2godC5jbGllbnRYKSxvLnB1c2godC5jbGllbnRZKX0pLHtwYWdlWDooci5hcHBseShNYXRoLGUpK2EuYXBwbHkoTWF0aCxlKSkvMixwYWdlWTooci5hcHBseShNYXRoLG4pK2EuYXBwbHkoTWF0aCxuKSkvMixjbGllbnRYOihyLmFwcGx5KE1hdGgsaSkrYS5hcHBseShNYXRoLGkpKS8yLGNsaWVudFk6KHIuYXBwbHkoTWF0aCxvKSthLmFwcGx5KE1hdGgsbykpLzJ9KX0sZ2V0VmVsb2NpdHk6ZnVuY3Rpb24odCxlLG4pe3JldHVybnt4Ok1hdGguYWJzKGUvdCl8fDAseTpNYXRoLmFicyhuL3QpfHwwfX0sZ2V0QW5nbGU6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmNsaWVudFgtdC5jbGllbnRYLGk9ZS5jbGllbnRZLXQuY2xpZW50WTtyZXR1cm4gMTgwKk1hdGguYXRhbjIoaSxuKS9NYXRoLlBJfSxnZXREaXJlY3Rpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5hYnModC5jbGllbnRYLWUuY2xpZW50WCk+PU1hdGguYWJzKHQuY2xpZW50WS1lLmNsaWVudFkpP3QuY2xpZW50WC1lLmNsaWVudFg+MD9jdDpkdDp0LmNsaWVudFktZS5jbGllbnRZPjA/aHQ6dXR9LGdldERpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5jbGllbnRYLXQuY2xpZW50WCxpPWUuY2xpZW50WS10LmNsaWVudFk7cmV0dXJuIE1hdGguc3FydChuKm4raSppKX0sZ2V0U2NhbGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PTImJmUubGVuZ3RoPj0yP3RoaXMuZ2V0RGlzdGFuY2UoZVswXSxlWzFdKS90aGlzLmdldERpc3RhbmNlKHRbMF0sdFsxXSk6MX0sZ2V0Um90YXRpb246ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5sZW5ndGg+PTImJmUubGVuZ3RoPj0yP3RoaXMuZ2V0QW5nbGUoZVsxXSxlWzBdKS10aGlzLmdldEFuZ2xlKHRbMV0sdFswXSk6MH0saXNWZXJ0aWNhbDpmdW5jdGlvbih0KXtyZXR1cm4gdD09aHR8fHQ9PXV0fSxzZXRQcmVmaXhlZENzczpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz1bXCJcIixcIldlYmtpdFwiLFwiTW96XCIsXCJPXCIsXCJtc1wiXTtlPW90LnRvQ2FtZWxDYXNlKGUpO2Zvcih2YXIgcj0wO3I8by5sZW5ndGg7cisrKXt2YXIgYT1lO2lmKG9bcl0mJihhPW9bcl0rYS5zbGljZSgwLDEpLnRvVXBwZXJDYXNlKCkrYS5zbGljZSgxKSksYSBpbiB0LnN0eWxlKXt0LnN0eWxlW2FdPShudWxsPT09aXx8aSkmJm58fFwiXCI7YnJlYWt9fX0sdG9nZ2xlQmVoYXZpb3I6ZnVuY3Rpb24odCxlLG4pe2lmKGUmJnQmJnQuc3R5bGUpe290LmVhY2goZSxmdW5jdGlvbihlLGkpe290LnNldFByZWZpeGVkQ3NzKHQsaSxlLG4pfSk7dmFyIGk9biYmZnVuY3Rpb24oKXtyZXR1cm4hMX07XCJub25lXCI9PWUudXNlclNlbGVjdCYmKHQub25zZWxlY3RzdGFydD1pKSxcIm5vbmVcIj09ZS51c2VyRHJhZyYmKHQub25kcmFnc3RhcnQ9aSl9fSx0b0NhbWVsQ2FzZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5yZXBsYWNlKC9bXy1dKFthLXpdKS9nLGZ1bmN0aW9uKHQpe3JldHVybiB0WzFdLnRvVXBwZXJDYXNlKCl9KX19LGl0PXN0LmV2ZW50PXtwcmV2ZW50TW91c2VFdmVudHM6ITEsc3RhcnRlZDohMSxzaG91bGREZXRlY3Q6ITEsb246ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj1lLnNwbGl0KFwiIFwiKTtvdC5lYWNoKHIsZnVuY3Rpb24oZSl7b3Qub24odCxlLG4saSksbyYmbyhlKX0pfSxvZmY6ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj1lLnNwbGl0KFwiIFwiKTtvdC5lYWNoKHIsZnVuY3Rpb24oZSl7b3Qub2ZmKHQsZSxuLGkpLG8mJm8oZSl9KX0sb25Ub3VjaDpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10aGlzLHI9ZnVuY3Rpb24oaSl7dmFyIHIsYT1pLnR5cGUudG9Mb3dlckNhc2UoKSxzPXN0LkhBU19QT0lOVEVSRVZFTlRTLGw9b3QuaW5TdHIoYSxcIm1vdXNlXCIpO2wmJm8ucHJldmVudE1vdXNlRXZlbnRzfHwobCYmZT09bXQmJjA9PT1pLmJ1dHRvbj8oby5wcmV2ZW50TW91c2VFdmVudHM9ITEsby5zaG91bGREZXRlY3Q9ITApOnMmJmU9PW10P28uc2hvdWxkRGV0ZWN0PTE9PT1pLmJ1dHRvbnN8fGF0Lm1hdGNoVHlwZShwdCxpKTpsfHxlIT1tdHx8KG8ucHJldmVudE1vdXNlRXZlbnRzPSEwLG8uc2hvdWxkRGV0ZWN0PSEwKSxzJiZlIT12dCYmYXQudXBkYXRlUG9pbnRlcihlLGkpLG8uc2hvdWxkRGV0ZWN0JiYocj1vLmRvRGV0ZWN0LmNhbGwobyxpLGUsdCxuKSkscj09dnQmJihvLnByZXZlbnRNb3VzZUV2ZW50cz0hMSxvLnNob3VsZERldGVjdD0hMSxhdC5yZXNldCgpKSxzJiZlPT12dCYmYXQudXBkYXRlUG9pbnRlcihlLGkpKX07cmV0dXJuIHRoaXMub24odCxsdFtlXSxyLGkpLHJ9LGRvRGV0ZWN0OmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMuZ2V0VG91Y2hMaXN0KHQsZSkscj1vLmxlbmd0aCxhPWUscz1vLnRyaWdnZXIsbD1yO2U9PW10P3M9eXQ6ZT09dnQmJihzPWJ0LGw9by5sZW5ndGgtKHQuY2hhbmdlZFRvdWNoZXM/dC5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg6MSkpLGw+MCYmdGhpcy5zdGFydGVkJiYoYT1fdCksdGhpcy5zdGFydGVkPSEwO3ZhciB1PXRoaXMuY29sbGVjdEV2ZW50RGF0YShuLGEsbyx0KTtyZXR1cm4gZSE9dnQmJmkuY2FsbChydCx1KSxzJiYodS5jaGFuZ2VkTGVuZ3RoPWwsdS5ldmVudFR5cGU9cyxpLmNhbGwocnQsdSksdS5ldmVudFR5cGU9YSxkZWxldGUgdS5jaGFuZ2VkTGVuZ3RoKSxhPT12dCYmKGkuY2FsbChydCx1KSx0aGlzLnN0YXJ0ZWQ9ITEpLGF9LGRldGVybWluZUV2ZW50VHlwZXM6ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD1zdC5IQVNfUE9JTlRFUkVWRU5UUz93aW5kb3cuUG9pbnRlckV2ZW50P1tcInBvaW50ZXJkb3duXCIsXCJwb2ludGVybW92ZVwiLFwicG9pbnRlcnVwIHBvaW50ZXJjYW5jZWwgbG9zdHBvaW50ZXJjYXB0dXJlXCJdOltcIk1TUG9pbnRlckRvd25cIixcIk1TUG9pbnRlck1vdmVcIixcIk1TUG9pbnRlclVwIE1TUG9pbnRlckNhbmNlbCBNU0xvc3RQb2ludGVyQ2FwdHVyZVwiXTpzdC5OT19NT1VTRUVWRU5UUz9bXCJ0b3VjaHN0YXJ0XCIsXCJ0b3VjaG1vdmVcIixcInRvdWNoZW5kIHRvdWNoY2FuY2VsXCJdOltcInRvdWNoc3RhcnQgbW91c2Vkb3duXCIsXCJ0b3VjaG1vdmUgbW91c2Vtb3ZlXCIsXCJ0b3VjaGVuZCB0b3VjaGNhbmNlbCBtb3VzZXVwXCJdLGx0W210XT10WzBdLGx0W190XT10WzFdLGx0W3Z0XT10WzJdLGx0fSxnZXRUb3VjaExpc3Q6ZnVuY3Rpb24odCxlKXtpZihzdC5IQVNfUE9JTlRFUkVWRU5UUylyZXR1cm4gYXQuZ2V0VG91Y2hMaXN0KCk7aWYodC50b3VjaGVzKXtpZihlPT1fdClyZXR1cm4gdC50b3VjaGVzO3ZhciBuPVtdLGk9W10uY29uY2F0KG90LnRvQXJyYXkodC50b3VjaGVzKSxvdC50b0FycmF5KHQuY2hhbmdlZFRvdWNoZXMpKSxvPVtdO3JldHVybiBvdC5lYWNoKGksZnVuY3Rpb24odCl7LTE9PT1vdC5pbkFycmF5KG4sdC5pZGVudGlmaWVyKSYmby5wdXNoKHQpLG4ucHVzaCh0LmlkZW50aWZpZXIpfSksb31yZXR1cm4gdC5pZGVudGlmaWVyPTEsW3RdfSxjb2xsZWN0RXZlbnREYXRhOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXB0O3JldHVybiBvdC5pblN0cihpLnR5cGUsXCJtb3VzZVwiKXx8YXQubWF0Y2hUeXBlKGZ0LGkpP289ZnQ6YXQubWF0Y2hUeXBlKGd0LGkpJiYobz1ndCkse2NlbnRlcjpvdC5nZXRDZW50ZXIobiksdGltZVN0YW1wOkRhdGUubm93KCksdGFyZ2V0OmkudGFyZ2V0LHRvdWNoZXM6bixldmVudFR5cGU6ZSxwb2ludGVyVHlwZTpvLHNyY0V2ZW50OmkscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNyY0V2ZW50O3QucHJldmVudE1hbmlwdWxhdGlvbiYmdC5wcmV2ZW50TWFuaXB1bGF0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt0aGlzLnNyY0V2ZW50LnN0b3BQcm9wYWdhdGlvbigpfSxzdG9wRGV0ZWN0OmZ1bmN0aW9uKCl7cmV0dXJuIHJ0LnN0b3BEZXRlY3QoKX19fX0sYXQ9c3QuUG9pbnRlckV2ZW50PXtwb2ludGVyczp7fSxnZXRUb3VjaExpc3Q6ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gb3QuZWFjaCh0aGlzLnBvaW50ZXJzLGZ1bmN0aW9uKGUpe3QucHVzaChlKX0pLHR9LHVwZGF0ZVBvaW50ZXI6ZnVuY3Rpb24odCxlKXt0PT12dHx8dCE9dnQmJjEhPT1lLmJ1dHRvbnM/ZGVsZXRlIHRoaXMucG9pbnRlcnNbZS5wb2ludGVySWRdOihlLmlkZW50aWZpZXI9ZS5wb2ludGVySWQsdGhpcy5wb2ludGVyc1tlLnBvaW50ZXJJZF09ZSl9LG1hdGNoVHlwZTpmdW5jdGlvbih0LGUpe2lmKCFlLnBvaW50ZXJUeXBlKXJldHVybiExO3ZhciBuPWUucG9pbnRlclR5cGUsaT17fTtyZXR1cm4gaVtmdF09bj09PShlLk1TUE9JTlRFUl9UWVBFX01PVVNFfHxmdCksaVtwdF09bj09PShlLk1TUE9JTlRFUl9UWVBFX1RPVUNIfHxwdCksaVtndF09bj09PShlLk1TUE9JTlRFUl9UWVBFX1BFTnx8Z3QpLGlbdF19LHJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5wb2ludGVycz17fX19LHJ0PXN0LmRldGVjdGlvbj17Z2VzdHVyZXM6W10sY3VycmVudDpudWxsLHByZXZpb3VzOm51bGwsc3RvcHBlZDohMSxzdGFydERldGVjdDpmdW5jdGlvbih0LGUpe3RoaXMuY3VycmVudHx8KHRoaXMuc3RvcHBlZD0hMSx0aGlzLmN1cnJlbnQ9e2luc3Q6dCxzdGFydEV2ZW50Om90LmV4dGVuZCh7fSxlKSxsYXN0RXZlbnQ6ITEsbGFzdENhbGNFdmVudDohMSxmdXR1cmVDYWxjRXZlbnQ6ITEsbGFzdENhbGNEYXRhOnt9LG5hbWU6XCJcIn0sdGhpcy5kZXRlY3QoZSkpfSxkZXRlY3Q6ZnVuY3Rpb24odCl7aWYodGhpcy5jdXJyZW50JiYhdGhpcy5zdG9wcGVkKXt0PXRoaXMuZXh0ZW5kRXZlbnREYXRhKHQpO3ZhciBlPXRoaXMuY3VycmVudC5pbnN0LG49ZS5vcHRpb25zO3JldHVybiBvdC5lYWNoKHRoaXMuZ2VzdHVyZXMsZnVuY3Rpb24oaSl7IXRoaXMuc3RvcHBlZCYmZS5lbmFibGVkJiZuW2kubmFtZV0mJmkuaGFuZGxlci5jYWxsKGksdCxlKX0sdGhpcyksdGhpcy5jdXJyZW50JiYodGhpcy5jdXJyZW50Lmxhc3RFdmVudD10KSx0LmV2ZW50VHlwZT09dnQmJnRoaXMuc3RvcERldGVjdCgpLHR9fSxzdG9wRGV0ZWN0OmZ1bmN0aW9uKCl7dGhpcy5wcmV2aW91cz1vdC5leHRlbmQoe30sdGhpcy5jdXJyZW50KSx0aGlzLmN1cnJlbnQ9bnVsbCx0aGlzLnN0b3BwZWQ9ITB9LGdldENhbGN1bGF0ZWREYXRhOmZ1bmN0aW9uKHQsZSxuLGksbyl7dmFyIHI9dGhpcy5jdXJyZW50LGE9ITEscz1yLmxhc3RDYWxjRXZlbnQsbD1yLmxhc3RDYWxjRGF0YTtzJiZ0LnRpbWVTdGFtcC1zLnRpbWVTdGFtcD5zdC5DQUxDVUxBVEVfSU5URVJWQUwmJihlPXMuY2VudGVyLG49dC50aW1lU3RhbXAtcy50aW1lU3RhbXAsaT10LmNlbnRlci5jbGllbnRYLXMuY2VudGVyLmNsaWVudFgsbz10LmNlbnRlci5jbGllbnRZLXMuY2VudGVyLmNsaWVudFksYT0hMCksdC5ldmVudFR5cGUhPXl0JiZ0LmV2ZW50VHlwZSE9YnR8fChyLmZ1dHVyZUNhbGNFdmVudD10KSxyLmxhc3RDYWxjRXZlbnQmJiFhfHwobC52ZWxvY2l0eT1vdC5nZXRWZWxvY2l0eShuLGksbyksbC5hbmdsZT1vdC5nZXRBbmdsZShlLHQuY2VudGVyKSxsLmRpcmVjdGlvbj1vdC5nZXREaXJlY3Rpb24oZSx0LmNlbnRlciksci5sYXN0Q2FsY0V2ZW50PXIuZnV0dXJlQ2FsY0V2ZW50fHx0LHIuZnV0dXJlQ2FsY0V2ZW50PXQpLHQudmVsb2NpdHlYPWwudmVsb2NpdHkueCx0LnZlbG9jaXR5WT1sLnZlbG9jaXR5LnksdC5pbnRlcmltQW5nbGU9bC5hbmdsZSx0LmludGVyaW1EaXJlY3Rpb249bC5kaXJlY3Rpb259LGV4dGVuZEV2ZW50RGF0YTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmN1cnJlbnQsbj1lLnN0YXJ0RXZlbnQsaT1lLmxhc3RFdmVudHx8bjt0LmV2ZW50VHlwZSE9eXQmJnQuZXZlbnRUeXBlIT1idHx8KG4udG91Y2hlcz1bXSxvdC5lYWNoKHQudG91Y2hlcyxmdW5jdGlvbih0KXtuLnRvdWNoZXMucHVzaCh7Y2xpZW50WDp0LmNsaWVudFgsY2xpZW50WTp0LmNsaWVudFl9KX0pKTt2YXIgbz10LnRpbWVTdGFtcC1uLnRpbWVTdGFtcCxyPXQuY2VudGVyLmNsaWVudFgtbi5jZW50ZXIuY2xpZW50WCxhPXQuY2VudGVyLmNsaWVudFktbi5jZW50ZXIuY2xpZW50WTtyZXR1cm4gdGhpcy5nZXRDYWxjdWxhdGVkRGF0YSh0LGkuY2VudGVyLG8scixhKSxvdC5leHRlbmQodCx7c3RhcnRFdmVudDpuLGRlbHRhVGltZTpvLGRlbHRhWDpyLGRlbHRhWTphLGRpc3RhbmNlOm90LmdldERpc3RhbmNlKG4uY2VudGVyLHQuY2VudGVyKSxhbmdsZTpvdC5nZXRBbmdsZShuLmNlbnRlcix0LmNlbnRlciksZGlyZWN0aW9uOm90LmdldERpcmVjdGlvbihuLmNlbnRlcix0LmNlbnRlciksc2NhbGU6b3QuZ2V0U2NhbGUobi50b3VjaGVzLHQudG91Y2hlcykscm90YXRpb246b3QuZ2V0Um90YXRpb24obi50b3VjaGVzLHQudG91Y2hlcyl9KSx0fSxyZWdpc3RlcjpmdW5jdGlvbih0KXt2YXIgZT10LmRlZmF1bHRzfHx7fTtyZXR1cm4gdm9pZCAwPT09ZVt0Lm5hbWVdJiYoZVt0Lm5hbWVdPSEwKSxvdC5leHRlbmQoc3QuZGVmYXVsdHMsZSwhMCksdC5pbmRleD10LmluZGV4fHwxZTMsdGhpcy5nZXN0dXJlcy5wdXNoKHQpLHRoaXMuZ2VzdHVyZXMuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LmluZGV4PGUuaW5kZXg/LTE6dC5pbmRleD5lLmluZGV4PzE6MH0pLHRoaXMuZ2VzdHVyZXN9fSxzdC5JbnN0YW5jZT1mdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1lJiZlLnBhc3NpdmU/e3Bhc3NpdmU6ITB9OnZvaWQgMDshZnVuY3Rpb24odCl7c3QuUkVBRFl8fChpdC5kZXRlcm1pbmVFdmVudFR5cGVzKCksb3QuZWFjaChzdC5nZXN0dXJlcyxmdW5jdGlvbih0KXtydC5yZWdpc3Rlcih0KX0pLGl0Lm9uVG91Y2goc3QuRE9DVU1FTlQsX3QscnQuZGV0ZWN0LHQpLGl0Lm9uVG91Y2goc3QuRE9DVU1FTlQsdnQscnQuZGV0ZWN0LHQpLHN0LlJFQURZPSEwKX0oaSksdGhpcy5lbGVtZW50PXQsdGhpcy5lbmFibGVkPSEwLG90LmVhY2goZSxmdW5jdGlvbih0LG4pe2RlbGV0ZSBlW25dLGVbb3QudG9DYW1lbENhc2UobildPXR9KSx0aGlzLm9wdGlvbnM9b3QuZXh0ZW5kKG90LmV4dGVuZCh7fSxzdC5kZWZhdWx0cyksZXx8e30pLHRoaXMub3B0aW9ucy5saXN0ZW5lck9wdGlvbnM9aSx0aGlzLm9wdGlvbnMuYmVoYXZpb3ImJm90LnRvZ2dsZUJlaGF2aW9yKHRoaXMuZWxlbWVudCx0aGlzLm9wdGlvbnMuYmVoYXZpb3IsITApLHRoaXMuZXZlbnRTdGFydEhhbmRsZXI9aXQub25Ub3VjaCh0LG10LGZ1bmN0aW9uKHQpe24uZW5hYmxlZCYmdC5ldmVudFR5cGU9PW10P3J0LnN0YXJ0RGV0ZWN0KG4sdCk6dC5ldmVudFR5cGU9PXl0JiZydC5kZXRlY3QodCl9LGkpLHRoaXMuZXZlbnRIYW5kbGVycz1bXX0sc3QuSW5zdGFuY2UucHJvdG90eXBlPXtvbjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcztyZXR1cm4gaXQub24oaS5lbGVtZW50LHQsZSxRLmV4dGVuZCh7fSxpLm9wdGlvbnMubGlzdGVuZXJPcHRpb25zLG4pLGZ1bmN0aW9uKHQpe2kuZXZlbnRIYW5kbGVycy5wdXNoKHtnZXN0dXJlOnQsaGFuZGxlcjplfSl9KSxpfSxvZmY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXRoaXM7cmV0dXJuIGl0Lm9mZihpLmVsZW1lbnQsdCxlLFEuZXh0ZW5kKHt9LGkub3B0aW9ucy5saXN0ZW5lck9wdGlvbnMsbiksZnVuY3Rpb24odCl7dmFyIG49b3QuaW5BcnJheShpLmV2ZW50SGFuZGxlcnMse2dlc3R1cmU6dCxoYW5kbGVyOmV9LCEwKTtuPj0wJiZpLmV2ZW50SGFuZGxlcnMuc3BsaWNlKG4sMSl9KSxpfSx0cmlnZ2VyOmZ1bmN0aW9uKHQsZSl7ZXx8KGU9e30pO3ZhciBuPXN0LkRPQ1VNRU5ULmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7bi5pbml0RXZlbnQodCwhMCwhMCksbi5nZXN0dXJlPWU7dmFyIGk9dGhpcy5lbGVtZW50O3JldHVybiBvdC5oYXNQYXJlbnQoZS50YXJnZXQsaSkmJihpPWUudGFyZ2V0KSxpLmRpc3BhdGNoRXZlbnQobiksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVuYWJsZWQ9dCx0aGlzfSxkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIHQsZTtmb3Iob3QudG9nZ2xlQmVoYXZpb3IodGhpcy5lbGVtZW50LHRoaXMub3B0aW9ucy5iZWhhdmlvciwhMSksdD0tMTtlPXRoaXMuZXZlbnRIYW5kbGVyc1srK3RdOylvdC5vZmYodGhpcy5lbGVtZW50LGUuZ2VzdHVyZSxlLmhhbmRsZXIpO3JldHVybiB0aGlzLmV2ZW50SGFuZGxlcnM9W10saXQub2ZmKHRoaXMuZWxlbWVudCxsdFttdF0sdGhpcy5ldmVudFN0YXJ0SGFuZGxlciksbnVsbH19LGZ1bmN0aW9uKHQpe3ZhciBlPSExO3N0Lmdlc3R1cmVzLkRyYWc9e25hbWU6dCxpbmRleDo1MCxoYW5kbGVyOmZ1bmN0aW9uKG4saSl7dmFyIG89cnQuY3VycmVudDtpZighKGkub3B0aW9ucy5kcmFnTWF4VG91Y2hlcz4wJiZuLnRvdWNoZXMubGVuZ3RoPmkub3B0aW9ucy5kcmFnTWF4VG91Y2hlcykpc3dpdGNoKG4uZXZlbnRUeXBlKXtjYXNlIG10OmU9ITE7YnJlYWs7Y2FzZSBfdDppZihuLmRpc3RhbmNlPGkub3B0aW9ucy5kcmFnTWluRGlzdGFuY2UmJm8ubmFtZSE9dClyZXR1cm47dmFyIHI9by5zdGFydEV2ZW50LmNlbnRlcjtpZihvLm5hbWUhPXQmJihvLm5hbWU9dCxpLm9wdGlvbnMuZHJhZ0Rpc3RhbmNlQ29ycmVjdGlvbiYmbi5kaXN0YW5jZT4wKSl7dmFyIGE9TWF0aC5hYnMoaS5vcHRpb25zLmRyYWdNaW5EaXN0YW5jZS9uLmRpc3RhbmNlKTtyLnBhZ2VYKz1uLmRlbHRhWCphLHIucGFnZVkrPW4uZGVsdGFZKmEsci5jbGllbnRYKz1uLmRlbHRhWCphLHIuY2xpZW50WSs9bi5kZWx0YVkqYSxuPXJ0LmV4dGVuZEV2ZW50RGF0YShuKX0oby5sYXN0RXZlbnQuZHJhZ0xvY2tUb0F4aXN8fGkub3B0aW9ucy5kcmFnTG9ja1RvQXhpcyYmaS5vcHRpb25zLmRyYWdMb2NrTWluRGlzdGFuY2U8PW4uZGlzdGFuY2UpJiYobi5kcmFnTG9ja1RvQXhpcz0hMCk7dmFyIHM9by5sYXN0RXZlbnQuZGlyZWN0aW9uO24uZHJhZ0xvY2tUb0F4aXMmJnMhPT1uLmRpcmVjdGlvbiYmKG90LmlzVmVydGljYWwocyk/bi5kaXJlY3Rpb249bi5kZWx0YVk8MD9odDp1dDpuLmRpcmVjdGlvbj1uLmRlbHRhWDwwP2N0OmR0KSxlfHwoaS50cmlnZ2VyKHQrXCJzdGFydFwiLG4pLGU9ITApLGkudHJpZ2dlcih0LG4pLGkudHJpZ2dlcih0K24uZGlyZWN0aW9uLG4pO3ZhciBsPW90LmlzVmVydGljYWwobi5kaXJlY3Rpb24pOyhpLm9wdGlvbnMuZHJhZ0Jsb2NrVmVydGljYWwmJmx8fGkub3B0aW9ucy5kcmFnQmxvY2tIb3Jpem9udGFsJiYhbCkmJm4ucHJldmVudERlZmF1bHQoKTticmVhaztjYXNlIGJ0OmUmJm4uY2hhbmdlZExlbmd0aDw9aS5vcHRpb25zLmRyYWdNYXhUb3VjaGVzJiYoaS50cmlnZ2VyKHQrXCJlbmRcIixuKSxlPSExKTticmVhaztjYXNlIHZ0OmU9ITF9fSxkZWZhdWx0czp7ZHJhZ01pbkRpc3RhbmNlOjEwLGRyYWdEaXN0YW5jZUNvcnJlY3Rpb246ITAsZHJhZ01heFRvdWNoZXM6MSxkcmFnQmxvY2tIb3Jpem9udGFsOiExLGRyYWdCbG9ja1ZlcnRpY2FsOiExLGRyYWdMb2NrVG9BeGlzOiExLGRyYWdMb2NrTWluRGlzdGFuY2U6MjV9fX0oXCJkcmFnXCIpLHN0Lmdlc3R1cmVzLkdlc3R1cmU9e25hbWU6XCJnZXN0dXJlXCIsaW5kZXg6MTMzNyxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7ZS50cmlnZ2VyKHRoaXMubmFtZSx0KX19LGZ1bmN0aW9uKHQpe3ZhciBlO3N0Lmdlc3R1cmVzLkhvbGQ9e25hbWU6dCxpbmRleDoxMCxkZWZhdWx0czp7aG9sZFRpbWVvdXQ6NTAwLGhvbGRUaHJlc2hvbGQ6Mn0saGFuZGxlcjpmdW5jdGlvbihuLGkpe3ZhciBvPWkub3B0aW9ucyxyPXJ0LmN1cnJlbnQ7c3dpdGNoKG4uZXZlbnRUeXBlKXtjYXNlIG10OmNsZWFyVGltZW91dChlKSxyLm5hbWU9dCxlPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyJiZyLm5hbWU9PXQmJmkudHJpZ2dlcih0LG4pfSxvLmhvbGRUaW1lb3V0KTticmVhaztjYXNlIF90Om4uZGlzdGFuY2U+by5ob2xkVGhyZXNob2xkJiZjbGVhclRpbWVvdXQoZSk7YnJlYWs7Y2FzZSBidDpjbGVhclRpbWVvdXQoZSl9fX19KFwiaG9sZFwiKSxzdC5nZXN0dXJlcy5SZWxlYXNlPXtuYW1lOlwicmVsZWFzZVwiLGluZGV4OjEvMCxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7dC5ldmVudFR5cGU9PWJ0JiZlLnRyaWdnZXIodGhpcy5uYW1lLHQpfX0sc3QuZ2VzdHVyZXMuU3dpcGU9e25hbWU6XCJzd2lwZVwiLGluZGV4OjQwLGRlZmF1bHRzOntzd2lwZU1pblRvdWNoZXM6MSxzd2lwZU1heFRvdWNoZXM6MSxzd2lwZVZlbG9jaXR5WDouNixzd2lwZVZlbG9jaXR5WTouNn0saGFuZGxlcjpmdW5jdGlvbih0LGUpe2lmKHQuZXZlbnRUeXBlPT1idCl7dmFyIG49dC50b3VjaGVzLmxlbmd0aCxpPWUub3B0aW9ucztpZihuPGkuc3dpcGVNaW5Ub3VjaGVzfHxuPmkuc3dpcGVNYXhUb3VjaGVzKXJldHVybjsodC52ZWxvY2l0eVg+aS5zd2lwZVZlbG9jaXR5WHx8dC52ZWxvY2l0eVk+aS5zd2lwZVZlbG9jaXR5WSkmJihlLnRyaWdnZXIodGhpcy5uYW1lLHQpLGUudHJpZ2dlcih0aGlzLm5hbWUrdC5kaXJlY3Rpb24sdCkpfX19LGZ1bmN0aW9uKHQpe3ZhciBlPSExO3N0Lmdlc3R1cmVzLlRhcD17bmFtZTp0LGluZGV4OjEwMCxoYW5kbGVyOmZ1bmN0aW9uKG4saSl7dmFyIG8scixhPWkub3B0aW9ucyxzPXJ0LmN1cnJlbnQsbD1ydC5wcmV2aW91cztzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6ZT0hMTticmVhaztjYXNlIF90OmU9ZXx8bi5kaXN0YW5jZT5hLnRhcE1heERpc3RhbmNlO2JyZWFrO2Nhc2UgdnQ6IW90LmluU3RyKG4uc3JjRXZlbnQudHlwZSxcImNhbmNlbFwiKSYmbi5kZWx0YVRpbWU8YS50YXBNYXhUaW1lJiYhZSYmKG89bCYmbC5sYXN0RXZlbnQmJm4udGltZVN0YW1wLWwubGFzdEV2ZW50LnRpbWVTdGFtcCxyPSExLGwmJmwubmFtZT09dCYmbyYmbzxhLmRvdWJsZVRhcEludGVydmFsJiZuLmRpc3RhbmNlPGEuZG91YmxlVGFwRGlzdGFuY2UmJihpLnRyaWdnZXIoXCJkb3VibGV0YXBcIixuKSxyPSEwKSxyJiYhYS50YXBBbHdheXN8fChzLm5hbWU9dCxpLnRyaWdnZXIocy5uYW1lLG4pKSl9fSxkZWZhdWx0czp7dGFwTWF4VGltZToyNTAsdGFwTWF4RGlzdGFuY2U6MTAsdGFwQWx3YXlzOiEwLGRvdWJsZVRhcERpc3RhbmNlOjIwLGRvdWJsZVRhcEludGVydmFsOjMwMH19fShcInRhcFwiKSxzdC5nZXN0dXJlcy5Ub3VjaD17bmFtZTpcInRvdWNoXCIsaW5kZXg6LTEvMCxkZWZhdWx0czp7cHJldmVudERlZmF1bHQ6ITEscHJldmVudE1vdXNlOiExfSxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7ZS5vcHRpb25zLnByZXZlbnRNb3VzZSYmdC5wb2ludGVyVHlwZT09ZnQ/dC5zdG9wRGV0ZWN0KCk6KGUub3B0aW9ucy5wcmV2ZW50RGVmYXVsdCYmdC5wcmV2ZW50RGVmYXVsdCgpLHQuZXZlbnRUeXBlPT15dCYmZS50cmlnZ2VyKFwidG91Y2hcIix0KSl9fSxmdW5jdGlvbih0KXt2YXIgZT0hMTtzdC5nZXN0dXJlcy5UcmFuc2Zvcm09e25hbWU6dCxpbmRleDo0NSxkZWZhdWx0czp7dHJhbnNmb3JtTWluU2NhbGU6LjAxLHRyYW5zZm9ybU1pblJvdGF0aW9uOjF9LGhhbmRsZXI6ZnVuY3Rpb24obixpKXtzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6ZT0hMTticmVhaztjYXNlIF90OmlmKG4udG91Y2hlcy5sZW5ndGg8MilyZXR1cm47dmFyIG89TWF0aC5hYnMoMS1uLnNjYWxlKSxyPU1hdGguYWJzKG4ucm90YXRpb24pO2lmKG88aS5vcHRpb25zLnRyYW5zZm9ybU1pblNjYWxlJiZyPGkub3B0aW9ucy50cmFuc2Zvcm1NaW5Sb3RhdGlvbilyZXR1cm47cnQuY3VycmVudC5uYW1lPXQsZXx8KGkudHJpZ2dlcih0K1wic3RhcnRcIixuKSxlPSEwKSxpLnRyaWdnZXIodCxuKSxyPmkub3B0aW9ucy50cmFuc2Zvcm1NaW5Sb3RhdGlvbiYmaS50cmlnZ2VyKFwicm90YXRlXCIsbiksbz5pLm9wdGlvbnMudHJhbnNmb3JtTWluU2NhbGUmJihpLnRyaWdnZXIoXCJwaW5jaFwiLG4pLGkudHJpZ2dlcihcInBpbmNoXCIrKG4uc2NhbGU8MT9cImluXCI6XCJvdXRcIiksbikpO2JyZWFrO2Nhc2UgYnQ6ZSYmbi5jaGFuZ2VkTGVuZ3RoPDImJihpLnRyaWdnZXIodCtcImVuZFwiLG4pLGU9ITEpfX19fShcInRyYW5zZm9ybVwiKTt2YXIga3Q9dm9pZCAwLHd0PXZvaWQgMCxFdD1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpLHRoaXMucXVldWU9W119cmV0dXJuIGcodCxbe2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLnF1ZXVlLnB1c2godCksMT09PXRoaXMucXVldWUubGVuZ3RoJiZzZXRJbW1lZGlhdGUodGhpcy5xdWV1ZVswXSksZS50aGVuKGZ1bmN0aW9uKCl7bi5xdWV1ZS5zaGlmdCgpLG4ucXVldWUubGVuZ3RoPjAmJnNldFRpbWVvdXQobi5xdWV1ZVswXSwxZTMvMzApfSl9fV0pLHR9KCkpLEN0PWZ1bmN0aW9uKHQsZSl7W1wiaWRcIixcImNsYXNzXCIsXCJhbmltYXRpb25cIl0uZm9yRWFjaChmdW5jdGlvbihuKXtyZXR1cm4gZS5oYXNPd25Qcm9wZXJ0eShuKSYmdC5zZXRBdHRyaWJ1dGUobixlW25dKX0pLGUubW9kaWZpZXImJlEuYWRkTW9kaWZpZXIodCxlLm1vZGlmaWVyKX0sQXQ9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9O3JldHVybiBlPV8oe30sZSksXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5tZXNzYWdlPXQ6ZT10LGUmJihlLm1lc3NhZ2V8fGUubWVzc2FnZUhUTUwpfHxRLnRocm93KFwiTm90aWZpY2F0aW9ucyBtdXN0IGNvbnRhaW4gYSBtZXNzYWdlXCIpLChlLmhhc093blByb3BlcnR5KFwiYnV0dG9uTGFiZWxzXCIpfHxlLmhhc093blByb3BlcnR5KFwiYnV0dG9uTGFiZWxcIikpJiYoZS5idXR0b25MYWJlbHM9ZS5idXR0b25MYWJlbHN8fGUuYnV0dG9uTGFiZWwsQXJyYXkuaXNBcnJheShlLmJ1dHRvbkxhYmVscyl8fChlLmJ1dHRvbkxhYmVscz1bZS5idXR0b25MYWJlbHN8fFwiXCJdKSksUS5leHRlbmQoe2NvbXBpbGU6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGNhbGxiYWNrOmZ1bmN0aW9uKHQpe3JldHVybiB0fSxhbmltYXRpb246XCJkZWZhdWx0XCIsY2FuY2VsYWJsZTohMSxwcmltYXJ5QnV0dG9uSW5kZXg6KGUuYnV0dG9uTGFiZWxzfHxuLmJ1dHRvbkxhYmVsc3x8W10pLmxlbmd0aC0xfSxuLGUpfSxTdD17fTtTdC5fY3JlYXRlQWxlcnREaWFsb2c9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLGk9MDtpPHQ7aSsrKWVbaV09YXJndW1lbnRzW2ldO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXt2YXIgaT1BdC5hcHBseSh2b2lkIDAsZSk7US5jaGVja01pc3NpbmdJbXBvcnQoXCJBbGVydERpYWxvZ1wiLFwiQWxlcnREaWFsb2dCdXR0b25cIik7dmFyIG89XCJcIjtpLmlzUHJvbXB0JiYobz0nXFxuICAgICAgPGlucHV0XFxuICAgICAgICBjbGFzcz1cInRleHQtaW5wdXQgdGV4dC1pbnB1dC0tdW5kZXJiYXJcIlxcbiAgICAgICAgdHlwZT1cIicrKGkuaW5wdXRUeXBlfHxcInRleHRcIikrJ1wiXFxuICAgICAgICBwbGFjZWhvbGRlcj1cIicrKGkucGxhY2Vob2xkZXJ8fFwiXCIpKydcIlxcbiAgICAgICAgdmFsdWU9XCInKyhpLmRlZmF1bHRWYWx1ZXx8XCJcIikrJ1wiXFxuICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlOyBtYXJnaW4tdG9wOiAxMHB4O1wiXFxuICAgICAgLz5cXG4gICAgJyk7dmFyIHI9XCJcIjtpLmJ1dHRvbkxhYmVscy5mb3JFYWNoKGZ1bmN0aW9uKHQsZSl7cis9J1xcbiAgICAgIDxvbnMtYWxlcnQtZGlhbG9nLWJ1dHRvblxcbiAgICAgICAgY2xhc3M9XCJcXG4gICAgICAgICAgJysoZT09PWkucHJpbWFyeUJ1dHRvbkluZGV4P1wiIGFsZXJ0LWRpYWxvZy1idXR0b24tLXByaW1hbFwiOlwiXCIpK1wiXFxuICAgICAgICAgIFwiKyhpLmJ1dHRvbkxhYmVscy5sZW5ndGg8PTI/XCIgYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcm93Zm9vdGVyXCI6XCJcIikrJ1xcbiAgICAgICAgXCJcXG4gICAgICAgIHN0eWxlPVwicG9zaXRpb246IHJlbGF0aXZlO1wiPlxcbiAgICAgICAgJyt0K1wiXFxuICAgICAgPC9vbnMtYWxlcnQtZGlhbG9nLWJ1dHRvbj5cXG4gICAgXCJ9KTt2YXIgYT17fSxzPWZ1bmN0aW9uKCl7YS5kaWFsb2cub25EaWFsb2dDYW5jZWwmJmEuZGlhbG9nLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkaWFsb2ctY2FuY2VsXCIsYS5kaWFsb2cub25EaWFsb2dDYW5jZWwpLE9iamVjdC5rZXlzKGEpLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIGRlbGV0ZSBhW3RdfSksYT1udWxsLGkuZGVzdHJveSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZpLmRlc3Ryb3koKX07YS5kaWFsb2c9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9ucy1hbGVydC1kaWFsb2dcIiksYS5kaWFsb2cuaW5uZXJIVE1MPSdcXG4gICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZy1tYXNrXCJcXG4gICAgICBzdHlsZT1cIlxcbiAgICAgICAgJysoaS5tYXNrQ29sb3I/XCJiYWNrZ3JvdW5kLWNvbG9yOiBcIitpLm1hc2tDb2xvcjpcIlwiKSsnXFxuICAgICAgXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJhbGVydC1kaWFsb2dcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtZGlhbG9nLWNvbnRhaW5lclwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZy10aXRsZVwiPlxcbiAgICAgICAgICAnKyhpLnRpdGxlfHxcIlwiKSsnXFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJhbGVydC1kaWFsb2ctY29udGVudFwiPlxcbiAgICAgICAgICAnKyhpLm1lc3NhZ2V8fGkubWVzc2FnZUhUTUwpK1wiXFxuICAgICAgICAgIFwiK28rJ1xcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVwiXFxuICAgICAgICAgIGFsZXJ0LWRpYWxvZy1mb290ZXJcXG4gICAgICAgICAgJysoaS5idXR0b25MYWJlbHMubGVuZ3RoPD0yP1wiIGFsZXJ0LWRpYWxvZy1mb290ZXItLXJvd2Zvb3RlclwiOlwiXCIpKydcXG4gICAgICAgIFwiPlxcbiAgICAgICAgICAnK3IrXCJcXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gIFwiLG4oYS5kaWFsb2cpLEN0KGEuZGlhbG9nLGkpLGkuaXNQcm9tcHQmJmkuc3VibWl0T25FbnRlciYmKGEuaW5wdXQ9YS5kaWFsb2cucXVlcnlTZWxlY3RvcihcIi50ZXh0LWlucHV0XCIpLGEuaW5wdXQub25rZXlwcmVzcz1mdW5jdGlvbihlKXsxMz09PWUua2V5Q29kZSYmYS5kaWFsb2cuaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtpZihhKXt2YXIgZT1hLmlucHV0LnZhbHVlO3MoKSxpLmNhbGxiYWNrKGUpLHQoZSl9fSl9KSxhLmZvb3Rlcj1hLmRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiLmFsZXJ0LWRpYWxvZy1mb290ZXJcIiksUS5hcnJheUZyb20oYS5kaWFsb2cucXVlcnlTZWxlY3RvckFsbChcIi5hbGVydC1kaWFsb2ctYnV0dG9uXCIpKS5mb3JFYWNoKGZ1bmN0aW9uKGUsbil7ZS5vbmNsaWNrPWZ1bmN0aW9uKCl7YS5kaWFsb2cuaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtpZihhKXt2YXIgZT1uO2kuaXNQcm9tcHQmJihlPW49PT1pLnByaW1hcnlCdXR0b25JbmRleD9hLmlucHV0LnZhbHVlOm51bGwpLGEuZGlhbG9nLnJlbW92ZSgpLHMoKSxpLmNhbGxiYWNrKGUpLHQoZSl9fSl9LGEuZm9vdGVyLmFwcGVuZENoaWxkKGUpfSksaS5jYW5jZWxhYmxlJiYoYS5kaWFsb2cuY2FuY2VsYWJsZT0hMCxhLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbD1mdW5jdGlvbigpe3NldEltbWVkaWF0ZShmdW5jdGlvbigpe2EuZGlhbG9nLnJlbW92ZSgpLHMoKX0pO3ZhciBlPWkuaXNQcm9tcHQ/bnVsbDotMTtpLmNhbGxiYWNrKGUpLHQoZSl9LGEuZGlhbG9nLmFkZEV2ZW50TGlzdGVuZXIoXCJkaWFsb2ctY2FuY2VsXCIsYS5kaWFsb2cub25EaWFsb2dDYW5jZWwsITEpKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEuZGlhbG9nKSxpLmNvbXBpbGUoYS5kaWFsb2cpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe2EuZGlhbG9nLnNob3coKS50aGVuKGZ1bmN0aW9uKCl7aWYoYS5pbnB1dCYmaS5pc1Byb21wdCYmaS5hdXRvZm9jdXMpe3ZhciB0PWEuaW5wdXQudmFsdWUubGVuZ3RoO2EuaW5wdXQuZm9jdXMoKSxhLmlucHV0LnNldFNlbGVjdGlvblJhbmdlKHQsdCl9fSl9KX0pfSxTdC5hbGVydD1mdW5jdGlvbih0LGUpe3JldHVybiBTdC5fY3JlYXRlQWxlcnREaWFsb2codCxlLHtidXR0b25MYWJlbHM6W1wiT0tcIl0sdGl0bGU6XCJBbGVydFwifSl9LFN0LmNvbmZpcm09ZnVuY3Rpb24odCxlKXtyZXR1cm4gU3QuX2NyZWF0ZUFsZXJ0RGlhbG9nKHQsZSx7YnV0dG9uTGFiZWxzOltcIkNhbmNlbFwiLFwiT0tcIl0sdGl0bGU6XCJDb25maXJtXCJ9KX0sU3QucHJvbXB0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFN0Ll9jcmVhdGVBbGVydERpYWxvZyh0LGUse2J1dHRvbkxhYmVsczpbXCJPS1wiXSx0aXRsZTpcIkFsZXJ0XCIsaXNQcm9tcHQ6ITAsYXV0b2ZvY3VzOiEwLHN1Ym1pdE9uRW50ZXI6ITB9KX0sU3QudG9hc3Q9ZnVuY3Rpb24odCxlKXt2YXIgbj1uZXcgUHJvbWlzZShmdW5jdGlvbihpKXtRLmNoZWNrTWlzc2luZ0ltcG9ydChcIlRvYXN0XCIpLGU9QXQodCxlLHt0aW1lb3V0OjAsZm9yY2U6ITF9KTt2YXIgbz1RLmNyZWF0ZUVsZW1lbnQoXCJcXG4gICAgICA8b25zLXRvYXN0PlxcbiAgICAgICAgXCIrZS5tZXNzYWdlK1wiXFxuICAgICAgICBcIisoZS5idXR0b25MYWJlbHM/XCI8YnV0dG9uPlwiK2UuYnV0dG9uTGFiZWxzWzBdK1wiPC9idXR0b24+XCI6XCJcIikrXCJcXG4gICAgICA8L29ucy10b2FzdD5cXG4gICAgXCIpO0N0KG8sZSk7dmFyIHI9ZnVuY3Rpb24odCl7byYmby5oaWRlKCkudGhlbihmdW5jdGlvbigpe28mJihvLnJlbW92ZSgpLG89bnVsbCxlLmNhbGxiYWNrKHQpLGkodCkpfSl9O2UuYnV0dG9uTGFiZWxzJiYoUS5maW5kQ2hpbGQoby5fdG9hc3QsXCJidXR0b25cIikub25jbGljaz1mdW5jdGlvbigpe3JldHVybiByKDApfSksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvKSxlLmNvbXBpbGUobyk7dmFyIGE9ZnVuY3Rpb24oKXtvLnBhcmVudEVsZW1lbnQmJm8uc2hvdyhlKS50aGVuKGZ1bmN0aW9uKCl7ZS50aW1lb3V0JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHIoLTEpfSxlLnRpbWVvdXQpfSl9O3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLmZvcmNlP2EoKTpFdC5hZGQoYSxuKX0pfSk7cmV0dXJuIG59O3ZhciBQdD1mdW5jdGlvbigpe307UHQucHJvdG90eXBlPXtvbjpmdW5jdGlvbih0LGUpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHRoaXMuX2V2ZW50c1t0XT10aGlzLl9ldmVudHNbdF18fFtdLHRoaXMuX2V2ZW50c1t0XS5wdXNoKGUpfSxvbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0aGlzLm9uKHQsZnVuY3Rpb24gaSgpe3JldHVybiBuLm9mZih0LGkpLGUuYXBwbHkobnVsbCxhcmd1bWVudHMpfSl9LG9mZjpmdW5jdGlvbih0LGUpe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9LHQgaW4gdGhpcy5fZXZlbnRzIT0hMSYmKHRoaXMuX2V2ZW50c1t0XT10aGlzLl9ldmVudHNbdF0uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiEhZSYmZSE9PXR9KSl9LGVtaXQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdCBpbiB0aGlzLl9ldmVudHMhPSExKWZvcih2YXIgZT0wO2U8dGhpcy5fZXZlbnRzW3RdLmxlbmd0aDtlKyspdGhpcy5fZXZlbnRzW3RdW2VdLmFwcGx5KHRoaXMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX19LFB0Lm1peGluPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXCJvblwiLFwib25jZVwiLFwib2ZmXCIsXCJlbWl0XCJdLG49MDtuPGUubGVuZ3RoO24rKylcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3QucHJvdG90eXBlW2Vbbl1dPVB0LnByb3RvdHlwZVtlW25dXTp0W2Vbbl1dPVB0LnByb3RvdHlwZVtlW25dXX0sd2luZG93Lk1pY3JvRXZlbnQ9UHQ7dmFyIE90PWZ1bmN0aW9uKCl7dmFyIHQ9e19pc1BvcnRyYWl0OiExLGlzUG9ydHJhaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNQb3J0cmFpdCgpfSxpc0xhbmRzY2FwZTpmdW5jdGlvbigpe3JldHVybiF0aGlzLmlzUG9ydHJhaXQoKX0sX2luaXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIix0aGlzLl9vbkRPTUNvbnRlbnRMb2FkZWQuYmluZCh0aGlzKSwhMSksXCJvcmllbnRhdGlvblwiaW4gd2luZG93P3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib3JpZW50YXRpb25jaGFuZ2VcIix0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlLmJpbmQodGhpcyksITEpOndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fb25SZXNpemUuYmluZCh0aGlzKSwhMSksdGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ+d2luZG93LmlubmVyV2lkdGh9LHRoaXN9LF9vbkRPTUNvbnRlbnRMb2FkZWQ6ZnVuY3Rpb24oKXt0aGlzLl9pbnN0YWxsSXNQb3J0cmFpdEltcGxlbWVudGF0aW9uKCksdGhpcy5lbWl0KFwiY2hhbmdlXCIse2lzUG9ydHJhaXQ6dGhpcy5pc1BvcnRyYWl0KCl9KX0sX2luc3RhbGxJc1BvcnRyYWl0SW1wbGVtZW50YXRpb246ZnVuY3Rpb24oKXt2YXIgdD13aW5kb3cuaW5uZXJXaWR0aDx3aW5kb3cuaW5uZXJIZWlnaHQ7XCJvcmllbnRhdGlvblwiaW4gd2luZG93P3dpbmRvdy5vcmllbnRhdGlvbiUxODA9PTA/dGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiAwPT09TWF0aC5hYnMod2luZG93Lm9yaWVudGF0aW9uJTE4MCk/dDohdH06dGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiA5MD09PU1hdGguYWJzKHdpbmRvdy5vcmllbnRhdGlvbiUxODApP3Q6IXR9OnRoaXMuX2lzUG9ydHJhaXQ9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0PndpbmRvdy5pbm5lcldpZHRofX0sX29uT3JpZW50YXRpb25DaGFuZ2U6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5faXNQb3J0cmFpdCgpLG49MCxpPXNldEludGVydmFsKGZ1bmN0aW9uKCl7bisrO3ZhciBvPXdpbmRvdy5pbm5lcldpZHRoLHI9d2luZG93LmlubmVySGVpZ2h0O2UmJm88PXJ8fCFlJiZvPj1yPyh0LmVtaXQoXCJjaGFuZ2VcIix7aXNQb3J0cmFpdDplfSksY2xlYXJJbnRlcnZhbChpKSk6NTA9PT1uJiYodC5lbWl0KFwiY2hhbmdlXCIse2lzUG9ydHJhaXQ6ZX0pLGNsZWFySW50ZXJ2YWwoaSkpfSwyMCl9LF9vblJlc2l6ZTpmdW5jdGlvbigpe3RoaXMuZW1pdChcImNoYW5nZVwiLHtpc1BvcnRyYWl0OnRoaXMuaXNQb3J0cmFpdCgpfSl9fTtyZXR1cm4gUHQubWl4aW4odCksdH0oKS5faW5pdCgpLHh0PXthZGQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsbj1BcnJheShlPjE/ZS0xOjApLGk9MTtpPGU7aSsrKW5baS0xXT1hcmd1bWVudHNbaV07cmV0dXJuIG4uZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gUS5hZGRNb2RpZmllcih0LGUpfSl9LHJlbW92ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGU+MT9lLTE6MCksaT0xO2k8ZTtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBRLnJlbW92ZU1vZGlmaWVyKHQsZSl9KX0sY29udGFpbnM6US5oYXNNb2RpZmllcix0b2dnbGU6US50b2dnbGVNb2RpZmllcn0sVHQ9bmV3IFB0O1R0Ll92aXNpYmxlPSExO3ZhciBMdD1mdW5jdGlvbigpe1R0Ll92aXNpYmxlPSEwLFR0LmVtaXQoXCJzaG93XCIpfSxNdD1mdW5jdGlvbigpe1R0Ll92aXNpYmxlPSExLFR0LmVtaXQoXCJoaWRlXCIpfSxEdD1mdW5jdGlvbigpe1Eud2FybihcIm9ucy1rZXlib2FyZDogQ29yZG92YSBLZXlib2FyZCBwbHVnaW4gaXMgbm90IHByZXNlbnQuXCIpfTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixmdW5jdGlvbigpeyhcInVuZGVmaW5lZFwiIT10eXBlb2YgS2V5Ym9hcmQ/KEtleWJvYXJkLm9uc2hvdz1MdCxLZXlib2FyZC5vbmhpZGU9TXQsVHQuZW1pdChcImluaXRcIix7dmlzaWJsZTpLZXlib2FyZC5pc1Zpc2libGV9KSwhMCk6dm9pZCAwIT09Y29yZG92YS5wbHVnaW5zJiZ2b2lkIDAhPT1jb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQmJih3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5rZXlib2FyZHNob3dcIixMdCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJuYXRpdmUua2V5Ym9hcmRoaWRlXCIsTXQpLFR0LmVtaXQoXCJpbml0XCIse3Zpc2libGU6Y29yZG92YS5wbHVnaW5zLktleWJvYXJkLmlzVmlzaWJsZX0pLCEwKSl8fCgoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltvbnMta2V5Ym9hcmQtYWN0aXZlXVwiKXx8ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltvbnMta2V5Ym9hcmQtaW5hY3RpdmVdXCIpKSYmRHQoKSxUdC5vbj1EdCl9KTt2YXIgSXQ9ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0Kyt9fSgpLE50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtwKHRoaXMsdCksdGhpcy5fbG9ja0xpc3Q9W10sdGhpcy5fd2FpdExpc3Q9W10sdGhpcy5fbG9nPWUubG9nfHxmdW5jdGlvbigpe319cmV0dXJuIGcodCxbe2tleTpcImxvY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1mdW5jdGlvbiBlKCl7dC5fdW5sb2NrKGUpfTtyZXR1cm4gZS5pZD1JdCgpLHRoaXMuX2xvY2tMaXN0LnB1c2goZSksdGhpcy5fbG9nKFwibG9jazogXCIrZS5pZCksZX19LHtrZXk6XCJfdW5sb2NrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbG9ja0xpc3QuaW5kZXhPZih0KTtpZigtMT09PWUpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBmdW5jdGlvbiBpcyBub3QgcmVnaXN0ZXJlZCBpbiB0aGUgbG9jayBsaXN0LlwiKTt0aGlzLl9sb2NrTGlzdC5zcGxpY2UoZSwxKSx0aGlzLl9sb2coXCJ1bmxvY2s6IFwiK3QuaWQpLHRoaXMuX3RyeVRvRnJlZVdhaXRMaXN0KCl9fSx7a2V5OlwiX3RyeVRvRnJlZVdhaXRMaXN0XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IoOyF0aGlzLmlzTG9ja2VkKCkmJnRoaXMuX3dhaXRMaXN0Lmxlbmd0aD4wOyl0aGlzLl93YWl0TGlzdC5zaGlmdCgpKCl9fSx7a2V5Olwid2FpdFVubG9ja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY2FsbGJhY2sgcGFyYW0gbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTt0aGlzLmlzTG9ja2VkKCk/dGhpcy5fd2FpdExpc3QucHVzaCh0KTp0KCl9fSx7a2V5OlwiaXNMb2NrZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NrTGlzdC5sZW5ndGg+MH19XSksdH0oKSxCdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksdGhpcy5fbG9hZGVyPWUgaW5zdGFuY2VvZiBGdW5jdGlvbj9lOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wYWdlLGk9dC5wYXJlbnQ7dC5wYXJhbXMsUC5nZXRQYWdlSFRNTEFzeW5jKG4pLnRoZW4oZnVuY3Rpb24odCl7dmFyIG49US5jcmVhdGVFbGVtZW50KHQpO2kuYXBwZW5kQ2hpbGQobiksZShuKX0pfSx0aGlzLl91bmxvYWRlcj1uIGluc3RhbmNlb2YgRnVuY3Rpb24/bjppfXJldHVybiBnKHQsW3trZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnBhZ2UsaT10LnBhcmVudCxvPXQucGFyYW1zLHI9dm9pZCAwPT09bz97fTpvO3RoaXMuX2xvYWRlcih7cGFnZTpuLHBhcmVudDppLHBhcmFtczpyfSxmdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBFbGVtZW50KSl0aHJvdyBFcnJvcihcInBhZ2VFbGVtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRWxlbWVudC5cIik7ZSh0KX0pfX0se2tleTpcInVubG9hZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEVsZW1lbnQpKXRocm93IEVycm9yKFwicGFnZUVsZW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBFbGVtZW50LlwiKTt0aGlzLl91bmxvYWRlcih0KX19LHtrZXk6XCJpbnRlcm5hbExvYWRlclwiLHNldDpmdW5jdGlvbih0KXtpZighKHQgaW5zdGFuY2VvZiBGdW5jdGlvbikpdGhyb3cgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGdW5jdGlvblwiKTt0aGlzLl9sb2FkZXI9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRlcn19XSksdH0oKSxqdD1uZXcgQnQsSHQ9bmV3IEJ0KGZ1bmN0aW9uKHQsZSl7dmFyIG49dC5wYWdlLGk9dC5wYXJlbnQsbz0odC5wYXJhbXMsUS5jcmVhdGVFbGVtZW50KG4udHJpbSgpKSk7aS5hcHBlbmRDaGlsZChvKSxlKG8pfSxpKSxSdD17YW5pbWl0Om50LGRlZmF1bHRQYWdlTG9hZGVyOmp0LGVsZW1lbnRzOmMsR2VzdHVyZURldGVjdG9yOnN0LG1vZGlmaWVyOnh0LG5vdGlmaWNhdGlvbjpTdCxvcmllbnRhdGlvbjpPdCxwYWdlQXR0cmlidXRlRXhwcmVzc2lvbjpTLFBhZ2VMb2FkZXI6QnQscGxhdGZvcm06Qyxzb2Z0d2FyZUtleWJvYXJkOlR0LF9hdXRvU3R5bGU6TixfaW50ZXJuYWw6UCxfcmVhZHlMb2NrOm5ldyBOdCxfdXRpbDpRfTtSdC5wbGF0Zm9ybS5zZWxlY3QoKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gubWF0Y2goL3BsYXRmb3JtPShbXFx3LV0rKS8pfHxbXSlbMV0pLGZ1bmN0aW9uKCl7dmFyIHQ9UnQuX3JlYWR5TG9jay5sb2NrKCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtSdC5pc1dlYlZpZXcoKT93aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsdCwhMSk6dCgpfSwhMSl9KCk7dmFyIEZ0PWZ1bmN0aW9uKHQpe3JldHVybiBRLnRocm93KFwiVGhpcyBtZXRob2QgbXVzdCBiZSBjYWxsZWQgXCIrKHQ/XCJhZnRlclwiOlwiYmVmb3JlXCIpK1wiIG9ucy5pc1JlYWR5KCkgaXMgdHJ1ZVwiKX07UnQuaXNSZWFkeT1mdW5jdGlvbigpe3JldHVybiFSdC5fcmVhZHlMb2NrLmlzTG9ja2VkKCl9LFJ0LmlzV2ViVmlldz1SdC5wbGF0Zm9ybS5pc1dlYlZpZXcsUnQucmVhZHk9ZnVuY3Rpb24odCl7UnQuaXNSZWFkeSgpP3QoKTpSdC5fcmVhZHlMb2NrLndhaXRVbmxvY2sodCl9LFJ0LnNldERlZmF1bHREZXZpY2VCYWNrQnV0dG9uTGlzdGVuZXI9ZnVuY3Rpb24odCl7UnQuaXNSZWFkeSgpfHxGdCghMCksUnQuX2RlZmF1bHREZXZpY2VCYWNrQnV0dG9uSGFuZGxlci5zZXRMaXN0ZW5lcih0KX0sUnQuZGlzYWJsZURldmljZUJhY2tCdXR0b25IYW5kbGVyPWZ1bmN0aW9uKCl7UnQuaXNSZWFkeSgpfHxGdCghMCksUC5kYmJEaXNwYXRjaGVyLmRpc2FibGUoKX0sUnQuZW5hYmxlRGV2aWNlQmFja0J1dHRvbkhhbmRsZXI9ZnVuY3Rpb24oKXtSdC5pc1JlYWR5KCl8fEZ0KCEwKSxQLmRiYkRpc3BhdGNoZXIuZW5hYmxlKCl9LFJ0LmZpcmVEZXZpY2VCYWNrQnV0dG9uRXZlbnQ9ZnVuY3Rpb24oKXtQLmRiYkRpc3BhdGNoZXIuZmlyZURldmljZUJhY2tCdXR0b25FdmVudCgpfSxSdC5lbmFibGVBdXRvU3RhdHVzQmFyRmlsbD1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKSYmRnQoITEpLFAuY29uZmlnLmF1dG9TdGF0dXNCYXJGaWxsPSEwfSxSdC5kaXNhYmxlQXV0b1N0YXR1c0JhckZpbGw9ZnVuY3Rpb24oKXtSdC5pc1JlYWR5KCkmJkZ0KCExKSxQLmNvbmZpZy5hdXRvU3RhdHVzQmFyRmlsbD0hMX0sUnQubW9ja1N0YXR1c0Jhcj1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKSYmRnQoITEpO3ZhciB0PWZ1bmN0aW9uKCl7aWYoIWRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF18fCFkb2N1bWVudC5ib2R5LmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhcIm9ucy1zdGF0dXMtYmFyLW1vY2tcIikpe3ZhciB0PUMuaXNBbmRyb2lkKCksZT1mdW5jdGlvbih0KXtyZXR1cm4nPGkgY2xhc3M9XCInK3Quc3BsaXQoXCItXCIpWzBdK1wiIFwiK3QrJ1wiPjwvaT4nfSxuPXQ/ZShcInptZGktdHdpdHRlclwiKStcIiBcIitlKFwiem1kaS1nb29nbGUtcGxheVwiKTpcIk5vIFNJTSBcIitlKFwiZmEtd2lmaVwiKSxpPXQ/XCJcIjpcIjEyOjI4IFBNXCIsbz10P2UoXCJ6bWRpLW5ldHdvcmtcIikrXCIgXCIrZShcInptZGktd2lmaVwiKStcIiBcIitlKFwiem1kaS1iYXR0ZXJ5XCIpK1wiIDEyOjI4IFBNXCI6XCI4MCUgXCIrZShcImZhLWJhdHRlcnktdGhyZWUtcXVhcnRlcnNcIik7ZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUoUS5jcmVhdGVFbGVtZW50KCc8ZGl2IGNsYXNzPVwib25zLXN0YXR1cy1iYXItbW9jayAnKyh0P1wiYW5kcm9pZFwiOlwiaW9zXCIpKydcIj48ZGl2PicrbitcIjwvZGl2PjxkaXY+XCIraStcIjwvZGl2PjxkaXY+XCIrbytcIjwvZGl2PjwvZGl2PlwiKSxkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpfX07ZG9jdW1lbnQuYm9keT90KCk6UC53YWl0RE9NQ29udGVudExvYWRlZCh0KX0sUnQuZGlzYWJsZUFuaW1hdGlvbnM9ZnVuY3Rpb24oKXtQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ9ITB9LFJ0LmVuYWJsZUFuaW1hdGlvbnM9ZnVuY3Rpb24oKXtQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ9ITF9LFJ0Ll9kaXNhYmxlV2FybmluZ3M9ZnVuY3Rpb24oKXtQLmNvbmZpZy53YXJuaW5nc0Rpc2FibGVkPSEwfSxSdC5fZW5hYmxlV2FybmluZ3M9ZnVuY3Rpb24oKXtQLmNvbmZpZy53YXJuaW5nc0Rpc2FibGVkPSExfSxSdC5kaXNhYmxlQXV0b1N0eWxpbmc9Ti5kaXNhYmxlLFJ0LmVuYWJsZUF1dG9TdHlsaW5nPU4uZW5hYmxlLFJ0LmRpc2FibGVJY29uQXV0b1ByZWZpeD1mdW5jdGlvbigpe1EuY2hlY2tNaXNzaW5nSW1wb3J0KFwiSWNvblwiKSxjLkljb24uc2V0QXV0b1ByZWZpeCghMSl9LFJ0LmZvcmNlVUlXZWJWaWV3U2Nyb2xsRml4PWZ1bmN0aW9uKCl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTtQLmNvbmZpZy5mb3JjZVVJV2ViVmlld1Njcm9sbEZpeD10fSxSdC5mb3JjZVBsYXRmb3JtU3R5bGluZz1mdW5jdGlvbih0KXtSdC5lbmFibGVBdXRvU3R5bGluZygpLFJ0LnBsYXRmb3JtLnNlbGVjdCh0fHxcImlvc1wiKSxSdC5fdXRpbC5hcnJheUZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIipcIikpLmZvckVhY2goZnVuY3Rpb24odCl7XCJvbnMtaWZcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpP3QuX3BsYXRmb3JtVXBkYXRlKCk6dC50YWdOYW1lLm1hdGNoKC9eb25zLS9pKSYmKE4ucHJlcGFyZSh0LCEwKSxcIm9ucy10YWJiYXJcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZ0Ll91cGRhdGVQb3NpdGlvbigpKX0pfSxSdC5wcmVsb2FkPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOltdO3JldHVybiBQcm9taXNlLmFsbCgodCBpbnN0YW5jZW9mIEFycmF5P3Q6W3RdKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIHQmJlEudGhyb3coXCJFeHBlY3RlZCBzdHJpbmcgYXJndW1lbnRzIGJ1dCBnb3QgXCIrKHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpmKHQpKSksUC5nZXRUZW1wbGF0ZUhUTUxBc3luYyh0KX0pKX0sUnQuY3JlYXRlRWxlbWVudD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1mdW5jdGlvbih0KXt2YXIgbj1SdC5fdXRpbC5jcmVhdGVFbGVtZW50KHQpO2lmKG4ucmVtb3ZlKCksZS5hcHBlbmQpeyhlLmFwcGVuZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50P2UuYXBwZW5kOmRvY3VtZW50LmJvZHkpLmluc2VydEJlZm9yZShuLGUuaW5zZXJ0QmVmb3JlfHxudWxsKSxlLmxpbmsgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5saW5rKG4pfXJldHVybiBufTtyZXR1cm5cIjxcIj09PSh0PXQudHJpbSgpKS5jaGFyQXQoMCk/bih0KTpQLmdldFBhZ2VIVE1MQXN5bmModCkudGhlbihuKX0sUnQuY3JlYXRlUG9wb3Zlcj1SdC5jcmVhdGVEaWFsb2c9UnQuY3JlYXRlQWxlcnREaWFsb2c9ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybiBSdC5jcmVhdGVFbGVtZW50KHQsXyh7YXBwZW5kOiEwfSxlKSl9LFJ0Lm9wZW5BY3Rpb25TaGVldD1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7US5jaGVja01pc3NpbmdJbXBvcnQoXCJBY3Rpb25TaGVldFwiKSxmdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06XCJGdW5jdGlvblwiO3JldHVybiBRLnRocm93KCdcIm9wdGlvbnMuJyt0KydcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mICcrZSl9LG49ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsZSl9LGk9ZnVuY3Rpb24oZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOkZ1bmN0aW9uO3JldHVybiB0W2VdaW5zdGFuY2VvZiBufSxvPVwiYnV0dG9uc1wiLHI9XCJjYWxsYmFja1wiLGE9XCJjb21waWxlXCIscz1cImRlc3Ryb3lcIjsoIW4obyl8fCFpKG8sQXJyYXkpKSYmZShvLFwiQXJyYXlcIiksbihyKSYmIWkocikmJmUociksbihhKSYmIWkoYSkmJmUoYSksbihzKSYmIWkocykmJmUocyl9KHQpO3ZhciBuPVEuY3JlYXRlRWxlbWVudChcIlxcbiAgICA8b25zLWFjdGlvbi1zaGVldFxcbiAgICAgIFwiKyh0LnRpdGxlPyd0aXRsZT1cIicrdC50aXRsZSsnXCInOlwiXCIpK1wiXFxuICAgICAgXCIrKHQuY2FuY2VsYWJsZT9cImNhbmNlbGFibGVcIjpcIlwiKStcIlxcbiAgICAgIFwiKyh0Lm1vZGlmaWVyPydtb2RpZmllcj1cIicrdC5tb2RpZmllcisnXCInOlwiXCIpK1wiXFxuICAgICAgXCIrKHQubWFza0NvbG9yPydtYXNrLWNvbG9yPVwiJyt0Lm1hc2tDb2xvcisnXCInOlwiXCIpK1wiXFxuICAgICAgXCIrKHQuaWQ/J2lkPVwiJyt0LmlkKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5jbGFzcz8nY2xhc3M9XCInK3QuY2xhc3MrJ1wiJzpcIlwiKSsnXFxuICAgID5cXG4gICAgICA8ZGl2IGNsYXNzPVwiYWN0aW9uLXNoZWV0XCI+PC9kaXY+XFxuICAgIDwvb25zLWFjdGlvbi1zaGVldD5cXG4gICcpLGk9ZnVuY3Rpb24gaShvKXt2YXIgcj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06LTE7biYmKHQuZGVzdHJveSYmdC5kZXN0cm95KG4pLG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixpLCExKSxuLnJlbW92ZSgpLG49bnVsbCx0LmNhbGxiYWNrJiZ0LmNhbGxiYWNrKHIpLGUocikpfTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJkaWFsb2ctY2FuY2VsXCIsaSwhMSk7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3QuYnV0dG9ucy5mb3JFYWNoKGZ1bmN0aW9uKGUscil7dmFyIGE9XCJzdHJpbmdcIj09dHlwZW9mIGU/e2xhYmVsOmV9Ol8oe30sZSk7dC5kZXN0cnVjdGl2ZT09PXImJihhLm1vZGlmaWVyPShhLm1vZGlmaWVyfHxcIlwiKStcIiBkZXN0cnVjdGl2ZVwiKTt2YXIgcz1RLmNyZWF0ZUVsZW1lbnQoXCJcXG4gICAgICA8b25zLWFjdGlvbi1zaGVldC1idXR0b25cXG4gICAgICAgIFwiKyhhLmljb24/J2ljb249XCInK2EuaWNvbisnXCInOlwiXCIpK1wiXFxuICAgICAgICBcIisoYS5tb2RpZmllcj8nbW9kaWZpZXI9XCInK2EubW9kaWZpZXIrJ1wiJzpcIlwiKStcIlxcbiAgICAgID5cXG4gICAgICAgIFwiK2EubGFiZWwrXCJcXG4gICAgICA8L29ucy1hY3Rpb24tc2hlZXQtYnV0dG9uPlxcbiAgICBcIik7cy5vbmNsaWNrPWZ1bmN0aW9uKHQpe3JldHVybiBuLmhpZGUoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkodCxyKX0pfSxvLmFwcGVuZENoaWxkKHMpfSksUS5maW5kQ2hpbGQobixcIi5hY3Rpb24tc2hlZXRcIikuYXBwZW5kQ2hpbGQobyksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKSx0LmNvbXBpbGUmJnQuY29tcGlsZShlbC5kaWFsb2cpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBuLnNob3coe2FuaW1hdGlvbjp0LmFuaW1hdGlvbixhbmltYXRpb25PcHRpb25zOnQuYW5pbWF0aW9uT3B0aW9uc30pfSl9KX0sUnQucmVzb2x2ZUxvYWRpbmdQbGFjZWhvbGRlcj1mdW5jdGlvbih0LGUpe3ZhciBuPVJ0Ll91dGlsLmFycmF5RnJvbSh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltvbnMtbG9hZGluZy1wbGFjZWhvbGRlcl1cIikpOzA9PT1uLmxlbmd0aCYmUS50aHJvdyhcIk5vIG9ucy1sb2FkaW5nLXBsYWNlaG9sZGVyIGV4aXN0c1wiKSxuLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hdC5nZXRBdHRyaWJ1dGUoXCJwYWdlXCIpfSkuZm9yRWFjaChmdW5jdGlvbihuKXtuLnNldEF0dHJpYnV0ZShcIm9ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXCIsdCksUnQuX3Jlc29sdmVMb2FkaW5nUGxhY2Vob2xkZXIobix0LGUpfSl9LFJ0Ll9zZXR1cExvYWRpbmdQbGFjZUhvbGRlcnM9ZnVuY3Rpb24oKXtSdC5yZWFkeShmdW5jdGlvbigpe1J0Ll91dGlsLmFycmF5RnJvbSh3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltvbnMtbG9hZGluZy1wbGFjZWhvbGRlcl1cIikpLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoXCJvbnMtbG9hZGluZy1wbGFjZWhvbGRlclwiKTtcInN0cmluZ1wiPT10eXBlb2YgZSYmUnQuX3Jlc29sdmVMb2FkaW5nUGxhY2Vob2xkZXIodCxlKX0pfSl9LFJ0Ll9yZXNvbHZlTG9hZGluZ1BsYWNlaG9sZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGUoKX07ZSYmUnQuY3JlYXRlRWxlbWVudChlKS50aGVuKGZ1bmN0aW9uKGUpe2Uuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0LmFwcGVuZENoaWxkKGUpLG4oZSxmdW5jdGlvbigpe2Zvcig7dC5maXJzdENoaWxkJiZ0LmZpcnN0Q2hpbGQhPT1lOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7ZS5zdHlsZS5kaXNwbGF5PVwiXCJ9KX0pLmNhdGNoKGZ1bmN0aW9uKHQpe3JldHVybiBQcm9taXNlLnJlamVjdChcIlVuYWJsZWQgdG8gcmVzb2x2ZSBwbGFjZWhvbGRlcjogXCIrdCl9KX07dmFyIHF0PVwiY3VycmVudFNjcmlwdFwiaW4gZG9jdW1lbnQ/ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuY3VycmVudFNjcmlwdH06ZnVuY3Rpb24oKXtyZXR1cm4gZG9jdW1lbnQuc2NyaXB0c1tkb2N1bWVudC5zY3JpcHRzLmxlbmd0aC0xXX07UnQuZ2V0U2NyaXB0UGFnZT1mdW5jdGlvbigpe3JldHVybiBxdCgpJiYvb25zLXBhZ2UvaS50ZXN0KHF0KCkucGFyZW50RWxlbWVudC50YWdOYW1lKSYmcXQoKS5wYXJlbnRFbGVtZW50fHxudWxsfTt2YXIgenQ9byhmdW5jdGlvbih0KXshZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQsbil7dmFyIG87aWYobj1ufHx7fSx0aGlzLnRyYWNraW5nQ2xpY2s9ITEsdGhpcy50cmFja2luZ0NsaWNrU3RhcnQ9MCx0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCx0aGlzLnRvdWNoU3RhcnRYPTAsdGhpcy50b3VjaFN0YXJ0WT0wLHRoaXMubGFzdFRvdWNoSWRlbnRpZmllcj0wLHRoaXMudG91Y2hCb3VuZGFyeT1uLnRvdWNoQm91bmRhcnl8fDEwLHRoaXMubGF5ZXI9dCx0aGlzLnRhcERlbGF5PW4udGFwRGVsYXl8fDIwMCx0aGlzLnRhcFRpbWVvdXQ9bi50YXBUaW1lb3V0fHw3MDAsIWUubm90TmVlZGVkKHQpKXtmb3IodmFyIHI9W1wib25Nb3VzZVwiLFwib25DbGlja1wiLFwib25Ub3VjaFN0YXJ0XCIsXCJvblRvdWNoTW92ZVwiLFwib25Ub3VjaEVuZFwiLFwib25Ub3VjaENhbmNlbFwiXSxhPTAscz1yLmxlbmd0aDthPHM7YSsrKXRoaXNbclthXV09ZnVuY3Rpb24odCxlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fSh0aGlzW3JbYV1dLHRoaXMpO2kmJih0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIix0aGlzLm9uTW91c2UsITApLHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZSwhMCksdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZSwhMCkpLHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLCEwKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaENhbmNlbCwhMSksRXZlbnQucHJvdG90eXBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbnx8KHQucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLG4saSl7dmFyIG89Tm9kZS5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcImNsaWNrXCI9PT1lP28uY2FsbCh0LGUsbi5oaWphY2tlZHx8bixpKTpvLmNhbGwodCxlLG4saSl9LHQuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihlLG4saSl7dmFyIG89Tm9kZS5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcjtcImNsaWNrXCI9PT1lP28uY2FsbCh0LGUsbi5oaWphY2tlZHx8KG4uaGlqYWNrZWQ9ZnVuY3Rpb24odCl7dC5wcm9wYWdhdGlvblN0b3BwZWR8fG4odCl9KSxpKTpvLmNhbGwodCxlLG4saSl9KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0Lm9uY2xpY2smJihvPXQub25jbGljayx0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGZ1bmN0aW9uKHQpe28odCl9LCExKSx0Lm9uY2xpY2s9bnVsbCl9fXZhciBuPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIldpbmRvd3MgUGhvbmVcIik+PTAsaT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJBbmRyb2lkXCIpPjAmJiFuLG89L2lQKGFkfGhvbmV8b2QpLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpJiYhbixyPW8mJi9PUyA0X1xcZChfXFxkKT8vLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksYT1vJiYvT1MgWzYtN11fXFxkLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHM9bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiQkIxMFwiKT4wLGw9W1wiZW1haWxcIixcIm51bWJlclwiLFwicGFzc3dvcmRcIixcInNlYXJjaFwiLFwidGVsXCIsXCJ0ZXh0XCIsXCJ1cmxcIl07ZS5wcm90b3R5cGUubmVlZHNDbGljaz1mdW5jdGlvbih0KXtzd2l0Y2godC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJidXR0b25cIjpjYXNlXCJzZWxlY3RcIjpjYXNlXCJ0ZXh0YXJlYVwiOmlmKHQuZGlzYWJsZWQpcmV0dXJuITA7YnJlYWs7Y2FzZVwiaW5wdXRcIjppZihvJiZcImZpbGVcIj09PXQudHlwZXx8dC5kaXNhYmxlZClyZXR1cm4hMDticmVhaztjYXNlXCJsYWJlbFwiOmNhc2VcImlmcmFtZVwiOmNhc2VcInZpZGVvXCI6cmV0dXJuITB9cmV0dXJuL1xcYm5lZWRzY2xpY2tcXGIvLnRlc3QodC5jbGFzc05hbWUpfSxlLnByb3RvdHlwZS5uZWVkc0ZvY3VzPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Nhc2VcInRleHRhcmVhXCI6cmV0dXJuITA7Y2FzZVwic2VsZWN0XCI6cmV0dXJuIWk7Y2FzZVwiaW5wdXRcIjpzd2l0Y2godC50eXBlKXtjYXNlXCJidXR0b25cIjpjYXNlXCJjaGVja2JveFwiOmNhc2VcImZpbGVcIjpjYXNlXCJpbWFnZVwiOmNhc2VcInJhZGlvXCI6Y2FzZVwic3VibWl0XCI6cmV0dXJuITF9cmV0dXJuIXQuZGlzYWJsZWQmJiF0LnJlYWRPbmx5O2RlZmF1bHQ6cmV0dXJuL1xcYm5lZWRzZm9jdXNcXGIvLnRlc3QodC5jbGFzc05hbWUpfX0sZS5wcm90b3R5cGUuc2VuZENsaWNrPWZ1bmN0aW9uKHQsZSl7dmFyIG4saTtkb2N1bWVudC5hY3RpdmVFbGVtZW50JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50IT09dCYmZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCksaT1lLmNoYW5nZWRUb3VjaGVzWzBdLChuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIikpLmluaXRNb3VzZUV2ZW50KHRoaXMuZGV0ZXJtaW5lRXZlbnRUeXBlKHQpLCEwLCEwLHdpbmRvdywxLGkuc2NyZWVuWCxpLnNjcmVlblksaS5jbGllbnRYLGkuY2xpZW50WSwhMSwhMSwhMSwhMSwwLG51bGwpLG4uZm9yd2FyZGVkVG91Y2hFdmVudD0hMCx0LmRpc3BhdGNoRXZlbnQobil9LGUucHJvdG90eXBlLmRldGVybWluZUV2ZW50VHlwZT1mdW5jdGlvbih0KXtyZXR1cm4gaSYmXCJzZWxlY3RcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpP1wibW91c2Vkb3duXCI6XCJjbGlja1wifSxlLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbih0KXt2YXIgZTtvJiZ0LnNldFNlbGVjdGlvblJhbmdlJiYwIT09dC50eXBlLmluZGV4T2YoXCJkYXRlXCIpJiZcInRpbWVcIiE9PXQudHlwZSYmXCJtb250aFwiIT09dC50eXBlJiZcImVtYWlsXCIhPT10LnR5cGUmJlwibnVtYmVyXCIhPT10LnR5cGU/KGU9dC52YWx1ZS5sZW5ndGgsdC5zZXRTZWxlY3Rpb25SYW5nZShlLGUpKTp0LmZvY3VzKCl9LGUucHJvdG90eXBlLnVwZGF0ZVNjcm9sbFBhcmVudD1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKCEoZT10LmZhc3RDbGlja1Njcm9sbFBhcmVudCl8fCFlLmNvbnRhaW5zKHQpKXtuPXQ7ZG97aWYobi5zY3JvbGxIZWlnaHQ+bi5vZmZzZXRIZWlnaHQpe2U9bix0LmZhc3RDbGlja1Njcm9sbFBhcmVudD1uO2JyZWFrfW49bi5wYXJlbnRFbGVtZW50fXdoaWxlKG4pfWUmJihlLmZhc3RDbGlja0xhc3RTY3JvbGxUb3A9ZS5zY3JvbGxUb3ApfSxlLnByb3RvdHlwZS5nZXRUYXJnZXRFbGVtZW50RnJvbUV2ZW50VGFyZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0Lm5vZGVUeXBlPT09Tm9kZS5URVhUX05PREU/dC5wYXJlbnROb2RlOnR9LGUucHJvdG90eXBlLmlzVGV4dEZpZWxkPWZ1bmN0aW9uKHQpe3JldHVyblwidGV4dGFyZWFcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHwtMSE9PWwuaW5kZXhPZih0LnR5cGUpfSxlLnByb3RvdHlwZS5vblRvdWNoU3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGUsbjtpZih0LnRhcmdldFRvdWNoZXMubGVuZ3RoPjEpcmV0dXJuITA7aWYoZT10aGlzLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQodC50YXJnZXQpLG49dC50YXJnZXRUb3VjaGVzWzBdLGUuaXNDb250ZW50RWRpdGFibGUpcmV0dXJuITA7aWYobyl7aWYoZT09PWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJnRoaXMuaXNUZXh0RmllbGQoZSkpcmV0dXJuITA7aWYoIXIpe2lmKG4uaWRlbnRpZmllciYmbi5pZGVudGlmaWVyPT09dGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyKXJldHVybiB0LnByZXZlbnREZWZhdWx0KCksITE7dGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyPW4uaWRlbnRpZmllcix0aGlzLnVwZGF0ZVNjcm9sbFBhcmVudChlKX19cmV0dXJuIHRoaXMudHJhY2tpbmdDbGljaz0hMCx0aGlzLnRyYWNraW5nQ2xpY2tTdGFydD10LnRpbWVTdGFtcCx0aGlzLnRhcmdldEVsZW1lbnQ9ZSx0aGlzLnRvdWNoU3RhcnRYPW4ucGFnZVgsdGhpcy50b3VjaFN0YXJ0WT1uLnBhZ2VZLHQudGltZVN0YW1wLXRoaXMubGFzdENsaWNrVGltZTx0aGlzLnRhcERlbGF5JiZ0LnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU+LTEmJnQucHJldmVudERlZmF1bHQoKSwhMH0sZS5wcm90b3R5cGUudG91Y2hIYXNNb3ZlZD1mdW5jdGlvbih0KXt2YXIgZT10LmNoYW5nZWRUb3VjaGVzWzBdLG49dGhpcy50b3VjaEJvdW5kYXJ5O3JldHVybiBNYXRoLmFicyhlLnBhZ2VYLXRoaXMudG91Y2hTdGFydFgpPm58fE1hdGguYWJzKGUucGFnZVktdGhpcy50b3VjaFN0YXJ0WSk+bn0sZS5wcm90b3R5cGUub25Ub3VjaE1vdmU9ZnVuY3Rpb24odCl7cmV0dXJuIXRoaXMudHJhY2tpbmdDbGlja3x8KCh0aGlzLnRhcmdldEVsZW1lbnQhPT10aGlzLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQodC50YXJnZXQpfHx0aGlzLnRvdWNoSGFzTW92ZWQodCkpJiYodGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsKSwhMCl9LGUucHJvdG90eXBlLmZpbmRDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10LmNvbnRyb2w/dC5jb250cm9sOnQuaHRtbEZvcj9kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0Lmh0bWxGb3IpOnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbiwgaW5wdXQ6bm90KFt0eXBlPWhpZGRlbl0pLCBrZXlnZW4sIG1ldGVyLCBvdXRwdXQsIHByb2dyZXNzLCBzZWxlY3QsIHRleHRhcmVhXCIpfSxlLnByb3RvdHlwZS5vblRvdWNoRW5kPWZ1bmN0aW9uKHQpe3ZhciBlLG4scyxsLHUsYz10aGlzLnRhcmdldEVsZW1lbnQ7aWYoIXRoaXMudHJhY2tpbmdDbGljaylyZXR1cm4hMDtpZih0LnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU8dGhpcy50YXBEZWxheSYmdC50aW1lU3RhbXAtdGhpcy5sYXN0Q2xpY2tUaW1lPi0xKXJldHVybiB0aGlzLmNhbmNlbE5leHRDbGljaz0hMCwhMDtpZih0LnRpbWVTdGFtcC10aGlzLnRyYWNraW5nQ2xpY2tTdGFydD50aGlzLnRhcFRpbWVvdXQpcmV0dXJuITA7aWYodGhpcy5jYW5jZWxOZXh0Q2xpY2s9ITEsdGhpcy5sYXN0Q2xpY2tUaW1lPXQudGltZVN0YW1wLG49dGhpcy50cmFja2luZ0NsaWNrU3RhcnQsdGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0PTAsYSYmKHU9dC5jaGFuZ2VkVG91Y2hlc1swXSwoYz1kb2N1bWVudC5lbGVtZW50RnJvbVBvaW50KHUucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LHUucGFnZVktd2luZG93LnBhZ2VZT2Zmc2V0KXx8YykuZmFzdENsaWNrU2Nyb2xsUGFyZW50PXRoaXMudGFyZ2V0RWxlbWVudC5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQpLFwibGFiZWxcIj09PShzPWMudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSl7aWYoZT10aGlzLmZpbmRDb250cm9sKGMpKXtpZih0aGlzLmZvY3VzKGMpLGkpcmV0dXJuITE7Yz1lfX1lbHNlIGlmKHRoaXMubmVlZHNGb2N1cyhjKSlyZXR1cm4gdC50aW1lU3RhbXAtbj4xMDB8fG8mJndpbmRvdy50b3AhPT13aW5kb3cmJlwiaW5wdXRcIj09PXM/KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLCExKToodGhpcy5mb2N1cyhjKSx0aGlzLnNlbmRDbGljayhjLHQpLHImJlwic2VsZWN0XCI9PT1zfHwodGhpcy50YXJnZXRFbGVtZW50PW51bGwsdC5wcmV2ZW50RGVmYXVsdCgpKSwhMSk7cmV0dXJuISghb3x8cnx8IShsPWMuZmFzdENsaWNrU2Nyb2xsUGFyZW50KXx8bC5mYXN0Q2xpY2tMYXN0U2Nyb2xsVG9wPT09bC5zY3JvbGxUb3ApfHwodGhpcy5uZWVkc0NsaWNrKGMpfHwodC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuc2VuZENsaWNrKGMsdCkpLCExKX0sZS5wcm90b3R5cGUub25Ub3VjaENhbmNlbD1mdW5jdGlvbigpe3RoaXMudHJhY2tpbmdDbGljaz0hMSx0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbH0sZS5wcm90b3R5cGUub25Nb3VzZT1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy50YXJnZXRFbGVtZW50fHwoISF0LmZvcndhcmRlZFRvdWNoRXZlbnR8fCghdC5jYW5jZWxhYmxlfHwoISghdGhpcy5uZWVkc0NsaWNrKHRoaXMudGFyZ2V0RWxlbWVudCl8fHRoaXMuY2FuY2VsTmV4dENsaWNrKXx8KHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uP3Quc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk6dC5wcm9wYWdhdGlvblN0b3BwZWQ9ITAsdC5zdG9wUHJvcGFnYXRpb24oKSx0LnByZXZlbnREZWZhdWx0KCksITEpKSkpfSxlLnByb3RvdHlwZS5vbkNsaWNrPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0aGlzLnRyYWNraW5nQ2xpY2s/KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLHRoaXMudHJhY2tpbmdDbGljaz0hMSwhMCk6XCJzdWJtaXRcIj09PXQudGFyZ2V0LnR5cGUmJjA9PT10LmRldGFpbHx8KChlPXRoaXMub25Nb3VzZSh0KSl8fCh0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCksZSl9LGUucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxheWVyO2kmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIix0aGlzLm9uTW91c2UsITApLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMub25Nb3VzZSwhMCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLHRoaXMub25Nb3VzZSwhMCkpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLCEwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLHRoaXMub25Ub3VjaE1vdmUsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5vblRvdWNoRW5kLCExKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGNhbmNlbFwiLHRoaXMub25Ub3VjaENhbmNlbCwhMSl9LGUubm90TmVlZGVkPWZ1bmN0aW9uKHQpe3ZhciBlLG4sbztpZih2b2lkIDA9PT13aW5kb3cub250b3VjaHN0YXJ0KXJldHVybiEwO2lmKG49KygvQ2hyb21lXFwvKFswLTldKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFssMF0pWzFdKXtpZighaSlyZXR1cm4hMDtpZihlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpKXtpZigtMSE9PWUuY29udGVudC5pbmRleE9mKFwidXNlci1zY2FsYWJsZT1ub1wiKSlyZXR1cm4hMDtpZihuPjMxJiZkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg8PXdpbmRvdy5vdXRlcldpZHRoKXJldHVybiEwfX1pZihzJiYobz1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9WZXJzaW9uXFwvKFswLTldKilcXC4oWzAtOV0qKS8pKVsxXT49MTAmJm9bMl0+PTMmJihlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpKSl7aWYoLTEhPT1lLmNvbnRlbnQuaW5kZXhPZihcInVzZXItc2NhbGFibGU9bm9cIikpcmV0dXJuITA7aWYoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoPD13aW5kb3cub3V0ZXJXaWR0aClyZXR1cm4hMH1yZXR1cm5cIm5vbmVcIj09PXQuc3R5bGUubXNUb3VjaEFjdGlvbnx8XCJtYW5pcHVsYXRpb25cIj09PXQuc3R5bGUudG91Y2hBY3Rpb258fCghISgrKC9GaXJlZm94XFwvKFswLTldKykvLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCl8fFssMF0pWzFdPj0yNyYmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpJiYoLTEhPT1lLmNvbnRlbnQuaW5kZXhPZihcInVzZXItc2NhbGFibGU9bm9cIil8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDw9d2luZG93Lm91dGVyV2lkdGgpKXx8XCJub25lXCI9PT10LnN0eWxlLnRvdWNoQWN0aW9ufHxcIm1hbmlwdWxhdGlvblwiPT09dC5zdHlsZS50b3VjaEFjdGlvbil9LGUuYXR0YWNoPWZ1bmN0aW9uKHQsbil7cmV0dXJuIG5ldyBlKHQsbil9LHQuZXhwb3J0cz8odC5leHBvcnRzPWUuYXR0YWNoLHQuZXhwb3J0cy5GYXN0Q2xpY2s9ZSk6d2luZG93LkZhc3RDbGljaz1lfSgpfSkuRmFzdENsaWNrO3dpbmRvdy5jdXN0b21FbGVtZW50cyYmKHdpbmRvdy5jdXN0b21FbGVtZW50cy5mb3JjZVBvbHlmaWxsPSEwKTt2YXIgVnQ9byhmdW5jdGlvbih0KXt2YXIgZT10LmV4cG9ydHM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdyYmd2luZG93Lk1hdGg9PU1hdGg/d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiZzZWxmLk1hdGg9PU1hdGg/c2VsZjpGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XCJudW1iZXJcIj09dHlwZW9mIF9fZyYmKF9fZz1lKX0pLFd0PW8oZnVuY3Rpb24odCl7dmFyIGU9dC5leHBvcnRzPXt2ZXJzaW9uOlwiMi41LjFcIn07XCJudW1iZXJcIj09dHlwZW9mIF9fZSYmKF9fZT1lKX0pLFV0PShXdC52ZXJzaW9uLGZ1bmN0aW9uKHQpe3JldHVyblwib2JqZWN0XCI9PT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpP251bGwhPT10OlwiZnVuY3Rpb25cIj09dHlwZW9mIHR9KSxYdD1mdW5jdGlvbih0KXtpZighVXQodCkpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGFuIG9iamVjdCFcIik7cmV0dXJuIHR9LFl0PWZ1bmN0aW9uKHQpe3RyeXtyZXR1cm4hIXQoKX1jYXRjaCh0KXtyZXR1cm4hMH19LEd0PSFZdChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoe30sXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KSwkdD1WdC5kb2N1bWVudCxLdD1VdCgkdCkmJlV0KCR0LmNyZWF0ZUVsZW1lbnQpLFF0PWZ1bmN0aW9uKHQpe3JldHVybiBLdD8kdC5jcmVhdGVFbGVtZW50KHQpOnt9fSxKdD0hR3QmJiFZdChmdW5jdGlvbigpe3JldHVybiA3IT1PYmplY3QuZGVmaW5lUHJvcGVydHkoUXQoXCJkaXZcIiksXCJhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiA3fX0pLmF9KSxadD1mdW5jdGlvbih0LGUpe2lmKCFVdCh0KSlyZXR1cm4gdDt2YXIgbixpO2lmKGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFVdChpPW4uY2FsbCh0KSkpcmV0dXJuIGk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnZhbHVlT2YpJiYhVXQoaT1uLmNhbGwodCkpKXJldHVybiBpO2lmKCFlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudG9TdHJpbmcpJiYhVXQoaT1uLmNhbGwodCkpKXJldHVybiBpO3Rocm93IFR5cGVFcnJvcihcIkNhbid0IGNvbnZlcnQgb2JqZWN0IHRvIHByaW1pdGl2ZSB2YWx1ZVwiKX0sdGU9T2JqZWN0LmRlZmluZVByb3BlcnR5LGVlPXtmOkd0P09iamVjdC5kZWZpbmVQcm9wZXJ0eTpmdW5jdGlvbih0LGUsbil7aWYoWHQodCksZT1adChlLCEwKSxYdChuKSxKdCl0cnl7cmV0dXJuIHRlKHQsZSxuKX1jYXRjaCh0KXt9aWYoXCJnZXRcImluIG58fFwic2V0XCJpbiBuKXRocm93IFR5cGVFcnJvcihcIkFjY2Vzc29ycyBub3Qgc3VwcG9ydGVkIVwiKTtyZXR1cm5cInZhbHVlXCJpbiBuJiYodFtlXT1uLnZhbHVlKSx0fX0sbmU9ZnVuY3Rpb24odCxlKXtyZXR1cm57ZW51bWVyYWJsZTohKDEmdCksY29uZmlndXJhYmxlOiEoMiZ0KSx3cml0YWJsZTohKDQmdCksdmFsdWU6ZX19LGllPUd0P2Z1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZWUuZih0LGUsbmUoMSxuKSl9OmZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdFtlXT1uLHR9LG9lPXt9Lmhhc093blByb3BlcnR5LHJlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG9lLmNhbGwodCxlKX0sYWU9MCxzZT1NYXRoLnJhbmRvbSgpLGxlPWZ1bmN0aW9uKHQpe3JldHVyblwiU3ltYm9sKFwiLmNvbmNhdCh2b2lkIDA9PT10P1wiXCI6dCxcIilfXCIsKCsrYWUrc2UpLnRvU3RyaW5nKDM2KSl9LHVlPW8oZnVuY3Rpb24odCl7dmFyIGU9bGUoXCJzcmNcIiksbj1GdW5jdGlvbi50b1N0cmluZyxpPShcIlwiK24pLnNwbGl0KFwidG9TdHJpbmdcIik7V3QuaW5zcGVjdFNvdXJjZT1mdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHQpfSwodC5leHBvcnRzPWZ1bmN0aW9uKHQsbixvLHIpe3ZhciBhPVwiZnVuY3Rpb25cIj09dHlwZW9mIG87YSYmKHJlKG8sXCJuYW1lXCIpfHxpZShvLFwibmFtZVwiLG4pKSx0W25dIT09byYmKGEmJihyZShvLGUpfHxpZShvLGUsdFtuXT9cIlwiK3Rbbl06aS5qb2luKFN0cmluZyhuKSkpKSx0PT09VnQ/dFtuXT1vOnI/dFtuXT90W25dPW86aWUodCxuLG8pOihkZWxldGUgdFtuXSxpZSh0LG4sbykpKX0pKEZ1bmN0aW9uLnByb3RvdHlwZSxcInRvU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzJiZ0aGlzW2VdfHxuLmNhbGwodGhpcyl9KX0pLGNlPWZ1bmN0aW9uKHQpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIHQpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGEgZnVuY3Rpb24hXCIpO3JldHVybiB0fSxoZT1mdW5jdGlvbih0LGUsbil7aWYoY2UodCksdm9pZCAwPT09ZSlyZXR1cm4gdDtzd2l0Y2gobil7Y2FzZSAxOnJldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gdC5jYWxsKGUsbil9O2Nhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixpKXtyZXR1cm4gdC5jYWxsKGUsbixpKX07Y2FzZSAzOnJldHVybiBmdW5jdGlvbihuLGksbyl7cmV0dXJuIHQuY2FsbChlLG4saSxvKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxhcmd1bWVudHMpfX0sZGU9ZnVuY3Rpb24gdChlLG4saSl7dmFyIG8scixhLHMsbD1lJnQuRix1PWUmdC5HLGM9ZSZ0LlAsaD1lJnQuQixkPXU/VnQ6ZSZ0LlM/VnRbbl18fChWdFtuXT17fSk6KFZ0W25dfHx7fSkucHJvdG90eXBlLGY9dT9XdDpXdFtuXXx8KFd0W25dPXt9KSxwPWYucHJvdG90eXBlfHwoZi5wcm90b3R5cGU9e30pO3UmJihpPW4pO2ZvcihvIGluIGkpYT0oKHI9IWwmJmQmJnZvaWQgMCE9PWRbb10pP2Q6aSlbb10scz1oJiZyP2hlKGEsVnQpOmMmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGE/aGUoRnVuY3Rpb24uY2FsbCxhKTphLGQmJnVlKGQsbyxhLGUmdC5VKSxmW29dIT1hJiZpZShmLG8scyksYyYmcFtvXSE9YSYmKHBbb109YSl9O1Z0LmNvcmU9V3QsZGUuRj0xLGRlLkc9MixkZS5TPTQsZGUuUD04LGRlLkI9MTYsZGUuVz0zMixkZS5VPTY0LGRlLlI9MTI4O3ZhciBmZT1kZSxwZT17Zjp7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZX0sZ2U9e30udG9TdHJpbmcsbWU9ZnVuY3Rpb24odCl7cmV0dXJuIGdlLmNhbGwodCkuc2xpY2UoOCwtMSl9LF9lPU9iamVjdChcInpcIikucHJvcGVydHlJc0VudW1lcmFibGUoMCk/T2JqZWN0OmZ1bmN0aW9uKHQpe3JldHVyblwiU3RyaW5nXCI9PW1lKHQpP3Quc3BsaXQoXCJcIik6T2JqZWN0KHQpfSx2ZT1mdW5jdGlvbih0KXtpZih2b2lkIDA9PXQpdGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY2FsbCBtZXRob2Qgb24gIFwiK3QpO3JldHVybiB0fSxiZT1mdW5jdGlvbih0KXtyZXR1cm4gX2UodmUodCkpfSx5ZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLGtlPXtmOkd0P3llOmZ1bmN0aW9uKHQsZSl7aWYodD1iZSh0KSxlPVp0KGUsITApLEp0KXRyeXtyZXR1cm4geWUodCxlKX1jYXRjaCh0KXt9aWYocmUodCxlKSlyZXR1cm4gbmUoIXBlLmYuY2FsbCh0LGUpLHRbZV0pfX0sd2U9ZnVuY3Rpb24odCxlKXtpZihYdCh0KSwhVXQoZSkmJm51bGwhPT1lKXRocm93IFR5cGVFcnJvcihlK1wiOiBjYW4ndCBzZXQgYXMgcHJvdG90eXBlIVwiKX0sRWU9e3NldDpPYmplY3Quc2V0UHJvdG90eXBlT2Z8fChcIl9fcHJvdG9fX1wiaW57fT9mdW5jdGlvbih0LGUsbil7dHJ5eyhuPWhlKEZ1bmN0aW9uLmNhbGwsa2UuZihPYmplY3QucHJvdG90eXBlLFwiX19wcm90b19fXCIpLnNldCwyKSkodCxbXSksZT0hKHQgaW5zdGFuY2VvZiBBcnJheSl9Y2F0Y2godCl7ZT0hMH1yZXR1cm4gZnVuY3Rpb24odCxpKXtyZXR1cm4gd2UodCxpKSxlP3QuX19wcm90b19fPWk6bih0LGkpLHR9fSh7fSwhMSk6dm9pZCAwKSxjaGVjazp3ZX07ZmUoZmUuUyxcIk9iamVjdFwiLHtzZXRQcm90b3R5cGVPZjpFZS5zZXR9KTtXdC5PYmplY3Quc2V0UHJvdG90eXBlT2Y7dmFyIENlPVZ0W1wiX19jb3JlLWpzX3NoYXJlZF9fXCJdfHwoVnRbXCJfX2NvcmUtanNfc2hhcmVkX19cIl09e30pLEFlPWZ1bmN0aW9uKHQpe3JldHVybiBDZVt0XXx8KENlW3RdPXt9KX0sU2U9byhmdW5jdGlvbih0KXt2YXIgZT1BZShcIndrc1wiKSxuPVZ0LlN5bWJvbCxpPVwiZnVuY3Rpb25cIj09dHlwZW9mIG47KHQuZXhwb3J0cz1mdW5jdGlvbih0KXtyZXR1cm4gZVt0XXx8KGVbdF09aSYmblt0XXx8KGk/bjpsZSkoXCJTeW1ib2wuXCIrdCkpfSkuc3RvcmU9ZX0pLFBlPVNlKFwidG9TdHJpbmdUYWdcIiksT2U9XCJBcmd1bWVudHNcIj09bWUoZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzfSgpKSx4ZT1mdW5jdGlvbih0KXt2YXIgZSxuLGk7cmV0dXJuIHZvaWQgMD09PXQ/XCJVbmRlZmluZWRcIjpudWxsPT09dD9cIk51bGxcIjpcInN0cmluZ1wiPT10eXBlb2Yobj1mdW5jdGlvbih0LGUpe3RyeXtyZXR1cm4gdFtlXX1jYXRjaCh0KXt9fShlPU9iamVjdCh0KSxQZSkpP246T2U/bWUoZSk6XCJPYmplY3RcIj09KGk9bWUoZSkpJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmNhbGxlZT9cIkFyZ3VtZW50c1wiOml9LFRlPXt9O1RlW1NlKFwidG9TdHJpbmdUYWdcIildPVwielwiLFRlK1wiXCIhPVwiW29iamVjdCB6XVwiJiZ1ZShPYmplY3QucHJvdG90eXBlLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBcIit4ZSh0aGlzKStcIl1cIn0sITApO3ZhciBMZT1NYXRoLmNlaWwsTWU9TWF0aC5mbG9vcixEZT1mdW5jdGlvbih0KXtyZXR1cm4gaXNOYU4odD0rdCk/MDoodD4wP01lOkxlKSh0KX0sSWU9e30sTmU9TWF0aC5taW4sQmU9ZnVuY3Rpb24odCl7cmV0dXJuIHQ+MD9OZShEZSh0KSw5MDA3MTk5MjU0NzQwOTkxKTowfSxqZT1NYXRoLm1heCxIZT1NYXRoLm1pbixSZT1BZShcImtleXNcIiksRmU9ZnVuY3Rpb24odCl7cmV0dXJuIFJlW3RdfHwoUmVbdF09bGUodCkpfSxxZT1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3ZhciBvLHI9YmUoZSksYT1CZShyLmxlbmd0aCkscz1mdW5jdGlvbih0LGUpe3JldHVybih0PURlKHQpKTwwP2plKHQrZSwwKTpIZSh0LGUpfShpLGEpO2lmKHQmJm4hPW4pe2Zvcig7YT5zOylpZigobz1yW3MrK10pIT1vKXJldHVybiEwfWVsc2UgZm9yKDthPnM7cysrKWlmKCh0fHxzIGluIHIpJiZyW3NdPT09bilyZXR1cm4gdHx8c3x8MDtyZXR1cm4hdCYmLTF9fSghMSksemU9RmUoXCJJRV9QUk9UT1wiKSxWZT1cImNvbnN0cnVjdG9yLGhhc093blByb3BlcnR5LGlzUHJvdG90eXBlT2YscHJvcGVydHlJc0VudW1lcmFibGUsdG9Mb2NhbGVTdHJpbmcsdG9TdHJpbmcsdmFsdWVPZlwiLnNwbGl0KFwiLFwiKSxXZT1PYmplY3Qua2V5c3x8ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG4saT1iZSh0KSxvPTAscj1bXTtmb3IobiBpbiBpKW4hPXplJiZyZShpLG4pJiZyLnB1c2gobik7Zm9yKDtlLmxlbmd0aD5vOylyZShpLG49ZVtvKytdKSYmKH5xZShyLG4pfHxyLnB1c2gobikpO3JldHVybiByfSh0LFZlKX0sVWU9R3Q/T2JqZWN0LmRlZmluZVByb3BlcnRpZXM6ZnVuY3Rpb24odCxlKXtYdCh0KTtmb3IodmFyIG4saT1XZShlKSxvPWkubGVuZ3RoLHI9MDtvPnI7KWVlLmYodCxuPWlbcisrXSxlW25dKTtyZXR1cm4gdH0sWGU9VnQuZG9jdW1lbnQsWWU9WGUmJlhlLmRvY3VtZW50RWxlbWVudCxHZT1GZShcIklFX1BST1RPXCIpLCRlPWZ1bmN0aW9uKCl7fSxLZT1mdW5jdGlvbigpe3ZhciB0LGU9UXQoXCJpZnJhbWVcIiksbj1WZS5sZW5ndGg7Zm9yKGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixZZS5hcHBlbmRDaGlsZChlKSxlLnNyYz1cImphdmFzY3JpcHQ6XCIsKHQ9ZS5jb250ZW50V2luZG93LmRvY3VtZW50KS5vcGVuKCksdC53cml0ZShcIjxzY3JpcHQ+ZG9jdW1lbnQuRj1PYmplY3Q8XFwvc2NyaXB0PlwiKSx0LmNsb3NlKCksS2U9dC5GO24tLTspZGVsZXRlIEtlLnByb3RvdHlwZVtWZVtuXV07cmV0dXJuIEtlKCl9LFFlPU9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKHQsZSl7dmFyIG47cmV0dXJuIG51bGwhPT10PygkZS5wcm90b3R5cGU9WHQodCksbj1uZXcgJGUsJGUucHJvdG90eXBlPW51bGwsbltHZV09dCk6bj1LZSgpLHZvaWQgMD09PWU/bjpVZShuLGUpfSxKZT1lZS5mLFplPVNlKFwidG9TdHJpbmdUYWdcIiksdG49ZnVuY3Rpb24odCxlLG4pe3QmJiFyZSh0PW4/dDp0LnByb3RvdHlwZSxaZSkmJkplKHQsWmUse2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTplfSl9LGVuPXt9O2llKGVuLFNlKFwiaXRlcmF0b3JcIiksZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pO3ZhciBubj1mdW5jdGlvbih0LGUsbil7dC5wcm90b3R5cGU9UWUoZW4se25leHQ6bmUoMSxuKX0pLHRuKHQsZStcIiBJdGVyYXRvclwiKX0sb249ZnVuY3Rpb24odCl7cmV0dXJuIE9iamVjdCh2ZSh0KSl9LHJuPUZlKFwiSUVfUFJPVE9cIiksYW49T2JqZWN0LnByb3RvdHlwZSxzbj1PYmplY3QuZ2V0UHJvdG90eXBlT2Z8fGZ1bmN0aW9uKHQpe3JldHVybiB0PW9uKHQpLHJlKHQscm4pP3Rbcm5dOlwiZnVuY3Rpb25cIj09dHlwZW9mIHQuY29uc3RydWN0b3ImJnQgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yP3QuY29uc3RydWN0b3IucHJvdG90eXBlOnQgaW5zdGFuY2VvZiBPYmplY3Q/YW46bnVsbH0sbG49U2UoXCJpdGVyYXRvclwiKSx1bj0hKFtdLmtleXMmJlwibmV4dFwiaW5bXS5rZXlzKCkpLGNuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LGhuPWZ1bmN0aW9uKHQsZSxuLGksbyxyLGEpe25uKG4sZSxpKTt2YXIgcyxsLHUsYz1mdW5jdGlvbih0KXtpZighdW4mJnQgaW4gcClyZXR1cm4gcFt0XTtzd2l0Y2godCl7Y2FzZVwia2V5c1wiOmNhc2VcInZhbHVlc1wiOnJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4odGhpcyx0KX19LGg9ZStcIiBJdGVyYXRvclwiLGQ9XCJ2YWx1ZXNcIj09byxmPSExLHA9dC5wcm90b3R5cGUsZz1wW2xuXXx8cFtcIkBAaXRlcmF0b3JcIl18fG8mJnBbb10sbT1nfHxjKG8pLF89bz9kP2MoXCJlbnRyaWVzXCIpOm06dm9pZCAwLHY9XCJBcnJheVwiPT1lP3AuZW50cmllc3x8ZzpnO2lmKHYmJih1PXNuKHYuY2FsbChuZXcgdCkpKSE9PU9iamVjdC5wcm90b3R5cGUmJnUubmV4dCYmKHRuKHUsaCwhMCkscmUodSxsbil8fGllKHUsbG4sY24pKSxkJiZnJiZcInZhbHVlc1wiIT09Zy5uYW1lJiYoZj0hMCxtPWZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FsbCh0aGlzKX0pLCh1bnx8Znx8IXBbbG5dKSYmaWUocCxsbixtKSxJZVtlXT1tLEllW2hdPWNuLG8paWYocz17dmFsdWVzOmQ/bTpjKFwidmFsdWVzXCIpLGtleXM6cj9tOmMoXCJrZXlzXCIpLGVudHJpZXM6X30sYSlmb3IobCBpbiBzKWwgaW4gcHx8dWUocCxsLHNbbF0pO2Vsc2UgZmUoZmUuUCtmZS5GKih1bnx8ZiksZSxzKTtyZXR1cm4gc30sZG49ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsbil7dmFyIGksbyxyPVN0cmluZyh2ZShlKSksYT1EZShuKSxzPXIubGVuZ3RoO3JldHVybiBhPDB8fGE+PXM/dD9cIlwiOnZvaWQgMDooaT1yLmNoYXJDb2RlQXQoYSkpPDU1Mjk2fHxpPjU2MzE5fHxhKzE9PT1zfHwobz1yLmNoYXJDb2RlQXQoYSsxKSk8NTYzMjB8fG8+NTczNDM/dD9yLmNoYXJBdChhKTppOnQ/ci5zbGljZShhLGErMik6by01NjMyMCsoaS01NTI5Njw8MTApKzY1NTM2fX0oITApO2huKFN0cmluZyxcIlN0cmluZ1wiLGZ1bmN0aW9uKHQpe3RoaXMuX3Q9U3RyaW5nKHQpLHRoaXMuX2k9MH0sZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX3Qsbj10aGlzLl9pO3JldHVybiBuPj1lLmxlbmd0aD97dmFsdWU6dm9pZCAwLGRvbmU6ITB9Oih0PWRuKGUsbiksdGhpcy5faSs9dC5sZW5ndGgse3ZhbHVlOnQsZG9uZTohMX0pfSk7dmFyIGZuPVNlKFwidW5zY29wYWJsZXNcIikscG49QXJyYXkucHJvdG90eXBlO3ZvaWQgMD09cG5bZm5dJiZpZShwbixmbix7fSk7dmFyIGduPWZ1bmN0aW9uKHQpe3BuW2ZuXVt0XT0hMH0sbW49ZnVuY3Rpb24odCxlKXtyZXR1cm57dmFsdWU6ZSxkb25lOiEhdH19LF9uPWhuKEFycmF5LFwiQXJyYXlcIixmdW5jdGlvbih0LGUpe3RoaXMuX3Q9YmUodCksdGhpcy5faT0wLHRoaXMuX2s9ZX0sZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90LGU9dGhpcy5fayxuPXRoaXMuX2krKztyZXR1cm4hdHx8bj49dC5sZW5ndGg/KHRoaXMuX3Q9dm9pZCAwLG1uKDEpKTpcImtleXNcIj09ZT9tbigwLG4pOlwidmFsdWVzXCI9PWU/bW4oMCx0W25dKTptbigwLFtuLHRbbl1dKX0sXCJ2YWx1ZXNcIik7SWUuQXJndW1lbnRzPUllLkFycmF5LGduKFwia2V5c1wiKSxnbihcInZhbHVlc1wiKSxnbihcImVudHJpZXNcIik7Zm9yKHZhciB2bj1TZShcIml0ZXJhdG9yXCIpLGJuPVNlKFwidG9TdHJpbmdUYWdcIikseW49SWUuQXJyYXksa249e0NTU1J1bGVMaXN0OiEwLENTU1N0eWxlRGVjbGFyYXRpb246ITEsQ1NTVmFsdWVMaXN0OiExLENsaWVudFJlY3RMaXN0OiExLERPTVJlY3RMaXN0OiExLERPTVN0cmluZ0xpc3Q6ITEsRE9NVG9rZW5MaXN0OiEwLERhdGFUcmFuc2Zlckl0ZW1MaXN0OiExLEZpbGVMaXN0OiExLEhUTUxBbGxDb2xsZWN0aW9uOiExLEhUTUxDb2xsZWN0aW9uOiExLEhUTUxGb3JtRWxlbWVudDohMSxIVE1MU2VsZWN0RWxlbWVudDohMSxNZWRpYUxpc3Q6ITAsTWltZVR5cGVBcnJheTohMSxOYW1lZE5vZGVNYXA6ITEsTm9kZUxpc3Q6ITAsUGFpbnRSZXF1ZXN0TGlzdDohMSxQbHVnaW46ITEsUGx1Z2luQXJyYXk6ITEsU1ZHTGVuZ3RoTGlzdDohMSxTVkdOdW1iZXJMaXN0OiExLFNWR1BhdGhTZWdMaXN0OiExLFNWR1BvaW50TGlzdDohMSxTVkdTdHJpbmdMaXN0OiExLFNWR1RyYW5zZm9ybUxpc3Q6ITEsU291cmNlQnVmZmVyTGlzdDohMSxTdHlsZVNoZWV0TGlzdDohMCxUZXh0VHJhY2tDdWVMaXN0OiExLFRleHRUcmFja0xpc3Q6ITEsVG91Y2hMaXN0OiExfSx3bj1XZShrbiksRW49MDtFbjx3bi5sZW5ndGg7RW4rKyl7dmFyIENuLEFuPXduW0VuXSxTbj1rbltBbl0sUG49VnRbQW5dLE9uPVBuJiZQbi5wcm90b3R5cGU7aWYoT24mJihPblt2bl18fGllKE9uLHZuLHluKSxPbltibl18fGllKE9uLGJuLEFuKSxJZVtBbl09eW4sU24pKWZvcihDbiBpbiBfbilPbltDbl18fHVlKE9uLENuLF9uW0NuXSwhMCl9dmFyIHhuPWZ1bmN0aW9uKHQsZSxuKXtmb3IodmFyIGkgaW4gZSl1ZSh0LGksZVtpXSxuKTtyZXR1cm4gdH0sVG49ZnVuY3Rpb24odCxlLG4saSl7aWYoISh0IGluc3RhbmNlb2YgZSl8fHZvaWQgMCE9PWkmJmkgaW4gdCl0aHJvdyBUeXBlRXJyb3IobitcIjogaW5jb3JyZWN0IGludm9jYXRpb24hXCIpO3JldHVybiB0fSxMbj1mdW5jdGlvbih0LGUsbixpKXt0cnl7cmV0dXJuIGk/ZShYdChuKVswXSxuWzFdKTplKG4pfWNhdGNoKGUpe3ZhciBvPXQucmV0dXJuO3Rocm93IHZvaWQgMCE9PW8mJlh0KG8uY2FsbCh0KSksZX19LE1uPVNlKFwiaXRlcmF0b3JcIiksRG49QXJyYXkucHJvdG90eXBlLEluPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10JiYoSWUuQXJyYXk9PT10fHxEbltNbl09PT10KX0sTm49U2UoXCJpdGVyYXRvclwiKSxCbj1XdC5nZXRJdGVyYXRvck1ldGhvZD1mdW5jdGlvbih0KXtpZih2b2lkIDAhPXQpcmV0dXJuIHRbTm5dfHx0W1wiQEBpdGVyYXRvclwiXXx8SWVbeGUodCldfSxqbj1vKGZ1bmN0aW9uKHQpe3ZhciBlPXt9LG49e30saT10LmV4cG9ydHM9ZnVuY3Rpb24odCxpLG8scixhKXt2YXIgcyxsLHUsYyxoPWE/ZnVuY3Rpb24oKXtyZXR1cm4gdH06Qm4odCksZD1oZShvLHIsaT8yOjEpLGY9MDtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBoKXRocm93IFR5cGVFcnJvcih0K1wiIGlzIG5vdCBpdGVyYWJsZSFcIik7aWYoSW4oaCkpe2ZvcihzPUJlKHQubGVuZ3RoKTtzPmY7ZisrKWlmKChjPWk/ZChYdChsPXRbZl0pWzBdLGxbMV0pOmQodFtmXSkpPT09ZXx8Yz09PW4pcmV0dXJuIGN9ZWxzZSBmb3IodT1oLmNhbGwodCk7IShsPXUubmV4dCgpKS5kb25lOylpZigoYz1Mbih1LGQsbC52YWx1ZSxpKSk9PT1lfHxjPT09bilyZXR1cm4gY307aS5CUkVBSz1lLGkuUkVUVVJOPW59KSxIbj1TZShcInNwZWNpZXNcIiksUm49byhmdW5jdGlvbih0KXt2YXIgZT1sZShcIm1ldGFcIiksbj1lZS5mLGk9MCxvPU9iamVjdC5pc0V4dGVuc2libGV8fGZ1bmN0aW9uKCl7cmV0dXJuITB9LHI9IVl0KGZ1bmN0aW9uKCl7cmV0dXJuIG8oT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKHt9KSl9KSxhPWZ1bmN0aW9uKHQpe24odCxlLHt2YWx1ZTp7aTpcIk9cIisgKytpLHc6e319fSl9LHM9dC5leHBvcnRzPXtLRVk6ZSxORUVEOiExLGZhc3RLZXk6ZnVuY3Rpb24odCxuKXtpZighVXQodCkpcmV0dXJuXCJzeW1ib2xcIj09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpmKHQpKT90OihcInN0cmluZ1wiPT10eXBlb2YgdD9cIlNcIjpcIlBcIikrdDtpZighcmUodCxlKSl7aWYoIW8odCkpcmV0dXJuXCJGXCI7aWYoIW4pcmV0dXJuXCJFXCI7YSh0KX1yZXR1cm4gdFtlXS5pfSxnZXRXZWFrOmZ1bmN0aW9uKHQsbil7aWYoIXJlKHQsZSkpe2lmKCFvKHQpKXJldHVybiEwO2lmKCFuKXJldHVybiExO2EodCl9cmV0dXJuIHRbZV0ud30sb25GcmVlemU6ZnVuY3Rpb24odCl7cmV0dXJuIHImJnMuTkVFRCYmbyh0KSYmIXJlKHQsZSkmJmEodCksdH19fSksRm49KFJuLktFWSxSbi5ORUVELFJuLmZhc3RLZXksUm4uZ2V0V2VhayxSbi5vbkZyZWV6ZSxmdW5jdGlvbih0LGUpe2lmKCFVdCh0KXx8dC5fdCE9PWUpdGhyb3cgVHlwZUVycm9yKFwiSW5jb21wYXRpYmxlIHJlY2VpdmVyLCBcIitlK1wiIHJlcXVpcmVkIVwiKTtyZXR1cm4gdH0pLHFuPWVlLmYsem49Um4uZmFzdEtleSxWbj1HdD9cIl9zXCI6XCJzaXplXCIsV249ZnVuY3Rpb24odCxlKXt2YXIgbixpPXpuKGUpO2lmKFwiRlwiIT09aSlyZXR1cm4gdC5faVtpXTtmb3Iobj10Ll9mO247bj1uLm4paWYobi5rPT1lKXJldHVybiBufSxVbj17Z2V0Q29uc3RydWN0b3I6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dChmdW5jdGlvbih0LHIpe1RuKHQsbyxlLFwiX2lcIiksdC5fdD1lLHQuX2k9UWUobnVsbCksdC5fZj12b2lkIDAsdC5fbD12b2lkIDAsdFtWbl09MCx2b2lkIDAhPXImJmpuKHIsbix0W2ldLHQpfSk7cmV0dXJuIHhuKG8ucHJvdG90eXBlLHtjbGVhcjpmdW5jdGlvbigpe2Zvcih2YXIgdD1Gbih0aGlzLGUpLG49dC5faSxpPXQuX2Y7aTtpPWkubilpLnI9ITAsaS5wJiYoaS5wPWkucC5uPXZvaWQgMCksZGVsZXRlIG5baS5pXTt0Ll9mPXQuX2w9dm9pZCAwLHRbVm5dPTB9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgbj1Gbih0aGlzLGUpLGk9V24obix0KTtpZihpKXt2YXIgbz1pLm4scj1pLnA7ZGVsZXRlIG4uX2lbaS5pXSxpLnI9ITAsciYmKHIubj1vKSxvJiYoby5wPXIpLG4uX2Y9PWkmJihuLl9mPW8pLG4uX2w9PWkmJihuLl9sPXIpLG5bVm5dLS19cmV0dXJuISFpfSxmb3JFYWNoOmZ1bmN0aW9uKHQpe0ZuKHRoaXMsZSk7Zm9yKHZhciBuLGk9aGUodCxhcmd1bWVudHMubGVuZ3RoPjE/YXJndW1lbnRzWzFdOnZvaWQgMCwzKTtuPW4/bi5uOnRoaXMuX2Y7KWZvcihpKG4udixuLmssdGhpcyk7biYmbi5yOyluPW4ucH0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhV24oRm4odGhpcyxlKSx0KX19KSxHdCYmcW4oby5wcm90b3R5cGUsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBGbih0aGlzLGUpW1ZuXX19KSxvfSxkZWY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG8scj1Xbih0LGUpO3JldHVybiByP3Iudj1uOih0Ll9sPXI9e2k6bz16bihlLCEwKSxrOmUsdjpuLHA6aT10Ll9sLG46dm9pZCAwLHI6ITF9LHQuX2Z8fCh0Ll9mPXIpLGkmJihpLm49ciksdFtWbl0rKyxcIkZcIiE9PW8mJih0Ll9pW29dPXIpKSx0fSxnZXRFbnRyeTpXbixzZXRTdHJvbmc6ZnVuY3Rpb24odCxlLG4pe2huKHQsZSxmdW5jdGlvbih0LG4pe3RoaXMuX3Q9Rm4odCxlKSx0aGlzLl9rPW4sdGhpcy5fbD12b2lkIDB9LGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX2ssZT10aGlzLl9sO2UmJmUucjspZT1lLnA7cmV0dXJuIHRoaXMuX3QmJih0aGlzLl9sPWU9ZT9lLm46dGhpcy5fdC5fZik/XCJrZXlzXCI9PXQ/bW4oMCxlLmspOlwidmFsdWVzXCI9PXQ/bW4oMCxlLnYpOm1uKDAsW2UuayxlLnZdKToodGhpcy5fdD12b2lkIDAsbW4oMSkpfSxuP1wiZW50cmllc1wiOlwidmFsdWVzXCIsIW4sITApLGZ1bmN0aW9uKHQpe3ZhciBlPVZ0W3RdO0d0JiZlJiYhZVtIbl0mJmVlLmYoZSxIbix7Y29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzfX0pfShlKX19LFhuPVNlKFwiaXRlcmF0b3JcIiksWW49ITE7dHJ5e1s3XVtYbl0oKS5yZXR1cm49ZnVuY3Rpb24oKXtZbj0hMH19Y2F0Y2godCl7fXZhciBHbj1mdW5jdGlvbih0LGUpe2lmKCFlJiYhWW4pcmV0dXJuITE7dmFyIG49ITE7dHJ5e3ZhciBpPVs3XSxvPWlbWG5dKCk7by5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6bj0hMH19LGlbWG5dPWZ1bmN0aW9uKCl7cmV0dXJuIG99LHQoaSl9Y2F0Y2godCl7fXJldHVybiBufSwkbj1FZS5zZXQsS249ZnVuY3Rpb24odCxlLG4saSxvLHIpe3ZhciBhPVZ0W3RdLHM9YSxsPW8/XCJzZXRcIjpcImFkZFwiLHU9cyYmcy5wcm90b3R5cGUsYz17fSxoPWZ1bmN0aW9uKHQpe3ZhciBlPXVbdF07dWUodSx0LFwiZGVsZXRlXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShyJiYhVXQodCkpJiZlLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImhhc1wiPT10P2Z1bmN0aW9uKHQpe3JldHVybiEociYmIVV0KHQpKSYmZS5jYWxsKHRoaXMsMD09PXQ/MDp0KX06XCJnZXRcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4gciYmIVV0KHQpP3ZvaWQgMDplLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImFkZFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiBlLmNhbGwodGhpcywwPT09dD8wOnQpLHRoaXN9OmZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuY2FsbCh0aGlzLDA9PT10PzA6dCxuKSx0aGlzfSl9O2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHMmJihyfHx1LmZvckVhY2gmJiFZdChmdW5jdGlvbigpeyhuZXcgcykuZW50cmllcygpLm5leHQoKX0pKSl7dmFyIGQ9bmV3IHMsZj1kW2xdKHI/e306LTAsMSkhPWQscD1ZdChmdW5jdGlvbigpe2QuaGFzKDEpfSksZz1HbihmdW5jdGlvbih0KXtuZXcgcyh0KX0pLG09IXImJll0KGZ1bmN0aW9uKCl7Zm9yKHZhciB0PW5ldyBzLGU9NTtlLS07KXRbbF0oZSxlKTtyZXR1cm4hdC5oYXMoLTApfSk7Z3x8KChzPWUoZnVuY3Rpb24oZSxuKXtUbihlLHMsdCk7dmFyIGk9ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG89ZS5jb25zdHJ1Y3RvcjtyZXR1cm4gbyE9PW4mJlwiZnVuY3Rpb25cIj09dHlwZW9mIG8mJihpPW8ucHJvdG90eXBlKSE9PW4ucHJvdG90eXBlJiZVdChpKSYmJG4mJiRuKHQsaSksdH0obmV3IGEsZSxzKTtyZXR1cm4gdm9pZCAwIT1uJiZqbihuLG8saVtsXSxpKSxpfSkpLnByb3RvdHlwZT11LHUuY29uc3RydWN0b3I9cyksKHB8fG0pJiYoaChcImRlbGV0ZVwiKSxoKFwiaGFzXCIpLG8mJmgoXCJnZXRcIikpLChtfHxmKSYmaChsKSxyJiZ1LmNsZWFyJiZkZWxldGUgdS5jbGVhcn1lbHNlIHM9aS5nZXRDb25zdHJ1Y3RvcihlLHQsbyxsKSx4bihzLnByb3RvdHlwZSxuKSxSbi5ORUVEPSEwO3JldHVybiB0bihzLHQpLGNbdF09cyxmZShmZS5HK2ZlLlcrZmUuRioocyE9YSksYykscnx8aS5zZXRTdHJvbmcocyx0LG8pLHN9LFFuPShLbihcIlNldFwiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gVW4uZGVmKEZuKHRoaXMsXCJTZXRcIiksdD0wPT09dD8wOnQsdCl9fSxVbiksZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoeGUodGhpcykhPXQpdGhyb3cgVHlwZUVycm9yKHQrXCIjdG9KU09OIGlzbid0IGdlbmVyaWNcIik7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIG49W107cmV0dXJuIGpuKHQsITEsbi5wdXNoLG4sZSksbn0odGhpcyl9fSk7ZmUoZmUuUCtmZS5SLFwiU2V0XCIse3RvSlNPTjpRbihcIlNldFwiKX0pO3ZhciBKbj1mdW5jdGlvbih0KXtmZShmZS5TLHQse29mOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KTt0LS07KWVbdF09YXJndW1lbnRzW3RdO3JldHVybiBuZXcgdGhpcyhlKX19KX07Sm4oXCJTZXRcIik7dmFyIFpuPWZ1bmN0aW9uKHQpe2ZlKGZlLlMsdCx7ZnJvbTpmdW5jdGlvbih0KXt2YXIgZSxuLGksbyxyPWFyZ3VtZW50c1sxXTtyZXR1cm4gY2UodGhpcyksKGU9dm9pZCAwIT09cikmJmNlKHIpLHZvaWQgMD09dD9uZXcgdGhpczoobj1bXSxlPyhpPTAsbz1oZShyLGFyZ3VtZW50c1syXSwyKSxqbih0LCExLGZ1bmN0aW9uKHQpe24ucHVzaChvKHQsaSsrKSl9KSk6am4odCwhMSxuLnB1c2gsbiksbmV3IHRoaXMobikpfX0pfTtabihcIlNldFwiKTtXdC5TZXQsS24oXCJNYXBcIixmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCh0aGlzLGFyZ3VtZW50cy5sZW5ndGg+MD9hcmd1bWVudHNbMF06dm9pZCAwKX19LHtnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9VW4uZ2V0RW50cnkoRm4odGhpcyxcIk1hcFwiKSx0KTtyZXR1cm4gZSYmZS52fSxzZXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gVW4uZGVmKEZuKHRoaXMsXCJNYXBcIiksMD09PXQ/MDp0LGUpfX0sVW4sITApO2ZlKGZlLlArZmUuUixcIk1hcFwiLHt0b0pTT046UW4oXCJNYXBcIil9KSxKbihcIk1hcFwiKSxabihcIk1hcFwiKTtXdC5NYXA7dmFyIHRpPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiQXJyYXlcIj09bWUodCl9LGVpPVNlKFwic3BlY2llc1wiKSxuaT1mdW5jdGlvbih0LGUpe3ZhciBuPTE9PXQsaT0yPT10LG89Mz09dCxyPTQ9PXQsYT02PT10LHM9NT09dHx8YSxsPWV8fGZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyhmdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdGkodCkmJihcImZ1bmN0aW9uXCIhPXR5cGVvZihlPXQuY29uc3RydWN0b3IpfHxlIT09QXJyYXkmJiF0aShlLnByb3RvdHlwZSl8fChlPXZvaWQgMCksVXQoZSkmJm51bGw9PT0oZT1lW2VpXSkmJihlPXZvaWQgMCkpLHZvaWQgMD09PWU/QXJyYXk6ZX0odCkpKGUpfTtyZXR1cm4gZnVuY3Rpb24oZSx1LGMpe2Zvcih2YXIgaCxkLGY9b24oZSkscD1fZShmKSxnPWhlKHUsYywzKSxtPUJlKHAubGVuZ3RoKSxfPTAsdj1uP2woZSxtKTppP2woZSwwKTp2b2lkIDA7bT5fO18rKylpZigoc3x8XyBpbiBwKSYmKGg9cFtfXSxkPWcoaCxfLGYpLHQpKWlmKG4pdltfXT1kO2Vsc2UgaWYoZClzd2l0Y2godCl7Y2FzZSAzOnJldHVybiEwO2Nhc2UgNTpyZXR1cm4gaDtjYXNlIDY6cmV0dXJuIF87Y2FzZSAyOnYucHVzaChoKX1lbHNlIGlmKHIpcmV0dXJuITE7cmV0dXJuIGE/LTE6b3x8cj9yOnZ9fSxpaT17ZjpPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzfSxvaT1PYmplY3QuYXNzaWduLHJpPSFvaXx8WXQoZnVuY3Rpb24oKXt2YXIgdD17fSxlPXt9LG49U3ltYm9sKCksaT1cImFiY2RlZmdoaWprbG1ub3BxcnN0XCI7cmV0dXJuIHRbbl09NyxpLnNwbGl0KFwiXCIpLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT10fSksNyE9b2koe30sdClbbl18fE9iamVjdC5rZXlzKG9pKHt9LGUpKS5qb2luKFwiXCIpIT1pfSk/ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49b24odCksaT1hcmd1bWVudHMubGVuZ3RoLG89MSxyPWlpLmYsYT1wZS5mO2k+bzspZm9yKHZhciBzLGw9X2UoYXJndW1lbnRzW28rK10pLHU9cj9XZShsKS5jb25jYXQocihsKSk6V2UobCksYz11Lmxlbmd0aCxoPTA7Yz5oOylhLmNhbGwobCxzPXVbaCsrXSkmJihuW3NdPWxbc10pO3JldHVybiBufTpvaSxhaT1Sbi5nZXRXZWFrLHNpPW5pKDUpLGxpPW5pKDYpLHVpPTAsY2k9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2x8fCh0Ll9sPW5ldyBoaSl9LGhpPWZ1bmN0aW9uKCl7dGhpcy5hPVtdfSxkaT1mdW5jdGlvbih0LGUpe3JldHVybiBzaSh0LmEsZnVuY3Rpb24odCl7cmV0dXJuIHRbMF09PT1lfSl9O2hpLnByb3RvdHlwZT17Z2V0OmZ1bmN0aW9uKHQpe3ZhciBlPWRpKHRoaXMsdCk7aWYoZSlyZXR1cm4gZVsxXX0saGFzOmZ1bmN0aW9uKHQpe3JldHVybiEhZGkodGhpcyx0KX0sc2V0OmZ1bmN0aW9uKHQsZSl7dmFyIG49ZGkodGhpcyx0KTtuP25bMV09ZTp0aGlzLmEucHVzaChbdCxlXSl9LGRlbGV0ZTpmdW5jdGlvbih0KXt2YXIgZT1saSh0aGlzLmEsZnVuY3Rpb24oZSl7cmV0dXJuIGVbMF09PT10fSk7cmV0dXJufmUmJnRoaXMuYS5zcGxpY2UoZSwxKSwhIX5lfX07dmFyIGZpPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10KGZ1bmN0aW9uKHQscil7VG4odCxvLGUsXCJfaVwiKSx0Ll90PWUsdC5faT11aSsrLHQuX2w9dm9pZCAwLHZvaWQgMCE9ciYmam4ocixuLHRbaV0sdCl9KTtyZXR1cm4geG4oby5wcm90b3R5cGUse2RlbGV0ZTpmdW5jdGlvbih0KXtpZighVXQodCkpcmV0dXJuITE7dmFyIG49YWkodCk7cmV0dXJuITA9PT1uP2NpKEZuKHRoaXMsZSkpLmRlbGV0ZSh0KTpuJiZyZShuLHRoaXMuX2kpJiZkZWxldGUgblt0aGlzLl9pXX0saGFzOmZ1bmN0aW9uKHQpe2lmKCFVdCh0KSlyZXR1cm4hMTt2YXIgbj1haSh0KTtyZXR1cm4hMD09PW4/Y2koRm4odGhpcyxlKSkuaGFzKHQpOm4mJnJlKG4sdGhpcy5faSl9fSksb30sZGVmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1haShYdChlKSwhMCk7cmV0dXJuITA9PT1pP2NpKHQpLnNldChlLG4pOmlbdC5faV09bix0fSx1ZnN0b3JlOmNpfTtvKGZ1bmN0aW9uKHQpe3ZhciBlLG49bmkoMCksaT1Sbi5nZXRXZWFrLG89T2JqZWN0LmlzRXh0ZW5zaWJsZSxyPWZpLnVmc3RvcmUsYT17fSxzPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0sbD17Z2V0OmZ1bmN0aW9uKHQpe2lmKFV0KHQpKXt2YXIgZT1pKHQpO3JldHVybiEwPT09ZT9yKEZuKHRoaXMsXCJXZWFrTWFwXCIpKS5nZXQodCk6ZT9lW3RoaXMuX2ldOnZvaWQgMH19LHNldDpmdW5jdGlvbih0LGUpe3JldHVybiBmaS5kZWYoRm4odGhpcyxcIldlYWtNYXBcIiksdCxlKX19LHU9dC5leHBvcnRzPUtuKFwiV2Vha01hcFwiLHMsbCxmaSwhMCwhMCk7WXQoZnVuY3Rpb24oKXtyZXR1cm4gNyE9KG5ldyB1KS5zZXQoKE9iamVjdC5mcmVlemV8fE9iamVjdCkoYSksNykuZ2V0KGEpfSkmJihlPWZpLmdldENvbnN0cnVjdG9yKHMsXCJXZWFrTWFwXCIpLHJpKGUucHJvdG90eXBlLGwpLFJuLk5FRUQ9ITAsbihbXCJkZWxldGVcIixcImhhc1wiLFwiZ2V0XCIsXCJzZXRcIl0sZnVuY3Rpb24odCl7dmFyIG49dS5wcm90b3R5cGUsaT1uW3RdO3VlKG4sdCxmdW5jdGlvbihuLHIpe2lmKFV0KG4pJiYhbyhuKSl7dGhpcy5fZnx8KHRoaXMuX2Y9bmV3IGUpO3ZhciBhPXRoaXMuX2ZbdF0obixyKTtyZXR1cm5cInNldFwiPT10P3RoaXM6YX1yZXR1cm4gaS5jYWxsKHRoaXMsbixyKX0pfSkpfSk7Sm4oXCJXZWFrTWFwXCIpLFpuKFwiV2Vha01hcFwiKTtXdC5XZWFrTWFwO3ZhciBwaT1mdW5jdGlvbih0LGUsbil7ZSBpbiB0P2VlLmYodCxlLG5lKDAsbikpOnRbZV09bn07ZmUoZmUuUytmZS5GKiFHbihmdW5jdGlvbih0KXt9KSxcIkFycmF5XCIse2Zyb206ZnVuY3Rpb24odCl7dmFyIGUsbixpLG8scj1vbih0KSxhPVwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXM/dGhpczpBcnJheSxzPWFyZ3VtZW50cy5sZW5ndGgsbD1zPjE/YXJndW1lbnRzWzFdOnZvaWQgMCx1PXZvaWQgMCE9PWwsYz0wLGg9Qm4ocik7aWYodSYmKGw9aGUobCxzPjI/YXJndW1lbnRzWzJdOnZvaWQgMCwyKSksdm9pZCAwPT1ofHxhPT1BcnJheSYmSW4oaCkpZm9yKG49bmV3IGEoZT1CZShyLmxlbmd0aCkpO2U+YztjKyspcGkobixjLHU/bChyW2NdLGMpOnJbY10pO2Vsc2UgZm9yKG89aC5jYWxsKHIpLG49bmV3IGE7IShpPW8ubmV4dCgpKS5kb25lO2MrKylwaShuLGMsdT9MbihvLGwsW2kudmFsdWUsY10sITApOmkudmFsdWUpO3JldHVybiBuLmxlbmd0aD1jLG59fSk7V3QuQXJyYXkuZnJvbTt2YXIgZ2k9bmV3IFNldChbXCJhbm5vdGF0aW9uLXhtbFwiLFwiY29sb3ItcHJvZmlsZVwiLFwiZm9udC1mYWNlXCIsXCJmb250LWZhY2Utc3JjXCIsXCJmb250LWZhY2UtdXJpXCIsXCJmb250LWZhY2UtZm9ybWF0XCIsXCJmb250LWZhY2UtbmFtZVwiLFwibWlzc2luZy1nbHlwaFwiXSksbWk9e2N1c3RvbToxLGZhaWxlZDoyfSxfaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKHRoaXMsdCksdGhpcy5fbG9jYWxOYW1lVG9EZWZpbml0aW9uPW5ldyBNYXAsdGhpcy5fY29uc3RydWN0b3JUb0RlZmluaXRpb249bmV3IE1hcCx0aGlzLl9wYXRjaGVzPVtdLHRoaXMuX2hhc1BhdGNoZXM9ITF9cmV0dXJuIGcodCxbe2tleTpcInNldERlZmluaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2xvY2FsTmFtZVRvRGVmaW5pdGlvbi5zZXQodCxlKSx0aGlzLl9jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbi5zZXQoZS5jb25zdHJ1Y3RvcixlKX19LHtrZXk6XCJsb2NhbE5hbWVUb0RlZmluaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbG9jYWxOYW1lVG9EZWZpbml0aW9uLmdldCh0KX19LHtrZXk6XCJjb25zdHJ1Y3RvclRvRGVmaW5pdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbi5nZXQodCl9fSx7a2V5OlwiYWRkUGF0Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9oYXNQYXRjaGVzPSEwLHRoaXMuX3BhdGNoZXMucHVzaCh0KX19LHtrZXk6XCJwYXRjaFRyZWVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2hhc1BhdGNoZXMmJmwodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5wYXRjaCh0KX0pfX0se2tleTpcInBhdGNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5faGFzUGF0Y2hlcyYmIXQuX19DRV9wYXRjaGVkKXt0Ll9fQ0VfcGF0Y2hlZD0hMDtmb3IodmFyIGU9MDtlPHRoaXMuX3BhdGNoZXMubGVuZ3RoO2UrKyl0aGlzLl9wYXRjaGVzW2VdKHQpfX19LHtrZXk6XCJjb25uZWN0VHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO2wodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpfSk7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5fX0NFX3N0YXRlPT09bWkuY3VzdG9tP2EoaSkmJnRoaXMuY29ubmVjdGVkQ2FsbGJhY2soaSk6dGhpcy51cGdyYWRlRWxlbWVudChpKX19fSx7a2V5OlwiZGlzY29ubmVjdFRyZWVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1bXTtsKHQsZnVuY3Rpb24odCl7cmV0dXJuIGUucHVzaCh0KX0pO2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2kuX19DRV9zdGF0ZT09PW1pLmN1c3RvbSYmdGhpcy5kaXNjb25uZWN0ZWRDYWxsYmFjayhpKX19fSx7a2V5OlwicGF0Y2hBbmRVcGdyYWRlVHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06bmV3IFNldCxpPVtdO2lmKGwodCxmdW5jdGlvbih0KXtpZihcImxpbmtcIj09PXQubG9jYWxOYW1lJiZcImltcG9ydFwiPT09dC5nZXRBdHRyaWJ1dGUoXCJyZWxcIikpe3ZhciBvPXQuaW1wb3J0O28gaW5zdGFuY2VvZiBOb2RlJiZcImNvbXBsZXRlXCI9PT1vLnJlYWR5U3RhdGU/KG8uX19DRV9pc0ltcG9ydERvY3VtZW50PSEwLG8uX19DRV9oYXNSZWdpc3RyeT0hMCk6dC5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7dmFyIGk9dC5pbXBvcnQ7aS5fX0NFX2RvY3VtZW50TG9hZEhhbmRsZWR8fChpLl9fQ0VfZG9jdW1lbnRMb2FkSGFuZGxlZD0hMCxpLl9fQ0VfaXNJbXBvcnREb2N1bWVudD0hMCxpLl9fQ0VfaGFzUmVnaXN0cnk9ITAsbi5kZWxldGUoaSksZS5wYXRjaEFuZFVwZ3JhZGVUcmVlKGksbikpfSl9ZWxzZSBpLnB1c2godCl9LG4pLHRoaXMuX2hhc1BhdGNoZXMpZm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspdGhpcy5wYXRjaChpW29dKTtmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl0aGlzLnVwZ3JhZGVFbGVtZW50KGlbcl0pfX0se2tleTpcInVwZ3JhZGVFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dC5fX0NFX3N0YXRlKXt2YXIgZT10aGlzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0LmxvY2FsTmFtZSk7aWYoZSl7ZS5jb25zdHJ1Y3Rpb25TdGFjay5wdXNoKHQpO3ZhciBuPWUuY29uc3RydWN0b3I7dHJ5e3RyeXtpZihuZXcgbiE9PXQpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGN1c3RvbSBlbGVtZW50IGNvbnN0cnVjdG9yIGRpZCBub3QgcHJvZHVjZSB0aGUgZWxlbWVudCBiZWluZyB1cGdyYWRlZC5cIil9ZmluYWxseXtlLmNvbnN0cnVjdGlvblN0YWNrLnBvcCgpfX1jYXRjaChlKXt0aHJvdyB0Ll9fQ0Vfc3RhdGU9bWkuZmFpbGVkLGV9aWYodC5fX0NFX3N0YXRlPW1pLmN1c3RvbSx0Ll9fQ0VfZGVmaW5pdGlvbj1lLGUuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKWZvcih2YXIgaT1lLm9ic2VydmVkQXR0cmlidXRlcyxvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciByPWlbb10scz10LmdldEF0dHJpYnV0ZShyKTtudWxsIT09cyYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodCxyLG51bGwscyxudWxsKX1hKHQpJiZ0aGlzLmNvbm5lY3RlZENhbGxiYWNrKHQpfX19fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9fQ0VfZGVmaW5pdGlvbjtlLmNvbm5lY3RlZENhbGxiYWNrJiZlLmNvbm5lY3RlZENhbGxiYWNrLmNhbGwodCksdC5fX0NFX2lzQ29ubmVjdGVkQ2FsbGJhY2tDYWxsZWQ9ITB9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt0Ll9fQ0VfaXNDb25uZWN0ZWRDYWxsYmFja0NhbGxlZHx8dGhpcy5jb25uZWN0ZWRDYWxsYmFjayh0KTt2YXIgZT10Ll9fQ0VfZGVmaW5pdGlvbjtlLmRpc2Nvbm5lY3RlZENhbGxiYWNrJiZlLmRpc2Nvbm5lY3RlZENhbGxiYWNrLmNhbGwodCksdC5fX0NFX2lzQ29ubmVjdGVkQ2FsbGJhY2tDYWxsZWQ9dm9pZCAwfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGksbyl7dmFyIHI9dC5fX0NFX2RlZmluaXRpb247ci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJnIub2JzZXJ2ZWRBdHRyaWJ1dGVzLmluZGV4T2YoZSk+LTEmJnIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLmNhbGwodCxlLG4saSxvKX19XSksdH0oKSx2aT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksdGhpcy5faW50ZXJuYWxzPWUsdGhpcy5fZG9jdW1lbnQ9bix0aGlzLl9vYnNlcnZlcj12b2lkIDAsdGhpcy5faW50ZXJuYWxzLnBhdGNoQW5kVXBncmFkZVRyZWUodGhpcy5fZG9jdW1lbnQpLFwibG9hZGluZ1wiPT09dGhpcy5fZG9jdW1lbnQucmVhZHlTdGF0ZSYmKHRoaXMuX29ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMuX2hhbmRsZU11dGF0aW9ucy5iaW5kKHRoaXMpKSx0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMuX2RvY3VtZW50LHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pKX1yZXR1cm4gZyh0LFt7a2V5OlwiZGlzY29ubmVjdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb2JzZXJ2ZXImJnRoaXMuX29ic2VydmVyLmRpc2Nvbm5lY3QoKX19LHtrZXk6XCJfaGFuZGxlTXV0YXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZG9jdW1lbnQucmVhZHlTdGF0ZTtcImludGVyYWN0aXZlXCIhPT1lJiZcImNvbXBsZXRlXCIhPT1lfHx0aGlzLmRpc2Nvbm5lY3QoKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylmb3IodmFyIGk9dFtuXS5hZGRlZE5vZGVzLG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIHI9aVtvXTt0aGlzLl9pbnRlcm5hbHMucGF0Y2hBbmRVcGdyYWRlVHJlZShyKX19fV0pLHR9KCksYmk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9dGhpcztwKHRoaXMsdCksdGhpcy5fdmFsdWU9dm9pZCAwLHRoaXMuX3Jlc29sdmU9dm9pZCAwLHRoaXMuX3Byb21pc2U9bmV3IFByb21pc2UoZnVuY3Rpb24odCl7ZS5fcmVzb2x2ZT10LGUuX3ZhbHVlJiZ0KGUuX3ZhbHVlKX0pfXJldHVybiBnKHQsW3trZXk6XCJyZXNvbHZlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5fdmFsdWUpdGhyb3cgbmV3IEVycm9yKFwiQWxyZWFkeSByZXNvbHZlZC5cIik7dGhpcy5fdmFsdWU9dCx0aGlzLl9yZXNvbHZlJiZ0aGlzLl9yZXNvbHZlKHQpfX0se2tleTpcInRvUHJvbWlzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Byb21pc2V9fV0pLHR9KCkseWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3AodGhpcyx0KSx0aGlzLl9lbGVtZW50RGVmaW5pdGlvbklzUnVubmluZz0hMSx0aGlzLl9pbnRlcm5hbHM9ZSx0aGlzLl93aGVuRGVmaW5lZERlZmVycmVkPW5ldyBNYXAsdGhpcy5fZmx1c2hDYWxsYmFjaz1mdW5jdGlvbih0KXtyZXR1cm4gdCgpfSx0aGlzLl9mbHVzaFBlbmRpbmc9ITEsdGhpcy5fdW5mbHVzaGVkTG9jYWxOYW1lcz1bXSx0aGlzLl9kb2N1bWVudENvbnN0cnVjdGlvbk9ic2VydmVyPW5ldyB2aShlLGRvY3VtZW50KX1yZXR1cm4gZyh0LFt7a2V5OlwiZGVmaW5lXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO2lmKCEoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3JzIG11c3QgYmUgZnVuY3Rpb25zLlwiKTtpZighcih0KSl0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJUaGUgZWxlbWVudCBuYW1lICdcIit0K1wiJyBpcyBub3QgdmFsaWQuXCIpO2lmKHRoaXMuX2ludGVybmFscy5sb2NhbE5hbWVUb0RlZmluaXRpb24odCkpdGhyb3cgbmV3IEVycm9yKFwiQSBjdXN0b20gZWxlbWVudCB3aXRoIG5hbWUgJ1wiK3QrXCInIGhhcyBhbHJlYWR5IGJlZW4gZGVmaW5lZC5cIik7aWYodGhpcy5fZWxlbWVudERlZmluaXRpb25Jc1J1bm5pbmcpdGhyb3cgbmV3IEVycm9yKFwiQSBjdXN0b20gZWxlbWVudCBpcyBhbHJlYWR5IGJlaW5nIGRlZmluZWQuXCIpO3RoaXMuX2VsZW1lbnREZWZpbml0aW9uSXNSdW5uaW5nPSEwO3ZhciBpPXZvaWQgMCxvPXZvaWQgMCxhPXZvaWQgMCxzPXZvaWQgMCxsPXZvaWQgMDt0cnl7dmFyIHU9ZnVuY3Rpb24odCl7dmFyIGU9Y1t0XTtpZih2b2lkIDAhPT1lJiYhKGUgaW5zdGFuY2VvZiBGdW5jdGlvbikpdGhyb3cgbmV3IEVycm9yKFwiVGhlICdcIit0K1wiJyBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3JldHVybiBlfSxjPWUucHJvdG90eXBlO2lmKCEoYyBpbnN0YW5jZW9mIE9iamVjdCkpdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBjdXN0b20gZWxlbWVudCBjb25zdHJ1Y3RvcidzIHByb3RvdHlwZSBpcyBub3QgYW4gb2JqZWN0LlwiKTtpPXUoXCJjb25uZWN0ZWRDYWxsYmFja1wiKSxvPXUoXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiKSxhPXUoXCJhZG9wdGVkQ2FsbGJhY2tcIikscz11KFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIpLGw9ZS5vYnNlcnZlZEF0dHJpYnV0ZXN8fFtdfWNhdGNoKHQpe3JldHVybn1maW5hbGx5e3RoaXMuX2VsZW1lbnREZWZpbml0aW9uSXNSdW5uaW5nPSExfXZhciBoPXtsb2NhbE5hbWU6dCxjb25zdHJ1Y3RvcjplLGNvbm5lY3RlZENhbGxiYWNrOmksZGlzY29ubmVjdGVkQ2FsbGJhY2s6byxhZG9wdGVkQ2FsbGJhY2s6YSxhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2s6cyxvYnNlcnZlZEF0dHJpYnV0ZXM6bCxjb25zdHJ1Y3Rpb25TdGFjazpbXX07dGhpcy5faW50ZXJuYWxzLnNldERlZmluaXRpb24odCxoKSx0aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzLnB1c2godCksdGhpcy5fZmx1c2hQZW5kaW5nfHwodGhpcy5fZmx1c2hQZW5kaW5nPSEwLHRoaXMuX2ZsdXNoQ2FsbGJhY2soZnVuY3Rpb24oKXtyZXR1cm4gbi5fZmx1c2goKX0pKX19LHtrZXk6XCJfZmx1c2hcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCExIT09dGhpcy5fZmx1c2hQZW5kaW5nKWZvcih0aGlzLl9mbHVzaFBlbmRpbmc9ITEsdGhpcy5faW50ZXJuYWxzLnBhdGNoQW5kVXBncmFkZVRyZWUoZG9jdW1lbnQpO3RoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMubGVuZ3RoPjA7KXt2YXIgdD10aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzLnNoaWZ0KCksZT10aGlzLl93aGVuRGVmaW5lZERlZmVycmVkLmdldCh0KTtlJiZlLnJlc29sdmUodm9pZCAwKX19fSx7a2V5OlwiZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5faW50ZXJuYWxzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0KTtpZihlKXJldHVybiBlLmNvbnN0cnVjdG9yfX0se2tleTpcIndoZW5EZWZpbmVkXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoIXIodCkpcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBTeW50YXhFcnJvcihcIidcIit0K1wiJyBpcyBub3QgYSB2YWxpZCBjdXN0b20gZWxlbWVudCBuYW1lLlwiKSk7dmFyIGU9dGhpcy5fd2hlbkRlZmluZWREZWZlcnJlZC5nZXQodCk7aWYoZSlyZXR1cm4gZS50b1Byb21pc2UoKTt2YXIgbj1uZXcgYmk7dGhpcy5fd2hlbkRlZmluZWREZWZlcnJlZC5zZXQodCxuKTtyZXR1cm4gdGhpcy5faW50ZXJuYWxzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0KSYmLTE9PT10aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzLmluZGV4T2YodCkmJm4ucmVzb2x2ZSh2b2lkIDApLG4udG9Qcm9taXNlKCl9fSx7a2V5OlwicG9seWZpbGxXcmFwRmx1c2hDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2RvY3VtZW50Q29uc3RydWN0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO3ZhciBlPXRoaXMuX2ZsdXNoQ2FsbGJhY2s7dGhpcy5fZmx1c2hDYWxsYmFjaz1mdW5jdGlvbihuKXtyZXR1cm4gdChmdW5jdGlvbigpe3JldHVybiBlKG4pfSl9fX1dKSx0fSgpO3dpbmRvdy5DdXN0b21FbGVtZW50UmVnaXN0cnk9eWkseWkucHJvdG90eXBlLmRlZmluZT15aS5wcm90b3R5cGUuZGVmaW5lLHlpLnByb3RvdHlwZS5nZXQ9eWkucHJvdG90eXBlLmdldCx5aS5wcm90b3R5cGUud2hlbkRlZmluZWQ9eWkucHJvdG90eXBlLndoZW5EZWZpbmVkLHlpLnByb3RvdHlwZS5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrPXlpLnByb3RvdHlwZS5wb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrO3ZhciBraT17RG9jdW1lbnRfY3JlYXRlRWxlbWVudDp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQsRG9jdW1lbnRfY3JlYXRlRWxlbWVudE5TOndpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudE5TLERvY3VtZW50X2ltcG9ydE5vZGU6d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5pbXBvcnROb2RlLERvY3VtZW50X3ByZXBlbmQ6d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5wcmVwZW5kLERvY3VtZW50X2FwcGVuZDp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLmFwcGVuZCxOb2RlX2Nsb25lTm9kZTp3aW5kb3cuTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlLE5vZGVfYXBwZW5kQ2hpbGQ6d2luZG93Lk5vZGUucHJvdG90eXBlLmFwcGVuZENoaWxkLE5vZGVfaW5zZXJ0QmVmb3JlOndpbmRvdy5Ob2RlLnByb3RvdHlwZS5pbnNlcnRCZWZvcmUsTm9kZV9yZW1vdmVDaGlsZDp3aW5kb3cuTm9kZS5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsTm9kZV9yZXBsYWNlQ2hpbGQ6d2luZG93Lk5vZGUucHJvdG90eXBlLnJlcGxhY2VDaGlsZCxOb2RlX3RleHRDb250ZW50Ok9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93Lk5vZGUucHJvdG90eXBlLFwidGV4dENvbnRlbnRcIiksRWxlbWVudF9hdHRhY2hTaGFkb3c6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmF0dGFjaFNoYWRvdyxFbGVtZW50X2lubmVySFRNTDpPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZSxcImlubmVySFRNTFwiKSxFbGVtZW50X2dldEF0dHJpYnV0ZTp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlLEVsZW1lbnRfc2V0QXR0cmlidXRlOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUsRWxlbWVudF9yZW1vdmVBdHRyaWJ1dGU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZSxFbGVtZW50X2dldEF0dHJpYnV0ZU5TOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGVOUyxFbGVtZW50X3NldEF0dHJpYnV0ZU5TOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGVOUyxFbGVtZW50X3JlbW92ZUF0dHJpYnV0ZU5TOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGVOUyxFbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuaW5zZXJ0QWRqYWNlbnRFbGVtZW50LEVsZW1lbnRfcHJlcGVuZDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucHJlcGVuZCxFbGVtZW50X2FwcGVuZDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYXBwZW5kLEVsZW1lbnRfYmVmb3JlOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5iZWZvcmUsRWxlbWVudF9hZnRlcjp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYWZ0ZXIsRWxlbWVudF9yZXBsYWNlV2l0aDp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucmVwbGFjZVdpdGgsRWxlbWVudF9yZW1vdmU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSxIVE1MRWxlbWVudDp3aW5kb3cuSFRNTEVsZW1lbnQsSFRNTEVsZW1lbnRfaW5uZXJIVE1MOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZSxcImlubmVySFRNTFwiKSxIVE1MRWxlbWVudF9pbnNlcnRBZGphY2VudEVsZW1lbnQ6d2luZG93LkhUTUxFbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnR9LHdpPW5ldyBmdW5jdGlvbiB0KCl7cCh0aGlzLHQpfSxFaT1mdW5jdGlvbih0LGUsbil7ZS5wcmVwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KTtuLnByZXBlbmQuYXBwbHkodGhpcyxpKTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl0LmRpc2Nvbm5lY3RUcmVlKHJbc10pO2lmKGEodGhpcykpZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspe3ZhciB1PWlbbF07dSBpbnN0YW5jZW9mIEVsZW1lbnQmJnQuY29ubmVjdFRyZWUodSl9fSxlLmFwcGVuZD1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkoZSksbz0wO288ZTtvKyspaVtvXT1hcmd1bWVudHNbb107dmFyIHI9aS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBOb2RlJiZhKHQpfSk7bi5hcHBlbmQuYXBwbHkodGhpcyxpKTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl0LmRpc2Nvbm5lY3RUcmVlKHJbc10pO2lmKGEodGhpcykpZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspe3ZhciB1PWlbbF07dSBpbnN0YW5jZW9mIEVsZW1lbnQmJnQuY29ubmVjdFRyZWUodSl9fX0sQ2k9d2luZG93LmN1c3RvbUVsZW1lbnRzO2lmKCFDaXx8Q2kuZm9yY2VQb2x5ZmlsbHx8XCJmdW5jdGlvblwiIT10eXBlb2YgQ2kuZGVmaW5lfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBDaS5nZXQpe3ZhciBBaT1uZXcgX2k7IWZ1bmN0aW9uKHQpe3dpbmRvdy5IVE1MRWxlbWVudD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt2YXIgZT10aGlzLmNvbnN0cnVjdG9yLG49dC5jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbihlKTtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY3VzdG9tIGVsZW1lbnQgYmVpbmcgY29uc3RydWN0ZWQgd2FzIG5vdCByZWdpc3RlcmVkIHdpdGggYGN1c3RvbUVsZW1lbnRzYC5cIik7dmFyIGk9bi5jb25zdHJ1Y3Rpb25TdGFjaztpZigwPT09aS5sZW5ndGgpe3ZhciBvPWtpLkRvY3VtZW50X2NyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCxuLmxvY2FsTmFtZSk7cmV0dXJuIE9iamVjdC5zZXRQcm90b3R5cGVPZihvLGUucHJvdG90eXBlKSxvLl9fQ0Vfc3RhdGU9bWkuY3VzdG9tLG8uX19DRV9kZWZpbml0aW9uPW4sdC5wYXRjaChvKSxvfXZhciByPWkubGVuZ3RoLTEsYT1pW3JdO2lmKGE9PT13aSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgSFRNTEVsZW1lbnQgY29uc3RydWN0b3Igd2FzIGVpdGhlciBjYWxsZWQgcmVlbnRyYW50bHkgZm9yIHRoaXMgY29uc3RydWN0b3Igb3IgY2FsbGVkIG11bHRpcGxlIHRpbWVzLlwiKTtyZXR1cm4gaVtyXT13aSxPYmplY3Quc2V0UHJvdG90eXBlT2YoYSxlLnByb3RvdHlwZSksdC5wYXRjaChhKSxhfXJldHVybiBlLnByb3RvdHlwZT1raS5IVE1MRWxlbWVudC5wcm90b3R5cGUsZX0oKX0oQWkpLGZ1bmN0aW9uKHQpe3UoRG9jdW1lbnQucHJvdG90eXBlLFwiY3JlYXRlRWxlbWVudFwiLGZ1bmN0aW9uKGUpe2lmKHRoaXMuX19DRV9oYXNSZWdpc3RyeSl7dmFyIG49dC5sb2NhbE5hbWVUb0RlZmluaXRpb24oZSk7aWYobilyZXR1cm4gbmV3IG4uY29uc3RydWN0b3J9dmFyIGk9a2kuRG9jdW1lbnRfY3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsZSk7cmV0dXJuIHQucGF0Y2goaSksaX0pLHUoRG9jdW1lbnQucHJvdG90eXBlLFwiaW1wb3J0Tm9kZVwiLGZ1bmN0aW9uKGUsbil7dmFyIGk9a2kuRG9jdW1lbnRfaW1wb3J0Tm9kZS5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gdGhpcy5fX0NFX2hhc1JlZ2lzdHJ5P3QucGF0Y2hBbmRVcGdyYWRlVHJlZShpKTp0LnBhdGNoVHJlZShpKSxpfSk7dShEb2N1bWVudC5wcm90b3R5cGUsXCJjcmVhdGVFbGVtZW50TlNcIixmdW5jdGlvbihlLG4pe2lmKHRoaXMuX19DRV9oYXNSZWdpc3RyeSYmKG51bGw9PT1lfHxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIj09PWUpKXt2YXIgaT10LmxvY2FsTmFtZVRvRGVmaW5pdGlvbihuKTtpZihpKXJldHVybiBuZXcgaS5jb25zdHJ1Y3Rvcn12YXIgbz1raS5Eb2N1bWVudF9jcmVhdGVFbGVtZW50TlMuY2FsbCh0aGlzLGUsbik7cmV0dXJuIHQucGF0Y2gobyksb30pLEVpKHQsRG9jdW1lbnQucHJvdG90eXBlLHtwcmVwZW5kOmtpLkRvY3VtZW50X3ByZXBlbmQsYXBwZW5kOmtpLkRvY3VtZW50X2FwcGVuZH0pfShBaSksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwidGV4dENvbnRlbnRcIix7ZW51bWVyYWJsZTpuLmVudW1lcmFibGUsY29uZmlndXJhYmxlOiEwLGdldDpuLmdldCxzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5ub2RlVHlwZSE9PU5vZGUuVEVYVF9OT0RFKXt2YXIgaT12b2lkIDA7aWYodGhpcy5maXJzdENoaWxkKXt2YXIgbz10aGlzLmNoaWxkTm9kZXMscj1vLmxlbmd0aDtpZihyPjAmJmEodGhpcykpe2k9bmV3IEFycmF5KHIpO2Zvcih2YXIgcz0wO3M8cjtzKyspaVtzXT1vW3NdfX1pZihuLnNldC5jYWxsKHRoaXMsZSksaSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl0LmRpc2Nvbm5lY3RUcmVlKGlbbF0pfWVsc2Ugbi5zZXQuY2FsbCh0aGlzLGUpfX0pfXUoTm9kZS5wcm90b3R5cGUsXCJpbnNlcnRCZWZvcmVcIixmdW5jdGlvbihlLG4pe2lmKGUgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoZS5jaGlsZE5vZGVzKSxvPWtpLk5vZGVfaW5zZXJ0QmVmb3JlLmNhbGwodGhpcyxlLG4pO2lmKGEodGhpcykpZm9yKHZhciByPTA7cjxpLmxlbmd0aDtyKyspdC5jb25uZWN0VHJlZShpW3JdKTtyZXR1cm4gb312YXIgcz1hKGUpLGw9a2kuTm9kZV9pbnNlcnRCZWZvcmUuY2FsbCh0aGlzLGUsbik7cmV0dXJuIHMmJnQuZGlzY29ubmVjdFRyZWUoZSksYSh0aGlzKSYmdC5jb25uZWN0VHJlZShlKSxsfSksdShOb2RlLnByb3RvdHlwZSxcImFwcGVuZENoaWxkXCIsZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBuPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShlLmNoaWxkTm9kZXMpLGk9a2kuTm9kZV9hcHBlbmRDaGlsZC5jYWxsKHRoaXMsZSk7aWYoYSh0aGlzKSlmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyl0LmNvbm5lY3RUcmVlKG5bb10pO3JldHVybiBpfXZhciByPWEoZSkscz1raS5Ob2RlX2FwcGVuZENoaWxkLmNhbGwodGhpcyxlKTtyZXR1cm4gciYmdC5kaXNjb25uZWN0VHJlZShlKSxhKHRoaXMpJiZ0LmNvbm5lY3RUcmVlKGUpLHN9KSx1KE5vZGUucHJvdG90eXBlLFwiY2xvbmVOb2RlXCIsZnVuY3Rpb24oZSl7dmFyIG49a2kuTm9kZV9jbG9uZU5vZGUuY2FsbCh0aGlzLGUpO3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT90LnBhdGNoQW5kVXBncmFkZVRyZWUobik6dC5wYXRjaFRyZWUobiksbn0pLHUoTm9kZS5wcm90b3R5cGUsXCJyZW1vdmVDaGlsZFwiLGZ1bmN0aW9uKGUpe3ZhciBuPWEoZSksaT1raS5Ob2RlX3JlbW92ZUNoaWxkLmNhbGwodGhpcyxlKTtyZXR1cm4gbiYmdC5kaXNjb25uZWN0VHJlZShlKSxpfSksdShOb2RlLnByb3RvdHlwZSxcInJlcGxhY2VDaGlsZFwiLGZ1bmN0aW9uKGUsbil7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShlLmNoaWxkTm9kZXMpLG89a2kuTm9kZV9yZXBsYWNlQ2hpbGQuY2FsbCh0aGlzLGUsbik7aWYoYSh0aGlzKSl7dC5kaXNjb25uZWN0VHJlZShuKTtmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl0LmNvbm5lY3RUcmVlKGlbcl0pfXJldHVybiBvfXZhciBzPWEoZSksbD1raS5Ob2RlX3JlcGxhY2VDaGlsZC5jYWxsKHRoaXMsZSxuKSx1PWEodGhpcyk7cmV0dXJuIHUmJnQuZGlzY29ubmVjdFRyZWUobikscyYmdC5kaXNjb25uZWN0VHJlZShlKSx1JiZ0LmNvbm5lY3RUcmVlKGUpLGx9KSxraS5Ob2RlX3RleHRDb250ZW50JiZraS5Ob2RlX3RleHRDb250ZW50LmdldD9lKE5vZGUucHJvdG90eXBlLGtpLk5vZGVfdGV4dENvbnRlbnQpOnQuYWRkUGF0Y2goZnVuY3Rpb24odCl7ZSh0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8dGhpcy5jaGlsZE5vZGVzLmxlbmd0aDtlKyspdC5wdXNoKHRoaXMuY2hpbGROb2Rlc1tlXS50ZXh0Q29udGVudCk7cmV0dXJuIHQuam9pbihcIlwiKX0sc2V0OmZ1bmN0aW9uKHQpe2Zvcig7dGhpcy5maXJzdENoaWxkOylraS5Ob2RlX3JlbW92ZUNoaWxkLmNhbGwodGhpcyx0aGlzLmZpcnN0Q2hpbGQpO2tpLk5vZGVfYXBwZW5kQ2hpbGQuY2FsbCh0aGlzLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHQpKX19KX0pfShBaSksZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLG4pe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiaW5uZXJIVE1MXCIse2VudW1lcmFibGU6bi5lbnVtZXJhYmxlLGNvbmZpZ3VyYWJsZTohMCxnZXQ6bi5nZXQsc2V0OmZ1bmN0aW9uKGUpe3ZhciBpPXRoaXMsbz12b2lkIDA7aWYoYSh0aGlzKSYmKG89W10sbCh0aGlzLGZ1bmN0aW9uKHQpe3QhPT1pJiZvLnB1c2godCl9KSksbi5zZXQuY2FsbCh0aGlzLGUpLG8pZm9yKHZhciByPTA7cjxvLmxlbmd0aDtyKyspe3ZhciBzPW9bcl07cy5fX0NFX3N0YXRlPT09bWkuY3VzdG9tJiZ0LmRpc2Nvbm5lY3RlZENhbGxiYWNrKHMpfXJldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT90LnBhdGNoQW5kVXBncmFkZVRyZWUodGhpcyk6dC5wYXRjaFRyZWUodGhpcyksZX19KX1mdW5jdGlvbiBuKGUsbil7dShlLFwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50XCIsZnVuY3Rpb24oZSxpKXt2YXIgbz1hKGkpLHI9bi5jYWxsKHRoaXMsZSxpKTtyZXR1cm4gbyYmdC5kaXNjb25uZWN0VHJlZShpKSxhKHIpJiZ0LmNvbm5lY3RUcmVlKGkpLHJ9KX1pZihraS5FbGVtZW50X2F0dGFjaFNoYWRvdz91KEVsZW1lbnQucHJvdG90eXBlLFwiYXR0YWNoU2hhZG93XCIsZnVuY3Rpb24odCl7dmFyIGU9a2kuRWxlbWVudF9hdHRhY2hTaGFkb3cuY2FsbCh0aGlzLHQpO3JldHVybiB0aGlzLl9fQ0Vfc2hhZG93Um9vdD1lLGV9KTpjb25zb2xlLndhcm4oXCJDdXN0b20gRWxlbWVudHM6IGBFbGVtZW50I2F0dGFjaFNoYWRvd2Agd2FzIG5vdCBwYXRjaGVkLlwiKSxraS5FbGVtZW50X2lubmVySFRNTCYma2kuRWxlbWVudF9pbm5lckhUTUwuZ2V0KWUoRWxlbWVudC5wcm90b3R5cGUsa2kuRWxlbWVudF9pbm5lckhUTUwpO2Vsc2UgaWYoa2kuSFRNTEVsZW1lbnRfaW5uZXJIVE1MJiZraS5IVE1MRWxlbWVudF9pbm5lckhUTUwuZ2V0KWUoSFRNTEVsZW1lbnQucHJvdG90eXBlLGtpLkhUTUxFbGVtZW50X2lubmVySFRNTCk7ZWxzZXt2YXIgaT1raS5Eb2N1bWVudF9jcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsXCJkaXZcIik7dC5hZGRQYXRjaChmdW5jdGlvbih0KXtlKHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiBraS5Ob2RlX2Nsb25lTm9kZS5jYWxsKHRoaXMsITApLmlubmVySFRNTH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPVwidGVtcGxhdGVcIj09PXRoaXMubG9jYWxOYW1lP3RoaXMuY29udGVudDp0aGlzO2ZvcihpLmlubmVySFRNTD10O2UuY2hpbGROb2Rlcy5sZW5ndGg+MDspa2kuTm9kZV9yZW1vdmVDaGlsZC5jYWxsKGUsZS5jaGlsZE5vZGVzWzBdKTtmb3IoO2kuY2hpbGROb2Rlcy5sZW5ndGg+MDspa2kuTm9kZV9hcHBlbmRDaGlsZC5jYWxsKGUsaS5jaGlsZE5vZGVzWzBdKX19KX0pfXUoRWxlbWVudC5wcm90b3R5cGUsXCJzZXRBdHRyaWJ1dGVcIixmdW5jdGlvbihlLG4pe2lmKHRoaXMuX19DRV9zdGF0ZSE9PW1pLmN1c3RvbSlyZXR1cm4ga2kuRWxlbWVudF9zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUsbik7dmFyIGk9a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpO2tpLkVsZW1lbnRfc2V0QXR0cmlidXRlLmNhbGwodGhpcyxlLG4pLG49a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpLHQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsZSxpLG4sbnVsbCl9KSx1KEVsZW1lbnQucHJvdG90eXBlLFwic2V0QXR0cmlidXRlTlNcIixmdW5jdGlvbihlLG4saSl7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3NldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4saSk7dmFyIG89a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGVOUy5jYWxsKHRoaXMsZSxuKTtraS5FbGVtZW50X3NldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4saSksaT1raS5FbGVtZW50X2dldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pLHQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsbixvLGksZSl9KSx1KEVsZW1lbnQucHJvdG90eXBlLFwicmVtb3ZlQXR0cmlidXRlXCIsZnVuY3Rpb24oZSl7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3JlbW92ZUF0dHJpYnV0ZS5jYWxsKHRoaXMsZSk7dmFyIG49a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpO2tpLkVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcyxlKSxudWxsIT09biYmdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxlLG4sbnVsbCxudWxsKX0pLHUoRWxlbWVudC5wcm90b3R5cGUsXCJyZW1vdmVBdHRyaWJ1dGVOU1wiLGZ1bmN0aW9uKGUsbil7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3JlbW92ZUF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO3ZhciBpPWtpLkVsZW1lbnRfZ2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbik7a2kuRWxlbWVudF9yZW1vdmVBdHRyaWJ1dGVOUy5jYWxsKHRoaXMsZSxuKTt2YXIgbz1raS5FbGVtZW50X2dldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO2khPT1vJiZ0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0aGlzLG4saSxvLGUpfSksa2kuSFRNTEVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50P24oSFRNTEVsZW1lbnQucHJvdG90eXBlLGtpLkhUTUxFbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudCk6a2kuRWxlbWVudF9pbnNlcnRBZGphY2VudEVsZW1lbnQ/bihFbGVtZW50LnByb3RvdHlwZSxraS5FbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudCk6Y29uc29sZS53YXJuKFwiQ3VzdG9tIEVsZW1lbnRzOiBgRWxlbWVudCNpbnNlcnRBZGphY2VudEVsZW1lbnRgIHdhcyBub3QgcGF0Y2hlZC5cIiksRWkodCxFbGVtZW50LnByb3RvdHlwZSx7cHJlcGVuZDpraS5FbGVtZW50X3ByZXBlbmQsYXBwZW5kOmtpLkVsZW1lbnRfYXBwZW5kfSksZnVuY3Rpb24odCxlLG4pe2UuYmVmb3JlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KTtuLmJlZm9yZS5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19LGUuYWZ0ZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pO24uYWZ0ZXIuYXBwbHkodGhpcyxpKTtmb3IodmFyIHM9MDtzPHIubGVuZ3RoO3MrKyl0LmRpc2Nvbm5lY3RUcmVlKHJbc10pO2lmKGEodGhpcykpZm9yKHZhciBsPTA7bDxpLmxlbmd0aDtsKyspe3ZhciB1PWlbbF07dSBpbnN0YW5jZW9mIEVsZW1lbnQmJnQuY29ubmVjdFRyZWUodSl9fSxlLnJlcGxhY2VXaXRoPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KSxzPWEodGhpcyk7bi5yZXBsYWNlV2l0aC5hcHBseSh0aGlzLGkpO2Zvcih2YXIgbD0wO2w8ci5sZW5ndGg7bCsrKXQuZGlzY29ubmVjdFRyZWUocltsXSk7aWYocyl7dC5kaXNjb25uZWN0VHJlZSh0aGlzKTtmb3IodmFyIHU9MDt1PGkubGVuZ3RoO3UrKyl7dmFyIGM9aVt1XTtjIGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZShjKX19fSxlLnJlbW92ZT1mdW5jdGlvbigpe3ZhciBlPWEodGhpcyk7bi5yZW1vdmUuY2FsbCh0aGlzKSxlJiZ0LmRpc2Nvbm5lY3RUcmVlKHRoaXMpfX0odCxFbGVtZW50LnByb3RvdHlwZSx7YmVmb3JlOmtpLkVsZW1lbnRfYmVmb3JlLGFmdGVyOmtpLkVsZW1lbnRfYWZ0ZXIscmVwbGFjZVdpdGg6a2kuRWxlbWVudF9yZXBsYWNlV2l0aCxyZW1vdmU6a2kuRWxlbWVudF9yZW1vdmV9KX0oQWkpLGRvY3VtZW50Ll9fQ0VfaGFzUmVnaXN0cnk9ITA7dmFyIFNpPW5ldyB5aShBaSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdyxcImN1c3RvbUVsZW1lbnRzXCIse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLHZhbHVlOlNpfSl9IWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtkPSExO3ZhciB0PWY7Zj1bXSx0LnNvcnQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdC51aWRfLWUudWlkX30pO3ZhciBuPSExO3QuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LnRha2VSZWNvcmRzKCk7IWZ1bmN0aW9uKHQpe3Qubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49dS5nZXQoZSk7biYmbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uub2JzZXJ2ZXI9PT10JiZlLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX0odCksZS5sZW5ndGgmJih0LmNhbGxiYWNrXyhlLHQpLG49ITApfSksbiYmZSgpfWZ1bmN0aW9uIG4odCxlKXtmb3IodmFyIG49dDtuO249bi5wYXJlbnROb2RlKXt2YXIgaT11LmdldChuKTtpZihpKWZvcih2YXIgbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcj1pW29dLGE9ci5vcHRpb25zO2lmKG49PT10fHxhLnN1YnRyZWUpe3ZhciBzPWUoYSk7cyYmci5lbnF1ZXVlKHMpfX19fWZ1bmN0aW9uIGkodCl7dGhpcy5jYWxsYmFja189dCx0aGlzLm5vZGVzXz1bXSx0aGlzLnJlY29yZHNfPVtdLHRoaXMudWlkXz0rK3B9ZnVuY3Rpb24gbyh0LGUpe3RoaXMudHlwZT10LHRoaXMudGFyZ2V0PWUsdGhpcy5hZGRlZE5vZGVzPVtdLHRoaXMucmVtb3ZlZE5vZGVzPVtdLHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIHIodCxlKXtyZXR1cm4gZz1uZXcgbyh0LGUpfWZ1bmN0aW9uIGEodCl7cmV0dXJuIG18fChtPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBvKHQudHlwZSx0LnRhcmdldCk7cmV0dXJuIGUuYWRkZWROb2Rlcz10LmFkZGVkTm9kZXMuc2xpY2UoKSxlLnJlbW92ZWROb2Rlcz10LnJlbW92ZWROb2Rlcy5zbGljZSgpLGUucHJldmlvdXNTaWJsaW5nPXQucHJldmlvdXNTaWJsaW5nLGUubmV4dFNpYmxpbmc9dC5uZXh0U2libGluZyxlLmF0dHJpYnV0ZU5hbWU9dC5hdHRyaWJ1dGVOYW1lLGUuYXR0cmlidXRlTmFtZXNwYWNlPXQuYXR0cmlidXRlTmFtZXNwYWNlLGUub2xkVmFsdWU9dC5vbGRWYWx1ZSxlfShnKSxtLm9sZFZhbHVlPXQsbSl9ZnVuY3Rpb24gcyh0LGUsbil7dGhpcy5vYnNlcnZlcj10LHRoaXMudGFyZ2V0PWUsdGhpcy5vcHRpb25zPW4sdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfWlmKCF0LkpzTXV0YXRpb25PYnNlcnZlcil7dmFyIGwsdT1uZXcgV2Vha01hcDtpZigvVHJpZGVudHxFZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKWw9c2V0VGltZW91dDtlbHNlIGlmKHdpbmRvdy5zZXRJbW1lZGlhdGUpbD13aW5kb3cuc2V0SW1tZWRpYXRlO2Vsc2V7dmFyIGM9W10saD1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24odCl7aWYodC5kYXRhPT09aCl7dmFyIGU9YztjPVtdLGUuZm9yRWFjaChmdW5jdGlvbih0KXt0KCl9KX19KSxsPWZ1bmN0aW9uKHQpe2MucHVzaCh0KSx3aW5kb3cucG9zdE1lc3NhZ2UoaCxcIipcIil9fXZhciBkPSExLGY9W10scD0wO2kucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKHQsZSl7aWYodD1mdW5jdGlvbih0KXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZ3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKHQpfHx0fSh0KSwhZS5jaGlsZExpc3QmJiFlLmF0dHJpYnV0ZXMmJiFlLmNoYXJhY3RlckRhdGF8fGUuYXR0cmlidXRlT2xkVmFsdWUmJiFlLmF0dHJpYnV0ZXN8fGUuYXR0cmlidXRlRmlsdGVyJiZlLmF0dHJpYnV0ZUZpbHRlci5sZW5ndGgmJiFlLmF0dHJpYnV0ZXN8fGUuY2hhcmFjdGVyRGF0YU9sZFZhbHVlJiYhZS5jaGFyYWN0ZXJEYXRhKXRocm93IG5ldyBTeW50YXhFcnJvcjt2YXIgbj11LmdldCh0KTtufHx1LnNldCh0LG49W10pO2Zvcih2YXIgaSxvPTA7bzxuLmxlbmd0aDtvKyspaWYobltvXS5vYnNlcnZlcj09PXRoaXMpeyhpPW5bb10pLnJlbW92ZUxpc3RlbmVycygpLGkub3B0aW9ucz1lO2JyZWFrfWl8fChpPW5ldyBzKHRoaXMsdCxlKSxuLnB1c2goaSksdGhpcy5ub2Rlc18ucHVzaCh0KSksaS5hZGRMaXN0ZW5lcnMoKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24odCl7Zm9yKHZhciBlPXUuZ2V0KHQpLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpZihpLm9ic2VydmVyPT09dGhpcyl7aS5yZW1vdmVMaXN0ZW5lcnMoKSxlLnNwbGljZShuLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSx0fX07dmFyIGcsbTtzLnByb3RvdHlwZT17ZW5xdWV1ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzLm9ic2VydmVyLnJlY29yZHNfLGk9bi5sZW5ndGg7aWYobi5sZW5ndGg+MCl7dmFyIG89ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD09PWU/dDptJiZmdW5jdGlvbih0KXtyZXR1cm4gdD09PW18fHQ9PT1nfSh0KT9tOm51bGx9KG5baS0xXSx0KTtpZihvKXJldHVybiB2b2lkKG5baS0xXT1vKX1lbHNlIWZ1bmN0aW9uKHQpe2YucHVzaCh0KSxkfHwoZD0hMCxsKGUpKX0odGhpcy5vYnNlcnZlcik7bltpXT10fSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucztlLmF0dHJpYnV0ZXMmJnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUF0dHJNb2RpZmllZFwiLHRoaXMsITApLGUuY2hhcmFjdGVyRGF0YSYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsdGhpcywhMCksZS5jaGlsZExpc3QmJnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVJbnNlcnRlZFwiLHRoaXMsITApLChlLmNoaWxkTGlzdHx8ZS5zdWJ0cmVlKSYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZVJlbW92ZWRcIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm9wdGlvbnM7ZS5hdHRyaWJ1dGVzJiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIix0aGlzLCEwKSxlLmNoYXJhY3RlckRhdGEmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLHRoaXMsITApLGUuY2hpbGRMaXN0JiZ0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Ob2RlSW5zZXJ0ZWRcIix0aGlzLCEwKSwoZS5jaGlsZExpc3R8fGUuc3VidHJlZSkmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKHQpe2lmKHQhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHQpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKHQpO3ZhciBlPXUuZ2V0KHQpO2V8fHUuc2V0KHQsZT1bXSksZS5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSx0LmZvckVhY2goZnVuY3Rpb24odCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHQpO2Zvcih2YXIgZT11LmdldCh0KSxuPTA7bjxlLmxlbmd0aDtuKyspaWYoZVtuXT09PXRoaXMpe2Uuc3BsaWNlKG4sMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24odCl7c3dpdGNoKHQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdC50eXBlKXtjYXNlXCJET01BdHRyTW9kaWZpZWRcIjp2YXIgZT10LmF0dHJOYW1lLGk9dC5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkksbz10LnRhcmdldDsocz1uZXcgcihcImF0dHJpYnV0ZXNcIixvKSkuYXR0cmlidXRlTmFtZT1lLHMuYXR0cmlidXRlTmFtZXNwYWNlPWk7bD10LmF0dHJDaGFuZ2U9PT1NdXRhdGlvbkV2ZW50LkFERElUSU9OP251bGw6dC5wcmV2VmFsdWU7bihvLGZ1bmN0aW9uKHQpe2lmKHQuYXR0cmlidXRlcyYmKCF0LmF0dHJpYnV0ZUZpbHRlcnx8IXQuYXR0cmlidXRlRmlsdGVyLmxlbmd0aHx8LTEhPT10LmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKGUpfHwtMSE9PXQuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoaSkpKXJldHVybiB0LmF0dHJpYnV0ZU9sZFZhbHVlP2EobCk6c30pO2JyZWFrO2Nhc2VcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiOnZhciBzPXIoXCJjaGFyYWN0ZXJEYXRhXCIsbz10LnRhcmdldCksbD10LnByZXZWYWx1ZTtuKG8sZnVuY3Rpb24odCl7aWYodC5jaGFyYWN0ZXJEYXRhKXJldHVybiB0LmNoYXJhY3RlckRhdGFPbGRWYWx1ZT9hKGwpOnN9KTticmVhaztjYXNlXCJET01Ob2RlUmVtb3ZlZFwiOnRoaXMuYWRkVHJhbnNpZW50T2JzZXJ2ZXIodC50YXJnZXQpO2Nhc2VcIkRPTU5vZGVJbnNlcnRlZFwiOnZhciB1LGMsaD10LnRhcmdldDtcIkRPTU5vZGVJbnNlcnRlZFwiPT09dC50eXBlPyh1PVtoXSxjPVtdKToodT1bXSxjPVtoXSk7dmFyIGQ9aC5wcmV2aW91c1NpYmxpbmcsZj1oLm5leHRTaWJsaW5nOyhzPXIoXCJjaGlsZExpc3RcIix0LnRhcmdldC5wYXJlbnROb2RlKSkuYWRkZWROb2Rlcz11LHMucmVtb3ZlZE5vZGVzPWMscy5wcmV2aW91c1NpYmxpbmc9ZCxzLm5leHRTaWJsaW5nPWYsbih0LnJlbGF0ZWROb2RlLGZ1bmN0aW9uKHQpe2lmKHQuY2hpbGRMaXN0KXJldHVybiBzfSl9Zz1tPXZvaWQgMH19LHQuSnNNdXRhdGlvbk9ic2VydmVyPWksdC5NdXRhdGlvbk9ic2VydmVyfHwodC5NdXRhdGlvbk9ic2VydmVyPWksaS5faXNQb2x5ZmlsbGVkPSEwKX19KHNlbGYpLGZ1bmN0aW9uKHQsZSl7ZnVuY3Rpb24gbih0KXtyZXR1cm4gbFtzXT1pLmFwcGx5KGUsdCkscysrfWZ1bmN0aW9uIGkodCl7dmFyIG49W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7XCJmdW5jdGlvblwiPT10eXBlb2YgdD90LmFwcGx5KGUsbik6bmV3IEZ1bmN0aW9uKFwiXCIrdCkoKX19ZnVuY3Rpb24gbyh0KXtpZih1KXNldFRpbWVvdXQoaShvLHQpLDApO2Vsc2V7dmFyIGU9bFt0XTtpZihlKXt1PSEwO3RyeXtlKCl9ZmluYWxseXtyKHQpLHU9ITF9fX19ZnVuY3Rpb24gcih0KXtkZWxldGUgbFt0XX1pZighdC5zZXRJbW1lZGlhdGUpe3ZhciBhLHM9MSxsPXt9LHU9ITEsYz10LmRvY3VtZW50LGg9T2JqZWN0LmdldFByb3RvdHlwZU9mJiZPYmplY3QuZ2V0UHJvdG90eXBlT2YodCk7aD1oJiZoLnNldFRpbWVvdXQ/aDp0LFwiW29iamVjdCBwcm9jZXNzXVwiPT09e30udG9TdHJpbmcuY2FsbCh0LnByb2Nlc3MpP2E9ZnVuY3Rpb24oKXt2YXIgdD1uKGFyZ3VtZW50cyk7cmV0dXJuIHByb2Nlc3MubmV4dFRpY2soaShvLHQpKSx0fTpmdW5jdGlvbigpe2lmKHQucG9zdE1lc3NhZ2UmJiF0LmltcG9ydFNjcmlwdHMpe3ZhciBlPSEwLG49dC5vbm1lc3NhZ2U7cmV0dXJuIHQub25tZXNzYWdlPWZ1bmN0aW9uKCl7ZT0hMX0sdC5wb3N0TWVzc2FnZShcIlwiLFwiKlwiKSx0Lm9ubWVzc2FnZT1uLGV9fSgpP2Z1bmN0aW9uKCl7dmFyIGU9XCJzZXRJbW1lZGlhdGUkXCIrTWF0aC5yYW5kb20oKStcIiRcIixpPWZ1bmN0aW9uKG4pe24uc291cmNlPT09dCYmXCJzdHJpbmdcIj09dHlwZW9mIG4uZGF0YSYmMD09PW4uZGF0YS5pbmRleE9mKGUpJiZvKCtuLmRhdGEuc2xpY2UoZS5sZW5ndGgpKX07dC5hZGRFdmVudExpc3RlbmVyP3QuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixpLCExKTp0LmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsaSksYT1mdW5jdGlvbigpe3ZhciBpPW4oYXJndW1lbnRzKTtyZXR1cm4gdC5wb3N0TWVzc2FnZShlK2ksXCIqXCIpLGl9fSgpOnQuTWVzc2FnZUNoYW5uZWw/ZnVuY3Rpb24oKXt2YXIgdD1uZXcgTWVzc2FnZUNoYW5uZWw7dC5wb3J0MS5vbm1lc3NhZ2U9ZnVuY3Rpb24odCl7byh0LmRhdGEpfSxhPWZ1bmN0aW9uKCl7dmFyIGU9bihhcmd1bWVudHMpO3JldHVybiB0LnBvcnQyLnBvc3RNZXNzYWdlKGUpLGV9fSgpOmMmJlwib25yZWFkeXN0YXRlY2hhbmdlXCJpbiBjLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik/ZnVuY3Rpb24oKXt2YXIgdD1jLmRvY3VtZW50RWxlbWVudDthPWZ1bmN0aW9uKCl7dmFyIGU9bihhcmd1bWVudHMpLGk9Yy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO3JldHVybiBpLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe28oZSksaS5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCx0LnJlbW92ZUNoaWxkKGkpLGk9bnVsbH0sdC5hcHBlbmRDaGlsZChpKSxlfX0oKTphPWZ1bmN0aW9uKCl7dmFyIHQ9bihhcmd1bWVudHMpO3JldHVybiBzZXRUaW1lb3V0KGkobyx0KSwwKSx0fSxoLnNldEltbWVkaWF0ZT1hLGguY2xlYXJJbW1lZGlhdGU9cn19KHNlbGYpLGZ1bmN0aW9uKCl7dmFyIHQ9e2Vuc3VyZVZpZXdwb3J0RWxlbWVudDpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJtZXRhW25hbWU9dmlld3BvcnRdXCIpO3JldHVybiB0fHwoKHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1ldGFcIikpLm5hbWU9XCJ2aWV3cG9ydFwiLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodCkpLHR9LHNldHVwOmZ1bmN0aW9uKCl7dmFyIGU9dC5lbnN1cmVWaWV3cG9ydEVsZW1lbnQoKTtlJiYoZS5oYXNBdHRyaWJ1dGUoXCJjb250ZW50XCIpfHxlLnNldEF0dHJpYnV0ZShcImNvbnRlbnRcIixcIndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTEsbWF4aW11bS1zY2FsZT0xLG1pbmltdW0tc2NhbGU9MSx1c2VyLXNjYWxhYmxlPW5vXCIpKX19O3dpbmRvdy5WaWV3cG9ydD10fSgpO3ZhciBQaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpfXJldHVybiBiKGUsdCksZX0oZnVuY3Rpb24oKXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiBIVE1MRWxlbWVudCl7dmFyIHQ9ZnVuY3Rpb24oKXt9O3JldHVybiB0LnByb3RvdHlwZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHR9cmV0dXJuIEhUTUxFbGVtZW50fSgpKSxPaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7Zm9yKHQudGVtcGxhdGU9dC5pbm5lckhUTUw7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7cmV0dXJuIHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlIT09ZG9jdW1lbnQuYm9keSYmUS53YXJuKFwib25zLXRlbXBsYXRlIChpZCA9IFwiK3RoaXMuZ2V0QXR0cmlidXRlKFwiaWRcIikrXCIpIG11c3QgYmUgbG9jYXRlZCBqdXN0IHVuZGVyIGRvY3VtZW50LmJvZHlcIisodGhpcy5wYXJlbnROb2RlLm91dGVySFRNTD9cIjpcXG5cXG5cIit0aGlzLnBhcmVudE5vZGUub3V0ZXJIVE1MOlwiLlwiKSk7dmFyIHQ9bmV3IEN1c3RvbUV2ZW50KFwiX3RlbXBsYXRlbG9hZGVkXCIse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMH0pO3QudGVtcGxhdGU9dGhpcy50ZW1wbGF0ZSx0LnRlbXBsYXRlSWQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJpZFwiKSx0aGlzLmRpc3BhdGNoRXZlbnQodCl9fV0pLGV9KCk7Yy5UZW1wbGF0ZT1PaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdGVtcGxhdGVcIixPaSk7dmFyIHhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7aWYobnVsbCE9PUMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKSl0Ll9wbGF0Zm9ybVVwZGF0ZSgpO2Vsc2UgaWYoIXQuX2lzQWxsb3dlZFBsYXRmb3JtKCkpe2Zvcig7dC5jaGlsZE5vZGVzWzBdOyl0LmNoaWxkTm9kZXNbMF0ucmVtb3ZlKCk7dC5fcGxhdGZvcm1VcGRhdGUoKX19KSx0Ll9vbk9yaWVudGF0aW9uQ2hhbmdlKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7T3Qub24oXCJjaGFuZ2VcIix0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlLmJpbmQodGhpcykpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe1wib3JpZW50YXRpb25cIj09PXQmJnRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UoKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7T3Qub2ZmKFwiY2hhbmdlXCIsdGhpcy5fb25PcmllbnRhdGlvbkNoYW5nZSl9fSx7a2V5OlwiX3BsYXRmb3JtVXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9dGhpcy5faXNBbGxvd2VkUGxhdGZvcm0oKT9cIlwiOlwibm9uZVwifX0se2tleTpcIl9pc0FsbG93ZWRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuZ2V0QXR0cmlidXRlKFwicGxhdGZvcm1cIil8fHRoaXMuZ2V0QXR0cmlidXRlKFwicGxhdGZvcm1cIikuc3BsaXQoL1xccysvKS5pbmRleE9mKEMuZ2V0TW9iaWxlT1MoKSk+PTB9fSx7a2V5OlwiX29uT3JpZW50YXRpb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGFzQXR0cmlidXRlKFwib3JpZW50YXRpb25cIikmJnRoaXMuX2lzQWxsb3dlZFBsYXRmb3JtKCkpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwib3JpZW50YXRpb25cIikudG9Mb3dlckNhc2UoKSxlPU90LmlzUG9ydHJhaXQoKT9cInBvcnRyYWl0XCI6XCJsYW5kc2NhcGVcIjt0aGlzLnN0eWxlLmRpc3BsYXk9dD09PWU/XCJcIjpcIm5vbmVcIn19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJvcmllbnRhdGlvblwiXX19XSksZX0oKTtjLklmPXhpLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1pZlwiLHhpKTt2YXIgVGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3AodGhpcyx0KSx0aGlzLnRpbWluZz1lLnRpbWluZ3x8XCJsaW5lYXJcIix0aGlzLmR1cmF0aW9uPWUuZHVyYXRpb258fDAsdGhpcy5kZWxheT1lLmRlbGF5fHwwLHRoaXMuZGVmPXt0aW1pbmc6dGhpcy50aW1pbmcsZHVyYXRpb246dGhpcy5kdXJhdGlvbixkZWxheTp0aGlzLmRlbGF5fX1yZXR1cm4gZyh0LG51bGwsW3trZXk6XCJleHRlbmRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxlPXRoaXMsbj1mdW5jdGlvbigpe2UuYXBwbHkodGhpcyxhcmd1bWVudHMpLFEuZXh0ZW5kKHRoaXMsdCl9O3JldHVybiBuLnByb3RvdHlwZT10aGlzLnByb3RvdHlwZSxufX1dKSx0fSgpLExpPXt9O0xpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcIm9uc2ZsYWctaXBob25leC1wb3J0cmFpdFwiKSYmd2luZG93LmlubmVyV2lkdGg8d2luZG93LmlubmVySGVpZ2h0fSxMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwib25zZmxhZy1pcGhvbmV4LWxhbmRzY2FwZVwiKSYmd2luZG93LmlubmVyV2lkdGg+PXdpbmRvdy5pbm5lckhlaWdodH0sTGkuZ2V0U2FmZUFyZWFMZW5ndGhzPWZ1bmN0aW9uKCl7cmV0dXJuIExpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT97dG9wOjQ0LHJpZ2h0OjAsYm90dG9tOjM0LGxlZnQ6MH06TGkuaXNJUGhvbmVYTGFuZHNjYXBlUGF0Y2hBY3RpdmUoKT97dG9wOjAscmlnaHQ6NDQsYm90dG9tOjIxLGxlZnQ6NDR9Ont0b3A6MCxyaWdodDowLGJvdHRvbTowLGxlZnQ6MH19LExpLmdldFNhZmVBcmVhRE9NUmVjdD1mdW5jdGlvbigpe3ZhciB0PXZvaWQgMDtyZXR1cm4gdD1MaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/e3g6MCx5OjQ0LHdpZHRoOndpbmRvdy5pbm5lcldpZHRoLGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHQtNzh9OkxpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlKCk/e3g6NDQseTowLHdpZHRoOndpbmRvdy5pbm5lcldpZHRoLTg4LGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHQtMjF9Ont4OjAseTowLHdpZHRoOndpbmRvdy5pbm5lcldpZHRoLGhlaWdodDp3aW5kb3cuaW5uZXJIZWlnaHR9LF8oe30sdCx7bGVmdDp0LngsdG9wOnQueSxyaWdodDp0LngrdC53aWR0aCxib3R0b206dC55K3QuaGVpZ2h0fSl9O3ZhciBNaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCksRGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2VcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5tYXNrVGltaW5nPVwibGluZWFyXCIsbC5tYXNrRHVyYXRpb249LjIsbH1yZXR1cm4gYihlLE1pKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MH0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MX0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgODAlLCAwKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MX0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MH0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCA4MCUsIDApXCIsb3BhY2l0eTowfSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19XSksZX0oKSxJaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLm1hc2tUaW1pbmc9XCJsaW5lYXJcIixsLm1hc2tEdXJhdGlvbj0uMixMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgNDhweClcIjpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP2wubGlmdEFtb3VudD1cImNhbGMoMTAwJSArIDMzcHgpXCI6bC5saWZ0QW1vdW50PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LzItMStcInB4XCIsbH1yZXR1cm4gYihlLE1pKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MH0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MX0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5saWZ0QW1vdW50K1wiLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7bnQucnVuQWxsKG50KHQuX21hc2spLnF1ZXVlKHtvcGFjaXR5OjF9KS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtvcGFjaXR5OjB9LHtkdXJhdGlvbjp0aGlzLm1hc2tEdXJhdGlvbix0aW1pbmc6dGhpcy5tYXNrVGltaW5nfSksbnQodC5fc2hlZXQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmxpZnRBbW91bnQrXCIsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX1dKSxlfSgpLE5pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jb25zdHJ1Y3Rvcj09PWUmJlEudGhyb3dBYnN0cmFjdCgpLHQuX3Zpc2libGU9ITEsdC5fZG9vckxvY2s9bmV3IE50LHQuX2NhbmNlbD10Ll9jYW5jZWwuYmluZCh0KSx0Ll9zZWxmQ2FtZWxOYW1lPVEuY2FtZWxpemUodC50YWdOYW1lLnNsaWNlKDQpKSx0Ll9kZWZhdWx0REJCPWZ1bmN0aW9uKGUpe3JldHVybiB0LmNhbmNlbGFibGU/dC5fY2FuY2VsKCk6ZS5jYWxsUGFyZW50SGFuZGxlcigpfSx0Ll9hbmltYXRvckZhY3Rvcnk9dC5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX3RvZ2dsZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5zdHlsZS5kaXNwbGF5PXQ/XCJibG9ja1wiOlwibm9uZVwifX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fV0pLGcoZSxbe2tleTpcIl9jYW5jZWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jYW5jZWxhYmxlJiYhdGhpcy5fcnVubmluZyYmKHRoaXMuX3J1bm5pbmc9ITAsdGhpcy5oaWRlKCkudGhlbihmdW5jdGlvbigpe3QuX3J1bm5pbmc9ITEsUS50cmlnZ2VyRWxlbWVudEV2ZW50KHQsXCJkaWFsb2ctY2FuY2VsXCIpfSxmdW5jdGlvbigpe3JldHVybiB0Ll9ydW5uaW5nPSExfSkpfX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07cmV0dXJuIHRoaXMuX3NldFZpc2libGUuYXBwbHkodGhpcyxbITBdLmNvbmNhdChlKSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fc2V0VmlzaWJsZS5hcHBseSh0aGlzLFshMV0uY29uY2F0KGUpKX19LHtrZXk6XCJ0b2dnbGVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksbj0wO248dDtuKyspZVtuXT1hcmd1bWVudHNbbl07cmV0dXJuIHRoaXMuX3NldFZpc2libGUuYXBwbHkodGhpcyxbIXRoaXMudmlzaWJsZV0uY29uY2F0KGUpKX19LHtrZXk6XCJfc2V0VmlzaWJsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlLGk9dGhpcyxvPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxyPXQ/XCJzaG93XCI6XCJoaWRlXCI7KG89Xyh7fSxvKSkuYW5pbWF0aW9uT3B0aW9ucz1RLmV4dGVuZChvLmFuaW1hdGlvbk9wdGlvbnN8fHt9LE8ucGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nKHRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpKTt2YXIgYT0hMTtyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwcmVcIityLChlPXt9LG0oZSx0aGlzLl9zZWxmQ2FtZWxOYW1lLHRoaXMpLG0oZSxcImNhbmNlbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGE9ITB9KSxlKSksYT9Qcm9taXNlLnJlamVjdChcIkNhbmNlbGVkIGluIHByZVwiK3IrXCIgZXZlbnQuXCIpOm5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe2kuX2Rvb3JMb2NrLndhaXRVbmxvY2soZnVuY3Rpb24oKXt2YXIgYT1pLl9kb29yTG9jay5sb2NrKCkscz1pLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3Iobyk7dCYmaS5fdG9nZ2xlU3R5bGUoITAsbyksaS5fdmlzaWJsZT10LFEuaW9zUGFnZVNjcm9sbEZpeCh0KSxuKGksZnVuY3Rpb24oKXtzW3JdKGksZnVuY3Rpb24oKXshdCYmaS5fdG9nZ2xlU3R5bGUoITEsbyksYSgpLFEucHJvcGFnYXRlQWN0aW9uKGksXCJfXCIrciksUS50cmlnZ2VyRWxlbWVudEV2ZW50KGksXCJwb3N0XCIrcixtKHt9LGkuX3NlbGZDYW1lbE5hbWUsaSkpLG8uY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmby5jYWxsYmFjayhpKSxlKGkpfSl9KX0pfSl9fSx7a2V5OlwiX3VwZGF0ZU1hc2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5fbWFzayYmdC5nZXRBdHRyaWJ1dGUoXCJtYXNrLWNvbG9yXCIpJiYodC5fbWFzay5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dC5nZXRBdHRyaWJ1dGUoXCJtYXNrLWNvbG9yXCIpKX0pfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMub25EZXZpY2VCYWNrQnV0dG9uPXRoaXMuX2RlZmF1bHREQkIuYmluZCh0aGlzKSxuKHRoaXMsZnVuY3Rpb24oKXt0Ll9tYXNrJiYodC5fbWFzay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0Ll9jYW5jZWwsITEpLFEuaW9zTWFza1Njcm9sbEZpeCh0Ll9tYXNrLCEwKSl9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPW51bGwsdGhpcy5fbWFzayYmKHRoaXMuX21hc2sucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fY2FuY2VsLCExKSxRLmlvc01hc2tTY3JvbGxGaXgodGhpcy5fbWFzaywhMSkpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLHRoaXMuX3NjaGVtZSk7YnJlYWs7Y2FzZVwiYW5pbWF0aW9uXCI6dGhpcy5fYW5pbWF0b3JGYWN0b3J5PXRoaXMuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpO2JyZWFrO2Nhc2VcIm1hc2stY29sb3JcIjp0aGlzLl91cGRhdGVNYXNrKCl9fX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fSx7a2V5OlwidmlzaWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92aXNpYmxlfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwiY2FuY2VsYWJsZVwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImNhbmNlbGFibGVcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiY2FuY2VsYWJsZVwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJhbmltYXRpb25cIixcIm1hc2stY29sb3JcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicHJlc2hvd1wiLFwicG9zdHNob3dcIixcInByZWhpZGVcIixcInBvc3RoaWRlXCIsXCJkaWFsb2ctY2FuY2VsXCJdfX1dKSxlfSgpLEJpPXtcIi5hY3Rpb24tc2hlZXRcIjpcImFjdGlvbi1zaGVldC0tKlwiLFwiLmFjdGlvbi1zaGVldC1tYXNrXCI6XCJhY3Rpb24tc2hlZXQtbWFzay0tKlwiLFwiLmFjdGlvbi1zaGVldC10aXRsZVwiOlwiYWN0aW9uLXNoZWV0LXRpdGxlLS0qXCJ9LGppPXtkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/RGk6SWl9LG5vbmU6TWl9LEhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6amksYmFzZUNsYXNzOk1pLGJhc2VDbGFzc05hbWU6XCJBY3Rpb25TaGVldEFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksdGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuc3R5bGUuekluZGV4PTEwMDAxLCF0aGlzLl9zaGVldCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodC5jbGFzc0xpc3QuYWRkKFwiYWN0aW9uLXNoZWV0XCIpO3RoaXMuZmlyc3RDaGlsZDspdC5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO3RoaXMuYXBwZW5kQ2hpbGQodCl9aWYoIXRoaXMuX3RpdGxlJiZ0aGlzLmhhc0F0dHJpYnV0ZShcInRpdGxlXCIpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaW5uZXJIVE1MPXRoaXMuZ2V0QXR0cmlidXRlKFwidGl0bGVcIiksZS5jbGFzc0xpc3QuYWRkKFwiYWN0aW9uLXNoZWV0LXRpdGxlXCIpLHRoaXMuX3NoZWV0Lmluc2VydEJlZm9yZShlLHRoaXMuX3NoZWV0LmZpcnN0Q2hpbGQpfWlmKCF0aGlzLl9tYXNrKXt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NMaXN0LmFkZChcImFjdGlvbi1zaGVldC1tYXNrXCIpLHRoaXMuaW5zZXJ0QmVmb3JlKG4sdGhpcy5maXJzdENoaWxkKX10aGlzLl9zaGVldC5zdHlsZS56SW5kZXg9MjAwMDEsdGhpcy5fbWFzay5zdHlsZS56SW5kZXg9MmU0LEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfdXBkYXRlVGl0bGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3RpdGxlJiYodGhpcy5fdGl0bGUuaW5uZXJIVE1MPXRoaXMuZ2V0QXR0cmlidXRlKFwidGl0bGVcIikpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXtcInRpdGxlXCI9PT10P3RoaXMuX3VwZGF0ZVRpdGxlKCk6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQml9fSx7a2V5OlwiX21hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5hY3Rpb24tc2hlZXQtbWFza1wiKX19LHtrZXk6XCJfc2hlZXRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5hY3Rpb24tc2hlZXRcIil9fSx7a2V5OlwiX3RpdGxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5hY3Rpb24tc2hlZXQtdGl0bGVcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIE1pfHxRLnRocm93QW5pbWF0b3IoXCJBY3Rpb25TaGVldFwiKSxqaVt0XT1lfX0se2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdCh3KHYoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxcIm9ic2VydmVkQXR0cmlidXRlc1wiLHRoaXMpKSxbXCJ0aXRsZVwiXSl9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGppfX0se2tleTpcIkFjdGlvblNoZWV0QW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWl9fV0pLGV9KCk7Yy5BY3Rpb25TaGVldD1IaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWN0aW9uLXNoZWV0XCIsSGkpO3ZhciBSaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuY29uc3RydWN0b3I9PT1lJiZRLnRocm93QWJzdHJhY3QoKSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9yaXBwbGVPcHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpc119fV0pLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKHRoaXMuX2RlZmF1bHRDbGFzc05hbWUpLCF0aGlzLl9pY29uJiZ0aGlzLmhhc0F0dHJpYnV0ZShcImljb25cIikpe1EuY2hlY2tNaXNzaW5nSW1wb3J0KFwiSWNvblwiKTt2YXIgdD1RLmNyZWF0ZUVsZW1lbnQoJzxvbnMtaWNvbiBpY29uPVwiJyt0aGlzLmdldEF0dHJpYnV0ZShcImljb25cIikrJ1wiPjwvb25zLWljb24+Jyk7dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2RlZmF1bHRDbGFzc05hbWUucmVwbGFjZShcImJ1dHRvblwiLFwiaWNvblwiKSksdGhpcy5pbnNlcnRCZWZvcmUodCx0aGlzLmZpcnN0Q2hpbGQpfXRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfdXBkYXRlSWNvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faWNvbiYmdGhpcy5faWNvbi5zZXRBdHRyaWJ1dGUoXCJpY29uXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpKX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yaXBwbGVPcHQmJlEudXBkYXRlUmlwcGxlLmFwcGx5KFEsdyh0aGlzLl9yaXBwbGVPcHQpKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyx0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lLHRoaXMuX3NjaGVtZSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLHRoaXMuX3NjaGVtZSk7YnJlYWs7Y2FzZVwiaWNvblwiOnRoaXMuX3VwZGF0ZUljb24oKTticmVhaztjYXNlXCJyaXBwbGVcIjp0aGlzLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKSYmdGhpcy5fdXBkYXRlUmlwcGxlKCl9fX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwiX2ljb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1pY29uXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCIsXCJpY29uXCIsXCJyaXBwbGVcIl19fV0pLGV9KCksRmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUmkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57XCJcIjpcImFjdGlvbi1zaGVldC1idXR0b24tLSpcIixcIi5hY3Rpb24tc2hlZXQtaWNvblwiOlwiYWN0aW9uLXNoZWV0LWljb24tLSpcIn19fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImFjdGlvbi1zaGVldC1idXR0b25cIn19LHtrZXk6XCJfcmlwcGxlT3B0XCIsZ2V0OmZ1bmN0aW9uKCl7fX1dKSxlfSgpO2MuQWN0aW9uU2hlZXRCdXR0b249RmksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWFjdGlvbi1zaGVldC1idXR0b25cIixGaSk7dmFyIHFpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSx6aT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZHVyYXRpb24scj12b2lkIDA9PT1vPy4yOm8sYT10LmRlbGF5LHM9dm9pZCAwPT09YT8wOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7ZHVyYXRpb246cix0aW1pbmc6aSxkZWxheTpzfSkpfXJldHVybiBiKGUscWkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoLjksIC45LCAxKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoMSwgMSwgMSlcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoMSwgMSwgMSlcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSBzY2FsZTNkKC45LCAuOSwgMSlcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLFZpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kdXJhdGlvbixyPXZvaWQgMD09PW8/LjI6byxhPXQuZGVsYXkscz12b2lkIDA9PT1hPzA6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHtkdXJhdGlvbjpyLHRpbWluZzppLGRlbGF5OnN9KSl9cmV0dXJuIGIoZSxxaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCgxLjMsIDEuMywgMSlcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSBzY2FsZTNkKDEsIDEsIDEpXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eToxfSx7b3BhY2l0eTowfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLFdpPXtcIi5hbGVydC1kaWFsb2dcIjpcImFsZXJ0LWRpYWxvZy0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1jb250YWluZXJcIjpcImFsZXJ0LWRpYWxvZy1jb250YWluZXItLSpcIixcIi5hbGVydC1kaWFsb2ctdGl0bGVcIjpcImFsZXJ0LWRpYWxvZy10aXRsZS0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1jb250ZW50XCI6XCJhbGVydC1kaWFsb2ctY29udGVudC0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1mb290ZXJcIjpcImFsZXJ0LWRpYWxvZy1mb290ZXItLSpcIixcIi5hbGVydC1kaWFsb2ctZm9vdGVyLS1yb3dmb290ZXJcIjpcImFsZXJ0LWRpYWxvZy1mb290ZXItLXJvd2Zvb3Rlci0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1idXR0b24tLXJvd2Zvb3RlclwiOlwiYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcm93Zm9vdGVyLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcHJpbWFsXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS1wcmltYWwtLSpcIixcIi5hbGVydC1kaWFsb2ctYnV0dG9uXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS0qXCIsXCJvbnMtYWxlcnQtZGlhbG9nLWJ1dHRvblwiOlwiYWxlcnQtZGlhbG9nLWJ1dHRvbi0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1tYXNrXCI6XCJhbGVydC1kaWFsb2ctbWFzay0tKlwiLFwiLnRleHQtaW5wdXRcIjpcInRleHQtaW5wdXQtLSpcIn0sVWk9e25vbmU6cWksZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3ppOlZpfSxmYWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/emk6Vml9fSxYaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsTmkpLGcoZSxbe2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgTyh7YW5pbWF0b3JzOlVpLGJhc2VDbGFzczpxaSxiYXNlQ2xhc3NOYW1lOlwiQWxlcnREaWFsb2dBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xMDAwMTt2YXIgdD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYoIXRoaXMuX21hc2smJiF0aGlzLl9kaWFsb2cpZm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KXQuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTtpZighdGhpcy5fbWFzayl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTGlzdC5hZGQoXCJhbGVydC1kaWFsb2ctbWFza1wiKSx0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuY2hpbGRyZW5bMF0pfWlmKCF0aGlzLl9kaWFsb2cpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtZGlhbG9nXCIpLHRoaXMuaW5zZXJ0QmVmb3JlKG4sbnVsbCl9aWYoIVEuZmluZENoaWxkKHRoaXMuX2RpYWxvZyxcIi5hbGVydC1kaWFsb2ctY29udGFpbmVyXCIpKXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NMaXN0LmFkZChcImFsZXJ0LWRpYWxvZy1jb250YWluZXJcIiksdGhpcy5fZGlhbG9nLmFwcGVuZENoaWxkKGkpfXRoaXMuX2RpYWxvZy5jaGlsZHJlblswXS5hcHBlbmRDaGlsZCh0KSx0aGlzLl9kaWFsb2cuc3R5bGUuekluZGV4PTIwMDAxLHRoaXMuX21hc2suc3R5bGUuekluZGV4PTJlNCxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBXaX19LHtrZXk6XCJfbWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFsZXJ0LWRpYWxvZy1tYXNrXCIpfX0se2tleTpcIl9kaWFsb2dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5hbGVydC1kaWFsb2dcIil9fSx7a2V5OlwiX3RpdGxlRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLl9kaWFsb2cuY2hpbGRyZW5bMF0sXCIuYWxlcnQtZGlhbG9nLXRpdGxlXCIpfX0se2tleTpcIl9jb250ZW50RWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLl9kaWFsb2cuY2hpbGRyZW5bMF0sXCIuYWxlcnQtZGlhbG9nLWNvbnRlbnRcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHFpfHxRLnRocm93QW5pbWF0b3IoXCJBbGVydERpYWxvZ1wiKSxVaVt0XT1lfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBVaX19LHtrZXk6XCJBbGVydERpYWxvZ0FuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHFpfX1dKSxlfSgpO2MuQWxlcnREaWFsb2c9WGksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWFsZXJ0LWRpYWxvZ1wiLFhpKTt2YXIgWWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUmkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57XCJcIjpcImFsZXJ0LWRpYWxvZy1idXR0b24tLSpcIn19fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImFsZXJ0LWRpYWxvZy1idXR0b25cIn19LHtrZXk6XCJfcmlwcGxlT3B0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMsdm9pZCAwLHttb2RpZmllcjpcImxpZ2h0LWdyYXlcIn1dfX1dKSxlfSgpO2MuQWxlcnREaWFsb2dCdXR0b249WWksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWFsZXJ0LWRpYWxvZy1idXR0b25cIixZaSk7dmFyIEdpPXtcIlwiOlwiYmFjay1idXR0b24tLSpcIixcIi5iYWNrLWJ1dHRvbl9faWNvblwiOlwiYmFjay1idXR0b24tLSpfX2ljb25cIixcIi5iYWNrLWJ1dHRvbl9fbGFiZWxcIjpcImJhY2stYnV0dG9uLS0qX19sYWJlbFwifSwkaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHQuX29wdGlvbnM9e30sdC5fYm91bmRPbkNsaWNrPXQuX29uQ2xpY2suYmluZCh0KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl91cGRhdGVJY29uXCIsdmFsdWU6ZnVuY3Rpb24oKXsoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlEuZmluZENoaWxkKHRoaXMsXCIuYmFjay1idXR0b25fX2ljb25cIikpLmlubmVySFRNTD1cImFuZHJvaWRcIj09PU4uZ2V0UGxhdGZvcm0odGhpcyl8fFEuaGFzTW9kaWZpZXIodGhpcyxcIm1hdGVyaWFsXCIpPyc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cXG48c3ZnIHdpZHRoPVwiMTZweFwiIGhlaWdodD1cIjE2cHhcIiB2aWV3Qm94PVwiMCAwIDE2IDE2XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIj5cXG4gICAgPHRpdGxlPm1kLWJhY2stYnV0dG9uLWljb248L3RpdGxlPlxcbiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz5cXG4gICAgPGRlZnM+PC9kZWZzPlxcbiAgICA8ZyBpZD1cInRvb2xiYXItYmFjay1idXR0b25cIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cXG4gICAgICAgIDxnIGlkPVwiYW5kcm9pZFwiIHRyYW5zZm9ybT1cInRyYW5zbGF0ZSgtMzIuMDAwMDAwLCAtMzIuMDAwMDAwKVwiIGZpbGwtcnVsZT1cIm5vbnplcm9cIj5cXG4gICAgICAgICAgICA8cG9seWdvbiBpZD1cIm1kLWJhY2stYnV0dG9uLWljb25cIiBwb2ludHM9XCI0OCAzOSAzNS44MyAzOSA0MS40MiAzMy40MSA0MCAzMiAzMiA0MCA0MCA0OCA0MS40MSA0Ni41OSAzNS44MyA0MSA0OCA0MVwiPjwvcG9seWdvbj5cXG4gICAgICAgIDwvZz5cXG4gICAgPC9nPlxcbjwvc3ZnPlxcbic6Jzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/Plxcbjxzdmcgd2lkdGg9XCIxM3B4XCIgaGVpZ2h0PVwiMjFweFwiIHZpZXdCb3g9XCIwIDAgMTMgMjFcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxcbiAgICA8dGl0bGU+aW9zLWJhY2stYnV0dG9uLWljb248L3RpdGxlPlxcbiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz5cXG4gICAgPGRlZnM+PC9kZWZzPlxcbiAgICA8ZyBpZD1cInRvb2xiYXItYmFjay1idXR0b25cIiBzdHJva2U9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMVwiIGZpbGwtcnVsZT1cImV2ZW5vZGRcIj5cXG4gICAgICAgIDxnIGlkPVwiaW9zXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0zNC4wMDAwMDAsIC0zMC4wMDAwMDApXCI+XFxuICAgICAgICAgICAgPHBvbHlnb24gaWQ9XCJpb3MtYmFjay1idXR0b24taWNvblwiIHBvaW50cz1cIjM0IDQwLjUgNDQuNSAzMCA0Ni41IDMyIDM4IDQwLjUgNDYuNSA0OSA0NC41IDUxXCI+PC9wb2x5Z29uPlxcbiAgICAgICAgPC9nPlxcbiAgICA8L2c+XFxuPC9zdmc+XFxuJ319LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcImJhY2stYnV0dG9uXCIpLCFRLmZpbmRDaGlsZCh0aGlzLFwiLmJhY2stYnV0dG9uX19sYWJlbFwiKSl7Zm9yKHZhciB0PVEuY3JlYXRlKFwic3Bhbi5iYWNrLWJ1dHRvbl9fbGFiZWxcIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl0LmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7dGhpcy5hcHBlbmRDaGlsZCh0KX1pZighUS5maW5kQ2hpbGQodGhpcyxcIi5iYWNrLWJ1dHRvbl9faWNvblwiKSl7dmFyIGU9US5jcmVhdGUoXCJzcGFuLmJhY2stYnV0dG9uX19pY29uXCIpO3RoaXMuX3VwZGF0ZUljb24oZSksdGhpcy5pbnNlcnRCZWZvcmUoZSx0aGlzLmNoaWxkcmVuWzBdKX1RLnVwZGF0ZVJpcHBsZSh0aGlzLHZvaWQgMCx7Y2VudGVyOlwiXCIsc2l6ZTpcImNvbnRhaW5cIixiYWNrZ3JvdW5kOlwidHJhbnNwYXJlbnRcIn0pLEIuaW5pdE1vZGlmaWVyKHRoaXMsR2kpfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLm9uQ2xpY2spdGhpcy5vbkNsaWNrLmFwcGx5KHRoaXMpO2Vsc2V7dmFyIHQ9US5maW5kUGFyZW50KHRoaXMsXCJvbnMtbmF2aWdhdG9yXCIpO3QmJnQucG9wUGFnZSh0aGlzLm9wdGlvbnMpfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwiYmFjay1idXR0b25cIixHaSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLEdpKSYmdGhpcy5fdXBkYXRlSWNvbigpfX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT1cImlubGluZS1ibG9ja1wifX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn19LHtrZXk6XCJvcHRpb25zXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9vcHRpb25zPXR9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5CYWNrQnV0dG9uPSRpLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1iYWNrLWJ1dHRvblwiLCRpKTt2YXIgS2k9XCJib3R0b20tYmFyXCIsUWk9e1wiXCI6XCJib3R0b20tYmFyLS0qXCJ9LEppPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jbGFzc0xpc3QuYWRkKEtpKSxCLmluaXRNb2RpZmllcih0LFFpKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLm1hdGNoKHRoaXMucGFyZW50Tm9kZSxcIm9ucy1wYWdlXCIpJiZ0aGlzLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZChcInBhZ2Utd2l0aC1ib3R0b20tdG9vbGJhclwiKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxLaSxRaSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFFpKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5Cb3R0b21Ub29sYmFyPUppLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1ib3R0b20tdG9vbGJhclwiLEppKTt2YXIgWmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUmkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57XCJcIjpcImJ1dHRvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiYnV0dG9uXCJ9fV0pLGV9KCk7Yy5CdXR0b249WmksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWJ1dHRvblwiLFppKTt2YXIgdG89e1wiXCI6XCJjYXJkLS0qXCIsXCIuY2FyZF9fdGl0bGVcIjpcImNhcmQtLSpfX3RpdGxlXCIsXCIuY2FyZF9fY29udGVudFwiOlwiY2FyZC0tKl9fY29udGVudFwifSxlbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8dGhpcy5jaGlsZHJlbi5sZW5ndGg7dCsrKXt2YXIgZT10aGlzLmNoaWxkcmVuW3RdO2UuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGl0bGVcIik/ZS5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fdGl0bGVcIik6ZS5jbGFzc0xpc3QuY29udGFpbnMoXCJjb250ZW50XCIpJiZlLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19jb250ZW50XCIpfU4ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJjYXJkXCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdG8pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwiY2FyZFwiLHRvKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsdG8pfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkNhcmQ9ZW8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWNhcmRcIixlbyk7dmFyIG5vPXtcIlwiOlwiY2Fyb3VzZWwtaXRlbS0tKlwifSxpbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuc3R5bGUud2lkdGg9XCIxMDAlXCIsQi5pbml0TW9kaWZpZXIodCxubyksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoXCJtb2RpZmllclwiPT09dClyZXR1cm4gQi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxubyl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiXX19XSksZX0oKTtjLkNhcm91c2VsSXRlbT1pbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtY2Fyb3VzZWwtaXRlbVwiLGlvKTt2YXIgb289e3ZlcnRpY2FsOntheGlzOlwiWVwiLHNpemU6XCJIZWlnaHRcIixkaXI6W1widXBcIixcImRvd25cIl0sdDNkOltcIjBweCwgXCIsXCJweCwgMHB4XCJdfSxob3Jpem9udGFsOntheGlzOlwiWFwiLHNpemU6XCJXaWR0aFwiLGRpcjpbXCJsZWZ0XCIsXCJyaWdodFwiXSx0M2Q6W1wiXCIsXCJweCwgMHB4LCAwcHhcIl19fSxybz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49dGhpcztwKHRoaXMsdCk7XCJnZXRJbml0aWFsSW5kZXggZ2V0QnViYmxlV2lkdGggaXNWZXJ0aWNhbCBpc092ZXJTY3JvbGxhYmxlIGlzQ2VudGVyZWRcXG4gICAgaXNBdXRvU2Nyb2xsYWJsZSByZWZyZXNoSG9vayBwcmVDaGFuZ2VIb29rIHBvc3RDaGFuZ2VIb29rIG92ZXJTY3JvbGxIb29rXCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdPWVbdF18fGZ1bmN0aW9uKCl7cmV0dXJuITF9fSksdGhpcy5nZXRFbGVtZW50PWUuZ2V0RWxlbWVudCx0aGlzLnNjcm9sbEhvb2s9ZS5zY3JvbGxIb29rLHRoaXMuaXRlbVNpemU9ZS5pdGVtU2l6ZXx8XCIxMDAlXCIsdGhpcy5nZXRBdXRvU2Nyb2xsUmF0aW89ZnVuY3Rpb24oKXt2YXIgdD1lLmdldEF1dG9TY3JvbGxSYXRpbyYmZS5nZXRBdXRvU2Nyb2xsUmF0aW8uYXBwbHkoZSxhcmd1bWVudHMpO3JldHVybigodD1cIm51bWJlclwiPT10eXBlb2YgdCYmdD09dD90Oi41KTwwfHx0PjEpJiZRLnRocm93KFwiSW52YWxpZCBhdXRvLXNjcm9sbC1yYXRpbyBcIit0K1wiLiBNdXN0IGJlIGJldHdlZW4gMCBhbmQgMVwiKSx0fSx0aGlzLnNob3VsZEJsb2NrPVwib3RoZXJcIj09PVEuZ2xvYmFscy5hY3R1YWxNb2JpbGVPUyx0aGlzLm9uRHJhZ1N0YXJ0PXRoaXMub25EcmFnU3RhcnQuYmluZCh0aGlzKSx0aGlzLm9uRHJhZz10aGlzLm9uRHJhZy5iaW5kKHRoaXMpLHRoaXMub25EcmFnRW5kPXRoaXMub25EcmFnRW5kLmJpbmQodGhpcyksdGhpcy5vblJlc2l6ZT10aGlzLm9uUmVzaXplLmJpbmQodGhpcyksdGhpcy5fc2hvdWxkRml4U2Nyb2xsPVwiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1N9cmV0dXJuIGcodCxbe2tleTpcImluaXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1lLnN3aXBlYWJsZSxpPWUuYXV0b1JlZnJlc2g7dGhpcy5pbml0aWFsaXplZD0hMCx0aGlzLnRhcmdldD10aGlzLmdldEVsZW1lbnQoKS5jaGlsZHJlblswXSx0aGlzLmJsb2NrZXI9dGhpcy5nZXRFbGVtZW50KCkuY2hpbGRyZW5bMV0sdGhpcy50YXJnZXQmJnRoaXMuYmxvY2tlcnx8US50aHJvdygnRXhwZWN0ZWQgXCJ0YXJnZXRcIiBhbmQgXCJibG9ja2VyXCIgZWxlbWVudHMgdG8gZXhpc3QgYmVmb3JlIGluaXRpYWxpemluZyBTd2lwZXInKSx0aGlzLnNob3VsZEJsb2NrfHwodGhpcy5ibG9ja2VyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoXCJvbnMtc3dpcGVyXCIpLHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJvbnMtc3dpcGVyLXRhcmdldFwiKSx0aGlzLmJsb2NrZXIuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXItYmxvY2tlclwiKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMuZ2V0RWxlbWVudCgpLHtkcmFnTWluRGlzdGFuY2U6MSxkcmFnTG9ja1RvQXhpczohMCxwYXNzaXZlOiF0aGlzLl9zaG91bGRGaXhTY3JvbGx9KSx0aGlzLl9tdXRhdGlvbk9ic2VydmVyPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCl7cmV0dXJuIHQucmVmcmVzaCgpfSksdGhpcy51cGRhdGVTd2lwZWFibGUobiksdGhpcy51cGRhdGVBdXRvUmVmcmVzaChpKSx0aGlzLl9zY3JvbGw9dGhpcy5fb2Zmc2V0PXRoaXMuX2xhc3RBY3RpdmVJbmRleD0wLHRoaXMuX3VwZGF0ZUxheW91dCgpLHRoaXMuX3NldHVwSW5pdGlhbEluZGV4KCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaW5pdGlhbGl6ZWQmJnQuX3NldHVwSW5pdGlhbEluZGV4KCl9KSx3aW5kb3c9PT13aW5kb3cucGFyZW50JiYwIT09dGhpcy5vZmZzZXRIZWlnaHR8fHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKXtyZXR1cm4gdC5pbml0aWFsaXplZCYmdC5vblJlc2l6ZSgpfSl9fSx7a2V5OlwiZGlzcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsaXplZD0hMSx0aGlzLnVwZGF0ZVN3aXBlYWJsZSghMSksdGhpcy51cGRhdGVBdXRvUmVmcmVzaCghMSksdGhpcy5fZ2VzdHVyZURldGVjdG9yJiZ0aGlzLl9nZXN0dXJlRGV0ZWN0b3IuZGlzcG9zZSgpLHRoaXMudGFyZ2V0PXRoaXMuYmxvY2tlcj10aGlzLl9nZXN0dXJlRGV0ZWN0b3I9dGhpcy5fbXV0YXRpb25PYnNlcnZlcj1udWxsLHRoaXMuc2V0dXBSZXNpemUoITEpfX0se2tleTpcIm9uUmVzaXplXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9zY3JvbGwvdGhpcy50YXJnZXRTaXplO3RoaXMuX3Jlc2V0KCksdGhpcy5zZXRBY3RpdmVJbmRleCh0KSx0aGlzLnJlZnJlc2goKX19LHtrZXk6XCJfY2FsY3VsYXRlSXRlbVNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaXRlbVNpemUubWF0Y2goL14oXFxkKykocHh8JSkvKTt0fHxRLnRocm93KFwiSW52YWxpZCBzdGF0ZTogc3dpcGVyJ3Mgc2l6ZSB1bml0IG11c3QgYmUgJyUnIG9yICdweCdcIik7dmFyIGU9cGFyc2VJbnQodFsxXSwxMCk7cmV0dXJuXCIlXCI9PT10WzJdP01hdGgucm91bmQoZS8xMDAqdGhpcy50YXJnZXRTaXplKTplfX0se2tleTpcIl9zZXR1cEluaXRpYWxJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVzZXQoKSx0aGlzLl9sYXN0QWN0aXZlSW5kZXg9TWF0aC5tYXgoTWF0aC5taW4oTnVtYmVyKHRoaXMuZ2V0SW5pdGlhbEluZGV4KCkpLHRoaXMuaXRlbUNvdW50KSwwKSx0aGlzLl9zY3JvbGw9dGhpcy5fb2Zmc2V0K3RoaXMuaXRlbU51bVNpemUqdGhpcy5fbGFzdEFjdGl2ZUluZGV4LHRoaXMuX3Njcm9sbFRvKHRoaXMuX3Njcm9sbCl9fSx7a2V5OlwiX3NldFN3aXBpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwic3dpcGluZ1wiLHQpfX0se2tleTpcInNldEFjdGl2ZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0aGlzLl9zZXRTd2lwaW5nKCEwKSx0PU1hdGgubWF4KDAsTWF0aC5taW4odCx0aGlzLml0ZW1Db3VudC0xKSk7dmFyIGk9TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLm1heFNjcm9sbCx0aGlzLl9vZmZzZXQrdGhpcy5pdGVtTnVtU2l6ZSp0KSk7aWYoQy5pc1VJV2ViVmlldygpKXt2YXIgbz1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSx0KX0oUS5hcnJheUZyb20odGhpcy50YXJnZXQuY2hpbGRyZW4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gUS5hcnJheUZyb20odC5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNsYXNzTGlzdC5jb250YWlucyhcInBhZ2VfX2NvbnRlbnRcIil9KX0pKSxyPW5ldyBNYXA7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe28uZm9yRWFjaChmdW5jdGlvbih0KXtyLnNldCh0LHQuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikpLHQuY2xhc3NMaXN0LmFkZChcInBhZ2VfX2NvbnRlbnQtLXN1cHByZXNzLWxheWVyLWNyZWF0aW9uXCIpfSkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLl9jaGFuZ2VUbyhpLG4pfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtvLmZvckVhY2goZnVuY3Rpb24odCl7dC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLHIuZ2V0KHQpKX0pLHJlcXVlc3RBbmltYXRpb25GcmFtZSh0KX0pfSl9cmV0dXJuIHRoaXMuX2NoYW5nZVRvKGksbil9fSx7a2V5OlwiZ2V0QWN0aXZlSW5kZXhcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLl9zY3JvbGw7dC09dGhpcy5fb2Zmc2V0O3ZhciBlPXRoaXMuaXRlbUNvdW50LG49dGhpcy5pdGVtTnVtU2l6ZTtpZigwPT09dGhpcy5pdGVtTnVtU2l6ZXx8IVEuaXNJbnRlZ2VyKHQpKXJldHVybiB0aGlzLl9sYXN0QWN0aXZlSW5kZXg7aWYodDw9MClyZXR1cm4gMDtmb3IodmFyIGk9MDtpPGU7aSsrKWlmKG4qaTw9dCYmbiooaSsxKT50KXJldHVybiBpO3JldHVybiBlLTF9fSx7a2V5Olwic2V0dXBSZXNpemVcIix2YWx1ZTpmdW5jdGlvbih0KXt3aW5kb3dbKHQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkV2ZW50TGlzdGVuZXJcIl0oXCJyZXNpemVcIix0aGlzLm9uUmVzaXplLCEwKX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuc2V0dXBSZXNpemUoITApLHRoaXMub25SZXNpemUoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIHQudGFyZ2V0JiZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpfSwxZTMvNjApfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2V0dXBSZXNpemUoITEpLHRoaXMudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIil9fSx7a2V5OlwidXBkYXRlU3dpcGVhYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYodGhpcy5fZ2VzdHVyZURldGVjdG9yKXt2YXIgZT10P1wib25cIjpcIm9mZlwiO3RoaXMuX2dlc3R1cmVEZXRlY3RvcltlXShcImRyYWdcIix0aGlzLm9uRHJhZyksdGhpcy5fZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZ3N0YXJ0XCIsdGhpcy5vbkRyYWdTdGFydCksdGhpcy5fZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZ2VuZFwiLHRoaXMub25EcmFnRW5kKX19fSx7a2V5OlwidXBkYXRlQXV0b1JlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9tdXRhdGlvbk9ic2VydmVyJiYodD90aGlzLl9tdXRhdGlvbk9ic2VydmVyLm9ic2VydmUodGhpcy50YXJnZXQse2NoaWxkTGlzdDohMH0pOnRoaXMuX211dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpKX19LHtrZXk6XCJ1cGRhdGVJdGVtU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuaXRlbVNpemU9dHx8XCIxMDAlXCIsdGhpcy5yZWZyZXNoKCl9fSx7a2V5OlwidG9nZ2xlQmxvY2tlclwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuYmxvY2tlci5zdHlsZS5wb2ludGVyRXZlbnRzPXQ/XCJhdXRvXCI6XCJub25lXCJ9fSx7a2V5OlwiX2NhbkNvbnN1bWVHZXN0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5kaXJlY3Rpb24sbj0wPT09dGhpcy5fc2Nyb2xsJiYhdGhpcy5pc092ZXJTY3JvbGxhYmxlKCksaT10aGlzLl9zY3JvbGw9PT10aGlzLm1heFNjcm9sbCYmIXRoaXMuaXNPdmVyU2Nyb2xsYWJsZSgpO3JldHVybiB0aGlzLmlzVmVydGljYWwoKT9cImRvd25cIj09PWUmJiFufHxcInVwXCI9PT1lJiYhaTpcInJpZ2h0XCI9PT1lJiYhbnx8XCJsZWZ0XCI9PT1lJiYhaX19LHtrZXk6XCJvbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodGhpcy5faWdub3JlRHJhZz10LmNvbnN1bWVkfHwhUS5pc1ZhbGlkR2VzdHVyZSh0KSwhdGhpcy5faWdub3JlRHJhZyl7dmFyIG49dC5jb25zdW1lO2lmKHQuY29uc3VtZT1mdW5jdGlvbigpe24mJm4oKSxlLl9pZ25vcmVEcmFnPSEwfSx0aGlzLl9jYW5Db25zdW1lR2VzdHVyZSh0Lmdlc3R1cmUpKXt2YXIgaT10Lmdlc3R1cmUuY2VudGVyJiZ0Lmdlc3R1cmUuY2VudGVyLmNsaWVudFh8fDAsbz10aGlzLmdldEJ1YmJsZVdpZHRoKCl8fDAscj1mdW5jdGlvbigpe24mJm4oKSx0LmNvbnN1bWVkPSEwLGUuX3N0YXJ0ZWQ9ITAsZS5zaG91bGRCbG9jayYmZS50b2dnbGVCbG9ja2VyKCEwKSxlLl9zZXRTd2lwaW5nKCEwKSxRLmlvc1ByZXZlbnRTY3JvbGwoZS5fZ2VzdHVyZURldGVjdG9yKX07aTxvfHxpPnRoaXMudGFyZ2V0U2l6ZS1vP3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiFlLl9pZ25vcmVEcmFnJiZyKCl9KTpyKCl9fX19LHtrZXk6XCJvbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt0Lmdlc3R1cmUmJiF0aGlzLl9pZ25vcmVEcmFnJiZ0aGlzLl9zdGFydGVkJiYodGhpcy5fY29udGludWVkPSEwLHQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsLXRoaXMuX2dldERlbHRhKHQpLHt0aHJvdHRsZTohMH0pKX19LHtrZXk6XCJvbkRyYWdFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9zdGFydGVkPSExLHQuZ2VzdHVyZSYmIXRoaXMuX2lnbm9yZURyYWcmJnRoaXMuX2NvbnRpbnVlZCl7dGhpcy5fY29udGludWVkPSExLHQuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGU9dGhpcy5fc2Nyb2xsLXRoaXMuX2dldERlbHRhKHQpLG49dGhpcy5fbm9ybWFsaXplU2Nyb2xsKGUpO2U9PT1uP3RoaXMuX3N0YXJ0TW9tZW50dW1TY3JvbGwoZSx0KTp0aGlzLl9raWxsT3ZlclNjcm9sbChuKSx0aGlzLnNob3VsZEJsb2NrJiZ0aGlzLnRvZ2dsZUJsb2NrZXIoITEpfWVsc2UgdGhpcy5faWdub3JlRHJhZz0hMH19LHtrZXk6XCJfc3RhcnRNb21lbnR1bVNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fZ2V0VmVsb2NpdHkoZSksaT1lLmdlc3R1cmUuaW50ZXJpbURpcmVjdGlvbj09PXRoaXMuZE0uZGlyW3RoaXMuX2dldERlbHRhKGUpPDA/MDoxXSxvPXRoaXMuX2dldEF1dG9TY3JvbGwodCxuLGkpLHI9TWF0aC5hYnMoby10KS8obisuMDEpLzFlMztyPU1hdGgubWluKC4yNSxNYXRoLm1heCguMSxyKSksdGhpcy5fY2hhbmdlVG8obyx7c3dpcGU6ITAsYW5pbWF0aW9uT3B0aW9uczp7ZHVyYXRpb246cix0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjQsIC43LCAuNSwgMSlcIn19KX19LHtrZXk6XCJfa2lsbE92ZXJTY3JvbGxcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3Njcm9sbD10O3ZhciBuPXRoaXMuZE0uZGlyW051bWJlcih0PjApXSxpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NoYW5nZVRvKHQse2FuaW1hdGlvbk9wdGlvbnM6e2R1cmF0aW9uOi40LHRpbWluZzpcImN1YmljLWJlemllciguMSwgLjQsIC4xLCAxKVwifX0pfTt0aGlzLm92ZXJTY3JvbGxIb29rKHtkaXJlY3Rpb246bixraWxsT3ZlclNjcm9sbDppfSl8fGkoKX19LHtrZXk6XCJfY2hhbmdlVG9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9e2FjdGl2ZUluZGV4OnRoaXMuZ2V0QWN0aXZlSW5kZXgodCksbGFzdEFjdGl2ZUluZGV4OnRoaXMuX2xhc3RBY3RpdmVJbmRleCxzd2lwZTpuLnN3aXBlfHwhMX0sbz1pLmFjdGl2ZUluZGV4IT09aS5sYXN0QWN0aXZlSW5kZXgscj0hIW8mJnRoaXMucHJlQ2hhbmdlSG9vayhpKTtyZXR1cm4gdGhpcy5fc2Nyb2xsPXI/dGhpcy5fb2Zmc2V0K2kubGFzdEFjdGl2ZUluZGV4KnRoaXMuaXRlbU51bVNpemU6dCx0aGlzLl9sYXN0QWN0aXZlSW5kZXg9cj9pLmxhc3RBY3RpdmVJbmRleDppLmFjdGl2ZUluZGV4LHRoaXMuX3Njcm9sbFRvKHRoaXMuX3Njcm9sbCxuKS50aGVuKGZ1bmN0aW9uKCl7aWYodCE9PWUuX3Njcm9sbHx8cil7aWYobi5yZWplY3QpcmV0dXJuIGUuX3NldFN3aXBpbmcoITEpLFByb21pc2UucmVqZWN0KFwiQ2FuY2VsZWRcIil9ZWxzZSBlLl9zZXRTd2lwaW5nKCExKSxvJiZlLnBvc3RDaGFuZ2VIb29rKGkpfSl9fSx7a2V5OlwiX3Njcm9sbFRvXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihuLnRocm90dGxlKXtpZih0PDApdD10aGlzLmlzT3ZlclNjcm9sbGFibGUoKT9NYXRoLnJvdW5kKC4zNSp0KTowO2Vsc2V7dmFyIGk9dGhpcy5tYXhTY3JvbGw7aTx0JiYodD10aGlzLmlzT3ZlclNjcm9sbGFibGUoKT9pK01hdGgucm91bmQoLjM1Kih0LWkpKTppKX19dmFyIG89XCJub25lXCI9PT1uLmFuaW1hdGlvbj97fTpuLmFuaW1hdGlvbk9wdGlvbnM7cmV0dXJuIHRoaXMuc2Nyb2xsSG9vayYmdGhpcy5pdGVtTnVtU2l6ZT4wJiZ0aGlzLnNjcm9sbEhvb2soKHQvdGhpcy5pdGVtTnVtU2l6ZSkudG9GaXhlZCgyKSxuLmFuaW1hdGlvbk9wdGlvbnN8fHt9KSxuZXcgUHJvbWlzZShmdW5jdGlvbihuKXtyZXR1cm4gbnQoZS50YXJnZXQpLnF1ZXVlKHt0cmFuc2Zvcm06ZS5fZ2V0VHJhbnNmb3JtKHQpfSxvKS5wbGF5KG4pfSl9fSx7a2V5OlwiX2dldEF1dG9TY3JvbGxcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcy5tYXhTY3JvbGwsbz10aGlzLl9vZmZzZXQscj10aGlzLml0ZW1OdW1TaXplO2lmKCF0aGlzLmlzQXV0b1Njcm9sbGFibGUoKSlyZXR1cm4gTWF0aC5tYXgoMCxNYXRoLm1pbihpLHQpKTtmb3IodmFyIGE9W10scz1vO3M8aTtzKz1yKWEucHVzaChzKTthLnB1c2goaSk7dmFyIGw9KGE9YS5zb3J0KGZ1bmN0aW9uKGUsbil7cmV0dXJuIE1hdGguYWJzKGUtdCktTWF0aC5hYnMobi10KX0pLmZpbHRlcihmdW5jdGlvbih0LGUpe3JldHVybiFlfHx0IT09YVtlLTFdfSkpWzBdLHU9dGhpcy5fbGFzdEFjdGl2ZUluZGV4KnIrbyxjPU1hdGguYWJzKHQtdSkvcjtyZXR1cm4gYzw9dGhpcy5nZXRBdXRvU2Nyb2xsUmF0aW8obixlLHIpP2w9dTpjPDEmJmFbMF09PT11JiZhLmxlbmd0aD4xJiYobD1hWzFdKSxNYXRoLm1heCgwLE1hdGgubWluKGksbCkpfX0se2tleTpcIl9yZXNldFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdGFyZ2V0U2l6ZT10aGlzLl9pdGVtTnVtU2l6ZT12b2lkIDB9fSx7a2V5OlwiX25vcm1hbGl6ZVNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLm1heChNYXRoLm1pbih0LHRoaXMubWF4U2Nyb2xsKSwwKX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXNldCgpLHRoaXMuX3VwZGF0ZUxheW91dCgpLFEuaXNJbnRlZ2VyKHRoaXMuX3Njcm9sbCkpe3ZhciB0PXRoaXMuX25vcm1hbGl6ZVNjcm9sbCh0aGlzLl9zY3JvbGwpO3QhPT10aGlzLl9zY3JvbGw/dGhpcy5fa2lsbE92ZXJTY3JvbGwodCk6dGhpcy5fY2hhbmdlVG8odCl9ZWxzZSB0aGlzLl9zZXR1cEluaXRpYWxJbmRleCgpO3RoaXMucmVmcmVzaEhvb2soKX19LHtrZXk6XCJfZ2V0RGVsdGFcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXN0dXJlW1wiZGVsdGFcIit0aGlzLmRNLmF4aXNdfX0se2tleTpcIl9nZXRWZWxvY2l0eVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lmdlc3R1cmVbXCJ2ZWxvY2l0eVwiK3RoaXMuZE0uYXhpc119fSx7a2V5OlwiX2dldFRyYW5zZm9ybVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVyblwidHJhbnNsYXRlM2QoXCIrdGhpcy5kTS50M2RbMF0rLXQrdGhpcy5kTS50M2RbMV0rXCIpXCJ9fSx7a2V5OlwiX3VwZGF0ZUxheW91dFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5kTT1vb1t0aGlzLmlzVmVydGljYWwoKT9cInZlcnRpY2FsXCI6XCJob3Jpem9udGFsXCJdLHRoaXMudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJvbnMtc3dpcGVyLXRhcmdldC0tdmVydGljYWxcIix0aGlzLmlzVmVydGljYWwoKSk7Zm9yKHZhciB0PXRoaXMudGFyZ2V0LmNoaWxkcmVuWzBdO3Q7dD10Lm5leHRFbGVtZW50U2libGluZyl0LnN0eWxlW3RoaXMuZE0uc2l6ZS50b0xvd2VyQ2FzZSgpXT10aGlzLml0ZW1TaXplO3RoaXMuaXNDZW50ZXJlZCgpJiYodGhpcy5fb2Zmc2V0PSh0aGlzLnRhcmdldFNpemUtdGhpcy5pdGVtTnVtU2l6ZSkvLTJ8fDApfX0se2tleTpcIml0ZW1Db3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRhcmdldC5jaGlsZHJlbi5sZW5ndGh9fSx7a2V5OlwiaXRlbU51bVNpemVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdGhpcy5faXRlbU51bVNpemUmJnRoaXMuX2l0ZW1OdW1TaXplPT10aGlzLl9pdGVtTnVtU2l6ZXx8KHRoaXMuX2l0ZW1OdW1TaXplPXRoaXMuX2NhbGN1bGF0ZUl0ZW1TaXplKCkpLHRoaXMuX2l0ZW1OdW1TaXplfX0se2tleTpcIm1heFNjcm9sbFwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuaXRlbUNvdW50KnRoaXMuaXRlbU51bVNpemUtdGhpcy50YXJnZXRTaXplO3JldHVybiBNYXRoLmNlaWwodDwwPzA6dCl9fSx7a2V5OlwidGFyZ2V0U2l6ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90YXJnZXRTaXplfHwodGhpcy5fdGFyZ2V0U2l6ZT10aGlzLnRhcmdldFtcIm9mZnNldFwiK3RoaXMuZE0uc2l6ZV0pLHRoaXMuX3RhcmdldFNpemV9fV0pLHR9KCksYW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5jaGlsZHJlblswXSYmXCJPTlMtQ0FST1VTRUwtSVRFTVwiIT09dGhpcy5jaGlsZHJlblswXS50YWdOYW1lJiZ0aGlzLmNoaWxkcmVuWzBdfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKCF0LnBhcmVudE5vZGUpe2Zvcig7dGhpcy5maXJzdENoaWxkOyl0LmFwcGVuZENoaWxkKHRoaXMuZmlyc3RDaGlsZCk7dGhpcy5hcHBlbmRDaGlsZCh0KX0hdGhpcy5jaGlsZHJlblsxXSYmdGhpcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSx0aGlzLmFwcGVuZENoaWxkPXRoaXMuYXBwZW5kQ2hpbGQuYmluZCh0KSx0aGlzLmluc2VydEJlZm9yZT10aGlzLmluc2VydEJlZm9yZS5iaW5kKHQpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3N3aXBlcnx8KHRoaXMuX3N3aXBlcj1uZXcgcm8oe2dldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdH0sZ2V0SW5pdGlhbEluZGV4OmZ1bmN0aW9uKCl7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwiaW5pdGlhbC1pbmRleFwiKX0sZ2V0QXV0b1Njcm9sbFJhdGlvOmZ1bmN0aW9uKCl7cmV0dXJuIHQuYXV0b1Njcm9sbFJhdGlvfSxpc1ZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIHQudmVydGljYWx9LGlzT3ZlclNjcm9sbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5vdmVyc2Nyb2xsYWJsZX0saXNDZW50ZXJlZDpmdW5jdGlvbigpe3JldHVybiB0LmNlbnRlcmVkfSxpc0F1dG9TY3JvbGxhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHQuYXV0b1Njcm9sbH0saXRlbVNpemU6dGhpcy5pdGVtU2l6ZSxvdmVyU2Nyb2xsSG9vazp0aGlzLl9vbk92ZXJTY3JvbGwuYmluZCh0aGlzKSxwcmVDaGFuZ2VIb29rOnRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcyxcInByZWNoYW5nZVwiKSxwb3N0Q2hhbmdlSG9vazp0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMsXCJwb3N0Y2hhbmdlXCIpLHJlZnJlc2hIb29rOnRoaXMuX29uUmVmcmVzaC5iaW5kKHRoaXMpLHNjcm9sbEhvb2s6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25Td2lwZSYmdC5fb25Td2lwZS5hcHBseSh0LGFyZ3VtZW50cyl9fSksbih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3N3aXBlci5pbml0KHtzd2lwZWFibGU6dC5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIiksYXV0b1JlZnJlc2g6dC5oYXNBdHRyaWJ1dGUoXCJhdXRvLXJlZnJlc2hcIil9KX0pKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyJiZ0aGlzLl9zd2lwZXIuaW5pdGlhbGl6ZWQmJih0aGlzLl9zd2lwZXIuZGlzcG9zZSgpLHRoaXMuX3N3aXBlcj1udWxsKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYodGhpcy5fc3dpcGVyKXN3aXRjaCh0KXtjYXNlXCJzd2lwZWFibGVcIjp0aGlzLl9zd2lwZXIudXBkYXRlU3dpcGVhYmxlKHRoaXMuaGFzQXR0cmlidXRlKFwic3dpcGVhYmxlXCIpKTticmVhaztjYXNlXCJhdXRvLXJlZnJlc2hcIjp0aGlzLl9zd2lwZXIudXBkYXRlQXV0b1JlZnJlc2godGhpcy5oYXNBdHRyaWJ1dGUoXCJhdXRvLXJlZnJlc2hcIikpO2JyZWFrO2Nhc2VcIml0ZW0taGVpZ2h0XCI6dGhpcy52ZXJ0aWNhbCYmdGhpcy5fc3dpcGVyLnVwZGF0ZUl0ZW1TaXplKHRoaXMuaXRlbVNpemUpO2JyZWFrO2Nhc2VcIml0ZW0td2lkdGhcIjp0aGlzLnZlcnRpY2FsfHx0aGlzLl9zd2lwZXIudXBkYXRlSXRlbVNpemUodGhpcy5pdGVtU2l6ZSk7YnJlYWs7Y2FzZVwiZGlyZWN0aW9uXCI6dGhpcy5fc3dpcGVyLnJlZnJlc2goKX19fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlci5zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlci5oaWRlKCl9fSx7a2V5OlwiX29uT3ZlclNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGlyZWN0aW9uLG49dC5raWxsT3ZlclNjcm9sbCxpPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcIm92ZXJzY3JvbGxcIix7Y2Fyb3VzZWw6dGhpcyxhY3RpdmVJbmRleDp0aGlzLmdldEFjdGl2ZUluZGV4KCksZGlyZWN0aW9uOmUsd2FpdFRvUmV0dXJuOmZ1bmN0aW9uKHQpe2k9ITAsdC50aGVuKG4pfX0pLGl9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmFjdGl2ZUluZGV4LGk9ZS5sYXN0QWN0aXZlSW5kZXg7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsdCx7Y2Fyb3VzZWw6dGhpcyxhY3RpdmVJbmRleDpuLGxhc3RBY3RpdmVJbmRleDppfSl9fSx7a2V5OlwiX29uUmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJyZWZyZXNoXCIse2Nhcm91c2VsOnRoaXN9KX19LHtrZXk6XCJzZXRBY3RpdmVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIG49Xyh7YW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpLGFuaW1hdGlvbk9wdGlvbnM6dGhpcy5oYXNBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKT9RLmFuaW1hdGlvbk9wdGlvbnNQYXJzZSh0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpKTp7ZHVyYXRpb246LjMsdGltaW5nOlwiY3ViaWMtYmV6aWVyKC40LCAuNywgLjUsIDEpXCJ9fSxuKSx0aGlzLl9zd2lwZXIuc2V0QWN0aXZlSW5kZXgodCxuKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmbi5jYWxsYmFjayhlKSxQcm9taXNlLnJlc29sdmUoZSl9KX19LHtrZXk6XCJnZXRBY3RpdmVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N3aXBlci5nZXRBY3RpdmVJbmRleCgpfX0se2tleTpcIm5leHRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJbmRleCh0aGlzLmdldEFjdGl2ZUluZGV4KCkrMSx0KX19LHtrZXk6XCJwcmV2XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuc2V0QWN0aXZlSW5kZXgodGhpcy5nZXRBY3RpdmVJbmRleCgpLTEsdCl9fSx7a2V5OlwiZmlyc3RcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJbmRleCgwLHQpfX0se2tleTpcImxhc3RcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnNldEFjdGl2ZUluZGV4KE1hdGgubWF4KHRoaXMuaXRlbUNvdW50LTEsMCksdCl9fSx7a2V5OlwicmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyLnJlZnJlc2goKX19LHtrZXk6XCJpdGVtQ291bnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3dpcGVyLml0ZW1Db3VudH19LHtrZXk6XCJzd2lwZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcInN3aXBlYWJsZVwiLHQpfX0se2tleTpcIm9uU3dpcGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Td2lwZX0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wib25Td2lwZVwiIG11c3QgYmUgYSBmdW5jdGlvbicpLHRoaXMuX29uU3dpcGU9dH19LHtrZXk6XCJhdXRvU2Nyb2xsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiYXV0by1zY3JvbGxcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImF1dG8tc2Nyb2xsXCIsdCl9fSx7a2V5OlwidmVydGljYWxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInZlcnRpY2FsXCI9PT10aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKX19LHtrZXk6XCJpdGVtU2l6ZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PSh0aGlzLmdldEF0dHJpYnV0ZShcIml0ZW0tXCIrKHRoaXMudmVydGljYWw/XCJoZWlnaHRcIjpcIndpZHRoXCIpKXx8XCJcIikudHJpbSgpO3JldHVybiB0Lm1hdGNoKC9eXFxkKyhweHwlKSQvKT90OlwiMTAwJVwifX0se2tleTpcImF1dG9TY3JvbGxSYXRpb1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUZsb2F0KHRoaXMuZ2V0QXR0cmlidXRlKFwiYXV0by1zY3JvbGwtcmF0aW9cIikpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJhdXRvLXNjcm9sbC1yYXRpb1wiLHQpfX0se2tleTpcImRpc2FibGVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9fSx7a2V5Olwib3ZlcnNjcm9sbGFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJvdmVyc2Nyb2xsYWJsZVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwib3ZlcnNjcm9sbGFibGVcIix0KX19LHtrZXk6XCJjZW50ZXJlZFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImNlbnRlcmVkXCIpfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJjZW50ZXJlZFwiLHQpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wic3dpcGVhYmxlXCIsXCJhdXRvLXJlZnJlc2hcIixcImRpcmVjdGlvblwiLFwiaXRlbS1oZWlnaHRcIixcIml0ZW0td2lkdGhcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicG9zdGNoYW5nZVwiLFwicmVmcmVzaFwiLFwib3ZlcnNjcm9sbFwiXX19XSksZX0oKTtjLkNhcm91c2VsPWFvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jYXJvdXNlbFwiLGFvKTt2YXIgc289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmdldEF0dHJpYnV0ZShcIndpZHRoXCIpJiZ0Ll91cGRhdGVXaWR0aCgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe1wid2lkdGhcIj09PXQmJnRoaXMuX3VwZGF0ZVdpZHRoKCl9fSx7a2V5OlwiX3VwZGF0ZVdpZHRoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpO3Q/KHQ9dC50cmltKCkubWF0Y2goL15cXGQrJC8pP3QrXCIlXCI6dCxkKHRoaXMse2ZsZXg6XCIwIDAgXCIrdCxtYXhXaWR0aDp0fSkpOmQuY2xlYXIodGhpcyxcImZsZXggbWF4V2lkdGhcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJ3aWR0aFwiXX19XSksZX0oKTtjLkNvbD1zbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtY29sXCIsc28pO3ZhciBsbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCksdW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2UtaW4tb3V0XCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsbG8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC02MCUsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApXCIsb3BhY2l0eToxfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTYwJSwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLGNvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlLWluLW91dFwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLmJvZHlIZWlnaHQ9ZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsbH1yZXR1cm4gYihlLGxvKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCBcIisodGhpcy5ib2R5SGVpZ2h0LzItMSkrXCJweCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCBcIisodGhpcy5ib2R5SGVpZ2h0LzItMSkrXCJweCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksaG89e1wiLmRpYWxvZ1wiOlwiZGlhbG9nLS0qXCIsXCIuZGlhbG9nLWNvbnRhaW5lclwiOlwiZGlhbG9nLWNvbnRhaW5lci0tKlwiLFwiLmRpYWxvZy1tYXNrXCI6XCJkaWFsb2ctbWFzay0tKlwifSxmbz17ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3VvOmNvfSxzbGlkZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYm9keUhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxsfXJldHVybiBiKGUsbG8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKygtdGhpcy5ib2R5SGVpZ2h0LzIrMS10Ll9kaWFsb2cuY2xpZW50SGVpZ2h0KStcInB4LCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKygtdGhpcy5ib2R5SGVpZ2h0LzIrMS10Ll9kaWFsb2cuY2xpZW50SGVpZ2h0KStcInB4LCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19XSksZX0oKSxub25lOmxvfSxwbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsTmkpLGcoZSxbe2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgTyh7YW5pbWF0b3JzOmZvLGJhc2VDbGFzczpsbyxiYXNlQ2xhc3NOYW1lOlwiRGlhbG9nQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5zdHlsZS56SW5kZXg9MTAwMDEsIXRoaXMuX2RpYWxvZyl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJkaWFsb2dcIik7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IoZS5jbGFzc0xpc3QuYWRkKFwiZGlhbG9nLWNvbnRhaW5lclwiKTt0aGlzLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTt0LmFwcGVuZENoaWxkKGUpLHRoaXMuYXBwZW5kQ2hpbGQodCl9aWYoIXRoaXMuX21hc2spe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwiZGlhbG9nLW1hc2tcIiksdGhpcy5pbnNlcnRCZWZvcmUobix0aGlzLmZpcnN0Q2hpbGQpfXRoaXMuX2RpYWxvZy5zdHlsZS56SW5kZXg9MjAwMDEsdGhpcy5fbWFzay5zdHlsZS56SW5kZXg9MmU0LHRoaXMuc2V0QXR0cmlidXRlKFwic3RhdHVzLWJhci1maWxsXCIsXCJcIiksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaG99fSx7a2V5OlwiX21hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5kaWFsb2ctbWFza1wiKX19LHtrZXk6XCJfZGlhbG9nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIuZGlhbG9nXCIpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBsb3x8US50aHJvd0FuaW1hdG9yKFwiRGlhbG9nXCIpLGZvW3RdPWV9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGZvfX0se2tleTpcIkRpYWxvZ0FuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGxvfX1dKSxlfSgpO2MuRGlhbG9nPXBvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1kaWFsb2dcIixwbyk7dmFyIGdvPVwiZmFiXCIsbW89e1wiXCI6XCJmYWItLSpcIixcIi5mYWJfX2ljb25cIjpcImZhYi0tKl9faWNvblwifSxfbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuaGlkZSgpLHQuY2xhc3NMaXN0LmFkZChnbyksbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLCFRLmZpbmRDaGlsZCh0aGlzLFwiLmZhYl9faWNvblwiKSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7dC5jbGFzc0xpc3QuYWRkKFwiZmFiX19pY29uXCIpLFEuYXJyYXlGcm9tKHRoaXMuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbihlKXtlLnRhZ05hbWUmJlwib25zLXJpcHBsZVwiPT09ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fHQuYXBwZW5kQ2hpbGQoZSl9KSx0aGlzLmFwcGVuZENoaWxkKHQpfXRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsbW8pLHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuc2hvdygpfSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsZ28sbW8pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxtbyk7YnJlYWs7Y2FzZVwicmlwcGxlXCI6dGhpcy5fdXBkYXRlUmlwcGxlKCk7YnJlYWs7Y2FzZVwicG9zaXRpb25cIjp0aGlzLl91cGRhdGVQb3NpdGlvbigpfX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaGlkZSgpfSl9fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7US51cGRhdGVSaXBwbGUodGhpcyl9fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3N3aXRjaCh0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJmYWItLXRvcF9fbGVmdFwiLFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIsXCJmYWItLWJvdHRvbV9fbGVmdFwiLFwiZmFiLS10b3BfX3JpZ2h0XCIsXCJmYWItLXRvcF9fY2VudGVyXCIsXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpLHQpe2Nhc2VcInRvcCByaWdodFwiOmNhc2VcInJpZ2h0IHRvcFwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19yaWdodFwiKTticmVhaztjYXNlXCJ0b3AgbGVmdFwiOmNhc2VcImxlZnQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2xlZnRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIHJpZ2h0XCI6Y2FzZVwicmlnaHQgYm90dG9tXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcImJvdHRvbSBsZWZ0XCI6Y2FzZVwibGVmdCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fbGVmdFwiKTticmVhaztjYXNlXCJjZW50ZXIgdG9wXCI6Y2FzZVwidG9wIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19jZW50ZXJcIik7YnJlYWs7Y2FzZVwiY2VudGVyIGJvdHRvbVwiOmNhc2VcImJvdHRvbSBjZW50ZXJcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpfX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZSghMCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50b2dnbGUoITEpfX0se2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiF0aGlzLnZpc2libGUsZT0odGhpcy5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKXx8XCJcIikuaW5kZXhPZihcImJvdHRvbVwiKT49MD9cInRyYW5zbGF0ZTNkKDBweCwgLVwiKyhRLmdsb2JhbHMuZmFiT2Zmc2V0fHwwKStcInB4LCAwcHgpXCI6XCJcIjtkKHRoaXMse3RyYW5zZm9ybTplK1wiIHNjYWxlKFwiK051bWJlcih0KStcIilcIn0pfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwidmlzaWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybi0xPT09dGhpcy5zdHlsZS50cmFuc2Zvcm0uaW5kZXhPZihcInNjYWxlKDApXCIpJiZcIm5vbmVcIiE9PXRoaXMuc3R5bGUuZGlzcGxheX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcInBvc2l0aW9uXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkZhYj1fbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtZmFiXCIsX28pO3ZhciB2bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodCx7cGFzc2l2ZTohMH0pLHR9cmV0dXJuIGIoZSxQaSksZX0oKTtjLkdlc3R1cmVEZXRlY3Rvcj12byxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtZ2VzdHVyZS1kZXRlY3RvclwiLHZvKTt2YXIgYm89XCJmYVwiLHlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3RoaXMuX2NsZWFuQ2xhc3NBdHRyaWJ1dGUoXCJpY29uXCI9PT10P2U6dGhpcy5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpLFwibW9kaWZpZXJcIj09PXQ/ZTp2b2lkIDApLHRoaXMuX3VwZGF0ZSgpfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5fdXBkYXRlKCl9fSx7a2V5OlwiX3VwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuX2J1aWxkQ2xhc3NBbmRTdHlsZSh0aGlzLl9wYXJzZUF0dHIoXCJpY29uXCIpLHRoaXMuX3BhcnNlQXR0cihcInNpemVcIikpLG49ZS5jbGFzc0xpc3QsaT1lLnN0eWxlO1EuZXh0ZW5kKHRoaXMuc3R5bGUsaSksbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNsYXNzTGlzdC5hZGQoZSl9KX19LHtrZXk6XCJfcGFyc2VBdHRyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnRoaXMuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIsbj0odGhpcy5nZXRBdHRyaWJ1dGUodCl8fHR8fFwiXCIpLnNwbGl0KC9cXHMqLFxccyovKSxpPW5bMF0sbz1uWzFdO3JldHVybiBvPShvfHxcIlwiKS5zcGxpdCgvXFxzKjpcXHMqLyksKGUmJlJlZ0V4cChcIihefFxcXFxzKylcIitvWzBdK1wiKCR8XFxcXHMrKVwiLFwiaVwiKS50ZXN0KGUpP29bMV06aSl8fFwiXCJ9fSx7a2V5OlwiX2NsZWFuQ2xhc3NBdHRyaWJ1dGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT10aGlzLl9wcmVmaXhJY29uKHRoaXMuX3BhcnNlQXR0cih0LGUpKSxvPWkuY2xhc3NOYW1lLHI9aS5wcmVmaXgsYT1vIT09cj9cInxcIityK1wiJHxcIityK1wiLVwiOlwifFwiK28rXCIkXCJ8fFwiXCIscz1uZXcgUmVnRXhwKFwiXihmYSR8ZmEtfGlvbi18em1kaSR8em1kaS18b25zLWljb24tLVwiK2ErXCIpXCIpO1EuYXJyYXlGcm9tKHRoaXMuY2xhc3NMaXN0KS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHMudGVzdCh0KX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG4uY2xhc3NMaXN0LnJlbW92ZSh0KX0pfX0se2tleTpcIl9wcmVmaXhJY29uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9Ym8rKGJvP1wiLVwiOlwiXCIpK3Q7cmV0dXJue2NsYXNzTmFtZTplLHByZWZpeDplLnNwbGl0KFwiLVwiKVswXX19fSx7a2V5OlwiX2J1aWxkQ2xhc3NBbmRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49W1wib25zLWljb25cIl0saT17fTtpZigwPT09dC5pbmRleE9mKFwiaW9uLVwiKSluLnB1c2godCksbi5wdXNoKFwib25zLWljb24tLWlvblwiKTtlbHNlIGlmKDA9PT10LmluZGV4T2YoXCJmYS1cIikpbi5wdXNoKHQpLG4ucHVzaChcImZhXCIpO2Vsc2UgaWYoMD09PXQuaW5kZXhPZihcIm1kLVwiKSluLnB1c2goXCJ6bWRpXCIpLG4ucHVzaChcInptZGktXCIrdC5zcGxpdCgvLSguKyk/LylbMV0pO2Vsc2V7dmFyIG89dGhpcy5fcHJlZml4SWNvbih0KSxyPW8uY2xhc3NOYW1lLGE9by5wcmVmaXg7YSYmbi5wdXNoKGEpLHImJm4ucHVzaChyKX1yZXR1cm4gZS5tYXRjaCgvXlsxLTVdeHxsZyQvKT8obi5wdXNoKFwib25zLWljb24tLVwiK2UpLHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJmb250LXNpemVcIikpOmkuZm9udFNpemU9ZSx7Y2xhc3NMaXN0Om4sc3R5bGU6aX19fV0sW3trZXk6XCJzZXRBdXRvUHJlZml4XCIsdmFsdWU6ZnVuY3Rpb24odCl7Ym89dD9cInN0cmluZ1wiPT10eXBlb2YgdCYmdHx8XCJmYVwiOlwiXCJ9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiaWNvblwiLFwic2l6ZVwiLFwibW9kaWZpZXJcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuSWNvbj15byxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtaWNvblwiLHlvKTt2YXIga289ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3AodGhpcyx0KSxcIm9iamVjdFwiPT09KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpmKGUpKSYmbnVsbCE9PWV8fFEudGhyb3coJ1wiZGVsZWdhdGVcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBvYmplY3QnKSx0aGlzLl91c2VyRGVsZWdhdGU9ZSxuIGluc3RhbmNlb2YgRWxlbWVudHx8bnVsbD09PW58fFEudGhyb3coJ1widGVtcGxhdGVFbGVtZW50XCIgcGFyYW1ldGVyIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRWxlbWVudCBvciBudWxsJyksdGhpcy5fdGVtcGxhdGVFbGVtZW50PW59cmV0dXJuIGcodCxbe2tleTpcImhhc1JlbmRlckZ1bmN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdXNlckRlbGVnYXRlLl9yZW5kZXIgaW5zdGFuY2VvZiBGdW5jdGlvbn19LHtrZXk6XCJfcmVuZGVyXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91c2VyRGVsZWdhdGUuX3JlbmRlci5hcHBseSh0aGlzLl91c2VyRGVsZWdhdGUsYXJndW1lbnRzKX19LHtrZXk6XCJsb2FkSXRlbUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKHRoaXMuX3VzZXJEZWxlZ2F0ZS5sb2FkSXRlbUVsZW1lbnQgaW5zdGFuY2VvZiBGdW5jdGlvbil0aGlzLl91c2VyRGVsZWdhdGUubG9hZEl0ZW1FbGVtZW50KHQsZSk7ZWxzZXt2YXIgbj10aGlzLl91c2VyRGVsZWdhdGUuY3JlYXRlSXRlbUNvbnRlbnQodCx0aGlzLl90ZW1wbGF0ZUVsZW1lbnQpO24gaW5zdGFuY2VvZiBFbGVtZW50fHxRLnRocm93KCdcImNyZWF0ZUl0ZW1Db250ZW50XCIgbXVzdCByZXR1cm4gYW4gaW5zdGFuY2Ugb2YgRWxlbWVudCcpLGUoe2VsZW1lbnQ6bn0pfX19LHtrZXk6XCJjb3VudEl0ZW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl91c2VyRGVsZWdhdGUuY291bnRJdGVtcygpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiB0JiZRLnRocm93KCdcImNvdW50SXRlbXNcIiBtdXN0IHJldHVybiBhIG51bWJlcicpLHR9fSx7a2V5OlwidXBkYXRlSXRlbVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fdXNlckRlbGVnYXRlLnVwZGF0ZUl0ZW1Db250ZW50IGluc3RhbmNlb2YgRnVuY3Rpb24mJnRoaXMuX3VzZXJEZWxlZ2F0ZS51cGRhdGVJdGVtQ29udGVudCh0LGUpfX0se2tleTpcImNhbGN1bGF0ZUl0ZW1IZWlnaHRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl91c2VyRGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXt2YXIgZT10aGlzLl91c2VyRGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCh0KTtyZXR1cm5cIm51bWJlclwiIT10eXBlb2YgZSYmUS50aHJvdygnXCJjYWxjdWxhdGVJdGVtSGVpZ2h0XCIgbXVzdCByZXR1cm4gYSBudW1iZXInKSxlfXJldHVybiAwfX0se2tleTpcImRlc3Ryb3lJdGVtXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveUl0ZW0gaW5zdGFuY2VvZiBGdW5jdGlvbiYmdGhpcy5fdXNlckRlbGVnYXRlLmRlc3Ryb3lJdGVtKHQsZSl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdXNlckRlbGVnYXRlLmRlc3Ryb3kgaW5zdGFuY2VvZiBGdW5jdGlvbiYmdGhpcy5fdXNlckRlbGVnYXRlLmRlc3Ryb3koKSx0aGlzLl91c2VyRGVsZWdhdGU9dGhpcy5fdGVtcGxhdGVFbGVtZW50PW51bGx9fSx7a2V5OlwiaXRlbUhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyRGVsZWdhdGUuaXRlbUhlaWdodH19XSksdH0oKSx3bz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksbiBpbnN0YW5jZW9mIGtvfHxRLnRocm93KCdcImRlbGVnYXRlXCIgcGFyYW1ldGVyIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgTGF6eVJlcGVhdERlbGVnYXRlJyksdGhpcy5fd3JhcHBlckVsZW1lbnQ9ZSx0aGlzLl9kZWxlZ2F0ZT1uLHRoaXMuX2luc2VydEluZGV4PXRoaXMuX3dyYXBwZXJFbGVtZW50LmNoaWxkcmVuWzBdJiZcIk9OUy1MQVpZLVJFUEVBVFwiPT09dGhpcy5fd3JhcHBlckVsZW1lbnQuY2hpbGRyZW5bMF0udGFnTmFtZT8xOjAsXCJvbnMtbGlzdFwiPT09ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJmUuY2xhc3NMaXN0LmFkZChcImxhenktbGlzdFwiKSx0aGlzLl9wYWdlQ29udGVudD10aGlzLl9maW5kUGFnZUNvbnRlbnRFbGVtZW50KGUpLHRoaXMuX3BhZ2VDb250ZW50fHxRLnRocm93KFwiTGF6eVJlcGVhdCBtdXN0IGJlIGRlc2NlbmRhbnQgb2YgYSBQYWdlIGVsZW1lbnRcIiksdGhpcy5sYXN0U2Nyb2xsVG9wPXRoaXMuX3BhZ2VDb250ZW50LnNjcm9sbFRvcCx0aGlzLnBhZGRpbmc9MCx0aGlzLl90b3BQb3NpdGlvbnM9WzBdLHRoaXMuX3JlbmRlcmVkSXRlbXM9e30sdGhpcy5fZGVsZWdhdGUuaXRlbUhlaWdodHx8dGhpcy5fZGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCgwKXx8KHRoaXMuX3Vua25vd25JdGVtSGVpZ2h0PSEwKSx0aGlzLl9hZGRFdmVudExpc3RlbmVycygpLHRoaXMuX29uQ2hhbmdlKCl9cmV0dXJuIGcodCxbe2tleTpcIl9maW5kUGFnZUNvbnRlbnRFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9US5maW5kUGFyZW50KHQsXCIucGFnZV9fY29udGVudFwiKTtpZihlKXJldHVybiBlO3ZhciBuPVEuZmluZFBhcmVudCh0LFwib25zLXBhZ2VcIik7aWYobil7dmFyIGk9US5maW5kQ2hpbGQobixcIi5jb250ZW50XCIpO2lmKGkpcmV0dXJuIGl9cmV0dXJuIG51bGx9fSx7a2V5OlwiX2NoZWNrSXRlbUhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fZGVsZWdhdGUubG9hZEl0ZW1FbGVtZW50KDAsZnVuY3Rpb24obil7ZS5fdW5rbm93bkl0ZW1IZWlnaHR8fFEudGhyb3coXCJJbnZhbGlkIHN0YXRlXCIpLGUuX3dyYXBwZXJFbGVtZW50LmFwcGVuZENoaWxkKG4uZWxlbWVudCk7dmFyIGk9ZnVuY3Rpb24oKXtlLl9kZWxlZ2F0ZS5kZXN0cm95SXRlbSgwLG4pLG4uZWxlbWVudCYmbi5lbGVtZW50LnJlbW92ZSgpLGRlbGV0ZSBlLl91bmtub3duSXRlbUhlaWdodCx0KCl9O2UuX2l0ZW1IZWlnaHQ9bi5lbGVtZW50Lm9mZnNldEhlaWdodCxlLl9pdGVtSGVpZ2h0PjA/aSgpOihlLl93cmFwcGVyRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsbi5lbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtlLl9pdGVtSGVpZ2h0PW4uZWxlbWVudC5vZmZzZXRIZWlnaHQsMD09ZS5faXRlbUhlaWdodCYmUS50aHJvdygnSW52YWxpZCBzdGF0ZTogXCJpdGVtSGVpZ2h0XCIgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybycpLGUuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJcIixpKCl9KSl9KX19LHtrZXk6XCJfY291bnRJdGVtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLmNvdW50SXRlbXMoKX19LHtrZXk6XCJfZ2V0SXRlbUhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9yZW5kZXJlZEl0ZW1zLmhhc093blByb3BlcnR5KHQpPyh0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmhhc093blByb3BlcnR5KFwiaGVpZ2h0XCIpfHwodGhpcy5fcmVuZGVyZWRJdGVtc1t0XS5oZWlnaHQ9dGhpcy5fcmVuZGVyZWRJdGVtc1t0XS5lbGVtZW50Lm9mZnNldEhlaWdodCksdGhpcy5fcmVuZGVyZWRJdGVtc1t0XS5oZWlnaHQpOnRoaXMuX3RvcFBvc2l0aW9uc1t0KzFdJiZ0aGlzLl90b3BQb3NpdGlvbnNbdF0/dGhpcy5fdG9wUG9zaXRpb25zW3QrMV0tdGhpcy5fdG9wUG9zaXRpb25zW3RdOnRoaXMuc3RhdGljSXRlbUhlaWdodHx8dGhpcy5fZGVsZWdhdGUuY2FsY3VsYXRlSXRlbUhlaWdodCh0KX19LHtrZXk6XCJfY2FsY3VsYXRlUmVuZGVyZWRIZWlnaHRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpLnJlZHVjZShmdW5jdGlvbihlLG4pe3JldHVybiBlK3QuX2dldEl0ZW1IZWlnaHQoK24pfSwwKX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcigpfX0se2tleTpcIl9sYXN0SXRlbVJlbmRlcmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXguYXBwbHkoTWF0aCx3KE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpKSl9fSx7a2V5OlwiX2ZpcnN0SXRlbVJlbmRlcmVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5taW4uYXBwbHkoTWF0aCx3KE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpKSl9fSx7a2V5OlwicmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9e2ZvcmNlU2Nyb2xsRG93bjohMH0sZT1NYXRoLm1pbih0aGlzLl9sYXN0SXRlbVJlbmRlcmVkKCksdGhpcy5fY291bnRJdGVtcygpLTEpLG49dGhpcy5fZmlyc3RJdGVtUmVuZGVyZWQoKTtRLmlzSW50ZWdlcihlKSYmKHQuZm9yY2VMYXN0SW5kZXg9ZSksUS5pc0ludGVnZXIobikmJih0aGlzLl93cmFwcGVyRWxlbWVudC5zdHlsZS5oZWlnaHQ9dGhpcy5fdG9wUG9zaXRpb25zW25dK3RoaXMuX2NhbGN1bGF0ZVJlbmRlcmVkSGVpZ2h0KCkrXCJweFwiLHRoaXMucGFkZGluZz10aGlzLl90b3BQb3NpdGlvbnNbbl0sdC5mb3JjZUZpcnN0SW5kZXg9biksdGhpcy5fcmVtb3ZlQWxsRWxlbWVudHMoKSx0aGlzLl9yZW5kZXIodCksdGhpcy5fd3JhcHBlckVsZW1lbnQuc3R5bGUuaGVpZ2h0PVwiaW5oZXJpdFwifX0se2tleTpcIl9yZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1lLmZvcmNlU2Nyb2xsRG93bixpPXZvaWQgMCE9PW4mJm4sbz1lLmZvcmNlRmlyc3RJbmRleCxyPWUuZm9yY2VMYXN0SW5kZXg7aWYodGhpcy5fdW5rbm93bkl0ZW1IZWlnaHQpcmV0dXJuIHRoaXMuX2NoZWNrSXRlbUhlaWdodCh0aGlzLl9yZW5kZXIuYmluZCh0aGlzLGFyZ3VtZW50c1swXSkpO3ZhciBhPSFpJiZ0aGlzLmxhc3RTY3JvbGxUb3A+dGhpcy5fcGFnZUNvbnRlbnQuc2Nyb2xsVG9wO3RoaXMubGFzdFNjcm9sbFRvcD10aGlzLl9wYWdlQ29udGVudC5zY3JvbGxUb3A7Zm9yKHZhciBzPXt9LGw9dGhpcy5fd3JhcHBlckVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLHU9NCp3aW5kb3cuaW5uZXJIZWlnaHQtbCxjPXRoaXMuX2NvdW50SXRlbXMoKSxoPW98fE1hdGgubWF4KDAsdGhpcy5fY2FsY3VsYXRlU3RhcnRJbmRleChsKS0zMCksZD1oLGY9dGhpcy5fdG9wUG9zaXRpb25zW2RdO2Q8YyYmZjx1O2QrKylkPj10aGlzLl90b3BQb3NpdGlvbnMubGVuZ3RoJiYodGhpcy5fdG9wUG9zaXRpb25zLmxlbmd0aCs9MTAwKSx0aGlzLl90b3BQb3NpdGlvbnNbZF09ZixmKz10aGlzLl9nZXRJdGVtSGVpZ2h0KGQpO2lmKHRoaXMuX2RlbGVnYXRlLmhhc1JlbmRlckZ1bmN0aW9uJiZ0aGlzLl9kZWxlZ2F0ZS5oYXNSZW5kZXJGdW5jdGlvbigpKXJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fcmVuZGVyKGgsZCxmdW5jdGlvbigpe3QucGFkZGluZz10Ll90b3BQb3NpdGlvbnNbaF19KTtpZihhKWZvcih2YXIgcD1kLTE7cD49aDtwLS0pc1twXT0hMCx0aGlzLl9yZW5kZXJFbGVtZW50KHAsYSk7ZWxzZSBmb3IodmFyIGc9cnx8TWF0aC5tYXguYXBwbHkoTWF0aCxbZC0xXS5jb25jYXQodyhPYmplY3Qua2V5cyh0aGlzLl9yZW5kZXJlZEl0ZW1zKSkpKSxtPWg7bTw9ZzttKyspc1ttXT0hMCx0aGlzLl9yZW5kZXJFbGVtZW50KG0sYSk7T2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gc1tlXXx8dC5fcmVtb3ZlRWxlbWVudChlLGEpfSl9fSx7a2V5OlwiX3JlbmRlckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT10aGlzLl9yZW5kZXJlZEl0ZW1zW3RdO2k/dGhpcy5fZGVsZWdhdGUudXBkYXRlSXRlbSh0LGkpOnRoaXMuX2RlbGVnYXRlLmxvYWRJdGVtRWxlbWVudCh0LGZ1bmN0aW9uKGkpe2U/KG4uX3dyYXBwZXJFbGVtZW50Lmluc2VydEJlZm9yZShpLmVsZW1lbnQsbi5fd3JhcHBlckVsZW1lbnQuY2hpbGRyZW5bbi5faW5zZXJ0SW5kZXhdKSxuLnBhZGRpbmc9bi5fdG9wUG9zaXRpb25zW3RdLGkuaGVpZ2h0PW4uX3RvcFBvc2l0aW9uc1t0KzFdLW4uX3RvcFBvc2l0aW9uc1t0XSk6bi5fd3JhcHBlckVsZW1lbnQuYXBwZW5kQ2hpbGQoaS5lbGVtZW50KSxuLl9yZW5kZXJlZEl0ZW1zW3RdPWl9KX19LHtrZXk6XCJfcmVtb3ZlRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSEoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0pfHxhcmd1bWVudHNbMV07dD0rdDt2YXIgbj10aGlzLl9yZW5kZXJlZEl0ZW1zW3RdO3RoaXMuX2RlbGVnYXRlLmRlc3Ryb3lJdGVtKHQsbiksZT90aGlzLl90b3BQb3NpdGlvbnNbdCsxXT12b2lkIDA6dGhpcy5wYWRkaW5nPXRoaXMucGFkZGluZyt0aGlzLl9nZXRJdGVtSGVpZ2h0KHQpLG4uZWxlbWVudC5wYXJlbnRFbGVtZW50JiZuLmVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChuLmVsZW1lbnQpLGRlbGV0ZSB0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdfX0se2tleTpcIl9yZW1vdmVBbGxFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztPYmplY3Qua2V5cyh0aGlzLl9yZW5kZXJlZEl0ZW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZW1vdmVFbGVtZW50KGUpfSl9fSx7a2V5OlwiX3JlY2FsY3VsYXRlVG9wUG9zaXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49dDtuPD1lO24rKyl0aGlzLl90b3BQb3NpdGlvbnNbbisxXT10aGlzLl90b3BQb3NpdGlvbnNbbl0rdGhpcy5fZ2V0SXRlbUhlaWdodChuKX19LHtrZXk6XCJfY2FsY3VsYXRlU3RhcnRJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ZpcnN0SXRlbVJlbmRlcmVkKCksbj10aGlzLl9sYXN0SXRlbVJlbmRlcmVkKCk7dGhpcy5fcmVjYWxjdWxhdGVUb3BQb3NpdGlvbnMoZSxuKTtmb3IodmFyIGk9MCxvPXRoaXMuX2NvdW50SXRlbXMoKS0xOzspe3ZhciByPU1hdGguZmxvb3IoKGkrbykvMiksYT10K3RoaXMuX3RvcFBvc2l0aW9uc1tyXTtpZihvPGkpcmV0dXJuIDA7aWYoYTw9MCYmYSt0aGlzLl9nZXRJdGVtSGVpZ2h0KHIpPjApcmV0dXJuIHI7aXNOYU4oYSl8fGE+PTA/bz1yLTE6aT1yKzF9fX0se2tleTpcIl9kZWJvdW5jZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT12b2lkIDA7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG89dGhpcyxyPWFyZ3VtZW50cyxhPW4mJiFpO2NsZWFyVGltZW91dChpKSxhP3QuYXBwbHkodGhpcyxhcmd1bWVudHMpOmk9c2V0VGltZW91dChmdW5jdGlvbigpe2k9bnVsbCx0LmFwcGx5KG8scil9LGUpfX19LHtrZXk6XCJfZG91YmxlRmlyZU9uVG91Y2hlbmRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcigpLHRoaXMuX2RlYm91bmNlKHRoaXMuX3JlbmRlci5iaW5kKHRoaXMpLDEwMCl9fSx7a2V5OlwiX2FkZEV2ZW50TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLmJpbmRMaXN0ZW5lcnModGhpcyxbXCJfb25DaGFuZ2VcIixcIl9kb3VibGVGaXJlT25Ub3VjaGVuZFwiXSksQy5pc0lPUygpJiYodGhpcy5fYm91bmRPbkNoYW5nZT10aGlzLl9kZWJvdW5jZSh0aGlzLl9ib3VuZE9uQ2hhbmdlLDMwKSksdGhpcy5fcGFnZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApLEMuaXNJT1MoKSYmKFEuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9wYWdlQ29udGVudCxcInRvdWNobW92ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2Use2NhcHR1cmU6ITAscGFzc2l2ZTohMH0pLHRoaXMuX3BhZ2VDb250ZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMuX2JvdW5kRG91YmxlRmlyZU9uVG91Y2hlbmQsITApKSx3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApfX0se2tleTpcIl9yZW1vdmVFdmVudExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcGFnZUNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApLEMuaXNJT1MoKSYmKFEucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9wYWdlQ29udGVudCxcInRvdWNobW92ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2Use2NhcHR1cmU6ITAscGFzc2l2ZTohMH0pLHRoaXMuX3BhZ2VDb250ZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMuX2JvdW5kRG91YmxlRmlyZU9uVG91Y2hlbmQsITApKSx3aW5kb3cuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuX2JvdW5kT25DaGFuZ2UsITApfX0se2tleTpcImRlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUFsbEVsZW1lbnRzKCksdGhpcy5fZGVsZWdhdGUuZGVzdHJveSgpLHRoaXMuX3BhcmVudEVsZW1lbnQ9dGhpcy5fZGVsZWdhdGU9dGhpcy5fcmVuZGVyZWRJdGVtcz1udWxsLHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCl9fSx7a2V5OlwicGFkZGluZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLl93cmFwcGVyRWxlbWVudC5zdHlsZS5wYWRkaW5nVG9wLDEwKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3A9dCtcInB4XCJ9fSx7a2V5Olwic3RhdGljSXRlbUhlaWdodFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWxlZ2F0ZS5pdGVtSGVpZ2h0fHx0aGlzLl9pdGVtSGVpZ2h0fX1dKSx0fSgpLEVvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNBdHRyaWJ1dGUoXCJkZWxlZ2F0ZVwiKSYmKHRoaXMuZGVsZWdhdGU9d2luZG93W3RoaXMuZ2V0QXR0cmlidXRlKFwiZGVsZWdhdGVcIildKX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXImJnRoaXMuX2xhenlSZXBlYXRQcm92aWRlci5yZWZyZXNoKCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyJiYodGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyLmRlc3Ryb3koKSx0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXI9bnVsbCl9fSx7a2V5OlwiZGVsZWdhdGVcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyJiZ0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXIuZGVzdHJveSgpLCF0aGlzLl90ZW1wbGF0ZUVsZW1lbnQmJnRoaXMuY2hpbGRyZW5bMF0mJih0aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9dGhpcy5yZW1vdmVDaGlsZCh0aGlzLmNoaWxkcmVuWzBdKSk7dmFyIGU9bmV3IGtvKHQsdGhpcy5fdGVtcGxhdGVFbGVtZW50fHxudWxsKTt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXI9bmV3IHdvKHRoaXMucGFyZW50RWxlbWVudCxlKX0sZ2V0OmZ1bmN0aW9uKCl7US50aHJvdyhcIk5vIGRlbGVnYXRlIGdldHRlclwiKX19XSksZX0oKTtQLkxhenlSZXBlYXREZWxlZ2F0ZT1rbyxQLkxhenlSZXBlYXRQcm92aWRlcj13byxjLkxhenlSZXBlYXQ9RW8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxhenktcmVwZWF0XCIsRW8pO3ZhciBDbz17XCJcIjpcImxpc3QtaGVhZGVyLS0qXCJ9LEFvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWhlYWRlclwiKSxCLmluaXRNb2RpZmllcih0aGlzLENvKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImxpc3QtaGVhZGVyXCIsQ28pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxDbyl9fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuTGlzdEhlYWRlcj1BbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbGlzdC1oZWFkZXJcIixBbyk7dmFyIFNvPXtcIlwiOlwibGlzdC10aXRsZS0tKlwifSxQbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2NvbXBpbGUoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdC10aXRsZVwiKSxCLmluaXRNb2RpZmllcih0aGlzLFNvKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImxpc3QtdGl0bGVcIixTbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFNvKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5MaXN0VGl0bGU9UG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxpc3QtdGl0bGVcIixQbyk7dmFyIE9vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd0V4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVFeHBhbnNpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSx4bz17XCIubGlzdC1pdGVtXCI6XCJsaXN0LWl0ZW0tLSpcIixcIi5saXN0LWl0ZW1fX2xlZnRcIjpcImxpc3QtaXRlbS0tKl9fbGVmdFwiLFwiLmxpc3QtaXRlbV9fY2VudGVyXCI6XCJsaXN0LWl0ZW0tLSpfX2NlbnRlclwiLFwiLmxpc3QtaXRlbV9fcmlnaHRcIjpcImxpc3QtaXRlbS0tKl9fcmlnaHRcIixcIi5saXN0LWl0ZW1fX2xhYmVsXCI6XCJsaXN0LWl0ZW0tLSpfX2xhYmVsXCIsXCIubGlzdC1pdGVtX190aXRsZVwiOlwibGlzdC1pdGVtLS0qX190aXRsZVwiLFwiLmxpc3QtaXRlbV9fc3VidGl0bGVcIjpcImxpc3QtaXRlbS0tKl9fc3VidGl0bGVcIixcIi5saXN0LWl0ZW1fX3RodW1ibmFpbFwiOlwibGlzdC1pdGVtLS0qX190aHVtYm5haWxcIixcIi5saXN0LWl0ZW1fX2ljb25cIjpcImxpc3QtaXRlbS0tKl9faWNvblwifSxUbz17ZGVmYXVsdDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxPbyksZyhlLFt7a2V5Olwic2hvd0V4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUV4cGFuc2lvbih0LCEwLGUpfX0se2tleTpcImhpZGVFeHBhbnNpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2FuaW1hdGVFeHBhbnNpb24odCwhMSxlKX19LHtrZXk6XCJfYW5pbWF0ZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxvPXQuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0LHI9dC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5kaXNwbGF5O3QuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0PVwiYXV0b1wiLHQuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCI7dmFyIGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUodC5leHBhbmRhYmxlQ29udGVudCkscz1be2hlaWdodDowLHBhZGRpbmdUb3A6MCxwYWRkaW5nQm90dG9tOjB9LHtoZWlnaHQ6YS5oZWlnaHQscGFkZGluZ1RvcDphLnBhZGRpbmdUb3AscGFkZGluZ0JvdHRvbTphLnBhZGRpbmdCb3R0b219XSxsPVt7dHJhbnNmb3JtOlwicm90YXRlKDQ1ZGVnKVwifSx7dHJhbnNmb3JtOlwicm90YXRlKDIyNWRlZylcIn1dO2lmKHQuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuaGVpZ2h0PW8sKGk9bnQodC5leHBhbmRhYmxlQ29udGVudCx7ZHVyYXRpb246dGhpcy5kdXJhdGlvbixwcm9wZXJ0eTpcImhlaWdodCBwYWRkaW5nLXRvcCBwYWRkaW5nLWJvdHRvbVwifSkpLmRlZmF1bHQuYXBwbHkoaSx3KGU/czpzLnJldmVyc2UoKSkpLnBsYXkoZnVuY3Rpb24oKXt0LmV4cGFuZGFibGVDb250ZW50LnN0eWxlLmRpc3BsYXk9cixuJiZuKCl9KSx0LmV4cGFuZENoZXZyb24pe3ZhciB1Oyh1PW50KHQuZXhwYW5kQ2hldnJvbix7ZHVyYXRpb246dGhpcy5kdXJhdGlvbixwcm9wZXJ0eTpcInRyYW5zZm9ybVwifSkpLmRlZmF1bHQuYXBwbHkodSx3KGU/bDpsLnJldmVyc2UoKSkpLnBsYXkoKX19fV0pLGV9KCksbm9uZTpPb30sTG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3QuX2FuaW1hdG9yRmFjdG9yeT10Ll91cGRhdGVBbmltYXRvckZhY3RvcnkoKSx0LnRvZ2dsZUV4cGFuc2lvbj10LnRvZ2dsZUV4cGFuc2lvbi5iaW5kKHQpO3ZhciBpPS9eb25zLSg/IWNvbCR8cm93JHxpZiQpL2k7cmV0dXJuIHQuX3Nob3VsZElnbm9yZVRhcD1mdW5jdGlvbih0KXtyZXR1cm4gdC5oYXNBdHRyaWJ1dGUoXCJwcmV2ZW50LXRhcFwiKXx8aS50ZXN0KHQudGFnTmFtZSl9LHQuc2hvdz10LnNob3dFeHBhbnNpb24sdC5oaWRlPXQuaGlkZUV4cGFuc2lvbixuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtXCIpLHRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSYmdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtLS1leHBhbmRhYmxlXCIpO2Zvcih2YXIgdD12b2lkIDAsZT12b2lkIDAsbj12b2lkIDAsaT12b2lkIDAsbz12b2lkIDAscj1RLmdldEFsbENoaWxkTm9kZXModGhpcyksYT0wO2E8ci5sZW5ndGg7YSsrKXt2YXIgcz1yW2FdO3MuY2xhc3NMaXN0LmNvbnRhaW5zKFwibGVmdFwiKT8ocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19sZWZ0XCIpLHQ9cyk6cy5jbGFzc0xpc3QuY29udGFpbnMoXCJjZW50ZXJcIik/ZT1zOnMuY2xhc3NMaXN0LmNvbnRhaW5zKFwicmlnaHRcIik/KHMuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fcmlnaHRcIiksbj1zKTpzLmNsYXNzTGlzdC5jb250YWlucyhcInRvcFwiKT8ocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX190b3BcIiksaT1zKTpzLmNsYXNzTGlzdC5jb250YWlucyhcImV4cGFuZGFibGUtY29udGVudFwiKSYmKHMuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fZXhwYW5kYWJsZS1jb250ZW50XCIpLG89cyl9aWYoIW4mJnRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSl7KG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fcmlnaHRcIixcInJpZ2h0XCIpO3ZhciBsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2wuY2xhc3NMaXN0LmFkZChcImxpc3QtaXRlbV9fZXhwYW5kLWNoZXZyb25cIiksbi5hcHBlbmRDaGlsZChsKX1pZighZSl7aWYoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHR8fG58fG8pZm9yKHZhciB1PXRoaXMuY2hpbGROb2Rlcy5sZW5ndGgtMTt1Pj0wO3UtLSl7dmFyIGM9dGhpcy5jaGlsZE5vZGVzW3VdO2MhPT10JiZjIT09biYmYyE9PW8mJlwiT05TLVJJUFBMRVwiIT09Yy50YWdOYW1lJiZlLmluc2VydEJlZm9yZShjLGUuZmlyc3RDaGlsZCl9ZWxzZSBmb3IoO3RoaXMuY2hpbGROb2Rlc1swXTspZS5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO298fHRoaXMuaW5zZXJ0QmVmb3JlKGUsbnx8bnVsbCl9ZS5jbGFzc0xpc3QuYWRkKFwiY2VudGVyXCIsXCJsaXN0LWl0ZW1fX2NlbnRlclwiKSxvJiYodGhpcy5fdG9wPWl8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fdG9wLmNsYXNzTGlzdC5hZGQoXCJ0b3BcIixcImxpc3QtaXRlbV9fdG9wXCIpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5fdG9wKSx0aGlzLl90b3AuYXBwZW5kQ2hpbGQoZSksdCYmdGhpcy5fdG9wLmFwcGVuZENoaWxkKHQpLG4mJnRoaXMuX3RvcC5hcHBlbmRDaGlsZChuKSksUS51cGRhdGVSaXBwbGUodGhpcyksQi5pbml0TW9kaWZpZXIodGhpcyx4byl9fSx7a2V5Olwic2hvd0V4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLmhhc0F0dHJpYnV0ZShcImV4cGFuZGFibGVcIikmJiF0aGlzLl9leHBhbmRpbmcpe3RoaXMuZXhwYW5kZWQ9ITAsdGhpcy5fZXhwYW5kaW5nPSEwO3RoaXMuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcigpLnNob3dFeHBhbnNpb24odGhpcyxmdW5jdGlvbigpe3QuY2xhc3NMaXN0LmFkZChcImV4cGFuZGVkXCIpLHQuX2V4cGFuZGluZz0hMX0pfX19LHtrZXk6XCJoaWRlRXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSYmIXRoaXMuX2V4cGFuZGluZyl7dGhpcy5leHBhbmRlZD0hMSx0aGlzLl9leHBhbmRpbmc9ITA7dGhpcy5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKCkuaGlkZUV4cGFuc2lvbih0aGlzLGZ1bmN0aW9uKCl7dC5jbGFzc0xpc3QucmVtb3ZlKFwiZXhwYW5kZWRcIiksdC5fZXhwYW5kaW5nPSExfSl9fX0se2tleTpcInRvZ2dsZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJleHBhbmRlZFwiKT90aGlzLmhpZGVFeHBhbnNpb24oKTp0aGlzLnNob3dFeHBhbnNpb24oKX19LHtrZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczpUbyxiYXNlQ2xhc3M6T28sYmFzZUNsYXNzTmFtZTpcIkxpc3RJdGVtQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfHxcImRlZmF1bHRcIn0pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdC1pdGVtXCIseG8pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyx4byk7YnJlYWs7Y2FzZVwicmlwcGxlXCI6US51cGRhdGVSaXBwbGUodGhpcyk7YnJlYWs7Y2FzZVwiYW5pbWF0aW9uXCI6dGhpcy5fYW5pbWF0b3JGYWN0b3J5PXRoaXMuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9zZXR1cExpc3RlbmVycyghMCksdC5fb3JpZ2luYWxCYWNrZ3JvdW5kQ29sb3I9dC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IsdC50YXBwZWQ9ITF9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBMaXN0ZW5lcnMoITEpfX0se2tleTpcIl9zZXR1cExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSh0P1wiYWRkXCI6XCJyZW1vdmVcIikrXCJFdmVudExpc3RlbmVyXCI7UVtlXSh0aGlzLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2gse3Bhc3NpdmU6ITB9KSxRW2VdKHRoaXMsXCJ0b3VjaG1vdmVcIix0aGlzLl9vblJlbGVhc2Use3Bhc3NpdmU6ITB9KSx0aGlzW2VdKFwidG91Y2hjYW5jZWxcIix0aGlzLl9vblJlbGVhc2UpLHRoaXNbZV0oXCJ0b3VjaGVuZFwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcInRvdWNobGVhdmVcIix0aGlzLl9vblJlbGVhc2UpLHRoaXNbZV0oXCJkcmFnXCIsdGhpcy5fb25EcmFnKSx0aGlzW2VdKFwibW91c2Vkb3duXCIsdGhpcy5fb25Ub3VjaCksdGhpc1tlXShcIm1vdXNldXBcIix0aGlzLl9vblJlbGVhc2UpLHRoaXNbZV0oXCJtb3VzZW91dFwiLHRoaXMuX29uUmVsZWFzZSksdGhpcy5fdG9wJiZ0aGlzLl90b3BbZV0oXCJjbGlja1wiLHRoaXMudG9nZ2xlRXhwYW5zaW9uKX19LHtrZXk6XCJfb25EcmFnXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXN0dXJlO3RoaXMuaGFzQXR0cmlidXRlKFwibG9jay1vbi1kcmFnXCIpJiZbXCJsZWZ0XCIsXCJyaWdodFwiXS5pbmRleE9mKGUuZGlyZWN0aW9uKT4tMSYmZS5wcmV2ZW50RGVmYXVsdCgpfX0se2tleTpcIl9vblRvdWNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZighKHRoaXMudGFwcGVkfHx0aGlzIT09dC50YXJnZXQmJih0aGlzLl9zaG91bGRJZ25vcmVUYXAodC50YXJnZXQpfHxRLmZpbmRQYXJlbnQodC50YXJnZXQsdGhpcy5fc2hvdWxkSWdub3JlVGFwLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZX0pKSkpe3RoaXMudGFwcGVkPSEwO3ZhciBuPXt0cmFuc2l0aW9uOlwiYmFja2dyb3VuZC1jb2xvciAwLjBzIGxpbmVhciAwLjAycywgYm94LXNoYWRvdyAwLjBzIGxpbmVhciAwLjAyc1wifTt0aGlzLmhhc0F0dHJpYnV0ZShcInRhcHBhYmxlXCIpJiYodGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3ImJih0aGlzLl9vcmlnaW5hbEJhY2tncm91bmRDb2xvcj10aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciksbi5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0YXAtYmFja2dyb3VuZC1jb2xvclwiKXx8XCIjZDlkOWQ5XCIsbi5ib3hTaGFkb3c9XCIwcHggLTFweCAwcHggMHB4IFwiK24uYmFja2dyb3VuZENvbG9yKSxkKHRoaXMsbil9fX0se2tleTpcIl9vblJlbGVhc2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGFwcGVkPSExLHRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yPXRoaXMuX29yaWdpbmFsQmFja2dyb3VuZENvbG9yfHxcIlwiLGQuY2xlYXIodGhpcyxcInRyYW5zaXRpb24gYm94U2hhZG93XCIpfX0se2tleTpcImV4cGFuZGFibGVDb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW1fX2V4cGFuZGFibGUtY29udGVudFwiKX19LHtrZXk6XCJleHBhbmRDaGV2cm9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5saXN0LWl0ZW1fX2V4cGFuZC1jaGV2cm9uXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCIsXCJyaXBwbGVcIixcImFuaW1hdGlvblwiXX19XSksZX0oKTtjLkxpc3RJdGVtPUxvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1saXN0LWl0ZW1cIixMbyk7dmFyIE1vPXtcIlwiOlwibGlzdC0tKlwifSxEbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2NvbXBpbGUoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwibGlzdFwiKSxCLmluaXRNb2RpZmllcih0aGlzLE1vKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImxpc3RcIixNbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLE1vKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5MaXN0PURvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1saXN0XCIsRG8pO3ZhciBJbz1bXCJhdXRvY2FwaXRhbGl6ZVwiLFwiYXV0b2NvbXBsZXRlXCIsXCJhdXRvY29ycmVjdFwiLFwiYXV0b2ZvY3VzXCIsXCJkaXNhYmxlZFwiLFwiaW5wdXRtb2RlXCIsXCJtYXhcIixcIm1heGxlbmd0aFwiLFwibWluXCIsXCJtaW5sZW5ndGhcIixcIm5hbWVcIixcInBhdHRlcm5cIixcInBsYWNlaG9sZGVyXCIsXCJyZWFkb25seVwiLFwicmVxdWlyZWRcIixcInNpemVcIixcInN0ZXBcIixcInZhbGlkYXRvclwiLFwidmFsdWVcIl0sTm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmNvbnN0cnVjdG9yPT09ZSYmUS50aHJvd0Fic3RyYWN0KCksbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX2JvdW5kRGVsZWdhdGVFdmVudD10Ll9kZWxlZ2F0ZUV2ZW50LmJpbmQodCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfdXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19XSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lJiZ0aGlzLmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdENsYXNzTmFtZSksMD09PXRoaXMuY2hpbGRyZW4ubGVuZ3RoJiYodGhpcy5hcHBlbmRDaGlsZChRLmNyZWF0ZUZyYWdtZW50KHRoaXMuX3RlbXBsYXRlKSksdGhpcy5fc2V0SW5wdXRJZCgpLHRoaXMuX3VwZGF0ZUJvdW5kQXR0cmlidXRlcygpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKSl9fSx7a2V5OlwiX3VwZGF0ZUJvdW5kQXR0cmlidXRlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztJby5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuaGFzQXR0cmlidXRlKGUpP3QuX2lucHV0LnNldEF0dHJpYnV0ZShlLHQuZ2V0QXR0cmlidXRlKGUpKTp0Ll9pbnB1dC5yZW1vdmVBdHRyaWJ1dGUoZSl9KSx0aGlzLl91cGRhdGUoKX19LHtrZXk6XCJfZGVsZWdhdGVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBDdXN0b21FdmVudCh0LnR5cGUse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMH0pO3JldHVybiB0aGlzLmRpc3BhdGNoRXZlbnQoZSl9fSx7a2V5OlwiX3NldElucHV0SWRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGFzQXR0cmlidXRlKFwiaW5wdXQtaWRcIikmJih0aGlzLl9pbnB1dC5pZD10aGlzLmdldEF0dHJpYnV0ZShcImlucHV0LWlkXCIpKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0Ll9ib3VuZERlbGVnYXRlRXZlbnQpLHQuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdC5fYm91bmREZWxlZ2F0ZUV2ZW50KX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHQuX2JvdW5kRGVsZWdhdGVFdmVudCksdC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0Ll9ib3VuZERlbGVnYXRlRXZlbnQpfSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcIm1vZGlmaWVyXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIEIub25Nb2RpZmllckNoYW5nZWQoZSxpLG8sby5fc2NoZW1lKX0pO2JyZWFrO2Nhc2VcImlucHV0LWlkXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3NldElucHV0SWQoKX0pO2JyZWFrO2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyx0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lLHRoaXMuX3NjaGVtZSl9SW8uaW5kZXhPZih0KT49MCYmbih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3VwZGF0ZUJvdW5kQXR0cmlidXRlcygpfSl9fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIlwifX0se2tleTpcIl9pbnB1dFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJpbnB1dFwiKX19LHtrZXk6XCJ2YWx1ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5faW5wdXQ/dGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKTp0aGlzLl9pbnB1dC52YWx1ZX0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dCBpbnN0YW5jZW9mIERhdGUmJih0PXQudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwxMCkpLGUuX2lucHV0LnZhbHVlPXQsZS5fdXBkYXRlKCl9KX19LHtrZXk6XCJkaXNhYmxlZFwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImlucHV0LWlkXCIsXCJjbGFzc1wiXS5jb25jYXQoSW8pfX1dKSxlfSgpLEJvPXtcIi50ZXh0LWlucHV0XCI6XCJ0ZXh0LWlucHV0LS0qXCIsXCIudGV4dC1pbnB1dF9fbGFiZWxcIjpcInRleHQtaW5wdXQtLSpfX2xhYmVsXCJ9LGpvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fYm91bmRPbklucHV0PXQuX3VwZGF0ZS5iaW5kKHQpLHQuX2JvdW5kT25Gb2N1c2luPXQuX3VwZGF0ZS5iaW5kKHQpLHR9cmV0dXJuIGIoZSxObyksZyhlLFt7a2V5OlwiX3VwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlTGFiZWwoKSx0aGlzLl91cGRhdGVMYWJlbENsYXNzKCl9fSx7a2V5OlwiX3VwZGF0ZUxhYmVsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIpfHxcIlwiO3ZvaWQgMCE9PXRoaXMuX2hlbHBlci50ZXh0Q29udGVudD90aGlzLl9oZWxwZXIudGV4dENvbnRlbnQ9dDp0aGlzLl9oZWxwZXIuaW5uZXJUZXh0PXR9fSx7a2V5OlwiX3VwZGF0ZUxhYmVsQ2xhc3NcIix2YWx1ZTpmdW5jdGlvbigpe1wiXCI9PT10aGlzLnZhbHVlP3RoaXMuX2hlbHBlci5jbGFzc0xpc3QucmVtb3ZlKFwidGV4dC1pbnB1dC0tbWF0ZXJpYWxfX2xhYmVsLS1hY3RpdmVcIik6dGhpcy5faGVscGVyLmNsYXNzTGlzdC5hZGQoXCJ0ZXh0LWlucHV0LS1tYXRlcmlhbF9fbGFiZWwtLWFjdGl2ZVwiKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImNvbm5lY3RlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzKSxuKHRoaXMsZnVuY3Rpb24oKXt0Ll9pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIix0Ll9ib3VuZE9uSW5wdXQpLHQuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsdC5fYm91bmRPbkZvY3VzaW4pfSk7dmFyIGk9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpO1tcImNoZWNrYm94XCIsXCJyYWRpb1wiXS5pbmRleE9mKGkpPj0wJiZRLndhcm4oJ1dhcm46IDxvbnMtaW5wdXQgdHlwZT1cIicraSsnXCI+IGlzIGRlcHJlY2F0ZWQgc2luY2UgdjIuNC4wLiBVc2UgPG9ucy0nK2krXCI+IGluc3RlYWQuXCIpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLG4odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLHQuX2JvdW5kT25JbnB1dCksdC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIix0Ll9ib3VuZE9uRm9jdXNpbil9KX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGksbyl7dmFyIHI9dGhpcztzd2l0Y2godCl7Y2FzZVwidHlwZVwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiByLl9pbnB1dC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsci50eXBlKX0pO2JyZWFrO2RlZmF1bHQ6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxpLG8pfX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEJvfX0se2tleTpcIl90ZW1wbGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybidcXG4gICAgICA8aW5wdXQgdHlwZT1cIicrdGhpcy50eXBlKydcIiBjbGFzcz1cInRleHQtaW5wdXRcIj5cXG4gICAgICA8c3BhbiBjbGFzcz1cInRleHQtaW5wdXRfX2xhYmVsXCI+PC9zcGFuPlxcbiAgICAnfX0se2tleTpcInR5cGVcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIik7cmV0dXJuW1wiY2hlY2tib3hcIixcInJhZGlvXCJdLmluZGV4T2YodCk8MCYmdHx8XCJ0ZXh0XCJ9fSx7a2V5OlwiX2hlbHBlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcInR5cGVcIl0pfX1dKSxlfSgpO2MuSW5wdXQ9am8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWlucHV0XCIsam8pO3ZhciBIbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuY29uc3RydWN0b3I9PT1lJiZ1dGlsLnRocm93QWJzdHJhY3QoKSxuKHQsZnVuY3Rpb24oKXt0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcImNoZWNrZWRcIixudWxsLHQuZ2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiKSl9KSx0fXJldHVybiBiKGUsTm8pLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXtzd2l0Y2godCl7Y2FzZVwiY2hlY2tlZFwiOnRoaXMuY2hlY2tlZD1udWxsIT09aTticmVhaztkZWZhdWx0OnYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX2lucHV0XCI+XFxuICAgICAgPHNwYW4gY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19fY2hlY2ttYXJrXCI+PC9zcGFuPlxcbiAgICAnfX0se2tleTpcIl9oZWxwZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwic3BhblwiKX19LHtrZXk6XCJjaGVja2VkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0LmNoZWNrZWR9LHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzO24odGhpcyxmdW5jdGlvbigpe2UuX2lucHV0LmNoZWNrZWQ9dH0pfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcImNoZWNrZWRcIl0pfX1dKSxlfSgpLFJvPXtcIi5jaGVja2JveFwiOlwiY2hlY2tib3gtLSpcIixcIi5jaGVja2JveF9faW5wdXRcIjpcImNoZWNrYm94LS0qX19pbnB1dFwiLFwiLmNoZWNrYm94X19jaGVja21hcmtcIjpcImNoZWNrYm94LS0qX19jaGVja21hcmtcIn0sRm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsSG8pLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUm99fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCJ9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIn19XSksZX0oKTtjLkNoZWNrYm94PUZvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jaGVja2JveFwiLEZvKTt2YXIgcW89e1wiLnJhZGlvLWJ1dHRvblwiOlwicmFkaW8tYnV0dG9uLS0qXCIsXCIucmFkaW8tYnV0dG9uX19pbnB1dFwiOlwicmFkaW8tYnV0dG9uLS0qX19pbnB1dFwiLFwiLnJhZGlvLWJ1dHRvbl9fY2hlY2ttYXJrXCI6XCJyYWRpby1idXR0b24tLSpfX2NoZWNrbWFya1wifSx6bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxIbyksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBxb319LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFkaW8tYnV0dG9uXCJ9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFkaW9cIn19XSksZX0oKTtjLlJhZGlvPXpvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yYWRpb1wiLHpvKTt2YXIgVm89e1wiLnNlYXJjaC1pbnB1dFwiOlwic2VhcmNoLWlucHV0LS0qXCJ9LFdvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLE5vKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFZvfX0se2tleTpcIl90ZW1wbGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybidcXG4gICAgICA8aW5wdXQgdHlwZT1cIicrdGhpcy50eXBlKydcIiBjbGFzcz1cInNlYXJjaC1pbnB1dFwiPlxcbiAgICAnfX0se2tleTpcInR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInNlYXJjaFwifX1dKSxlfSgpO2MuU2VhcmNoSW5wdXQ9V28sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNlYXJjaC1pbnB1dFwiLFdvKTt2YXIgVW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLFhvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxVbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX1dKSxlfSgpLFlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoIC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy40OmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVW8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDEwMCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMTAwJSwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KS5wbGF5KCl9fV0pLGV9KCksR289e1wiXCI6XCJtb2RhbC0tKlwiLG1vZGFsX19jb250ZW50OlwibW9kYWwtLSpfX2NvbnRlbnRcIn0sJG89e2RlZmF1bHQ6VW8sZmFkZTpYbyxsaWZ0OllvLG5vbmU6VW99LEtvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZGVmYXVsdERCQj1mdW5jdGlvbigpe30sbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6JG8sYmFzZUNsYXNzOlVvLGJhc2VDbGFzc05hbWU6XCJNb2RhbEFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5zdHlsZS56SW5kZXg9MTAwMDEsdGhpcy5jbGFzc0xpc3QuYWRkKFwibW9kYWxcIiksIVEuZmluZENoaWxkKHRoaXMsXCIubW9kYWxfX2NvbnRlbnRcIikpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKHQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19jb250ZW50XCIpO3RoaXMuY2hpbGROb2Rlc1swXTspe3ZhciBlPXRoaXMuY2hpbGROb2Rlc1swXTt0aGlzLnJlbW92ZUNoaWxkKGUpLHQuaW5zZXJ0QmVmb3JlKGUsbnVsbCl9dGhpcy5hcHBlbmRDaGlsZCh0KX1CLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3RvZ2dsZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5zdHlsZS5kaXNwbGF5PXQ/XCJ0YWJsZVwiOlwibm9uZVwifX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImNvbm5lY3RlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe1wiY2xhc3NcIj09PXQ/US5yZXN0b3JlQ2xhc3ModGhpcyxcIm1vZGFsXCIsR28pOnYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEdvfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBVb3x8US50aHJvd0FuaW1hdG9yKFwiTW9kYWxcIiksJG9bdF09ZX19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wiY2xhc3NcIl0pfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiAkb319LHtrZXk6XCJNb2RhbEFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFVvfX1dKSxlfSgpO2MuTW9kYWw9S28sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLW1vZGFsXCIsS28pO3ZhciBRbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49dGhpcztwKHRoaXMsdCksXCJlbGVtZW50IGlnbm9yZVN3aXBlIGlzSW5pdGlhbFN0YXRlIG9uRHJhZ0NhbGxiYWNrIHN3aXBlTWF4IHN3aXBlTWluIHN3aXBlTWlkXCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBuW3RdPWVbdF19KSx0aGlzLmVsZW1lbnRIYW5kbGVyPWUuZWxlbWVudEhhbmRsZXJ8fGUuZWxlbWVudCx0aGlzLmdldFRocmVzaG9sZD1lLmdldFRocmVzaG9sZHx8ZnVuY3Rpb24oKXtyZXR1cm4uNX0sdGhpcy5nZXRTaWRlPWUuZ2V0U2lkZXx8ZnVuY3Rpb24oKXtyZXR1cm5cImxlZnRcIn0sdGhpcy5oYW5kbGVHZXN0dXJlPXRoaXMuaGFuZGxlR2VzdHVyZS5iaW5kKHRoaXMpLHRoaXMuX3Nob3VsZEZpeFNjcm9sbD1cImlvc1wiPT09US5nbG9iYWxzLmFjdHVhbE1vYmlsZU9TfXJldHVybiBnKHQsW3trZXk6XCJ1cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKFwic3dpcGVhYmxlXCIpO3RoaXMuZ2VzdHVyZURldGVjdG9yfHwodGhpcy5nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMuZWxlbWVudEhhbmRsZXIse2RyYWdNaW5EaXN0YW5jZToxLHBhc3NpdmU6IXRoaXMuX3Nob3VsZEZpeFNjcm9sbH0pKTt2YXIgZT10P1wib25cIjpcIm9mZlwiO3RoaXMuZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZyBkcmFnc3RhcnQgZHJhZ2VuZFwiLHRoaXMuaGFuZGxlR2VzdHVyZSl9fSx7a2V5OlwiaGFuZGxlR2VzdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZ2VzdHVyZSYmKFwiZHJhZ3N0YXJ0XCI9PT10LnR5cGU/dGhpcy5vbkRyYWdTdGFydCh0KTp0aGlzLl9pZ25vcmVEcmFnfHwoXCJkcmFnZW5kXCI9PT10LnR5cGU/dGhpcy5vbkRyYWdFbmQodCk6dGhpcy5vbkRyYWcodCkpKX19LHtrZXk6XCJvbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faWdub3JlRHJhZz10LmNvbnN1bWVkfHwhUS5pc1ZhbGlkR2VzdHVyZSh0KXx8dGhpcy5pZ25vcmVTd2lwZSh0LFwibGVmdFwiPT09ZS5nZXRTaWRlKCk/dC5nZXN0dXJlLmNlbnRlci5jbGllbnRYOndpbmRvdy5pbm5lcldpZHRoLXQuZ2VzdHVyZS5jZW50ZXIuY2xpZW50WCksdGhpcy5faWdub3JlRHJhZ3x8KHQuY29uc3VtZSYmdC5jb25zdW1lKCksdC5jb25zdW1lZD0hMCx0aGlzLl93aWR0aD1mdW5jdGlvbih0KXt2YXIgZT1bcGFyc2VJbnQodCwxMCksL3B4Ly50ZXN0KHQpXSxuPWVbMF07cmV0dXJuIGVbMV0/bjpNYXRoLnJvdW5kKGRvY3VtZW50LmJvZHkub2Zmc2V0V2lkdGgqbi8xMDApfSh0aGlzLmVsZW1lbnQuc3R5bGUud2lkdGh8fFwiMTAwJVwiKSx0aGlzLl9zdGFydERpc3RhbmNlPXRoaXMuX2Rpc3RhbmNlPXRoaXMuaXNJbml0aWFsU3RhdGUgaW5zdGFuY2VvZiBGdW5jdGlvbiYmIXRoaXMuaXNJbml0aWFsU3RhdGUoKT90aGlzLl93aWR0aDowLFEuaW9zUHJldmVudFNjcm9sbCh0aGlzLmdlc3R1cmVEZXRlY3RvcikpfX0se2tleTpcIm9uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGU9XCJsZWZ0XCI9PT10aGlzLmdldFNpZGUoKT90Lmdlc3R1cmUuZGVsdGFYOi10Lmdlc3R1cmUuZGVsdGFYLG49TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLl93aWR0aCx0aGlzLl9zdGFydERpc3RhbmNlK2UpKTtuIT09dGhpcy5fZGlzdGFuY2UmJih0aGlzLl9kaXN0YW5jZT1uLHRoaXMuc3dpcGVNaWQodGhpcy5fZGlzdGFuY2UsdGhpcy5fd2lkdGgpKX19LHtrZXk6XCJvbkRyYWdFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpO3ZhciBlPXQuZ2VzdHVyZS5pbnRlcmltRGlyZWN0aW9uO3RoaXMuZ2V0U2lkZSgpIT09ZSYmdGhpcy5fZGlzdGFuY2U+dGhpcy5fd2lkdGgqdGhpcy5nZXRUaHJlc2hvbGQoKT90aGlzLnN3aXBlTWF4KCk6dGhpcy5zd2lwZU1pbigpfX0se2tleTpcImRpc3Bvc2VcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuZ2VzdHVyZURldGVjdG9yJiZ0aGlzLmdlc3R1cmVEZXRlY3Rvci5kaXNwb3NlKCksdGhpcy5nZXN0dXJlRGV0ZWN0b3I9dGhpcy5lbGVtZW50PXRoaXMuZWxlbWVudEhhbmRsZXI9bnVsbH19XSksdH0oKSxKbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBwKHRoaXMsZSksdD1RLmV4dGVuZCh7dGltaW5nOlwibGluZWFyXCIsZHVyYXRpb246XCIwLjRcIixkZWxheTpcIjBcIn0sdHx8e30pLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHQpKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe24oKX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7bigpfX0se2tleTpcImJsb2NrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9US5jcmVhdGVFbGVtZW50KCdcXG4gICAgICA8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgei1pbmRleDogMTAwMDAwXCI+PC9kaXY+XFxuICAgICcpO3JldHVybiB0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZSksZnVuY3Rpb24oKXtyZXR1cm4gZS5yZW1vdmUoKX19fV0pLGV9KCksWm89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQuZHVyYXRpb25SZXN0b3JlLGk9dm9pZCAwPT09bj8uMTpuLG89dC5kdXJhdGlvblN3aXBlLHI9dm9pZCAwPT09bz8uMTU6byxhPXQudGltaW5nU3dpcGUscz12b2lkIDA9PT1hP1wibGluZWFyXCI6YSxsPXkodCxbXCJkdXJhdGlvblJlc3RvcmVcIixcImR1cmF0aW9uU3dpcGVcIixcInRpbWluZ1N3aXBlXCJdKTtwKHRoaXMsZSk7dmFyIHU9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsXyh7fSxsKSkpO3JldHVybiB1LmNvbnN0cnVjdG9yPT09ZSYmUS50aHJvd0Fic3RyYWN0KCksdS5kdXJhdGlvblJlc3RvcmU9aSx1LmR1cmF0aW9uU3dpcGU9cix1LnRpbWluZ1N3aXBlPXMsdS5vcHRTd2lwZT17dGltaW5nOnMsZHVyYXRpb246cn0sdS5vcHRSZXN0b3JlPXt0aW1pbmc6cyxkdXJhdGlvbjppfSx1LnN3aXBlU2hhZG93PVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTJweDsgcmlnaHQ6IDEwMCU7IHRvcDogMDsgYm90dG9tOiAwOyB6LWluZGV4OiAtMTtiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHRyYW5zcGFyZW50IDAsIHJnYmEoMCwwLDAsLjA0KSA0MCUsIHJnYmEoMCwwLDAsLjEyKSA4MCUsIHJnYmEoMCwwLDAsLjE2KSAxMDAlKTtcIj48L2Rpdj4nKSx1LmlzRHJhZ1N0YXJ0PSEwLHV9cmV0dXJuIGIoZSxKbyksZyhlLG51bGwsW3trZXk6XCJzd2lwZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH19XSksZyhlLFt7a2V5OlwiX2RlY29tcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9zaG91bGRBbmltYXRlVG9vbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9jYWxjdWxhdGVEZWx0YVwiLHZhbHVlOmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl9kcmFnU3RhcnRTZXR1cFwiLHZhbHVlOmZ1bmN0aW9uKHQsbil7dGhpcy5pc0RyYWdTdGFydD0hMSx0aGlzLnVuYmxvY2s9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyxuKSx0LnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCksdGhpcy50YXJnZXQ9e2VudGVyOlEuZmluZFRvb2xiYXJQYWdlKHQpfHx0LGxlYXZlOlEuZmluZFRvb2xiYXJQYWdlKG4pfHxufSx0aGlzLmRlY29tcD17ZW50ZXI6dGhpcy5fZGVjb21wb3NlKHRoaXMudGFyZ2V0LmVudGVyKSxsZWF2ZTp0aGlzLl9kZWNvbXBvc2UodGhpcy50YXJnZXQubGVhdmUpfSx0aGlzLmRlbHRhPXRoaXMuX2NhbGN1bGF0ZURlbHRhKG4sdGhpcy5kZWNvbXAubGVhdmUpLHRoaXMuc2hvdWxkQW5pbWF0ZVRvb2xiYXI9dGhpcy5fc2hvdWxkQW5pbWF0ZVRvb2xiYXIodGhpcy50YXJnZXQuZW50ZXIsdGhpcy50YXJnZXQubGVhdmUpLHRoaXMuc2hvdWxkQW5pbWF0ZVRvb2xiYXI/KHRoaXMuc3dpcGVTaGFkb3cuc3R5bGUudG9wPXRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIub2Zmc2V0SGVpZ2h0K1wicHhcIix0aGlzLnRhcmdldC5sZWF2ZS5hcHBlbmRDaGlsZCh0aGlzLnN3aXBlU2hhZG93KSx0aGlzLl9zYXZlU3R5bGUodGhpcy50YXJnZXQuZW50ZXIsdGhpcy50YXJnZXQubGVhdmUpKToobi5hcHBlbmRDaGlsZCh0aGlzLnN3aXBlU2hhZG93KSx0aGlzLl9zYXZlU3R5bGUodCxuKSksbi5jbGFzc0xpc3QuYWRkKFwib3ZlcmZsb3ctdmlzaWJsZVwiKSx0aGlzLm92ZXJmbG93RWxlbWVudD1uLHRoaXMuZGVjb21wLmxlYXZlLmNvbnRlbnQuY2xhc3NMaXN0LmFkZChcImNvbnRlbnQtc3dpcGluZ1wiKX19LHtrZXk6XCJ0cmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbixpKXt0aGlzLmlzU3dpcGluZz0hMCxcIm5vbmVcIj09PW4uc3R5bGUuZGlzcGxheSYmKG4uc3R5bGUuZGlzcGxheT1cIlwiKSx0aGlzLmlzRHJhZ1N0YXJ0JiYodGhpcy5tYXhXaWR0aD1lLHRoaXMuX2RyYWdTdGFydFNldHVwKG4saSkpO3ZhciBvPSh0LWUpL2U7dGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj9udC5ydW5BbGwobnQoW3RoaXMuZGVjb21wLmVudGVyLmNvbnRlbnQsdGhpcy5kZWNvbXAuZW50ZXIuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5lbnRlci5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKzI1Km8rXCIlLCAwLCAwKVwiLG9wYWNpdHk6MSsxMCpvLzEwMH0pLG50KHRoaXMuZGVjb21wLmVudGVyLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLnRpdGxlKm8rXCJweCwgMCwgMClcIixvcGFjaXR5OjErb30pLG50KHRoaXMuZGVjb21wLmVudGVyLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe29wYWNpdHk6MSsxMCpvLzEwMCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLmxhYmVsKm8rXCJweCwgMCwgMClcIn0pLG50KHRoaXMuZGVjb21wLmVudGVyLm90aGVyKS5xdWV1ZSh7b3BhY2l0eToxK299KSxudChbdGhpcy5kZWNvbXAubGVhdmUuY29udGVudCx0aGlzLmRlY29tcC5sZWF2ZS5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmxlYXZlLmJhY2tncm91bmQsdGhpcy5zd2lwZVNoYWRvd10pLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0K1wicHgsIDAsIDApXCJ9KSxudCh0aGlzLmRlY29tcC5sZWF2ZS50b29sYmFyKS5xdWV1ZSh7b3BhY2l0eTotMSpvfSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKzEyNSooMStvKStcIiUsIDAsIDApXCJ9KSxudCh0aGlzLmRlY29tcC5sZWF2ZS5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHtvcGFjaXR5Oi0xKm8sdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrdGhpcy5kZWx0YS50aXRsZSooMStvKStcInB4LCAwLCAwKVwifSksbnQodGhpcy5zd2lwZVNoYWRvdykucXVldWUoe29wYWNpdHk6LTEqb30pKTpudC5ydW5BbGwobnQoaSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3QrXCJweCwgMCwgMClcIn0pLG50KG4pLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisyNSpvK1wiJSwgMCwgMClcIixvcGFjaXR5OjErMTAqby8xMDB9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTotMSpvfSkpfX0se2tleTpcInJlc3RvcmVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpczt0aGlzLmlzRHJhZ1N0YXJ0fHwodGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj9udC5ydW5BbGwobnQoW3RoaXMuZGVjb21wLmVudGVyLmNvbnRlbnQsdGhpcy5kZWNvbXAuZW50ZXIuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5lbnRlci5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC0yNSUsIDAsIDApXCIsb3BhY2l0eTouOX0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5lbnRlci50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLVwiK3RoaXMuZGVsdGEudGl0bGUrXCJweCwgMCwgMClcIix0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uUmVzdG9yZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblJlc3RvcmUrXCJzIFwiK3RoaXMudGltaW5nU3dpcGUsb3BhY2l0eTowfSksbnQodGhpcy5kZWNvbXAuZW50ZXIuYmFja0J1dHRvbkxhYmVsKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLVwiK3RoaXMuZGVsdGEubGFiZWwrXCJweCwgMCwgMClcIn0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5lbnRlci5vdGhlcikucXVldWUoe29wYWNpdHk6MH0sdGhpcy5vcHRSZXN0b3JlKSxudChbdGhpcy5kZWNvbXAubGVhdmUuY29udGVudCx0aGlzLmRlY29tcC5sZWF2ZS5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmxlYXZlLmJhY2tncm91bmQsdGhpcy5zd2lwZVNoYWRvd10pLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLm9wdFJlc3RvcmUpLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIpLnF1ZXVlKHtvcGFjaXR5OjF9LHRoaXMub3B0UmVzdG9yZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMub3B0UmVzdG9yZSksbnQodGhpcy5kZWNvbXAubGVhdmUuYmFja0J1dHRvbkxhYmVsKS5xdWV1ZSh7b3BhY2l0eToxLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrdGhpcy5kdXJhdGlvblJlc3RvcmUrXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3RoaXMuZHVyYXRpb25SZXN0b3JlK1wicyBcIit0aGlzLnRpbWluZ1N3aXBlfSksbnQodGhpcy5zd2lwZVNoYWRvdykucXVldWUoe29wYWNpdHk6MH0sdGhpcy5vcHRSZXN0b3JlKS5xdWV1ZShmdW5jdGlvbihlKXtpLl9yZXNldChpLnRhcmdldC5lbnRlcixpLnRhcmdldC5sZWF2ZSksdC5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLG4mJm4oKSxlKCl9KSk6bnQucnVuQWxsKG50KHQpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgtMjUlLCAwLCAwKVwiLG9wYWNpdHk6Ljl9LHRoaXMub3B0UmVzdG9yZSksbnQoZSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCJ9LHRoaXMub3B0UmVzdG9yZSkucXVldWUoZnVuY3Rpb24obyl7aS5fcmVzZXQodCxlKSx0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbiYmbigpLG8oKX0pKSl9fSx7a2V5OlwicG9wU3dpcGVcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpczt0aGlzLmlzRHJhZ1N0YXJ0fHwodGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj9udC5ydW5BbGwobnQoW3RoaXMuZGVjb21wLmVudGVyLmNvbnRlbnQsdGhpcy5kZWNvbXAuZW50ZXIuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5lbnRlci5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSx0aGlzLm9wdFN3aXBlKSxudCh0aGlzLmRlY29tcC5lbnRlci50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIix0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uU3dpcGUrXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3RoaXMuZHVyYXRpb25Td2lwZStcInMgXCIrdGhpcy50aW1pbmdTd2lwZSxvcGFjaXR5OjF9KSxudCh0aGlzLmRlY29tcC5lbnRlci5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLm9wdFN3aXBlKSxudCh0aGlzLmRlY29tcC5lbnRlci5vdGhlcikucXVldWUoe29wYWNpdHk6MX0sdGhpcy5vcHRTd2lwZSksbnQoW3RoaXMuZGVjb21wLmxlYXZlLmNvbnRlbnQsdGhpcy5kZWNvbXAubGVhdmUuYm90dG9tVG9vbGJhcix0aGlzLmRlY29tcC5sZWF2ZS5iYWNrZ3JvdW5kXSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDEwMCUsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIpLnF1ZXVlKHtvcGFjaXR5OjB9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgxMjUlLCAwLCAwKVwifSx0aGlzLm9wdFN3aXBlKSxudCh0aGlzLmRlY29tcC5sZWF2ZS5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHtvcGFjaXR5OjAsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrdGhpcy5kZWx0YS50aXRsZStcInB4LCAwLCAwKVwiLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb25Td2lwZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblN3aXBlK1wicyBcIit0aGlzLnRpbWluZ1N3aXBlfSksbnQodGhpcy5zd2lwZVNoYWRvdykucXVldWUoe29wYWNpdHk6MCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLm1heFdpZHRoK1wicHgsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLnF1ZXVlKGZ1bmN0aW9uKHQpe2kuX3Jlc2V0KGkudGFyZ2V0LmVudGVyLGkudGFyZ2V0LmxlYXZlKSxuJiZuKCksdCgpfSkpOm50LnJ1bkFsbChudCh0KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHRoaXMub3B0U3dpcGUpLG50KGUpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgxMDAlLCAwLCAwKVwifSx0aGlzLm9wdFN3aXBlKS5xdWV1ZShmdW5jdGlvbihvKXtpLl9yZXNldCh0LGUpLG4mJm4oKSxvKCl9KSkpfX0se2tleTpcIl9zYXZlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc2F2ZWRTdHlsZT1uZXcgV2Vha01hcDtmb3IodmFyIGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3NhdmVkU3R5bGUuc2V0KGUsZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSl9LG49YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KG4pLG89MDtvPG47bysrKWlbb109YXJndW1lbnRzW29dO2kuZm9yRWFjaChlKSxPYmplY3Qua2V5cyh0aGlzLmRlY29tcCkuZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3Qua2V5cyh0LmRlY29tcFtuXSkuZm9yRWFjaChmdW5jdGlvbihpKXsodC5kZWNvbXBbbl1baV1pbnN0YW5jZW9mIEFycmF5P3QuZGVjb21wW25dW2ldOlt0LmRlY29tcFtuXVtpXV0pLmZvckVhY2goZSl9KX0pfX0se2tleTpcIl9yZXN0b3JlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLGU9ZnVuY3Rpb24oZSl7bnVsbD09PXQuX3NhdmVkU3R5bGUuZ2V0KGUpP2UucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik6ZS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLHQuX3NhdmVkU3R5bGUuZ2V0KGUpKSx0Ll9zYXZlZFN0eWxlLmRlbGV0ZShlKX0sbj1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkobiksbz0wO288bjtvKyspaVtvXT1hcmd1bWVudHNbb107aS5mb3JFYWNoKGUpLE9iamVjdC5rZXlzKHRoaXMuZGVjb21wKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5rZXlzKHQuZGVjb21wW25dKS5mb3JFYWNoKGZ1bmN0aW9uKGkpeyh0LmRlY29tcFtuXVtpXWluc3RhbmNlb2YgQXJyYXk/dC5kZWNvbXBbbl1baV06W3QuZGVjb21wW25dW2ldXSkuZm9yRWFjaChlKX0pfSl9fSx7a2V5OlwiX3Jlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmlzU3dpcGluZz0hMSx0aGlzLl9zYXZlZFN0eWxlJiZ0aGlzLl9yZXN0b3JlU3R5bGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMudW5ibG9jayYmdGhpcy51bmJsb2NrKCksdGhpcy5zd2lwZVNoYWRvdy5yZW1vdmUoKSx0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHRoaXMub3ZlcmZsb3dFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvdmVyZmxvdy12aXNpYmxlXCIpLHRoaXMuZGVjb21wLmxlYXZlLmNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRlbnQtc3dpcGluZ1wiKSx0aGlzLmRlY29tcD10aGlzLnRhcmdldD10aGlzLm92ZXJmbG93RWxlbWVudD10aGlzLl9zYXZlZFN0eWxlPW51bGwsdGhpcy5pc0RyYWdTdGFydD0hMH19XSksZX0oKSx0cj1mdW5jdGlvbigpe3JldHVyblwidHJhbnNsYXRlM2QoXCIrKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTowKStcIiwgXCIrKGFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTowKStcIiwgXCIrKGFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTowKStcIilcIn0sZXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllcigwLjMsIC40LCAwLCAuOSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YSxsPXkodCxbXCJ0aW1pbmdcIixcImRlbGF5XCIsXCJkdXJhdGlvblwiXSk7cCh0aGlzLGUpO3ZhciB1PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLF8oe3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30sbCkpKTtyZXR1cm4gdS5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IHotaW5kZXg6IDJcIj48L2Rpdj4nKSx1fXJldHVybiBiKGUsWm8pLGcoZSxbe2tleTpcIl9kZWNvbXBvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9nZXRUb29sYmFyRWxlbWVudCgpLG49ZS5fZ2V0VG9vbGJhckxlZnRJdGVtc0VsZW1lbnQoKSxpPWUuX2dldFRvb2xiYXJSaWdodEl0ZW1zRWxlbWVudCgpLG89ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKylcIm9ucy1iYWNrLWJ1dHRvblwiIT09dFtuXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnB1c2godFtuXSk7cmV0dXJuIGV9LHI9W10uY29uY2F0KDA9PT1uLmNoaWxkcmVuLmxlbmd0aD9uOm8obi5jaGlsZHJlbikpLmNvbmNhdCgwPT09aS5jaGlsZHJlbi5sZW5ndGg/aTpvKGkuY2hpbGRyZW4pKTtyZXR1cm57dG9vbGJhckNlbnRlcjplLl9nZXRUb29sYmFyQ2VudGVySXRlbXNFbGVtZW50KCksYmFja0J1dHRvbkljb246ZS5fZ2V0VG9vbGJhckJhY2tCdXR0b25JY29uRWxlbWVudCgpLGJhY2tCdXR0b25MYWJlbDplLl9nZXRUb29sYmFyQmFja0J1dHRvbkxhYmVsRWxlbWVudCgpLG90aGVyOnIsY29udGVudDp0Ll9nZXRDb250ZW50RWxlbWVudCgpLGJhY2tncm91bmQ6dC5fZ2V0QmFja2dyb3VuZEVsZW1lbnQoKSx0b29sYmFyOmUsYm90dG9tVG9vbGJhcjp0Ll9nZXRCb3R0b21Ub29sYmFyRWxlbWVudCgpfX19LHtrZXk6XCJfc2hvdWxkQW5pbWF0ZVRvb2xiYXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQuX2NhbkFuaW1hdGVUb29sYmFyKCkmJmUuX2NhbkFuaW1hdGVUb29sYmFyKCksaT10Ll9nZXRUb29sYmFyRWxlbWVudCgpLG89ZS5fZ2V0VG9vbGJhckVsZW1lbnQoKSxyPWkuaGFzQXR0cmlidXRlKFwic3RhdGljXCIpfHxvLmhhc0F0dHJpYnV0ZShcInN0YXRpY1wiKSxhPVEuaGFzTW9kaWZpZXIoaSxcIm1hdGVyaWFsXCIpfHxRLmhhc01vZGlmaWVyKG8sXCJtYXRlcmlhbFwiKSxzPVEuaGFzTW9kaWZpZXIoaSxcInRyYW5zcGFyZW50XCIpfHxRLmhhc01vZGlmaWVyKG8sXCJ0cmFuc3BhcmVudFwiKTtyZXR1cm4gbiYmIXImJiFhJiYhc319LHtrZXk6XCJfY2FsY3VsYXRlRGVsdGFcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMCxpPXZvaWQgMCxvPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYoZS5iYWNrQnV0dG9uTGFiZWwuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmFjay1idXR0b25fX2xhYmVsXCIpKXt2YXIgcj1lLmJhY2tCdXR0b25MYWJlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtuPU1hdGgucm91bmQoby53aWR0aC8yLXIud2lkdGgvMi1yLmxlZnQpfWVsc2Ugbj1NYXRoLnJvdW5kKG8ud2lkdGgvMiouNik7cmV0dXJuIGUuYmFja0J1dHRvbkljb24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYmFjay1idXR0b25fX2ljb25cIikmJihpPWUuYmFja0J1dHRvbkljb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQtMikse3RpdGxlOm4sbGFiZWw6aX19fSx7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQsaSxvKXt2YXIgcj10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksaS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLGkpO3ZhciBhPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bih0LGZ1bmN0aW9uKCl7dmFyIGU9US5maW5kVG9vbGJhclBhZ2UodCl8fHQsbj1RLmZpbmRUb29sYmFyUGFnZShpKXx8aSxzPXIuX2RlY29tcG9zZShlKSxsPXIuX2RlY29tcG9zZShuKSx1PXIuX2NhbGN1bGF0ZURlbHRhKGkscyk7ci5fc2hvdWxkQW5pbWF0ZVRvb2xiYXIoZSxuKT9udC5ydW5BbGwobnQoW3MuY29udGVudCxzLmJvdHRvbVRvb2xiYXIscy5iYWNrZ3JvdW5kXSxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiMTAwJVwiKX0se3RyYW5zZm9ybTp0cigpfSksbnQocy50b29sYmFyLHIuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudChzLnRvb2xiYXJDZW50ZXIsci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cihcIjEyNSVcIiksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSksbnQocy5iYWNrQnV0dG9uTGFiZWwsci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cih1LnRpdGxlK1wicHhcIiksb3BhY2l0eTowfSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3IuZHVyYXRpb24rXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3IuZHVyYXRpb24rXCJzIFwiK3IudGltaW5nfSksbnQocy5vdGhlcixyLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7Y3NzOntvcGFjaXR5OjF9LHRpbWluZzpcImxpbmVhclwifSksbnQoW2wuY29udGVudCxsLmJvdHRvbVRvb2xiYXIsbC5iYWNrZ3JvdW5kXSxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSkucXVldWUoZnVuY3Rpb24odCl7ci5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxhKCksbygpLHQoKX0pLG50KGwudG9vbGJhckNlbnRlcixyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLVwiK3UudGl0bGUrXCJweFwiKSxvcGFjaXR5OjAsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrci5kdXJhdGlvbitcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrci5kdXJhdGlvbitcInMgXCIrci50aW1pbmd9KSxudChsLmJhY2tCdXR0b25MYWJlbCxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLVwiK3UubGFiZWwrXCJweFwiKSxvcGFjaXR5OjB9KSxudChsLm90aGVyLHIuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtjc3M6e29wYWNpdHk6MH0sdGltaW5nOlwibGluZWFyXCJ9KSk6bnQucnVuQWxsKG50KHQsci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cihcIjEwMCVcIil9LHt0cmFuc2Zvcm06dHIoKX0pLG50KGksci5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MX0se3RyYW5zZm9ybTp0cihcIi0yNSVcIiksb3BhY2l0eTouOX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksYSgpLG8oKSx0KCl9KSl9KX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpcztpZih0aGlzLmlzU3dpcGluZylyZXR1cm4gdGhpcy5wb3BTd2lwZSh0LG4saSk7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KSxhPVEuZmluZFRvb2xiYXJQYWdlKHQpfHx0LHM9US5maW5kVG9vbGJhclBhZ2Uobil8fG4sbD10aGlzLl9kZWNvbXBvc2UoYSksdT10aGlzLl9kZWNvbXBvc2UocyksYz10aGlzLl9jYWxjdWxhdGVEZWx0YShuLHUpO3RoaXMuX3Nob3VsZEFuaW1hdGVUb29sYmFyKGEscyk/bnQucnVuQWxsKG50KFtsLmNvbnRlbnQsbC5ib3R0b21Ub29sYmFyLGwuYmFja2dyb3VuZF0sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cihcIi0yNSVcIiksb3BhY2l0eTouOX0se3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MX0pLG50KGwudG9vbGJhckNlbnRlcix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLVwiK2MudGl0bGUrXCJweFwiKSxvcGFjaXR5OjB9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjEsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrdGhpcy5kdXJhdGlvbitcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvbitcInMgXCIrdGhpcy50aW1pbmd9KSxudChsLmJhY2tCdXR0b25MYWJlbCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLVwiK2MubGFiZWwrXCJweFwiKX0se3RyYW5zZm9ybTp0cigpfSksbnQobC5vdGhlcix0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7Y3NzOntvcGFjaXR5OjF9LHRpbWluZzpcImxpbmVhclwifSksbnQoW3UuY29udGVudCx1LmJvdHRvbVRvb2xiYXIsdS5iYWNrZ3JvdW5kXSx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCl9LHt0cmFuc2Zvcm06dHIoXCIxMDAlXCIpfSkud2FpdCgwKS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHIoKSxpKCksdCgpfSksbnQodS50b29sYmFyLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh1LnRvb2xiYXJDZW50ZXIsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cigpfSx7dHJhbnNmb3JtOnRyKFwiMTI1JVwiKX0pLG50KHUuYmFja0J1dHRvbkxhYmVsLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoYy50aXRsZStcInB4XCIpLG9wYWNpdHk6MCx0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uK1wicyBcIit0aGlzLnRpbWluZ30pKTpudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCl9LHt0cmFuc2Zvcm06dHIoXCIxMDAlXCIpfSkucXVldWUoZnVuY3Rpb24odCl7by5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxyKCksaSgpLHQoKX0pKX19XSksZX0oKSxucj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy40OmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYmFja2dyb3VuZE1hc2s9US5jcmVhdGVFbGVtZW50KCc8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlO2JhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChibGFjaywgd2hpdGUpO1wiPjwvZGl2PicpLGx9cmV0dXJuIGIoZSxKbyksZyhlLFt7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksbi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLG4pO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDEwMCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwifSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAtMTAlLCAwKVwiLG9wYWNpdHk6Ljl9KS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHIoKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLHQpO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIC00M3B4LCAwKVwiLG9wYWNpdHk6Ljl9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCkscigpLGkoKSx0KCl9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMTAwJSwgMClcIn0pKX19XSksZX0oKSxpcj1cInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTppcixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06aXIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7bygpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTppcixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06aXIsb3BhY2l0eTowfSkucXVldWUoZnVuY3Rpb24odCl7bygpLGkoKSx0KCl9KSl9fV0pLGV9KCkscnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciguMSwgLjcsIC40LCAxKVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLmJsYWNrTWFza09wYWNpdHk9LjQsbC5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHotaW5kZXg6IDI7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7IG9wYWNpdHk6IDA7XCI+PC9kaXY+JyksbH1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxuLnBhcmVudEVsZW1lbnQuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssbi5uZXh0U2libGluZyk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodGhpcy5iYWNrZ3JvdW5kTWFzayx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjB9LHtvcGFjaXR5OnRoaXMuYmxhY2tNYXNrT3BhY2l0eX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSksbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMTAwJSwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTQ1JSwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLHQubmV4dFNpYmxpbmcpO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHRoaXMuYmFja2dyb3VuZE1hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eTp0aGlzLmJsYWNrTWFza09wYWNpdHl9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQoKX0pLG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC00NSUsIDAsIDApXCIsb3BhY2l0eTouOX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDEwMCUsIDAsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtyKCksaSgpLHQoKX0pKX19XSksZX0oKSxhcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPy4wNTpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZC1jb2xvcjogYmxhY2s7XCI+PC9kaXY+JyksbH1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssbik7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KSxhPW50KHRoaXMuYmFja2dyb3VuZE1hc2spLndhaXQodGhpcy5kZWxheSt0aGlzLmR1cmF0aW9uKS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQoKX0pO250LnJ1bkFsbChhLG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDEwMCUsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eToxfSx7b3BhY2l0eTouNH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO3RoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmJhY2tncm91bmRNYXNrLHQpO3ZhciByPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHRoaXMuYmFja2dyb3VuZE1hc2spLndhaXQodGhpcy5kZWxheSt0aGlzLmR1cmF0aW9uKS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQoKX0pLG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6LjR9LHtvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtyKCksaSgpLHQoKX0pLG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAxMDAlLCAwKVwifSkpfX1dKSxlfSgpLHNyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpXCI6bixvPXQudGltaW5nUG9wLHI9dm9pZCAwPT09bz9cImN1YmljLWJlemllcigwLjQsIDAsIDEsIDEpXCI6byxhPXQuZGVsYXkscz12b2lkIDA9PT1hPzA6YSxsPXQuZHVyYXRpb24sdT12b2lkIDA9PT1sPy4yOmw7cCh0aGlzLGUpO3ZhciBjPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpzLGR1cmF0aW9uOnV9KSk7cmV0dXJuIGMudGltaW5nUG9wPXIsY31yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYmxvY2tcIix0aGlzKS5jYWxsKHRoaXMsdCk7bnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDQycHgsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHtjc3M6e3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDM4cHgsIDApXCIsb3BhY2l0eTowfSx0aW1pbmc6dGhpcy50aW1pbmdQb3B9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19XSksZX0oKSxscj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7bigpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtuKCl9fV0pLGV9KCksdXI9e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9zcjplcn0sc2xpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9ycjplcn0sbGlmdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP2FyOm5yfSxmYWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/c3I6b3J9LFwic2xpZGUtaW9zXCI6ZXIsXCJzbGlkZS1tZFwiOnJyLFwibGlmdC1pb3NcIjpucixcImxpZnQtbWRcIjphcixcImZhZGUtaW9zXCI6b3IsXCJmYWRlLW1kXCI6c3Isbm9uZTpscn0sY3I9e3JlYWR5OmZ1bmN0aW9uKHQsZSl7ZSgpfX0saHI9ZnVuY3Rpb24odCl7cmV0dXJuXCJPTlMtUEFHRVwiIT09dC5ub2RlTmFtZSYmUS50aHJvdyhcIk9ubHkgcGFnZSBlbGVtZW50cyBjYW4gYmUgY2hpbGRyZW4gb2YgbmF2aWdhdG9yXCIpfSxkcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2lzUnVubmluZz0hMSx0Ll9pbml0aWFsaXplZD0hMSx0Ll9wYWdlTG9hZGVyPWp0LHQuX3BhZ2VNYXA9bmV3IFdlYWtNYXAsdC5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhbmltYXRvckZhY3RvcnlcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYW5pbWF0b3JGYWN0b3J5fX1dKSxnKGUsW3trZXk6XCJfZ2V0UGFnZVRhcmdldFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V8fHRoaXMuZ2V0QXR0cmlidXRlKFwicGFnZVwiKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLm9uRGV2aWNlQmFja0J1dHRvbj10aGlzLl9vbkRldmljZUJhY2tCdXR0b24uYmluZCh0aGlzKSwhQy5pc0FuZHJvaWQoKXx8XCJmb3JjZVwiPT09dGhpcy5nZXRBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIikpe3ZhciBlPXZvaWQgMDt0aGlzLl9zd2lwZT1uZXcgUW8oe2VsZW1lbnQ6dGhpcyxnZXRUaHJlc2hvbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5tYXgoLjIscGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZShcInN3aXBlLXRocmVzaG9sZFwiKSl8fDApfSxzd2lwZU1heDpmdW5jdGlvbigpe3QuX29uU3dpcGUmJnQuX29uU3dpcGUoMSx7ZHVyYXRpb246ZS5kdXJhdGlvblN3aXBlLHRpbWluZzplLnRpbWluZ1N3aXBlfSksdFt0LnN3aXBlTWF4P1wic3dpcGVNYXhcIjpcInBvcFBhZ2VcIl0oe2FuaW1hdG9yOmV9KSxlPW51bGx9LHN3aXBlTWlkOmZ1bmN0aW9uKG4saSl7dC5fb25Td2lwZSYmdC5fb25Td2lwZShuL2kpLGUudHJhbnNsYXRlKG4saSx0LnRvcFBhZ2UucHJldmlvdXNFbGVtZW50U2libGluZyx0LnRvcFBhZ2UpfSxzd2lwZU1pbjpmdW5jdGlvbigpe3QuX29uU3dpcGUmJnQuX29uU3dpcGUoMCx7ZHVyYXRpb246ZS5kdXJhdGlvblJlc3RvcmUsdGltaW5nOmUudGltaW5nU3dpcGV9KSxlLnJlc3RvcmUodC50b3BQYWdlLnByZXZpb3VzRWxlbWVudFNpYmxpbmcsdC50b3BQYWdlKSxlPW51bGx9LGlnbm9yZVN3aXBlOmZ1bmN0aW9uKG4saSl7aWYoIXQuX2lzUnVubmluZyYmdC5jaGlsZHJlbi5sZW5ndGg+MSl7dmFyIG89cGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJzd2lwZS10YXJnZXQtd2lkdGhcIil8fDI1LDEwKTtpZihcInJpZ2h0XCI9PT1uLmdlc3R1cmUuZGlyZWN0aW9uJiZvPmkpe3ZhciByPWZ1bmN0aW9uKHQpe3JldHVybi9vbnMtYmFjay1idXR0b24vaS50ZXN0KHQudGFnTmFtZSl9O2lmKCFyKG4udGFyZ2V0KSYmIVEuZmluZFBhcmVudChuLnRhcmdldCxyLGZ1bmN0aW9uKHQpe3JldHVybi9vbnMtcGFnZS9pLnRlc3QodC50YWdOYW1lKX0pKXt2YXIgYT0odC50b3BQYWdlLnB1c2hlZE9wdGlvbnN8fHt9KS5hbmltYXRpb258fHQuYW5pbWF0b3JGYWN0b3J5Ll9hbmltYXRpb24scz11clthXWluc3RhbmNlb2YgRnVuY3Rpb24/dXJbYV0uY2FsbCgpOnVyW2FdO2lmKHZvaWQgMCE9PXMmJnMuc3dpcGVhYmxlKXJldHVybiBlPW5ldyBzLCExfX19cmV0dXJuITB9fSksdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXCJzd2lwZWFibGVcIil9aWYoIXRoaXMuX2luaXRpYWxpemVkKXt0aGlzLl9pbml0aWFsaXplZD0hMDt2YXIgaT1RLmRlZmVyKCk7dGhpcy5sb2FkZWQ9aS5wcm9taXNlLGNyLnJlYWR5KHRoaXMsZnVuY3Rpb24oKXt2YXIgZT0hUS5oYXNBbnlDb21wb25lbnRBc1BhcmVudCh0KSxvPXthbmltYXRpb246XCJub25lXCIsc2hvdzplfTtpZigwPT09dC5wYWdlcy5sZW5ndGgmJnQuX2dldFBhZ2VUYXJnZXQoKSl0LnB1c2hQYWdlKHQuX2dldFBhZ2VUYXJnZXQoKSxvKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGkucmVzb2x2ZSgpfSk7ZWxzZSBpZih0LnBhZ2VzLmxlbmd0aD4wKXtmb3IodmFyIHI9MDtyPHQucGFnZXMubGVuZ3RoO3IrKylocih0LnBhZ2VzW3JdKTt0LnRvcFBhZ2UmJm4odC50b3BQYWdlLGZ1bmN0aW9uKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtpLnJlc29sdmUoKSxlJiZ0LnRvcFBhZ2UuX3Nob3coKSx0Ll91cGRhdGVMYXN0UGFnZUJhY2tCdXR0b24oKX0sMCl9KX1lbHNlIG4odCxmdW5jdGlvbigpezA9PT10LnBhZ2VzLmxlbmd0aCYmdC5fZ2V0UGFnZVRhcmdldCgpP3QucHVzaFBhZ2UodC5fZ2V0UGFnZVRhcmdldCgpLG8pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaS5yZXNvbHZlKCl9KTppLnJlc29sdmUoKX0pfSl9fX0se2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2FuaW1hdG9yRmFjdG9yeT1uZXcgTyh7YW5pbWF0b3JzOnVyLGJhc2VDbGFzczpKbyxiYXNlQ2xhc3NOYW1lOlwiTmF2aWdhdG9yQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1udWxsLHRoaXMuX3N3aXBlJiZ0aGlzLl9zd2lwZS5kaXNwb3NlKCksdGhpcy5fc3dpcGU9bnVsbH19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImFuaW1hdGlvblwiOnRoaXMuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpO2JyZWFrO2Nhc2VcInN3aXBlYWJsZVwiOnRoaXMuX3N3aXBlJiZ0aGlzLl9zd2lwZS51cGRhdGUoKX19fSx7a2V5OlwicG9wUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtlPXRoaXMuX3ByZXBhcmVQYWdlQW5kT3B0aW9ucyhudWxsLGUpLm9wdGlvbnMsUS5pc0ludGVnZXIoZS50aW1lcykmJmUudGltZXM+MSYmdGhpcy5fcmVtb3ZlUGFnZXMoZS50aW1lcyk7cmV0dXJuIHRoaXMuX3BvcFBhZ2UoZSxmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt0Ll9wYWdlTG9hZGVyLnVubG9hZCh0LnBhZ2VzW3QucGFnZXMubGVuZ3RoLTFdKSxlKCl9KX0pfX0se2tleTpcIl9wb3BQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07aWYodGhpcy5faXNSdW5uaW5nKXJldHVybiBQcm9taXNlLnJlamVjdChcInBvcFBhZ2UgaXMgYWxyZWFkeSBydW5uaW5nLlwiKTtpZih0aGlzLnBhZ2VzLmxlbmd0aDw9MSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJvbnMtbmF2aWdhdG9yJ3MgcGFnZSBzdGFjayBpcyBlbXB0eS5cIik7aWYodGhpcy5fZW1pdFByZVBvcEV2ZW50KCkpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlcG9wIGV2ZW50LlwiKTt2YXIgaT10aGlzLnBhZ2VzLmxlbmd0aDtyZXR1cm4gdGhpcy5faXNSdW5uaW5nPSEwLHRoaXMucGFnZXNbaS0yXS51cGRhdGVCYWNrQnV0dG9uKGktMj4wKSxuZXcgUHJvbWlzZShmdW5jdGlvbihvKXt2YXIgcj1lLnBhZ2VzW2ktMV0sYT1lLnBhZ2VzW2ktMl07KHQ9US5leHRlbmQoe30sZS5vcHRpb25zfHx7fSxyLnB1c2hlZE9wdGlvbnN8fHt9LHQpKS5kYXRhJiYoYS5kYXRhPVEuZXh0ZW5kKHt9LGEuZGF0YXx8e30sdC5kYXRhfHx7fSkpO3IuX2hpZGUoKSxhLnN0eWxlLmRpc3BsYXk9XCJcIjsodC5hbmltYXRvcnx8ZS5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKHQpKS5wb3AoZS5wYWdlc1tpLTJdLGUucGFnZXNbaS0xXSxmdW5jdGlvbigpe24oKS50aGVuKGZ1bmN0aW9uKCl7ZS5faXNSdW5uaW5nPSExLGEuX3Nob3coKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQoZSxcInBvc3Rwb3BcIix7bGVhdmVQYWdlOnIsZW50ZXJQYWdlOmEsbmF2aWdhdG9yOmV9KSx0LmNhbGxiYWNrJiZ0LmNhbGxiYWNrKGEpLG8oYSl9KX0pfSkuY2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZS5faXNSdW5uaW5nPSExfSl9fSx7a2V5OlwicHVzaFBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKHQsbik7dD1pLnBhZ2U7dmFyIG89ZnVuY3Rpb24oaSl7aHIoaSksZS5fcGFnZU1hcC5zZXQoaSx0KSwoaT1RLmV4dGVuZChpLHtkYXRhOm4uZGF0YX0pKS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCJ9O3JldHVybihuPWkub3B0aW9ucykucGFnZUhUTUw/dGhpcy5fcHVzaFBhZ2UobixmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0KXtIdC5sb2FkKHtwYWdlOm4ucGFnZUhUTUwscGFyZW50OmUscGFyYW1zOm4uZGF0YX0sZnVuY3Rpb24oZSl7byhlKSx0KCl9KX0pfSk6dGhpcy5fcHVzaFBhZ2UobixmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpKXtlLl9wYWdlTG9hZGVyLmxvYWQoe3BhZ2U6dCxwYXJlbnQ6ZSxwYXJhbXM6bi5kYXRhfSxmdW5jdGlvbih0KXtvKHQpLGkoKX0pfSl9KX19LHtrZXk6XCJfcHVzaFBhZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06ZnVuY3Rpb24oKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9O2lmKHRoaXMuX2lzUnVubmluZylyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJwdXNoUGFnZSBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO2lmKHRoaXMuX2VtaXRQcmVQdXNoRXZlbnQoKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZCBpbiBwcmVwdXNoIGV2ZW50LlwiKTt0aGlzLl9pc1J1bm5pbmc9ITA7dmFyIGk9Ty5wYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmcodGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKSk7ZT1RLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnN8fHt9LHthbmltYXRpb25PcHRpb25zOml9LGUpO3ZhciBvPXRoaXMuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcihlKTtyZXR1cm4gbigpLnRoZW4oZnVuY3Rpb24oKXt2YXIgbj10LnBhZ2VzLmxlbmd0aCxpPXQucGFnZXNbbi0xXSxyPWUubGVhdmVQYWdlfHx0LnBhZ2VzW24tMl07cmV0dXJuIGhyKGkpLGkudXBkYXRlQmFja0J1dHRvbihuPihlLl9yZXBsYWNlUGFnZT8yOjEpKSxpLnB1c2hlZE9wdGlvbnM9US5leHRlbmQoe30saS5wdXNoZWRPcHRpb25zfHx7fSxlfHx7fSksaS5kYXRhPVEuZXh0ZW5kKHt9LGkuZGF0YXx8e30sZS5kYXRhfHx7fSksaS51bmxvYWQ9aS51bmxvYWR8fGUudW5sb2FkLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBhPWZ1bmN0aW9uKCl7dC5faXNSdW5uaW5nPSExLCExIT09ZS5zaG93JiZzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gaS5fc2hvdygpfSksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHQsXCJwb3N0cHVzaFwiLHtsZWF2ZVBhZ2U6cixlbnRlclBhZ2U6aSxuYXZpZ2F0b3I6dH0pLHImJihyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLGUuY2FsbGJhY2smJmUuY2FsbGJhY2soaSksbihpKX07aS5zdHlsZS52aXNpYmlsaXR5PVwiXCIscj8oci5faGlkZSgpLG8ucHVzaChpLHIsYSkpOmEoKX0pfSkuY2F0Y2goZnVuY3Rpb24oZSl7dGhyb3cgdC5faXNSdW5uaW5nPSExLGV9KX19LHtrZXk6XCJyZXBsYWNlUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIHRoaXMucHVzaFBhZ2UodCxuKS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhZ2VzLmxlbmd0aD4xJiZlLl9wYWdlTG9hZGVyLnVubG9hZChlLnBhZ2VzW2UucGFnZXMubGVuZ3RoLTJdKSxlLl91cGRhdGVMYXN0UGFnZUJhY2tCdXR0b24oKSxQcm9taXNlLnJlc29sdmUodCl9KX19LHtrZXk6XCJpbnNlcnRQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLGk9YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LG89dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKGUsaSk7aWYoZT1vLnBhZ2UsaT1vLm9wdGlvbnMsKHQ9dGhpcy5fbm9ybWFsaXplSW5kZXgodCkpPj10aGlzLnBhZ2VzLmxlbmd0aClyZXR1cm4gdGhpcy5wdXNoUGFnZShlLGkpO2U9XCJzdHJpbmdcIj09dHlwZW9mIGkucGFnZUhUTUw/aS5wYWdlSFRNTDplO3ZhciByPVwic3RyaW5nXCI9PXR5cGVvZiBpLnBhZ2VIVE1MP0h0OnRoaXMuX3BhZ2VMb2FkZXI7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8pe3IubG9hZCh7cGFnZTplLHBhcmVudDpufSxmdW5jdGlvbihyKXtocihyKSxuLl9wYWdlTWFwLnNldChyLGUpLHI9US5leHRlbmQocix7ZGF0YTppLmRhdGEscHVzaGVkT3B0aW9uczppfSksaS5hbmltYXRpb25PcHRpb25zPVEuZXh0ZW5kKHt9LE8ucGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nKG4uZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpLGkuYW5pbWF0aW9uT3B0aW9uc3x8e30pLHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixuLmluc2VydEJlZm9yZShyLG4ucGFnZXNbdF0pLG4udG9wUGFnZS51cGRhdGVCYWNrQnV0dG9uKCEwKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cj1udWxsLG8obi5wYWdlc1t0XSl9LDFlMy82MCl9KX0pfX0se2tleTpcInJlbW92ZVBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVybih0PXRoaXMuX25vcm1hbGl6ZUluZGV4KHQpKTx0aGlzLnBhZ2VzLmxlbmd0aC0xP25ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBpPWUucGFnZXNbdF0sbz1lLnRvcFBhZ2U7ZS5fcGFnZU1hcC5kZWxldGUoaSksZS5fcGFnZUxvYWRlci51bmxvYWQoaSksMT09PWUucGFnZXMubGVuZ3RoJiZlLnRvcFBhZ2UudXBkYXRlQmFja0J1dHRvbighMSksbihvKX0pOnRoaXMucG9wUGFnZShuKX19LHtrZXk6XCJyZXNldFRvUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnModCxuKTtpZih0PWkucGFnZSwobj1pLm9wdGlvbnMpLmFuaW1hdG9yfHxuLmFuaW1hdGlvbnx8bi5wb3B8fChuLmFuaW1hdGlvbj1cIm5vbmVcIiksbi5wYWdlfHxuLnBhZ2VIVE1MfHwhdGhpcy5fZ2V0UGFnZVRhcmdldCgpfHwodD1uLnBhZ2U9dGhpcy5fZ2V0UGFnZVRhcmdldCgpKSxuLnBvcClyZXR1cm4gdGhpcy5fcmVtb3ZlUGFnZXMoKSx0aGlzLmluc2VydFBhZ2UoMCx0LHtkYXRhOm4uZGF0YX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gZS5wb3BQYWdlKG4pfSk7dmFyIG89bi5jYWxsYmFjaztyZXR1cm4gbi5jYWxsYmFjaz1mdW5jdGlvbih0KXtlLl9yZW1vdmVQYWdlcygpLHQudXBkYXRlQmFja0J1dHRvbighMSksbyYmbyh0KX0sdGhpcy5wdXNoUGFnZSh0LG4pfX0se2tleTpcImJyaW5nUGFnZVRvcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTstMT09PVtcIm51bWJlclwiLFwic3RyaW5nXCJdLmluZGV4T2Yodm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpJiZRLnRocm93KFwiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHBhZ2UgbmFtZSBvciB0aGUgaW5kZXggb2YgYW4gZXhpc3RpbmcgcGFnZS4gWW91IHN1cHBsaWVkIFwiK3QpO3ZhciBuPVwibnVtYmVyXCI9PXR5cGVvZiB0P3RoaXMuX25vcm1hbGl6ZUluZGV4KHQpOnRoaXMuX2xhc3RJbmRleE9mUGFnZSh0KSxpPXRoaXMucGFnZXNbbl07aWYobjwwKXJldHVybiB0aGlzLnB1c2hQYWdlKHQsZSk7cmV0dXJuIGU9dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKGksZSkub3B0aW9ucyxuPT09dGhpcy5wYWdlcy5sZW5ndGgtMT9Qcm9taXNlLnJlc29sdmUoaSk6KGl8fFEudGhyb3coXCJGYWlsZWQgdG8gZmluZCBpdGVtIFwiK3QpLHRoaXMuX2lzUnVubmluZz9Qcm9taXNlLnJlamVjdChcInB1c2hQYWdlIGlzIGFscmVhZHkgcnVubmluZy5cIik6dGhpcy5fZW1pdFByZVB1c2hFdmVudCgpP1Byb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlcHVzaCBldmVudC5cIik6KGkuc3R5bGUuZGlzcGxheT1cIlwiLGkuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLGkucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChpKSx0aGlzLl9wdXNoUGFnZShlKSkpfX0se2tleTpcIl9wcmVwYXJlUGFnZUFuZE9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuXCJvYmplY3RcIiE9KHZvaWQgMD09PWU/XCJ1bmRlZmluZWRcIjpmKGUpKSYmUS50aHJvdyhcIm9wdGlvbnMgbXVzdCBiZSBhbiBvYmplY3QuIFlvdSBzdXBwbGllZCBcIitlKSxudWxsIT09dCYmdm9pZCAwIT09dHx8IWUucGFnZXx8KHQ9ZS5wYWdlKSxlPVEuZXh0ZW5kKHt9LHRoaXMub3B0aW9uc3x8e30sZSx7cGFnZTp0fSkse3BhZ2U6dCxvcHRpb25zOmV9fX0se2tleTpcIl9yZW1vdmVQYWdlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucGFnZXMsbj12b2lkIDA9PT10PzA6ZS5sZW5ndGgtdDtuPW48MD8xOm47Zm9yKHZhciBpPWUubGVuZ3RoLTI7aT49bjtpLS0pdGhpcy5fcGFnZU1hcC5kZWxldGUoZVtpXSksdGhpcy5fcGFnZUxvYWRlci51bmxvYWQoZVtpXSl9fSx7a2V5OlwiX3VwZGF0ZUxhc3RQYWdlQmFja0J1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYWdlcy5sZW5ndGgtMTt0Pj0wJiZ0aGlzLnBhZ2VzW3RdLnVwZGF0ZUJhY2tCdXR0b24odD4wKX19LHtrZXk6XCJfbm9ybWFsaXplSW5kZXhcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdD49MD90Ok1hdGguYWJzKHRoaXMucGFnZXMubGVuZ3RoK3QpJXRoaXMucGFnZXMubGVuZ3RofX0se2tleTpcIl9vbkRldmljZUJhY2tCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnBhZ2VzLmxlbmd0aD4xP3RoaXMucG9wUGFnZSgpOnQuY2FsbFBhcmVudEhhbmRsZXIoKX19LHtrZXk6XCJfbGFzdEluZGV4T2ZQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwO2ZvcihlPXRoaXMucGFnZXMubGVuZ3RoLTE7ZT49MCYmKHRoaXMuX3BhZ2VNYXAuaGFzKHRoaXMucGFnZXNbZV0pfHxRLnRocm93KFwiSW5jb3JyZWN0IHN0YXRlIG9mIHBhZ2VNYXBcIiksdCE9PXRoaXMuX3BhZ2VNYXAuZ2V0KHRoaXMucGFnZXNbZV0pKTtlLS0pO3JldHVybiBlfX0se2tleTpcIl9lbWl0UHJlRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj0hMTtyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwcmVcIit0LFEuZXh0ZW5kKHtuYXZpZ2F0b3I6dGhpcyxjdXJyZW50UGFnZTp0aGlzLnBhZ2VzW3RoaXMucGFnZXMubGVuZ3RoLTFdLGNhbmNlbDpmdW5jdGlvbigpe3JldHVybiBuPSEwfX0sZSkpLG59fSx7a2V5OlwiX2VtaXRQcmVQdXNoRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbWl0UHJlRXZlbnQoXCJwdXNoXCIpfX0se2tleTpcIl9lbWl0UHJlUG9wRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMucGFnZXMubGVuZ3RoO3JldHVybiB0aGlzLl9lbWl0UHJlRXZlbnQoXCJwb3BcIix7bGVhdmVQYWdlOnRoaXMucGFnZXNbdC0xXSxlbnRlclBhZ2U6dGhpcy5wYWdlc1t0LTJdfSl9fSx7a2V5OlwiX2NyZWF0ZVBhZ2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9US5jcmVhdGVFbGVtZW50KFAubm9ybWFsaXplUGFnZUhUTUwodCkpO3JldHVybiBocihlKSxlfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMubG9hZGVkLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC50b3BQYWdlJiZ0LnRvcFBhZ2UuX3Nob3coKX0pfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvcFBhZ2UmJnRoaXMudG9wUGFnZS5faGlkZSgpfX0se2tleTpcIl9kZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5wYWdlcy5sZW5ndGgtMTt0Pj0wO3QtLSl0aGlzLl9wYWdlTG9hZGVyLnVubG9hZCh0aGlzLnBhZ2VzW3RdKTt0aGlzLnJlbW92ZSgpfX0se2tleTpcInBhZ2VMb2FkZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZUxvYWRlcn0sc2V0OmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBCdHx8US50aHJvd1BhZ2VMb2FkZXIoKSx0aGlzLl9wYWdlTG9hZGVyPXR9fSx7a2V5OlwicGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFnZT10fX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fSx7a2V5OlwidG9wUGFnZVwiLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmxhc3RFbGVtZW50Q2hpbGQ7dCYmXCJPTlMtUEFHRVwiIT09dC50YWdOYW1lOyl0PXQucHJldmlvdXNFbGVtZW50U2libGluZztyZXR1cm4gdH19LHtrZXk6XCJwYWdlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbSh0aGlzLmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJPTlMtUEFHRVwiPT09dC50YWdOYW1lfSl9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX0se2tleTpcIm9wdGlvbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnM9dH19LHtrZXk6XCJfaXNSdW5uaW5nXCIsc2V0OmZ1bmN0aW9uKHQpe3RoaXMuc2V0QXR0cmlidXRlKFwiX2lzLXJ1bm5pbmdcIix0P1widHJ1ZVwiOlwiZmFsc2VcIil9LGdldDpmdW5jdGlvbigpe3JldHVybiBKU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKFwiX2lzLXJ1bm5pbmdcIikpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBKb3x8US50aHJvd0FuaW1hdG9yKFwiTmF2aWdhdG9yXCIpLHVyW3RdPWV9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiYW5pbWF0aW9uXCIsXCJzd2lwZWFibGVcIl19fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHVyfX0se2tleTpcIk5hdmlnYXRvckFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEpvfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcInByZXB1c2hcIixcInBvc3RwdXNoXCIsXCJwcmVwb3BcIixcInBvc3Rwb3BcIl19fSx7a2V5OlwicmV3cml0YWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gY3J9fV0pLGV9KCk7Yy5OYXZpZ2F0b3I9ZHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLW5hdmlnYXRvclwiLGRyKTt2YXIgZnI9e1wiXCI6XCJ0b29sYmFyLS0qXCIsXCIudG9vbGJhcl9fbGVmdFwiOlwidG9vbGJhci0tKl9fbGVmdFwiLFwiLnRvb2xiYXJfX2NlbnRlclwiOlwidG9vbGJhci0tKl9fY2VudGVyXCIsXCIudG9vbGJhcl9fcmlnaHRcIjpcInRvb2xiYXItLSpfX3JpZ2h0XCJ9LHByPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInRvb2xiYXJcIixmcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLGZyKX19fSx7a2V5OlwiX2dldFRvb2xiYXJMZWZ0SXRlbXNFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmxlZnRcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJDZW50ZXJJdGVtc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuY2VudGVyXCIpfHxQLm51bGxFbGVtZW50fX0se2tleTpcIl9nZXRUb29sYmFyUmlnaHRJdGVtc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIucmlnaHRcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJCYWNrQnV0dG9uTGFiZWxFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwib25zLWJhY2stYnV0dG9uIC5iYWNrLWJ1dHRvbl9fbGFiZWxcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJCYWNrQnV0dG9uSWNvbkVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJvbnMtYmFjay1idXR0b24gLmJhY2stYnV0dG9uX19pY29uXCIpfHxQLm51bGxFbGVtZW50fX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwidG9vbGJhclwiKSx0aGlzLl9lbnN1cmVUb29sYmFySXRlbUVsZW1lbnRzKCksQi5pbml0TW9kaWZpZXIodGhpcyxmcil9fSx7a2V5OlwiX2Vuc3VyZVRvb2xiYXJJdGVtRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLmNoaWxkTm9kZXMubGVuZ3RoLTE7dD49MDt0LS0pMSE9dGhpcy5jaGlsZE5vZGVzW3RdLm5vZGVUeXBlJiZ0aGlzLnJlbW92ZUNoaWxkKHRoaXMuY2hpbGROb2Rlc1t0XSk7dmFyIGU9dGhpcy5fZW5zdXJlVG9vbGJhckVsZW1lbnQoXCJjZW50ZXJcIik7aWYoZS5jbGFzc0xpc3QuYWRkKFwidG9vbGJhcl9fdGl0bGVcIiksMSE9PXRoaXMuY2hpbGRyZW4ubGVuZ3RofHwhdGhpcy5jaGlsZHJlblswXS5jbGFzc0xpc3QuY29udGFpbnMoXCJjZW50ZXJcIikpe3ZhciBuPXRoaXMuX2Vuc3VyZVRvb2xiYXJFbGVtZW50KFwibGVmdFwiKSxpPXRoaXMuX2Vuc3VyZVRvb2xiYXJFbGVtZW50KFwicmlnaHRcIik7dGhpcy5jaGlsZHJlblswXT09PW4mJnRoaXMuY2hpbGRyZW5bMV09PT1lJiZ0aGlzLmNoaWxkcmVuWzJdPT09aXx8KHRoaXMuYXBwZW5kQ2hpbGQobiksdGhpcy5hcHBlbmRDaGlsZChlKSx0aGlzLmFwcGVuZENoaWxkKGkpKX19fSx7a2V5OlwiX2Vuc3VyZVRvb2xiYXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoUS5maW5kQ2hpbGQodGhpcyxcIi50b29sYmFyX19cIit0KSl7dmFyIGU9US5maW5kQ2hpbGQodGhpcyxcIi50b29sYmFyX19cIit0KTtyZXR1cm4gZS5jbGFzc0xpc3QuYWRkKHQpLGV9dmFyIG49US5maW5kQ2hpbGQodGhpcyxcIi5cIit0KXx8US5jcmVhdGUoXCIuXCIrdCk7cmV0dXJuIG4uY2xhc3NMaXN0LmFkZChcInRvb2xiYXJfX1wiK3QpLG59fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5Ub29sYmFyPXByLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy10b29sYmFyXCIscHIpO3ZhciBncj1cInBhZ2VcIixtcj17XCJcIjpcInBhZ2UtLSpcIixcIi5wYWdlX19jb250ZW50XCI6XCJwYWdlLS0qX19jb250ZW50XCIsXCIucGFnZV9fYmFja2dyb3VuZFwiOlwicGFnZS0tKl9fYmFja2dyb3VuZFwifSxfcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2Rlcml2ZUhvb2tzKCksdC5fZGVmYXVsdENsYXNzTmFtZT1ncix0LmNsYXNzTGlzdC5hZGQoZ3IpLHQuX2luaXRpYWxpemVkPSExLG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKSx0Ll9pc1Nob3duPSExLHQuX2NvbnRlbnRFbGVtZW50PXQuX2dldENvbnRlbnRFbGVtZW50KCksdC5fYmFja2dyb3VuZEVsZW1lbnQ9dC5fZ2V0QmFja2dyb3VuZEVsZW1lbnQoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7Ti5wcmVwYXJlKHRoaXMpO3ZhciBlPVEuZmluZENoaWxkKHRoaXMsXCJvbnMtdG9vbGJhclwiKSxuPVEuZmluZENoaWxkKHRoaXMsXCIucGFnZV9fYmFja2dyb3VuZFwiKXx8US5maW5kQ2hpbGQodGhpcyxcIi5iYWNrZ3JvdW5kXCIpfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NMaXN0LmFkZChcInBhZ2VfX2JhY2tncm91bmRcIiksdGhpcy5pbnNlcnRCZWZvcmUobiwhZSYmdGhpcy5maXJzdENoaWxkfHxlJiZlLm5leHRTaWJsaW5nKTt2YXIgaT1RLmZpbmRDaGlsZCh0aGlzLFwiLnBhZ2VfX2NvbnRlbnRcIil8fFEuZmluZENoaWxkKHRoaXMsXCIuY29udGVudFwiKXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTGlzdC5hZGQoXCJwYWdlX19jb250ZW50XCIpLGkucGFyZW50RWxlbWVudHx8US5hcnJheUZyb20odGhpcy5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpeygxIT09ZS5ub2RlVHlwZXx8dC5fZWxlbWVudFNob3VsZEJlTW92ZWQoZSkpJiZpLmFwcGVuZENoaWxkKGUpfSksdGhpcy5fdHJ5VG9GaWxsU3RhdHVzQmFyKGkpLHRoaXMuaW5zZXJ0QmVmb3JlKGksbi5uZXh0U2libGluZyksZSYmUS5oYXNNb2RpZmllcihlLFwidHJhbnNwYXJlbnRcIil8fDEhPT1pLmNoaWxkcmVuLmxlbmd0aHx8IVEuaXNQYWdlQ29udHJvbChpLmNoaWxkcmVuWzBdKXx8KHRoaXMuX2RlZmF1bHRDbGFzc05hbWUrPVwiIHBhZ2UtLXdyYXBwZXJcIix0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcImNsYXNzXCIpKSxCLmluaXRNb2RpZmllcih0aGlzLG1yKX19LHtrZXk6XCJfZWxlbWVudFNob3VsZEJlTW92ZWRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0LmNsYXNzTGlzdC5jb250YWlucyhcInBhZ2VfX2JhY2tncm91bmRcIikpcmV0dXJuITE7dmFyIGU9dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7aWYoXCJvbnMtZmFiXCI9PT1lKXJldHVybiF0Lmhhc0F0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcImlubGluZVwiKXx8LTE9PT1bXCJzY3JpcHRcIixcIm9ucy10b29sYmFyXCIsXCJvbnMtYm90dG9tLXRvb2xiYXJcIixcIm9ucy1tb2RhbFwiLFwib25zLXNwZWVkLWRpYWxcIixcIm9ucy1kaWFsb2dcIixcIm9ucy1hbGVydC1kaWFsb2dcIixcIm9ucy1wb3BvdmVyXCIsXCJvbnMtYWN0aW9uLXNoZWV0XCJdLmluZGV4T2YoZSl9fSx7a2V5OlwiX3RyeVRvRmlsbFN0YXR1c0JhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLl9jb250ZW50RWxlbWVudDtQLmF1dG9TdGF0dXNCYXJGaWxsKGZ1bmN0aW9uKCl7US50b2dnbGVBdHRyaWJ1dGUodCxcInN0YXR1cy1iYXItZmlsbFwiLCFRLmZpbmRQYXJlbnQodCxmdW5jdGlvbih0KXtyZXR1cm4gdC5oYXNBdHRyaWJ1dGUoXCJzdGF0dXMtYmFyLWZpbGxcIil9KSYmKHQuX2NhbkFuaW1hdGVUb29sYmFyKGUpfHwhUS5maW5kQ2hpbGQoZSxRLmlzUGFnZUNvbnRyb2wpKSl9KX19LHtrZXk6XCJfY2FuQW5pbWF0ZVRvb2xiYXJcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLl9jb250ZW50RWxlbWVudDtyZXR1cm4hIVEuZmluZENoaWxkKHRoaXMsXCJvbnMtdG9vbGJhclwiKXx8ISFRLmZpbmRDaGlsZCh0LGZ1bmN0aW9uKHQpe3JldHVybiBRLm1hdGNoKHQsXCJvbnMtdG9vbGJhclwiKSYmIXQuaGFzQXR0cmlidXRlKFwiaW5saW5lXCIpfSl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7US5pc0F0dGFjaGVkKHRoaXMpJiZuKHRoaXMsZnVuY3Rpb24oKXt0Ll90cnlUb0ZpbGxTdGF0dXNCYXIoKSx0Lmhhc0F0dHJpYnV0ZShcIm9uLWluZmluaXRlLXNjcm9sbFwiKSYmdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXCJvbi1pbmZpbml0ZS1zY3JvbGxcIixudWxsLHQuZ2V0QXR0cmlidXRlKFwib24taW5maW5pdGUtc2Nyb2xsXCIpKSx0Ll9pbml0aWFsaXplZHx8KHQuX2luaXRpYWxpemVkPSEwLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3Qub25Jbml0JiZ0Lm9uSW5pdCgpLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0LFwiaW5pdFwiKX0pLFEuaGFzQW55Q29tcG9uZW50QXNQYXJlbnQodCl8fHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9zaG93KCl9KSl9KX19LHtrZXk6XCJ1cGRhdGVCYWNrQnV0dG9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5iYWNrQnV0dG9uJiYodD90aGlzLmJhY2tCdXR0b24uc2hvdygpOnRoaXMuYmFja0J1dHRvbi5oaWRlKCkpfX0se2tleTpcIl9vblNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPXRoaXMuX2NvbnRlbnRFbGVtZW50LG49KGUuc2Nyb2xsVG9wK2UuY2xpZW50SGVpZ2h0KS9lLnNjcm9sbEhlaWdodD49dGhpcy5faW5maW5pdGVTY3JvbGxMaW1pdDt0aGlzLl9vbkluZmluaXRlU2Nyb2xsJiYhdGhpcy5fbG9hZGluZ0NvbnRlbnQmJm4mJih0aGlzLl9sb2FkaW5nQ29udGVudD0hMCx0aGlzLl9vbkluZmluaXRlU2Nyb2xsKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2xvYWRpbmdDb250ZW50PSExfSkpfX0se2tleTpcIl9nZXRDb250ZW50RWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi5wYWdlX19jb250ZW50XCIpO2lmKHQpcmV0dXJuIHQ7US50aHJvdygnRmFpbCB0byBnZXQgXCIucGFnZV9fY29udGVudFwiIGVsZW1lbnQnKX19LHtrZXk6XCJfZ2V0QmFja2dyb3VuZEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVEuZmluZENoaWxkKHRoaXMsXCIucGFnZV9fYmFja2dyb3VuZFwiKTtpZih0KXJldHVybiB0O1EudGhyb3coJ0ZhaWwgdG8gZ2V0IFwiLnBhZ2VfX2JhY2tncm91bmRcIiBlbGVtZW50Jyl9fSx7a2V5OlwiX2dldEJvdHRvbVRvb2xiYXJFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1ib3R0b20tdG9vbGJhclwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLXRvb2xiYXJcIil8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvbnMtdG9vbGJhclwiKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcztzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUsbXIpO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxtcik7YnJlYWs7Y2FzZVwib24taW5maW5pdGUtc2Nyb2xsXCI6dGhpcy5vbkluZmluaXRlU2Nyb2xsPW51bGw9PT1uP251bGw6ZnVuY3Rpb24odCl7dmFyIGU9US5maW5kRnJvbVBhdGgobik7aS5vbkluZmluaXRlU2Nyb2xsPWUsZSh0KX19fX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXshdGhpcy5faXNTaG93biYmUS5pc0F0dGFjaGVkKHRoaXMpJiYodGhpcy5faXNTaG93bj0hMCx0aGlzLnNldEF0dHJpYnV0ZShcInNob3duXCIsXCJcIiksdGhpcy5vblNob3cmJnRoaXMub25TaG93KCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJzaG93XCIpLFEucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfc2hvd1wiKSl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzU2hvd24mJih0aGlzLl9pc1Nob3duPSExLHRoaXMucmVtb3ZlQXR0cmlidXRlKFwic2hvd25cIiksdGhpcy5vbkhpZGUmJnRoaXMub25IaWRlKCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJoaWRlXCIpLFEucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfaGlkZVwiKSl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hpZGUoKSx0aGlzLm9uRGVzdHJveSYmdGhpcy5vbkRlc3Ryb3koKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImRlc3Ryb3lcIiksdGhpcy5vbkRldmljZUJhY2tCdXR0b24mJnRoaXMub25EZXZpY2VCYWNrQnV0dG9uLmRlc3Ryb3koKSxRLnByb3BhZ2F0ZUFjdGlvbih0aGlzLFwiX2Rlc3Ryb3lcIiksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJfZGVyaXZlSG9va3NcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5jb25zdHJ1Y3Rvci5ldmVudHMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1cIm9uXCIrZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKStlLnNsaWNlKDEpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LG4se2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0W1wiX1wiK25dfSxzZXQ6ZnVuY3Rpb24oZSl7ZSBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxRLnRocm93KCdcIicrbisnXCIgaG9vayBtdXN0IGJlIGEgZnVuY3Rpb24nKSx0W1wiX1wiK25dPWUuYmluZCh0KX19KX0pfX0se2tleTpcIm5hbWVcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcIm5hbWVcIil9fSx7a2V5OlwiYmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJvbnMtYmFjay1idXR0b25cIil9fSx7a2V5Olwib25JbmZpbml0ZVNjcm9sbFwiLHNldDpmdW5jdGlvbih0KXt2YXIgZT10aGlzOyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wib25JbmZpbml0ZVNjcm9sbFwiIG11c3QgYmUgZnVuY3Rpb24gb3IgbnVsbCcpLG4odGhpcyxmdW5jdGlvbigpe3Q/ZS5fb25JbmZpbml0ZVNjcm9sbHx8KGUuX2luZmluaXRlU2Nyb2xsTGltaXQ9LjksZS5fYm91bmRPblNjcm9sbD1lLl9vblNjcm9sbC5iaW5kKGUpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9jb250ZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZS5fYm91bmRPblNjcm9sbCl9KSk6ZS5fY29udGVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLGUuX2JvdW5kT25TY3JvbGwpLGUuX29uSW5maW5pdGVTY3JvbGw9dH0pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25JbmZpbml0ZVNjcm9sbH19LHtrZXk6XCJvbkRldmljZUJhY2tCdXR0b25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYmFja0J1dHRvbkhhbmRsZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9iYWNrQnV0dG9uSGFuZGxlciYmdGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPVIuY3JlYXRlSGFuZGxlcih0aGlzLHQpfX0se2tleTpcInNjcm9sbFRvcFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZW50RWxlbWVudC5zY3JvbGxUb3B9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb250ZW50RWxlbWVudC5zY3JvbGxUb3A9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJvbi1pbmZpbml0ZS1zY3JvbGxcIixcImNsYXNzXCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImluaXRcIixcInNob3dcIixcImhpZGVcIixcImRlc3Ryb3lcIl19fV0pLGV9KCk7Yy5QYWdlPV9yLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1wYWdlXCIsX3IpO3ZhciB2cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiX2FuaW1hdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuZnJvbSxpPWUudG8sbz1lLm9wdGlvbnMscj1lLmNhbGxiYWNrLGE9ZS5yZXN0b3JlLHM9dm9pZCAwIT09YSYmYSxsPWUuYW5pbWF0aW9uO3JldHVybiBvPVEuZXh0ZW5kKHt9LHRoaXMub3B0aW9ucyxvKSxsJiYobj1sLmZyb20saT1sLnRvKSxsPW50KHQpLHMmJihsPWwuc2F2ZVN0eWxlKCkpLGw9bC5xdWV1ZShuKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtjc3M6aSxkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHRpbWluZzp0aGlzLnRpbWluZ30pLHMmJihsPWwucmVzdG9yZVN0eWxlKCkpLHImJihsPWwucXVldWUoZnVuY3Rpb24odCl7cigpLHQoKX0pKSxsfX0se2tleTpcIl9hbmltYXRlQWxsXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO09iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24oaSl7cmV0dXJuIG4uX2FuaW1hdGUodFtpXSxlW2ldKS5wbGF5KCl9KX19XSksZX0oKSxicj17b3V0Ontmcm9tOntvcGFjaXR5OjF9LHRvOntvcGFjaXR5OjB9fSxpbjp7ZnJvbTp7b3BhY2l0eTowfSx0bzp7b3BhY2l0eToxfX19LHlyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLHZyKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9hbmltYXRlQWxsKHQse19tYXNrOmJyLmluLF9wb3BvdmVyOnthbmltYXRpb246YnIuaW4scmVzdG9yZTohMCxjYWxsYmFjazplfX0pfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2FuaW1hdGVBbGwodCx7X21hc2s6YnIub3V0LF9wb3BvdmVyOnthbmltYXRpb246YnIub3V0LHJlc3RvcmU6ITAsY2FsbGJhY2s6ZX19KX19XSksZX0oKSxrcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSx5ciksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUFsbCh0LHtfbWFzazpici5pbixfcG9wb3Zlcjp7ZnJvbTp7dHJhbnNmb3JtOlwic2NhbGUzZCgxLjMsIDEuMywgMS4wKVwiLG9wYWNpdHk6MH0sdG86e3RyYW5zZm9ybTpcInNjYWxlM2QoMS4wLCAxLjAsICAxLjApXCIsb3BhY2l0eToxfSxyZXN0b3JlOiEwLGNhbGxiYWNrOmV9fSl9fV0pLGV9KCksd3I9e1wiLnBvcG92ZXJcIjpcInBvcG92ZXItLSpcIixcIi5wb3BvdmVyLW1hc2tcIjpcInBvcG92ZXItbWFzay0tKlwiLFwiLnBvcG92ZXJfX2NvbnRlbnRcIjpcInBvcG92ZXItLSpfX2NvbnRlbnRcIixcIi5wb3BvdmVyX19hcnJvd1wiOlwicG9wb3Zlci0tKl9fYXJyb3dcIn0sRXI9e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT95cjprcn0sbm9uZTp2cixcImZhZGUtaW9zXCI6a3IsXCJmYWRlLW1kXCI6eXJ9LENyPXt1cDpcImJvdHRvbVwiLGxlZnQ6XCJyaWdodFwiLGRvd246XCJ0b3BcIixyaWdodDpcImxlZnRcIn0sQXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9ib3VuZE9uQ2hhbmdlPXQuX29uQ2hhbmdlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpLHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6RXIsYmFzZUNsYXNzOnZyLGJhc2VDbGFzc05hbWU6XCJQb3BvdmVyQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfHxcImRlZmF1bHRcIn0pfX0se2tleTpcIl90b2dnbGVTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0Pyh0aGlzLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLHRoaXMuX2N1cnJlbnRUYXJnZXQ9ZS50YXJnZXQsdGhpcy5fcG9zaXRpb25Qb3BvdmVyKGUudGFyZ2V0KSk6KHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLl9jbGVhclN0eWxlcygpKX19LHtrZXk6XCJfcG9zaXRpb25Qb3BvdmVyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcmFkaXVzLG49dGhpcy5fY29udGVudCxpPXRoaXMuX21hcmdpbixvPUxpLmdldFNhZmVBcmVhTGVuZ3RocygpLHI9TGkuZ2V0U2FmZUFyZWFET01SZWN0KCksYT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLHM9US5oYXNNb2RpZmllcih0aGlzLFwibWF0ZXJpYWxcIiksbD1zJiZ0aGlzLmhhc0F0dHJpYnV0ZShcImNvdmVyLXRhcmdldFwiKSx1PShRLmZpbmRQYXJlbnQodGhpcyxcIm9ucy1wYWdlXCIpfHxkb2N1bWVudC5ib2R5KS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPXt0b3A6TWF0aC5tYXgodS50b3Asci50b3ApLGxlZnQ6TWF0aC5tYXgodS5sZWZ0LHIubGVmdCksYm90dG9tOk1hdGgubWluKHUuYm90dG9tLHIuYm90dG9tKSxyaWdodDpNYXRoLm1pbih1LnJpZ2h0LHIucmlnaHQpfSxoPXt0b3A6YS50b3AtKGMudG9wK2kpLGxlZnQ6YS5sZWZ0LShjLmxlZnQraSksYm90dG9tOmMuYm90dG9tLWktYS5ib3R0b20scmlnaHQ6Yy5yaWdodC1pLWEucmlnaHR9LGQ9e3RvcDphLnRvcCtNYXRoLnJvdW5kKGEuaGVpZ2h0LzIpLShjLnRvcCtpKSxsZWZ0OmEubGVmdCtNYXRoLnJvdW5kKGEud2lkdGgvMiktKGMubGVmdCtpKSxib3R0b206Yy5ib3R0b20taS1hLmJvdHRvbStNYXRoLnJvdW5kKGEuaGVpZ2h0LzIpLHJpZ2h0OmMucmlnaHQtaS1hLnJpZ2h0K01hdGgucm91bmQoYS53aWR0aC8yKX0sZj10aGlzLl9jYWxjdWxhdGVEaXJlY3Rpb25zKGgpLHA9Zi52ZXJ0aWNhbCxnPWYucHJpbWFyeSxtPWYuc2Vjb25kYXJ5O3RoaXMuX2N1cnJlbnREaXJlY3Rpb249ZyxRLmFkZE1vZGlmaWVyKHRoaXMsZyk7dmFyIF89cD9cIndpZHRoXCI6XCJoZWlnaHRcIix2PWZ1bmN0aW9uKHQpe3JldHVybnt3aWR0aDpwYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoXCJ3aWR0aFwiKSwxMCksaGVpZ2h0OnBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcImhlaWdodFwiKSwxMCl9fSh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShuKSksYj1sPzA6KHA/YS5oZWlnaHQ6YS53aWR0aCkrKHM/MDoxNCkseT1NYXRoLm1heChvW2ddK2ksb1tnXStpK2hbZ10rYiksaz1NYXRoLm1heChvW21dK2ksb1ttXStpK2RbbV0tdltfXS8yKTt0aGlzLl9wb3BvdmVyLnN0eWxlW2ddPXkrXCJweFwiLHRoaXMuX3BvcG92ZXIuc3R5bGVbbV09aytcInB4XCIsdGhpcy5fYXJyb3cuc3R5bGVbbV09TWF0aC5tYXgoZSxvW21dK2krZFttXS1rKStcInB4XCJ9fSx7a2V5OlwiX2NhbGN1bGF0ZURpcmVjdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT0odGhpcy5nZXRBdHRyaWJ1dGUoXCJkaXJlY3Rpb25cIil8fFwidXAgZG93biBsZWZ0IHJpZ2h0XCIpLnNwbGl0KC9cXHMrLykubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBDclt0XX0pLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdFtlXS10W25dfSlbMF0sbj1cInRvcFwiPT1lfHxcImJvdHRvbVwiPT1lLGk9dm9pZCAwO3JldHVybiBpPW4/dC5sZWZ0PHQucmlnaHQ/XCJsZWZ0XCI6XCJyaWdodFwiOnQudG9wPHQuYm90dG9tP1widG9wXCI6XCJib3R0b21cIix7dmVydGljYWw6bixwcmltYXJ5OmUsc2Vjb25kYXJ5Oml9fX0se2tleTpcIl9jbGVhclN0eWxlc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9jdXJyZW50RGlyZWN0aW9uPW51bGwsW1widG9wXCIsXCJib3R0b21cIixcImxlZnRcIixcInJpZ2h0XCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dC5fYXJyb3cuc3R5bGVbZV09dC5fY29udGVudC5zdHlsZVtlXT10Ll9wb3BvdmVyLnN0eWxlW2VdPVwiXCIsUS5yZW1vdmVNb2RpZmllcih0LGUpfSl9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3QuX2N1cnJlbnRUYXJnZXQmJnQuX3Bvc2l0aW9uUG9wb3Zlcih0Ll9jdXJyZW50VGFyZ2V0KX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksIXRoaXMuX3BvcG92ZXJ8fCF0aGlzLl9tYXNrKXtpZih0aGlzLl9wb3BvdmVyJiZ0aGlzLl9jb250ZW50KXtpZighdGhpcy5fbWFzayl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTGlzdC5hZGQoXCJwb3BvdmVyLW1hc2tcIiksdGhpcy5pbnNlcnRCZWZvcmUodCx0aGlzLmZpcnN0Q2hpbGQpfWlmKCF0aGlzLl9hcnJvdyl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTGlzdC5hZGQoXCJwb3BvdmVyX19hcnJvd1wiKSx0aGlzLl9wb3BvdmVyLmFwcGVuZENoaWxkKGUpfX1lbHNle2Zvcih2YXIgbj1RLmNyZWF0ZUZyYWdtZW50KCdcXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLW1hc2tcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyX19jb250ZW50XCI+PC9kaXY+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyX19hcnJvd1wiPjwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgJyksaT1uLnF1ZXJ5U2VsZWN0b3IoXCIucG9wb3Zlcl9fY29udGVudFwiKTt0aGlzLmNoaWxkTm9kZXNbMF07KWkuYXBwZW5kQ2hpbGQodGhpcy5jaGlsZE5vZGVzWzBdKTt0aGlzLmFwcGVuZENoaWxkKG4pfXRoaXMuaGFzQXR0cmlidXRlKFwic3R5bGVcIikmJih0aGlzLl9wb3BvdmVyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSksdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKSksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3JldHVyblwic3RyaW5nXCI9PXR5cGVvZihuPSF0fHxcIm9iamVjdFwiIT09KHZvaWQgMD09PXQ/XCJ1bmRlZmluZWRcIjpmKHQpKXx8dCBpbnN0YW5jZW9mIEV2ZW50fHx0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/Xyh7fSxuLHt0YXJnZXQ6dH0pOl8oe30sdCkpLnRhcmdldD9uLnRhcmdldD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKG4udGFyZ2V0KTpuLnRhcmdldCBpbnN0YW5jZW9mIEV2ZW50JiYobi50YXJnZXQ9bi50YXJnZXQudGFyZ2V0KSxuLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fHxRLnRocm93KFwiSW52YWxpZCB0YXJnZXQgdHlwZSBvciB1bmRlZmluZWRcIiksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJzaG93XCIsdGhpcykuY2FsbCh0aGlzLG4pfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMSksdGhpcy5fbWFyZ2luPXRoaXMuX21hcmdpbnx8cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcykuZ2V0UHJvcGVydHlWYWx1ZShcInRvcFwiKSksdGhpcy5fbWFyZ2luPXRoaXMuX21hcmdpbnx8NixuKHRoaXMsZnVuY3Rpb24oKXt0Ll9yYWRpdXM9cGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodC5fY29udGVudCkuZ2V0UHJvcGVydHlWYWx1ZShcImJvcmRlci10b3AtbGVmdC1yYWRpdXNcIikpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe2lmKFwiZGlyZWN0aW9uXCI9PT10KXJldHVybiB0aGlzLl9ib3VuZE9uQ2hhbmdlKCk7XCJtb2RpZmllclwiPT09dCYmdGhpcy5fY3VycmVudERpcmVjdGlvbiYmUS5hZGRNb2RpZmllcih0aGlzLHRoaXMuX2N1cnJlbnREaXJlY3Rpb24pLHYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHdyfX0se2tleTpcIl9tYXNrXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIucG9wb3Zlci1tYXNrXCIpfX0se2tleTpcIl9wb3BvdmVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIucG9wb3ZlclwiKX19LHtrZXk6XCJfY29udGVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLl9wb3BvdmVyLFwiLnBvcG92ZXJfX2NvbnRlbnRcIil9fSx7a2V5OlwiX2Fycm93XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX3BvcG92ZXIsXCIucG9wb3Zlcl9fYXJyb3dcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIHZyfHxRLnRocm93QW5pbWF0b3IoXCJQb3BvdmVyXCIpLEVyW3RdPWV9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcImRpcmVjdGlvblwiXSl9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEVyfX0se2tleTpcIlBvcG92ZXJBbmltYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB2cn19XSksZX0oKTtjLlBvcG92ZXI9QXIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXBvcG92ZXJcIixBcik7dmFyIFNyPXtcIi5wcm9ncmVzcy1iYXJcIjpcInByb2dyZXNzLWJhci0tKlwiLFwiLnByb2dyZXNzLWJhcl9fcHJpbWFyeVwiOlwicHJvZ3Jlc3MtYmFyLS0qX19wcmltYXJ5XCIsXCIucHJvZ3Jlc3MtYmFyX19zZWNvbmRhcnlcIjpcInByb2dyZXNzLWJhci0tKl9fc2Vjb25kYXJ5XCJ9LFByPVEuY3JlYXRlRWxlbWVudCgnXFxuICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyXCI+XFxuICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCI+PC9kaXY+XFxuICA8L2Rpdj5cXG4nKSxPcj1cImluZGV0ZXJtaW5hdGVcIix4cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0NvbXBpbGVkKCk/dGhpcy5fdGVtcGxhdGU9US5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1iYXJcIik6dGhpcy5fdGVtcGxhdGU9UHIuY2xvbmVOb2RlKCEwKSx0aGlzLl9wcmltYXJ5PVEuZmluZENoaWxkKHRoaXMuX3RlbXBsYXRlLFwiLnByb2dyZXNzLWJhcl9fcHJpbWFyeVwiKSx0aGlzLl9zZWNvbmRhcnk9US5maW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUsXCIucHJvZ3Jlc3MtYmFyX19zZWNvbmRhcnlcIiksdGhpcy5fdXBkYXRlRGV0ZXJtaW5hdGUoKSx0aGlzLl91cGRhdGVWYWx1ZSgpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUpLE4ucHJlcGFyZSh0aGlzKSxCLmluaXRNb2RpZmllcih0aGlzLFNyKX19LHtrZXk6XCJfaXNDb21waWxlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtYmFyXCIpKXJldHVybiExO3ZhciB0PVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtYmFyXCIpO3JldHVybiEhUS5maW5kQ2hpbGQodCxcIi5wcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiKSYmISFRLmZpbmRDaGlsZCh0LFwiLnByb2dyZXNzLWJhcl9fcHJpbWFyeVwiKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7XCJtb2RpZmllclwiPT09dD8oQi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxTciksdGhpcy5oYXNBdHRyaWJ1dGUoT3IpJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpKTpcInZhbHVlXCI9PT10fHxcInNlY29uZGFyeS12YWx1ZVwiPT09dD90aGlzLl91cGRhdGVWYWx1ZSgpOnQ9PT1PciYmdGhpcy5fdXBkYXRlRGV0ZXJtaW5hdGUoKX19LHtrZXk6XCJfdXBkYXRlRGV0ZXJtaW5hdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIFEudG9nZ2xlTW9kaWZpZXIodCxPcix7Zm9yY2U6dC5oYXNBdHRyaWJ1dGUoT3IpfSl9KX19LHtrZXk6XCJfdXBkYXRlVmFsdWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5fcHJpbWFyeS5zdHlsZS53aWR0aD10Lmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpP3QuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikrXCIlXCI6XCIwJVwiLHQuX3NlY29uZGFyeS5zdHlsZS53aWR0aD10Lmhhc0F0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKT90LmdldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKStcIiVcIjpcIjAlXCJ9KX19LHtrZXk6XCJ2YWx1ZVwiLHNldDpmdW5jdGlvbih0KXsoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xMDApJiZRLnRocm93KFwiSW52YWxpZCB2YWx1ZVwiKSx0aGlzLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsTWF0aC5mbG9vcih0KSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfHxcIjBcIil9fSx7a2V5Olwic2Vjb25kYXJ5VmFsdWVcIixzZXQ6ZnVuY3Rpb24odCl7KFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MTAwKSYmUS50aHJvdyhcIkludmFsaWQgdmFsdWVcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIixNYXRoLmZsb29yKHQpKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpfHxcIjBcIil9fSx7a2V5OlwiaW5kZXRlcm1pbmF0ZVwiLHNldDpmdW5jdGlvbih0KXt0P3RoaXMuc2V0QXR0cmlidXRlKE9yLFwiXCIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKE9yKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKE9yKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJ2YWx1ZVwiLFwic2Vjb25kYXJ5LXZhbHVlXCIsT3JdfX1dKSxlfSgpO2MuUHJvZ3Jlc3NCYXI9eHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXByb2dyZXNzLWJhclwiLHhyKTt2YXIgVHI9e1wiLnByb2dyZXNzLWNpcmN1bGFyXCI6XCJwcm9ncmVzcy1jaXJjdWxhci0tKlwiLFwiLnByb2dyZXNzLWNpcmN1bGFyX19iYWNrZ3JvdW5kXCI6XCJwcm9ncmVzcy1jaXJjdWxhci0tKl9fYmFja2dyb3VuZFwiLFwiLnByb2dyZXNzLWNpcmN1bGFyX19wcmltYXJ5XCI6XCJwcm9ncmVzcy1jaXJjdWxhci0tKl9fcHJpbWFyeVwiLFwiLnByb2dyZXNzLWNpcmN1bGFyX19zZWNvbmRhcnlcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qX19zZWNvbmRhcnlcIn0sTHI9US5jcmVhdGVFbGVtZW50KCdcXG4gIDxzdmcgY2xhc3M9XCJwcm9ncmVzcy1jaXJjdWxhclwiPlxcbiAgICA8Y2lyY2xlIGNsYXNzPVwicHJvZ3Jlc3MtY2lyY3VsYXJfX2JhY2tncm91bmRcIiAvPlxcbiAgICA8Y2lyY2xlIGNsYXNzPVwicHJvZ3Jlc3MtY2lyY3VsYXJfX3NlY29uZGFyeVwiIGN4PVwiNTAlXCIgY3k9XCI1MCVcIiByPVwiNDAlXCIgLz5cXG4gICAgPGNpcmNsZSBjbGFzcz1cInByb2dyZXNzLWNpcmN1bGFyX19wcmltYXJ5XCIgY3g9XCI1MCVcIiBjeT1cIjUwJVwiIHI9XCI0MCVcIiAvPlxcbiAgPC9zdmc+XFxuJyksTXI9XCJpbmRldGVybWluYXRlXCIsRHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7XCJtb2RpZmllclwiPT09dD8oQi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxUciksdGhpcy5oYXNBdHRyaWJ1dGUoTXIpJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpKTpcInZhbHVlXCI9PT10fHxcInNlY29uZGFyeS12YWx1ZVwiPT09dD90aGlzLl91cGRhdGVWYWx1ZSgpOnQ9PT1NciYmdGhpcy5fdXBkYXRlRGV0ZXJtaW5hdGUoKX19LHtrZXk6XCJfdXBkYXRlRGV0ZXJtaW5hdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIFEudG9nZ2xlTW9kaWZpZXIodCxNcix7Zm9yY2U6dC5oYXNBdHRyaWJ1dGUoTXIpfSl9KX19LHtrZXk6XCJfdXBkYXRlVmFsdWVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5oYXNBdHRyaWJ1dGUoXCJ2YWx1ZVwiKSYmbih0aGlzLGZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5jZWlsKDI1MS4zMip0LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpKi4wMSk7dC5fcHJpbWFyeS5zdHlsZVtcInN0cm9rZS1kYXNoYXJyYXlcIl09ZStcIiUsIDI1MS4zMiVcIn0pLHRoaXMuaGFzQXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpP24odGhpcyxmdW5jdGlvbigpe3ZhciBlPU1hdGguY2VpbCgyNTEuMzIqdC5nZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIikqLjAxKTt0Ll9zZWNvbmRhcnkuc3R5bGUuZGlzcGxheT1udWxsLHQuX3NlY29uZGFyeS5zdHlsZVtcInN0cm9rZS1kYXNoYXJyYXlcIl09ZStcIiUsIDI1MS4zMiVcIn0pOm4odGhpcyxmdW5jdGlvbigpe3QuX3NlY29uZGFyeS5zdHlsZS5kaXNwbGF5PVwibm9uZVwifSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzQ29tcGlsZWQoKT90aGlzLl90ZW1wbGF0ZT1RLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWNpcmN1bGFyXCIpOnRoaXMuX3RlbXBsYXRlPUxyLmNsb25lTm9kZSghMCksdGhpcy5fcHJpbWFyeT1RLmZpbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fcHJpbWFyeVwiKSx0aGlzLl9zZWNvbmRhcnk9US5maW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3NlY29uZGFyeVwiKSx0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpLHRoaXMuX3VwZGF0ZVZhbHVlKCksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSksTi5wcmVwYXJlKHRoaXMpLEIuaW5pdE1vZGlmaWVyKHRoaXMsVHIpfX0se2tleTpcIl9pc0NvbXBpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighUS5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1jaXJjdWxhclwiKSlyZXR1cm4hMTt2YXIgdD1RLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWNpcmN1bGFyXCIpO3JldHVybiEhUS5maW5kQ2hpbGQodCxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fc2Vjb25kYXJ5XCIpJiYhIVEuZmluZENoaWxkKHQsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3ByaW1hcnlcIil9fSx7a2V5OlwidmFsdWVcIixzZXQ6ZnVuY3Rpb24odCl7KFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MTAwKSYmUS50aHJvdyhcIkludmFsaWQgdmFsdWVcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLE1hdGguZmxvb3IodCkpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKXx8XCIwXCIpfX0se2tleTpcInNlY29uZGFyeVZhbHVlXCIsc2V0OmZ1bmN0aW9uKHQpeyhcIm51bWJlclwiIT10eXBlb2YgdHx8dDwwfHx0PjEwMCkmJlEudGhyb3coXCJJbnZhbGlkIHZhbHVlXCIpLHRoaXMuc2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIsTWF0aC5mbG9vcih0KSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKXx8XCIwXCIpfX0se2tleTpcImluZGV0ZXJtaW5hdGVcIixzZXQ6ZnVuY3Rpb24odCl7dD90aGlzLnNldEF0dHJpYnV0ZShNcixcIlwiKTp0aGlzLnJlbW92ZUF0dHJpYnV0ZShNcil9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShNcil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwidmFsdWVcIixcInNlY29uZGFyeS12YWx1ZVwiLE1yXX19XSksZX0oKTtjLlByb2dyZXNzQ2lyY3VsYXI9RHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXByb2dyZXNzLWNpcmN1bGFyXCIsRHIpO3ZhciBJcj1cImluaXRpYWxcIixOcj1mdW5jdGlvbih0LGUpe3JldHVybiBRLnRocm93KCdcIicrdCsnXCIgbXVzdCBiZSAnK2UpfSxCcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3Nob3VsZEZpeFNjcm9sbD1RLmdsb2JhbHMuaXNVSVdlYlZpZXcsdC5fb25EcmFnPXQuX29uRHJhZy5iaW5kKHQpLHQuX29uRHJhZ1N0YXJ0PXQuX29uRHJhZ1N0YXJ0LmJpbmQodCksdC5fb25EcmFnRW5kPXQuX29uRHJhZ0VuZC5iaW5kKHQpLHQuX29uU2Nyb2xsPXQuX29uU2Nyb2xsLmJpbmQodCksdC5fc2V0U3RhdGUoSXIsITApLHQuX2hpZGUoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9zZXRTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5oZWlnaHQrXCJweFwiO2QodGhpcyx7aGVpZ2h0OnQsbGluZUhlaWdodDp0fSksXCJcIj09PXRoaXMuc3R5bGUuZGlzcGxheSYmdGhpcy5fc2hvdygpfX0se2tleTpcIl9vblNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3BhZ2VFbGVtZW50O2Uuc2Nyb2xsVG9wPDAmJihlLnNjcm9sbFRvcD0wKX19LHtrZXk6XCJfY2FuQ29uc3VtZUdlc3R1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInVwXCI9PT10LmRpcmVjdGlvbnx8XCJkb3duXCI9PT10LmRpcmVjdGlvbn19LHtrZXk6XCJfb25EcmFnU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuZ2VzdHVyZSYmIXRoaXMuZGlzYWJsZWQpe3ZhciBuPXQuZ2VzdHVyZS5jZW50ZXIuY2xpZW50WSt0aGlzLl9wYWdlRWxlbWVudC5zY3JvbGxUb3AsaT13aW5kb3cuaW5uZXJIZWlnaHQsbz10aGlzLl9zaG91bGRGaXhTY3JvbGw/Ljg6MTtpZih0aGlzLl9pZ25vcmVEcmFnPXQuY29uc3VtZWR8fG4+aSpvLCF0aGlzLl9pZ25vcmVEcmFnKXt2YXIgcj10LmNvbnN1bWU7dC5jb25zdW1lPWZ1bmN0aW9uKCl7ciYmcigpLGUuX2lnbm9yZURyYWc9ITAsZS5faGlkZSgpfSx0aGlzLl9jYW5Db25zdW1lR2VzdHVyZSh0Lmdlc3R1cmUpJiYociYmcigpLHQuY29uc3VtZWQ9ITAsdGhpcy5fc2hvdygpKX10aGlzLl9zdGFydFNjcm9sbD10aGlzLl9wYWdlRWxlbWVudC5zY3JvbGxUb3B9fX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKHQuZ2VzdHVyZSYmIXRoaXMuZGlzYWJsZWQmJiF0aGlzLl9pZ25vcmVEcmFnJiZ0aGlzLl9jYW5Db25zdW1lR2VzdHVyZSh0Lmdlc3R1cmUpKXtcIm5vbmVcIj09PXRoaXMuc3R5bGUuZGlzcGxheSYmdGhpcy5fc2hvdygpLHQuc3RvcFByb3BhZ2F0aW9uKCk7dmFyIG49dC5nZXN0dXJlLmNlbnRlci5jbGllbnRZK3RoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcCxpPXdpbmRvdy5pbm5lckhlaWdodDt0aGlzLl9zaG91bGRGaXhTY3JvbGwmJih0aGlzLl9wYWdlRWxlbWVudC5zY3JvbGxUb3A9dGhpcy5fc3RhcnRTY3JvbGwtdC5nZXN0dXJlLmRlbHRhWSwoXCJ1cFwiIT09dC5nZXN0dXJlLmludGVyaW1EaXJlY3Rpb258fG48PS41KmkpJiZ0Lmdlc3R1cmUucHJldmVudERlZmF1bHQoKSk7dmFyIG89TWF0aC5tYXgodC5nZXN0dXJlLmRlbHRhWS10aGlzLl9zdGFydFNjcm9sbCwwKTtpZihvIT09dGhpcy5fY3VycmVudFRyYW5zbGF0aW9uKXt2YXIgcj10aGlzLnRocmVzaG9sZEhlaWdodDtyPjAmJm8+PXI/KHQuZ2VzdHVyZS5zdG9wRGV0ZWN0KCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2ZpbmlzaCgpfSkpOm8+PXRoaXMuaGVpZ2h0P3RoaXMuX3NldFN0YXRlKFwicHJlYWN0aW9uXCIpOnRoaXMuX3NldFN0YXRlKElyKSx0aGlzLl90cmFuc2xhdGVUbyhvKX19fX0se2tleTpcIl9vbkRyYWdFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0Lmdlc3R1cmUmJiF0aGlzLmRpc2FibGVkJiYhdGhpcy5faWdub3JlRHJhZyYmKHQuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5fY3VycmVudFRyYW5zbGF0aW9uPjApKXt0aGlzLl9jdXJyZW50VHJhbnNsYXRpb24+dGhpcy5oZWlnaHQ/dGhpcy5fZmluaXNoKCk6dGhpcy5fdHJhbnNsYXRlVG8oMCx7YW5pbWF0ZTohMH0pfX19LHtrZXk6XCJfZmluaXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3NldFN0YXRlKFwiYWN0aW9uXCIpLHRoaXMuX3RyYW5zbGF0ZVRvKHRoaXMuaGVpZ2h0LHthbmltYXRlOiEwfSk7KHRoaXMub25BY3Rpb258fGZ1bmN0aW9uKHQpe3JldHVybiB0KCl9KShmdW5jdGlvbigpe3QuX3RyYW5zbGF0ZVRvKDAse2FuaW1hdGU6ITB9KSx0Ll9zZXRTdGF0ZShJcil9KX19LHtrZXk6XCJfc2V0U3RhdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuc3RhdGU7dGhpcy5zZXRBdHRyaWJ1dGUoXCJzdGF0ZVwiLHQpLGV8fG49PT10aGlzLnN0YXRlfHxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImNoYW5nZXN0YXRlXCIse3B1bGxIb29rOnRoaXMsc3RhdGU6dCxsYXN0U3RhdGU6bn0pfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3Quc3R5bGUuZGlzcGxheT1cIlwiLHQuX3BhZ2VFbGVtZW50JiYodC5fcGFnZUVsZW1lbnQuc3R5bGUubWFyZ2luVG9wPVwiLVwiK3QuaGVpZ2h0K1wicHhcIil9KX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuX3BhZ2VFbGVtZW50JiYodGhpcy5fcGFnZUVsZW1lbnQuc3R5bGUubWFyZ2luVG9wPVwiXCIpfX0se2tleTpcIl90cmFuc2xhdGVUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZigwIT10aGlzLl9jdXJyZW50VHJhbnNsYXRpb258fDAhPXQpe3RoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbj10O3ZhciBuPWUuYW5pbWF0ZT97ZHVyYXRpb246LjMsdGltaW5nOlwiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCJ9Ont9O3RoaXMuX29uUHVsbCYmdGhpcy5fb25QdWxsKCh0L3RoaXMuaGVpZ2h0KS50b0ZpeGVkKDIpLG4pO3ZhciBpPXRoaXMuaGFzQXR0cmlidXRlKFwiZml4ZWQtY29udGVudFwiKT90aGlzOnRoaXMuX3BhZ2VFbGVtZW50O250KGkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwcHgsIFwiK3QrXCJweCwgMHB4KVwifSxuKS5wbGF5KGZ1bmN0aW9uKCl7MD09PXQmJmQuY2xlYXIoaSxcInRyYW5zaXRpb24gdHJhbnNmb3JtXCIpLGUuY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5jYWxsYmFjaygpfSl9fX0se2tleTpcIl9kaXNhYmxlRHJhZ0xvY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2RyYWdMb2NrRGlzYWJsZWQ9ITAsdGhpcy5fc2V0dXBMaXN0ZW5lcnMoITApfX0se2tleTpcIl9zZXR1cExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1mdW5jdGlvbih0KXtyZXR1cm4gZS5fcGFnZUVsZW1lbnRbdCtcIkV2ZW50TGlzdGVuZXJcIl0oXCJzY3JvbGxcIixlLl9vblNjcm9sbCwhMSl9LGk9ZnVuY3Rpb24odCl7dmFyIG49e3Bhc3NpdmU6ITB9O2UuX2dlc3R1cmVEZXRlY3Rvclt0XShcImRyYWdcIixlLl9vbkRyYWcsbiksZS5fZ2VzdHVyZURldGVjdG9yW3RdKFwiZHJhZ3N0YXJ0XCIsZS5fb25EcmFnU3RhcnQsbiksZS5fZ2VzdHVyZURldGVjdG9yW3RdKFwiZHJhZ2VuZFwiLGUuX29uRHJhZ0VuZCxuKX07dGhpcy5fZ2VzdHVyZURldGVjdG9yJiYoaShcIm9mZlwiKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3IuZGlzcG9zZSgpLHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1udWxsKSxuKFwicmVtb3ZlXCIpLHQmJih0aGlzLl9nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMuX3BhZ2VFbGVtZW50LHtkcmFnTWluRGlzdGFuY2U6MSxkcmFnRGlzdGFuY2VDb3JyZWN0aW9uOiExLGRyYWdMb2NrVG9BeGlzOiF0aGlzLl9kcmFnTG9ja0Rpc2FibGVkLHBhc3NpdmU6IXRoaXMuX3Nob3VsZEZpeFNjcm9sbH0pLGkoXCJvblwiKSxuKFwiYWRkXCIpKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudFRyYW5zbGF0aW9uPTAsdGhpcy5fcGFnZUVsZW1lbnQ9dGhpcy5wYXJlbnROb2RlLHRoaXMuX3NldHVwTGlzdGVuZXJzKCEwKSx0aGlzLl9zZXRTdHlsZSgpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9oaWRlKCksdGhpcy5fc2V0dXBMaXN0ZW5lcnMoITEpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtcImhlaWdodFwiPT09dCYmdGhpcy5fcGFnZUVsZW1lbnQmJnRoaXMuX3NldFN0eWxlKCl9fSx7a2V5Olwib25BY3Rpb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BY3Rpb259LHNldDpmdW5jdGlvbih0KXshdHx8dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxOcihcIm9uQWN0aW9uXCIsXCJmdW5jdGlvbiBvciBudWxsXCIpLHRoaXMuX29uQWN0aW9uPXR9fSx7a2V5Olwib25QdWxsXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUHVsbH0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fE5yKFwib25QdWxsXCIsXCJmdW5jdGlvbiBvciBudWxsXCIpLHRoaXMuX29uUHVsbD10fX0se2tleTpcImhlaWdodFwiLHNldDpmdW5jdGlvbih0KXtRLmlzSW50ZWdlcih0KXx8TnIoXCJoZWlnaHRcIixcImludGVnZXJcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0K1wicHhcIil9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKXx8XCI2NFwiLDEwKX19LHtrZXk6XCJ0aHJlc2hvbGRIZWlnaHRcIixzZXQ6ZnVuY3Rpb24odCl7US5pc0ludGVnZXIodCl8fE5yKFwidGhyZXNob2xkSGVpZ2h0XCIsXCJpbnRlZ2VyXCIpLHRoaXMuc2V0QXR0cmlidXRlKFwidGhyZXNob2xkLWhlaWdodFwiLHQrXCJweFwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwidGhyZXNob2xkLWhlaWdodFwiKXx8XCI5NlwiLDEwKX19LHtrZXk6XCJzdGF0ZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInN0YXRlXCIpfX0se2tleTpcInB1bGxEaXN0YW5jZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50VHJhbnNsYXRpb259fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImhlaWdodFwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJjaGFuZ2VzdGF0ZVwiXX19XSksZX0oKTtjLlB1bGxIb29rPUJyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1wdWxsLWhvb2tcIixCcik7dmFyIGpyPXtcIlwiOlwicmFuZ2UtLSpcIixcIi5yYW5nZV9faW5wdXRcIjpcInJhbmdlLS0qX19pbnB1dFwiLFwiLnJhbmdlX19mb2N1cy1yaW5nXCI6XCJyYW5nZS0tKl9fZm9jdXMtcmluZ1wifSxIcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX29uTW91c2VEb3duPXQuX29uTW91c2VEb3duLmJpbmQodCksdC5fb25Nb3VzZVVwPXQuX29uTW91c2VVcC5iaW5kKHQpLHQuX29uVG91Y2hTdGFydD10Ll9vblRvdWNoU3RhcnQuYmluZCh0KSx0Ll9vblRvdWNoRW5kPXQuX29uVG91Y2hFbmQuYmluZCh0KSx0Ll9vbklucHV0PXQuX3VwZGF0ZS5iaW5kKHQpLHQuX29uRHJhZ3N0YXJ0PXQuX29uRHJhZ3N0YXJ0LmJpbmQodCksdC5fb25EcmFnZW5kPXQuX29uRHJhZ2VuZC5iaW5kKHQpLHR9cmV0dXJuIGIoZSxObyksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiX2NvbXBpbGVcIix0aGlzKS5jYWxsKHRoaXMpLHRoaXMuX3VwZGF0ZURpc2FibGVkKHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikpfX0se2tleTpcIl91cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2lucHV0LGU9dGhpcy5fZm9jdXNSaW5nO3Quc3R5bGUuYmFja2dyb3VuZFNpemU9MTAwKnRoaXMuX3JhdGlvK1wiJSAycHhcIixlLnZhbHVlPXRoaXMudmFsdWUsXCJcIj09PXQubWluJiZcIjBcIj09PXQudmFsdWV8fHQubWluPT09dC52YWx1ZT90LnNldEF0dHJpYnV0ZShcIl96ZXJvXCIsXCJcIik6dC5yZW1vdmVBdHRyaWJ1dGUoXCJfemVyb1wiKSxbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiBlW25dPXRbbl19KX19LHtrZXk6XCJfb25Nb3VzZURvd25cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX2lucHV0LmNsYXNzTGlzdC5hZGQoXCJyYW5nZV9faW5wdXQtLWFjdGl2ZVwiKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5faW5wdXQuZm9jdXMoKX0pfX0se2tleTpcIl9vblRvdWNoU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9vbk1vdXNlRG93bigpfX0se2tleTpcIl9vbk1vdXNlVXBcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwicmFuZ2VfX2lucHV0LS1hY3RpdmVcIil9fSx7a2V5OlwiX29uVG91Y2hFbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9vbk1vdXNlVXAodCl9fSx7a2V5OlwiX29uRHJhZ3N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5jb25zdW1lZD0hMCx0Lmdlc3R1cmUuc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5faW5wdXQuY2xhc3NMaXN0LmFkZChcInJhbmdlX19pbnB1dC0tYWN0aXZlXCIpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdcIix0aGlzLl9vbkRyYWcpfX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfX0se2tleTpcIl9vbkRyYWdlbmRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9pbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwicmFuZ2VfX2lucHV0LS1hY3RpdmVcIiksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ1wiLHRoaXMuX29uRHJhZyl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe1wiZGlzYWJsZWRcIj09PXQmJnRoaXMuX3VwZGF0ZURpc2FibGVkKGkpLHYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfdXBkYXRlRGlzYWJsZWRcIix2YWx1ZTpmdW5jdGlvbih0KXt0P3RoaXMuY2xhc3NMaXN0LmFkZChcInJhbmdlLS1kaXNhYmxlZFwiKTp0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJyYW5nZS0tZGlzYWJsZWRcIil9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NldHVwTGlzdGVuZXJzKCEwKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBMaXN0ZW5lcnMoITEpfX0se2tleTpcIl9zZXR1cExpc3RlbmVyc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSh0P1wiYWRkXCI6XCJyZW1vdmVcIikrXCJFdmVudExpc3RlbmVyXCI7UVtlXSh0aGlzLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2hTdGFydCx7cGFzc2l2ZTohMH0pLHRoaXNbZV0oXCJtb3VzZWRvd25cIix0aGlzLl9vbk1vdXNlRG93biksdGhpc1tlXShcIm1vdXNldXBcIix0aGlzLl9vbk1vdXNlVXApLHRoaXNbZV0oXCJ0b3VjaGVuZFwiLHRoaXMuX29uVG91Y2hFbmQpLHRoaXNbZV0oXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdzdGFydCksdGhpc1tlXShcImRyYWdlbmRcIix0aGlzLl9vbkRyYWdlbmQpLHRoaXNbZV0oXCJpbnB1dFwiLHRoaXMuX29uSW5wdXQpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4ganJ9fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX2lucHV0XCI+XFxuICAgICAgPGlucHV0IHR5cGU9XCJyYW5nZVwiIGNsYXNzPVwicmFuZ2VfX2ZvY3VzLXJpbmdcIiB0YWJJbmRleD1cIi0xXCI+XFxuICAgICd9fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJhbmdlXCJ9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFuZ2VcIn19LHtrZXk6XCJfZm9jdXNSaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMV19fSx7a2V5OlwiX3JhdGlvXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJcIj09PXRoaXMuX2lucHV0Lm1pbj8wOnBhcnNlSW50KHRoaXMuX2lucHV0Lm1pbiksZT1cIlwiPT09dGhpcy5faW5wdXQubWF4PzEwMDpwYXJzZUludCh0aGlzLl9pbnB1dC5tYXgpO3JldHVybih0aGlzLnZhbHVlLXQpLyhlLXQpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiZGlzYWJsZWRcIl0uY29uY2F0KHcoTm8ub2JzZXJ2ZWRBdHRyaWJ1dGVzKSl9fV0pLGV9KCk7Yy5SYW5nZT1IcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcmFuZ2VcIixIcik7dmFyIFJyPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9xdWV1ZT1bXSx0aGlzLl9pbmRleD0wfXJldHVybiBnKHQsW3trZXk6XCJhbmltYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MjAwLGk9KG5ldyBEYXRlKS5nZXRUaW1lKCksbz17fSxyPSExLGE9ITEscz0hMSxsPU9iamVjdC5rZXlzKGUpLHU9e3N0b3A6ZnVuY3Rpb24oKXt2YXIgYz1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cyYmY2xlYXJUaW1lb3V0KHMpO3ZhciBoPU1hdGgubWluKDEsKChuZXcgRGF0ZSkuZ2V0VGltZSgpLWkpL24pO3JldHVybiBsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT0oMS1oKSpvW25dK2gqZVtuXSsoXCJvcGFjaXR5XCI9PW4/XCJcIjpcInB4XCIpfSksdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb249XCIwc1wiLGMuc3RvcE5leHQ/YT0hMTpyfHwocj0hMCxhJiZhKCkpLHV9LHRoZW46ZnVuY3Rpb24odCl7cmV0dXJuIGE9dCxyJiZhJiZhKCksdX0sc3BlZWQ6ZnVuY3Rpb24oYSl7aWYoUC5jb25maWcuYW5pbWF0aW9uc0Rpc2FibGVkJiYoYT0wKSwhcil7cyYmY2xlYXJUaW1lb3V0KHMpO3ZhciBjPSgobmV3IERhdGUpLmdldFRpbWUoKS1pKS9uLGg9YSooMS1jKTtsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT0oMS1jKSpvW25dK2MqZVtuXSsoXCJvcGFjaXR5XCI9PW4/XCJcIjpcInB4XCIpfSksZnVuY3Rpb24oKXt2YXIgZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KTtsLmZvckVhY2goZS5nZXRQcm9wZXJ0eVZhbHVlLmJpbmQoZSkpLGU9dC5vZmZzZXRIZWlnaHR9KCksaT10LnNwZWVkVXBUaW1lLG49aCx0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj1uLzFlMytcInNcIixsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT1lW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSxzPXNldFRpbWVvdXQodS5zdG9wLGgpfXJldHVybiB1fSxmaW5pc2g6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06NTAsZT0oKG5ldyBEYXRlKS5nZXRUaW1lKCktaSkvbjtyZXR1cm4gdS5zcGVlZCh0LygxLWUpKSx1fX07aWYodC5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKXx8cnx8UC5jb25maWcuYW5pbWF0aW9uc0Rpc2FibGVkKXJldHVybiB1O3ZhciBjPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpO3JldHVybiBsLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9cGFyc2VGbG9hdChjLmdldFByb3BlcnR5VmFsdWUodCkpO29bdF09aXNOYU4oZSk/MDplfSkscnx8KHQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5PWwuam9pbihcIixcIiksdC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb249bi8xZTMrXCJzXCIsbC5mb3JFYWNoKGZ1bmN0aW9uKG4pe3Quc3R5bGVbbl09ZVtuXSsoXCJvcGFjaXR5XCI9PW4/XCJcIjpcInB4XCIpfSkpLHM9c2V0VGltZW91dCh1LnN0b3AsbiksdGhpcy5fb25TdG9wQW5pbWF0aW9ucyh0LHUuc3RvcCksdX19XSksZyh0LFt7a2V5OlwiX29uU3RvcEFuaW1hdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMuX3F1ZXVlLGk9dGhpcy5faW5kZXgrKztuW3RdPW5bdF18fFtdLG5bdF1baV09ZnVuY3Rpb24obyl7cmV0dXJuIGRlbGV0ZSBuW3RdW2ldLG5bdF0mJjA9PW5bdF0ubGVuZ3RoJiZkZWxldGUgblt0XSxlKG8pfX19LHtrZXk6XCJzdG9wQW5pbWF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2Uuc3RvcEFuaW1hdGlvbnModCxuKX0pOyh0aGlzLl9xdWV1ZVt0XXx8W10pLmZvckVhY2goZnVuY3Rpb24odCl7dChufHx7fSl9KX19LHtrZXk6XCJzdG9wQWxsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5zdG9wQW5pbWF0aW9ucyhPYmplY3Qua2V5cyh0aGlzLl9xdWV1ZSksdCl9fSx7a2V5OlwiZmFkZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXToyMDA7cmV0dXJuIHRoaXMuYW5pbWF0ZSh0LHtvcGFjaXR5OjB9LGUpfX1dKSx0fSgpLEZyPXtcIlwiOlwicmlwcGxlLS0qXCIsXCIucmlwcGxlX193YXZlXCI6XCJyaXBwbGUtLSpfX3dhdmVcIixcIi5yaXBwbGVfX2JhY2tncm91bmRcIjpcInJpcHBsZS0tKl9fYmFja2dyb3VuZFwifSxxcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX29uVGFwPXQuX29uVGFwLmJpbmQodCksdC5fb25Ib2xkPXQuX29uSG9sZC5iaW5kKHQpLHQuX29uRHJhZ1N0YXJ0PXQuX29uRHJhZ1N0YXJ0LmJpbmQodCksdC5fb25SZWxlYXNlPXQuX29uUmVsZWFzZS5iaW5kKHQpLG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0Ll9hbmltYXRvcj1uZXcgUnIsW1wiY29sb3JcIixcImNlbnRlclwiLFwic3RhcnQtcmFkaXVzXCIsXCJiYWNrZ3JvdW5kXCIsXCJtb2RpZmllclwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGUsbnVsbCx0LmdldEF0dHJpYnV0ZShlKSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC5hZGQoXCJyaXBwbGVcIiksdGhpcy5fd2F2ZT10aGlzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVfX3dhdmVcIilbMF0sdGhpcy5fYmFja2dyb3VuZD10aGlzLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJyaXBwbGVfX2JhY2tncm91bmRcIilbMF0sdGhpcy5fYmFja2dyb3VuZCYmdGhpcy5fd2F2ZXx8KHRoaXMuX3dhdmU9US5jcmVhdGUoXCIucmlwcGxlX193YXZlXCIpLHRoaXMuX2JhY2tncm91bmQ9US5jcmVhdGUoXCIucmlwcGxlX19iYWNrZ3JvdW5kXCIpLHRoaXMuYXBwZW5kQ2hpbGQodGhpcy5fd2F2ZSksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl9iYWNrZ3JvdW5kKSksQi5pbml0TW9kaWZpZXIodGhpcyxGcil9fSx7a2V5OlwiX2dldEVmZmVjdFNpemVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuaGFzQXR0cmlidXRlKFwic2l6ZVwiKSl7dmFyIHQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJzaXplXCIpO2lmKC0xIT09W1wiY292ZXJcIixcImNvbnRhaW5cIl0uaW5kZXhPZih0KSlyZXR1cm4gdH1yZXR1cm5cImNvdmVyXCJ9fSx7a2V5OlwiX2NhbGN1bGF0ZUNvb3Jkc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXZvaWQgMCxuPXZvaWQgMCxpPXZvaWQgMCxvPXZvaWQgMCxyPXZvaWQgMCxhPXRoaXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz10aGlzLl9nZXRFZmZlY3RTaXplKCksbD1mdW5jdGlvbigpe3JldHVybiBRLnRocm93KFwiUmlwcGxlIGludmFsaWQgc3RhdGVcIil9O3JldHVybiB0aGlzLl9jZW50ZXI/KGU9YS53aWR0aC8yLG49YS5oZWlnaHQvMixcImNvdmVyXCI9PT1zP3I9TWF0aC5zcXJ0KGUqZStuKm4pOlwiY29udGFpblwiPT09cz9yPU1hdGgubWluKGUsbik6bCgpKTooZT0oXCJudW1iZXJcIj09dHlwZW9mIHQuY2xpZW50WD90LmNsaWVudFg6dC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYKS1hLmxlZnQsbj0oXCJudW1iZXJcIj09dHlwZW9mIHQuY2xpZW50WT90LmNsaWVudFk6dC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKS1hLnRvcCxpPU1hdGgubWF4KG4sYS5oZWlnaHQtbiksbz1NYXRoLm1heChlLGEud2lkdGgtZSksXCJjb3ZlclwiPT09cz9yPU1hdGguc3FydChpKmkrbypvKTpcImNvbnRhaW5cIj09PXM/cj1NYXRoLm1pbihNYXRoLnJvdW5kKGkvMiksTWF0aC5yb3VuZChvLzIpKTpsKCkpLHt4OmUseTpuLHI6cn19fSx7a2V5OlwiX3JpcHBsZUFuaW1hdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTozMDAsbj10aGlzLl9hbmltYXRvcixpPXRoaXMuX3dhdmUsbz10aGlzLl9iYWNrZ3JvdW5kLHI9dGhpcy5fbWluUixhPXRoaXMuX2NhbGN1bGF0ZUNvb3Jkcyh0KSxzPWEueCxsPWEueSx1PWEucjtyZXR1cm4gbi5zdG9wQWxsKHtzdG9wTmV4dDoxfSksbi5hbmltYXRlKG8se29wYWNpdHk6MX0sZSksUS5leHRlbmQoaS5zdHlsZSx7b3BhY2l0eToxLHRvcDpsLXIrXCJweFwiLGxlZnQ6cy1yK1wicHhcIix3aWR0aDoyKnIrXCJweFwiLGhlaWdodDoyKnIrXCJweFwifSksbi5hbmltYXRlKGkse3RvcDpsLXUsbGVmdDpzLXUsaGVpZ2h0OjIqdSx3aWR0aDoyKnV9LGUpfX0se2tleTpcIl91cGRhdGVQYXJlbnRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9wYXJlbnRVcGRhdGVkJiZ0aGlzLnBhcmVudE5vZGUpe1wic3RhdGljXCI9PT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLnBhcmVudE5vZGUpLmdldFByb3BlcnR5VmFsdWUoXCJwb3NpdGlvblwiKSYmKHRoaXMucGFyZW50Tm9kZS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLHRoaXMuX3BhcmVudFVwZGF0ZWQ9ITB9fX0se2tleTpcIl9vblRhcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5kaXNhYmxlZHx8dC5yaXBwbGV8fCh0LnJpcHBsZT0hMCx0aGlzLl91cGRhdGVQYXJlbnQoKSx0aGlzLl9yaXBwbGVBbmltYXRpb24odC5nZXN0dXJlLnNyY0V2ZW50KS50aGVuKGZ1bmN0aW9uKCl7ZS5fYW5pbWF0b3IuZmFkZShlLl93YXZlKSxlLl9hbmltYXRvci5mYWRlKGUuX2JhY2tncm91bmQpfSkpfX0se2tleTpcIl9vbkhvbGRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRpc2FibGVkfHx0LnJpcHBsZXx8KHQucmlwcGxlPSEwLHRoaXMuX3VwZGF0ZVBhcmVudCgpLHRoaXMuX2hvbGRpbmc9dGhpcy5fcmlwcGxlQW5pbWF0aW9uKHQuZ2VzdHVyZS5zcmNFdmVudCwyZTMpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKSl9fSx7a2V5OlwiX29uUmVsZWFzZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faG9sZGluZyYmIXQucmlwcGxlJiYodC5yaXBwbGU9ITAsdGhpcy5faG9sZGluZy5zcGVlZCgzMDApLnRoZW4oZnVuY3Rpb24oKXtlLl9hbmltYXRvci5zdG9wQWxsKHtzdG9wTmV4dDohMH0pLGUuX2FuaW1hdG9yLmZhZGUoZS5fd2F2ZSksZS5fYW5pbWF0b3IuZmFkZShlLl9iYWNrZ3JvdW5kKX0pLHRoaXMuX2hvbGRpbmc9ITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKX19LHtrZXk6XCJfb25EcmFnU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9ob2xkaW5nKXJldHVybiB0aGlzLl9vblJlbGVhc2UodCk7LTEhPVtcImxlZnRcIixcInJpZ2h0XCJdLmluZGV4T2YodC5nZXN0dXJlLmRpcmVjdGlvbikmJnRoaXMuX29uVGFwKHQpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wYXJlbnROb2RlPXRoaXMucGFyZW50Tm9kZSxQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQ/dGhpcy5kaXNhYmxlZD0hMDoodGhpcy5fcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwidGFwXCIsdGhpcy5fb25UYXApLHRoaXMuX3BhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImhvbGRcIix0aGlzLl9vbkhvbGQpLHRoaXMuX3BhcmVudE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3BhcmVudE5vZGV8fHRoaXMucGFyZW50Tm9kZTt0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLl9vblRhcCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiaG9sZFwiLHRoaXMuX29uSG9sZCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJyaXBwbGVcIixGcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsaSx0aGlzLEZyKTticmVhaztjYXNlXCJzdGFydC1yYWRpdXNcIjp0aGlzLl9taW5SPU1hdGgubWF4KDAscGFyc2VGbG9hdChpKXx8MCk7YnJlYWs7Y2FzZVwiY29sb3JcIjppJiZuKHRoaXMsZnVuY3Rpb24oKXtvLl93YXZlLnN0eWxlLmJhY2tncm91bmQ9aSxvLmhhc0F0dHJpYnV0ZShcImJhY2tncm91bmRcIil8fChvLl9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmQ9aSl9KTticmVhaztjYXNlXCJiYWNrZ3JvdW5kXCI6KGl8fGUpJiYoXCJub25lXCI9PT1pP24odGhpcyxmdW5jdGlvbigpe28uX2JhY2tncm91bmQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpLG8uX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZD1cInRyYW5zcGFyZW50XCJ9KTpuKHRoaXMsZnVuY3Rpb24oKXtvLl9iYWNrZ3JvdW5kLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpJiZvLl9iYWNrZ3JvdW5kLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpLG8uX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZD1pfSkpO2JyZWFrO2Nhc2VcImNlbnRlclwiOlwiY2VudGVyXCI9PT10JiYodGhpcy5fY2VudGVyPW51bGwhPWkmJlwiZmFsc2VcIiE9aSl9fX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJzdGFydC1yYWRpdXNcIixcImNvbG9yXCIsXCJiYWNrZ3JvdW5kXCIsXCJjZW50ZXJcIixcImNsYXNzXCIsXCJtb2RpZmllclwiXX19XSksZX0oKTtjLlJpcHBsZT1xcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcmlwcGxlXCIscXIpO3ZhciB6cj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxQaSksZX0oKTtjLlJvdz16cixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcm93XCIsenIpO3ZhciBWcj17XCJcIjpcInNlZ21lbnQtLSpcIixcIi5zZWdtZW50X19pdGVtXCI6XCJzZWdtZW50LS0qX19pdGVtXCIsXCIuc2VnbWVudF9faW5wdXRcIjpcInNlZ21lbnQtLSpfX2lucHV0XCIsXCIuc2VnbWVudF9fYnV0dG9uXCI6XCJzZWdtZW50LS0qX19idXR0b25cIn0sV3I9ZnVuY3Rpb24oKXt2YXIgdD0wO3JldHVybiBmdW5jdGlvbigpe3JldHVyblwib25zLXNlZ21lbnQtZ2VuLVwiK3QrK319KCksVXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9zZWdtZW50SWQ9V3IoKSx0Ll90YWJiYXI9bnVsbCx0Ll9vbkNoYW5nZT10Ll9vbkNoYW5nZS5iaW5kKHQpLHQuX29uVGFiYmFyUHJlQ2hhbmdlPXQuX29uVGFiYmFyUHJlQ2hhbmdlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9sYXN0QWN0aXZlSW5kZXg9dC5fdGFiYmFyP3QuX3RhYmJhci5nZXRBY3RpdmVUYWJJbmRleCgpOnQuZ2V0QWN0aXZlQnV0dG9uSW5kZXgoKX0pfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcInNlZ21lbnRcIik7Zm9yKHZhciB0PXRoaXMuY2hpbGRyZW4ubGVuZ3RoLTE7dD49MDt0LS0pe3ZhciBlPXRoaXMuY2hpbGRyZW5bdF07ZS5jbGFzc0xpc3QuYWRkKFwic2VnbWVudF9faXRlbVwiKTt2YXIgbj1RLmZpbmRDaGlsZChlLFwiLnNlZ21lbnRfX2lucHV0XCIpfHxRLmNyZWF0ZShcImlucHV0LnNlZ21lbnRfX2lucHV0XCIpO24udHlwZT1cInJhZGlvXCIsbi52YWx1ZT10LG4ubmFtZT1uLm5hbWV8fHRoaXMuX3NlZ21lbnRJZCxuLmNoZWNrZWQ9IXRoaXMuaGFzQXR0cmlidXRlKFwidGFiYmFyLWlkXCIpJiZ0PT09KHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiYWN0aXZlLWluZGV4XCIpKXx8MCk7dmFyIGk9US5maW5kQ2hpbGQoZSxcIi5zZWdtZW50X19idXR0b25cIil8fFEuY3JlYXRlKFwiLnNlZ21lbnRfX2J1dHRvblwiKTtpZihpLnBhcmVudEVsZW1lbnQhPT1lKWZvcig7ZS5maXJzdENoaWxkOylpLmFwcGVuZENoaWxkKGUuZmlyc3RDaGlsZCk7ZS5hcHBlbmRDaGlsZChuKSxlLmFwcGVuZENoaWxkKGkpfUIuaW5pdE1vZGlmaWVyKHRoaXMsVnIpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuaGFzQXR0cmlidXRlKFwidGFiYmFyLWlkXCIpJiZuKHRoaXMsZnVuY3Rpb24oKXt2YXIgZT1RLmZpbmRQYXJlbnQodCxcIm9ucy1wYWdlXCIpO3QuX3RhYmJhcj1lJiZlLnF1ZXJ5U2VsZWN0b3IoXCIjXCIrdC5nZXRBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikpLHQuX3RhYmJhciYmXCJPTlMtVEFCQkFSXCI9PT10Ll90YWJiYXIudGFnTmFtZXx8US50aHJvdyhcIk5vIHRhYmJhciB3aXRoIGlkIFwiK3QuZ2V0QXR0cmlidXRlKFwidGFiYmFyLWlkXCIpK1wiIHdhcyBmb3VuZC5cIiksdC5fdGFiYmFyLnNldEF0dHJpYnV0ZShcImhpZGUtdGFic1wiLFwiXCIpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9zZXRDaGVja2VkKHQuX3RhYmJhci5nZXRBY3RpdmVUYWJJbmRleCgpKX0pLHQuX3RhYmJhci5hZGRFdmVudExpc3RlbmVyKFwicHJlY2hhbmdlXCIsdC5fb25UYWJiYXJQcmVDaGFuZ2UpfSksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5fb25DaGFuZ2UpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX3RhYmJhciYmKHQuX3RhYmJhci5yZW1vdmVFdmVudExpc3RlbmVyKFwicHJlY2hhbmdlXCIsdC5fb25UYWJiYXJQcmVDaGFuZ2UpLHQuX3RhYmJhcj1udWxsKX0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHRoaXMuX29uQ2hhbmdlKX19LHtrZXk6XCJfc2V0Q2hlY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuY2hpbGRyZW5bdF0uZmlyc3RFbGVtZW50Q2hpbGQuY2hlY2tlZD0hMH19LHtrZXk6XCJzZXRBY3RpdmVCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl90YWJiYXI/dGhpcy5fdGFiYmFyLnNldEFjdGl2ZVRhYih0LGUpOih0aGlzLl9zZXRDaGVja2VkKHQpLHRoaXMuX3Bvc3RDaGFuZ2UodCksUHJvbWlzZS5yZXNvbHZlKHQpKX19LHtrZXk6XCJnZXRBY3RpdmVCdXR0b25JbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuY2hpbGRyZW4ubGVuZ3RoLTE7dD49MDt0LS0paWYodGhpcy5jaGlsZHJlblt0XS5maXJzdEVsZW1lbnRDaGlsZC5jaGVja2VkKXJldHVybiB0O3JldHVybi0xfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5fdGFiYmFyP3RoaXMuX3RhYmJhci5zZXRBY3RpdmVUYWIodGhpcy5nZXRBY3RpdmVCdXR0b25JbmRleCgpLHtyZWplY3Q6ITF9KTp0aGlzLl9wb3N0Q2hhbmdlKHRoaXMuZ2V0QWN0aXZlQnV0dG9uSW5kZXgoKSl9fSx7a2V5OlwiX29uVGFiYmFyUHJlQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXt0LmRldGFpbC5jYW5jZWxlZHx8KGUuX3NldENoZWNrZWQodC5pbmRleCksZS5fcG9zdENoYW5nZSh0LmluZGV4KSl9KX19LHtrZXk6XCJfcG9zdENoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe1EudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwicG9zdGNoYW5nZVwiLHtpbmRleDp0LGFjdGl2ZUluZGV4OnQsbGFzdEFjdGl2ZUluZGV4OnRoaXMuX2xhc3RBY3RpdmVJbmRleCxzZWdtZW50SXRlbTp0aGlzLmNoaWxkcmVuW3RdfSksdGhpcy5fbGFzdEFjdGl2ZUluZGV4PXR9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJzZWdtZW50XCIsVnIpO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxWcil9fX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJjbGFzc1wiLFwibW9kaWZpZXJcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicG9zdGNoYW5nZVwiXX19XSksZX0oKTtjLlNlZ21lbnQ9VXIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNlZ21lbnRcIixVcik7dmFyIFhyPXtcIlwiOlwic2VsZWN0LSogc2VsZWN0LS0qXCIsXCIuc2VsZWN0LWlucHV0XCI6XCJzZWxlY3QtaW5wdXQtLSpcIn0sWXI9W1wiYXV0b2ZvY3VzXCIsXCJkaXNhYmxlZFwiLFwiZm9ybVwiLFwibXVsdGlwbGVcIixcIm5hbWVcIixcInJlcXVpcmVkXCIsXCJzaXplXCJdLEdyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX2Rlcml2ZUdldHRlcnMoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJzZWxlY3RcIixYcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsaSx0aGlzLFhyKX1Zci5pbmRleE9mKHQpPj0wJiZuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlQm91bmRBdHRyaWJ1dGVzKCl9KX19LHtrZXk6XCJfdXBkYXRlQm91bmRBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1lyLmZvckVhY2goZnVuY3Rpb24oZSl7dC5oYXNBdHRyaWJ1dGUoZSk/dC5fc2VsZWN0LnNldEF0dHJpYnV0ZShlLHQuZ2V0QXR0cmlidXRlKGUpKTp0Ll9zZWxlY3QucmVtb3ZlQXR0cmlidXRlKGUpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RcIik7dmFyIHQ9dGhpcy5fc2VsZWN0fHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpOyF0LmlkJiZ0aGlzLmhhc0F0dHJpYnV0ZShcInNlbGVjdC1pZFwiKSYmKHQuaWQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJzZWxlY3QtaWRcIikpLHQuY2xhc3NMaXN0LmFkZChcInNlbGVjdC1pbnB1dFwiKSx0aGlzLl9zZWxlY3R8fChRLmFycmF5RnJvbSh0aGlzLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXBwZW5kQ2hpbGQoZSl9KSx0aGlzLmFwcGVuZENoaWxkKHQpKSxCLmluaXRNb2RpZmllcih0aGlzLFhyKX19LHtrZXk6XCJfZGVyaXZlR2V0dGVyc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztbXCJkaXNhYmxlZFwiLFwibGVuZ3RoXCIsXCJtdWx0aXBsZVwiLFwibmFtZVwiLFwib3B0aW9uc1wiLFwic2VsZWN0ZWRJbmRleFwiLFwic2l6ZVwiLFwidmFsdWVcIixcImZvcm1cIixcInR5cGVcIl0uZm9yRWFjaChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlLHtjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fc2VsZWN0W2VdfSxzZXQ6LTE9PT1bXCJmb3JtXCIsXCJ0eXBlXCJdLmluZGV4T2YoZSk/ZnVuY3Rpb24oaSl7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9zZWxlY3RbZV09aX0pfTp2b2lkIDB9KX0pfX0se2tleTpcImFkZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpudWxsO3RoaXMuX3NlbGVjdC5hZGQodCxlKX19LHtrZXk6XCJyZW1vdmVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zZWxlY3QucmVtb3ZlKHQpfX0se2tleTpcIl9zZWxlY3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwic2VsZWN0XCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCJdLmNvbmNhdChZcil9fV0pLGV9KCk7Yy5TZWxlY3Q9R3IsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNlbGVjdFwiLEdyKTt2YXIgJHI9e1wiXCI6XCJmYWItLSogc3BlZWQtZGlhbF9faXRlbS0tKlwifSxLcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2NvbXBpbGUoKSx0Ll9ib3VuZE9uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJmYWIgZmFiLS1taW5pIHNwZWVkLWRpYWxfX2l0ZW1cIiwkcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLCRyKSxRLmFkZE1vZGlmaWVyKHRoaXMsXCJtaW5pXCIpO2JyZWFrO2Nhc2VcInJpcHBsZVwiOnRoaXMuX3VwZGF0ZVJpcHBsZSgpfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7US51cGRhdGVSaXBwbGUodGhpcyl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO04ucHJlcGFyZSh0aGlzKSxcImZhYiBmYWItLW1pbmkgc3BlZWQtZGlhbF9faXRlbVwiLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5jbGFzc0xpc3QuYWRkKGUpfSksUS5hZGRNb2RpZmllcih0aGlzLFwibWluaVwiKSx0aGlzLl91cGRhdGVSaXBwbGUoKSxCLmluaXRNb2RpZmllcih0aGlzLCRyKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuU3BlZWREaWFsSXRlbT1LcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3BlZWQtZGlhbC1pdGVtXCIsS3IpO3ZhciBRcj17XCJcIjpcInNwZWVkLWRpYWwtLSpcIn0sSnI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0Ll9pdGVtU2hvd249ITEsdC5fYm91bmRPbkNsaWNrPXQuX29uQ2xpY2suYmluZCh0KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC5hZGQoXCJzcGVlZC1kaWFsXCIpLE4ucHJlcGFyZSh0aGlzKSx0aGlzLl91cGRhdGVSaXBwbGUoKSxCLmluaXRNb2RpZmllcih0aGlzLFFyKSx0aGlzLmhhc0F0dHJpYnV0ZShcImRpcmVjdGlvblwiKT90aGlzLl91cGRhdGVEaXJlY3Rpb24odGhpcy5nZXRBdHRyaWJ1dGUoXCJkaXJlY3Rpb25cIikpOnRoaXMuX3VwZGF0ZURpcmVjdGlvbihcInVwXCIpLHRoaXMuX3VwZGF0ZVBvc2l0aW9uKCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInNwZWVkLWRpYWxcIixRcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsaSx0aGlzLFFyKTticmVhaztjYXNlXCJyaXBwbGVcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlUmlwcGxlKCl9KTticmVhaztjYXNlXCJkaXJlY3Rpb25cIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlRGlyZWN0aW9uKGkpfSk7YnJlYWs7Y2FzZVwicG9zaXRpb25cIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlUG9zaXRpb24oKX0pfX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2ssITEpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vbkNsaWNrPyh0aGlzLm9uQ2xpY2suYXBwbHkodGhpcyksUHJvbWlzZS5yZXNvbHZlKCkpOiF0aGlzLmRpc2FibGVkJiZ0aGlzLnZpc2libGU/dGhpcy50b2dnbGVJdGVtcygpOnZvaWQgMH19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW5saW5lP1Byb21pc2UucmVzb2x2ZSgpOnRoaXMuc2hvdygpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt0LmlubGluZT9lKCk6c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuaGlkZSgpLnRoZW4oZSl9KX0pfX0se2tleTpcIl91cGRhdGVSaXBwbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2ZhYiYmKHRoaXMuaGFzQXR0cmlidXRlKFwicmlwcGxlXCIpP3RoaXMuX2ZhYi5zZXRBdHRyaWJ1dGUoXCJyaXBwbGVcIixcIlwiKTp0aGlzLl9mYWIucmVtb3ZlQXR0cmlidXRlKFwicmlwcGxlXCIpKX19LHtrZXk6XCJfdXBkYXRlRGlyZWN0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuaXRlbXMsbj0wO248ZS5sZW5ndGg7bisrKWQoZVtuXSx7dHJhbnNpdGlvbkRlbGF5OjI1Km4rXCJtc1wiLGJvdHRvbTpcImF1dG9cIixyaWdodDpcImF1dG9cIix0b3A6XCJhdXRvXCIsbGVmdDpcImF1dG9cIn0pO3N3aXRjaCh0KXtjYXNlXCJ1cFwiOmZvcih2YXIgaT0wO2k8ZS5sZW5ndGg7aSsrKWVbaV0uc3R5bGUuYm90dG9tPTcyKzU2KmkrXCJweFwiLGVbaV0uc3R5bGUucmlnaHQ9XCI4cHhcIjticmVhaztjYXNlXCJkb3duXCI6Zm9yKHZhciBvPTA7bzxlLmxlbmd0aDtvKyspZVtvXS5zdHlsZS50b3A9NzIrNTYqbytcInB4XCIsZVtvXS5zdHlsZS5sZWZ0PVwiOHB4XCI7YnJlYWs7Y2FzZVwibGVmdFwiOmZvcih2YXIgcj0wO3I8ZS5sZW5ndGg7cisrKWVbcl0uc3R5bGUudG9wPVwiOHB4XCIsZVtyXS5zdHlsZS5yaWdodD03Mis1NipyK1wicHhcIjticmVhaztjYXNlXCJyaWdodFwiOmZvcih2YXIgYT0wO2E8ZS5sZW5ndGg7YSsrKWVbYV0uc3R5bGUudG9wPVwiOHB4XCIsZVthXS5zdHlsZS5sZWZ0PTcyKzU2KmErXCJweFwiO2JyZWFrO2RlZmF1bHQ6US50aHJvdyhcIkFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHVwLCBkb3duLCBsZWZ0IG9yIHJpZ2h0LlwiKX19fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpO3N3aXRjaCh0aGlzLmNsYXNzTGlzdC5yZW1vdmUoXCJmYWItLXRvcF9fbGVmdFwiLFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIsXCJmYWItLWJvdHRvbV9fbGVmdFwiLFwiZmFiLS10b3BfX3JpZ2h0XCIsXCJmYWItLXRvcF9fY2VudGVyXCIsXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpLHQpe2Nhc2VcInRvcCByaWdodFwiOmNhc2VcInJpZ2h0IHRvcFwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19yaWdodFwiKTticmVhaztjYXNlXCJ0b3AgbGVmdFwiOmNhc2VcImxlZnQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2xlZnRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIHJpZ2h0XCI6Y2FzZVwicmlnaHQgYm90dG9tXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS1ib3R0b21fX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcImJvdHRvbSBsZWZ0XCI6Y2FzZVwibGVmdCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fbGVmdFwiKTticmVhaztjYXNlXCJjZW50ZXIgdG9wXCI6Y2FzZVwidG9wIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tdG9wX19jZW50ZXJcIik7YnJlYWs7Y2FzZVwiY2VudGVyIGJvdHRvbVwiOmNhc2VcImJvdHRvbSBjZW50ZXJcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fY2VudGVyXCIpfX19LHtrZXk6XCJfZ2V0VHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5nZXRBdHRyaWJ1dGUoXCJwb3NpdGlvblwiKXx8XCJcIikuaW5kZXhPZihcImJvdHRvbVwiKT49MD9cInRyYW5zbGF0ZTNkKDBweCwgLVwiKyhRLmdsb2JhbHMuZmFiT2Zmc2V0fHwwKStcInB4LCAwcHgpIFwiOlwiXCJ9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZhYi5zaG93KCksZCh0aGlzLHt0cmFuc2Zvcm06dGhpcy5fZ2V0VHJhbnNsYXRlfSksUHJvbWlzZS5yZXNvbHZlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5oaWRlSXRlbXMoKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2ZhYi5oaWRlKCl9KX19LHtrZXk6XCJzaG93SXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaGFzQXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpP3RoaXMuX3VwZGF0ZURpcmVjdGlvbih0aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKSk6dGhpcy5fdXBkYXRlRGlyZWN0aW9uKFwidXBcIik7dmFyIHQ9MDtpZighdGhpcy5faXRlbVNob3duKXtmb3IodmFyIGU9dGhpcy5pdGVtcyxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPTI1Km47dCs9aSxkKGVbbl0se3RyYW5zZm9ybTpcInNjYWxlKDEpXCIsdHJhbnNpdGlvbkRlbGF5OmkrXCJtc1wifSl9dCs9NTAsdGhpcy5faXRlbVNob3duPSEwLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwib3BlblwiKX12YXIgbz1RLmRlZmVyKCk7cmV0dXJuIHNldFRpbWVvdXQoby5yZXNvbHZlLHQpLG8ucHJvbWlzZX19LHtrZXk6XCJoaWRlSXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PTA7aWYodGhpcy5faXRlbVNob3duKXtmb3IodmFyIGU9dGhpcy5pdGVtcyxuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPTI1KihlLmxlbmd0aC1uKTt0Kz1pLGQoZVtuXSx7dHJhbnNmb3JtOlwic2NhbGUoMClcIix0cmFuc2l0aW9uRGVsYXk6aStcIm1zXCJ9KX10Kz01MCx0aGlzLl9pdGVtU2hvd249ITEsUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJjbG9zZVwiKX12YXIgbz1RLmRlZmVyKCk7cmV0dXJuIHNldFRpbWVvdXQoby5yZXNvbHZlLHQpLG8ucHJvbWlzZX19LHtrZXk6XCJpc09wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pdGVtU2hvd259fSx7a2V5OlwidG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aXNpYmxlP3RoaXMuaGlkZSgpOnRoaXMuc2hvdygpfX0se2tleTpcInRvZ2dsZUl0ZW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc09wZW4oKT90aGlzLmhpZGVJdGVtcygpOnRoaXMuc2hvd0l0ZW1zKCl9fSx7a2V5OlwiaXRlbXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5hcnJheUZyb20odGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwib25zLXNwZWVkLWRpYWwtaXRlbVwiKSl9fSx7a2V5OlwiX2ZhYlwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLWZhYlwiKX19LHtrZXk6XCJkaXNhYmxlZFwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5oaWRlSXRlbXMoKSxRLmFycmF5RnJvbSh0aGlzLmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe1EubWF0Y2goZSxcIi5mYWJcIikmJlEudG9nZ2xlQXR0cmlidXRlKGUsXCJkaXNhYmxlZFwiLHQpfSksUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfX0se2tleTpcImlubGluZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImlubGluZVwiKX19LHtrZXk6XCJ2aXNpYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ZhYi52aXNpYmxlJiZcIm5vbmVcIiE9PXRoaXMuc3R5bGUuZGlzcGxheX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImNsYXNzXCIsXCJtb2RpZmllclwiLFwicmlwcGxlXCIsXCJkaXJlY3Rpb25cIixcInBvc2l0aW9uXCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm9wZW5cIixcImNsb3NlXCJdfX1dKSxlfSgpO2MuU3BlZWREaWFsPUpyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGVlZC1kaWFsXCIsSnIpO3ZhciBacj17cmVhZHk6ZnVuY3Rpb24odCxlKXtzZXRJbW1lZGlhdGUoZSl9fSx0YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3BhZ2U9bnVsbCx0Ll9wYWdlTG9hZGVyPWp0LG4odCxmdW5jdGlvbigpe1pyLnJlYWR5KHQsZnVuY3Rpb24oKXt2YXIgZT10Ll9nZXRQYWdlVGFyZ2V0KCk7ZSYmdC5sb2FkKGUpfSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLm1hdGNoKHRoaXMucGFyZW50Tm9kZSxcIm9ucy1zcGxpdHRlclwiKXx8US50aHJvdygnXCJvbnMtc3BsaXR0ZXItY29udGVudFwiIG11c3QgaGF2ZSBcIm9ucy1zcGxpdHRlclwiIGFzIHBhcmVudCcpfX0se2tleTpcIl9nZXRQYWdlVGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJwYWdlXCIpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0aGlzLl9wYWdlPXQ7dmFyIGk9bi5jYWxsYmFja3x8ZnVuY3Rpb24oKXt9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt2YXIgbz1lLl9jb250ZW50fHxudWxsO2UuX3BhZ2VMb2FkZXIubG9hZCh7cGFnZTp0LHBhcmVudDplfSxmdW5jdGlvbih0KXtvJiYoZS5fcGFnZUxvYWRlci51bmxvYWQobyksbz1udWxsKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5fc2hvdygpfSksaSh0KSxuKHQpfSl9KX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fY29udGVudC5fc2hvdygpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMuX2NvbnRlbnQpLHRoaXMucmVtb3ZlKCl9fSx7a2V5OlwicGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFnZT10fX0se2tleTpcIl9jb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMF19fSx7a2V5OlwicGFnZUxvYWRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdfX0se2tleTpcInJld3JpdGFibGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFpyfX1dKSxlfSgpO2MuU3BsaXR0ZXJDb250ZW50PXRhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlci1jb250ZW50XCIsdGEpO3ZhciBlYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2JvdW5kT25DbGljaz10Ll9vbkNsaWNrLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7dC5wYXJlbnROb2RlLl9zaWRlcy5ldmVyeShmdW5jdGlvbih0KXtyZXR1cm5cInNwbGl0XCI9PT10Lm1vZGV9KSYmdC5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwiZGlzcGxheTogbm9uZSAhaW1wb3J0YW50XCIpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMub25DbGljayBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMub25DbGljaygpOlEubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXNwbGl0dGVyXCIpJiZ0aGlzLnBhcmVudE5vZGUuX3NpZGVzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvc2UoXCJsZWZ0XCIpLmNhdGNoKGZ1bmN0aW9uKCl7fSl9KSx0LnN0b3BQcm9wYWdhdGlvbigpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrKSxRLmlvc01hc2tTY3JvbGxGaXgodGhpcywhMCl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrKSxRLmlvc01hc2tTY3JvbGxGaXgodGhpcywhMSl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXX19XSksZX0oKTtjLlNwbGl0dGVyTWFzaz1lYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3BsaXR0ZXItbWFza1wiLGVhKTt2YXIgbmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciguMSwgLjcsIC4xLCAxKVwiOm4sbz10LmR1cmF0aW9uLHI9dm9pZCAwPT09bz8uMzpvLGE9dC5kZWxheSxzPXZvaWQgMD09PWE/MDphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGR1cmF0aW9uOnIsZGVsYXk6c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJ1cGRhdGVPcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307US5leHRlbmQodGhpcyx7dGltaW5nOnRoaXMudGltaW5nLGR1cmF0aW9uOnRoaXMuZHVyYXRpb24sZGVsYXk6dGhpcy5kZWxheX0sdCl9fSx7a2V5OlwiYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLGk9dC5wYXJlbnROb2RlO24oaSxmdW5jdGlvbigpe2UuX3NpZGU9dCxlLl9vcHBvc2l0ZVNpZGU9aS5yaWdodCE9PXQmJmkucmlnaHR8fGkubGVmdCE9PXQmJmkubGVmdCxlLl9jb250ZW50PWkuY29udGVudCxlLl9tYXNrPWkubWFza30pfX0se2tleTpcImRlYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xlYXJUcmFuc2l0aW9uKCksdGhpcy5fbWFzayYmdGhpcy5jbGVhck1hc2soKSx0aGlzLl9jb250ZW50PXRoaXMuX3NpZGU9dGhpcy5fb3Bwb3NpdGVTaWRlPXRoaXMuX21hc2s9bnVsbH19LHtrZXk6XCJjbGVhclRyYW5zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7XCJzaWRlIG1hc2sgY29udGVudFwiLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdFtcIl9cIitlXSYmZC5jbGVhcih0W1wiX1wiK2VdLFwidHJhbnNmb3JtIHRyYW5zaXRpb25cIil9KX19LHtrZXk6XCJjbGVhck1hc2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29wcG9zaXRlU2lkZSYmXCJzcGxpdFwiIT09dGhpcy5fb3Bwb3NpdGVTaWRlLm1vZGUmJnRoaXMuX29wcG9zaXRlU2lkZS5pc09wZW58fCh0aGlzLl9tYXNrLnN0eWxlLm9wYWNpdHk9XCJcIix0aGlzLl9tYXNrLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpfX0se2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe319LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCgpfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCgpfX0se2tleTpcIm1pbnVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyaWdodFwiPT09dGhpcy5fc2lkZS5zaWRlP1wiLVwiOlwiXCJ9fV0pLGV9KCksaWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsbmEpLGcoZSxbe2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsbnQodGhpcy5fc2lkZSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzK3QpK1wicHgsIDAsIDApXCJ9KS5wbGF5KCl9fSx7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKHQpe250LnJ1bkFsbChudCh0aGlzLl9zaWRlKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLm1pbnVzK1wiMTAwJSwgMCwgMClcIn0sdGhpcy5kZWYpLnF1ZXVlKGZ1bmN0aW9uKGUpe2UoKSx0JiZ0KCl9KSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5OlwiYmxvY2tcIn0pLnF1ZXVlKHtvcGFjaXR5OlwiMVwifSx7ZHVyYXRpb246dGhpcy5kdXJhdGlvbix0aW1pbmc6XCJsaW5lYXJcIn0pKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe250LnJ1bkFsbChudCh0aGlzLl9zaWRlKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLmRlZikucXVldWUoZnVuY3Rpb24oZSl7dCYmdCgpLGUoKX0pLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6XCIwXCJ9LHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHRpbWluZzpcImxpbmVhclwifSkucXVldWUoe2Rpc3BsYXk6XCJub25lXCJ9KSl9fV0pLGV9KCksb2E9e2RlZmF1bHQ6aWEsb3ZlcmxheTppYSxwdXNoOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLG5hKSxnKGUsW3trZXk6XCJfZ2V0U2xpZGluZ0VsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1bdGhpcy5fc2lkZSx0aGlzLl9jb250ZW50XTtyZXR1cm4gdGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCI9PT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZSYmdC5wdXNoKHRoaXMuX29wcG9zaXRlU2lkZSksdH19LHtrZXk6XCJ0cmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zbGlkaW5nRWxlbWVudHN8fCh0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCkpLHRoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsbnQodGhpcy5fc2xpZGluZ0VsZW1lbnRzKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXMrdCkrXCJweCwgMCwgMClcIn0pLnBsYXkoKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPXRoaXMuX3NpZGUub2Zmc2V0V2lkdGg7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzK24pK1wicHgsIDAsIDApXCJ9LHRoaXMuZGVmKS5xdWV1ZShmdW5jdGlvbihuKXtlLl9zbGlkaW5nRWxlbWVudHM9bnVsbCxuKCksdCYmdCgpfSksbnQodGhpcy5fbWFzaykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7ZGlzcGxheTpcImJsb2NrXCJ9KSl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj10aGlzO3RoaXMuX3NsaWRpbmdFbGVtZW50cz10aGlzLl9nZXRTbGlkaW5nRWxlbWVudHMoKSxudC5ydW5BbGwobnQodGhpcy5fc2xpZGluZ0VsZW1lbnRzKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx0aGlzLmRlZikucXVldWUoZnVuY3Rpb24oaSl7bi5fc2xpZGluZ0VsZW1lbnRzPW51bGwsdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJjbGVhclRyYW5zaXRpb25cIixuKS5jYWxsKG4pLHQmJnQoKSxpKCl9KSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5Olwibm9uZVwifSkpfX1dKSxlfSgpLHJldmVhbDpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxuYSksZyhlLFt7a2V5OlwiX2dldFNsaWRpbmdFbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9W3RoaXMuX2NvbnRlbnQsdGhpcy5fbWFza107cmV0dXJuIHRoaXMuX29wcG9zaXRlU2lkZSYmXCJzcGxpdFwiPT09dGhpcy5fb3Bwb3NpdGVTaWRlLm1vZGUmJnQucHVzaCh0aGlzLl9vcHBvc2l0ZVNpZGUpLHR9fSx7a2V5OlwiYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImFjdGl2YXRlXCIsdGhpcykuY2FsbCh0aGlzLHQpLFwiY29sbGFwc2VcIj09PXQubW9kZSYmdGhpcy5fc2V0U3R5bGVzKHQpfX0se2tleTpcImRlYWN0aXZhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3NpZGUmJnRoaXMuX3Vuc2V0U3R5bGVzKHRoaXMuX3NpZGUpLHYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiZGVhY3RpdmF0ZVwiLHRoaXMpLmNhbGwodGhpcyl9fSx7a2V5OlwiX3NldFN0eWxlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2QodCx7bGVmdDpcInJpZ2h0XCI9PT10LnNpZGU/XCJhdXRvXCI6MCxyaWdodDpcInJpZ2h0XCI9PT10LnNpZGU/MDpcImF1dG9cIix6SW5kZXg6MCxiYWNrZ3JvdW5kQ29sb3I6XCJibGFja1wiLHRyYW5zZm9ybTp0aGlzLl9nZW5lcmF0ZUJlaGluZFBhZ2VTdHlsZSgwKS5jb250YWluZXIudHJhbnNmb3JtLGRpc3BsYXk6XCJub25lXCJ9KTt2YXIgZT10LnBhcmVudEVsZW1lbnQ7bihlLGZ1bmN0aW9uKCl7cmV0dXJuIGUuY29udGVudCYmZChlLmNvbnRlbnQse2JveFNoYWRvdzpcIjAgMCAxMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjIpXCJ9KX0pfX0se2tleTpcIl91bnNldFN0eWxlc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe2QuY2xlYXIodCxcImxlZnQgcmlnaHQgekluZGV4IGJhY2tncm91bmRDb2xvciBkaXNwbGF5XCIpLHQuX2NvbnRlbnQmJih0Ll9jb250ZW50LnN0eWxlLm9wYWNpdHk9XCJcIiksdGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCIhPT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZXx8dC5wYXJlbnRFbGVtZW50LmNvbnRlbnQmJmQuY2xlYXIodC5wYXJlbnRFbGVtZW50LmNvbnRlbnQsXCJib3hTaGFkb3dcIil9fSx7a2V5OlwiX2dlbmVyYXRlQmVoaW5kUGFnZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5tYXhXaWR0aCxuPSh0LWUpL2UqMTA7cmV0dXJue2NvbnRlbnQ6e29wYWNpdHk6MSsobj1pc05hTihuKT8wOk1hdGgubWF4KE1hdGgubWluKG4sMCksLTEwKSkvMTAwfSxjb250YWluZXI6e3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzPy0xOjEpKm4rXCIlLCAwLCAwKVwifX19fSx7a2V5OlwidHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fc2lkZS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fc2lkZS5zdHlsZS56SW5kZXg9MSx0aGlzLm1heFdpZHRoPXRoaXMubWF4V2lkdGh8fHRoaXMuX2dldE1heFdpZHRoKCk7dmFyIGU9dGhpcy5fZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGUoTWF0aC5taW4odCx0aGlzLm1heFdpZHRoKSk7dGhpcy5fc2xpZGluZ0VsZW1lbnRzfHwodGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpKSx0aGlzLl9tYXNrLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisodGhpcy5taW51cyt0KStcInB4LCAwLCAwKVwifSksbnQodGhpcy5fc2lkZS5fY29udGVudCkucXVldWUoZS5jb250ZW50KSxudCh0aGlzLl9zaWRlKS5xdWV1ZShlLmNvbnRhaW5lcikpfX0se2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3RoaXMuX3NpZGUuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuX3NpZGUuc3R5bGUuekluZGV4PTEsdGhpcy5tYXhXaWR0aD10aGlzLm1heFdpZHRofHx0aGlzLl9nZXRNYXhXaWR0aCgpO3ZhciBuPXRoaXMuX2dlbmVyYXRlQmVoaW5kUGFnZVN0eWxlKHRoaXMubWF4V2lkdGgpO3RoaXMuX3NsaWRpbmdFbGVtZW50cz10aGlzLl9nZXRTbGlkaW5nRWxlbWVudHMoKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bnQucnVuQWxsKG50KGUuX3NsaWRpbmdFbGVtZW50cykud2FpdChlLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKGUubWludXMrZS5tYXhXaWR0aCkrXCJweCwgMCwgMClcIn0sZS5kZWYpLG50KGUuX21hc2spLndhaXQoZS5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJibG9ja1wifSksbnQoZS5fc2lkZS5fY29udGVudCkud2FpdChlLmRlbGF5KS5xdWV1ZShuLmNvbnRlbnQsZS5kZWYpLG50KGUuX3NpZGUpLndhaXQoZS5kZWxheSkucXVldWUobi5jb250YWluZXIsZS5kZWYpLnF1ZXVlKGZ1bmN0aW9uKG4pe2UuX3NsaWRpbmdFbGVtZW50cz1udWxsLG4oKSx0JiZ0KCl9KSl9LDFlMy82MCl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5fZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGUoMCk7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMuZGVmKSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5Olwibm9uZVwifSksbnQodGhpcy5fc2lkZS5fY29udGVudCkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZShuLmNvbnRlbnQsdGhpcy5kZWYpLG50KHRoaXMuX3NpZGUpLndhaXQodGhpcy5kZWxheSkucXVldWUobi5jb250YWluZXIsdGhpcy5kZWYpLnF1ZXVlKGZ1bmN0aW9uKG4pe2UuX3NsaWRpbmdFbGVtZW50cz1udWxsLGUuX3NpZGUuc3R5bGUuekluZGV4PTAsZS5fc2lkZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGUuX3NpZGUuX2NvbnRlbnQuc3R5bGUub3BhY2l0eT1cIlwiLHQmJnQoKSxuKCl9KSl9fSx7a2V5OlwiX2dldE1heFdpZHRoXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2lkZS5vZmZzZXRXaWR0aH19XSksZX0oKX0scmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9vbk1vZGVDaGFuZ2U9dC5fb25Nb2RlQ2hhbmdlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7IXQubWFzayYmdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib25zLXNwbGl0dGVyLW1hc2tcIikpLHQuX2xheW91dCgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfZ2V0U2lkZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLGZ1bmN0aW9uKGUpe3JldHVybiBRLm1hdGNoKGUsXCJvbnMtc3BsaXR0ZXItc2lkZVwiKSYmZS5nZXRBdHRyaWJ1dGUoXCJzaWRlXCIpPT09dH0pfX0se2tleTpcIl9vbkRldmljZUJhY2tCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zaWRlcy5zb21lKGZ1bmN0aW9uKHQpe3JldHVybiEhdC5pc09wZW4mJnQuY2xvc2UoKX0pfHx0LmNhbGxQYXJlbnRIYW5kbGVyKCl9fSx7a2V5OlwiX29uTW9kZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dC50YXJnZXQucGFyZW50Tm9kZSYmbih0aGlzLGZ1bmN0aW9uKCl7ZS5fbGF5b3V0KCl9KX19LHtrZXk6XCJfbGF5b3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3NpZGVzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5jb250ZW50JiYodC5jb250ZW50LnN0eWxlW2Uuc2lkZV09XCJzcGxpdFwiPT09ZS5tb2RlP2Uuc3R5bGUud2lkdGg6MCl9KX19LHtrZXk6XCJsZWZ0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNpZGUoXCJsZWZ0XCIpfX0se2tleTpcInJpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNpZGUoXCJyaWdodFwiKX19LHtrZXk6XCJzaWRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJvbnMtc3BsaXR0ZXItc2lkZVwiKX19LHtrZXk6XCJfc2lkZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5sZWZ0LHRoaXMucmlnaHRdLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdH0pfX0se2tleTpcImNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1zcGxpdHRlci1jb250ZW50XCIpfX0se2tleTpcInRvcFBhZ2VcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Ll9jb250ZW50fX0se2tleTpcIm1hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1zcGxpdHRlci1tYXNrXCIpfX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fV0pLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9uRGV2aWNlQmFja0J1dHRvbj10aGlzLl9vbkRldmljZUJhY2tCdXR0b24uYmluZCh0aGlzKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb2RlY2hhbmdlXCIsdGhpcy5fb25Nb2RlQ2hhbmdlLCExKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPW51bGwsdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW9kZWNoYW5nZVwiLHRoaXMuX29uTW9kZUNoYW5nZSwhMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7US5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9zaG93XCIpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnByb3BhZ2F0ZUFjdGlvbih0aGlzLFwiX2hpZGVcIil9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe1EucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfZGVzdHJveVwiKSx0aGlzLnJlbW92ZSgpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSBpbnN0YW5jZW9mIFNwbGl0dGVyQW5pbWF0b3J8fFEudGhyb3dBbmltYXRvcihcIlNwbGl0dGVyXCIpLG9hW3RdPWV9fSx7a2V5OlwiU3BsaXR0ZXJBbmltYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiBTcGxpdHRlckFuaW1hdG9yfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBvYX19XSksZX0oKTtjLlNwbGl0dGVyPXJhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlclwiLHJhKTt2YXIgYWE9XCJjbG9zZWRcIixzYT17cmVhZHk6ZnVuY3Rpb24odCxlKXtzZXRJbW1lZGlhdGUoZSl9fSxsYT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxuKXtwKHRoaXMsdCksdGhpcy5fZWxlbWVudD1lLHRoaXMuX29uQ2hhbmdlPXRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcyksbiYmdGhpcy5jaGFuZ2VUYXJnZXQobil9cmV0dXJuIGcodCxbe2tleTpcImNoYW5nZVRhcmdldFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzYWJsZSgpLHRoaXMuX3RhcmdldD10LHQmJih0aGlzLl9vcmllbnRhdGlvbj0tMSE9PVtcInBvcnRyYWl0XCIsXCJsYW5kc2NhcGVcIl0uaW5kZXhPZih0KSx0aGlzLmFjdGl2YXRlKCkpfX0se2tleTpcIl9tYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9vcmllbnRhdGlvbj90aGlzLl90YXJnZXQ9PT0odC5pc1BvcnRyYWl0P1wicG9ydHJhaXRcIjpcImxhbmRzY2FwZVwiKTp0Lm1hdGNoZXN9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fZWxlbWVudC5fdXBkYXRlTW9kZSh0aGlzLl9tYXRjaCh0KT9cImNvbGxhcHNlXCI6XCJzcGxpdFwiKX19LHtrZXk6XCJhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb3JpZW50YXRpb24/KE90Lm9uKFwiY2hhbmdlXCIsdGhpcy5fb25DaGFuZ2UpLHRoaXMuX29uQ2hhbmdlKHtpc1BvcnRyYWl0Ok90LmlzUG9ydHJhaXQoKX0pKToodGhpcy5fcXVlcnlSZXN1bHQ9d2luZG93Lm1hdGNoTWVkaWEodGhpcy5fdGFyZ2V0KSx0aGlzLl9xdWVyeVJlc3VsdC5hZGRMaXN0ZW5lcih0aGlzLl9vbkNoYW5nZSksdGhpcy5fb25DaGFuZ2UodGhpcy5fcXVlcnlSZXN1bHQpKX19LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vcmllbnRhdGlvbj9PdC5vZmYoXCJjaGFuZ2VcIix0aGlzLl9vbkNoYW5nZSk6dGhpcy5fcXVlcnlSZXN1bHQmJih0aGlzLl9xdWVyeVJlc3VsdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vbkNoYW5nZSksdGhpcy5fcXVlcnlSZXN1bHQ9bnVsbCl9fV0pLHR9KCksdWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9wYWdlPW51bGwsdC5fc3RhdGU9YWEsdC5fbG9jaz1uZXcgTnQsdC5fcGFnZUxvYWRlcj1qdCx0Ll9jb2xsYXBzZURldGVjdGlvbj1uZXcgbGEodCksdC5fYW5pbWF0b3JGYWN0b3J5PW5ldyBPKHthbmltYXRvcnM6cmEuYW5pbWF0b3JzLGJhc2VDbGFzczpuYSxiYXNlQ2xhc3NOYW1lOlwiU3BsaXR0ZXJBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dC5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KSxuKHQsZnVuY3Rpb24oKXt0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcIndpZHRoXCIpLHQuaGFzQXR0cmlidXRlKFwic2lkZVwiKXx8dC5zZXRBdHRyaWJ1dGUoXCJzaWRlXCIsXCJsZWZ0XCIpLHNhLnJlYWR5KHQsZnVuY3Rpb24oKXt2YXIgZT10Ll9wYWdlfHx0LmdldEF0dHJpYnV0ZShcInBhZ2VcIik7ZSYmdC5sb2FkKGUpfSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1EubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXNwbGl0dGVyXCIpfHxRLnRocm93KFwiUGFyZW50IG11c3QgYmUgYW4gb25zLXNwbGl0dGVyIGVsZW1lbnRcIiksdGhpcy5fc3dpcGU9bmV3IFFvKHtlbGVtZW50OnRoaXMsZWxlbWVudEhhbmRsZXI6dGhpcy5wYXJlbnRFbGVtZW50LHN3aXBlTWF4OmZ1bmN0aW9uKCl7dC5fb25Td2lwZSYmdC5fb25Td2lwZSgxLHQuX2FuaW1hdGlvbk9wdCksdC5vcGVuKCl9LHN3aXBlTWlkOmZ1bmN0aW9uKGUsbil7dC5fb25Td2lwZSYmdC5fb25Td2lwZShlL24pLHQuX2FuaW1hdG9yLnRyYW5zbGF0ZShlKX0sc3dpcGVNaW46ZnVuY3Rpb24oKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKDAsdC5fYW5pbWF0aW9uT3B0KSx0LmNsb3NlKCl9LGdldFRocmVzaG9sZDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCgwLE1hdGgubWluKDEscGFyc2VGbG9hdCh0LmdldEF0dHJpYnV0ZShcIm9wZW4tdGhyZXNob2xkXCIpKXx8LjMpKX0sZ2V0U2lkZTpmdW5jdGlvbigpe3JldHVybiB0LnNpZGV9LGlzSW5pdGlhbFN0YXRlOmZ1bmN0aW9uKCl7dmFyIGU9dC5fc3RhdGU9PT1hYTtyZXR1cm4gdC5fc3RhdGU9XCJjaGFuZ2luZ1wiLGV9LGlnbm9yZVN3aXBlOmZ1bmN0aW9uKGUsbil7dmFyIGk9dC5pc09wZW4sbz1NYXRoLm1heCgwLHBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwic3dpcGUtdGFyZ2V0LXdpZHRoXCIpLDEwKXx8MCk7cmV0dXJuXCJzcGxpdFwiPT09dC5fbW9kZXx8dC5fbG9jay5pc0xvY2tlZCgpfHx0Ll9pc090aGVyU2lkZU9wZW4oKXx8IWZ1bmN0aW9uKGUpe3JldHVyblwibGVmdFwiPT09dC5zaWRlP1wibGVmdFwiPT09ZSYmaXx8XCJyaWdodFwiPT09ZSYmIWk6XCJsZWZ0XCI9PT1lJiYhaXx8XCJyaWdodFwiPT09ZSYmaX0oZS5nZXN0dXJlLmRpcmVjdGlvbil8fCFpJiYwIT09byYmbj5vfX0pLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwic3dpcGVhYmxlXCIpLG4odGhpcyxmdW5jdGlvbigpe3QuY29uc3RydWN0b3Iub2JzZXJ2ZWRBdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGUsbnVsbCx0LmdldEF0dHJpYnV0ZShlKSl9KX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZSYmdGhpcy5fc3dpcGUuZGlzcG9zZSgpLHRoaXMuX2FuaW1hdG9yPXRoaXMuX2FuaW1hdGlvbk9wdD10aGlzLl9zd2lwZT1udWxsfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwic3dpcGVhYmxlXCI6dGhpcy5fc3dpcGUmJnRoaXMuX3N3aXBlLnVwZGF0ZSgpO2JyZWFrO2Nhc2VcIndpZHRoXCI6bj10aGlzLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpLHRoaXMuc3R5bGUud2lkdGg9L15cXGQrKHB4fCUpJC8udGVzdChuKT9uOlwiODAlXCI7YnJlYWs7ZGVmYXVsdDp0aGlzW1EuY2FtZWxpemUoXCJfdXBkYXRlLVwiK3QpXShuKX19fSx7a2V5OlwiX2VtaXRFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKFwicHJlXCIhPT10LnNsaWNlKDAsMykpcmV0dXJuIFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLHQse3NpZGU6dGhpc30pO3ZhciBlPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyx0LHtzaWRlOnRoaXMsY2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuIGU9ITB9fSksZX19LHtrZXk6XCJfaXNPdGhlclNpZGVPcGVuXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiEhUS5maW5kQ2hpbGQodGhpcy5wYXJlbnRFbGVtZW50LGZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgdC5jb25zdHJ1Y3RvciYmZSE9PXQmJlwiY29sbGFwc2VcIj09PWUuX21vZGUmJmUuaXNPcGVufSl9fSx7a2V5OlwiX3VwZGF0ZUNvbGxhcHNlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5nZXRBdHRyaWJ1dGUoXCJjb2xsYXBzZVwiKTtyZXR1cm4gbnVsbD09PXR8fFwic3BsaXRcIj09PXQ/KHRoaXMuX2NvbGxhcHNlRGV0ZWN0aW9uLmRpc2FibGUoKSx0aGlzLl91cGRhdGVNb2RlKFwic3BsaXRcIikpOlwiXCI9PT10fHxcImNvbGxhcHNlXCI9PT10Pyh0aGlzLl9jb2xsYXBzZURldGVjdGlvbi5kaXNhYmxlKCksdGhpcy5fdXBkYXRlTW9kZShcImNvbGxhcHNlXCIpKTp2b2lkIHRoaXMuX2NvbGxhcHNlRGV0ZWN0aW9uLmNoYW5nZVRhcmdldCh0KX19LHtrZXk6XCJfdXBkYXRlTW9kZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QhPT10aGlzLl9tb2RlJiYodGhpcy5fbW9kZT10LHRoaXMuc2V0QXR0cmlidXRlKFwibW9kZVwiLHQpLFwic3BsaXRcIj09PXQ/KHRoaXMuX2FuaW1hdG9yJiZ0aGlzLl9hbmltYXRvci5kZWFjdGl2YXRlKCksdGhpcy5fc3RhdGU9YWEpOih0aGlzLl9hbmltYXRvciYmdGhpcy5fYW5pbWF0b3IuYWN0aXZhdGUodGhpcyksXCJvcGVuXCI9PT10aGlzLl9zdGF0ZSYmdGhpcy5fYW5pbWF0b3Iub3BlbigpKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcIm1vZGVjaGFuZ2VcIix7c2lkZTp0aGlzLG1vZGU6dH0pKX19LHtrZXk6XCJfdXBkYXRlQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIik7dGhpcy5wYXJlbnROb2RlJiYodGhpcy5fYW5pbWF0b3ImJnRoaXMuX2FuaW1hdG9yLmRlYWN0aXZhdGUoKSx0aGlzLl9hbmltYXRvcj10aGlzLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3Ioe2FuaW1hdGlvbjp0fSksdGhpcy5fYW5pbWF0b3IuYWN0aXZhdGUodGhpcyksdGhpcy5fYW5pbWF0aW9uT3B0PXt0aW1pbmc6dGhpcy5fYW5pbWF0b3IuZHVyYXRpb24sZHVyYXRpb246dGhpcy5fYW5pbWF0b3IuZHVyYXRpb259KX19LHtrZXk6XCJfdXBkYXRlQW5pbWF0aW9uT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIik7dGhpcy5fYW5pbWF0b3IudXBkYXRlT3B0aW9ucyhPLnBhcnNlQW5pbWF0aW9uT3B0aW9uc1N0cmluZyh0KSl9fSx7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRvZ2dsZSh0LCEwKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnRvZ2dsZSh0LCExKX19LHtrZXk6XCJ0b2dnbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj1hcmd1bWVudHNbMV0saT1cImJvb2xlYW5cIj09dHlwZW9mIG4/bjohdGhpcy5pc09wZW4sbz1pP1wib3BlblwiOlwiY2xvc2VcIixyPWk/XCJvcGVuXCI6YWE7aWYoXCJzcGxpdFwiPT09dGhpcy5fbW9kZSlyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCExKTtpZih0aGlzLl9zdGF0ZT09PXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzKTtpZih0aGlzLl9sb2NrLmlzTG9ja2VkKCkpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQW5vdGhlciBzcGxpdHRlci1zaWRlIGFjdGlvbiBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO2lmKGkmJnRoaXMuX2lzT3RoZXJTaWRlT3BlbigpKXJldHVybiBQcm9taXNlLnJlamVjdChcIkFub3RoZXIgbWVudSBpcyBhbHJlYWR5IG9wZW4uXCIpO2lmKHRoaXMuX2VtaXRFdmVudChcInByZVwiK28pKXJldHVybiBQcm9taXNlLnJlamVjdChcIkNhbmNlbGVkIGluIHByZVwiK28rXCIgZXZlbnQuXCIpO3ZhciBhPXRoaXMuX2xvY2subG9jaygpO3JldHVybiB0aGlzLl9zdGF0ZT1cImNoYW5naW5nXCIsbmV3IFByb21pc2UoZnVuY3Rpb24obil7dC5fYW5pbWF0b3Jbb10oZnVuY3Rpb24oKXtRLmlvc1BhZ2VTY3JvbGxGaXgoaSksdC5fc3RhdGU9cixhKCksdC5fZW1pdEV2ZW50KFwicG9zdFwiK28pLGUuY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmZS5jYWxsYmFjayh0KSxuKHQpfSl9KX19LHtrZXk6XCJsb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTt0aGlzLl9wYWdlPXQ7dmFyIGk9bi5jYWxsYmFja3x8ZnVuY3Rpb24oKXt9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt2YXIgbz1lLl9jb250ZW50fHxudWxsO2UuX3BhZ2VMb2FkZXIubG9hZCh7cGFnZTp0LHBhcmVudDplfSxmdW5jdGlvbih0KXtvJiYoZS5fcGFnZUxvYWRlci51bmxvYWQobyksbz1udWxsKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5fc2hvdygpfSksaSh0KSxuKHQpfSl9KX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fY29udGVudC5fc2hvdygpfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMuX2NvbnRlbnQpLHRoaXMucmVtb3ZlKCl9fSx7a2V5Olwic2lkZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmlnaHRcIj09PXRoaXMuZ2V0QXR0cmlidXRlKFwic2lkZVwiKT9cInJpZ2h0XCI6XCJsZWZ0XCJ9fSx7a2V5OlwicGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fcGFnZT10fX0se2tleTpcIl9jb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2hpbGRyZW5bMF19fSx7a2V5OlwicGFnZUxvYWRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH19LHtrZXk6XCJtb2RlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGV9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX0se2tleTpcImlzT3BlblwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY29sbGFwc2VcIj09PXRoaXMuX21vZGUmJnRoaXMuX3N0YXRlIT09YWF9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJhbmltYXRpb25cIixcIndpZHRoXCIsXCJjb2xsYXBzZVwiLFwic3dpcGVhYmxlXCIsXCJhbmltYXRpb24tb3B0aW9uc1wiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVvcGVuXCIsXCJwb3N0b3BlblwiLFwicHJlY2xvc2VcIixcInBvc3RjbG9zZVwiLFwibW9kZWNoYW5nZVwiXX19LHtrZXk6XCJyZXdyaXRhYmxlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBzYX19XSksZX0oKTtjLlNwbGl0dGVyU2lkZT11YSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3BsaXR0ZXItc2lkZVwiLHVhKTt2YXIgY2E9e1wiXCI6XCJzd2l0Y2gtLSpcIixcIi5zd2l0Y2hfX2lucHV0XCI6XCJzd2l0Y2gtLSpfX2lucHV0XCIsXCIuc3dpdGNoX19oYW5kbGVcIjpcInN3aXRjaC0tKl9faGFuZGxlXCIsXCIuc3dpdGNoX190b2dnbGVcIjpcInN3aXRjaC0tKl9fdG9nZ2xlXCJ9LGhhPXtpb3M6WzEsMjFdLG1hdGVyaWFsOlswLDE2XX0sZGE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXt0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcIm1vZGlmaWVyXCIsbnVsbCx0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKX0pLHQuX29uQ2hhbmdlPXQuX29uQ2hhbmdlLmJpbmQodCksdC5fb25SZWxlYXNlPXQuX29uUmVsZWFzZS5iaW5kKHQpLHQuX2xhc3RUaW1lU3RhbXA9MCx0fXJldHVybiBiKGUsSG8pLGcoZSxbe2tleTpcIl9nZXRQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2xvY2F0aW9ucztyZXR1cm4gTWF0aC5taW4oZVsxXSxNYXRoLm1heChlWzBdLHRoaXMuX3N0YXJ0WCt0Lmdlc3R1cmUuZGVsdGFYKSl9fSx7a2V5OlwiX2VtaXRDaGFuZ2VFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJjaGFuZ2VcIix7dmFsdWU6dGhpcy5jaGVja2VkLHN3aXRjaDp0aGlzLGlzSW50ZXJhY3RpdmU6ITB9KX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0JiZ0LnN0b3BQcm9wYWdhdGlvbiYmdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9lbWl0Q2hhbmdlRXZlbnQoKX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpeyh0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5kZWZhdWx0RWxlbWVudENsYXNzK1wiX190b3VjaFwiKXx8dC50aW1lU3RhbXAtdGhpcy5fbGFzdFRpbWVTdGFtcDw1MCkmJnQucHJldmVudERlZmF1bHQoKSx0aGlzLl9sYXN0VGltZVN0YW1wPXQudGltZVN0YW1wfX0se2tleTpcIl9vbkhvbGRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRpc2FibGVkfHwoQi5hZGRNb2RpZmllcih0aGlzLFwiYWN0aXZlXCIpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKSl9fSx7a2V5OlwiX29uRHJhZ1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5kaXNhYmxlZHx8LTE9PT1bXCJsZWZ0XCIsXCJyaWdodFwiXS5pbmRleE9mKHQuZ2VzdHVyZS5kaXJlY3Rpb24pP0IucmVtb3ZlTW9kaWZpZXIodGhpcyxcImFjdGl2ZVwiKToodC5jb25zdW1lZD0hMCxCLmFkZE1vZGlmaWVyKHRoaXMsXCJhY3RpdmVcIiksdGhpcy5fc3RhcnRYPXRoaXMuX2xvY2F0aW9uc1t0aGlzLmNoZWNrZWQ/MTowXSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsdGhpcy5fb25EcmFnKSxkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVsZWFzZVwiLHRoaXMuX29uUmVsZWFzZSkpfX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuX2hhbmRsZS5zdHlsZS5sZWZ0PXRoaXMuX2dldFBvc2l0aW9uKHQpK1wicHhcIn19LHtrZXk6XCJfb25SZWxlYXNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbG9jYXRpb25zLG49dGhpcy5fZ2V0UG9zaXRpb24odCksaT10aGlzLmNoZWNrZWQ7dGhpcy5jaGVja2VkPW4+PShlWzBdK2VbMV0pLzIsdGhpcy5jaGVja2VkIT09aSYmdGhpcy5fZW1pdENoYW5nZUV2ZW50KCksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ1wiLHRoaXMuX29uRHJhZyksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpLHRoaXMuX2hhbmRsZS5zdHlsZS5sZWZ0PVwiXCIsQi5yZW1vdmVNb2RpZmllcih0aGlzLFwiYWN0aXZlXCIpfX0se2tleTpcImNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307dGhpcy5kaXNhYmxlZHx8KHRoaXMuY2hlY2tlZD0hdGhpcy5jaGVja2VkLHRoaXMuX2VtaXRDaGFuZ2VFdmVudCgpLHRoaXMuX2xhc3RUaW1lU3RhbXA9dC50aW1lU3RhbXB8fDApfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0Ll9vbkNoYW5nZSl9KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdTdGFydCksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiaG9sZFwiLHRoaXMuX29uSG9sZCksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwidGFwXCIsdGhpcy5jbGljayksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3I9bmV3IHN0KHRoaXMse2RyYWdNaW5EaXN0YW5jZToxLGhvbGRUaW1lb3V0OjI1MSxwYXNzaXZlOiEwfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHQuX29uQ2hhbmdlKX0pLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJob2xkXCIsdGhpcy5fb25Ib2xkKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLmNsaWNrKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2spLHRoaXMuX2dlc3R1cmVEZXRlY3RvciYmdGhpcy5fZ2VzdHVyZURldGVjdG9yLmRpc3Bvc2UoKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7aWYoXCJtb2RpZmllclwiPT09dCl7dmFyIG89LTEhPT0oaXx8XCJcIikuaW5kZXhPZihcIm1hdGVyaWFsXCIpO3RoaXMuX2xvY2F0aW9ucz1oYVtvP1wibWF0ZXJpYWxcIjpcImlvc1wiXX12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyx0LG4saSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBjYX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwic3dpdGNoXCJ9fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX2lucHV0XCI+XFxuICAgICAgPGRpdiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX190b2dnbGVcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faGFuZGxlXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19fdG91Y2hcIj48L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICAnfX0se2tleTpcInR5cGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCJ9fSx7a2V5OlwiX2hhbmRsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIuXCIrdGhpcy5fZGVmYXVsdENsYXNzTmFtZStcIl9faGFuZGxlXCIpfX0se2tleTpcImNoZWNrYm94XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lucHV0fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcIm1vZGlmaWVyXCJdKX19XSksZX0oKTtjLlN3aXRjaD1kYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc3dpdGNoXCIsZGEpO3ZhciBmYT17XCIudGFiYmFyX19jb250ZW50XCI6XCJ0YWJiYXItLSpfX2NvbnRlbnRcIixcIi50YWJiYXJfX2JvcmRlclwiOlwidGFiYmFyLS0qX19ib3JkZXJcIixcIi50YWJiYXJcIjpcInRhYmJhci0tKlwifSxwYT17cmVhZHk6ZnVuY3Rpb24odCxlKXtlKCl9fSxnYT1mdW5jdGlvbih0LGUsbil7cmV0dXJuKDEtbikqdCtuKmV9LG1hPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fbG9hZEluYWN0aXZlPVEuZGVmZXIoKSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9zd2lwZXJ8fCh0aGlzLl9zd2lwZXI9bmV3IHJvKHtnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbnRlbnRFbGVtZW50fSxnZXRJbml0aWFsSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJhY3RpdmVJbmRleFwiKXx8dC5nZXRBdHRyaWJ1dGUoXCJhY3RpdmUtaW5kZXhcIil9LGdldEF1dG9TY3JvbGxSYXRpbzp0aGlzLl9nZXRBdXRvU2Nyb2xsUmF0aW8uYmluZCh0aGlzKSxnZXRCdWJibGVXaWR0aDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0LmdldEF0dHJpYnV0ZShcImlnbm9yZS1lZGdlLXdpZHRoXCIpfHwyNSwxMCl9LGlzQXV0b1Njcm9sbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0scHJlQ2hhbmdlSG9vazp0aGlzLl9vblByZUNoYW5nZS5iaW5kKHRoaXMpLHBvc3RDaGFuZ2VIb29rOnRoaXMuX29uUG9zdENoYW5nZS5iaW5kKHRoaXMpLHJlZnJlc2hIb29rOnRoaXMuX29uUmVmcmVzaC5iaW5kKHRoaXMpLHNjcm9sbEhvb2s6dGhpcy5fb25TY3JvbGwuYmluZCh0aGlzKX0pLG4odGhpcyxmdW5jdGlvbigpe3QuX3RhYmJhckJvcmRlcj1RLmZpbmRDaGlsZCh0Ll90YWJiYXJFbGVtZW50LFwiLnRhYmJhcl9fYm9yZGVyXCIpLHQuX3N3aXBlci5pbml0KHtzd2lwZWFibGU6dC5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIil9KX0pKSxuKHRoaXMsZnVuY3Rpb24oKXt0Ll91cGRhdGVQb3NpdGlvbigpLFEuZmluZFBhcmVudCh0LFwib25zLXBhZ2VcIixmdW5jdGlvbih0KXtyZXR1cm4gdD09PWRvY3VtZW50LmJvZHl9KXx8dC5fc2hvdygpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlciYmdGhpcy5fc3dpcGVyLmluaXRpYWxpemVkJiYodGhpcy5fc3dpcGVyLmRpc3Bvc2UoKSx0aGlzLl9zd2lwZXI9bnVsbCx0aGlzLl90YWJiYXJCb3JkZXI9bnVsbCx0aGlzLl90YWJzUmVjdD1udWxsKX19LHtrZXk6XCJfbm9ybWFsaXplRXZlbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gXyh7fSx0LHtpbmRleDp0LmFjdGl2ZUluZGV4LHRhYkl0ZW06dGhpcy50YWJzW3QuYWN0aXZlSW5kZXhdfSl9fSx7a2V5OlwiX29uUG9zdENoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q9dGhpcy5fbm9ybWFsaXplRXZlbnQodCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwb3N0Y2hhbmdlXCIsdCk7dmFyIGU9dC50YWJJdGVtLnBhZ2VFbGVtZW50O2UmJmUuX3Nob3coKX19LHtrZXk6XCJfb25QcmVDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0PXRoaXMuX25vcm1hbGl6ZUV2ZW50KHQpLHQuY2FuY2VsPWZ1bmN0aW9uKCl7cmV0dXJuIHQuY2FuY2VsZWQ9ITB9LFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwicHJlY2hhbmdlXCIsdCksIXQuY2FuY2VsZWQpe3ZhciBlPXQsbj1lLmFjdGl2ZUluZGV4LGk9ZS5sYXN0QWN0aXZlSW5kZXgsbz10aGlzLnRhYnM7aWYob1tuXS5zZXRBY3RpdmUoITApLGk+PTApe3ZhciByPW9baV07ci5zZXRBY3RpdmUoITEpLHIucGFnZUVsZW1lbnQmJnIucGFnZUVsZW1lbnQuX2hpZGUoKX19cmV0dXJuIHQuY2FuY2VsZWR9fSx7a2V5OlwiX29uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKHRoaXMuX3RhYmJhckJvcmRlcilpZih0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUudHJhbnNpdGlvbj1cImFsbCBcIisoZS5kdXJhdGlvbnx8MCkrXCJzIFwiKyhlLnRpbWluZ3x8XCJcIiksdGhpcy5fYXV0b2dyb3cmJnRoaXMuX3RhYnNSZWN0Lmxlbmd0aD4wKXt2YXIgbj1NYXRoLmZsb29yKHQpLGk9TWF0aC5jZWlsKHQpLG89dCUxO3RoaXMuX3RhYmJhckJvcmRlci5zdHlsZS53aWR0aD1nYSh0aGlzLl90YWJzUmVjdFtuXS53aWR0aCx0aGlzLl90YWJzUmVjdFtpXS53aWR0aCxvKStcInB4XCIsdGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZTNkKFwiK2dhKHRoaXMuX3RhYnNSZWN0W25dLmxlZnQsdGhpcy5fdGFic1JlY3RbaV0ubGVmdCxvKStcInB4LCAwLCAwKVwifWVsc2UgdGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLnRyYW5zZm9ybT1cInRyYW5zbGF0ZTNkKFwiKzEwMCp0K1wiJSwgMCwgMClcIjt0aGlzLl9vblN3aXBlJiZ0aGlzLl9vblN3aXBlKHQsZSl9fSx7a2V5OlwiX29uUmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5fYXV0b2dyb3c9US5oYXNNb2RpZmllcih0aGlzLFwiYXV0b2dyb3dcIiksdGhpcy5fdGFic1JlY3Q9dGhpcy50YWJzLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX0pLHRoaXMuX3RhYmJhckJvcmRlcil7dGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLmRpc3BsYXk9dGhpcy5oYXNBdHRyaWJ1dGUoXCJ0YWItYm9yZGVyXCIpfHxRLmhhc01vZGlmaWVyKHRoaXMsXCJtYXRlcmlhbFwiKT9cImJsb2NrXCI6XCJub25lXCI7dmFyIHQ9dGhpcy5nZXRBY3RpdmVUYWJJbmRleCgpO3RoaXMuX3RhYnNSZWN0Lmxlbmd0aD4wJiZ0Pj0wJiYodGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLndpZHRoPXRoaXMuX3RhYnNSZWN0W3RdLndpZHRoK1wicHhcIil9fX0se2tleTpcIl9nZXRBdXRvU2Nyb2xsUmF0aW9cIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dmFyIGk9bi8zMDAqKHQ/LTE6MSk7cmV0dXJuIE1hdGgubWluKDEsTWF0aC5tYXgoMCwuNitlKmkpKX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpO3ZhciB0PXRoaXMuX2NvbnRlbnRFbGVtZW50fHxRLmNyZWF0ZShcIi50YWJiYXJfX2NvbnRlbnRcIik7dC5jbGFzc0xpc3QuYWRkKFwib25zLXRhYmJhcl9fY29udGVudFwiKTt2YXIgZT10aGlzLl90YWJiYXJFbGVtZW50fHxRLmNyZWF0ZShcIi50YWJiYXJcIik7aWYoZS5jbGFzc0xpc3QuYWRkKFwib25zLXRhYmJhcl9fZm9vdGVyXCIpLCFlLnBhcmVudE5vZGUpZm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTt2YXIgbj1OdW1iZXIodGhpcy5nZXRBdHRyaWJ1dGUoXCJhY3RpdmVJbmRleFwiKSk7ZS5jaGlsZHJlbi5sZW5ndGg+biYmIVEuZmluZENoaWxkKGUsXCJbYWN0aXZlXVwiKSYmZS5jaGlsZHJlbltuXS5zZXRBdHRyaWJ1dGUoXCJhY3RpdmVcIixcIlwiKSx0aGlzLl90YWJiYXJCb3JkZXI9US5maW5kQ2hpbGQoZSxcIi50YWJiYXJfX2JvcmRlclwiKXx8US5jcmVhdGUoXCIudGFiYmFyX19ib3JkZXJcIiksZS5hcHBlbmRDaGlsZCh0aGlzLl90YWJiYXJCb3JkZXIpLGUuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXItdGFiYmFyXCIpLCF0LmNoaWxkcmVuWzBdJiZ0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLCF0LmNoaWxkcmVuWzFdJiZ0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHQuYXBwZW5kQ2hpbGQ9dC5hcHBlbmRDaGlsZC5iaW5kKHQuY2hpbGRyZW5bMF0pLHQuaW5zZXJ0QmVmb3JlPXQuaW5zZXJ0QmVmb3JlLmJpbmQodC5jaGlsZHJlblswXSksdGhpcy5hcHBlbmRDaGlsZCh0KSx0aGlzLmFwcGVuZENoaWxkKGUpLEIuaW5pdE1vZGlmaWVyKHRoaXMsZmEpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpLGk9dGhpcy5fdG9wPVwidG9wXCI9PT1lfHxcImF1dG9cIj09PWUmJlEuaGFzTW9kaWZpZXIodGhpcyxcIm1hdGVyaWFsXCIpLG89aT9RLmFkZE1vZGlmaWVyOlEucmVtb3ZlTW9kaWZpZXI7byh0aGlzLFwidG9wXCIpO3ZhciByPVEuZmluZFBhcmVudCh0aGlzLFwib25zLXBhZ2VcIik7ciYmbihyLGZ1bmN0aW9uKCl7dmFyIGU9MDtyLmNoaWxkcmVuWzBdJiZRLm1hdGNoKHIuY2hpbGRyZW5bMF0sXCJvbnMtdG9vbGJhclwiKSYmKG8oci5jaGlsZHJlblswXSxcIm5vc2hhZG93XCIpLGU9MSk7dmFyIG49ci5fZ2V0Q29udGVudEVsZW1lbnQoKSxhPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHIuX2dldENvbnRlbnRFbGVtZW50KCksbnVsbCk7dC5zdHlsZS50b3A9aT9wYXJzZUludChhLmdldFByb3BlcnR5VmFsdWUoXCJwYWRkaW5nLXRvcFwiKSwxMCktZStcInB4XCI6XCJcIixuLnN0eWxlLnRvcD1hLnRvcCxuLnN0eWxlLnRvcD1cIlwifSksUC5hdXRvU3RhdHVzQmFyRmlsbChmdW5jdGlvbigpe3ZhciBlPVEuZmluZFBhcmVudCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcInN0YXR1cy1iYXItZmlsbFwiKX0pO1EudG9nZ2xlQXR0cmlidXRlKHQsXCJzdGF0dXMtYmFyLWZpbGxcIixpJiYhZSl9KX19LHtrZXk6XCJzZXRBY3RpdmVUYWJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LGk9dGhpcy5nZXRBY3RpdmVUYWJJbmRleCgpLG89dGhpcy50YWJzW2ldLHI9dGhpcy50YWJzW3RdO2lmKCFyKXJldHVybiBQcm9taXNlLnJlamVjdChcIlNwZWNpZmllZCBpbmRleCBkb2VzIG5vdCBtYXRjaCBhbnkgdGFiLlwiKTtpZih0PT09aSlyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJyZWFjdGl2ZVwiLHtpbmRleDp0LGFjdGl2ZUluZGV4OnQsdGFiSXRlbTpyfSksUHJvbWlzZS5yZXNvbHZlKHIucGFnZUVsZW1lbnQpO3ZhciBhPXIucGFnZUVsZW1lbnQ7cmV0dXJuKGE/UHJvbWlzZS5yZXNvbHZlKGEpOnIubG9hZGVkKS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBlLl9zd2lwZXIuc2V0QWN0aXZlSW5kZXgodCxfKHtyZWplY3Q6ITB9LG4se2FuaW1hdGlvbjpvJiZpP24uYW5pbWF0aW9ufHxlLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKTpcIm5vbmVcIixhbmltYXRpb25PcHRpb25zOlEuZXh0ZW5kKHtkdXJhdGlvbjouMyx0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjQsIC43LCAuNSwgMSlcIn0sZS5oYXNBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKT9RLmFuaW1hdGlvbk9wdGlvbnNQYXJzZShlLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpKTp7fSxuLmFuaW1hdGlvbk9wdGlvbnN8fHt9KX0pKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG4uY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbiYmbi5jYWxsYmFjayhpKSxpfSl9KX19LHtrZXk6XCJzZXRUYWJiYXJWaXNpYmlsaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXtlLl9jb250ZW50RWxlbWVudC5zdHlsZVtlLl90b3A/XCJ0b3BcIjpcImJvdHRvbVwiXT10P1wiXCI6XCIwcHhcIixlLl90YWJiYXJFbGVtZW50LnN0eWxlLmRpc3BsYXk9dD9cIlwiOlwibm9uZVwiLHQmJmUuX29uUmVmcmVzaCgpfSl9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXRUYWJiYXJWaXNpYmlsaXR5KCEwKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNldFRhYmJhclZpc2liaWxpdHkoITEpfX0se2tleTpcImdldEFjdGl2ZVRhYkluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMudGFicyxlPTA7ZTx0Lmxlbmd0aDtlKyspaWYodFtlXSYmXCJPTlMtVEFCXCI9PT10W2VdLnRhZ05hbWUmJnRbZV0uaXNBY3RpdmUoKSlyZXR1cm4gZTtyZXR1cm4tMX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9zd2lwZXIuc2hvdygpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3ZhciBlPXQudGFicyxuPXQuZ2V0QWN0aXZlVGFiSW5kZXgoZSk7dC5fbG9hZEluYWN0aXZlLnJlc29sdmUoKSxlLmxlbmd0aD4wJiZuPj0wJiZlW25dLmxvYWRlZC50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5fc2hvdygpfSl9KX0pfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZXIuaGlkZSgpO3ZhciB0PXRoaXMudG9wUGFnZTt0JiZ0Ll9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudGFicy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiB0LnJlbW92ZSgpfSksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7aWYoXCJtb2RpZmllclwiPT09dCl7Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyxmYSk7dmFyIGk9ZnVuY3Rpb24odCl7cmV0dXJuLyhefFxccyspdG9wKCR8XFxzKykvaS50ZXN0KHQpfTtpKGUpIT09aShuKSYmdGhpcy5fdXBkYXRlUG9zaXRpb24oKX1lbHNlXCJwb3NpdGlvblwiPT09dD9RLmlzQXR0YWNoZWQodGhpcykmJnRoaXMuX3VwZGF0ZVBvc2l0aW9uKCk6XCJzd2lwZWFibGVcIj09PXQ/dGhpcy5fc3dpcGVyJiZ0aGlzLl9zd2lwZXIudXBkYXRlU3dpcGVhYmxlKHRoaXMuaGFzQXR0cmlidXRlKFwic3dpcGVhYmxlXCIpKTpcImhpZGUtdGFic1wiPT09dCYmdGhpcy5zZXRUYWJiYXJWaXNpYmlsaXR5KCF0aGlzLmhhc0F0dHJpYnV0ZShcImhpZGUtdGFic1wiKXx8XCJmYWxzZVwiPT09bil9fSx7a2V5OlwiX3RhYmJhckVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi50YWJiYXJcIil9fSx7a2V5OlwiX2NvbnRlbnRFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIudGFiYmFyX19jb250ZW50XCIpfX0se2tleTpcIl90YXJnZXRFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fY29udGVudEVsZW1lbnQ7cmV0dXJuIHQmJnQuY2hpbGRyZW5bMF18fG51bGx9fSx7a2V5OlwidG9wUGFnZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMudGFicyxlPXRoaXMuZ2V0QWN0aXZlVGFiSW5kZXgoKTtyZXR1cm4gdFtlXT90W2VdLnBhZ2VFbGVtZW50fHx0aGlzLnBhZ2VzWzBdfHxudWxsOm51bGx9fSx7a2V5OlwicGFnZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5hcnJheUZyb20odGhpcy5fdGFyZ2V0RWxlbWVudC5jaGlsZHJlbil9fSx7a2V5OlwidGFic1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5fdGFiYmFyRWxlbWVudC5jaGlsZHJlbixmdW5jdGlvbih0KXtyZXR1cm5cIk9OUy1UQUJcIj09PXQudGFnTmFtZX0pfX0se2tleTpcInZpc2libGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIm5vbmVcIiE9PXRoaXMuX3RhYmJhckVsZW1lbnQuc3R5bGUuZGlzcGxheX19LHtrZXk6XCJzd2lwZWFibGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcInN3aXBlYWJsZVwiLHQpfX0se2tleTpcIm9uU3dpcGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Td2lwZX0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wib25Td2lwZVwiIG11c3QgYmUgYSBmdW5jdGlvbicpLHRoaXMuX29uU3dpcGU9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJwb3NpdGlvblwiLFwic3dpcGVhYmxlXCIsXCJ0YWItYm9yZGVyXCIsXCJoaWRlLXRhYnNcIl19fSx7a2V5OlwicmV3cml0YWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGF9fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicHJlY2hhbmdlXCIsXCJwb3N0Y2hhbmdlXCIsXCJyZWFjdGl2ZVwiXX19XSksZX0oKTtjLlRhYmJhcj1tYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdGFiYmFyXCIsbWEpO3ZhciBfYT17XCJcIjpcInRhYmJhci0tKl9faXRlbVwiLFwiLnRhYmJhcl9fYnV0dG9uXCI6XCJ0YWJiYXItLSpfX2J1dHRvblwifSx2YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuW1wibGFiZWxcIixcImljb25cIixcImJhZGdlXCJdLnNvbWUodC5oYXNBdHRyaWJ1dGUuYmluZCh0KSk/dC5fY29tcGlsZSgpOm4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0Ll9wYWdlTG9hZGVyPWp0LHQuX29uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJ0YWJiYXJfX2l0ZW1cIiksIXRoaXMuX2J1dHRvbil7Zm9yKHZhciB0PVEuY3JlYXRlKFwiYnV0dG9uLnRhYmJhcl9fYnV0dG9uXCIpO3RoaXMuY2hpbGROb2Rlc1swXTspdC5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO3ZhciBlPVEuY3JlYXRlKFwiaW5wdXRcIix7ZGlzcGxheTpcIm5vbmVcIn0pO2UudHlwZT1cInJhZGlvXCIsdGhpcy5hcHBlbmRDaGlsZChlKSx0aGlzLmFwcGVuZENoaWxkKHQpLHRoaXMuX3VwZGF0ZUJ1dHRvbkNvbnRlbnQoKSxCLmluaXRNb2RpZmllcih0aGlzLF9hKSx0aGlzLl91cGRhdGVSaXBwbGUoKX19fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYnV0dG9uJiZRLnVwZGF0ZVJpcHBsZSh0aGlzLl9idXR0b24sdGhpcy5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIikpfX0se2tleTpcIl91cGRhdGVCdXR0b25Db250ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fYnV0dG9uLG49dGhpcy5faWNvbjtpZih0aGlzLmhhc0F0dHJpYnV0ZShcImljb25cIikpe3ZhciBpPShuPW58fFEuY3JlYXRlRWxlbWVudCgnPGRpdiBjbGFzcz1cInRhYmJhcl9faWNvblwiPjxvbnMtaWNvbj48L29ucy1pY29uPjwvZGl2PicpKS5jaGlsZHJlblswXSxvPWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBpLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcImljb25cIixlLHQuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSl9fShpLmdldEF0dHJpYnV0ZShcImljb25cIikpO2kuc2V0QXR0cmlidXRlKFwiaWNvblwiLHRoaXMuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSksbi5wYXJlbnRFbGVtZW50IT09ZSYmZS5pbnNlcnRCZWZvcmUobixlLmZpcnN0Q2hpbGQpLGkuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24/bygpOnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBpLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZvKCl9KX1lbHNlIG4mJm4ucmVtb3ZlKCk7W1wibGFiZWxcIixcImJhZGdlXCJdLmZvckVhY2goZnVuY3Rpb24obixpKXt2YXIgbz10LnF1ZXJ5U2VsZWN0b3IoXCIudGFiYmFyX19cIituKTt0Lmhhc0F0dHJpYnV0ZShuKT8oKG89b3x8US5jcmVhdGUoXCIudGFiYmFyX19cIituKyhcImJhZGdlXCI9PT1uP1wiIG5vdGlmaWNhdGlvblwiOlwiXCIpKSkudGV4dENvbnRlbnQ9dC5nZXRBdHRyaWJ1dGUobiksby5wYXJlbnRFbGVtZW50IT09ZSYmZS5hcHBlbmRDaGlsZChvKSk6byYmby5yZW1vdmUoKX0pfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLm9uQ2xpY2sgaW5zdGFuY2VvZiBGdW5jdGlvbj90aGlzLm9uQ2xpY2soKTp0aGlzLl90YWJiYXIuc2V0QWN0aXZlVGFiKHRoaXMuaW5kZXgse3JlamVjdDohMX0pfX0se2tleTpcInNldEFjdGl2ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9IShhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXSl8fGFyZ3VtZW50c1swXTt0aGlzLl9pbnB1dC5jaGVja2VkPXQsdGhpcy5jbGFzc0xpc3QudG9nZ2xlKFwiYWN0aXZlXCIsdCksUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImFjdGl2ZVwiLHQpLHRoaXMuaGFzQXR0cmlidXRlKFwiaWNvblwiKSYmdGhpcy5oYXNBdHRyaWJ1dGUoXCJhY3RpdmUtaWNvblwiKSYmdGhpcy5faWNvbi5jaGlsZHJlblswXS5zZXRBdHRyaWJ1dGUoXCJpY29uXCIsdGhpcy5nZXRBdHRyaWJ1dGUodD9cImFjdGl2ZS1pY29uXCI6XCJpY29uXCIpKX19LHtrZXk6XCJfbG9hZFBhZ2VFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3JldHVybiB0aGlzLl9oYXNMb2FkZWQ9ITAsbmV3IFByb21pc2UoZnVuY3Rpb24oaSl7bi5fcGFnZUxvYWRlci5sb2FkKHtwYXJlbnQ6dCxwYWdlOmV9LGZ1bmN0aW9uKGUpe3QucmVwbGFjZUNoaWxkKGUsdC5jaGlsZHJlbltuLmluZGV4XSksbi5fbG9hZGVkUGFnZT1lLGkoZSl9KX0pfX0se2tleTpcImlzQWN0aXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoXCJhY3RpdmVcIil9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljaywhMSksdGhpcy5fbG9hZGVkUGFnZSYmKHRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMuX2xvYWRlZFBhZ2UpLHRoaXMuX2xvYWRlZFBhZ2U9bnVsbCx0aGlzLl9oYXNMb2FkZWQ9ITEsdGhpcy5sb2FkZWQ9bnVsbCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrLCExKSxRLmlzQXR0YWNoZWQodGhpcykmJiF0aGlzLmxvYWRlZCl7dmFyIGU9US5kZWZlcigpO3RoaXMubG9hZGVkPWUucHJvbWlzZSxuKHRoaXMsZnVuY3Rpb24oKXt2YXIgbj10LmluZGV4LGk9dC5fdGFiYmFyO2l8fFEudGhyb3coXCJUYWIgZWxlbWVudHMgbXVzdCBiZSBjaGlsZHJlbiBvZiBUYWJiYXJcIiksaS5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSYmUS5hZGRNb2RpZmllcih0LGkuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIikpLHQuX2hhc0xvYWRlZHx8KHQuaGFzQXR0cmlidXRlKFwiYWN0aXZlXCIpJiYodC5zZXRBY3RpdmUoITApLGkuc2V0QXR0cmlidXRlKFwiYWN0aXZlSW5kZXhcIixuKSksbj09PWkudGFicy5sZW5ndGgtMSYmKGkuX29uUmVmcmVzaCgpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBpLl9vblJlZnJlc2goKX0pKSxtYS5yZXdyaXRhYmxlcy5yZWFkeShpLGZ1bmN0aW9uKCl7dmFyIG89dC5wYWdlfHx0LmdldEF0dHJpYnV0ZShcInBhZ2VcIik7aWYoIXQucGFnZUVsZW1lbnQmJm8pe3ZhciByPWkuX3RhcmdldEVsZW1lbnQsYT1RLmNyZWF0ZShcImRpdlwiLHtoZWlnaHQ6XCIxMDAlXCIsd2lkdGg6XCIxMDAlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwifSk7ci5pbnNlcnRCZWZvcmUoYSxyLmNoaWxkcmVuW25dKTt2YXIgcz1mdW5jdGlvbigpe3JldHVybiB0Ll9sb2FkUGFnZUVsZW1lbnQocixvKS50aGVuKGUucmVzb2x2ZSl9O3JldHVybiB0LmlzQWN0aXZlKCk/cygpOmkuX2xvYWRJbmFjdGl2ZS5wcm9taXNlLnRoZW4ocyl9cmV0dXJuIGUucmVzb2x2ZSh0LnBhZ2VFbGVtZW50KX0pKX0pfX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG89dGhpcztzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwidGFiYmFyX19pdGVtXCIsX2EpO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIEIub25Nb2RpZmllckNoYW5nZWQoZSxpLG8sX2EpfSk7YnJlYWs7Y2FzZVwicmlwcGxlXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3VwZGF0ZVJpcHBsZSgpfSk7YnJlYWs7Y2FzZVwiaWNvblwiOmNhc2VcImxhYmVsXCI6Y2FzZVwiYmFkZ2VcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlQnV0dG9uQ29udGVudCgpfSk7YnJlYWs7Y2FzZVwicGFnZVwiOnRoaXMucGFnZT1pfHxcIlwifX19LHtrZXk6XCJwYWdlTG9hZGVyXCIsc2V0OmZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBCdHx8US50aHJvd1BhZ2VMb2FkZXIoKSx0aGlzLl9wYWdlTG9hZGVyPXR9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfX0se2tleTpcIl9pbnB1dFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiaW5wdXRcIil9fSx7a2V5OlwiX2J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLnRhYmJhcl9fYnV0dG9uXCIpfX0se2tleTpcIl9pY29uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi50YWJiYXJfX2ljb25cIil9fSx7a2V5OlwiX3RhYmJhclwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRQYXJlbnQodGhpcyxcIm9ucy10YWJiYXJcIil9fSx7a2V5OlwiaW5kZXhcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbCh0aGlzLnBhcmVudEVsZW1lbnQuY2hpbGRyZW4sdGhpcyl9fSx7a2V5OlwicGFnZUVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9sb2FkZWRQYWdlKXJldHVybiB0aGlzLl9sb2FkZWRQYWdlO3ZhciB0PXRoaXMuX3RhYmJhcjtyZXR1cm4gdC5wYWdlcy5sZW5ndGg9PT10LnRhYnMubGVuZ3RoP3QucGFnZXNbdGhpcy5pbmRleF06bnVsbH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcImljb25cIixcImxhYmVsXCIsXCJwYWdlXCIsXCJiYWRnZVwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5UYWI9dmEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRhYlwiLHZhKTt2YXIgYmE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLHlhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxiYSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX1dKSxlfSgpLGthPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yNTphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLm1lc3NhZ2VEZWxheT0uNCpsLmR1cmF0aW9uK2wuZGVsYXksQy5pc0FuZHJvaWQoKT9sLmFzY2Vuc2lvbj00ODpMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5hc2NlbnNpb249OTg6TGkuaXNJUGhvbmVYTGFuZHNjYXBlUGF0Y2hBY3RpdmUoKT9sLmFzY2Vuc2lvbj04NTpsLmFzY2Vuc2lvbj02NCxsfXJldHVybiBiKGUsYmEpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9dC5fdG9hc3QsUS5nbG9iYWxzLmZhYk9mZnNldD10aGlzLmFzY2Vuc2lvbixudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5hc2NlbnNpb24rXCJweCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSksbnQodGhpcy5fZ2V0RmFicygpKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAtXCIrdGhpcy5hc2NlbnNpb24rXCJweCwgMCkgc2NhbGUoMSlcIn0sdGhpcy5kZWYpLG50KFEuYXJyYXlGcm9tKHQuY2hpbGRyZW4pLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD10Ll90b2FzdCxRLmdsb2JhbHMuZmFiT2Zmc2V0PTAsbnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmFzY2Vuc2lvbitcInB4LCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pLG50KHRoaXMuX2dldEZhYnMoKSx0aGlzLmRlZikud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMCkgc2NhbGUoMSlcIn0sdGhpcy5kZWYpLG50KFEuYXJyYXlGcm9tKHQuY2hpbGRyZW4pLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSl9fSx7a2V5OlwiX2dldEZhYnNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwib25zLWZhYltwb3NpdGlvbn49Ym90dG9tXSwgb25zLXNwZWVkLWRpYWxbcG9zaXRpb25+PWJvdHRvbV1cIikpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC52aXNpYmxlfSl9fV0pLGV9KCksd2E9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2VcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM1OmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYm9keUhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgMzRweClcIjpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP2wubGlmdEFtb3VudD1cImNhbGMoMTAwJSArIDIxcHgpXCI6bC5saWZ0QW1vdW50PVwiMTAwJVwiLGx9cmV0dXJuIGIoZSxiYSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD10Ll90b2FzdCxudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5saWZ0QW1vdW50K1wiLCAwKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMubGlmdEFtb3VudCtcIiwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpezA9PT1wYXJzZUludCh0LnN0eWxlLnRvcCwxMCkmJih0LnN0eWxlLnRvcD10LnN0eWxlLmJvdHRvbT1cIlwiKX19XSksZX0oKSxFYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzU6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gTGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZSgpP2wuZmFsbEFtb3VudD1cImNhbGMoLTEwMCUgLSA0NHB4KVwiOmwuZmFsbEFtb3VudD1cIi0xMDAlXCIsbH1yZXR1cm4gYihlLGJhKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHQpLG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmZhbGxBbW91bnQrXCIsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7dD10Ll90b2FzdCx0aGlzLl91cGRhdGVQb3NpdGlvbih0KSxudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmZhbGxBbW91bnQrXCIsIDApXCIsb3BhY2l0eTowfSkucXVldWUoZnVuY3Rpb24oaSl7bi5fdXBkYXRlUG9zaXRpb24odCwhMCksZSYmZSgpLGkoKX0pKX19LHtrZXk6XCJfdXBkYXRlUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXZvaWQgMDtuPUxpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9cIjQ0cHhcIjpcIjBcIix0LnN0eWxlLnRvcCE9PW4mJih0LnN0eWxlLnRvcD1uLHQuc3R5bGUuYm90dG9tPVwiaW5pdGlhbFwiKX19XSksZX0oKSxDYT17XCIudG9hc3RcIjpcInRvYXN0LS0qXCIsXCIudG9hc3RfX21lc3NhZ2VcIjpcInRvYXN0LS0qX19tZXNzYWdlXCIsXCIudG9hc3RfX2J1dHRvblwiOlwidG9hc3QtLSpfX2J1dHRvblwifSxBYT17ZGVmYXVsdDpDLmlzQW5kcm9pZCgpP2thOndhLGZhZGU6eWEsYXNjZW5kOmthLGxpZnQ6d2EsZmFsbDpFYSxub25lOmJhfSxTYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2RlZmF1bHREQkI9ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2FsbFBhcmVudEhhbmRsZXIoKX0sbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvYXN0JiYodGhpcy5fdG9hc3Quc3R5bGUudG9wPXRoaXMuX3RvYXN0LnN0eWxlLmJvdHRvbT1cIlwiKSxuZXcgTyh7YW5pbWF0b3JzOkFhLGJhc2VDbGFzczpiYSxiYXNlQ2xhc3NOYW1lOlwiVG9hc3RBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xZTQ7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi50b2FzdFwiKTtpZighdClmb3IoKHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSkuY2xhc3NMaXN0LmFkZChcInRvYXN0XCIpO3RoaXMuY2hpbGROb2Rlc1swXTspdC5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO3ZhciBlPVEuZmluZENoaWxkKHQsXCIudG9hc3RfX2J1dHRvblwiKTtpZihlfHwoZT1RLmZpbmRDaGlsZCh0LGZ1bmN0aW9uKHQpe3JldHVybiBRLm1hdGNoKHQsXCIuYnV0dG9uXCIpfHxRLm1hdGNoKHQsXCJidXR0b25cIil9KSkmJihlLmNsYXNzTGlzdC5yZW1vdmUoXCJidXR0b25cIiksZS5jbGFzc0xpc3QuYWRkKFwidG9hc3RfX2J1dHRvblwiKSx0LmFwcGVuZENoaWxkKGUpKSwhUS5maW5kQ2hpbGQodCxcIi50b2FzdF9fbWVzc2FnZVwiKSl7dmFyIG49US5maW5kQ2hpbGQodCxcIi5tZXNzYWdlXCIpO2lmKCFuKXtuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Zm9yKHZhciBpPXQuY2hpbGROb2Rlcy5sZW5ndGgtMTtpPj0wO2ktLSl0LmNoaWxkTm9kZXNbaV0hPT1lJiZuLmluc2VydEJlZm9yZSh0LmNoaWxkTm9kZXNbaV0sbi5maXJzdENoaWxkKX1uLmNsYXNzTGlzdC5hZGQoXCJ0b2FzdF9fbWVzc2FnZVwiKSx0Lmluc2VydEJlZm9yZShuLHQuZmlyc3RDaGlsZCl9dC5wYXJlbnROb2RlIT09dGhpcyYmdGhpcy5hcHBlbmRDaGlsZCh0KSxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBDYX19LHtrZXk6XCJfdG9hc3RcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi50b2FzdFwiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgYmF8fFEudGhyb3coJ1wiQW5pbWF0b3JcIiBwYXJhbSBtdXN0IGluaGVyaXQgT25zVG9hc3RFbGVtZW50LlRvYXN0QW5pbWF0b3InKSxBYVt0XT1lfX0se2tleTpcImFuaW1hdG9yc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBBYX19LHtrZXk6XCJUb2FzdEFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGJhfX1dKSxlfSgpO2MuVG9hc3Q9U2EsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRvYXN0XCIsU2EpO3ZhciBQYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwidG9vbGJhci1idXR0b24tLSpcIn19fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInRvb2xiYXItYnV0dG9uXCJ9fSx7a2V5OlwiX3JpcHBsZU9wdFwiLGdldDpmdW5jdGlvbigpe3JldHVyblt0aGlzLHZvaWQgMCx7Y2VudGVyOlwiXCIsc2l6ZTpcImNvbnRhaW5cIixiYWNrZ3JvdW5kOlwidHJhbnNwYXJlbnRcIn1dfX1dKSxlfSgpO3JldHVybiBjLlRvb2xiYXJCdXR0b249UGEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRvb2xiYXItYnV0dG9uXCIsUGEpLGZ1bmN0aW9uKHQpe3dpbmRvdy5fb25zTG9hZGVkJiZ0Ll91dGlsLndhcm4oXCJPbnNlbiBVSSBpcyBsb2FkZWQgbW9yZSB0aGFuIG9uY2UuXCIpLHdpbmRvdy5fb25zTG9hZGVkPSEwLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGZ1bmN0aW9uKCl7dC5mYXN0Q2xpY2s9enQuYXR0YWNoKGRvY3VtZW50LmJvZHkpO3ZhciBlPVwidG91Y2gtYWN0aW9uXCJpbiBkb2N1bWVudC5ib2R5LnN0eWxlO3QucGxhdGZvcm0uX3J1bk9uQWN0dWFsUGxhdGZvcm0oZnVuY3Rpb24oKXt0LnBsYXRmb3JtLmlzQW5kcm9pZCgpP3QuZmFzdENsaWNrLmRlc3Ryb3koKTp0LnBsYXRmb3JtLmlzSU9TKCkmJmUmJih0LnBsYXRmb3JtLmlzSU9TU2FmYXJpKCl8fHQucGxhdGZvcm0uaXNXS1dlYlZpZXcoKSkmJnQuZmFzdENsaWNrLmRlc3Ryb3koKX0pfSwhMSksdC5yZWFkeShmdW5jdGlvbigpe3QuZW5hYmxlRGV2aWNlQmFja0J1dHRvbkhhbmRsZXIoKSx0Ll9kZWZhdWx0RGV2aWNlQmFja0J1dHRvbkhhbmRsZXI9dC5faW50ZXJuYWwuZGJiRGlzcGF0Y2hlci5jcmVhdGVIYW5kbGVyKHdpbmRvdy5kb2N1bWVudC5ib2R5LGZ1bmN0aW9uKCl7T2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobmF2aWdhdG9yLFwiYXBwXCIpP25hdmlnYXRvci5hcHAuZXhpdEFwcCgpOmNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBjbG9zZSB0aGUgYXBwLiBJcyAnY29yZG92YS5qcycgaW5jbHVkZWQ/XFxuRXJyb3I6ICd3aW5kb3cubmF2aWdhdG9yLmFwcCcgaXMgdW5kZWZpbmVkLlwiKX0pLGRvY3VtZW50LmJvZHkuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgdC5HZXN0dXJlRGV0ZWN0b3IoZG9jdW1lbnQuYm9keSx7cGFzc2l2ZTohMH0pLHQucGxhdGZvcm0uaXNXZWJWaWV3KCl8fGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIixmdW5jdGlvbihlKXsyNz09PWUua2V5Q29kZSYmdC5maXJlRGV2aWNlQmFja0J1dHRvbkV2ZW50KCl9KSx0Ll9zZXR1cExvYWRpbmdQbGFjZUhvbGRlcnMoKX0pLFZpZXdwb3J0LnNldHVwKCl9KFJ0KSx3aW5kb3cuX3N1cGVyU2VjcmV0T25zPVJ0LFJ0fSk7IiwiLypcclxuIExlYWZsZXQgMS4wLjMsIGEgSlMgbGlicmFyeSBmb3IgaW50ZXJhY3RpdmUgbWFwcy4gaHR0cDovL2xlYWZsZXRqcy5jb21cclxuIChjKSAyMDEwLTIwMTYgVmxhZGltaXIgQWdhZm9ua2luLCAoYykgMjAxMC0yMDExIENsb3VkTWFkZVxyXG4qL1xyXG4hZnVuY3Rpb24odCxlLGkpe2Z1bmN0aW9uIG4oKXt2YXIgZT10Lkw7by5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuTD1lLHRoaXN9LHQuTD1vfXZhciBvPXt2ZXJzaW9uOlwiMS4wLjNcIn07XCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPW86XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUobyksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHQmJm4oKSxvLlV0aWw9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZSxpLG4sbztmb3IoaT0xLG49YXJndW1lbnRzLmxlbmd0aDtpPG47aSsrKXtvPWFyZ3VtZW50c1tpXTtmb3IoZSBpbiBvKXRbZV09b1tlXX1yZXR1cm4gdH0sY3JlYXRlOk9iamVjdC5jcmVhdGV8fGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHQucHJvdG90eXBlPWUsbmV3IHR9fSgpLGJpbmQ6ZnVuY3Rpb24odCxlKXt2YXIgaT1BcnJheS5wcm90b3R5cGUuc2xpY2U7aWYodC5iaW5kKXJldHVybiB0LmJpbmQuYXBwbHkodCxpLmNhbGwoYXJndW1lbnRzLDEpKTt2YXIgbj1pLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsbi5sZW5ndGg/bi5jb25jYXQoaS5jYWxsKGFyZ3VtZW50cykpOmFyZ3VtZW50cyl9fSxzdGFtcDpmdW5jdGlvbih0KXtyZXR1cm4gdC5fbGVhZmxldF9pZD10Ll9sZWFmbGV0X2lkfHwrK28uVXRpbC5sYXN0SWQsdC5fbGVhZmxldF9pZH0sbGFzdElkOjAsdGhyb3R0bGU6ZnVuY3Rpb24odCxlLGkpe3ZhciBuLG8scyxyO3JldHVybiByPWZ1bmN0aW9uKCl7bj0hMSxvJiYocy5hcHBseShpLG8pLG89ITEpfSxzPWZ1bmN0aW9uKCl7bj9vPWFyZ3VtZW50czoodC5hcHBseShpLGFyZ3VtZW50cyksc2V0VGltZW91dChyLGUpLG49ITApfX0sd3JhcE51bTpmdW5jdGlvbih0LGUsaSl7dmFyIG49ZVsxXSxvPWVbMF0scz1uLW87cmV0dXJuIHQ9PT1uJiZpP3Q6KCh0LW8pJXMrcyklcytvfSxmYWxzZUZuOmZ1bmN0aW9uKCl7cmV0dXJuITF9LGZvcm1hdE51bTpmdW5jdGlvbih0LGUpe3ZhciBpPU1hdGgucG93KDEwLGV8fDUpO3JldHVybiBNYXRoLnJvdW5kKHQqaSkvaX0sdHJpbTpmdW5jdGlvbih0KXtyZXR1cm4gdC50cmltP3QudHJpbSgpOnQucmVwbGFjZSgvXlxccyt8XFxzKyQvZyxcIlwiKX0sc3BsaXRXb3JkczpmdW5jdGlvbih0KXtyZXR1cm4gby5VdGlsLnRyaW0odCkuc3BsaXQoL1xccysvKX0sc2V0T3B0aW9uczpmdW5jdGlvbih0LGUpe3QuaGFzT3duUHJvcGVydHkoXCJvcHRpb25zXCIpfHwodC5vcHRpb25zPXQub3B0aW9ucz9vLlV0aWwuY3JlYXRlKHQub3B0aW9ucyk6e30pO2Zvcih2YXIgaSBpbiBlKXQub3B0aW9uc1tpXT1lW2ldO3JldHVybiB0Lm9wdGlvbnN9LGdldFBhcmFtU3RyaW5nOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1bXTtmb3IodmFyIG8gaW4gdCluLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGk/by50b1VwcGVyQ2FzZSgpOm8pK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0W29dKSk7cmV0dXJuKGUmJmUuaW5kZXhPZihcIj9cIikhPT0tMT9cIiZcIjpcIj9cIikrbi5qb2luKFwiJlwiKX0sdGVtcGxhdGU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5yZXBsYWNlKG8uVXRpbC50ZW1wbGF0ZVJlLGZ1bmN0aW9uKHQsbil7dmFyIG89ZVtuXTtpZihvPT09aSl0aHJvdyBuZXcgRXJyb3IoXCJObyB2YWx1ZSBwcm92aWRlZCBmb3IgdmFyaWFibGUgXCIrdCk7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmKG89byhlKSksb30pfSx0ZW1wbGF0ZVJlOi9cXHsgKihbXFx3X1xcLV0rKSAqXFx9L2csaXNBcnJheTpBcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodCl9LGluZGV4T2Y6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKylpZih0W2ldPT09ZSlyZXR1cm4gaTtyZXR1cm4tMX0sZW1wdHlJbWFnZVVybDpcImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUQvQUN3QUFBQUFBUUFCQUFBQ0FEcz1cIn0sZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3JldHVybiB0W1wid2Via2l0XCIrZV18fHRbXCJtb3pcIitlXXx8dFtcIm1zXCIrZV19ZnVuY3Rpb24gaShlKXt2YXIgaT0rbmV3IERhdGUsbz1NYXRoLm1heCgwLDE2LShpLW4pKTtyZXR1cm4gbj1pK28sdC5zZXRUaW1lb3V0KGUsbyl9dmFyIG49MCxzPXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxlKFwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIpfHxpLHI9dC5jYW5jZWxBbmltYXRpb25GcmFtZXx8ZShcIkNhbmNlbEFuaW1hdGlvbkZyYW1lXCIpfHxlKFwiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIpfHxmdW5jdGlvbihlKXt0LmNsZWFyVGltZW91dChlKX07by5VdGlsLnJlcXVlc3RBbmltRnJhbWU9ZnVuY3Rpb24oZSxuLHIpe3JldHVybiByJiZzPT09aT92b2lkIGUuY2FsbChuKTpzLmNhbGwodCxvLmJpbmQoZSxuKSl9LG8uVXRpbC5jYW5jZWxBbmltRnJhbWU9ZnVuY3Rpb24oZSl7ZSYmci5jYWxsKHQsZSl9fSgpLG8uZXh0ZW5kPW8uVXRpbC5leHRlbmQsby5iaW5kPW8uVXRpbC5iaW5kLG8uc3RhbXA9by5VdGlsLnN0YW1wLG8uc2V0T3B0aW9ucz1vLlV0aWwuc2V0T3B0aW9ucyxvLkNsYXNzPWZ1bmN0aW9uKCl7fSxvLkNsYXNzLmV4dGVuZD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbigpe3RoaXMuaW5pdGlhbGl6ZSYmdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLmNhbGxJbml0SG9va3MoKX0saT1lLl9fc3VwZXJfXz10aGlzLnByb3RvdHlwZSxuPW8uVXRpbC5jcmVhdGUoaSk7bi5jb25zdHJ1Y3Rvcj1lLGUucHJvdG90eXBlPW47Zm9yKHZhciBzIGluIHRoaXMpdGhpcy5oYXNPd25Qcm9wZXJ0eShzKSYmXCJwcm90b3R5cGVcIiE9PXMmJihlW3NdPXRoaXNbc10pO3JldHVybiB0LnN0YXRpY3MmJihvLmV4dGVuZChlLHQuc3RhdGljcyksZGVsZXRlIHQuc3RhdGljcyksdC5pbmNsdWRlcyYmKG8uVXRpbC5leHRlbmQuYXBwbHkobnVsbCxbbl0uY29uY2F0KHQuaW5jbHVkZXMpKSxkZWxldGUgdC5pbmNsdWRlcyksbi5vcHRpb25zJiYodC5vcHRpb25zPW8uVXRpbC5leHRlbmQoby5VdGlsLmNyZWF0ZShuLm9wdGlvbnMpLHQub3B0aW9ucykpLG8uZXh0ZW5kKG4sdCksbi5faW5pdEhvb2tzPVtdLG4uY2FsbEluaXRIb29rcz1mdW5jdGlvbigpe2lmKCF0aGlzLl9pbml0SG9va3NDYWxsZWQpe2kuY2FsbEluaXRIb29rcyYmaS5jYWxsSW5pdEhvb2tzLmNhbGwodGhpcyksdGhpcy5faW5pdEhvb2tzQ2FsbGVkPSEwO2Zvcih2YXIgdD0wLGU9bi5faW5pdEhvb2tzLmxlbmd0aDt0PGU7dCsrKW4uX2luaXRIb29rc1t0XS5jYWxsKHRoaXMpfX0sZX0sby5DbGFzcy5pbmNsdWRlPWZ1bmN0aW9uKHQpe3JldHVybiBvLmV4dGVuZCh0aGlzLnByb3RvdHlwZSx0KSx0aGlzfSxvLkNsYXNzLm1lcmdlT3B0aW9ucz1mdW5jdGlvbih0KXtyZXR1cm4gby5leHRlbmQodGhpcy5wcm90b3R5cGUub3B0aW9ucyx0KSx0aGlzfSxvLkNsYXNzLmFkZEluaXRIb29rPWZ1bmN0aW9uKHQpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dDpmdW5jdGlvbigpe3RoaXNbdF0uYXBwbHkodGhpcyxlKX07cmV0dXJuIHRoaXMucHJvdG90eXBlLl9pbml0SG9va3M9dGhpcy5wcm90b3R5cGUuX2luaXRIb29rc3x8W10sdGhpcy5wcm90b3R5cGUuX2luaXRIb29rcy5wdXNoKGkpLHRoaXN9LG8uRXZlbnRlZD1vLkNsYXNzLmV4dGVuZCh7b246ZnVuY3Rpb24odCxlLGkpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KXRoaXMuX29uKG4sdFtuXSxlKTtlbHNle3Q9by5VdGlsLnNwbGl0V29yZHModCk7Zm9yKHZhciBzPTAscj10Lmxlbmd0aDtzPHI7cysrKXRoaXMuX29uKHRbc10sZSxpKX1yZXR1cm4gdGhpc30sb2ZmOmZ1bmN0aW9uKHQsZSxpKXtpZih0KWlmKFwib2JqZWN0XCI9PXR5cGVvZiB0KWZvcih2YXIgbiBpbiB0KXRoaXMuX29mZihuLHRbbl0sZSk7ZWxzZXt0PW8uVXRpbC5zcGxpdFdvcmRzKHQpO2Zvcih2YXIgcz0wLHI9dC5sZW5ndGg7czxyO3MrKyl0aGlzLl9vZmYodFtzXSxlLGkpfWVsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sX29uOmZ1bmN0aW9uKHQsZSxuKXt0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fTt2YXIgbz10aGlzLl9ldmVudHNbdF07b3x8KG89W10sdGhpcy5fZXZlbnRzW3RdPW8pLG49PT10aGlzJiYobj1pKTtmb3IodmFyIHM9e2ZuOmUsY3R4Om59LHI9byxhPTAsaD1yLmxlbmd0aDthPGg7YSsrKWlmKHJbYV0uZm49PT1lJiZyW2FdLmN0eD09PW4pcmV0dXJuO3IucHVzaChzKX0sX29mZjpmdW5jdGlvbih0LGUsbil7dmFyIHMscixhO2lmKHRoaXMuX2V2ZW50cyYmKHM9dGhpcy5fZXZlbnRzW3RdKSl7aWYoIWUpe2ZvcihyPTAsYT1zLmxlbmd0aDtyPGE7cisrKXNbcl0uZm49by5VdGlsLmZhbHNlRm47cmV0dXJuIHZvaWQgZGVsZXRlIHRoaXMuX2V2ZW50c1t0XX1pZihuPT09dGhpcyYmKG49aSkscylmb3Iocj0wLGE9cy5sZW5ndGg7cjxhO3IrKyl7dmFyIGg9c1tyXTtpZihoLmN0eD09PW4mJmguZm49PT1lKXJldHVybiBoLmZuPW8uVXRpbC5mYWxzZUZuLHRoaXMuX2ZpcmluZ0NvdW50JiYodGhpcy5fZXZlbnRzW3RdPXM9cy5zbGljZSgpKSx2b2lkIHMuc3BsaWNlKHIsMSl9fX0sZmlyZTpmdW5jdGlvbih0LGUsaSl7aWYoIXRoaXMubGlzdGVucyh0LGkpKXJldHVybiB0aGlzO3ZhciBuPW8uVXRpbC5leHRlbmQoe30sZSx7dHlwZTp0LHRhcmdldDp0aGlzfSk7aWYodGhpcy5fZXZlbnRzKXt2YXIgcz10aGlzLl9ldmVudHNbdF07aWYocyl7dGhpcy5fZmlyaW5nQ291bnQ9dGhpcy5fZmlyaW5nQ291bnQrMXx8MTtmb3IodmFyIHI9MCxhPXMubGVuZ3RoO3I8YTtyKyspe3ZhciBoPXNbcl07aC5mbi5jYWxsKGguY3R4fHx0aGlzLG4pfXRoaXMuX2ZpcmluZ0NvdW50LS19fXJldHVybiBpJiZ0aGlzLl9wcm9wYWdhdGVFdmVudChuKSx0aGlzfSxsaXN0ZW5zOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZXZlbnRzJiZ0aGlzLl9ldmVudHNbdF07aWYoaSYmaS5sZW5ndGgpcmV0dXJuITA7aWYoZSlmb3IodmFyIG4gaW4gdGhpcy5fZXZlbnRQYXJlbnRzKWlmKHRoaXMuX2V2ZW50UGFyZW50c1tuXS5saXN0ZW5zKHQsZSkpcmV0dXJuITA7cmV0dXJuITF9LG9uY2U6ZnVuY3Rpb24odCxlLGkpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiB0KXtmb3IodmFyIG4gaW4gdCl0aGlzLm9uY2Uobix0W25dLGUpO3JldHVybiB0aGlzfXZhciBzPW8uYmluZChmdW5jdGlvbigpe3RoaXMub2ZmKHQsZSxpKS5vZmYodCxzLGkpfSx0aGlzKTtyZXR1cm4gdGhpcy5vbih0LGUsaSkub24odCxzLGkpfSxhZGRFdmVudFBhcmVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRQYXJlbnRzPXRoaXMuX2V2ZW50UGFyZW50c3x8e30sdGhpcy5fZXZlbnRQYXJlbnRzW28uc3RhbXAodCldPXQsdGhpc30scmVtb3ZlRXZlbnRQYXJlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2V2ZW50UGFyZW50cyYmZGVsZXRlIHRoaXMuX2V2ZW50UGFyZW50c1tvLnN0YW1wKHQpXSx0aGlzfSxfcHJvcGFnYXRlRXZlbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuX2V2ZW50UGFyZW50cyl0aGlzLl9ldmVudFBhcmVudHNbZV0uZmlyZSh0LnR5cGUsby5leHRlbmQoe2xheWVyOnQudGFyZ2V0fSx0KSwhMCl9fSk7dmFyIHM9by5FdmVudGVkLnByb3RvdHlwZTtzLmFkZEV2ZW50TGlzdGVuZXI9cy5vbixzLnJlbW92ZUV2ZW50TGlzdGVuZXI9cy5jbGVhckFsbEV2ZW50TGlzdGVuZXJzPXMub2ZmLHMuYWRkT25lVGltZUV2ZW50TGlzdGVuZXI9cy5vbmNlLHMuZmlyZUV2ZW50PXMuZmlyZSxzLmhhc0V2ZW50TGlzdGVuZXJzPXMubGlzdGVucyxvLk1peGluPXtFdmVudHM6c30sZnVuY3Rpb24oKXt2YXIgaT1uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksbj1lLmRvY3VtZW50RWxlbWVudCxzPVwiQWN0aXZlWE9iamVjdFwiaW4gdCxyPWkuaW5kZXhPZihcIndlYmtpdFwiKSE9PS0xLGE9aS5pbmRleE9mKFwicGhhbnRvbVwiKSE9PS0xLGg9aS5zZWFyY2goXCJhbmRyb2lkIFsyM11cIikhPT0tMSxsPWkuaW5kZXhPZihcImNocm9tZVwiKSE9PS0xLHU9aS5pbmRleE9mKFwiZ2Vja29cIikhPT0tMSYmIXImJiF0Lm9wZXJhJiYhcyxjPTA9PT1uYXZpZ2F0b3IucGxhdGZvcm0uaW5kZXhPZihcIldpblwiKSxkPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBvcmllbnRhdGlvbnx8aS5pbmRleE9mKFwibW9iaWxlXCIpIT09LTEsXz0hdC5Qb2ludGVyRXZlbnQmJnQuTVNQb2ludGVyRXZlbnQsbT10LlBvaW50ZXJFdmVudHx8XyxwPXMmJlwidHJhbnNpdGlvblwiaW4gbi5zdHlsZSxmPVwiV2ViS2l0Q1NTTWF0cml4XCJpbiB0JiZcIm0xMVwiaW4gbmV3IHQuV2ViS2l0Q1NTTWF0cml4JiYhaCxnPVwiTW96UGVyc3BlY3RpdmVcImluIG4uc3R5bGUsdj1cIk9UcmFuc2l0aW9uXCJpbiBuLnN0eWxlLHk9IXQuTF9OT19UT1VDSCYmKG18fFwib250b3VjaHN0YXJ0XCJpbiB0fHx0LkRvY3VtZW50VG91Y2gmJmUgaW5zdGFuY2VvZiB0LkRvY3VtZW50VG91Y2gpO28uQnJvd3Nlcj17aWU6cyxpZWx0OTpzJiYhZS5hZGRFdmVudExpc3RlbmVyLGVkZ2U6XCJtc0xhdW5jaFVyaVwiaW4gbmF2aWdhdG9yJiYhKFwiZG9jdW1lbnRNb2RlXCJpbiBlKSx3ZWJraXQ6cixnZWNrbzp1LGFuZHJvaWQ6aS5pbmRleE9mKFwiYW5kcm9pZFwiKSE9PS0xLGFuZHJvaWQyMzpoLGNocm9tZTpsLHNhZmFyaTohbCYmaS5pbmRleE9mKFwic2FmYXJpXCIpIT09LTEsd2luOmMsaWUzZDpwLHdlYmtpdDNkOmYsZ2Vja28zZDpnLG9wZXJhMTI6dixhbnkzZDohdC5MX0RJU0FCTEVfM0QmJihwfHxmfHxnKSYmIXYmJiFhLG1vYmlsZTpkLG1vYmlsZVdlYmtpdDpkJiZyLG1vYmlsZVdlYmtpdDNkOmQmJmYsbW9iaWxlT3BlcmE6ZCYmdC5vcGVyYSxtb2JpbGVHZWNrbzpkJiZ1LHRvdWNoOiEheSxtc1BvaW50ZXI6ISFfLHBvaW50ZXI6ISFtLHJldGluYToodC5kZXZpY2VQaXhlbFJhdGlvfHx0LnNjcmVlbi5kZXZpY2VYRFBJL3Quc2NyZWVuLmxvZ2ljYWxYRFBJKT4xfX0oKSxvLlBvaW50PWZ1bmN0aW9uKHQsZSxpKXt0aGlzLng9aT9NYXRoLnJvdW5kKHQpOnQsdGhpcy55PWk/TWF0aC5yb3VuZChlKTplfSxvLlBvaW50LnByb3RvdHlwZT17Y2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uUG9pbnQodGhpcy54LHRoaXMueSl9LGFkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9hZGQoby5wb2ludCh0KSl9LF9hZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXN9LHN1YnRyYWN0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX3N1YnRyYWN0KG8ucG9pbnQodCkpfSxfc3VidHJhY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueC09dC54LHRoaXMueS09dC55LHRoaXN9LGRpdmlkZUJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX2RpdmlkZUJ5KHQpfSxfZGl2aWRlQnk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueC89dCx0aGlzLnkvPXQsdGhpc30sbXVsdGlwbHlCeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9tdWx0aXBseUJ5KHQpfSxfbXVsdGlwbHlCeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kj10LHRoaXMueSo9dCx0aGlzfSxzY2FsZUJ5OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5Qb2ludCh0aGlzLngqdC54LHRoaXMueSp0LnkpfSx1bnNjYWxlQnk6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLlBvaW50KHRoaXMueC90LngsdGhpcy55L3QueSl9LHJvdW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fcm91bmQoKX0sX3JvdW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD1NYXRoLnJvdW5kKHRoaXMueCksdGhpcy55PU1hdGgucm91bmQodGhpcy55KSx0aGlzfSxmbG9vcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkuX2Zsb29yKCl9LF9mbG9vcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5mbG9vcih0aGlzLngpLHRoaXMueT1NYXRoLmZsb29yKHRoaXMueSksdGhpc30sY2VpbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkuX2NlaWwoKX0sX2NlaWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PU1hdGguY2VpbCh0aGlzLngpLHRoaXMueT1NYXRoLmNlaWwodGhpcy55KSx0aGlzfSxkaXN0YW5jZVRvOmZ1bmN0aW9uKHQpe3Q9by5wb2ludCh0KTt2YXIgZT10LngtdGhpcy54LGk9dC55LXRoaXMueTtyZXR1cm4gTWF0aC5zcXJ0KGUqZStpKmkpfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9by5wb2ludCh0KSx0Lng9PT10aGlzLngmJnQueT09PXRoaXMueX0sY29udGFpbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9by5wb2ludCh0KSxNYXRoLmFicyh0LngpPD1NYXRoLmFicyh0aGlzLngpJiZNYXRoLmFicyh0LnkpPD1NYXRoLmFicyh0aGlzLnkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVyblwiUG9pbnQoXCIrby5VdGlsLmZvcm1hdE51bSh0aGlzLngpK1wiLCBcIitvLlV0aWwuZm9ybWF0TnVtKHRoaXMueSkrXCIpXCJ9fSxvLnBvaW50PWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gdCBpbnN0YW5jZW9mIG8uUG9pbnQ/dDpvLlV0aWwuaXNBcnJheSh0KT9uZXcgby5Qb2ludCh0WzBdLHRbMV0pOnQ9PT1pfHxudWxsPT09dD90Olwib2JqZWN0XCI9PXR5cGVvZiB0JiZcInhcImluIHQmJlwieVwiaW4gdD9uZXcgby5Qb2ludCh0LngsdC55KTpuZXcgby5Qb2ludCh0LGUsbil9LG8uQm91bmRzPWZ1bmN0aW9uKHQsZSl7aWYodClmb3IodmFyIGk9ZT9bdCxlXTp0LG49MCxvPWkubGVuZ3RoO248bztuKyspdGhpcy5leHRlbmQoaVtuXSl9LG8uQm91bmRzLnByb3RvdHlwZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3JldHVybiB0PW8ucG9pbnQodCksdGhpcy5taW58fHRoaXMubWF4Pyh0aGlzLm1pbi54PU1hdGgubWluKHQueCx0aGlzLm1pbi54KSx0aGlzLm1heC54PU1hdGgubWF4KHQueCx0aGlzLm1heC54KSx0aGlzLm1pbi55PU1hdGgubWluKHQueSx0aGlzLm1pbi55KSx0aGlzLm1heC55PU1hdGgubWF4KHQueSx0aGlzLm1heC55KSk6KHRoaXMubWluPXQuY2xvbmUoKSx0aGlzLm1heD10LmNsb25lKCkpLHRoaXN9LGdldENlbnRlcjpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uUG9pbnQoKHRoaXMubWluLngrdGhpcy5tYXgueCkvMiwodGhpcy5taW4ueSt0aGlzLm1heC55KS8yLHQpfSxnZXRCb3R0b21MZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLlBvaW50KHRoaXMubWluLngsdGhpcy5tYXgueSl9LGdldFRvcFJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLlBvaW50KHRoaXMubWF4LngsdGhpcy5taW4ueSl9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXguc3VidHJhY3QodGhpcy5taW4pfSxjb250YWluczpmdW5jdGlvbih0KXt2YXIgZSxpO3JldHVybiB0PVwibnVtYmVyXCI9PXR5cGVvZiB0WzBdfHx0IGluc3RhbmNlb2Ygby5Qb2ludD9vLnBvaW50KHQpOm8uYm91bmRzKHQpLHQgaW5zdGFuY2VvZiBvLkJvdW5kcz8oZT10Lm1pbixpPXQubWF4KTplPWk9dCxlLng+PXRoaXMubWluLngmJmkueDw9dGhpcy5tYXgueCYmZS55Pj10aGlzLm1pbi55JiZpLnk8PXRoaXMubWF4Lnl9LGludGVyc2VjdHM6ZnVuY3Rpb24odCl7dD1vLmJvdW5kcyh0KTt2YXIgZT10aGlzLm1pbixpPXRoaXMubWF4LG49dC5taW4scz10Lm1heCxyPXMueD49ZS54JiZuLng8PWkueCxhPXMueT49ZS55JiZuLnk8PWkueTtyZXR1cm4gciYmYX0sb3ZlcmxhcHM6ZnVuY3Rpb24odCl7dD1vLmJvdW5kcyh0KTt2YXIgZT10aGlzLm1pbixpPXRoaXMubWF4LG49dC5taW4scz10Lm1heCxyPXMueD5lLngmJm4ueDxpLngsYT1zLnk+ZS55JiZuLnk8aS55O3JldHVybiByJiZhfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuISghdGhpcy5taW58fCF0aGlzLm1heCl9fSxvLmJvdW5kcz1mdW5jdGlvbih0LGUpe3JldHVybiF0fHx0IGluc3RhbmNlb2Ygby5Cb3VuZHM/dDpuZXcgby5Cb3VuZHModCxlKX0sby5UcmFuc2Zvcm1hdGlvbj1mdW5jdGlvbih0LGUsaSxuKXt0aGlzLl9hPXQsdGhpcy5fYj1lLHRoaXMuX2M9aSx0aGlzLl9kPW59LG8uVHJhbnNmb3JtYXRpb24ucHJvdG90eXBlPXt0cmFuc2Zvcm06ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtKHQuY2xvbmUoKSxlKX0sX3RyYW5zZm9ybTpmdW5jdGlvbih0LGUpe3JldHVybiBlPWV8fDEsdC54PWUqKHRoaXMuX2EqdC54K3RoaXMuX2IpLHQueT1lKih0aGlzLl9jKnQueSt0aGlzLl9kKSx0fSx1bnRyYW5zZm9ybTpmdW5jdGlvbih0LGUpe3JldHVybiBlPWV8fDEsbmV3IG8uUG9pbnQoKHQueC9lLXRoaXMuX2IpL3RoaXMuX2EsKHQueS9lLXRoaXMuX2QpL3RoaXMuX2MpfX0sby5Eb21VdGlsPXtnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/ZS5nZXRFbGVtZW50QnlJZCh0KTp0fSxnZXRTdHlsZTpmdW5jdGlvbih0LGkpe3ZhciBuPXQuc3R5bGVbaV18fHQuY3VycmVudFN0eWxlJiZ0LmN1cnJlbnRTdHlsZVtpXTtpZigoIW58fFwiYXV0b1wiPT09bikmJmUuZGVmYXVsdFZpZXcpe3ZhciBvPWUuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSh0LG51bGwpO249bz9vW2ldOm51bGx9cmV0dXJuXCJhdXRvXCI9PT1uP251bGw6bn0sY3JlYXRlOmZ1bmN0aW9uKHQsaSxuKXt2YXIgbz1lLmNyZWF0ZUVsZW1lbnQodCk7cmV0dXJuIG8uY2xhc3NOYW1lPWl8fFwiXCIsbiYmbi5hcHBlbmRDaGlsZChvKSxvfSxyZW1vdmU6ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO2UmJmUucmVtb3ZlQ2hpbGQodCl9LGVtcHR5OmZ1bmN0aW9uKHQpe2Zvcig7dC5maXJzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCl9LHRvRnJvbnQ6ZnVuY3Rpb24odCl7dC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHQpfSx0b0JhY2s6ZnVuY3Rpb24odCl7dmFyIGU9dC5wYXJlbnROb2RlO2UuaW5zZXJ0QmVmb3JlKHQsZS5maXJzdENoaWxkKX0saGFzQ2xhc3M6ZnVuY3Rpb24odCxlKXtpZih0LmNsYXNzTGlzdCE9PWkpcmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKGUpO3ZhciBuPW8uRG9tVXRpbC5nZXRDbGFzcyh0KTtyZXR1cm4gbi5sZW5ndGg+MCYmbmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK2UrXCIoXFxcXHN8JClcIikudGVzdChuKX0sYWRkQ2xhc3M6ZnVuY3Rpb24odCxlKXtpZih0LmNsYXNzTGlzdCE9PWkpZm9yKHZhciBuPW8uVXRpbC5zcGxpdFdvcmRzKGUpLHM9MCxyPW4ubGVuZ3RoO3M8cjtzKyspdC5jbGFzc0xpc3QuYWRkKG5bc10pO2Vsc2UgaWYoIW8uRG9tVXRpbC5oYXNDbGFzcyh0LGUpKXt2YXIgYT1vLkRvbVV0aWwuZ2V0Q2xhc3ModCk7by5Eb21VdGlsLnNldENsYXNzKHQsKGE/YStcIiBcIjpcIlwiKStlKX19LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHQsZSl7dC5jbGFzc0xpc3QhPT1pP3QuY2xhc3NMaXN0LnJlbW92ZShlKTpvLkRvbVV0aWwuc2V0Q2xhc3ModCxvLlV0aWwudHJpbSgoXCIgXCIrby5Eb21VdGlsLmdldENsYXNzKHQpK1wiIFwiKS5yZXBsYWNlKFwiIFwiK2UrXCIgXCIsXCIgXCIpKSl9LHNldENsYXNzOmZ1bmN0aW9uKHQsZSl7dC5jbGFzc05hbWUuYmFzZVZhbD09PWk/dC5jbGFzc05hbWU9ZTp0LmNsYXNzTmFtZS5iYXNlVmFsPWV9LGdldENsYXNzOmZ1bmN0aW9uKHQpe3JldHVybiB0LmNsYXNzTmFtZS5iYXNlVmFsPT09aT90LmNsYXNzTmFtZTp0LmNsYXNzTmFtZS5iYXNlVmFsfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKHQsZSl7XCJvcGFjaXR5XCJpbiB0LnN0eWxlP3Quc3R5bGUub3BhY2l0eT1lOlwiZmlsdGVyXCJpbiB0LnN0eWxlJiZvLkRvbVV0aWwuX3NldE9wYWNpdHlJRSh0LGUpfSxfc2V0T3BhY2l0eUlFOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ITEsbj1cIkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LkFscGhhXCI7dHJ5e2k9dC5maWx0ZXJzLml0ZW0obil9Y2F0Y2godCl7aWYoMT09PWUpcmV0dXJufWU9TWF0aC5yb3VuZCgxMDAqZSksaT8oaS5FbmFibGVkPTEwMCE9PWUsaS5PcGFjaXR5PWUpOnQuc3R5bGUuZmlsdGVyKz1cIiBwcm9naWQ6XCIrbitcIihvcGFjaXR5PVwiK2UrXCIpXCJ9LHRlc3RQcm9wOmZ1bmN0aW9uKHQpe2Zvcih2YXIgaT1lLmRvY3VtZW50RWxlbWVudC5zdHlsZSxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXWluIGkpcmV0dXJuIHRbbl07cmV0dXJuITF9LHNldFRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSl7dmFyIG49ZXx8bmV3IG8uUG9pbnQoMCwwKTt0LnN0eWxlW28uRG9tVXRpbC5UUkFOU0ZPUk1dPShvLkJyb3dzZXIuaWUzZD9cInRyYW5zbGF0ZShcIituLngrXCJweCxcIituLnkrXCJweClcIjpcInRyYW5zbGF0ZTNkKFwiK24ueCtcInB4LFwiK24ueStcInB4LDApXCIpKyhpP1wiIHNjYWxlKFwiK2krXCIpXCI6XCJcIil9LHNldFBvc2l0aW9uOmZ1bmN0aW9uKHQsZSl7dC5fbGVhZmxldF9wb3M9ZSxvLkJyb3dzZXIuYW55M2Q/by5Eb21VdGlsLnNldFRyYW5zZm9ybSh0LGUpOih0LnN0eWxlLmxlZnQ9ZS54K1wicHhcIix0LnN0eWxlLnRvcD1lLnkrXCJweFwiKX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24odCl7cmV0dXJuIHQuX2xlYWZsZXRfcG9zfHxuZXcgby5Qb2ludCgwLDApfX0sZnVuY3Rpb24oKXtvLkRvbVV0aWwuVFJBTlNGT1JNPW8uRG9tVXRpbC50ZXN0UHJvcChbXCJ0cmFuc2Zvcm1cIixcIldlYmtpdFRyYW5zZm9ybVwiLFwiT1RyYW5zZm9ybVwiLFwiTW96VHJhbnNmb3JtXCIsXCJtc1RyYW5zZm9ybVwiXSk7dmFyIGk9by5Eb21VdGlsLlRSQU5TSVRJT049by5Eb21VdGlsLnRlc3RQcm9wKFtcIndlYmtpdFRyYW5zaXRpb25cIixcInRyYW5zaXRpb25cIixcIk9UcmFuc2l0aW9uXCIsXCJNb3pUcmFuc2l0aW9uXCIsXCJtc1RyYW5zaXRpb25cIl0pO2lmKG8uRG9tVXRpbC5UUkFOU0lUSU9OX0VORD1cIndlYmtpdFRyYW5zaXRpb25cIj09PWl8fFwiT1RyYW5zaXRpb25cIj09PWk/aStcIkVuZFwiOlwidHJhbnNpdGlvbmVuZFwiLFwib25zZWxlY3RzdGFydFwiaW4gZSlvLkRvbVV0aWwuZGlzYWJsZVRleHRTZWxlY3Rpb249ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9uKHQsXCJzZWxlY3RzdGFydFwiLG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQpfSxvLkRvbVV0aWwuZW5hYmxlVGV4dFNlbGVjdGlvbj1mdW5jdGlvbigpe28uRG9tRXZlbnQub2ZmKHQsXCJzZWxlY3RzdGFydFwiLG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQpfTtlbHNle3ZhciBuPW8uRG9tVXRpbC50ZXN0UHJvcChbXCJ1c2VyU2VsZWN0XCIsXCJXZWJraXRVc2VyU2VsZWN0XCIsXCJPVXNlclNlbGVjdFwiLFwiTW96VXNlclNlbGVjdFwiLFwibXNVc2VyU2VsZWN0XCJdKTtvLkRvbVV0aWwuZGlzYWJsZVRleHRTZWxlY3Rpb249ZnVuY3Rpb24oKXtpZihuKXt2YXIgdD1lLmRvY3VtZW50RWxlbWVudC5zdHlsZTt0aGlzLl91c2VyU2VsZWN0PXRbbl0sdFtuXT1cIm5vbmVcIn19LG8uRG9tVXRpbC5lbmFibGVUZXh0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7biYmKGUuZG9jdW1lbnRFbGVtZW50LnN0eWxlW25dPXRoaXMuX3VzZXJTZWxlY3QsZGVsZXRlIHRoaXMuX3VzZXJTZWxlY3QpfX1vLkRvbVV0aWwuZGlzYWJsZUltYWdlRHJhZz1mdW5jdGlvbigpe28uRG9tRXZlbnQub24odCxcImRyYWdzdGFydFwiLG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQpfSxvLkRvbVV0aWwuZW5hYmxlSW1hZ2VEcmFnPWZ1bmN0aW9uKCl7by5Eb21FdmVudC5vZmYodCxcImRyYWdzdGFydFwiLG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQpfSxvLkRvbVV0aWwucHJldmVudE91dGxpbmU9ZnVuY3Rpb24oZSl7Zm9yKDtlLnRhYkluZGV4PT09LTE7KWU9ZS5wYXJlbnROb2RlO2UmJmUuc3R5bGUmJihvLkRvbVV0aWwucmVzdG9yZU91dGxpbmUoKSx0aGlzLl9vdXRsaW5lRWxlbWVudD1lLHRoaXMuX291dGxpbmVTdHlsZT1lLnN0eWxlLm91dGxpbmUsZS5zdHlsZS5vdXRsaW5lPVwibm9uZVwiLG8uRG9tRXZlbnQub24odCxcImtleWRvd25cIixvLkRvbVV0aWwucmVzdG9yZU91dGxpbmUsdGhpcykpfSxvLkRvbVV0aWwucmVzdG9yZU91dGxpbmU9ZnVuY3Rpb24oKXt0aGlzLl9vdXRsaW5lRWxlbWVudCYmKHRoaXMuX291dGxpbmVFbGVtZW50LnN0eWxlLm91dGxpbmU9dGhpcy5fb3V0bGluZVN0eWxlLGRlbGV0ZSB0aGlzLl9vdXRsaW5lRWxlbWVudCxkZWxldGUgdGhpcy5fb3V0bGluZVN0eWxlLG8uRG9tRXZlbnQub2ZmKHQsXCJrZXlkb3duXCIsby5Eb21VdGlsLnJlc3RvcmVPdXRsaW5lLHRoaXMpKX19KCksby5MYXRMbmc9ZnVuY3Rpb24odCxlLG4pe2lmKGlzTmFOKHQpfHxpc05hTihlKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIExhdExuZyBvYmplY3Q6IChcIit0K1wiLCBcIitlK1wiKVwiKTt0aGlzLmxhdD0rdCx0aGlzLmxuZz0rZSxuIT09aSYmKHRoaXMuYWx0PStuKX0sby5MYXRMbmcucHJvdG90eXBlPXtlcXVhbHM6ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4hMTt0PW8ubGF0TG5nKHQpO3ZhciBuPU1hdGgubWF4KE1hdGguYWJzKHRoaXMubGF0LXQubGF0KSxNYXRoLmFicyh0aGlzLmxuZy10LmxuZykpO3JldHVybiBuPD0oZT09PWk/MWUtOTplKX0sdG9TdHJpbmc6ZnVuY3Rpb24odCl7cmV0dXJuXCJMYXRMbmcoXCIrby5VdGlsLmZvcm1hdE51bSh0aGlzLmxhdCx0KStcIiwgXCIrby5VdGlsLmZvcm1hdE51bSh0aGlzLmxuZyx0KStcIilcIn0sZGlzdGFuY2VUbzpmdW5jdGlvbih0KXtyZXR1cm4gby5DUlMuRWFydGguZGlzdGFuY2UodGhpcyxvLmxhdExuZyh0KSl9LHdyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gby5DUlMuRWFydGgud3JhcExhdExuZyh0aGlzKX0sdG9Cb3VuZHM6ZnVuY3Rpb24odCl7dmFyIGU9MTgwKnQvNDAwNzUwMTcsaT1lL01hdGguY29zKE1hdGguUEkvMTgwKnRoaXMubGF0KTtyZXR1cm4gby5sYXRMbmdCb3VuZHMoW3RoaXMubGF0LWUsdGhpcy5sbmctaV0sW3RoaXMubGF0K2UsdGhpcy5sbmcraV0pfSxjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgby5MYXRMbmcodGhpcy5sYXQsdGhpcy5sbmcsdGhpcy5hbHQpfX0sby5sYXRMbmc9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0IGluc3RhbmNlb2Ygby5MYXRMbmc/dDpvLlV0aWwuaXNBcnJheSh0KSYmXCJvYmplY3RcIiE9dHlwZW9mIHRbMF0/Mz09PXQubGVuZ3RoP25ldyBvLkxhdExuZyh0WzBdLHRbMV0sdFsyXSk6Mj09PXQubGVuZ3RoP25ldyBvLkxhdExuZyh0WzBdLHRbMV0pOm51bGw6dD09PWl8fG51bGw9PT10P3Q6XCJvYmplY3RcIj09dHlwZW9mIHQmJlwibGF0XCJpbiB0P25ldyBvLkxhdExuZyh0LmxhdCxcImxuZ1wiaW4gdD90LmxuZzp0Lmxvbix0LmFsdCk6ZT09PWk/bnVsbDpuZXcgby5MYXRMbmcodCxlLG4pfSxvLkxhdExuZ0JvdW5kcz1mdW5jdGlvbih0LGUpe2lmKHQpZm9yKHZhciBpPWU/W3QsZV06dCxuPTAsbz1pLmxlbmd0aDtuPG87bisrKXRoaXMuZXh0ZW5kKGlbbl0pfSxvLkxhdExuZ0JvdW5kcy5wcm90b3R5cGU9e2V4dGVuZDpmdW5jdGlvbih0KXt2YXIgZSxpLG49dGhpcy5fc291dGhXZXN0LHM9dGhpcy5fbm9ydGhFYXN0O2lmKHQgaW5zdGFuY2VvZiBvLkxhdExuZyllPXQsaT10O2Vsc2V7aWYoISh0IGluc3RhbmNlb2Ygby5MYXRMbmdCb3VuZHMpKXJldHVybiB0P3RoaXMuZXh0ZW5kKG8ubGF0TG5nKHQpfHxvLmxhdExuZ0JvdW5kcyh0KSk6dGhpcztpZihlPXQuX3NvdXRoV2VzdCxpPXQuX25vcnRoRWFzdCwhZXx8IWkpcmV0dXJuIHRoaXN9cmV0dXJuIG58fHM/KG4ubGF0PU1hdGgubWluKGUubGF0LG4ubGF0KSxuLmxuZz1NYXRoLm1pbihlLmxuZyxuLmxuZykscy5sYXQ9TWF0aC5tYXgoaS5sYXQscy5sYXQpLHMubG5nPU1hdGgubWF4KGkubG5nLHMubG5nKSk6KHRoaXMuX3NvdXRoV2VzdD1uZXcgby5MYXRMbmcoZS5sYXQsZS5sbmcpLHRoaXMuX25vcnRoRWFzdD1uZXcgby5MYXRMbmcoaS5sYXQsaS5sbmcpKSx0aGlzfSxwYWQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fc291dGhXZXN0LGk9dGhpcy5fbm9ydGhFYXN0LG49TWF0aC5hYnMoZS5sYXQtaS5sYXQpKnQscz1NYXRoLmFicyhlLmxuZy1pLmxuZykqdDtyZXR1cm4gbmV3IG8uTGF0TG5nQm91bmRzKG5ldyBvLkxhdExuZyhlLmxhdC1uLGUubG5nLXMpLG5ldyBvLkxhdExuZyhpLmxhdCtuLGkubG5nK3MpKX0sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLkxhdExuZygodGhpcy5fc291dGhXZXN0LmxhdCt0aGlzLl9ub3J0aEVhc3QubGF0KS8yLCh0aGlzLl9zb3V0aFdlc3QubG5nK3RoaXMuX25vcnRoRWFzdC5sbmcpLzIpfSxnZXRTb3V0aFdlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc291dGhXZXN0fSxnZXROb3J0aEVhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9ydGhFYXN0fSxnZXROb3J0aFdlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uTGF0TG5nKHRoaXMuZ2V0Tm9ydGgoKSx0aGlzLmdldFdlc3QoKSl9LGdldFNvdXRoRWFzdDpmdW5jdGlvbigpe3JldHVybiBuZXcgby5MYXRMbmcodGhpcy5nZXRTb3V0aCgpLHRoaXMuZ2V0RWFzdCgpKX0sZ2V0V2VzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3V0aFdlc3QubG5nfSxnZXRTb3V0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3V0aFdlc3QubGF0fSxnZXRFYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcnRoRWFzdC5sbmd9LGdldE5vcnRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcnRoRWFzdC5sYXR9LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3Q9XCJudW1iZXJcIj09dHlwZW9mIHRbMF18fHQgaW5zdGFuY2VvZiBvLkxhdExuZ3x8XCJsYXRcImluIHQ/by5sYXRMbmcodCk6by5sYXRMbmdCb3VuZHModCk7dmFyIGUsaSxuPXRoaXMuX3NvdXRoV2VzdCxzPXRoaXMuX25vcnRoRWFzdDtyZXR1cm4gdCBpbnN0YW5jZW9mIG8uTGF0TG5nQm91bmRzPyhlPXQuZ2V0U291dGhXZXN0KCksaT10LmdldE5vcnRoRWFzdCgpKTplPWk9dCxlLmxhdD49bi5sYXQmJmkubGF0PD1zLmxhdCYmZS5sbmc+PW4ubG5nJiZpLmxuZzw9cy5sbmd9LGludGVyc2VjdHM6ZnVuY3Rpb24odCl7dD1vLmxhdExuZ0JvdW5kcyh0KTt2YXIgZT10aGlzLl9zb3V0aFdlc3QsaT10aGlzLl9ub3J0aEVhc3Qsbj10LmdldFNvdXRoV2VzdCgpLHM9dC5nZXROb3J0aEVhc3QoKSxyPXMubGF0Pj1lLmxhdCYmbi5sYXQ8PWkubGF0LGE9cy5sbmc+PWUubG5nJiZuLmxuZzw9aS5sbmc7cmV0dXJuIHImJmF9LG92ZXJsYXBzOmZ1bmN0aW9uKHQpe3Q9by5sYXRMbmdCb3VuZHModCk7dmFyIGU9dGhpcy5fc291dGhXZXN0LGk9dGhpcy5fbm9ydGhFYXN0LG49dC5nZXRTb3V0aFdlc3QoKSxzPXQuZ2V0Tm9ydGhFYXN0KCkscj1zLmxhdD5lLmxhdCYmbi5sYXQ8aS5sYXQsYT1zLmxuZz5lLmxuZyYmbi5sbmc8aS5sbmc7cmV0dXJuIHImJmF9LHRvQkJveFN0cmluZzpmdW5jdGlvbigpe3JldHVyblt0aGlzLmdldFdlc3QoKSx0aGlzLmdldFNvdXRoKCksdGhpcy5nZXRFYXN0KCksdGhpcy5nZXROb3J0aCgpXS5qb2luKFwiLFwiKX0sZXF1YWxzOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmKHQ9by5sYXRMbmdCb3VuZHModCksdGhpcy5fc291dGhXZXN0LmVxdWFscyh0LmdldFNvdXRoV2VzdCgpKSYmdGhpcy5fbm9ydGhFYXN0LmVxdWFscyh0LmdldE5vcnRoRWFzdCgpKSl9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLl9zb3V0aFdlc3R8fCF0aGlzLl9ub3J0aEVhc3QpfX0sby5sYXRMbmdCb3VuZHM9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIG8uTGF0TG5nQm91bmRzP3Q6bmV3IG8uTGF0TG5nQm91bmRzKHQsZSl9LG8uUHJvamVjdGlvbj17fSxvLlByb2plY3Rpb24uTG9uTGF0PXtwcm9qZWN0OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5Qb2ludCh0LmxuZyx0LmxhdCl9LHVucHJvamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uTGF0TG5nKHQueSx0LngpfSxib3VuZHM6by5ib3VuZHMoWy0xODAsLTkwXSxbMTgwLDkwXSl9LG8uUHJvamVjdGlvbi5TcGhlcmljYWxNZXJjYXRvcj17Ujo2Mzc4MTM3LE1BWF9MQVRJVFVERTo4NS4wNTExMjg3Nzk4LHByb2plY3Q6ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5QSS8xODAsaT10aGlzLk1BWF9MQVRJVFVERSxuPU1hdGgubWF4KE1hdGgubWluKGksdC5sYXQpLC1pKSxzPU1hdGguc2luKG4qZSk7cmV0dXJuIG5ldyBvLlBvaW50KHRoaXMuUip0LmxuZyplLHRoaXMuUipNYXRoLmxvZygoMStzKS8oMS1zKSkvMil9LHVucHJvamVjdDpmdW5jdGlvbih0KXt2YXIgZT0xODAvTWF0aC5QSTtyZXR1cm4gbmV3IG8uTGF0TG5nKCgyKk1hdGguYXRhbihNYXRoLmV4cCh0LnkvdGhpcy5SKSktTWF0aC5QSS8yKSplLHQueCplL3RoaXMuUil9LGJvdW5kczpmdW5jdGlvbigpe3ZhciB0PTYzNzgxMzcqTWF0aC5QSTtyZXR1cm4gby5ib3VuZHMoWy10LC10XSxbdCx0XSl9KCl9LG8uQ1JTPXtsYXRMbmdUb1BvaW50OmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5wcm9qZWN0aW9uLnByb2plY3QodCksbj10aGlzLnNjYWxlKGUpO3JldHVybiB0aGlzLnRyYW5zZm9ybWF0aW9uLl90cmFuc2Zvcm0oaSxuKX0scG9pbnRUb0xhdExuZzpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuc2NhbGUoZSksbj10aGlzLnRyYW5zZm9ybWF0aW9uLnVudHJhbnNmb3JtKHQsaSk7cmV0dXJuIHRoaXMucHJvamVjdGlvbi51bnByb2plY3Qobil9LHByb2plY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJvamVjdGlvbi5wcm9qZWN0KHQpfSx1bnByb2plY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMucHJvamVjdGlvbi51bnByb2plY3QodCl9LHNjYWxlOmZ1bmN0aW9uKHQpe3JldHVybiAyNTYqTWF0aC5wb3coMix0KX0sem9vbTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2codC8yNTYpL01hdGguTE4yfSxnZXRQcm9qZWN0ZWRCb3VuZHM6ZnVuY3Rpb24odCl7aWYodGhpcy5pbmZpbml0ZSlyZXR1cm4gbnVsbDt2YXIgZT10aGlzLnByb2plY3Rpb24uYm91bmRzLGk9dGhpcy5zY2FsZSh0KSxuPXRoaXMudHJhbnNmb3JtYXRpb24udHJhbnNmb3JtKGUubWluLGkpLHM9dGhpcy50cmFuc2Zvcm1hdGlvbi50cmFuc2Zvcm0oZS5tYXgsaSk7cmV0dXJuIG8uYm91bmRzKG4scyl9LGluZmluaXRlOiExLHdyYXBMYXRMbmc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy53cmFwTG5nP28uVXRpbC53cmFwTnVtKHQubG5nLHRoaXMud3JhcExuZywhMCk6dC5sbmcsaT10aGlzLndyYXBMYXQ/by5VdGlsLndyYXBOdW0odC5sYXQsdGhpcy53cmFwTGF0LCEwKTp0LmxhdCxuPXQuYWx0O3JldHVybiBvLmxhdExuZyhpLGUsbil9LHdyYXBMYXRMbmdCb3VuZHM6ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRDZW50ZXIoKSxpPXRoaXMud3JhcExhdExuZyhlKSxuPWUubGF0LWkubGF0LHM9ZS5sbmctaS5sbmc7aWYoMD09PW4mJjA9PT1zKXJldHVybiB0O3ZhciByPXQuZ2V0U291dGhXZXN0KCksYT10LmdldE5vcnRoRWFzdCgpLGg9by5sYXRMbmcoe2xhdDpyLmxhdC1uLGxuZzpyLmxuZy1zfSksbD1vLmxhdExuZyh7bGF0OmEubGF0LW4sbG5nOmEubG5nLXN9KTtyZXR1cm4gbmV3IG8uTGF0TG5nQm91bmRzKGgsbCl9fSxvLkNSUy5TaW1wbGU9by5leHRlbmQoe30sby5DUlMse3Byb2plY3Rpb246by5Qcm9qZWN0aW9uLkxvbkxhdCx0cmFuc2Zvcm1hdGlvbjpuZXcgby5UcmFuc2Zvcm1hdGlvbigxLDAsLTEsMCksc2NhbGU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KDIsdCl9LHpvb206ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubG9nKHQpL01hdGguTE4yfSxkaXN0YW5jZTpmdW5jdGlvbih0LGUpe3ZhciBpPWUubG5nLXQubG5nLG49ZS5sYXQtdC5sYXQ7cmV0dXJuIE1hdGguc3FydChpKmkrbipuKX0saW5maW5pdGU6ITB9KSxvLkNSUy5FYXJ0aD1vLmV4dGVuZCh7fSxvLkNSUyx7d3JhcExuZzpbLTE4MCwxODBdLFI6NjM3MWUzLGRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9TWF0aC5QSS8xODAsbj10LmxhdCppLG89ZS5sYXQqaSxzPU1hdGguc2luKG4pKk1hdGguc2luKG8pK01hdGguY29zKG4pKk1hdGguY29zKG8pKk1hdGguY29zKChlLmxuZy10LmxuZykqaSk7cmV0dXJuIHRoaXMuUipNYXRoLmFjb3MoTWF0aC5taW4ocywxKSl9fSksby5DUlMuRVBTRzM4NTc9by5leHRlbmQoe30sby5DUlMuRWFydGgse2NvZGU6XCJFUFNHOjM4NTdcIixwcm9qZWN0aW9uOm8uUHJvamVjdGlvbi5TcGhlcmljYWxNZXJjYXRvcix0cmFuc2Zvcm1hdGlvbjpmdW5jdGlvbigpe3ZhciB0PS41LyhNYXRoLlBJKm8uUHJvamVjdGlvbi5TcGhlcmljYWxNZXJjYXRvci5SKTtyZXR1cm4gbmV3IG8uVHJhbnNmb3JtYXRpb24odCwuNSwtdCwuNSl9KCl9KSxvLkNSUy5FUFNHOTAwOTEzPW8uZXh0ZW5kKHt9LG8uQ1JTLkVQU0czODU3LHtjb2RlOlwiRVBTRzo5MDA5MTNcIn0pLG8uQ1JTLkVQU0c0MzI2PW8uZXh0ZW5kKHt9LG8uQ1JTLkVhcnRoLHtjb2RlOlwiRVBTRzo0MzI2XCIscHJvamVjdGlvbjpvLlByb2plY3Rpb24uTG9uTGF0LHRyYW5zZm9ybWF0aW9uOm5ldyBvLlRyYW5zZm9ybWF0aW9uKDEvMTgwLDEsLTEvMTgwLC41KX0pLG8uTWFwPW8uRXZlbnRlZC5leHRlbmQoe29wdGlvbnM6e2NyczpvLkNSUy5FUFNHMzg1NyxjZW50ZXI6aSx6b29tOmksbWluWm9vbTppLG1heFpvb206aSxsYXllcnM6W10sbWF4Qm91bmRzOmkscmVuZGVyZXI6aSx6b29tQW5pbWF0aW9uOiEwLHpvb21BbmltYXRpb25UaHJlc2hvbGQ6NCxmYWRlQW5pbWF0aW9uOiEwLG1hcmtlclpvb21BbmltYXRpb246ITAsdHJhbnNmb3JtM0RMaW1pdDo4Mzg4NjA4LHpvb21TbmFwOjEsem9vbURlbHRhOjEsdHJhY2tSZXNpemU6ITB9LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlKXtlPW8uc2V0T3B0aW9ucyh0aGlzLGUpLHRoaXMuX2luaXRDb250YWluZXIodCksdGhpcy5faW5pdExheW91dCgpLHRoaXMuX29uUmVzaXplPW8uYmluZCh0aGlzLl9vblJlc2l6ZSx0aGlzKSx0aGlzLl9pbml0RXZlbnRzKCksZS5tYXhCb3VuZHMmJnRoaXMuc2V0TWF4Qm91bmRzKGUubWF4Qm91bmRzKSxlLnpvb20hPT1pJiYodGhpcy5fem9vbT10aGlzLl9saW1pdFpvb20oZS56b29tKSksZS5jZW50ZXImJmUuem9vbSE9PWkmJnRoaXMuc2V0VmlldyhvLmxhdExuZyhlLmNlbnRlciksZS56b29tLHtyZXNldDohMH0pLHRoaXMuX2hhbmRsZXJzPVtdLHRoaXMuX2xheWVycz17fSx0aGlzLl96b29tQm91bmRMYXllcnM9e30sdGhpcy5fc2l6ZUNoYW5nZWQ9ITAsdGhpcy5jYWxsSW5pdEhvb2tzKCksdGhpcy5fem9vbUFuaW1hdGVkPW8uRG9tVXRpbC5UUkFOU0lUSU9OJiZvLkJyb3dzZXIuYW55M2QmJiFvLkJyb3dzZXIubW9iaWxlT3BlcmEmJnRoaXMub3B0aW9ucy56b29tQW5pbWF0aW9uLHRoaXMuX3pvb21BbmltYXRlZCYmKHRoaXMuX2NyZWF0ZUFuaW1Qcm94eSgpLG8uRG9tRXZlbnQub24odGhpcy5fcHJveHksby5Eb21VdGlsLlRSQU5TSVRJT05fRU5ELHRoaXMuX2NhdGNoVHJhbnNpdGlvbkVuZCx0aGlzKSksdGhpcy5fYWRkTGF5ZXJzKHRoaXMub3B0aW9ucy5sYXllcnMpfSxzZXRWaWV3OmZ1bmN0aW9uKHQsZSxuKXtpZihlPWU9PT1pP3RoaXMuX3pvb206dGhpcy5fbGltaXRab29tKGUpLHQ9dGhpcy5fbGltaXRDZW50ZXIoby5sYXRMbmcodCksZSx0aGlzLm9wdGlvbnMubWF4Qm91bmRzKSxuPW58fHt9LHRoaXMuX3N0b3AoKSx0aGlzLl9sb2FkZWQmJiFuLnJlc2V0JiZuIT09ITApe24uYW5pbWF0ZSE9PWkmJihuLnpvb209by5leHRlbmQoe2FuaW1hdGU6bi5hbmltYXRlfSxuLnpvb20pLG4ucGFuPW8uZXh0ZW5kKHthbmltYXRlOm4uYW5pbWF0ZSxkdXJhdGlvbjpuLmR1cmF0aW9ufSxuLnBhbikpO3ZhciBzPXRoaXMuX3pvb20hPT1lP3RoaXMuX3RyeUFuaW1hdGVkWm9vbSYmdGhpcy5fdHJ5QW5pbWF0ZWRab29tKHQsZSxuLnpvb20pOnRoaXMuX3RyeUFuaW1hdGVkUGFuKHQsbi5wYW4pO2lmKHMpcmV0dXJuIGNsZWFyVGltZW91dCh0aGlzLl9zaXplVGltZXIpLHRoaXN9cmV0dXJuIHRoaXMuX3Jlc2V0Vmlldyh0LGUpLHRoaXN9LHNldFpvb206ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fbG9hZGVkP3RoaXMuc2V0Vmlldyh0aGlzLmdldENlbnRlcigpLHQse3pvb206ZX0pOih0aGlzLl96b29tPXQsdGhpcyl9LHpvb21JbjpmdW5jdGlvbih0LGUpe3JldHVybiB0PXR8fChvLkJyb3dzZXIuYW55M2Q/dGhpcy5vcHRpb25zLnpvb21EZWx0YToxKSx0aGlzLnNldFpvb20odGhpcy5fem9vbSt0LGUpfSx6b29tT3V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dHx8KG8uQnJvd3Nlci5hbnkzZD90aGlzLm9wdGlvbnMuem9vbURlbHRhOjEpLHRoaXMuc2V0Wm9vbSh0aGlzLl96b29tLXQsZSl9LHNldFpvb21Bcm91bmQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuZ2V0Wm9vbVNjYWxlKGUpLHM9dGhpcy5nZXRTaXplKCkuZGl2aWRlQnkoMikscj10IGluc3RhbmNlb2Ygby5Qb2ludD90OnRoaXMubGF0TG5nVG9Db250YWluZXJQb2ludCh0KSxhPXIuc3VidHJhY3QocykubXVsdGlwbHlCeSgxLTEvbiksaD10aGlzLmNvbnRhaW5lclBvaW50VG9MYXRMbmcocy5hZGQoYSkpO3JldHVybiB0aGlzLnNldFZpZXcoaCxlLHt6b29tOml9KX0sX2dldEJvdW5kc0NlbnRlclpvb206ZnVuY3Rpb24odCxlKXtlPWV8fHt9LHQ9dC5nZXRCb3VuZHM/dC5nZXRCb3VuZHMoKTpvLmxhdExuZ0JvdW5kcyh0KTt2YXIgaT1vLnBvaW50KGUucGFkZGluZ1RvcExlZnR8fGUucGFkZGluZ3x8WzAsMF0pLG49by5wb2ludChlLnBhZGRpbmdCb3R0b21SaWdodHx8ZS5wYWRkaW5nfHxbMCwwXSkscz10aGlzLmdldEJvdW5kc1pvb20odCwhMSxpLmFkZChuKSk7cz1cIm51bWJlclwiPT10eXBlb2YgZS5tYXhab29tP01hdGgubWluKGUubWF4Wm9vbSxzKTpzO3ZhciByPW4uc3VidHJhY3QoaSkuZGl2aWRlQnkoMiksYT10aGlzLnByb2plY3QodC5nZXRTb3V0aFdlc3QoKSxzKSxoPXRoaXMucHJvamVjdCh0LmdldE5vcnRoRWFzdCgpLHMpLGw9dGhpcy51bnByb2plY3QoYS5hZGQoaCkuZGl2aWRlQnkoMikuYWRkKHIpLHMpO3JldHVybntjZW50ZXI6bCx6b29tOnN9fSxmaXRCb3VuZHM6ZnVuY3Rpb24odCxlKXtpZih0PW8ubGF0TG5nQm91bmRzKHQpLCF0LmlzVmFsaWQoKSl0aHJvdyBuZXcgRXJyb3IoXCJCb3VuZHMgYXJlIG5vdCB2YWxpZC5cIik7dmFyIGk9dGhpcy5fZ2V0Qm91bmRzQ2VudGVyWm9vbSh0LGUpO3JldHVybiB0aGlzLnNldFZpZXcoaS5jZW50ZXIsaS56b29tLGUpfSxmaXRXb3JsZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5maXRCb3VuZHMoW1stOTAsLTE4MF0sWzkwLDE4MF1dLHQpfSxwYW5UbzpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLnNldFZpZXcodCx0aGlzLl96b29tLHtwYW46ZX0pfSxwYW5CeTpmdW5jdGlvbih0LGUpe2lmKHQ9by5wb2ludCh0KS5yb3VuZCgpLGU9ZXx8e30sIXQueCYmIXQueSlyZXR1cm4gdGhpcy5maXJlKFwibW92ZWVuZFwiKTtpZihlLmFuaW1hdGUhPT0hMCYmIXRoaXMuZ2V0U2l6ZSgpLmNvbnRhaW5zKHQpKXJldHVybiB0aGlzLl9yZXNldFZpZXcodGhpcy51bnByb2plY3QodGhpcy5wcm9qZWN0KHRoaXMuZ2V0Q2VudGVyKCkpLmFkZCh0KSksdGhpcy5nZXRab29tKCkpLHRoaXM7aWYodGhpcy5fcGFuQW5pbXx8KHRoaXMuX3BhbkFuaW09bmV3IG8uUG9zQW5pbWF0aW9uLHRoaXMuX3BhbkFuaW0ub24oe3N0ZXA6dGhpcy5fb25QYW5UcmFuc2l0aW9uU3RlcCxlbmQ6dGhpcy5fb25QYW5UcmFuc2l0aW9uRW5kfSx0aGlzKSksZS5ub01vdmVTdGFydHx8dGhpcy5maXJlKFwibW92ZXN0YXJ0XCIpLGUuYW5pbWF0ZSE9PSExKXtvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fbWFwUGFuZSxcImxlYWZsZXQtcGFuLWFuaW1cIik7dmFyIGk9dGhpcy5fZ2V0TWFwUGFuZVBvcygpLnN1YnRyYWN0KHQpLnJvdW5kKCk7dGhpcy5fcGFuQW5pbS5ydW4odGhpcy5fbWFwUGFuZSxpLGUuZHVyYXRpb258fC4yNSxlLmVhc2VMaW5lYXJpdHkpfWVsc2UgdGhpcy5fcmF3UGFuQnkodCksdGhpcy5maXJlKFwibW92ZVwiKS5maXJlKFwibW92ZWVuZFwiKTtyZXR1cm4gdGhpc30sZmx5VG86ZnVuY3Rpb24odCxlLG4pe2Z1bmN0aW9uIHModCl7dmFyIGU9dD8tMToxLGk9dD92Omcsbj12KnYtZypnK2UqTCpMKnkqeSxvPTIqaSpMKnkscz1uL28scj1NYXRoLnNxcnQocypzKzEpLXMsYT1yPDFlLTk/LTE4Ok1hdGgubG9nKHIpO3JldHVybiBhfWZ1bmN0aW9uIHIodCl7cmV0dXJuKE1hdGguZXhwKHQpLU1hdGguZXhwKC10KSkvMn1mdW5jdGlvbiBhKHQpe3JldHVybihNYXRoLmV4cCh0KStNYXRoLmV4cCgtdCkpLzJ9ZnVuY3Rpb24gaCh0KXtyZXR1cm4gcih0KS9hKHQpfWZ1bmN0aW9uIGwodCl7cmV0dXJuIGcqKGEoeCkvYSh4K1AqdCkpfWZ1bmN0aW9uIHUodCl7cmV0dXJuIGcqKGEoeCkqaCh4K1AqdCktcih4KSkvTH1mdW5jdGlvbiBjKHQpe3JldHVybiAxLU1hdGgucG93KDEtdCwxLjUpfWZ1bmN0aW9uIGQoKXt2YXIgaT0oRGF0ZS5ub3coKS13KS9ULG49YyhpKSpiO2k8PTE/KHRoaXMuX2ZseVRvRnJhbWU9by5VdGlsLnJlcXVlc3RBbmltRnJhbWUoZCx0aGlzKSx0aGlzLl9tb3ZlKHRoaXMudW5wcm9qZWN0KF8uYWRkKG0uc3VidHJhY3QoXykubXVsdGlwbHlCeSh1KG4pL3kpKSxmKSx0aGlzLmdldFNjYWxlWm9vbShnL2wobiksZikse2ZseVRvOiEwfSkpOnRoaXMuX21vdmUodCxlKS5fbW92ZUVuZCghMCl9aWYobj1ufHx7fSxuLmFuaW1hdGU9PT0hMXx8IW8uQnJvd3Nlci5hbnkzZClyZXR1cm4gdGhpcy5zZXRWaWV3KHQsZSxuKTt0aGlzLl9zdG9wKCk7dmFyIF89dGhpcy5wcm9qZWN0KHRoaXMuZ2V0Q2VudGVyKCkpLG09dGhpcy5wcm9qZWN0KHQpLHA9dGhpcy5nZXRTaXplKCksZj10aGlzLl96b29tO3Q9by5sYXRMbmcodCksZT1lPT09aT9mOmU7dmFyIGc9TWF0aC5tYXgocC54LHAueSksdj1nKnRoaXMuZ2V0Wm9vbVNjYWxlKGYsZSkseT1tLmRpc3RhbmNlVG8oXyl8fDEsUD0xLjQyLEw9UCpQLHg9cygwKSx3PURhdGUubm93KCksYj0ocygxKS14KS9QLFQ9bi5kdXJhdGlvbj8xZTMqbi5kdXJhdGlvbjoxZTMqYiouODtyZXR1cm4gdGhpcy5fbW92ZVN0YXJ0KCEwKSxkLmNhbGwodGhpcyksdGhpc30sZmx5VG9Cb3VuZHM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRCb3VuZHNDZW50ZXJab29tKHQsZSk7cmV0dXJuIHRoaXMuZmx5VG8oaS5jZW50ZXIsaS56b29tLGUpfSxzZXRNYXhCb3VuZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9by5sYXRMbmdCb3VuZHModCksdC5pc1ZhbGlkKCk/KHRoaXMub3B0aW9ucy5tYXhCb3VuZHMmJnRoaXMub2ZmKFwibW92ZWVuZFwiLHRoaXMuX3Bhbkluc2lkZU1heEJvdW5kcyksdGhpcy5vcHRpb25zLm1heEJvdW5kcz10LHRoaXMuX2xvYWRlZCYmdGhpcy5fcGFuSW5zaWRlTWF4Qm91bmRzKCksdGhpcy5vbihcIm1vdmVlbmRcIix0aGlzLl9wYW5JbnNpZGVNYXhCb3VuZHMpKToodGhpcy5vcHRpb25zLm1heEJvdW5kcz1udWxsLHRoaXMub2ZmKFwibW92ZWVuZFwiLHRoaXMuX3Bhbkluc2lkZU1heEJvdW5kcykpfSxzZXRNaW5ab29tOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMubWluWm9vbT10LHRoaXMuX2xvYWRlZCYmdGhpcy5nZXRab29tKCk8dGhpcy5vcHRpb25zLm1pblpvb20/dGhpcy5zZXRab29tKHQpOnRoaXN9LHNldE1heFpvb206ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5tYXhab29tPXQsdGhpcy5fbG9hZGVkJiZ0aGlzLmdldFpvb20oKT50aGlzLm9wdGlvbnMubWF4Wm9vbT90aGlzLnNldFpvb20odCk6dGhpc30scGFuSW5zaWRlQm91bmRzOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZW5mb3JjaW5nQm91bmRzPSEwO3ZhciBpPXRoaXMuZ2V0Q2VudGVyKCksbj10aGlzLl9saW1pdENlbnRlcihpLHRoaXMuX3pvb20sby5sYXRMbmdCb3VuZHModCkpO3JldHVybiBpLmVxdWFscyhuKXx8dGhpcy5wYW5UbyhuLGUpLHRoaXMuX2VuZm9yY2luZ0JvdW5kcz0hMSx0aGlzfSxpbnZhbGlkYXRlU2l6ZTpmdW5jdGlvbih0KXtpZighdGhpcy5fbG9hZGVkKXJldHVybiB0aGlzO3Q9by5leHRlbmQoe2FuaW1hdGU6ITEscGFuOiEwfSx0PT09ITA/e2FuaW1hdGU6ITB9OnQpO3ZhciBlPXRoaXMuZ2V0U2l6ZSgpO3RoaXMuX3NpemVDaGFuZ2VkPSEwLHRoaXMuX2xhc3RDZW50ZXI9bnVsbDt2YXIgaT10aGlzLmdldFNpemUoKSxuPWUuZGl2aWRlQnkoMikucm91bmQoKSxzPWkuZGl2aWRlQnkoMikucm91bmQoKSxyPW4uc3VidHJhY3Qocyk7cmV0dXJuIHIueHx8ci55Pyh0LmFuaW1hdGUmJnQucGFuP3RoaXMucGFuQnkocik6KHQucGFuJiZ0aGlzLl9yYXdQYW5CeShyKSx0aGlzLmZpcmUoXCJtb3ZlXCIpLHQuZGVib3VuY2VNb3ZlZW5kPyhjbGVhclRpbWVvdXQodGhpcy5fc2l6ZVRpbWVyKSx0aGlzLl9zaXplVGltZXI9c2V0VGltZW91dChvLmJpbmQodGhpcy5maXJlLHRoaXMsXCJtb3ZlZW5kXCIpLDIwMCkpOnRoaXMuZmlyZShcIm1vdmVlbmRcIikpLHRoaXMuZmlyZShcInJlc2l6ZVwiLHtvbGRTaXplOmUsbmV3U2l6ZTppfSkpOnRoaXN9LHN0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZXRab29tKHRoaXMuX2xpbWl0Wm9vbSh0aGlzLl96b29tKSksdGhpcy5vcHRpb25zLnpvb21TbmFwfHx0aGlzLmZpcmUoXCJ2aWV3cmVzZXRcIiksdGhpcy5fc3RvcCgpfSxsb2NhdGU6ZnVuY3Rpb24odCl7aWYodD10aGlzLl9sb2NhdGVPcHRpb25zPW8uZXh0ZW5kKHt0aW1lb3V0OjFlNCx3YXRjaDohMX0sdCksIShcImdlb2xvY2F0aW9uXCJpbiBuYXZpZ2F0b3IpKXJldHVybiB0aGlzLl9oYW5kbGVHZW9sb2NhdGlvbkVycm9yKHtjb2RlOjAsbWVzc2FnZTpcIkdlb2xvY2F0aW9uIG5vdCBzdXBwb3J0ZWQuXCJ9KSx0aGlzO3ZhciBlPW8uYmluZCh0aGlzLl9oYW5kbGVHZW9sb2NhdGlvblJlc3BvbnNlLHRoaXMpLGk9by5iaW5kKHRoaXMuX2hhbmRsZUdlb2xvY2F0aW9uRXJyb3IsdGhpcyk7cmV0dXJuIHQud2F0Y2g/dGhpcy5fbG9jYXRpb25XYXRjaElkPW5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKGUsaSx0KTpuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGUsaSx0KSx0aGlzfSxzdG9wTG9jYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG5hdmlnYXRvci5nZW9sb2NhdGlvbiYmbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2gmJm5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMuX2xvY2F0aW9uV2F0Y2hJZCksdGhpcy5fbG9jYXRlT3B0aW9ucyYmKHRoaXMuX2xvY2F0ZU9wdGlvbnMuc2V0Vmlldz0hMSksdGhpc30sX2hhbmRsZUdlb2xvY2F0aW9uRXJyb3I6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb2RlLGk9dC5tZXNzYWdlfHwoMT09PWU/XCJwZXJtaXNzaW9uIGRlbmllZFwiOjI9PT1lP1wicG9zaXRpb24gdW5hdmFpbGFibGVcIjpcInRpbWVvdXRcIik7dGhpcy5fbG9jYXRlT3B0aW9ucy5zZXRWaWV3JiYhdGhpcy5fbG9hZGVkJiZ0aGlzLmZpdFdvcmxkKCksdGhpcy5maXJlKFwibG9jYXRpb25lcnJvclwiLHtjb2RlOmUsbWVzc2FnZTpcIkdlb2xvY2F0aW9uIGVycm9yOiBcIitpK1wiLlwifSl9LF9oYW5kbGVHZW9sb2NhdGlvblJlc3BvbnNlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuY29vcmRzLmxhdGl0dWRlLGk9dC5jb29yZHMubG9uZ2l0dWRlLG49bmV3IG8uTGF0TG5nKGUsaSkscz1uLnRvQm91bmRzKHQuY29vcmRzLmFjY3VyYWN5KSxyPXRoaXMuX2xvY2F0ZU9wdGlvbnM7aWYoci5zZXRWaWV3KXt2YXIgYT10aGlzLmdldEJvdW5kc1pvb20ocyk7dGhpcy5zZXRWaWV3KG4sci5tYXhab29tP01hdGgubWluKGEsci5tYXhab29tKTphKX12YXIgaD17bGF0bG5nOm4sYm91bmRzOnMsdGltZXN0YW1wOnQudGltZXN0YW1wfTtmb3IodmFyIGwgaW4gdC5jb29yZHMpXCJudW1iZXJcIj09dHlwZW9mIHQuY29vcmRzW2xdJiYoaFtsXT10LmNvb3Jkc1tsXSk7dGhpcy5maXJlKFwibG9jYXRpb25mb3VuZFwiLGgpfSxhZGRIYW5kbGVyOmZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHRoaXM7dmFyIGk9dGhpc1t0XT1uZXcgZSh0aGlzKTtyZXR1cm4gdGhpcy5faGFuZGxlcnMucHVzaChpKSx0aGlzLm9wdGlvbnNbdF0mJmkuZW5hYmxlKCksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7aWYodGhpcy5faW5pdEV2ZW50cyghMCksdGhpcy5fY29udGFpbmVySWQhPT10aGlzLl9jb250YWluZXIuX2xlYWZsZXRfaWQpdGhyb3cgbmV3IEVycm9yKFwiTWFwIGNvbnRhaW5lciBpcyBiZWluZyByZXVzZWQgYnkgYW5vdGhlciBpbnN0YW5jZVwiKTt0cnl7ZGVsZXRlIHRoaXMuX2NvbnRhaW5lci5fbGVhZmxldF9pZCxkZWxldGUgdGhpcy5fY29udGFpbmVySWR9Y2F0Y2godCl7dGhpcy5fY29udGFpbmVyLl9sZWFmbGV0X2lkPWksdGhpcy5fY29udGFpbmVySWQ9aX1vLkRvbVV0aWwucmVtb3ZlKHRoaXMuX21hcFBhbmUpLHRoaXMuX2NsZWFyQ29udHJvbFBvcyYmdGhpcy5fY2xlYXJDb250cm9sUG9zKCksdGhpcy5fY2xlYXJIYW5kbGVycygpLHRoaXMuX2xvYWRlZCYmdGhpcy5maXJlKFwidW5sb2FkXCIpO2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLnJlbW92ZSgpO3JldHVybiB0aGlzfSxjcmVhdGVQYW5lOmZ1bmN0aW9uKHQsZSl7dmFyIGk9XCJsZWFmbGV0LXBhbmVcIisodD9cIiBsZWFmbGV0LVwiK3QucmVwbGFjZShcIlBhbmVcIixcIlwiKStcIi1wYW5lXCI6XCJcIiksbj1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsaSxlfHx0aGlzLl9tYXBQYW5lKTtyZXR1cm4gdCYmKHRoaXMuX3BhbmVzW3RdPW4pLG59LGdldENlbnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja0lmTG9hZGVkKCksdGhpcy5fbGFzdENlbnRlciYmIXRoaXMuX21vdmVkKCk/dGhpcy5fbGFzdENlbnRlcjp0aGlzLmxheWVyUG9pbnRUb0xhdExuZyh0aGlzLl9nZXRDZW50ZXJMYXllclBvaW50KCkpfSxnZXRab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3pvb219LGdldEJvdW5kczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0UGl4ZWxCb3VuZHMoKSxlPXRoaXMudW5wcm9qZWN0KHQuZ2V0Qm90dG9tTGVmdCgpKSxpPXRoaXMudW5wcm9qZWN0KHQuZ2V0VG9wUmlnaHQoKSk7cmV0dXJuIG5ldyBvLkxhdExuZ0JvdW5kcyhlLGkpfSxnZXRNaW5ab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5taW5ab29tPT09aT90aGlzLl9sYXllcnNNaW5ab29tfHwwOnRoaXMub3B0aW9ucy5taW5ab29tfSxnZXRNYXhab29tOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5tYXhab29tPT09aT90aGlzLl9sYXllcnNNYXhab29tPT09aT8xLzA6dGhpcy5fbGF5ZXJzTWF4Wm9vbTp0aGlzLm9wdGlvbnMubWF4Wm9vbX0sZ2V0Qm91bmRzWm9vbTpmdW5jdGlvbih0LGUsaSl7dD1vLmxhdExuZ0JvdW5kcyh0KSxpPW8ucG9pbnQoaXx8WzAsMF0pO3ZhciBuPXRoaXMuZ2V0Wm9vbSgpfHwwLHM9dGhpcy5nZXRNaW5ab29tKCkscj10aGlzLmdldE1heFpvb20oKSxhPXQuZ2V0Tm9ydGhXZXN0KCksaD10LmdldFNvdXRoRWFzdCgpLGw9dGhpcy5nZXRTaXplKCkuc3VidHJhY3QoaSksdT1vLmJvdW5kcyh0aGlzLnByb2plY3QoaCxuKSx0aGlzLnByb2plY3QoYSxuKSkuZ2V0U2l6ZSgpLGM9by5Ccm93c2VyLmFueTNkP3RoaXMub3B0aW9ucy56b29tU25hcDoxLGQ9TWF0aC5taW4obC54L3UueCxsLnkvdS55KTtyZXR1cm4gbj10aGlzLmdldFNjYWxlWm9vbShkLG4pLGMmJihuPU1hdGgucm91bmQobi8oYy8xMDApKSooYy8xMDApLG49ZT9NYXRoLmNlaWwobi9jKSpjOk1hdGguZmxvb3Iobi9jKSpjKSxNYXRoLm1heChzLE1hdGgubWluKHIsbikpfSxnZXRTaXplOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NpemUmJiF0aGlzLl9zaXplQ2hhbmdlZHx8KHRoaXMuX3NpemU9bmV3IG8uUG9pbnQodGhpcy5fY29udGFpbmVyLmNsaWVudFdpZHRofHwwLHRoaXMuX2NvbnRhaW5lci5jbGllbnRIZWlnaHR8fDApLHRoaXMuX3NpemVDaGFuZ2VkPSExKSx0aGlzLl9zaXplLmNsb25lKCl9LGdldFBpeGVsQm91bmRzOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZ2V0VG9wTGVmdFBvaW50KHQsZSk7cmV0dXJuIG5ldyBvLkJvdW5kcyhpLGkuYWRkKHRoaXMuZ2V0U2l6ZSgpKSl9LGdldFBpeGVsT3JpZ2luOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrSWZMb2FkZWQoKSx0aGlzLl9waXhlbE9yaWdpbn0sZ2V0UGl4ZWxXb3JsZEJvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmNycy5nZXRQcm9qZWN0ZWRCb3VuZHModD09PWk/dGhpcy5nZXRab29tKCk6dCl9LGdldFBhbmU6ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/dGhpcy5fcGFuZXNbdF06dH0sZ2V0UGFuZXM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFuZXN9LGdldENvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250YWluZXJ9LGdldFpvb21TY2FsZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMub3B0aW9ucy5jcnM7cmV0dXJuIGU9ZT09PWk/dGhpcy5fem9vbTplLG4uc2NhbGUodCkvbi5zY2FsZShlKX0sZ2V0U2NhbGVab29tOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5vcHRpb25zLmNycztlPWU9PT1pP3RoaXMuX3pvb206ZTt2YXIgbz1uLnpvb20odCpuLnNjYWxlKGUpKTtyZXR1cm4gaXNOYU4obyk/MS8wOm99LHByb2plY3Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lPT09aT90aGlzLl96b29tOmUsdGhpcy5vcHRpb25zLmNycy5sYXRMbmdUb1BvaW50KG8ubGF0TG5nKHQpLGUpfSx1bnByb2plY3Q6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lPT09aT90aGlzLl96b29tOmUsdGhpcy5vcHRpb25zLmNycy5wb2ludFRvTGF0TG5nKG8ucG9pbnQodCksZSl9LGxheWVyUG9pbnRUb0xhdExuZzpmdW5jdGlvbih0KXt2YXIgZT1vLnBvaW50KHQpLmFkZCh0aGlzLmdldFBpeGVsT3JpZ2luKCkpO3JldHVybiB0aGlzLnVucHJvamVjdChlKX0sbGF0TG5nVG9MYXllclBvaW50OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMucHJvamVjdChvLmxhdExuZyh0KSkuX3JvdW5kKCk7cmV0dXJuIGUuX3N1YnRyYWN0KHRoaXMuZ2V0UGl4ZWxPcmlnaW4oKSl9LHdyYXBMYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5jcnMud3JhcExhdExuZyhvLmxhdExuZyh0KSl9LHdyYXBMYXRMbmdCb3VuZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5jcnMud3JhcExhdExuZ0JvdW5kcyhvLmxhdExuZ0JvdW5kcyh0KSl9LGRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5jcnMuZGlzdGFuY2Uoby5sYXRMbmcodCksby5sYXRMbmcoZSkpfSxjb250YWluZXJQb2ludFRvTGF5ZXJQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gby5wb2ludCh0KS5zdWJ0cmFjdCh0aGlzLl9nZXRNYXBQYW5lUG9zKCkpfSxsYXllclBvaW50VG9Db250YWluZXJQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gby5wb2ludCh0KS5hZGQodGhpcy5fZ2V0TWFwUGFuZVBvcygpKX0sY29udGFpbmVyUG9pbnRUb0xhdExuZzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KG8ucG9pbnQodCkpO3JldHVybiB0aGlzLmxheWVyUG9pbnRUb0xhdExuZyhlKX0sbGF0TG5nVG9Db250YWluZXJQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sYXllclBvaW50VG9Db250YWluZXJQb2ludCh0aGlzLmxhdExuZ1RvTGF5ZXJQb2ludChvLmxhdExuZyh0KSkpfSxtb3VzZUV2ZW50VG9Db250YWluZXJQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gby5Eb21FdmVudC5nZXRNb3VzZVBvc2l0aW9uKHQsdGhpcy5fY29udGFpbmVyKX0sbW91c2VFdmVudFRvTGF5ZXJQb2ludDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludCh0aGlzLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQpKX0sbW91c2VFdmVudFRvTGF0TG5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxheWVyUG9pbnRUb0xhdExuZyh0aGlzLm1vdXNlRXZlbnRUb0xheWVyUG9pbnQodCkpfSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9jb250YWluZXI9by5Eb21VdGlsLmdldCh0KTtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY29udGFpbmVyIG5vdCBmb3VuZC5cIik7aWYoZS5fbGVhZmxldF9pZCl0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY29udGFpbmVyIGlzIGFscmVhZHkgaW5pdGlhbGl6ZWQuXCIpO28uRG9tRXZlbnQuYWRkTGlzdGVuZXIoZSxcInNjcm9sbFwiLHRoaXMuX29uU2Nyb2xsLHRoaXMpLHRoaXMuX2NvbnRhaW5lcklkPW8uVXRpbC5zdGFtcChlKX0sX2luaXRMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250YWluZXI7dGhpcy5fZmFkZUFuaW1hdGVkPXRoaXMub3B0aW9ucy5mYWRlQW5pbWF0aW9uJiZvLkJyb3dzZXIuYW55M2Qsby5Eb21VdGlsLmFkZENsYXNzKHQsXCJsZWFmbGV0LWNvbnRhaW5lclwiKyhvLkJyb3dzZXIudG91Y2g/XCIgbGVhZmxldC10b3VjaFwiOlwiXCIpKyhvLkJyb3dzZXIucmV0aW5hP1wiIGxlYWZsZXQtcmV0aW5hXCI6XCJcIikrKG8uQnJvd3Nlci5pZWx0OT9cIiBsZWFmbGV0LW9sZGllXCI6XCJcIikrKG8uQnJvd3Nlci5zYWZhcmk/XCIgbGVhZmxldC1zYWZhcmlcIjpcIlwiKSsodGhpcy5fZmFkZUFuaW1hdGVkP1wiIGxlYWZsZXQtZmFkZS1hbmltXCI6XCJcIikpO1xyXG52YXIgZT1vLkRvbVV0aWwuZ2V0U3R5bGUodCxcInBvc2l0aW9uXCIpO1wiYWJzb2x1dGVcIiE9PWUmJlwicmVsYXRpdmVcIiE9PWUmJlwiZml4ZWRcIiE9PWUmJih0LnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksdGhpcy5faW5pdFBhbmVzKCksdGhpcy5faW5pdENvbnRyb2xQb3MmJnRoaXMuX2luaXRDb250cm9sUG9zKCl9LF9pbml0UGFuZXM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wYW5lcz17fTt0aGlzLl9wYW5lUmVuZGVyZXJzPXt9LHRoaXMuX21hcFBhbmU9dGhpcy5jcmVhdGVQYW5lKFwibWFwUGFuZVwiLHRoaXMuX2NvbnRhaW5lciksby5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX21hcFBhbmUsbmV3IG8uUG9pbnQoMCwwKSksdGhpcy5jcmVhdGVQYW5lKFwidGlsZVBhbmVcIiksdGhpcy5jcmVhdGVQYW5lKFwic2hhZG93UGFuZVwiKSx0aGlzLmNyZWF0ZVBhbmUoXCJvdmVybGF5UGFuZVwiKSx0aGlzLmNyZWF0ZVBhbmUoXCJtYXJrZXJQYW5lXCIpLHRoaXMuY3JlYXRlUGFuZShcInRvb2x0aXBQYW5lXCIpLHRoaXMuY3JlYXRlUGFuZShcInBvcHVwUGFuZVwiKSx0aGlzLm9wdGlvbnMubWFya2VyWm9vbUFuaW1hdGlvbnx8KG8uRG9tVXRpbC5hZGRDbGFzcyh0Lm1hcmtlclBhbmUsXCJsZWFmbGV0LXpvb20taGlkZVwiKSxvLkRvbVV0aWwuYWRkQ2xhc3ModC5zaGFkb3dQYW5lLFwibGVhZmxldC16b29tLWhpZGVcIikpfSxfcmVzZXRWaWV3OmZ1bmN0aW9uKHQsZSl7by5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX21hcFBhbmUsbmV3IG8uUG9pbnQoMCwwKSk7dmFyIGk9IXRoaXMuX2xvYWRlZDt0aGlzLl9sb2FkZWQ9ITAsZT10aGlzLl9saW1pdFpvb20oZSksdGhpcy5maXJlKFwidmlld3ByZXJlc2V0XCIpO3ZhciBuPXRoaXMuX3pvb20hPT1lO3RoaXMuX21vdmVTdGFydChuKS5fbW92ZSh0LGUpLl9tb3ZlRW5kKG4pLHRoaXMuZmlyZShcInZpZXdyZXNldFwiKSxpJiZ0aGlzLmZpcmUoXCJsb2FkXCIpfSxfbW92ZVN0YXJ0OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLmZpcmUoXCJ6b29tc3RhcnRcIiksdGhpcy5maXJlKFwibW92ZXN0YXJ0XCIpfSxfbW92ZTpmdW5jdGlvbih0LGUsbil7ZT09PWkmJihlPXRoaXMuX3pvb20pO3ZhciBvPXRoaXMuX3pvb20hPT1lO3JldHVybiB0aGlzLl96b29tPWUsdGhpcy5fbGFzdENlbnRlcj10LHRoaXMuX3BpeGVsT3JpZ2luPXRoaXMuX2dldE5ld1BpeGVsT3JpZ2luKHQpLChvfHxuJiZuLnBpbmNoKSYmdGhpcy5maXJlKFwiem9vbVwiLG4pLHRoaXMuZmlyZShcIm1vdmVcIixuKX0sX21vdmVFbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuZmlyZShcInpvb21lbmRcIiksdGhpcy5maXJlKFwibW92ZWVuZFwiKX0sX3N0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gby5VdGlsLmNhbmNlbEFuaW1GcmFtZSh0aGlzLl9mbHlUb0ZyYW1lKSx0aGlzLl9wYW5BbmltJiZ0aGlzLl9wYW5BbmltLnN0b3AoKSx0aGlzfSxfcmF3UGFuQnk6ZnVuY3Rpb24odCl7by5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX21hcFBhbmUsdGhpcy5fZ2V0TWFwUGFuZVBvcygpLnN1YnRyYWN0KHQpKX0sX2dldFpvb21TcGFuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0TWF4Wm9vbSgpLXRoaXMuZ2V0TWluWm9vbSgpfSxfcGFuSW5zaWRlTWF4Qm91bmRzOmZ1bmN0aW9uKCl7dGhpcy5fZW5mb3JjaW5nQm91bmRzfHx0aGlzLnBhbkluc2lkZUJvdW5kcyh0aGlzLm9wdGlvbnMubWF4Qm91bmRzKX0sX2NoZWNrSWZMb2FkZWQ6ZnVuY3Rpb24oKXtpZighdGhpcy5fbG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlNldCBtYXAgY2VudGVyIGFuZCB6b29tIGZpcnN0LlwiKX0sX2luaXRFdmVudHM6ZnVuY3Rpb24oZSl7aWYoby5Eb21FdmVudCl7dGhpcy5fdGFyZ2V0cz17fSx0aGlzLl90YXJnZXRzW28uc3RhbXAodGhpcy5fY29udGFpbmVyKV09dGhpczt2YXIgaT1lP1wib2ZmXCI6XCJvblwiO28uRG9tRXZlbnRbaV0odGhpcy5fY29udGFpbmVyLFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBjb250ZXh0bWVudSBrZXlwcmVzc1wiLHRoaXMuX2hhbmRsZURPTUV2ZW50LHRoaXMpLHRoaXMub3B0aW9ucy50cmFja1Jlc2l6ZSYmby5Eb21FdmVudFtpXSh0LFwicmVzaXplXCIsdGhpcy5fb25SZXNpemUsdGhpcyksby5Ccm93c2VyLmFueTNkJiZ0aGlzLm9wdGlvbnMudHJhbnNmb3JtM0RMaW1pdCYmdGhpc1tpXShcIm1vdmVlbmRcIix0aGlzLl9vbk1vdmVFbmQpfX0sX29uUmVzaXplOmZ1bmN0aW9uKCl7by5VdGlsLmNhbmNlbEFuaW1GcmFtZSh0aGlzLl9yZXNpemVSZXF1ZXN0KSx0aGlzLl9yZXNpemVSZXF1ZXN0PW8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKGZ1bmN0aW9uKCl7dGhpcy5pbnZhbGlkYXRlU2l6ZSh7ZGVib3VuY2VNb3ZlZW5kOiEwfSl9LHRoaXMpfSxfb25TY3JvbGw6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXIuc2Nyb2xsVG9wPTAsdGhpcy5fY29udGFpbmVyLnNjcm9sbExlZnQ9MH0sX29uTW92ZUVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldE1hcFBhbmVQb3MoKTtNYXRoLm1heChNYXRoLmFicyh0LngpLE1hdGguYWJzKHQueSkpPj10aGlzLm9wdGlvbnMudHJhbnNmb3JtM0RMaW1pdCYmdGhpcy5fcmVzZXRWaWV3KHRoaXMuZ2V0Q2VudGVyKCksdGhpcy5nZXRab29tKCkpfSxfZmluZEV2ZW50VGFyZ2V0czpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSxuPVtdLHM9XCJtb3VzZW91dFwiPT09ZXx8XCJtb3VzZW92ZXJcIj09PWUscj10LnRhcmdldHx8dC5zcmNFbGVtZW50LGE9ITE7cjspe2lmKGk9dGhpcy5fdGFyZ2V0c1tvLnN0YW1wKHIpXSxpJiYoXCJjbGlja1wiPT09ZXx8XCJwcmVjbGlja1wiPT09ZSkmJiF0Ll9zaW11bGF0ZWQmJnRoaXMuX2RyYWdnYWJsZU1vdmVkKGkpKXthPSEwO2JyZWFrfWlmKGkmJmkubGlzdGVucyhlLCEwKSl7aWYocyYmIW8uRG9tRXZlbnQuX2lzRXh0ZXJuYWxUYXJnZXQocix0KSlicmVhaztpZihuLnB1c2goaSkscylicmVha31pZihyPT09dGhpcy5fY29udGFpbmVyKWJyZWFrO3I9ci5wYXJlbnROb2RlfXJldHVybiBuLmxlbmd0aHx8YXx8c3x8IW8uRG9tRXZlbnQuX2lzRXh0ZXJuYWxUYXJnZXQocix0KXx8KG49W3RoaXNdKSxufSxfaGFuZGxlRE9NRXZlbnQ6ZnVuY3Rpb24odCl7aWYodGhpcy5fbG9hZGVkJiYhby5Eb21FdmVudC5fc2tpcHBlZCh0KSl7dmFyIGU9XCJrZXlwcmVzc1wiPT09dC50eXBlJiYxMz09PXQua2V5Q29kZT9cImNsaWNrXCI6dC50eXBlO1wibW91c2Vkb3duXCI9PT1lJiZvLkRvbVV0aWwucHJldmVudE91dGxpbmUodC50YXJnZXR8fHQuc3JjRWxlbWVudCksdGhpcy5fZmlyZURPTUV2ZW50KHQsZSl9fSxfZmlyZURPTUV2ZW50OmZ1bmN0aW9uKHQsZSxpKXtpZihcImNsaWNrXCI9PT10LnR5cGUpe3ZhciBuPW8uVXRpbC5leHRlbmQoe30sdCk7bi50eXBlPVwicHJlY2xpY2tcIix0aGlzLl9maXJlRE9NRXZlbnQobixuLnR5cGUsaSl9aWYoIXQuX3N0b3BwZWQmJihpPShpfHxbXSkuY29uY2F0KHRoaXMuX2ZpbmRFdmVudFRhcmdldHModCxlKSksaS5sZW5ndGgpKXt2YXIgcz1pWzBdO1wiY29udGV4dG1lbnVcIj09PWUmJnMubGlzdGVucyhlLCEwKSYmby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCh0KTt2YXIgcj17b3JpZ2luYWxFdmVudDp0fTtpZihcImtleXByZXNzXCIhPT10LnR5cGUpe3ZhciBhPXMgaW5zdGFuY2VvZiBvLk1hcmtlcjtyLmNvbnRhaW5lclBvaW50PWE/dGhpcy5sYXRMbmdUb0NvbnRhaW5lclBvaW50KHMuZ2V0TGF0TG5nKCkpOnRoaXMubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodCksci5sYXllclBvaW50PXRoaXMuY29udGFpbmVyUG9pbnRUb0xheWVyUG9pbnQoci5jb250YWluZXJQb2ludCksci5sYXRsbmc9YT9zLmdldExhdExuZygpOnRoaXMubGF5ZXJQb2ludFRvTGF0TG5nKHIubGF5ZXJQb2ludCl9Zm9yKHZhciBoPTA7aDxpLmxlbmd0aDtoKyspaWYoaVtoXS5maXJlKGUsciwhMCksci5vcmlnaW5hbEV2ZW50Ll9zdG9wcGVkfHxpW2hdLm9wdGlvbnMubm9uQnViYmxpbmdFdmVudHMmJm8uVXRpbC5pbmRleE9mKGlbaF0ub3B0aW9ucy5ub25CdWJibGluZ0V2ZW50cyxlKSE9PS0xKXJldHVybn19LF9kcmFnZ2FibGVNb3ZlZDpmdW5jdGlvbih0KXtyZXR1cm4gdD10LmRyYWdnaW5nJiZ0LmRyYWdnaW5nLmVuYWJsZWQoKT90OnRoaXMsdC5kcmFnZ2luZyYmdC5kcmFnZ2luZy5tb3ZlZCgpfHx0aGlzLmJveFpvb20mJnRoaXMuYm94Wm9vbS5tb3ZlZCgpfSxfY2xlYXJIYW5kbGVyczpmdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5faGFuZGxlcnMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5faGFuZGxlcnNbdF0uZGlzYWJsZSgpfSx3aGVuUmVhZHk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fbG9hZGVkP3QuY2FsbChlfHx0aGlzLHt0YXJnZXQ6dGhpc30pOnRoaXMub24oXCJsb2FkXCIsdCxlKSx0aGlzfSxfZ2V0TWFwUGFuZVBvczpmdW5jdGlvbigpe3JldHVybiBvLkRvbVV0aWwuZ2V0UG9zaXRpb24odGhpcy5fbWFwUGFuZSl8fG5ldyBvLlBvaW50KDAsMCl9LF9tb3ZlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldE1hcFBhbmVQb3MoKTtyZXR1cm4gdCYmIXQuZXF1YWxzKFswLDBdKX0sX2dldFRvcExlZnRQb2ludDpmdW5jdGlvbih0LGUpe3ZhciBuPXQmJmUhPT1pP3RoaXMuX2dldE5ld1BpeGVsT3JpZ2luKHQsZSk6dGhpcy5nZXRQaXhlbE9yaWdpbigpO3JldHVybiBuLnN1YnRyYWN0KHRoaXMuX2dldE1hcFBhbmVQb3MoKSl9LF9nZXROZXdQaXhlbE9yaWdpbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuZ2V0U2l6ZSgpLl9kaXZpZGVCeSgyKTtyZXR1cm4gdGhpcy5wcm9qZWN0KHQsZSkuX3N1YnRyYWN0KGkpLl9hZGQodGhpcy5fZ2V0TWFwUGFuZVBvcygpKS5fcm91bmQoKX0sX2xhdExuZ1RvTmV3TGF5ZXJQb2ludDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5fZ2V0TmV3UGl4ZWxPcmlnaW4oaSxlKTtyZXR1cm4gdGhpcy5wcm9qZWN0KHQsZSkuX3N1YnRyYWN0KG4pfSxfbGF0TG5nQm91bmRzVG9OZXdMYXllckJvdW5kczpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5fZ2V0TmV3UGl4ZWxPcmlnaW4oaSxlKTtyZXR1cm4gby5ib3VuZHMoW3RoaXMucHJvamVjdCh0LmdldFNvdXRoV2VzdCgpLGUpLl9zdWJ0cmFjdChuKSx0aGlzLnByb2plY3QodC5nZXROb3J0aFdlc3QoKSxlKS5fc3VidHJhY3QobiksdGhpcy5wcm9qZWN0KHQuZ2V0U291dGhFYXN0KCksZSkuX3N1YnRyYWN0KG4pLHRoaXMucHJvamVjdCh0LmdldE5vcnRoRWFzdCgpLGUpLl9zdWJ0cmFjdChuKV0pfSxfZ2V0Q2VudGVyTGF5ZXJQb2ludDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KHRoaXMuZ2V0U2l6ZSgpLl9kaXZpZGVCeSgyKSl9LF9nZXRDZW50ZXJPZmZzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGF0TG5nVG9MYXllclBvaW50KHQpLnN1YnRyYWN0KHRoaXMuX2dldENlbnRlckxheWVyUG9pbnQoKSl9LF9saW1pdENlbnRlcjpmdW5jdGlvbih0LGUsaSl7aWYoIWkpcmV0dXJuIHQ7dmFyIG49dGhpcy5wcm9qZWN0KHQsZSkscz10aGlzLmdldFNpemUoKS5kaXZpZGVCeSgyKSxyPW5ldyBvLkJvdW5kcyhuLnN1YnRyYWN0KHMpLG4uYWRkKHMpKSxhPXRoaXMuX2dldEJvdW5kc09mZnNldChyLGksZSk7cmV0dXJuIGEucm91bmQoKS5lcXVhbHMoWzAsMF0pP3Q6dGhpcy51bnByb2plY3Qobi5hZGQoYSksZSl9LF9saW1pdE9mZnNldDpmdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiB0O3ZhciBpPXRoaXMuZ2V0UGl4ZWxCb3VuZHMoKSxuPW5ldyBvLkJvdW5kcyhpLm1pbi5hZGQodCksaS5tYXguYWRkKHQpKTtyZXR1cm4gdC5hZGQodGhpcy5fZ2V0Qm91bmRzT2Zmc2V0KG4sZSkpfSxfZ2V0Qm91bmRzT2Zmc2V0OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1vLmJvdW5kcyh0aGlzLnByb2plY3QoZS5nZXROb3J0aEVhc3QoKSxpKSx0aGlzLnByb2plY3QoZS5nZXRTb3V0aFdlc3QoKSxpKSkscz1uLm1pbi5zdWJ0cmFjdCh0Lm1pbikscj1uLm1heC5zdWJ0cmFjdCh0Lm1heCksYT10aGlzLl9yZWJvdW5kKHMueCwtci54KSxoPXRoaXMuX3JlYm91bmQocy55LC1yLnkpO3JldHVybiBuZXcgby5Qb2ludChhLGgpfSxfcmVib3VuZDpmdW5jdGlvbih0LGUpe3JldHVybiB0K2U+MD9NYXRoLnJvdW5kKHQtZSkvMjpNYXRoLm1heCgwLE1hdGguY2VpbCh0KSktTWF0aC5tYXgoMCxNYXRoLmZsb29yKGUpKX0sX2xpbWl0Wm9vbTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldE1pblpvb20oKSxpPXRoaXMuZ2V0TWF4Wm9vbSgpLG49by5Ccm93c2VyLmFueTNkP3RoaXMub3B0aW9ucy56b29tU25hcDoxO3JldHVybiBuJiYodD1NYXRoLnJvdW5kKHQvbikqbiksTWF0aC5tYXgoZSxNYXRoLm1pbihpLHQpKX0sX29uUGFuVHJhbnNpdGlvblN0ZXA6ZnVuY3Rpb24oKXt0aGlzLmZpcmUoXCJtb3ZlXCIpfSxfb25QYW5UcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7by5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX21hcFBhbmUsXCJsZWFmbGV0LXBhbi1hbmltXCIpLHRoaXMuZmlyZShcIm1vdmVlbmRcIil9LF90cnlBbmltYXRlZFBhbjpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldENlbnRlck9mZnNldCh0KS5fZmxvb3IoKTtyZXR1cm4hKChlJiZlLmFuaW1hdGUpIT09ITAmJiF0aGlzLmdldFNpemUoKS5jb250YWlucyhpKSkmJih0aGlzLnBhbkJ5KGksZSksITApfSxfY3JlYXRlQW5pbVByb3h5OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcHJveHk9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLFwibGVhZmxldC1wcm94eSBsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIik7dGhpcy5fcGFuZXMubWFwUGFuZS5hcHBlbmRDaGlsZCh0KSx0aGlzLm9uKFwiem9vbWFuaW1cIixmdW5jdGlvbihlKXt2YXIgaT1vLkRvbVV0aWwuVFJBTlNGT1JNLG49dC5zdHlsZVtpXTtvLkRvbVV0aWwuc2V0VHJhbnNmb3JtKHQsdGhpcy5wcm9qZWN0KGUuY2VudGVyLGUuem9vbSksdGhpcy5nZXRab29tU2NhbGUoZS56b29tLDEpKSxuPT09dC5zdHlsZVtpXSYmdGhpcy5fYW5pbWF0aW5nWm9vbSYmdGhpcy5fb25ab29tVHJhbnNpdGlvbkVuZCgpfSx0aGlzKSx0aGlzLm9uKFwibG9hZCBtb3ZlZW5kXCIsZnVuY3Rpb24oKXt2YXIgZT10aGlzLmdldENlbnRlcigpLGk9dGhpcy5nZXRab29tKCk7by5Eb21VdGlsLnNldFRyYW5zZm9ybSh0LHRoaXMucHJvamVjdChlLGkpLHRoaXMuZ2V0Wm9vbVNjYWxlKGksMSkpfSx0aGlzKX0sX2NhdGNoVHJhbnNpdGlvbkVuZDpmdW5jdGlvbih0KXt0aGlzLl9hbmltYXRpbmdab29tJiZ0LnByb3BlcnR5TmFtZS5pbmRleE9mKFwidHJhbnNmb3JtXCIpPj0wJiZ0aGlzLl9vblpvb21UcmFuc2l0aW9uRW5kKCl9LF9ub3RoaW5nVG9BbmltYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2NvbnRhaW5lci5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwibGVhZmxldC16b29tLWFuaW1hdGVkXCIpLmxlbmd0aH0sX3RyeUFuaW1hdGVkWm9vbTpmdW5jdGlvbih0LGUsaSl7aWYodGhpcy5fYW5pbWF0aW5nWm9vbSlyZXR1cm4hMDtpZihpPWl8fHt9LCF0aGlzLl96b29tQW5pbWF0ZWR8fGkuYW5pbWF0ZT09PSExfHx0aGlzLl9ub3RoaW5nVG9BbmltYXRlKCl8fE1hdGguYWJzKGUtdGhpcy5fem9vbSk+dGhpcy5vcHRpb25zLnpvb21BbmltYXRpb25UaHJlc2hvbGQpcmV0dXJuITE7dmFyIG49dGhpcy5nZXRab29tU2NhbGUoZSkscz10aGlzLl9nZXRDZW50ZXJPZmZzZXQodCkuX2RpdmlkZUJ5KDEtMS9uKTtyZXR1cm4hKGkuYW5pbWF0ZSE9PSEwJiYhdGhpcy5nZXRTaXplKCkuY29udGFpbnMocykpJiYoby5VdGlsLnJlcXVlc3RBbmltRnJhbWUoZnVuY3Rpb24oKXt0aGlzLl9tb3ZlU3RhcnQoITApLl9hbmltYXRlWm9vbSh0LGUsITApfSx0aGlzKSwhMCl9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0LGUsaSxuKXtpJiYodGhpcy5fYW5pbWF0aW5nWm9vbT0hMCx0aGlzLl9hbmltYXRlVG9DZW50ZXI9dCx0aGlzLl9hbmltYXRlVG9ab29tPWUsby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX21hcFBhbmUsXCJsZWFmbGV0LXpvb20tYW5pbVwiKSksdGhpcy5maXJlKFwiem9vbWFuaW1cIix7Y2VudGVyOnQsem9vbTplLG5vVXBkYXRlOm59KSxzZXRUaW1lb3V0KG8uYmluZCh0aGlzLl9vblpvb21UcmFuc2l0aW9uRW5kLHRoaXMpLDI1MCl9LF9vblpvb21UcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0aW5nWm9vbSYmKG8uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9tYXBQYW5lLFwibGVhZmxldC16b29tLWFuaW1cIiksdGhpcy5fYW5pbWF0aW5nWm9vbT0hMSx0aGlzLl9tb3ZlKHRoaXMuX2FuaW1hdGVUb0NlbnRlcix0aGlzLl9hbmltYXRlVG9ab29tKSxvLlV0aWwucmVxdWVzdEFuaW1GcmFtZShmdW5jdGlvbigpe3RoaXMuX21vdmVFbmQoITApfSx0aGlzKSl9fSksby5tYXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uTWFwKHQsZSl9LG8uTGF5ZXI9by5FdmVudGVkLmV4dGVuZCh7b3B0aW9uczp7cGFuZTpcIm92ZXJsYXlQYW5lXCIsbm9uQnViYmxpbmdFdmVudHM6W10sYXR0cmlidXRpb246bnVsbH0sYWRkVG86ZnVuY3Rpb24odCl7cmV0dXJuIHQuYWRkTGF5ZXIodGhpcyksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVtb3ZlRnJvbSh0aGlzLl9tYXB8fHRoaXMuX21hcFRvQWRkKX0scmVtb3ZlRnJvbTpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdC5yZW1vdmVMYXllcih0aGlzKSx0aGlzfSxnZXRQYW5lOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tYXAuZ2V0UGFuZSh0P3RoaXMub3B0aW9uc1t0XXx8dDp0aGlzLm9wdGlvbnMucGFuZSl9LGFkZEludGVyYWN0aXZlVGFyZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tYXAuX3RhcmdldHNbby5zdGFtcCh0KV09dGhpcyx0aGlzfSxyZW1vdmVJbnRlcmFjdGl2ZVRhcmdldDpmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlIHRoaXMuX21hcC5fdGFyZ2V0c1tvLnN0YW1wKHQpXSx0aGlzfSxnZXRBdHRyaWJ1dGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuYXR0cmlidXRpb259LF9sYXllckFkZDpmdW5jdGlvbih0KXt2YXIgZT10LnRhcmdldDtpZihlLmhhc0xheWVyKHRoaXMpKXtpZih0aGlzLl9tYXA9ZSx0aGlzLl96b29tQW5pbWF0ZWQ9ZS5fem9vbUFuaW1hdGVkLHRoaXMuZ2V0RXZlbnRzKXt2YXIgaT10aGlzLmdldEV2ZW50cygpO2Uub24oaSx0aGlzKSx0aGlzLm9uY2UoXCJyZW1vdmVcIixmdW5jdGlvbigpe2Uub2ZmKGksdGhpcyl9LHRoaXMpfXRoaXMub25BZGQoZSksdGhpcy5nZXRBdHRyaWJ1dGlvbiYmZS5hdHRyaWJ1dGlvbkNvbnRyb2wmJmUuYXR0cmlidXRpb25Db250cm9sLmFkZEF0dHJpYnV0aW9uKHRoaXMuZ2V0QXR0cmlidXRpb24oKSksdGhpcy5maXJlKFwiYWRkXCIpLGUuZmlyZShcImxheWVyYWRkXCIse2xheWVyOnRoaXN9KX19fSksby5NYXAuaW5jbHVkZSh7YWRkTGF5ZXI6ZnVuY3Rpb24odCl7dmFyIGU9by5zdGFtcCh0KTtyZXR1cm4gdGhpcy5fbGF5ZXJzW2VdP3RoaXM6KHRoaXMuX2xheWVyc1tlXT10LHQuX21hcFRvQWRkPXRoaXMsdC5iZWZvcmVBZGQmJnQuYmVmb3JlQWRkKHRoaXMpLHRoaXMud2hlblJlYWR5KHQuX2xheWVyQWRkLHQpLHRoaXMpfSxyZW1vdmVMYXllcjpmdW5jdGlvbih0KXt2YXIgZT1vLnN0YW1wKHQpO3JldHVybiB0aGlzLl9sYXllcnNbZV0/KHRoaXMuX2xvYWRlZCYmdC5vblJlbW92ZSh0aGlzKSx0LmdldEF0dHJpYnV0aW9uJiZ0aGlzLmF0dHJpYnV0aW9uQ29udHJvbCYmdGhpcy5hdHRyaWJ1dGlvbkNvbnRyb2wucmVtb3ZlQXR0cmlidXRpb24odC5nZXRBdHRyaWJ1dGlvbigpKSxkZWxldGUgdGhpcy5fbGF5ZXJzW2VdLHRoaXMuX2xvYWRlZCYmKHRoaXMuZmlyZShcImxheWVycmVtb3ZlXCIse2xheWVyOnR9KSx0LmZpcmUoXCJyZW1vdmVcIikpLHQuX21hcD10Ll9tYXBUb0FkZD1udWxsLHRoaXMpOnRoaXN9LGhhc0xheWVyOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmby5zdGFtcCh0KWluIHRoaXMuX2xheWVyc30sZWFjaExheWVyOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIHRoaXMuX2xheWVycyl0LmNhbGwoZSx0aGlzLl9sYXllcnNbaV0pO3JldHVybiB0aGlzfSxfYWRkTGF5ZXJzOmZ1bmN0aW9uKHQpe3Q9dD9vLlV0aWwuaXNBcnJheSh0KT90Olt0XTpbXTtmb3IodmFyIGU9MCxpPXQubGVuZ3RoO2U8aTtlKyspdGhpcy5hZGRMYXllcih0W2VdKX0sX2FkZFpvb21MaW1pdDpmdW5jdGlvbih0KXshaXNOYU4odC5vcHRpb25zLm1heFpvb20pJiZpc05hTih0Lm9wdGlvbnMubWluWm9vbSl8fCh0aGlzLl96b29tQm91bmRMYXllcnNbby5zdGFtcCh0KV09dCx0aGlzLl91cGRhdGVab29tTGV2ZWxzKCkpfSxfcmVtb3ZlWm9vbUxpbWl0OmZ1bmN0aW9uKHQpe3ZhciBlPW8uc3RhbXAodCk7dGhpcy5fem9vbUJvdW5kTGF5ZXJzW2VdJiYoZGVsZXRlIHRoaXMuX3pvb21Cb3VuZExheWVyc1tlXSx0aGlzLl91cGRhdGVab29tTGV2ZWxzKCkpfSxfdXBkYXRlWm9vbUxldmVsczpmdW5jdGlvbigpe3ZhciB0PTEvMCxlPS0oMS8wKSxuPXRoaXMuX2dldFpvb21TcGFuKCk7Zm9yKHZhciBvIGluIHRoaXMuX3pvb21Cb3VuZExheWVycyl7dmFyIHM9dGhpcy5fem9vbUJvdW5kTGF5ZXJzW29dLm9wdGlvbnM7dD1zLm1pblpvb209PT1pP3Q6TWF0aC5taW4odCxzLm1pblpvb20pLGU9cy5tYXhab29tPT09aT9lOk1hdGgubWF4KGUscy5tYXhab29tKX10aGlzLl9sYXllcnNNYXhab29tPWU9PT0tKDEvMCk/aTplLHRoaXMuX2xheWVyc01pblpvb209dD09PTEvMD9pOnQsbiE9PXRoaXMuX2dldFpvb21TcGFuKCkmJnRoaXMuZmlyZShcInpvb21sZXZlbHNjaGFuZ2VcIiksdGhpcy5vcHRpb25zLm1heFpvb209PT1pJiZ0aGlzLl9sYXllcnNNYXhab29tJiZ0aGlzLmdldFpvb20oKT50aGlzLl9sYXllcnNNYXhab29tJiZ0aGlzLnNldFpvb20odGhpcy5fbGF5ZXJzTWF4Wm9vbSksdGhpcy5vcHRpb25zLm1pblpvb209PT1pJiZ0aGlzLl9sYXllcnNNaW5ab29tJiZ0aGlzLmdldFpvb20oKTx0aGlzLl9sYXllcnNNaW5ab29tJiZ0aGlzLnNldFpvb20odGhpcy5fbGF5ZXJzTWluWm9vbSl9fSk7dmFyIHI9XCJfbGVhZmxldF9ldmVudHNcIjtvLkRvbUV2ZW50PXtvbjpmdW5jdGlvbih0LGUsaSxuKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSlmb3IodmFyIHMgaW4gZSl0aGlzLl9vbih0LHMsZVtzXSxpKTtlbHNle2U9by5VdGlsLnNwbGl0V29yZHMoZSk7Zm9yKHZhciByPTAsYT1lLmxlbmd0aDtyPGE7cisrKXRoaXMuX29uKHQsZVtyXSxpLG4pfXJldHVybiB0aGlzfSxvZmY6ZnVuY3Rpb24odCxlLGksbil7aWYoXCJvYmplY3RcIj09dHlwZW9mIGUpZm9yKHZhciBzIGluIGUpdGhpcy5fb2ZmKHQscyxlW3NdLGkpO2Vsc2V7ZT1vLlV0aWwuc3BsaXRXb3JkcyhlKTtmb3IodmFyIHI9MCxhPWUubGVuZ3RoO3I8YTtyKyspdGhpcy5fb2ZmKHQsZVtyXSxpLG4pfXJldHVybiB0aGlzfSxfb246ZnVuY3Rpb24oZSxpLG4scyl7dmFyIGE9aStvLnN0YW1wKG4pKyhzP1wiX1wiK28uc3RhbXAocyk6XCJcIik7aWYoZVtyXSYmZVtyXVthXSlyZXR1cm4gdGhpczt2YXIgaD1mdW5jdGlvbihpKXtyZXR1cm4gbi5jYWxsKHN8fGUsaXx8dC5ldmVudCl9LGw9aDtyZXR1cm4gby5Ccm93c2VyLnBvaW50ZXImJjA9PT1pLmluZGV4T2YoXCJ0b3VjaFwiKT90aGlzLmFkZFBvaW50ZXJMaXN0ZW5lcihlLGksaCxhKTohby5Ccm93c2VyLnRvdWNofHxcImRibGNsaWNrXCIhPT1pfHwhdGhpcy5hZGREb3VibGVUYXBMaXN0ZW5lcnx8by5Ccm93c2VyLnBvaW50ZXImJm8uQnJvd3Nlci5jaHJvbWU/XCJhZGRFdmVudExpc3RlbmVyXCJpbiBlP1wibW91c2V3aGVlbFwiPT09aT9lLmFkZEV2ZW50TGlzdGVuZXIoXCJvbndoZWVsXCJpbiBlP1wid2hlZWxcIjpcIm1vdXNld2hlZWxcIixoLCExKTpcIm1vdXNlZW50ZXJcIj09PWl8fFwibW91c2VsZWF2ZVwiPT09aT8oaD1mdW5jdGlvbihpKXtpPWl8fHQuZXZlbnQsby5Eb21FdmVudC5faXNFeHRlcm5hbFRhcmdldChlLGkpJiZsKGkpfSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCI9PT1pP1wibW91c2VvdmVyXCI6XCJtb3VzZW91dFwiLGgsITEpKTooXCJjbGlja1wiPT09aSYmby5Ccm93c2VyLmFuZHJvaWQmJihoPWZ1bmN0aW9uKHQpe3JldHVybiBvLkRvbUV2ZW50Ll9maWx0ZXJDbGljayh0LGwpfSksZS5hZGRFdmVudExpc3RlbmVyKGksaCwhMSkpOlwiYXR0YWNoRXZlbnRcImluIGUmJmUuYXR0YWNoRXZlbnQoXCJvblwiK2ksaCk6dGhpcy5hZGREb3VibGVUYXBMaXN0ZW5lcihlLGgsYSksZVtyXT1lW3JdfHx7fSxlW3JdW2FdPWgsdGhpc30sX29mZjpmdW5jdGlvbih0LGUsaSxuKXt2YXIgcz1lK28uc3RhbXAoaSkrKG4/XCJfXCIrby5zdGFtcChuKTpcIlwiKSxhPXRbcl0mJnRbcl1bc107cmV0dXJuIGE/KG8uQnJvd3Nlci5wb2ludGVyJiYwPT09ZS5pbmRleE9mKFwidG91Y2hcIik/dGhpcy5yZW1vdmVQb2ludGVyTGlzdGVuZXIodCxlLHMpOm8uQnJvd3Nlci50b3VjaCYmXCJkYmxjbGlja1wiPT09ZSYmdGhpcy5yZW1vdmVEb3VibGVUYXBMaXN0ZW5lcj90aGlzLnJlbW92ZURvdWJsZVRhcExpc3RlbmVyKHQscyk6XCJyZW1vdmVFdmVudExpc3RlbmVyXCJpbiB0P1wibW91c2V3aGVlbFwiPT09ZT90LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbndoZWVsXCJpbiB0P1wid2hlZWxcIjpcIm1vdXNld2hlZWxcIixhLCExKTp0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCI9PT1lP1wibW91c2VvdmVyXCI6XCJtb3VzZWxlYXZlXCI9PT1lP1wibW91c2VvdXRcIjplLGEsITEpOlwiZGV0YWNoRXZlbnRcImluIHQmJnQuZGV0YWNoRXZlbnQoXCJvblwiK2UsYSksdFtyXVtzXT1udWxsLHRoaXMpOnRoaXN9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5zdG9wUHJvcGFnYXRpb24/dC5zdG9wUHJvcGFnYXRpb24oKTp0Lm9yaWdpbmFsRXZlbnQ/dC5vcmlnaW5hbEV2ZW50Ll9zdG9wcGVkPSEwOnQuY2FuY2VsQnViYmxlPSEwLG8uRG9tRXZlbnQuX3NraXBwZWQodCksdGhpc30sZGlzYWJsZVNjcm9sbFByb3BhZ2F0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiBvLkRvbUV2ZW50Lm9uKHQsXCJtb3VzZXdoZWVsXCIsby5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24pfSxkaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbjpmdW5jdGlvbih0KXt2YXIgZT1vLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbjtyZXR1cm4gby5Eb21FdmVudC5vbih0LG8uRHJhZ2dhYmxlLlNUQVJULmpvaW4oXCIgXCIpLGUpLG8uRG9tRXZlbnQub24odCx7Y2xpY2s6by5Eb21FdmVudC5fZmFrZVN0b3AsZGJsY2xpY2s6ZX0pfSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbih0KXtyZXR1cm4gdC5wcmV2ZW50RGVmYXVsdD90LnByZXZlbnREZWZhdWx0KCk6dC5yZXR1cm5WYWx1ZT0hMSx0aGlzfSxzdG9wOmZ1bmN0aW9uKHQpe3JldHVybiBvLkRvbUV2ZW50LnByZXZlbnREZWZhdWx0KHQpLnN0b3BQcm9wYWdhdGlvbih0KX0sZ2V0TW91c2VQb3NpdGlvbjpmdW5jdGlvbih0LGUpe2lmKCFlKXJldHVybiBuZXcgby5Qb2ludCh0LmNsaWVudFgsdC5jbGllbnRZKTt2YXIgaT1lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiBuZXcgby5Qb2ludCh0LmNsaWVudFgtaS5sZWZ0LWUuY2xpZW50TGVmdCx0LmNsaWVudFktaS50b3AtZS5jbGllbnRUb3ApfSxfd2hlZWxQeEZhY3RvcjpvLkJyb3dzZXIud2luJiZvLkJyb3dzZXIuY2hyb21lPzI6by5Ccm93c2VyLmdlY2tvP3QuZGV2aWNlUGl4ZWxSYXRpbzoxLGdldFdoZWVsRGVsdGE6ZnVuY3Rpb24odCl7cmV0dXJuIG8uQnJvd3Nlci5lZGdlP3Qud2hlZWxEZWx0YVkvMjp0LmRlbHRhWSYmMD09PXQuZGVsdGFNb2RlPy10LmRlbHRhWS9vLkRvbUV2ZW50Ll93aGVlbFB4RmFjdG9yOnQuZGVsdGFZJiYxPT09dC5kZWx0YU1vZGU/MjAqLXQuZGVsdGFZOnQuZGVsdGFZJiYyPT09dC5kZWx0YU1vZGU/NjAqLXQuZGVsdGFZOnQuZGVsdGFYfHx0LmRlbHRhWj8wOnQud2hlZWxEZWx0YT8odC53aGVlbERlbHRhWXx8dC53aGVlbERlbHRhKS8yOnQuZGV0YWlsJiZNYXRoLmFicyh0LmRldGFpbCk8MzI3NjU/MjAqLXQuZGV0YWlsOnQuZGV0YWlsP3QuZGV0YWlsLy0zMjc2NSo2MDowfSxfc2tpcEV2ZW50czp7fSxfZmFrZVN0b3A6ZnVuY3Rpb24odCl7by5Eb21FdmVudC5fc2tpcEV2ZW50c1t0LnR5cGVdPSEwfSxfc2tpcHBlZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9za2lwRXZlbnRzW3QudHlwZV07cmV0dXJuIHRoaXMuX3NraXBFdmVudHNbdC50eXBlXT0hMSxlfSxfaXNFeHRlcm5hbFRhcmdldDpmdW5jdGlvbih0LGUpe3ZhciBpPWUucmVsYXRlZFRhcmdldDtpZighaSlyZXR1cm4hMDt0cnl7Zm9yKDtpJiZpIT09dDspaT1pLnBhcmVudE5vZGV9Y2F0Y2godCl7cmV0dXJuITF9cmV0dXJuIGkhPT10fSxfZmlsdGVyQ2xpY2s6ZnVuY3Rpb24odCxlKXt2YXIgaT10LnRpbWVTdGFtcHx8dC5vcmlnaW5hbEV2ZW50JiZ0Lm9yaWdpbmFsRXZlbnQudGltZVN0YW1wLG49by5Eb21FdmVudC5fbGFzdENsaWNrJiZpLW8uRG9tRXZlbnQuX2xhc3RDbGljaztyZXR1cm4gbiYmbj4xMDAmJm48NTAwfHx0LnRhcmdldC5fc2ltdWxhdGVkQ2xpY2smJiF0Ll9zaW11bGF0ZWQ/dm9pZCBvLkRvbUV2ZW50LnN0b3AodCk6KG8uRG9tRXZlbnQuX2xhc3RDbGljaz1pLHZvaWQgZSh0KSl9fSxvLkRvbUV2ZW50LmFkZExpc3RlbmVyPW8uRG9tRXZlbnQub24sby5Eb21FdmVudC5yZW1vdmVMaXN0ZW5lcj1vLkRvbUV2ZW50Lm9mZixvLlBvc0FuaW1hdGlvbj1vLkV2ZW50ZWQuZXh0ZW5kKHtydW46ZnVuY3Rpb24odCxlLGksbil7dGhpcy5zdG9wKCksdGhpcy5fZWw9dCx0aGlzLl9pblByb2dyZXNzPSEwLHRoaXMuX2R1cmF0aW9uPWl8fC4yNSx0aGlzLl9lYXNlT3V0UG93ZXI9MS9NYXRoLm1heChufHwuNSwuMiksdGhpcy5fc3RhcnRQb3M9by5Eb21VdGlsLmdldFBvc2l0aW9uKHQpLHRoaXMuX29mZnNldD1lLnN1YnRyYWN0KHRoaXMuX3N0YXJ0UG9zKSx0aGlzLl9zdGFydFRpbWU9K25ldyBEYXRlLHRoaXMuZmlyZShcInN0YXJ0XCIpLHRoaXMuX2FuaW1hdGUoKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuX2luUHJvZ3Jlc3MmJih0aGlzLl9zdGVwKCEwKSx0aGlzLl9jb21wbGV0ZSgpKX0sX2FuaW1hdGU6ZnVuY3Rpb24oKXt0aGlzLl9hbmltSWQ9by5VdGlsLnJlcXVlc3RBbmltRnJhbWUodGhpcy5fYW5pbWF0ZSx0aGlzKSx0aGlzLl9zdGVwKCl9LF9zdGVwOmZ1bmN0aW9uKHQpe3ZhciBlPStuZXcgRGF0ZS10aGlzLl9zdGFydFRpbWUsaT0xZTMqdGhpcy5fZHVyYXRpb247ZTxpP3RoaXMuX3J1bkZyYW1lKHRoaXMuX2Vhc2VPdXQoZS9pKSx0KToodGhpcy5fcnVuRnJhbWUoMSksdGhpcy5fY29tcGxldGUoKSl9LF9ydW5GcmFtZTpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX3N0YXJ0UG9zLmFkZCh0aGlzLl9vZmZzZXQubXVsdGlwbHlCeSh0KSk7ZSYmaS5fcm91bmQoKSxvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fZWwsaSksdGhpcy5maXJlKFwic3RlcFwiKX0sX2NvbXBsZXRlOmZ1bmN0aW9uKCl7by5VdGlsLmNhbmNlbEFuaW1GcmFtZSh0aGlzLl9hbmltSWQpLHRoaXMuX2luUHJvZ3Jlc3M9ITEsdGhpcy5maXJlKFwiZW5kXCIpfSxfZWFzZU91dDpmdW5jdGlvbih0KXtyZXR1cm4gMS1NYXRoLnBvdygxLXQsdGhpcy5fZWFzZU91dFBvd2VyKX19KSxvLlByb2plY3Rpb24uTWVyY2F0b3I9e1I6NjM3ODEzNyxSX01JTk9SOjYzNTY3NTIuMzE0MjQ1MTc5LGJvdW5kczpvLmJvdW5kcyhbLTIwMDM3NTA4LjM0Mjc5LC0xNTQ5NjU3MC43Mzk3Ml0sWzIwMDM3NTA4LjM0Mjc5LDE4NzY0NjU2LjIzMTM4XSkscHJvamVjdDpmdW5jdGlvbih0KXt2YXIgZT1NYXRoLlBJLzE4MCxpPXRoaXMuUixuPXQubGF0KmUscz10aGlzLlJfTUlOT1IvaSxyPU1hdGguc3FydCgxLXMqcyksYT1yKk1hdGguc2luKG4pLGg9TWF0aC50YW4oTWF0aC5QSS80LW4vMikvTWF0aC5wb3coKDEtYSkvKDErYSksci8yKTtyZXR1cm4gbj0taSpNYXRoLmxvZyhNYXRoLm1heChoLDFlLTEwKSksbmV3IG8uUG9pbnQodC5sbmcqZSppLG4pfSx1bnByb2plY3Q6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGk9MTgwL01hdGguUEksbj10aGlzLlIscz10aGlzLlJfTUlOT1IvbixyPU1hdGguc3FydCgxLXMqcyksYT1NYXRoLmV4cCgtdC55L24pLGg9TWF0aC5QSS8yLTIqTWF0aC5hdGFuKGEpLGw9MCx1PS4xO2w8MTUmJk1hdGguYWJzKHUpPjFlLTc7bCsrKWU9cipNYXRoLnNpbihoKSxlPU1hdGgucG93KCgxLWUpLygxK2UpLHIvMiksdT1NYXRoLlBJLzItMipNYXRoLmF0YW4oYSplKS1oLGgrPXU7cmV0dXJuIG5ldyBvLkxhdExuZyhoKmksdC54Kmkvbil9fSxvLkNSUy5FUFNHMzM5NT1vLmV4dGVuZCh7fSxvLkNSUy5FYXJ0aCx7Y29kZTpcIkVQU0c6MzM5NVwiLHByb2plY3Rpb246by5Qcm9qZWN0aW9uLk1lcmNhdG9yLHRyYW5zZm9ybWF0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9LjUvKE1hdGguUEkqby5Qcm9qZWN0aW9uLk1lcmNhdG9yLlIpO3JldHVybiBuZXcgby5UcmFuc2Zvcm1hdGlvbih0LC41LC10LC41KX0oKX0pLG8uR3JpZExheWVyPW8uTGF5ZXIuZXh0ZW5kKHtvcHRpb25zOnt0aWxlU2l6ZToyNTYsb3BhY2l0eToxLHVwZGF0ZVdoZW5JZGxlOm8uQnJvd3Nlci5tb2JpbGUsdXBkYXRlV2hlblpvb21pbmc6ITAsdXBkYXRlSW50ZXJ2YWw6MjAwLHpJbmRleDoxLGJvdW5kczpudWxsLG1pblpvb206MCxtYXhab29tOmksbm9XcmFwOiExLHBhbmU6XCJ0aWxlUGFuZVwiLGNsYXNzTmFtZTpcIlwiLGtlZXBCdWZmZXI6Mn0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtvLnNldE9wdGlvbnModGhpcyx0KX0sb25BZGQ6ZnVuY3Rpb24oKXt0aGlzLl9pbml0Q29udGFpbmVyKCksdGhpcy5fbGV2ZWxzPXt9LHRoaXMuX3RpbGVzPXt9LHRoaXMuX3Jlc2V0VmlldygpLHRoaXMuX3VwZGF0ZSgpfSxiZWZvcmVBZGQ6ZnVuY3Rpb24odCl7dC5fYWRkWm9vbUxpbWl0KHRoaXMpfSxvblJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLl9yZW1vdmVBbGxUaWxlcygpLG8uRG9tVXRpbC5yZW1vdmUodGhpcy5fY29udGFpbmVyKSx0Ll9yZW1vdmVab29tTGltaXQodGhpcyksdGhpcy5fY29udGFpbmVyPW51bGwsdGhpcy5fdGlsZVpvb209bnVsbH0sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmKG8uRG9tVXRpbC50b0Zyb250KHRoaXMuX2NvbnRhaW5lciksdGhpcy5fc2V0QXV0b1pJbmRleChNYXRoLm1heCkpLHRoaXN9LGJyaW5nVG9CYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmKG8uRG9tVXRpbC50b0JhY2sodGhpcy5fY29udGFpbmVyKSx0aGlzLl9zZXRBdXRvWkluZGV4KE1hdGgubWluKSksdGhpc30sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn0sc2V0T3BhY2l0eTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLm9wYWNpdHk9dCx0aGlzLl91cGRhdGVPcGFjaXR5KCksdGhpc30sc2V0WkluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuekluZGV4PXQsdGhpcy5fdXBkYXRlWkluZGV4KCksdGhpc30saXNMb2FkaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvYWRpbmd9LHJlZHJhdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJih0aGlzLl9yZW1vdmVBbGxUaWxlcygpLHRoaXMuX3VwZGF0ZSgpKSx0aGlzfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD17dmlld3ByZXJlc2V0OnRoaXMuX2ludmFsaWRhdGVBbGwsdmlld3Jlc2V0OnRoaXMuX3Jlc2V0Vmlldyx6b29tOnRoaXMuX3Jlc2V0Vmlldyxtb3ZlZW5kOnRoaXMuX29uTW92ZUVuZH07cmV0dXJuIHRoaXMub3B0aW9ucy51cGRhdGVXaGVuSWRsZXx8KHRoaXMuX29uTW92ZXx8KHRoaXMuX29uTW92ZT1vLlV0aWwudGhyb3R0bGUodGhpcy5fb25Nb3ZlRW5kLHRoaXMub3B0aW9ucy51cGRhdGVJbnRlcnZhbCx0aGlzKSksdC5tb3ZlPXRoaXMuX29uTW92ZSksdGhpcy5fem9vbUFuaW1hdGVkJiYodC56b29tYW5pbT10aGlzLl9hbmltYXRlWm9vbSksdH0sY3JlYXRlVGlsZTpmdW5jdGlvbigpe3JldHVybiBlLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIil9LGdldFRpbGVTaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnRpbGVTaXplO3JldHVybiB0IGluc3RhbmNlb2Ygby5Qb2ludD90Om5ldyBvLlBvaW50KHQsdCl9LF91cGRhdGVaSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXImJnRoaXMub3B0aW9ucy56SW5kZXghPT1pJiZudWxsIT09dGhpcy5vcHRpb25zLnpJbmRleCYmKHRoaXMuX2NvbnRhaW5lci5zdHlsZS56SW5kZXg9dGhpcy5vcHRpb25zLnpJbmRleCl9LF9zZXRBdXRvWkluZGV4OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpPXRoaXMuZ2V0UGFuZSgpLmNoaWxkcmVuLG49LXQoLSgxLzApLDEvMCksbz0wLHM9aS5sZW5ndGg7bzxzO28rKyllPWlbb10uc3R5bGUuekluZGV4LGlbb10hPT10aGlzLl9jb250YWluZXImJmUmJihuPXQobiwrZSkpO2lzRmluaXRlKG4pJiYodGhpcy5vcHRpb25zLnpJbmRleD1uK3QoLTEsMSksdGhpcy5fdXBkYXRlWkluZGV4KCkpfSxfdXBkYXRlT3BhY2l0eTpmdW5jdGlvbigpe2lmKHRoaXMuX21hcCYmIW8uQnJvd3Nlci5pZWx0OSl7by5Eb21VdGlsLnNldE9wYWNpdHkodGhpcy5fY29udGFpbmVyLHRoaXMub3B0aW9ucy5vcGFjaXR5KTt2YXIgdD0rbmV3IERhdGUsZT0hMSxpPSExO2Zvcih2YXIgbiBpbiB0aGlzLl90aWxlcyl7dmFyIHM9dGhpcy5fdGlsZXNbbl07aWYocy5jdXJyZW50JiZzLmxvYWRlZCl7dmFyIHI9TWF0aC5taW4oMSwodC1zLmxvYWRlZCkvMjAwKTtvLkRvbVV0aWwuc2V0T3BhY2l0eShzLmVsLHIpLHI8MT9lPSEwOihzLmFjdGl2ZSYmKGk9ITApLHMuYWN0aXZlPSEwKX19aSYmIXRoaXMuX25vUHJ1bmUmJnRoaXMuX3BydW5lVGlsZXMoKSxlJiYoby5VdGlsLmNhbmNlbEFuaW1GcmFtZSh0aGlzLl9mYWRlRnJhbWUpLHRoaXMuX2ZhZGVGcmFtZT1vLlV0aWwucmVxdWVzdEFuaW1GcmFtZSh0aGlzLl91cGRhdGVPcGFjaXR5LHRoaXMpKX19LF9pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyfHwodGhpcy5fY29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixcImxlYWZsZXQtbGF5ZXIgXCIrKHRoaXMub3B0aW9ucy5jbGFzc05hbWV8fFwiXCIpKSx0aGlzLl91cGRhdGVaSW5kZXgoKSx0aGlzLm9wdGlvbnMub3BhY2l0eTwxJiZ0aGlzLl91cGRhdGVPcGFjaXR5KCksdGhpcy5nZXRQYW5lKCkuYXBwZW5kQ2hpbGQodGhpcy5fY29udGFpbmVyKSl9LF91cGRhdGVMZXZlbHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl90aWxlWm9vbSxlPXRoaXMub3B0aW9ucy5tYXhab29tO2lmKHQ9PT1pKXJldHVybiBpO2Zvcih2YXIgbiBpbiB0aGlzLl9sZXZlbHMpdGhpcy5fbGV2ZWxzW25dLmVsLmNoaWxkcmVuLmxlbmd0aHx8bj09PXQ/dGhpcy5fbGV2ZWxzW25dLmVsLnN0eWxlLnpJbmRleD1lLU1hdGguYWJzKHQtbik6KG8uRG9tVXRpbC5yZW1vdmUodGhpcy5fbGV2ZWxzW25dLmVsKSx0aGlzLl9yZW1vdmVUaWxlc0F0Wm9vbShuKSxkZWxldGUgdGhpcy5fbGV2ZWxzW25dKTt2YXIgcz10aGlzLl9sZXZlbHNbdF0scj10aGlzLl9tYXA7cmV0dXJuIHN8fChzPXRoaXMuX2xldmVsc1t0XT17fSxzLmVsPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixcImxlYWZsZXQtdGlsZS1jb250YWluZXIgbGVhZmxldC16b29tLWFuaW1hdGVkXCIsdGhpcy5fY29udGFpbmVyKSxzLmVsLnN0eWxlLnpJbmRleD1lLHMub3JpZ2luPXIucHJvamVjdChyLnVucHJvamVjdChyLmdldFBpeGVsT3JpZ2luKCkpLHQpLnJvdW5kKCkscy56b29tPXQsdGhpcy5fc2V0Wm9vbVRyYW5zZm9ybShzLHIuZ2V0Q2VudGVyKCksci5nZXRab29tKCkpLG8uVXRpbC5mYWxzZUZuKHMuZWwub2Zmc2V0V2lkdGgpKSx0aGlzLl9sZXZlbD1zLHN9LF9wcnVuZVRpbGVzOmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwKXt2YXIgdCxlLGk9dGhpcy5fbWFwLmdldFpvb20oKTtpZihpPnRoaXMub3B0aW9ucy5tYXhab29tfHxpPHRoaXMub3B0aW9ucy5taW5ab29tKXJldHVybiB2b2lkIHRoaXMuX3JlbW92ZUFsbFRpbGVzKCk7Zm9yKHQgaW4gdGhpcy5fdGlsZXMpZT10aGlzLl90aWxlc1t0XSxlLnJldGFpbj1lLmN1cnJlbnQ7Zm9yKHQgaW4gdGhpcy5fdGlsZXMpaWYoZT10aGlzLl90aWxlc1t0XSxlLmN1cnJlbnQmJiFlLmFjdGl2ZSl7dmFyIG49ZS5jb29yZHM7dGhpcy5fcmV0YWluUGFyZW50KG4ueCxuLnksbi56LG4uei01KXx8dGhpcy5fcmV0YWluQ2hpbGRyZW4obi54LG4ueSxuLnosbi56KzIpfWZvcih0IGluIHRoaXMuX3RpbGVzKXRoaXMuX3RpbGVzW3RdLnJldGFpbnx8dGhpcy5fcmVtb3ZlVGlsZSh0KX19LF9yZW1vdmVUaWxlc0F0Wm9vbTpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fdGlsZXMpdGhpcy5fdGlsZXNbZV0uY29vcmRzLno9PT10JiZ0aGlzLl9yZW1vdmVUaWxlKGUpfSxfcmVtb3ZlQWxsVGlsZXM6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fdGlsZXMpdGhpcy5fcmVtb3ZlVGlsZSh0KX0sX2ludmFsaWRhdGVBbGw6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fbGV2ZWxzKW8uRG9tVXRpbC5yZW1vdmUodGhpcy5fbGV2ZWxzW3RdLmVsKSxkZWxldGUgdGhpcy5fbGV2ZWxzW3RdO3RoaXMuX3JlbW92ZUFsbFRpbGVzKCksdGhpcy5fdGlsZVpvb209bnVsbH0sX3JldGFpblBhcmVudDpmdW5jdGlvbih0LGUsaSxuKXt2YXIgcz1NYXRoLmZsb29yKHQvMikscj1NYXRoLmZsb29yKGUvMiksYT1pLTEsaD1uZXcgby5Qb2ludCgrcywrcik7aC56PSthO3ZhciBsPXRoaXMuX3RpbGVDb29yZHNUb0tleShoKSx1PXRoaXMuX3RpbGVzW2xdO3JldHVybiB1JiZ1LmFjdGl2ZT8odS5yZXRhaW49ITAsITApOih1JiZ1LmxvYWRlZCYmKHUucmV0YWluPSEwKSxhPm4mJnRoaXMuX3JldGFpblBhcmVudChzLHIsYSxuKSl9LF9yZXRhaW5DaGlsZHJlbjpmdW5jdGlvbih0LGUsaSxuKXtmb3IodmFyIHM9Mip0O3M8Mip0KzI7cysrKWZvcih2YXIgcj0yKmU7cjwyKmUrMjtyKyspe3ZhciBhPW5ldyBvLlBvaW50KHMscik7YS56PWkrMTt2YXIgaD10aGlzLl90aWxlQ29vcmRzVG9LZXkoYSksbD10aGlzLl90aWxlc1toXTtsJiZsLmFjdGl2ZT9sLnJldGFpbj0hMDoobCYmbC5sb2FkZWQmJihsLnJldGFpbj0hMCksaSsxPG4mJnRoaXMuX3JldGFpbkNoaWxkcmVuKHMscixpKzEsbikpfX0sX3Jlc2V0VmlldzpmdW5jdGlvbih0KXt2YXIgZT10JiYodC5waW5jaHx8dC5mbHlUbyk7dGhpcy5fc2V0Vmlldyh0aGlzLl9tYXAuZ2V0Q2VudGVyKCksdGhpcy5fbWFwLmdldFpvb20oKSxlLGUpfSxfYW5pbWF0ZVpvb206ZnVuY3Rpb24odCl7dGhpcy5fc2V0Vmlldyh0LmNlbnRlcix0Lnpvb20sITAsdC5ub1VwZGF0ZSl9LF9zZXRWaWV3OmZ1bmN0aW9uKHQsZSxuLG8pe3ZhciBzPU1hdGgucm91bmQoZSk7KHRoaXMub3B0aW9ucy5tYXhab29tIT09aSYmcz50aGlzLm9wdGlvbnMubWF4Wm9vbXx8dGhpcy5vcHRpb25zLm1pblpvb20hPT1pJiZzPHRoaXMub3B0aW9ucy5taW5ab29tKSYmKHM9aSk7dmFyIHI9dGhpcy5vcHRpb25zLnVwZGF0ZVdoZW5ab29taW5nJiZzIT09dGhpcy5fdGlsZVpvb207byYmIXJ8fCh0aGlzLl90aWxlWm9vbT1zLHRoaXMuX2Fib3J0TG9hZGluZyYmdGhpcy5fYWJvcnRMb2FkaW5nKCksdGhpcy5fdXBkYXRlTGV2ZWxzKCksdGhpcy5fcmVzZXRHcmlkKCkscyE9PWkmJnRoaXMuX3VwZGF0ZSh0KSxufHx0aGlzLl9wcnVuZVRpbGVzKCksdGhpcy5fbm9QcnVuZT0hIW4pLHRoaXMuX3NldFpvb21UcmFuc2Zvcm1zKHQsZSl9LF9zZXRab29tVHJhbnNmb3JtczpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiB0aGlzLl9sZXZlbHMpdGhpcy5fc2V0Wm9vbVRyYW5zZm9ybSh0aGlzLl9sZXZlbHNbaV0sdCxlKX0sX3NldFpvb21UcmFuc2Zvcm06ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMuX21hcC5nZXRab29tU2NhbGUoaSx0Lnpvb20pLHM9dC5vcmlnaW4ubXVsdGlwbHlCeShuKS5zdWJ0cmFjdCh0aGlzLl9tYXAuX2dldE5ld1BpeGVsT3JpZ2luKGUsaSkpLnJvdW5kKCk7by5Ccm93c2VyLmFueTNkP28uRG9tVXRpbC5zZXRUcmFuc2Zvcm0odC5lbCxzLG4pOm8uRG9tVXRpbC5zZXRQb3NpdGlvbih0LmVsLHMpfSxfcmVzZXRHcmlkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGU9dC5vcHRpb25zLmNycyxpPXRoaXMuX3RpbGVTaXplPXRoaXMuZ2V0VGlsZVNpemUoKSxuPXRoaXMuX3RpbGVab29tLG89dGhpcy5fbWFwLmdldFBpeGVsV29ybGRCb3VuZHModGhpcy5fdGlsZVpvb20pO28mJih0aGlzLl9nbG9iYWxUaWxlUmFuZ2U9dGhpcy5fcHhCb3VuZHNUb1RpbGVSYW5nZShvKSksdGhpcy5fd3JhcFg9ZS53cmFwTG5nJiYhdGhpcy5vcHRpb25zLm5vV3JhcCYmW01hdGguZmxvb3IodC5wcm9qZWN0KFswLGUud3JhcExuZ1swXV0sbikueC9pLngpLE1hdGguY2VpbCh0LnByb2plY3QoWzAsZS53cmFwTG5nWzFdXSxuKS54L2kueSldLHRoaXMuX3dyYXBZPWUud3JhcExhdCYmIXRoaXMub3B0aW9ucy5ub1dyYXAmJltNYXRoLmZsb29yKHQucHJvamVjdChbZS53cmFwTGF0WzBdLDBdLG4pLnkvaS54KSxNYXRoLmNlaWwodC5wcm9qZWN0KFtlLndyYXBMYXRbMV0sMF0sbikueS9pLnkpXX0sX29uTW92ZUVuZDpmdW5jdGlvbigpe3RoaXMuX21hcCYmIXRoaXMuX21hcC5fYW5pbWF0aW5nWm9vbSYmdGhpcy5fdXBkYXRlKCl9LF9nZXRUaWxlZFBpeGVsQm91bmRzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcCxpPWUuX2FuaW1hdGluZ1pvb20/TWF0aC5tYXgoZS5fYW5pbWF0ZVRvWm9vbSxlLmdldFpvb20oKSk6ZS5nZXRab29tKCksbj1lLmdldFpvb21TY2FsZShpLHRoaXMuX3RpbGVab29tKSxzPWUucHJvamVjdCh0LHRoaXMuX3RpbGVab29tKS5mbG9vcigpLHI9ZS5nZXRTaXplKCkuZGl2aWRlQnkoMipuKTtyZXR1cm4gbmV3IG8uQm91bmRzKHMuc3VidHJhY3Qocikscy5hZGQocikpfSxfdXBkYXRlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMuX21hcDtpZihuKXt2YXIgcz1uLmdldFpvb20oKTtpZih0PT09aSYmKHQ9bi5nZXRDZW50ZXIoKSksdGhpcy5fdGlsZVpvb20hPT1pKXt2YXIgcj10aGlzLl9nZXRUaWxlZFBpeGVsQm91bmRzKHQpLGE9dGhpcy5fcHhCb3VuZHNUb1RpbGVSYW5nZShyKSxoPWEuZ2V0Q2VudGVyKCksbD1bXSx1PXRoaXMub3B0aW9ucy5rZWVwQnVmZmVyLGM9bmV3IG8uQm91bmRzKGEuZ2V0Qm90dG9tTGVmdCgpLnN1YnRyYWN0KFt1LC11XSksYS5nZXRUb3BSaWdodCgpLmFkZChbdSwtdV0pKTtmb3IodmFyIGQgaW4gdGhpcy5fdGlsZXMpe3ZhciBfPXRoaXMuX3RpbGVzW2RdLmNvb3JkcztfLno9PT10aGlzLl90aWxlWm9vbSYmYy5jb250YWlucyhvLnBvaW50KF8ueCxfLnkpKXx8KHRoaXMuX3RpbGVzW2RdLmN1cnJlbnQ9ITEpfWlmKE1hdGguYWJzKHMtdGhpcy5fdGlsZVpvb20pPjEpcmV0dXJuIHZvaWQgdGhpcy5fc2V0Vmlldyh0LHMpO2Zvcih2YXIgbT1hLm1pbi55O208PWEubWF4Lnk7bSsrKWZvcih2YXIgcD1hLm1pbi54O3A8PWEubWF4Lng7cCsrKXt2YXIgZj1uZXcgby5Qb2ludChwLG0pO2lmKGYuej10aGlzLl90aWxlWm9vbSx0aGlzLl9pc1ZhbGlkVGlsZShmKSl7dmFyIGc9dGhpcy5fdGlsZXNbdGhpcy5fdGlsZUNvb3Jkc1RvS2V5KGYpXTtnP2cuY3VycmVudD0hMDpsLnB1c2goZil9fWlmKGwuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LmRpc3RhbmNlVG8oaCktZS5kaXN0YW5jZVRvKGgpfSksMCE9PWwubGVuZ3RoKXt0aGlzLl9sb2FkaW5nfHwodGhpcy5fbG9hZGluZz0hMCx0aGlzLmZpcmUoXCJsb2FkaW5nXCIpKTt2YXIgdj1lLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtmb3IocD0wO3A8bC5sZW5ndGg7cCsrKXRoaXMuX2FkZFRpbGUobFtwXSx2KTt0aGlzLl9sZXZlbC5lbC5hcHBlbmRDaGlsZCh2KX19fX0sX2lzVmFsaWRUaWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcC5vcHRpb25zLmNycztpZighZS5pbmZpbml0ZSl7dmFyIGk9dGhpcy5fZ2xvYmFsVGlsZVJhbmdlO2lmKCFlLndyYXBMbmcmJih0Lng8aS5taW4ueHx8dC54PmkubWF4LngpfHwhZS53cmFwTGF0JiYodC55PGkubWluLnl8fHQueT5pLm1heC55KSlyZXR1cm4hMX1pZighdGhpcy5vcHRpb25zLmJvdW5kcylyZXR1cm4hMDt2YXIgbj10aGlzLl90aWxlQ29vcmRzVG9Cb3VuZHModCk7cmV0dXJuIG8ubGF0TG5nQm91bmRzKHRoaXMub3B0aW9ucy5ib3VuZHMpLm92ZXJsYXBzKG4pfSxfa2V5VG9Cb3VuZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RpbGVDb29yZHNUb0JvdW5kcyh0aGlzLl9rZXlUb1RpbGVDb29yZHModCkpfSxfdGlsZUNvb3Jkc1RvQm91bmRzOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcCxpPXRoaXMuZ2V0VGlsZVNpemUoKSxuPXQuc2NhbGVCeShpKSxzPW4uYWRkKGkpLHI9ZS51bnByb2plY3Qobix0LnopLGE9ZS51bnByb2plY3Qocyx0LnopLGg9bmV3IG8uTGF0TG5nQm91bmRzKHIsYSk7cmV0dXJuIHRoaXMub3B0aW9ucy5ub1dyYXB8fGUud3JhcExhdExuZ0JvdW5kcyhoKSxofSxfdGlsZUNvb3Jkc1RvS2V5OmZ1bmN0aW9uKHQpe3JldHVybiB0LngrXCI6XCIrdC55K1wiOlwiK3Quen0sX2tleVRvVGlsZUNvb3JkczpmdW5jdGlvbih0KXt2YXIgZT10LnNwbGl0KFwiOlwiKSxpPW5ldyBvLlBvaW50KCtlWzBdLCtlWzFdKTtyZXR1cm4gaS56PStlWzJdLGl9LF9yZW1vdmVUaWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RpbGVzW3RdO2UmJihvLkRvbVV0aWwucmVtb3ZlKGUuZWwpLGRlbGV0ZSB0aGlzLl90aWxlc1t0XSx0aGlzLmZpcmUoXCJ0aWxldW5sb2FkXCIse3RpbGU6ZS5lbCxjb29yZHM6dGhpcy5fa2V5VG9UaWxlQ29vcmRzKHQpfSkpfSxfaW5pdFRpbGU6ZnVuY3Rpb24odCl7by5Eb21VdGlsLmFkZENsYXNzKHQsXCJsZWFmbGV0LXRpbGVcIik7dmFyIGU9dGhpcy5nZXRUaWxlU2l6ZSgpO3Quc3R5bGUud2lkdGg9ZS54K1wicHhcIix0LnN0eWxlLmhlaWdodD1lLnkrXCJweFwiLHQub25zZWxlY3RzdGFydD1vLlV0aWwuZmFsc2VGbix0Lm9ubW91c2Vtb3ZlPW8uVXRpbC5mYWxzZUZuLG8uQnJvd3Nlci5pZWx0OSYmdGhpcy5vcHRpb25zLm9wYWNpdHk8MSYmby5Eb21VdGlsLnNldE9wYWNpdHkodCx0aGlzLm9wdGlvbnMub3BhY2l0eSksby5Ccm93c2VyLmFuZHJvaWQmJiFvLkJyb3dzZXIuYW5kcm9pZDIzJiYodC5zdHlsZS5XZWJraXRCYWNrZmFjZVZpc2liaWxpdHk9XCJoaWRkZW5cIil9LF9hZGRUaWxlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZ2V0VGlsZVBvcyh0KSxuPXRoaXMuX3RpbGVDb29yZHNUb0tleSh0KSxzPXRoaXMuY3JlYXRlVGlsZSh0aGlzLl93cmFwQ29vcmRzKHQpLG8uYmluZCh0aGlzLl90aWxlUmVhZHksdGhpcyx0KSk7dGhpcy5faW5pdFRpbGUocyksdGhpcy5jcmVhdGVUaWxlLmxlbmd0aDwyJiZvLlV0aWwucmVxdWVzdEFuaW1GcmFtZShvLmJpbmQodGhpcy5fdGlsZVJlYWR5LHRoaXMsdCxudWxsLHMpKSxvLkRvbVV0aWwuc2V0UG9zaXRpb24ocyxpKSx0aGlzLl90aWxlc1tuXT17ZWw6cyxjb29yZHM6dCxjdXJyZW50OiEwfSxlLmFwcGVuZENoaWxkKHMpLHRoaXMuZmlyZShcInRpbGVsb2Fkc3RhcnRcIix7dGlsZTpzLGNvb3Jkczp0fSl9LF90aWxlUmVhZHk6ZnVuY3Rpb24odCxlLGkpe2lmKHRoaXMuX21hcCl7ZSYmdGhpcy5maXJlKFwidGlsZWVycm9yXCIse2Vycm9yOmUsdGlsZTppLGNvb3Jkczp0fSk7dmFyIG49dGhpcy5fdGlsZUNvb3Jkc1RvS2V5KHQpO2k9dGhpcy5fdGlsZXNbbl0saSYmKGkubG9hZGVkPStuZXcgRGF0ZSx0aGlzLl9tYXAuX2ZhZGVBbmltYXRlZD8oby5Eb21VdGlsLnNldE9wYWNpdHkoaS5lbCwwKSxvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2ZhZGVGcmFtZSksdGhpcy5fZmFkZUZyYW1lPW8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKHRoaXMuX3VwZGF0ZU9wYWNpdHksdGhpcykpOihpLmFjdGl2ZT0hMCx0aGlzLl9wcnVuZVRpbGVzKCkpLGV8fChvLkRvbVV0aWwuYWRkQ2xhc3MoaS5lbCxcImxlYWZsZXQtdGlsZS1sb2FkZWRcIiksdGhpcy5maXJlKFwidGlsZWxvYWRcIix7dGlsZTppLmVsLGNvb3Jkczp0fSkpLHRoaXMuX25vVGlsZXNUb0xvYWQoKSYmKHRoaXMuX2xvYWRpbmc9ITEsdGhpcy5maXJlKFwibG9hZFwiKSxvLkJyb3dzZXIuaWVsdDl8fCF0aGlzLl9tYXAuX2ZhZGVBbmltYXRlZD9vLlV0aWwucmVxdWVzdEFuaW1GcmFtZSh0aGlzLl9wcnVuZVRpbGVzLHRoaXMpOnNldFRpbWVvdXQoby5iaW5kKHRoaXMuX3BydW5lVGlsZXMsdGhpcyksMjUwKSkpfX0sX2dldFRpbGVQb3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQuc2NhbGVCeSh0aGlzLmdldFRpbGVTaXplKCkpLnN1YnRyYWN0KHRoaXMuX2xldmVsLm9yaWdpbil9LF93cmFwQ29vcmRzOmZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBvLlBvaW50KHRoaXMuX3dyYXBYP28uVXRpbC53cmFwTnVtKHQueCx0aGlzLl93cmFwWCk6dC54LHRoaXMuX3dyYXBZP28uVXRpbC53cmFwTnVtKHQueSx0aGlzLl93cmFwWSk6dC55KTtyZXR1cm4gZS56PXQueixlfSxfcHhCb3VuZHNUb1RpbGVSYW5nZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLmdldFRpbGVTaXplKCk7cmV0dXJuIG5ldyBvLkJvdW5kcyh0Lm1pbi51bnNjYWxlQnkoZSkuZmxvb3IoKSx0Lm1heC51bnNjYWxlQnkoZSkuY2VpbCgpLnN1YnRyYWN0KFsxLDFdKSl9LF9ub1RpbGVzVG9Mb2FkOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX3RpbGVzKWlmKCF0aGlzLl90aWxlc1t0XS5sb2FkZWQpcmV0dXJuITE7cmV0dXJuITB9fSksby5ncmlkTGF5ZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLkdyaWRMYXllcih0KX0sby5UaWxlTGF5ZXI9by5HcmlkTGF5ZXIuZXh0ZW5kKHtvcHRpb25zOnttaW5ab29tOjAsbWF4Wm9vbToxOCxtYXhOYXRpdmVab29tOm51bGwsbWluTmF0aXZlWm9vbTpudWxsLHN1YmRvbWFpbnM6XCJhYmNcIixlcnJvclRpbGVVcmw6XCJcIix6b29tT2Zmc2V0OjAsdG1zOiExLHpvb21SZXZlcnNlOiExLGRldGVjdFJldGluYTohMSxjcm9zc09yaWdpbjohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3VybD10LGU9by5zZXRPcHRpb25zKHRoaXMsZSksZS5kZXRlY3RSZXRpbmEmJm8uQnJvd3Nlci5yZXRpbmEmJmUubWF4Wm9vbT4wJiYoZS50aWxlU2l6ZT1NYXRoLmZsb29yKGUudGlsZVNpemUvMiksZS56b29tUmV2ZXJzZT8oZS56b29tT2Zmc2V0LS0sZS5taW5ab29tKyspOihlLnpvb21PZmZzZXQrKyxlLm1heFpvb20tLSksZS5taW5ab29tPU1hdGgubWF4KDAsZS5taW5ab29tKSksXCJzdHJpbmdcIj09dHlwZW9mIGUuc3ViZG9tYWlucyYmKGUuc3ViZG9tYWlucz1lLnN1YmRvbWFpbnMuc3BsaXQoXCJcIikpLG8uQnJvd3Nlci5hbmRyb2lkfHx0aGlzLm9uKFwidGlsZXVubG9hZFwiLHRoaXMuX29uVGlsZVJlbW92ZSl9LHNldFVybDpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl91cmw9dCxlfHx0aGlzLnJlZHJhdygpLHRoaXN9LGNyZWF0ZVRpbGU6ZnVuY3Rpb24odCxpKXt2YXIgbj1lLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7cmV0dXJuIG8uRG9tRXZlbnQub24obixcImxvYWRcIixvLmJpbmQodGhpcy5fdGlsZU9uTG9hZCx0aGlzLGksbikpLG8uRG9tRXZlbnQub24obixcImVycm9yXCIsby5iaW5kKHRoaXMuX3RpbGVPbkVycm9yLHRoaXMsaSxuKSksdGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luJiYobi5jcm9zc09yaWdpbj1cIlwiKSxuLmFsdD1cIlwiLG4uc2V0QXR0cmlidXRlKFwicm9sZVwiLFwicHJlc2VudGF0aW9uXCIpLG4uc3JjPXRoaXMuZ2V0VGlsZVVybCh0KSxufSxnZXRUaWxlVXJsOmZ1bmN0aW9uKHQpe3ZhciBlPXtyOm8uQnJvd3Nlci5yZXRpbmE/XCJAMnhcIjpcIlwiLHM6dGhpcy5fZ2V0U3ViZG9tYWluKHQpLHg6dC54LHk6dC55LHo6dGhpcy5fZ2V0Wm9vbUZvclVybCgpfTtpZih0aGlzLl9tYXAmJiF0aGlzLl9tYXAub3B0aW9ucy5jcnMuaW5maW5pdGUpe3ZhciBpPXRoaXMuX2dsb2JhbFRpbGVSYW5nZS5tYXgueS10Lnk7dGhpcy5vcHRpb25zLnRtcyYmKGUueT1pKSxlW1wiLXlcIl09aX1yZXR1cm4gby5VdGlsLnRlbXBsYXRlKHRoaXMuX3VybCxvLmV4dGVuZChlLHRoaXMub3B0aW9ucykpfSxfdGlsZU9uTG9hZDpmdW5jdGlvbih0LGUpe28uQnJvd3Nlci5pZWx0OT9zZXRUaW1lb3V0KG8uYmluZCh0LHRoaXMsbnVsbCxlKSwwKTp0KG51bGwsZSl9LF90aWxlT25FcnJvcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5vcHRpb25zLmVycm9yVGlsZVVybDtuJiZlLnNyYyE9PW4mJihlLnNyYz1uKSx0KGksZSl9LGdldFRpbGVTaXplOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGU9by5HcmlkTGF5ZXIucHJvdG90eXBlLmdldFRpbGVTaXplLmNhbGwodGhpcyksaT10aGlzLl90aWxlWm9vbSt0aGlzLm9wdGlvbnMuem9vbU9mZnNldCxuPXRoaXMub3B0aW9ucy5taW5OYXRpdmVab29tLHM9dGhpcy5vcHRpb25zLm1heE5hdGl2ZVpvb207cmV0dXJuIG51bGwhPT1uJiZpPG4/ZS5kaXZpZGVCeSh0LmdldFpvb21TY2FsZShuLGkpKS5yb3VuZCgpOm51bGwhPT1zJiZpPnM/ZS5kaXZpZGVCeSh0LmdldFpvb21TY2FsZShzLGkpKS5yb3VuZCgpOmV9LF9vblRpbGVSZW1vdmU6ZnVuY3Rpb24odCl7dC50aWxlLm9ubG9hZD1udWxsfSxfZ2V0Wm9vbUZvclVybDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3RpbGVab29tLGU9dGhpcy5vcHRpb25zLm1heFpvb20saT10aGlzLm9wdGlvbnMuem9vbVJldmVyc2Usbj10aGlzLm9wdGlvbnMuem9vbU9mZnNldCxvPXRoaXMub3B0aW9ucy5taW5OYXRpdmVab29tLHM9dGhpcy5vcHRpb25zLm1heE5hdGl2ZVpvb207cmV0dXJuIGkmJih0PWUtdCksdCs9bixudWxsIT09byYmdDxvP286bnVsbCE9PXMmJnQ+cz9zOnR9LF9nZXRTdWJkb21haW46ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5hYnModC54K3QueSkldGhpcy5vcHRpb25zLnN1YmRvbWFpbnMubGVuZ3RoO3JldHVybiB0aGlzLm9wdGlvbnMuc3ViZG9tYWluc1tlXX0sX2Fib3J0TG9hZGluZzpmdW5jdGlvbigpe3ZhciB0LGU7Zm9yKHQgaW4gdGhpcy5fdGlsZXMpdGhpcy5fdGlsZXNbdF0uY29vcmRzLnohPT10aGlzLl90aWxlWm9vbSYmKGU9dGhpcy5fdGlsZXNbdF0uZWwsZS5vbmxvYWQ9by5VdGlsLmZhbHNlRm4sZS5vbmVycm9yPW8uVXRpbC5mYWxzZUZuLGUuY29tcGxldGV8fChlLnNyYz1vLlV0aWwuZW1wdHlJbWFnZVVybCxvLkRvbVV0aWwucmVtb3ZlKGUpKSl9fSksby50aWxlTGF5ZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uVGlsZUxheWVyKHQsZSl9LG8uVGlsZUxheWVyLldNUz1vLlRpbGVMYXllci5leHRlbmQoe2RlZmF1bHRXbXNQYXJhbXM6e3NlcnZpY2U6XCJXTVNcIixyZXF1ZXN0OlwiR2V0TWFwXCIsbGF5ZXJzOlwiXCIsc3R5bGVzOlwiXCIsZm9ybWF0OlwiaW1hZ2UvanBlZ1wiLHRyYW5zcGFyZW50OiExLHZlcnNpb246XCIxLjEuMVwifSxvcHRpb25zOntjcnM6bnVsbCx1cHBlcmNhc2U6ITF9LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlKXt0aGlzLl91cmw9dDt2YXIgaT1vLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRXbXNQYXJhbXMpO2Zvcih2YXIgbiBpbiBlKW4gaW4gdGhpcy5vcHRpb25zfHwoaVtuXT1lW25dKTtlPW8uc2V0T3B0aW9ucyh0aGlzLGUpLGkud2lkdGg9aS5oZWlnaHQ9ZS50aWxlU2l6ZSooZS5kZXRlY3RSZXRpbmEmJm8uQnJvd3Nlci5yZXRpbmE/MjoxKSx0aGlzLndtc1BhcmFtcz1pfSxvbkFkZDpmdW5jdGlvbih0KXt0aGlzLl9jcnM9dGhpcy5vcHRpb25zLmNyc3x8dC5vcHRpb25zLmNycyx0aGlzLl93bXNWZXJzaW9uPXBhcnNlRmxvYXQodGhpcy53bXNQYXJhbXMudmVyc2lvbik7dmFyIGU9dGhpcy5fd21zVmVyc2lvbj49MS4zP1wiY3JzXCI6XCJzcnNcIjt0aGlzLndtc1BhcmFtc1tlXT10aGlzLl9jcnMuY29kZSxvLlRpbGVMYXllci5wcm90b3R5cGUub25BZGQuY2FsbCh0aGlzLHQpfSxnZXRUaWxlVXJsOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RpbGVDb29yZHNUb0JvdW5kcyh0KSxpPXRoaXMuX2Nycy5wcm9qZWN0KGUuZ2V0Tm9ydGhXZXN0KCkpLG49dGhpcy5fY3JzLnByb2plY3QoZS5nZXRTb3V0aEVhc3QoKSkscz0odGhpcy5fd21zVmVyc2lvbj49MS4zJiZ0aGlzLl9jcnM9PT1vLkNSUy5FUFNHNDMyNj9bbi55LGkueCxpLnksbi54XTpbaS54LG4ueSxuLngsaS55XSkuam9pbihcIixcIikscj1vLlRpbGVMYXllci5wcm90b3R5cGUuZ2V0VGlsZVVybC5jYWxsKHRoaXMsdCk7cmV0dXJuIHIrby5VdGlsLmdldFBhcmFtU3RyaW5nKHRoaXMud21zUGFyYW1zLHIsdGhpcy5vcHRpb25zLnVwcGVyY2FzZSkrKHRoaXMub3B0aW9ucy51cHBlcmNhc2U/XCImQkJPWD1cIjpcIiZiYm94PVwiKStzfSxzZXRQYXJhbXM6ZnVuY3Rpb24odCxlKXtyZXR1cm4gby5leHRlbmQodGhpcy53bXNQYXJhbXMsdCksZXx8dGhpcy5yZWRyYXcoKSx0aGlzfX0pLG8udGlsZUxheWVyLndtcz1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5UaWxlTGF5ZXIuV01TKHQsZSl9LG8uSW1hZ2VPdmVybGF5PW8uTGF5ZXIuZXh0ZW5kKHtvcHRpb25zOntvcGFjaXR5OjEsYWx0OlwiXCIsaW50ZXJhY3RpdmU6ITEsY3Jvc3NPcmlnaW46ITF9LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX3VybD10LHRoaXMuX2JvdW5kcz1vLmxhdExuZ0JvdW5kcyhlKSxvLnNldE9wdGlvbnModGhpcyxpKX0sb25BZGQ6ZnVuY3Rpb24oKXt0aGlzLl9pbWFnZXx8KHRoaXMuX2luaXRJbWFnZSgpLHRoaXMub3B0aW9ucy5vcGFjaXR5PDEmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSksdGhpcy5vcHRpb25zLmludGVyYWN0aXZlJiYoby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2ltYWdlLFwibGVhZmxldC1pbnRlcmFjdGl2ZVwiKSx0aGlzLmFkZEludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX2ltYWdlKSksdGhpcy5nZXRQYW5lKCkuYXBwZW5kQ2hpbGQodGhpcy5faW1hZ2UpLHRoaXMuX3Jlc2V0KCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKCl7by5Eb21VdGlsLnJlbW92ZSh0aGlzLl9pbWFnZSksdGhpcy5vcHRpb25zLmludGVyYWN0aXZlJiZ0aGlzLnJlbW92ZUludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX2ltYWdlKX0sc2V0T3BhY2l0eTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLm9wYWNpdHk9dCx0aGlzLl9pbWFnZSYmdGhpcy5fdXBkYXRlT3BhY2l0eSgpLHRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9wYWNpdHkmJnRoaXMuc2V0T3BhY2l0eSh0Lm9wYWNpdHkpLHRoaXN9LGJyaW5nVG9Gcm9udDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJm8uRG9tVXRpbC50b0Zyb250KHRoaXMuX2ltYWdlKSx0aGlzfSxicmluZ1RvQmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJm8uRG9tVXRpbC50b0JhY2sodGhpcy5faW1hZ2UpLHRoaXN9LHNldFVybDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdXJsPXQsdGhpcy5faW1hZ2UmJih0aGlzLl9pbWFnZS5zcmM9dCksdGhpc30sc2V0Qm91bmRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ib3VuZHM9dCx0aGlzLl9tYXAmJnRoaXMuX3Jlc2V0KCksdGhpc30sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9e3pvb206dGhpcy5fcmVzZXQsdmlld3Jlc2V0OnRoaXMuX3Jlc2V0fTtyZXR1cm4gdGhpcy5fem9vbUFuaW1hdGVkJiYodC56b29tYW5pbT10aGlzLl9hbmltYXRlWm9vbSksdH0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvdW5kc30sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbWFnZX0sX2luaXRJbWFnZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2ltYWdlPW8uRG9tVXRpbC5jcmVhdGUoXCJpbWdcIixcImxlYWZsZXQtaW1hZ2UtbGF5ZXIgXCIrKHRoaXMuX3pvb21BbmltYXRlZD9cImxlYWZsZXQtem9vbS1hbmltYXRlZFwiOlwiXCIpKTt0Lm9uc2VsZWN0c3RhcnQ9by5VdGlsLmZhbHNlRm4sdC5vbm1vdXNlbW92ZT1vLlV0aWwuZmFsc2VGbix0Lm9ubG9hZD1vLmJpbmQodGhpcy5maXJlLHRoaXMsXCJsb2FkXCIpLHRoaXMub3B0aW9ucy5jcm9zc09yaWdpbiYmKHQuY3Jvc3NPcmlnaW49XCJcIiksdC5zcmM9dGhpcy5fdXJsLHQuYWx0PXRoaXMub3B0aW9ucy5hbHR9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAuZ2V0Wm9vbVNjYWxlKHQuem9vbSksaT10aGlzLl9tYXAuX2xhdExuZ0JvdW5kc1RvTmV3TGF5ZXJCb3VuZHModGhpcy5fYm91bmRzLHQuem9vbSx0LmNlbnRlcikubWluO28uRG9tVXRpbC5zZXRUcmFuc2Zvcm0odGhpcy5faW1hZ2UsaSxlKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faW1hZ2UsZT1uZXcgby5Cb3VuZHModGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9ib3VuZHMuZ2V0Tm9ydGhXZXN0KCkpLHRoaXMuX21hcC5sYXRMbmdUb0xheWVyUG9pbnQodGhpcy5fYm91bmRzLmdldFNvdXRoRWFzdCgpKSksaT1lLmdldFNpemUoKTtcclxuby5Eb21VdGlsLnNldFBvc2l0aW9uKHQsZS5taW4pLHQuc3R5bGUud2lkdGg9aS54K1wicHhcIix0LnN0eWxlLmhlaWdodD1pLnkrXCJweFwifSxfdXBkYXRlT3BhY2l0eTpmdW5jdGlvbigpe28uRG9tVXRpbC5zZXRPcGFjaXR5KHRoaXMuX2ltYWdlLHRoaXMub3B0aW9ucy5vcGFjaXR5KX19KSxvLmltYWdlT3ZlcmxheT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIG5ldyBvLkltYWdlT3ZlcmxheSh0LGUsaSl9LG8uSWNvbj1vLkNsYXNzLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtvLnNldE9wdGlvbnModGhpcyx0KX0sY3JlYXRlSWNvbjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fY3JlYXRlSWNvbihcImljb25cIix0KX0sY3JlYXRlU2hhZG93OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jcmVhdGVJY29uKFwic2hhZG93XCIsdCl9LF9jcmVhdGVJY29uOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZ2V0SWNvblVybCh0KTtpZighaSl7aWYoXCJpY29uXCI9PT10KXRocm93IG5ldyBFcnJvcihcImljb25Vcmwgbm90IHNldCBpbiBJY29uIG9wdGlvbnMgKHNlZSB0aGUgZG9jcykuXCIpO3JldHVybiBudWxsfXZhciBuPXRoaXMuX2NyZWF0ZUltZyhpLGUmJlwiSU1HXCI9PT1lLnRhZ05hbWU/ZTpudWxsKTtyZXR1cm4gdGhpcy5fc2V0SWNvblN0eWxlcyhuLHQpLG59LF9zZXRJY29uU3R5bGVzOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5vcHRpb25zLG49aVtlK1wiU2l6ZVwiXTtcIm51bWJlclwiPT10eXBlb2YgbiYmKG49W24sbl0pO3ZhciBzPW8ucG9pbnQobikscj1vLnBvaW50KFwic2hhZG93XCI9PT1lJiZpLnNoYWRvd0FuY2hvcnx8aS5pY29uQW5jaG9yfHxzJiZzLmRpdmlkZUJ5KDIsITApKTt0LmNsYXNzTmFtZT1cImxlYWZsZXQtbWFya2VyLVwiK2UrXCIgXCIrKGkuY2xhc3NOYW1lfHxcIlwiKSxyJiYodC5zdHlsZS5tYXJnaW5MZWZ0PS1yLngrXCJweFwiLHQuc3R5bGUubWFyZ2luVG9wPS1yLnkrXCJweFwiKSxzJiYodC5zdHlsZS53aWR0aD1zLngrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PXMueStcInB4XCIpfSxfY3JlYXRlSW1nOmZ1bmN0aW9uKHQsaSl7cmV0dXJuIGk9aXx8ZS5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLGkuc3JjPXQsaX0sX2dldEljb25Vcmw6ZnVuY3Rpb24odCl7cmV0dXJuIG8uQnJvd3Nlci5yZXRpbmEmJnRoaXMub3B0aW9uc1t0K1wiUmV0aW5hVXJsXCJdfHx0aGlzLm9wdGlvbnNbdCtcIlVybFwiXX19KSxvLmljb249ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLkljb24odCl9LG8uSWNvbi5EZWZhdWx0PW8uSWNvbi5leHRlbmQoe29wdGlvbnM6e2ljb25Vcmw6XCJtYXJrZXItaWNvbi5wbmdcIixpY29uUmV0aW5hVXJsOlwibWFya2VyLWljb24tMngucG5nXCIsc2hhZG93VXJsOlwibWFya2VyLXNoYWRvdy5wbmdcIixpY29uU2l6ZTpbMjUsNDFdLGljb25BbmNob3I6WzEyLDQxXSxwb3B1cEFuY2hvcjpbMSwtMzRdLHRvb2x0aXBBbmNob3I6WzE2LC0yOF0sc2hhZG93U2l6ZTpbNDEsNDFdfSxfZ2V0SWNvblVybDpmdW5jdGlvbih0KXtyZXR1cm4gby5JY29uLkRlZmF1bHQuaW1hZ2VQYXRofHwoby5JY29uLkRlZmF1bHQuaW1hZ2VQYXRoPXRoaXMuX2RldGVjdEljb25QYXRoKCkpLCh0aGlzLm9wdGlvbnMuaW1hZ2VQYXRofHxvLkljb24uRGVmYXVsdC5pbWFnZVBhdGgpK28uSWNvbi5wcm90b3R5cGUuX2dldEljb25VcmwuY2FsbCh0aGlzLHQpfSxfZGV0ZWN0SWNvblBhdGg6ZnVuY3Rpb24oKXt2YXIgdD1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsXCJsZWFmbGV0LWRlZmF1bHQtaWNvbi1wYXRoXCIsZS5ib2R5KSxpPW8uRG9tVXRpbC5nZXRTdHlsZSh0LFwiYmFja2dyb3VuZC1pbWFnZVwiKXx8by5Eb21VdGlsLmdldFN0eWxlKHQsXCJiYWNrZ3JvdW5kSW1hZ2VcIik7cmV0dXJuIGUuYm9keS5yZW1vdmVDaGlsZCh0KSwwPT09aS5pbmRleE9mKFwidXJsXCIpP2kucmVwbGFjZSgvXnVybFxcKFtcXFwiXFwnXT8vLFwiXCIpLnJlcGxhY2UoL21hcmtlci1pY29uXFwucG5nW1xcXCJcXCddP1xcKSQvLFwiXCIpOlwiXCJ9fSksby5NYXJrZXI9by5MYXllci5leHRlbmQoe29wdGlvbnM6e2ljb246bmV3IG8uSWNvbi5EZWZhdWx0LGludGVyYWN0aXZlOiEwLGRyYWdnYWJsZTohMSxrZXlib2FyZDohMCx0aXRsZTpcIlwiLGFsdDpcIlwiLHpJbmRleE9mZnNldDowLG9wYWNpdHk6MSxyaXNlT25Ib3ZlcjohMSxyaXNlT2Zmc2V0OjI1MCxwYW5lOlwibWFya2VyUGFuZVwiLG5vbkJ1YmJsaW5nRXZlbnRzOltcImNsaWNrXCIsXCJkYmxjbGlja1wiLFwibW91c2VvdmVyXCIsXCJtb3VzZW91dFwiLFwiY29udGV4dG1lbnVcIl19LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlKXtvLnNldE9wdGlvbnModGhpcyxlKSx0aGlzLl9sYXRsbmc9by5sYXRMbmcodCl9LG9uQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX3pvb21BbmltYXRlZD10aGlzLl96b29tQW5pbWF0ZWQmJnQub3B0aW9ucy5tYXJrZXJab29tQW5pbWF0aW9uLHRoaXMuX3pvb21BbmltYXRlZCYmdC5vbihcInpvb21hbmltXCIsdGhpcy5fYW5pbWF0ZVpvb20sdGhpcyksdGhpcy5faW5pdEljb24oKSx0aGlzLnVwZGF0ZSgpfSxvblJlbW92ZTpmdW5jdGlvbih0KXt0aGlzLmRyYWdnaW5nJiZ0aGlzLmRyYWdnaW5nLmVuYWJsZWQoKSYmKHRoaXMub3B0aW9ucy5kcmFnZ2FibGU9ITAsdGhpcy5kcmFnZ2luZy5yZW1vdmVIb29rcygpKSx0aGlzLl96b29tQW5pbWF0ZWQmJnQub2ZmKFwiem9vbWFuaW1cIix0aGlzLl9hbmltYXRlWm9vbSx0aGlzKSx0aGlzLl9yZW1vdmVJY29uKCksdGhpcy5fcmVtb3ZlU2hhZG93KCl9LGdldEV2ZW50czpmdW5jdGlvbigpe3JldHVybnt6b29tOnRoaXMudXBkYXRlLHZpZXdyZXNldDp0aGlzLnVwZGF0ZX19LGdldExhdExuZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXRsbmd9LHNldExhdExuZzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sYXRsbmc7cmV0dXJuIHRoaXMuX2xhdGxuZz1vLmxhdExuZyh0KSx0aGlzLnVwZGF0ZSgpLHRoaXMuZmlyZShcIm1vdmVcIix7b2xkTGF0TG5nOmUsbGF0bG5nOnRoaXMuX2xhdGxuZ30pfSxzZXRaSW5kZXhPZmZzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy56SW5kZXhPZmZzZXQ9dCx0aGlzLnVwZGF0ZSgpfSxzZXRJY29uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuaWNvbj10LHRoaXMuX21hcCYmKHRoaXMuX2luaXRJY29uKCksdGhpcy51cGRhdGUoKSksdGhpcy5fcG9wdXAmJnRoaXMuYmluZFBvcHVwKHRoaXMuX3BvcHVwLHRoaXMuX3BvcHVwLm9wdGlvbnMpLHRoaXN9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWNvbn0sdXBkYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5faWNvbil7dmFyIHQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpLnJvdW5kKCk7dGhpcy5fc2V0UG9zKHQpfXJldHVybiB0aGlzfSxfaW5pdEljb246ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMsZT1cImxlYWZsZXQtem9vbS1cIisodGhpcy5fem9vbUFuaW1hdGVkP1wiYW5pbWF0ZWRcIjpcImhpZGVcIiksaT10Lmljb24uY3JlYXRlSWNvbih0aGlzLl9pY29uKSxuPSExO2khPT10aGlzLl9pY29uJiYodGhpcy5faWNvbiYmdGhpcy5fcmVtb3ZlSWNvbigpLG49ITAsdC50aXRsZSYmKGkudGl0bGU9dC50aXRsZSksdC5hbHQmJihpLmFsdD10LmFsdCkpLG8uRG9tVXRpbC5hZGRDbGFzcyhpLGUpLHQua2V5Ym9hcmQmJihpLnRhYkluZGV4PVwiMFwiKSx0aGlzLl9pY29uPWksdC5yaXNlT25Ib3ZlciYmdGhpcy5vbih7bW91c2VvdmVyOnRoaXMuX2JyaW5nVG9Gcm9udCxtb3VzZW91dDp0aGlzLl9yZXNldFpJbmRleH0pO3ZhciBzPXQuaWNvbi5jcmVhdGVTaGFkb3codGhpcy5fc2hhZG93KSxyPSExO3MhPT10aGlzLl9zaGFkb3cmJih0aGlzLl9yZW1vdmVTaGFkb3coKSxyPSEwKSxzJiYoby5Eb21VdGlsLmFkZENsYXNzKHMsZSkscy5hbHQ9XCJcIiksdGhpcy5fc2hhZG93PXMsdC5vcGFjaXR5PDEmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSxuJiZ0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9pY29uKSx0aGlzLl9pbml0SW50ZXJhY3Rpb24oKSxzJiZyJiZ0aGlzLmdldFBhbmUoXCJzaGFkb3dQYW5lXCIpLmFwcGVuZENoaWxkKHRoaXMuX3NoYWRvdyl9LF9yZW1vdmVJY29uOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnJpc2VPbkhvdmVyJiZ0aGlzLm9mZih7bW91c2VvdmVyOnRoaXMuX2JyaW5nVG9Gcm9udCxtb3VzZW91dDp0aGlzLl9yZXNldFpJbmRleH0pLG8uRG9tVXRpbC5yZW1vdmUodGhpcy5faWNvbiksdGhpcy5yZW1vdmVJbnRlcmFjdGl2ZVRhcmdldCh0aGlzLl9pY29uKSx0aGlzLl9pY29uPW51bGx9LF9yZW1vdmVTaGFkb3c6ZnVuY3Rpb24oKXt0aGlzLl9zaGFkb3cmJm8uRG9tVXRpbC5yZW1vdmUodGhpcy5fc2hhZG93KSx0aGlzLl9zaGFkb3c9bnVsbH0sX3NldFBvczpmdW5jdGlvbih0KXtvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5faWNvbix0KSx0aGlzLl9zaGFkb3cmJm8uRG9tVXRpbC5zZXRQb3NpdGlvbih0aGlzLl9zaGFkb3csdCksdGhpcy5fekluZGV4PXQueSt0aGlzLm9wdGlvbnMuekluZGV4T2Zmc2V0LHRoaXMuX3Jlc2V0WkluZGV4KCl9LF91cGRhdGVaSW5kZXg6ZnVuY3Rpb24odCl7dGhpcy5faWNvbi5zdHlsZS56SW5kZXg9dGhpcy5fekluZGV4K3R9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAuX2xhdExuZ1RvTmV3TGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcsdC56b29tLHQuY2VudGVyKS5yb3VuZCgpO3RoaXMuX3NldFBvcyhlKX0sX2luaXRJbnRlcmFjdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5pbnRlcmFjdGl2ZSYmKG8uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9pY29uLFwibGVhZmxldC1pbnRlcmFjdGl2ZVwiKSx0aGlzLmFkZEludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX2ljb24pLG8uSGFuZGxlci5NYXJrZXJEcmFnKSl7dmFyIHQ9dGhpcy5vcHRpb25zLmRyYWdnYWJsZTt0aGlzLmRyYWdnaW5nJiYodD10aGlzLmRyYWdnaW5nLmVuYWJsZWQoKSx0aGlzLmRyYWdnaW5nLmRpc2FibGUoKSksdGhpcy5kcmFnZ2luZz1uZXcgby5IYW5kbGVyLk1hcmtlckRyYWcodGhpcyksdCYmdGhpcy5kcmFnZ2luZy5lbmFibGUoKX19LHNldE9wYWNpdHk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5vcGFjaXR5PXQsdGhpcy5fbWFwJiZ0aGlzLl91cGRhdGVPcGFjaXR5KCksdGhpc30sX3VwZGF0ZU9wYWNpdHk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMub3BhY2l0eTtvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9pY29uLHQpLHRoaXMuX3NoYWRvdyYmby5Eb21VdGlsLnNldE9wYWNpdHkodGhpcy5fc2hhZG93LHQpfSxfYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlWkluZGV4KHRoaXMub3B0aW9ucy5yaXNlT2Zmc2V0KX0sX3Jlc2V0WkluZGV4OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlWkluZGV4KDApfSxfZ2V0UG9wdXBBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmljb24ub3B0aW9ucy5wb3B1cEFuY2hvcnx8WzAsMF19LF9nZXRUb29sdGlwQW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5pY29uLm9wdGlvbnMudG9vbHRpcEFuY2hvcnx8WzAsMF19fSksby5tYXJrZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uTWFya2VyKHQsZSl9LG8uRGl2SWNvbj1vLkljb24uZXh0ZW5kKHtvcHRpb25zOntpY29uU2l6ZTpbMTIsMTJdLGh0bWw6ITEsYmdQb3M6bnVsbCxjbGFzc05hbWU6XCJsZWFmbGV0LWRpdi1pY29uXCJ9LGNyZWF0ZUljb246ZnVuY3Rpb24odCl7dmFyIGk9dCYmXCJESVZcIj09PXQudGFnTmFtZT90OmUuY3JlYXRlRWxlbWVudChcImRpdlwiKSxuPXRoaXMub3B0aW9ucztpZihpLmlubmVySFRNTD1uLmh0bWwhPT0hMT9uLmh0bWw6XCJcIixuLmJnUG9zKXt2YXIgcz1vLnBvaW50KG4uYmdQb3MpO2kuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPS1zLngrXCJweCBcIistcy55K1wicHhcIn1yZXR1cm4gdGhpcy5fc2V0SWNvblN0eWxlcyhpLFwiaWNvblwiKSxpfSxjcmVhdGVTaGFkb3c6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH19KSxvLmRpdkljb249ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLkRpdkljb24odCl9LG8uRGl2T3ZlcmxheT1vLkxheWVyLmV4dGVuZCh7b3B0aW9uczp7b2Zmc2V0OlswLDddLGNsYXNzTmFtZTpcIlwiLHBhbmU6XCJwb3B1cFBhbmVcIn0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe28uc2V0T3B0aW9ucyh0aGlzLHQpLHRoaXMuX3NvdXJjZT1lfSxvbkFkZDpmdW5jdGlvbih0KXt0aGlzLl96b29tQW5pbWF0ZWQ9dC5fem9vbUFuaW1hdGVkLHRoaXMuX2NvbnRhaW5lcnx8dGhpcy5faW5pdExheW91dCgpLHQuX2ZhZGVBbmltYXRlZCYmby5Eb21VdGlsLnNldE9wYWNpdHkodGhpcy5fY29udGFpbmVyLDApLGNsZWFyVGltZW91dCh0aGlzLl9yZW1vdmVUaW1lb3V0KSx0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpLHRoaXMudXBkYXRlKCksdC5fZmFkZUFuaW1hdGVkJiZvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9jb250YWluZXIsMSksdGhpcy5icmluZ1RvRnJvbnQoKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7dC5fZmFkZUFuaW1hdGVkPyhvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9jb250YWluZXIsMCksdGhpcy5fcmVtb3ZlVGltZW91dD1zZXRUaW1lb3V0KG8uYmluZChvLkRvbVV0aWwucmVtb3ZlLG8uRG9tVXRpbCx0aGlzLl9jb250YWluZXIpLDIwMCkpOm8uRG9tVXRpbC5yZW1vdmUodGhpcy5fY29udGFpbmVyKX0sZ2V0TGF0TG5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ30sc2V0TGF0TG5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sYXRsbmc9by5sYXRMbmcodCksdGhpcy5fbWFwJiYodGhpcy5fdXBkYXRlUG9zaXRpb24oKSx0aGlzLl9hZGp1c3RQYW4oKSksdGhpc30sZ2V0Q29udGVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb250ZW50fSxzZXRDb250ZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jb250ZW50PXQsdGhpcy51cGRhdGUoKSx0aGlzfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn0sdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwJiYodGhpcy5fY29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIix0aGlzLl91cGRhdGVDb250ZW50KCksdGhpcy5fdXBkYXRlTGF5b3V0KCksdGhpcy5fdXBkYXRlUG9zaXRpb24oKSx0aGlzLl9jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eT1cIlwiLHRoaXMuX2FkanVzdFBhbigpKX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9e3pvb206dGhpcy5fdXBkYXRlUG9zaXRpb24sdmlld3Jlc2V0OnRoaXMuX3VwZGF0ZVBvc2l0aW9ufTtyZXR1cm4gdGhpcy5fem9vbUFuaW1hdGVkJiYodC56b29tYW5pbT10aGlzLl9hbmltYXRlWm9vbSksdH0saXNPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9tYXAmJnRoaXMuX21hcC5oYXNMYXllcih0aGlzKX0sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmby5Eb21VdGlsLnRvRnJvbnQodGhpcy5fY29udGFpbmVyKSx0aGlzfSxicmluZ1RvQmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJm8uRG9tVXRpbC50b0JhY2sodGhpcy5fY29udGFpbmVyKSx0aGlzfSxfdXBkYXRlQ29udGVudDpmdW5jdGlvbigpe2lmKHRoaXMuX2NvbnRlbnQpe3ZhciB0PXRoaXMuX2NvbnRlbnROb2RlLGU9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5fY29udGVudD90aGlzLl9jb250ZW50KHRoaXMuX3NvdXJjZXx8dGhpcyk6dGhpcy5fY29udGVudDtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl0LmlubmVySFRNTD1lO2Vsc2V7Zm9yKDt0Lmhhc0NoaWxkTm9kZXMoKTspdC5yZW1vdmVDaGlsZCh0LmZpcnN0Q2hpbGQpO3QuYXBwZW5kQ2hpbGQoZSl9dGhpcy5maXJlKFwiY29udGVudHVwZGF0ZVwiKX19LF91cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXMuX21hcCl7dmFyIHQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpLGU9by5wb2ludCh0aGlzLm9wdGlvbnMub2Zmc2V0KSxpPXRoaXMuX2dldEFuY2hvcigpO3RoaXMuX3pvb21BbmltYXRlZD9vLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fY29udGFpbmVyLHQuYWRkKGkpKTplPWUuYWRkKHQpLmFkZChpKTt2YXIgbj10aGlzLl9jb250YWluZXJCb3R0b209LWUueSxzPXRoaXMuX2NvbnRhaW5lckxlZnQ9LU1hdGgucm91bmQodGhpcy5fY29udGFpbmVyV2lkdGgvMikrZS54O3RoaXMuX2NvbnRhaW5lci5zdHlsZS5ib3R0b209bitcInB4XCIsdGhpcy5fY29udGFpbmVyLnN0eWxlLmxlZnQ9cytcInB4XCJ9fSxfZ2V0QW5jaG9yOmZ1bmN0aW9uKCl7cmV0dXJuWzAsMF19fSksby5Qb3B1cD1vLkRpdk92ZXJsYXkuZXh0ZW5kKHtvcHRpb25zOnttYXhXaWR0aDozMDAsbWluV2lkdGg6NTAsbWF4SGVpZ2h0Om51bGwsYXV0b1BhbjohMCxhdXRvUGFuUGFkZGluZ1RvcExlZnQ6bnVsbCxhdXRvUGFuUGFkZGluZ0JvdHRvbVJpZ2h0Om51bGwsYXV0b1BhblBhZGRpbmc6WzUsNV0sa2VlcEluVmlldzohMSxjbG9zZUJ1dHRvbjohMCxhdXRvQ2xvc2U6ITAsY2xhc3NOYW1lOlwiXCJ9LG9wZW5PbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5vcGVuUG9wdXAodGhpcyksdGhpc30sb25BZGQ6ZnVuY3Rpb24odCl7by5EaXZPdmVybGF5LnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMsdCksdC5maXJlKFwicG9wdXBvcGVuXCIse3BvcHVwOnRoaXN9KSx0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2UuZmlyZShcInBvcHVwb3BlblwiLHtwb3B1cDp0aGlzfSwhMCksdGhpcy5fc291cmNlIGluc3RhbmNlb2Ygby5QYXRofHx0aGlzLl9zb3VyY2Uub24oXCJwcmVjbGlja1wiLG8uRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKSl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe28uRGl2T3ZlcmxheS5wcm90b3R5cGUub25SZW1vdmUuY2FsbCh0aGlzLHQpLHQuZmlyZShcInBvcHVwY2xvc2VcIix7cG9wdXA6dGhpc30pLHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5maXJlKFwicG9wdXBjbG9zZVwiLHtwb3B1cDp0aGlzfSwhMCksdGhpcy5fc291cmNlIGluc3RhbmNlb2Ygby5QYXRofHx0aGlzLl9zb3VyY2Uub2ZmKFwicHJlY2xpY2tcIixvLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbikpfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD1vLkRpdk92ZXJsYXkucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybihcImNsb3NlT25DbGlja1wiaW4gdGhpcy5vcHRpb25zP3RoaXMub3B0aW9ucy5jbG9zZU9uQ2xpY2s6dGhpcy5fbWFwLm9wdGlvbnMuY2xvc2VQb3B1cE9uQ2xpY2spJiYodC5wcmVjbGljaz10aGlzLl9jbG9zZSksdGhpcy5vcHRpb25zLmtlZXBJblZpZXcmJih0Lm1vdmVlbmQ9dGhpcy5fYWRqdXN0UGFuKSx0fSxfY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLl9tYXAmJnRoaXMuX21hcC5jbG9zZVBvcHVwKHRoaXMpfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3ZhciB0PVwibGVhZmxldC1wb3B1cFwiLGU9dGhpcy5fY29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiIFwiKyh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lfHxcIlwiKStcIiBsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIik7aWYodGhpcy5vcHRpb25zLmNsb3NlQnV0dG9uKXt2YXIgaT10aGlzLl9jbG9zZUJ1dHRvbj1vLkRvbVV0aWwuY3JlYXRlKFwiYVwiLHQrXCItY2xvc2UtYnV0dG9uXCIsZSk7aS5ocmVmPVwiI2Nsb3NlXCIsaS5pbm5lckhUTUw9XCImIzIxNTtcIixvLkRvbUV2ZW50Lm9uKGksXCJjbGlja1wiLHRoaXMuX29uQ2xvc2VCdXR0b25DbGljayx0aGlzKX12YXIgbj10aGlzLl93cmFwcGVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiLWNvbnRlbnQtd3JhcHBlclwiLGUpO3RoaXMuX2NvbnRlbnROb2RlPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiLWNvbnRlbnRcIixuKSxvLkRvbUV2ZW50LmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uKG4pLmRpc2FibGVTY3JvbGxQcm9wYWdhdGlvbih0aGlzLl9jb250ZW50Tm9kZSkub24obixcImNvbnRleHRtZW51XCIsby5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24pLHRoaXMuX3RpcENvbnRhaW5lcj1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsdCtcIi10aXAtY29udGFpbmVyXCIsZSksdGhpcy5fdGlwPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiLXRpcFwiLHRoaXMuX3RpcENvbnRhaW5lcil9LF91cGRhdGVMYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250ZW50Tm9kZSxlPXQuc3R5bGU7ZS53aWR0aD1cIlwiLGUud2hpdGVTcGFjZT1cIm5vd3JhcFwiO3ZhciBpPXQub2Zmc2V0V2lkdGg7aT1NYXRoLm1pbihpLHRoaXMub3B0aW9ucy5tYXhXaWR0aCksaT1NYXRoLm1heChpLHRoaXMub3B0aW9ucy5taW5XaWR0aCksZS53aWR0aD1pKzErXCJweFwiLGUud2hpdGVTcGFjZT1cIlwiLGUuaGVpZ2h0PVwiXCI7dmFyIG49dC5vZmZzZXRIZWlnaHQscz10aGlzLm9wdGlvbnMubWF4SGVpZ2h0LHI9XCJsZWFmbGV0LXBvcHVwLXNjcm9sbGVkXCI7cyYmbj5zPyhlLmhlaWdodD1zK1wicHhcIixvLkRvbVV0aWwuYWRkQ2xhc3ModCxyKSk6by5Eb21VdGlsLnJlbW92ZUNsYXNzKHQsciksdGhpcy5fY29udGFpbmVyV2lkdGg9dGhpcy5fY29udGFpbmVyLm9mZnNldFdpZHRofSxfYW5pbWF0ZVpvb206ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLl9sYXRMbmdUb05ld0xheWVyUG9pbnQodGhpcy5fbGF0bG5nLHQuem9vbSx0LmNlbnRlciksaT10aGlzLl9nZXRBbmNob3IoKTtvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fY29udGFpbmVyLGUuYWRkKGkpKX0sX2FkanVzdFBhbjpmdW5jdGlvbigpe2lmKCEoIXRoaXMub3B0aW9ucy5hdXRvUGFufHx0aGlzLl9tYXAuX3BhbkFuaW0mJnRoaXMuX21hcC5fcGFuQW5pbS5faW5Qcm9ncmVzcykpe3ZhciB0PXRoaXMuX21hcCxlPXBhcnNlSW50KG8uRG9tVXRpbC5nZXRTdHlsZSh0aGlzLl9jb250YWluZXIsXCJtYXJnaW5Cb3R0b21cIiksMTApfHwwLGk9dGhpcy5fY29udGFpbmVyLm9mZnNldEhlaWdodCtlLG49dGhpcy5fY29udGFpbmVyV2lkdGgscz1uZXcgby5Qb2ludCh0aGlzLl9jb250YWluZXJMZWZ0LC1pLXRoaXMuX2NvbnRhaW5lckJvdHRvbSk7cy5fYWRkKG8uRG9tVXRpbC5nZXRQb3NpdGlvbih0aGlzLl9jb250YWluZXIpKTt2YXIgcj10LmxheWVyUG9pbnRUb0NvbnRhaW5lclBvaW50KHMpLGE9by5wb2ludCh0aGlzLm9wdGlvbnMuYXV0b1BhblBhZGRpbmcpLGg9by5wb2ludCh0aGlzLm9wdGlvbnMuYXV0b1BhblBhZGRpbmdUb3BMZWZ0fHxhKSxsPW8ucG9pbnQodGhpcy5vcHRpb25zLmF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHR8fGEpLHU9dC5nZXRTaXplKCksYz0wLGQ9MDtyLngrbitsLng+dS54JiYoYz1yLngrbi11LngrbC54KSxyLngtYy1oLng8MCYmKGM9ci54LWgueCksci55K2krbC55PnUueSYmKGQ9ci55K2ktdS55K2wueSksci55LWQtaC55PDAmJihkPXIueS1oLnkpLChjfHxkKSYmdC5maXJlKFwiYXV0b3BhbnN0YXJ0XCIpLnBhbkJ5KFtjLGRdKX19LF9vbkNsb3NlQnV0dG9uQ2xpY2s6ZnVuY3Rpb24odCl7dGhpcy5fY2xvc2UoKSxvLkRvbUV2ZW50LnN0b3AodCl9LF9nZXRBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gby5wb2ludCh0aGlzLl9zb3VyY2UmJnRoaXMuX3NvdXJjZS5fZ2V0UG9wdXBBbmNob3I/dGhpcy5fc291cmNlLl9nZXRQb3B1cEFuY2hvcigpOlswLDBdKX19KSxvLnBvcHVwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLlBvcHVwKHQsZSl9LG8uTWFwLm1lcmdlT3B0aW9ucyh7Y2xvc2VQb3B1cE9uQ2xpY2s6ITB9KSxvLk1hcC5pbmNsdWRlKHtvcGVuUG9wdXA6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0IGluc3RhbmNlb2Ygby5Qb3B1cHx8KHQ9bmV3IG8uUG9wdXAoaSkuc2V0Q29udGVudCh0KSksZSYmdC5zZXRMYXRMbmcoZSksdGhpcy5oYXNMYXllcih0KT90aGlzOih0aGlzLl9wb3B1cCYmdGhpcy5fcG9wdXAub3B0aW9ucy5hdXRvQ2xvc2UmJnRoaXMuY2xvc2VQb3B1cCgpLHRoaXMuX3BvcHVwPXQsdGhpcy5hZGRMYXllcih0KSl9LGNsb3NlUG9wdXA6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnQhPT10aGlzLl9wb3B1cHx8KHQ9dGhpcy5fcG9wdXAsdGhpcy5fcG9wdXA9bnVsbCksdCYmdGhpcy5yZW1vdmVMYXllcih0KSx0aGlzfX0pLG8uTGF5ZXIuaW5jbHVkZSh7YmluZFBvcHVwOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBvLlBvcHVwPyhvLnNldE9wdGlvbnModCxlKSx0aGlzLl9wb3B1cD10LHQuX3NvdXJjZT10aGlzKToodGhpcy5fcG9wdXAmJiFlfHwodGhpcy5fcG9wdXA9bmV3IG8uUG9wdXAoZSx0aGlzKSksdGhpcy5fcG9wdXAuc2V0Q29udGVudCh0KSksdGhpcy5fcG9wdXBIYW5kbGVyc0FkZGVkfHwodGhpcy5vbih7Y2xpY2s6dGhpcy5fb3BlblBvcHVwLHJlbW92ZTp0aGlzLmNsb3NlUG9wdXAsbW92ZTp0aGlzLl9tb3ZlUG9wdXB9KSx0aGlzLl9wb3B1cEhhbmRsZXJzQWRkZWQ9ITApLHRoaXN9LHVuYmluZFBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVwJiYodGhpcy5vZmYoe2NsaWNrOnRoaXMuX29wZW5Qb3B1cCxyZW1vdmU6dGhpcy5jbG9zZVBvcHVwLG1vdmU6dGhpcy5fbW92ZVBvcHVwfSksdGhpcy5fcG9wdXBIYW5kbGVyc0FkZGVkPSExLHRoaXMuX3BvcHVwPW51bGwpLHRoaXN9LG9wZW5Qb3B1cDpmdW5jdGlvbih0LGUpe2lmKHQgaW5zdGFuY2VvZiBvLkxheWVyfHwoZT10LHQ9dGhpcyksdCBpbnN0YW5jZW9mIG8uRmVhdHVyZUdyb3VwKWZvcih2YXIgaSBpbiB0aGlzLl9sYXllcnMpe3Q9dGhpcy5fbGF5ZXJzW2ldO2JyZWFrfXJldHVybiBlfHwoZT10LmdldENlbnRlcj90LmdldENlbnRlcigpOnQuZ2V0TGF0TG5nKCkpLHRoaXMuX3BvcHVwJiZ0aGlzLl9tYXAmJih0aGlzLl9wb3B1cC5fc291cmNlPXQsdGhpcy5fcG9wdXAudXBkYXRlKCksdGhpcy5fbWFwLm9wZW5Qb3B1cCh0aGlzLl9wb3B1cCxlKSksdGhpc30sY2xvc2VQb3B1cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3B1cCYmdGhpcy5fcG9wdXAuX2Nsb3NlKCksdGhpc30sdG9nZ2xlUG9wdXA6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BvcHVwJiYodGhpcy5fcG9wdXAuX21hcD90aGlzLmNsb3NlUG9wdXAoKTp0aGlzLm9wZW5Qb3B1cCh0KSksdGhpc30saXNQb3B1cE9wZW46ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3BvcHVwJiZ0aGlzLl9wb3B1cC5pc09wZW4oKX0sc2V0UG9wdXBDb250ZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wb3B1cCYmdGhpcy5fcG9wdXAuc2V0Q29udGVudCh0KSx0aGlzfSxnZXRQb3B1cDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wb3B1cH0sX29wZW5Qb3B1cDpmdW5jdGlvbih0KXt2YXIgZT10LmxheWVyfHx0LnRhcmdldDtpZih0aGlzLl9wb3B1cCYmdGhpcy5fbWFwKXJldHVybiBvLkRvbUV2ZW50LnN0b3AodCksZSBpbnN0YW5jZW9mIG8uUGF0aD92b2lkIHRoaXMub3BlblBvcHVwKHQubGF5ZXJ8fHQudGFyZ2V0LHQubGF0bG5nKTp2b2lkKHRoaXMuX21hcC5oYXNMYXllcih0aGlzLl9wb3B1cCkmJnRoaXMuX3BvcHVwLl9zb3VyY2U9PT1lP3RoaXMuY2xvc2VQb3B1cCgpOnRoaXMub3BlblBvcHVwKGUsdC5sYXRsbmcpKX0sX21vdmVQb3B1cDpmdW5jdGlvbih0KXt0aGlzLl9wb3B1cC5zZXRMYXRMbmcodC5sYXRsbmcpfX0pLG8uVG9vbHRpcD1vLkRpdk92ZXJsYXkuZXh0ZW5kKHtvcHRpb25zOntwYW5lOlwidG9vbHRpcFBhbmVcIixvZmZzZXQ6WzAsMF0sZGlyZWN0aW9uOlwiYXV0b1wiLHBlcm1hbmVudDohMSxzdGlja3k6ITEsaW50ZXJhY3RpdmU6ITEsb3BhY2l0eTouOX0sb25BZGQ6ZnVuY3Rpb24odCl7by5EaXZPdmVybGF5LnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMsdCksdGhpcy5zZXRPcGFjaXR5KHRoaXMub3B0aW9ucy5vcGFjaXR5KSx0LmZpcmUoXCJ0b29sdGlwb3BlblwiLHt0b29sdGlwOnRoaXN9KSx0aGlzLl9zb3VyY2UmJnRoaXMuX3NvdXJjZS5maXJlKFwidG9vbHRpcG9wZW5cIix7dG9vbHRpcDp0aGlzfSwhMCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe28uRGl2T3ZlcmxheS5wcm90b3R5cGUub25SZW1vdmUuY2FsbCh0aGlzLHQpLHQuZmlyZShcInRvb2x0aXBjbG9zZVwiLHt0b29sdGlwOnRoaXN9KSx0aGlzLl9zb3VyY2UmJnRoaXMuX3NvdXJjZS5maXJlKFwidG9vbHRpcGNsb3NlXCIse3Rvb2x0aXA6dGhpc30sITApfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD1vLkRpdk92ZXJsYXkucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybiBvLkJyb3dzZXIudG91Y2gmJiF0aGlzLm9wdGlvbnMucGVybWFuZW50JiYodC5wcmVjbGljaz10aGlzLl9jbG9zZSksdH0sX2Nsb3NlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwJiZ0aGlzLl9tYXAuY2xvc2VUb29sdGlwKHRoaXMpfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3ZhciB0PVwibGVhZmxldC10b29sdGlwXCIsZT10K1wiIFwiKyh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lfHxcIlwiKStcIiBsZWFmbGV0LXpvb20tXCIrKHRoaXMuX3pvb21BbmltYXRlZD9cImFuaW1hdGVkXCI6XCJoaWRlXCIpO3RoaXMuX2NvbnRlbnROb2RlPXRoaXMuX2NvbnRhaW5lcj1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsZSl9LF91cGRhdGVMYXlvdXQ6ZnVuY3Rpb24oKXt9LF9hZGp1c3RQYW46ZnVuY3Rpb24oKXt9LF9zZXRQb3NpdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAsaT10aGlzLl9jb250YWluZXIsbj1lLmxhdExuZ1RvQ29udGFpbmVyUG9pbnQoZS5nZXRDZW50ZXIoKSkscz1lLmxheWVyUG9pbnRUb0NvbnRhaW5lclBvaW50KHQpLHI9dGhpcy5vcHRpb25zLmRpcmVjdGlvbixhPWkub2Zmc2V0V2lkdGgsaD1pLm9mZnNldEhlaWdodCxsPW8ucG9pbnQodGhpcy5vcHRpb25zLm9mZnNldCksdT10aGlzLl9nZXRBbmNob3IoKTtcInRvcFwiPT09cj90PXQuYWRkKG8ucG9pbnQoLWEvMitsLngsLWgrbC55K3UueSwhMCkpOlwiYm90dG9tXCI9PT1yP3Q9dC5zdWJ0cmFjdChvLnBvaW50KGEvMi1sLngsLWwueSwhMCkpOlwiY2VudGVyXCI9PT1yP3Q9dC5zdWJ0cmFjdChvLnBvaW50KGEvMitsLngsaC8yLXUueStsLnksITApKTpcInJpZ2h0XCI9PT1yfHxcImF1dG9cIj09PXImJnMueDxuLng/KHI9XCJyaWdodFwiLHQ9dC5hZGQoby5wb2ludChsLngrdS54LHUueS1oLzIrbC55LCEwKSkpOihyPVwibGVmdFwiLHQ9dC5zdWJ0cmFjdChvLnBvaW50KGErdS54LWwueCxoLzItdS55LWwueSwhMCkpKSxvLkRvbVV0aWwucmVtb3ZlQ2xhc3MoaSxcImxlYWZsZXQtdG9vbHRpcC1yaWdodFwiKSxvLkRvbVV0aWwucmVtb3ZlQ2xhc3MoaSxcImxlYWZsZXQtdG9vbHRpcC1sZWZ0XCIpLG8uRG9tVXRpbC5yZW1vdmVDbGFzcyhpLFwibGVhZmxldC10b29sdGlwLXRvcFwiKSxvLkRvbVV0aWwucmVtb3ZlQ2xhc3MoaSxcImxlYWZsZXQtdG9vbHRpcC1ib3R0b21cIiksby5Eb21VdGlsLmFkZENsYXNzKGksXCJsZWFmbGV0LXRvb2x0aXAtXCIrciksby5Eb21VdGlsLnNldFBvc2l0aW9uKGksdCl9LF91cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcC5sYXRMbmdUb0xheWVyUG9pbnQodGhpcy5fbGF0bG5nKTt0aGlzLl9zZXRQb3NpdGlvbih0KX0sc2V0T3BhY2l0eTpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMub3BhY2l0eT10LHRoaXMuX2NvbnRhaW5lciYmby5Eb21VdGlsLnNldE9wYWNpdHkodGhpcy5fY29udGFpbmVyLHQpfSxfYW5pbWF0ZVpvb206ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLl9sYXRMbmdUb05ld0xheWVyUG9pbnQodGhpcy5fbGF0bG5nLHQuem9vbSx0LmNlbnRlcik7dGhpcy5fc2V0UG9zaXRpb24oZSl9LF9nZXRBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gby5wb2ludCh0aGlzLl9zb3VyY2UmJnRoaXMuX3NvdXJjZS5fZ2V0VG9vbHRpcEFuY2hvciYmIXRoaXMub3B0aW9ucy5zdGlja3k/dGhpcy5fc291cmNlLl9nZXRUb29sdGlwQW5jaG9yKCk6WzAsMF0pfX0pLG8udG9vbHRpcD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5Ub29sdGlwKHQsZSl9LG8uTWFwLmluY2x1ZGUoe29wZW5Ub29sdGlwOmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdCBpbnN0YW5jZW9mIG8uVG9vbHRpcHx8KHQ9bmV3IG8uVG9vbHRpcChpKS5zZXRDb250ZW50KHQpKSxlJiZ0LnNldExhdExuZyhlKSx0aGlzLmhhc0xheWVyKHQpP3RoaXM6dGhpcy5hZGRMYXllcih0KX0sY2xvc2VUb29sdGlwOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLnJlbW92ZUxheWVyKHQpLHRoaXN9fSksby5MYXllci5pbmNsdWRlKHtiaW5kVG9vbHRpcDpmdW5jdGlvbih0LGUpe3JldHVybiB0IGluc3RhbmNlb2Ygby5Ub29sdGlwPyhvLnNldE9wdGlvbnModCxlKSx0aGlzLl90b29sdGlwPXQsdC5fc291cmNlPXRoaXMpOih0aGlzLl90b29sdGlwJiYhZXx8KHRoaXMuX3Rvb2x0aXA9by50b29sdGlwKGUsdGhpcykpLHRoaXMuX3Rvb2x0aXAuc2V0Q29udGVudCh0KSksdGhpcy5faW5pdFRvb2x0aXBJbnRlcmFjdGlvbnMoKSx0aGlzLl90b29sdGlwLm9wdGlvbnMucGVybWFuZW50JiZ0aGlzLl9tYXAmJnRoaXMuX21hcC5oYXNMYXllcih0aGlzKSYmdGhpcy5vcGVuVG9vbHRpcCgpLHRoaXN9LHVuYmluZFRvb2x0aXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9vbHRpcCYmKHRoaXMuX2luaXRUb29sdGlwSW50ZXJhY3Rpb25zKCEwKSx0aGlzLmNsb3NlVG9vbHRpcCgpLHRoaXMuX3Rvb2x0aXA9bnVsbCksdGhpc30sX2luaXRUb29sdGlwSW50ZXJhY3Rpb25zOmZ1bmN0aW9uKHQpe2lmKHR8fCF0aGlzLl90b29sdGlwSGFuZGxlcnNBZGRlZCl7dmFyIGU9dD9cIm9mZlwiOlwib25cIixpPXtyZW1vdmU6dGhpcy5jbG9zZVRvb2x0aXAsbW92ZTp0aGlzLl9tb3ZlVG9vbHRpcH07dGhpcy5fdG9vbHRpcC5vcHRpb25zLnBlcm1hbmVudD9pLmFkZD10aGlzLl9vcGVuVG9vbHRpcDooaS5tb3VzZW92ZXI9dGhpcy5fb3BlblRvb2x0aXAsaS5tb3VzZW91dD10aGlzLmNsb3NlVG9vbHRpcCx0aGlzLl90b29sdGlwLm9wdGlvbnMuc3RpY2t5JiYoaS5tb3VzZW1vdmU9dGhpcy5fbW92ZVRvb2x0aXApLG8uQnJvd3Nlci50b3VjaCYmKGkuY2xpY2s9dGhpcy5fb3BlblRvb2x0aXApKSx0aGlzW2VdKGkpLHRoaXMuX3Rvb2x0aXBIYW5kbGVyc0FkZGVkPSF0fX0sb3BlblRvb2x0aXA6ZnVuY3Rpb24odCxlKXtpZih0IGluc3RhbmNlb2Ygby5MYXllcnx8KGU9dCx0PXRoaXMpLHQgaW5zdGFuY2VvZiBvLkZlYXR1cmVHcm91cClmb3IodmFyIGkgaW4gdGhpcy5fbGF5ZXJzKXt0PXRoaXMuX2xheWVyc1tpXTticmVha31yZXR1cm4gZXx8KGU9dC5nZXRDZW50ZXI/dC5nZXRDZW50ZXIoKTp0LmdldExhdExuZygpKSx0aGlzLl90b29sdGlwJiZ0aGlzLl9tYXAmJih0aGlzLl90b29sdGlwLl9zb3VyY2U9dCx0aGlzLl90b29sdGlwLnVwZGF0ZSgpLHRoaXMuX21hcC5vcGVuVG9vbHRpcCh0aGlzLl90b29sdGlwLGUpLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5pbnRlcmFjdGl2ZSYmdGhpcy5fdG9vbHRpcC5fY29udGFpbmVyJiYoby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX3Rvb2x0aXAuX2NvbnRhaW5lcixcImxlYWZsZXQtY2xpY2thYmxlXCIpLHRoaXMuYWRkSW50ZXJhY3RpdmVUYXJnZXQodGhpcy5fdG9vbHRpcC5fY29udGFpbmVyKSkpLHRoaXN9LGNsb3NlVG9vbHRpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sdGlwJiYodGhpcy5fdG9vbHRpcC5fY2xvc2UoKSx0aGlzLl90b29sdGlwLm9wdGlvbnMuaW50ZXJhY3RpdmUmJnRoaXMuX3Rvb2x0aXAuX2NvbnRhaW5lciYmKG8uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl90b29sdGlwLl9jb250YWluZXIsXCJsZWFmbGV0LWNsaWNrYWJsZVwiKSx0aGlzLnJlbW92ZUludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX3Rvb2x0aXAuX2NvbnRhaW5lcikpKSx0aGlzfSx0b2dnbGVUb29sdGlwOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90b29sdGlwJiYodGhpcy5fdG9vbHRpcC5fbWFwP3RoaXMuY2xvc2VUb29sdGlwKCk6dGhpcy5vcGVuVG9vbHRpcCh0KSksdGhpc30saXNUb29sdGlwT3BlbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sdGlwLmlzT3BlbigpfSxzZXRUb29sdGlwQ29udGVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdG9vbHRpcCYmdGhpcy5fdG9vbHRpcC5zZXRDb250ZW50KHQpLHRoaXN9LGdldFRvb2x0aXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9vbHRpcH0sX29wZW5Ub29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGF5ZXJ8fHQudGFyZ2V0O3RoaXMuX3Rvb2x0aXAmJnRoaXMuX21hcCYmdGhpcy5vcGVuVG9vbHRpcChlLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5zdGlja3k/dC5sYXRsbmc6aSl9LF9tb3ZlVG9vbHRpcDpmdW5jdGlvbih0KXt2YXIgZSxpLG49dC5sYXRsbmc7dGhpcy5fdG9vbHRpcC5vcHRpb25zLnN0aWNreSYmdC5vcmlnaW5hbEV2ZW50JiYoZT10aGlzLl9tYXAubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodC5vcmlnaW5hbEV2ZW50KSxpPXRoaXMuX21hcC5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludChlKSxuPXRoaXMuX21hcC5sYXllclBvaW50VG9MYXRMbmcoaSkpLHRoaXMuX3Rvb2x0aXAuc2V0TGF0TG5nKG4pfX0pLG8uTGF5ZXJHcm91cD1vLkxheWVyLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLl9sYXllcnM9e307dmFyIGUsaTtpZih0KWZvcihlPTAsaT10Lmxlbmd0aDtlPGk7ZSsrKXRoaXMuYWRkTGF5ZXIodFtlXSl9LGFkZExheWVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0TGF5ZXJJZCh0KTtyZXR1cm4gdGhpcy5fbGF5ZXJzW2VdPXQsdGhpcy5fbWFwJiZ0aGlzLl9tYXAuYWRkTGF5ZXIodCksdGhpc30scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24odCl7dmFyIGU9dCBpbiB0aGlzLl9sYXllcnM/dDp0aGlzLmdldExheWVySWQodCk7cmV0dXJuIHRoaXMuX21hcCYmdGhpcy5fbGF5ZXJzW2VdJiZ0aGlzLl9tYXAucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJzW2VdKSxkZWxldGUgdGhpcy5fbGF5ZXJzW2VdLHRoaXN9LGhhc0xheWVyOmZ1bmN0aW9uKHQpe3JldHVybiEhdCYmKHQgaW4gdGhpcy5fbGF5ZXJzfHx0aGlzLmdldExheWVySWQodClpbiB0aGlzLl9sYXllcnMpfSxjbGVhckxheWVyczpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5yZW1vdmVMYXllcih0aGlzLl9sYXllcnNbdF0pO3JldHVybiB0aGlzfSxpbnZva2U6ZnVuY3Rpb24odCl7dmFyIGUsaSxuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtmb3IoZSBpbiB0aGlzLl9sYXllcnMpaT10aGlzLl9sYXllcnNbZV0saVt0XSYmaVt0XS5hcHBseShpLG4pO3JldHVybiB0aGlzfSxvbkFkZDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fbGF5ZXJzKXQuYWRkTGF5ZXIodGhpcy5fbGF5ZXJzW2VdKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuX2xheWVycyl0LnJlbW92ZUxheWVyKHRoaXMuX2xheWVyc1tlXSl9LGVhY2hMYXllcjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiB0aGlzLl9sYXllcnMpdC5jYWxsKGUsdGhpcy5fbGF5ZXJzW2ldKTtyZXR1cm4gdGhpc30sZ2V0TGF5ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xheWVyc1t0XX0sZ2V0TGF5ZXJzOmZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBlIGluIHRoaXMuX2xheWVycyl0LnB1c2godGhpcy5fbGF5ZXJzW2VdKTtyZXR1cm4gdH0sc2V0WkluZGV4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludm9rZShcInNldFpJbmRleFwiLHQpfSxnZXRMYXllcklkOmZ1bmN0aW9uKHQpe3JldHVybiBvLnN0YW1wKHQpfX0pLG8ubGF5ZXJHcm91cD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uTGF5ZXJHcm91cCh0KX0sby5GZWF0dXJlR3JvdXA9by5MYXllckdyb3VwLmV4dGVuZCh7YWRkTGF5ZXI6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaGFzTGF5ZXIodCk/dGhpczoodC5hZGRFdmVudFBhcmVudCh0aGlzKSxvLkxheWVyR3JvdXAucHJvdG90eXBlLmFkZExheWVyLmNhbGwodGhpcyx0KSx0aGlzLmZpcmUoXCJsYXllcmFkZFwiLHtsYXllcjp0fSkpfSxyZW1vdmVMYXllcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNMYXllcih0KT8odCBpbiB0aGlzLl9sYXllcnMmJih0PXRoaXMuX2xheWVyc1t0XSksdC5yZW1vdmVFdmVudFBhcmVudCh0aGlzKSxvLkxheWVyR3JvdXAucHJvdG90eXBlLnJlbW92ZUxheWVyLmNhbGwodGhpcyx0KSx0aGlzLmZpcmUoXCJsYXllcnJlbW92ZVwiLHtsYXllcjp0fSkpOnRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmludm9rZShcInNldFN0eWxlXCIsdCl9LGJyaW5nVG9Gcm9udDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludm9rZShcImJyaW5nVG9Gcm9udFwiKX0sYnJpbmdUb0JhY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnZva2UoXCJicmluZ1RvQmFja1wiKX0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG8uTGF0TG5nQm91bmRzO2Zvcih2YXIgZSBpbiB0aGlzLl9sYXllcnMpe3ZhciBpPXRoaXMuX2xheWVyc1tlXTt0LmV4dGVuZChpLmdldEJvdW5kcz9pLmdldEJvdW5kcygpOmkuZ2V0TGF0TG5nKCkpfXJldHVybiB0fX0pLG8uZmVhdHVyZUdyb3VwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5GZWF0dXJlR3JvdXAodCl9LG8uUmVuZGVyZXI9by5MYXllci5leHRlbmQoe29wdGlvbnM6e3BhZGRpbmc6LjF9LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7by5zZXRPcHRpb25zKHRoaXMsdCksby5zdGFtcCh0aGlzKSx0aGlzLl9sYXllcnM9dGhpcy5fbGF5ZXJzfHx7fX0sb25BZGQ6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXJ8fCh0aGlzLl9pbml0Q29udGFpbmVyKCksdGhpcy5fem9vbUFuaW1hdGVkJiZvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLFwibGVhZmxldC16b29tLWFuaW1hdGVkXCIpKSx0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpLHRoaXMuX3VwZGF0ZSgpLHRoaXMub24oXCJ1cGRhdGVcIix0aGlzLl91cGRhdGVQYXRocyx0aGlzKX0sb25SZW1vdmU6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlKHRoaXMuX2NvbnRhaW5lciksdGhpcy5vZmYoXCJ1cGRhdGVcIix0aGlzLl91cGRhdGVQYXRocyx0aGlzKX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9e3ZpZXdyZXNldDp0aGlzLl9yZXNldCx6b29tOnRoaXMuX29uWm9vbSxtb3ZlZW5kOnRoaXMuX3VwZGF0ZSx6b29tZW5kOnRoaXMuX29uWm9vbUVuZH07cmV0dXJuIHRoaXMuX3pvb21BbmltYXRlZCYmKHQuem9vbWFuaW09dGhpcy5fb25BbmltWm9vbSksdH0sX29uQW5pbVpvb206ZnVuY3Rpb24odCl7dGhpcy5fdXBkYXRlVHJhbnNmb3JtKHQuY2VudGVyLHQuem9vbSl9LF9vblpvb206ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVUcmFuc2Zvcm0odGhpcy5fbWFwLmdldENlbnRlcigpLHRoaXMuX21hcC5nZXRab29tKCkpfSxfdXBkYXRlVHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fbWFwLmdldFpvb21TY2FsZShlLHRoaXMuX3pvb20pLG49by5Eb21VdGlsLmdldFBvc2l0aW9uKHRoaXMuX2NvbnRhaW5lcikscz10aGlzLl9tYXAuZ2V0U2l6ZSgpLm11bHRpcGx5QnkoLjUrdGhpcy5vcHRpb25zLnBhZGRpbmcpLHI9dGhpcy5fbWFwLnByb2plY3QodGhpcy5fY2VudGVyLGUpLGE9dGhpcy5fbWFwLnByb2plY3QodCxlKSxoPWEuc3VidHJhY3QociksbD1zLm11bHRpcGx5QnkoLWkpLmFkZChuKS5hZGQocykuc3VidHJhY3QoaCk7by5Ccm93c2VyLmFueTNkP28uRG9tVXRpbC5zZXRUcmFuc2Zvcm0odGhpcy5fY29udGFpbmVyLGwsaSk6by5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX2NvbnRhaW5lcixsKX0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlKCksdGhpcy5fdXBkYXRlVHJhbnNmb3JtKHRoaXMuX2NlbnRlcix0aGlzLl96b29tKTtmb3IodmFyIHQgaW4gdGhpcy5fbGF5ZXJzKXRoaXMuX2xheWVyc1t0XS5fcmVzZXQoKX0sX29uWm9vbUVuZDpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLl9wcm9qZWN0KCl9LF91cGRhdGVQYXRoczpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLl91cGRhdGUoKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5wYWRkaW5nLGU9dGhpcy5fbWFwLmdldFNpemUoKSxpPXRoaXMuX21hcC5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludChlLm11bHRpcGx5QnkoLXQpKS5yb3VuZCgpO3RoaXMuX2JvdW5kcz1uZXcgby5Cb3VuZHMoaSxpLmFkZChlLm11bHRpcGx5QnkoMSsyKnQpKS5yb3VuZCgpKSx0aGlzLl9jZW50ZXI9dGhpcy5fbWFwLmdldENlbnRlcigpLHRoaXMuX3pvb209dGhpcy5fbWFwLmdldFpvb20oKX19KSxvLk1hcC5pbmNsdWRlKHtnZXRSZW5kZXJlcjpmdW5jdGlvbih0KXt2YXIgZT10Lm9wdGlvbnMucmVuZGVyZXJ8fHRoaXMuX2dldFBhbmVSZW5kZXJlcih0Lm9wdGlvbnMucGFuZSl8fHRoaXMub3B0aW9ucy5yZW5kZXJlcnx8dGhpcy5fcmVuZGVyZXI7cmV0dXJuIGV8fChlPXRoaXMuX3JlbmRlcmVyPXRoaXMub3B0aW9ucy5wcmVmZXJDYW52YXMmJm8uY2FudmFzKCl8fG8uc3ZnKCkpLHRoaXMuaGFzTGF5ZXIoZSl8fHRoaXMuYWRkTGF5ZXIoZSksZX0sX2dldFBhbmVSZW5kZXJlcjpmdW5jdGlvbih0KXtpZihcIm92ZXJsYXlQYW5lXCI9PT10fHx0PT09aSlyZXR1cm4hMTt2YXIgZT10aGlzLl9wYW5lUmVuZGVyZXJzW3RdO3JldHVybiBlPT09aSYmKGU9by5TVkcmJm8uc3ZnKHtwYW5lOnR9KXx8by5DYW52YXMmJm8uY2FudmFzKHtwYW5lOnR9KSx0aGlzLl9wYW5lUmVuZGVyZXJzW3RdPWUpLGV9fSksby5QYXRoPW8uTGF5ZXIuZXh0ZW5kKHtvcHRpb25zOntzdHJva2U6ITAsY29sb3I6XCIjMzM4OGZmXCIsd2VpZ2h0OjMsb3BhY2l0eToxLGxpbmVDYXA6XCJyb3VuZFwiLGxpbmVKb2luOlwicm91bmRcIixkYXNoQXJyYXk6bnVsbCxkYXNoT2Zmc2V0Om51bGwsZmlsbDohMSxmaWxsQ29sb3I6bnVsbCxmaWxsT3BhY2l0eTouMixmaWxsUnVsZTpcImV2ZW5vZGRcIixpbnRlcmFjdGl2ZTohMH0sYmVmb3JlQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX3JlbmRlcmVyPXQuZ2V0UmVuZGVyZXIodGhpcyl9LG9uQWRkOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX2luaXRQYXRoKHRoaXMpLHRoaXMuX3Jlc2V0KCksdGhpcy5fcmVuZGVyZXIuX2FkZFBhdGgodGhpcyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX3JlbW92ZVBhdGgodGhpcyl9LHJlZHJhdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXAmJnRoaXMuX3JlbmRlcmVyLl91cGRhdGVQYXRoKHRoaXMpLHRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3JldHVybiBvLnNldE9wdGlvbnModGhpcyx0KSx0aGlzLl9yZW5kZXJlciYmdGhpcy5fcmVuZGVyZXIuX3VwZGF0ZVN0eWxlKHRoaXMpLHRoaXN9LGJyaW5nVG9Gcm9udDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJlciYmdGhpcy5fcmVuZGVyZXIuX2JyaW5nVG9Gcm9udCh0aGlzKSx0aGlzfSxicmluZ1RvQmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJlciYmdGhpcy5fcmVuZGVyZXIuX2JyaW5nVG9CYWNrKHRoaXMpLHRoaXN9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGF0aH0sX3Jlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fcHJvamVjdCgpLHRoaXMuX3VwZGF0ZSgpfSxfY2xpY2tUb2xlcmFuY2U6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5vcHRpb25zLnN0cm9rZT90aGlzLm9wdGlvbnMud2VpZ2h0LzI6MCkrKG8uQnJvd3Nlci50b3VjaD8xMDowKX19KSxvLkxpbmVVdGlsPXtzaW1wbGlmeTpmdW5jdGlvbih0LGUpe2lmKCFlfHwhdC5sZW5ndGgpcmV0dXJuIHQuc2xpY2UoKTt2YXIgaT1lKmU7cmV0dXJuIHQ9dGhpcy5fcmVkdWNlUG9pbnRzKHQsaSksdD10aGlzLl9zaW1wbGlmeURQKHQsaSl9LHBvaW50VG9TZWdtZW50RGlzdGFuY2U6ZnVuY3Rpb24odCxlLGkpe3JldHVybiBNYXRoLnNxcnQodGhpcy5fc3FDbG9zZXN0UG9pbnRPblNlZ21lbnQodCxlLGksITApKX0sY2xvc2VzdFBvaW50T25TZWdtZW50OmZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdGhpcy5fc3FDbG9zZXN0UG9pbnRPblNlZ21lbnQodCxlLGkpfSxfc2ltcGxpZnlEUDpmdW5jdGlvbih0LGUpe3ZhciBuPXQubGVuZ3RoLG89dHlwZW9mIFVpbnQ4QXJyYXkhPWkrXCJcIj9VaW50OEFycmF5OkFycmF5LHM9bmV3IG8obik7c1swXT1zW24tMV09MSx0aGlzLl9zaW1wbGlmeURQU3RlcCh0LHMsZSwwLG4tMSk7dmFyIHIsYT1bXTtmb3Iocj0wO3I8bjtyKyspc1tyXSYmYS5wdXNoKHRbcl0pO3JldHVybiBhfSxfc2ltcGxpZnlEUFN0ZXA6ZnVuY3Rpb24odCxlLGksbixvKXt2YXIgcyxyLGEsaD0wO2ZvcihyPW4rMTtyPD1vLTE7cisrKWE9dGhpcy5fc3FDbG9zZXN0UG9pbnRPblNlZ21lbnQodFtyXSx0W25dLHRbb10sITApLGE+aCYmKHM9cixoPWEpO2g+aSYmKGVbc109MSx0aGlzLl9zaW1wbGlmeURQU3RlcCh0LGUsaSxuLHMpLHRoaXMuX3NpbXBsaWZ5RFBTdGVwKHQsZSxpLHMsbykpfSxfcmVkdWNlUG9pbnRzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpPVt0WzBdXSxuPTEsbz0wLHM9dC5sZW5ndGg7bjxzO24rKyl0aGlzLl9zcURpc3QodFtuXSx0W29dKT5lJiYoaS5wdXNoKHRbbl0pLG89bik7cmV0dXJuIG88cy0xJiZpLnB1c2godFtzLTFdKSxpfSxjbGlwU2VnbWVudDpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBzLHIsYSxoPW4/dGhpcy5fbGFzdENvZGU6dGhpcy5fZ2V0Qml0Q29kZSh0LGkpLGw9dGhpcy5fZ2V0Qml0Q29kZShlLGkpO2Zvcih0aGlzLl9sYXN0Q29kZT1sOzspe2lmKCEoaHxsKSlyZXR1cm5bdCxlXTtpZihoJmwpcmV0dXJuITE7cz1ofHxsLHI9dGhpcy5fZ2V0RWRnZUludGVyc2VjdGlvbih0LGUscyxpLG8pLGE9dGhpcy5fZ2V0Qml0Q29kZShyLGkpLHM9PT1oPyh0PXIsaD1hKTooZT1yLGw9YSl9fSxfZ2V0RWRnZUludGVyc2VjdGlvbjpmdW5jdGlvbih0LGUsaSxuLHMpe3ZhciByLGEsaD1lLngtdC54LGw9ZS55LXQueSx1PW4ubWluLGM9bi5tYXg7cmV0dXJuIDgmaT8ocj10LngraCooYy55LXQueSkvbCxhPWMueSk6NCZpPyhyPXQueCtoKih1LnktdC55KS9sLGE9dS55KToyJmk/KHI9Yy54LGE9dC55K2wqKGMueC10LngpL2gpOjEmaSYmKHI9dS54LGE9dC55K2wqKHUueC10LngpL2gpLG5ldyBvLlBvaW50KHIsYSxzKX0sX2dldEJpdENvZGU6ZnVuY3Rpb24odCxlKXt2YXIgaT0wO3JldHVybiB0Lng8ZS5taW4ueD9pfD0xOnQueD5lLm1heC54JiYoaXw9MiksdC55PGUubWluLnk/aXw9NDp0Lnk+ZS5tYXgueSYmKGl8PTgpLGl9LF9zcURpc3Q6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLngtdC54LG49ZS55LXQueTtyZXR1cm4gaSppK24qbn0sX3NxQ2xvc2VzdFBvaW50T25TZWdtZW50OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBzLHI9ZS54LGE9ZS55LGg9aS54LXIsbD1pLnktYSx1PWgqaCtsKmw7cmV0dXJuIHU+MCYmKHM9KCh0LngtcikqaCsodC55LWEpKmwpL3Uscz4xPyhyPWkueCxhPWkueSk6cz4wJiYocis9aCpzLGErPWwqcykpLGg9dC54LXIsbD10LnktYSxuP2gqaCtsKmw6bmV3IG8uUG9pbnQocixhKX19LG8uUG9seWxpbmU9by5QYXRoLmV4dGVuZCh7b3B0aW9uczp7c21vb3RoRmFjdG9yOjEsbm9DbGlwOiExfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7by5zZXRPcHRpb25zKHRoaXMsZSksdGhpcy5fc2V0TGF0TG5ncyh0KX0sZ2V0TGF0TG5nczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXRsbmdzfSxzZXRMYXRMbmdzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zZXRMYXRMbmdzKHQpLHRoaXMucmVkcmF3KCl9LGlzRW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fbGF0bG5ncy5sZW5ndGh9LGNsb3Nlc3RMYXllclBvaW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxpLG49MS8wLHM9bnVsbCxyPW8uTGluZVV0aWwuX3NxQ2xvc2VzdFBvaW50T25TZWdtZW50LGE9MCxoPXRoaXMuX3BhcnRzLmxlbmd0aDthPGg7YSsrKWZvcih2YXIgbD10aGlzLl9wYXJ0c1thXSx1PTEsYz1sLmxlbmd0aDt1PGM7dSsrKXtlPWxbdS0xXSxpPWxbdV07dmFyIGQ9cih0LGUsaSwhMCk7ZDxuJiYobj1kLHM9cih0LGUsaSkpfXJldHVybiBzJiYocy5kaXN0YW5jZT1NYXRoLnNxcnQobikpLHN9LGdldENlbnRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLl9tYXApdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBhZGQgbGF5ZXIgdG8gbWFwIGJlZm9yZSB1c2luZyBnZXRDZW50ZXIoKVwiKTt2YXIgdCxlLGksbixvLHMscixhPXRoaXMuX3JpbmdzWzBdLGg9YS5sZW5ndGg7aWYoIWgpcmV0dXJuIG51bGw7Zm9yKHQ9MCxlPTA7dDxoLTE7dCsrKWUrPWFbdF0uZGlzdGFuY2VUbyhhW3QrMV0pLzI7aWYoMD09PWUpcmV0dXJuIHRoaXMuX21hcC5sYXllclBvaW50VG9MYXRMbmcoYVswXSk7Zm9yKHQ9MCxuPTA7dDxoLTE7dCsrKWlmKG89YVt0XSxzPWFbdCsxXSxpPW8uZGlzdGFuY2VUbyhzKSxuKz1pLG4+ZSlyZXR1cm4gcj0obi1lKS9pLHRoaXMuX21hcC5sYXllclBvaW50VG9MYXRMbmcoW3MueC1yKihzLngtby54KSxzLnktcioocy55LW8ueSldKX0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvdW5kc30sYWRkTGF0TG5nOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8dGhpcy5fZGVmYXVsdFNoYXBlKCksdD1vLmxhdExuZyh0KSxlLnB1c2godCksdGhpcy5fYm91bmRzLmV4dGVuZCh0KSx0aGlzLnJlZHJhdygpfSxfc2V0TGF0TG5nczpmdW5jdGlvbih0KXt0aGlzLl9ib3VuZHM9bmV3IG8uTGF0TG5nQm91bmRzLHRoaXMuX2xhdGxuZ3M9dGhpcy5fY29udmVydExhdExuZ3ModCl9LF9kZWZhdWx0U2hhcGU6ZnVuY3Rpb24oKXtyZXR1cm4gby5Qb2x5bGluZS5fZmxhdCh0aGlzLl9sYXRsbmdzKT90aGlzLl9sYXRsbmdzOnRoaXMuX2xhdGxuZ3NbMF19LF9jb252ZXJ0TGF0TG5nczpmdW5jdGlvbih0KXtmb3IodmFyIGU9W10saT1vLlBvbHlsaW5lLl9mbGF0KHQpLG49MCxzPXQubGVuZ3RoO248cztuKyspaT8oZVtuXT1vLmxhdExuZyh0W25dKSx0aGlzLl9ib3VuZHMuZXh0ZW5kKGVbbl0pKTplW25dPXRoaXMuX2NvbnZlcnRMYXRMbmdzKHRbbl0pO3JldHVybiBlfSxfcHJvamVjdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBvLkJvdW5kczt0aGlzLl9yaW5ncz1bXSx0aGlzLl9wcm9qZWN0TGF0bG5ncyh0aGlzLl9sYXRsbmdzLHRoaXMuX3JpbmdzLHQpO3ZhciBlPXRoaXMuX2NsaWNrVG9sZXJhbmNlKCksaT1uZXcgby5Qb2ludChlLGUpO3RoaXMuX2JvdW5kcy5pc1ZhbGlkKCkmJnQuaXNWYWxpZCgpJiYodC5taW4uX3N1YnRyYWN0KGkpLHQubWF4Ll9hZGQoaSksdGhpcy5fcHhCb3VuZHM9dCl9LF9wcm9qZWN0TGF0bG5nczpmdW5jdGlvbih0LGUsaSl7dmFyIG4scyxyPXRbMF1pbnN0YW5jZW9mIG8uTGF0TG5nLGE9dC5sZW5ndGg7aWYocil7Zm9yKHM9W10sbj0wO248YTtuKyspc1tuXT10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRbbl0pLGkuZXh0ZW5kKHNbbl0pO2UucHVzaChzKX1lbHNlIGZvcihuPTA7bjxhO24rKyl0aGlzLl9wcm9qZWN0TGF0bG5ncyh0W25dLGUsaSl9LF9jbGlwUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVuZGVyZXIuX2JvdW5kcztpZih0aGlzLl9wYXJ0cz1bXSx0aGlzLl9weEJvdW5kcyYmdGhpcy5fcHhCb3VuZHMuaW50ZXJzZWN0cyh0KSl7aWYodGhpcy5vcHRpb25zLm5vQ2xpcClyZXR1cm4gdm9pZCh0aGlzLl9wYXJ0cz10aGlzLl9yaW5ncyk7dmFyIGUsaSxuLHMscixhLGgsbD10aGlzLl9wYXJ0cztmb3IoZT0wLG49MCxzPXRoaXMuX3JpbmdzLmxlbmd0aDtlPHM7ZSsrKWZvcihoPXRoaXMuX3JpbmdzW2VdLGk9MCxyPWgubGVuZ3RoO2k8ci0xO2krKylhPW8uTGluZVV0aWwuY2xpcFNlZ21lbnQoaFtpXSxoW2krMV0sdCxpLCEwKSxhJiYobFtuXT1sW25dfHxbXSxsW25dLnB1c2goYVswXSksYVsxXT09PWhbaSsxXSYmaSE9PXItMnx8KGxbbl0ucHVzaChhWzFdKSxuKyspKX19LF9zaW1wbGlmeVBvaW50czpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLl9wYXJ0cyxlPXRoaXMub3B0aW9ucy5zbW9vdGhGYWN0b3IsaT0wLG49dC5sZW5ndGg7aTxuO2krKyl0W2ldPW8uTGluZVV0aWwuc2ltcGxpZnkodFtpXSxlKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX21hcCYmKHRoaXMuX2NsaXBQb2ludHMoKSx0aGlzLl9zaW1wbGlmeVBvaW50cygpLHRoaXMuX3VwZGF0ZVBhdGgoKSl9LF91cGRhdGVQYXRoOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuX3VwZGF0ZVBvbHkodGhpcyl9fSksby5wb2x5bGluZT1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5Qb2x5bGluZSh0LGUpfSxvLlBvbHlsaW5lLl9mbGF0PWZ1bmN0aW9uKHQpe3JldHVybiFvLlV0aWwuaXNBcnJheSh0WzBdKXx8XCJvYmplY3RcIiE9dHlwZW9mIHRbMF1bMF0mJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB0WzBdWzBdfSxvLlBvbHlVdGlsPXt9LG8uUG9seVV0aWwuY2xpcFBvbHlnb249ZnVuY3Rpb24odCxlLGkpe3ZhciBuLHMscixhLGgsbCx1LGMsZCxfPVsxLDQsMiw4XSxtPW8uTGluZVV0aWw7Zm9yKHM9MCx1PXQubGVuZ3RoO3M8dTtzKyspdFtzXS5fY29kZT1tLl9nZXRCaXRDb2RlKHRbc10sZSk7Zm9yKGE9MDthPDQ7YSsrKXtmb3IoYz1fW2FdLG49W10scz0wLHU9dC5sZW5ndGgscj11LTE7czx1O3I9cysrKWg9dFtzXSxsPXRbcl0saC5fY29kZSZjP2wuX2NvZGUmY3x8KGQ9bS5fZ2V0RWRnZUludGVyc2VjdGlvbihsLGgsYyxlLGkpLGQuX2NvZGU9bS5fZ2V0Qml0Q29kZShkLGUpLG4ucHVzaChkKSk6KGwuX2NvZGUmYyYmKGQ9bS5fZ2V0RWRnZUludGVyc2VjdGlvbihsLGgsYyxlLGkpLGQuX2NvZGU9bS5fZ2V0Qml0Q29kZShkLGUpLG4ucHVzaChkKSksbi5wdXNoKGgpKTt0PW59cmV0dXJuIHR9LG8uUG9seWdvbj1vLlBvbHlsaW5lLmV4dGVuZCh7b3B0aW9uczp7ZmlsbDohMH0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiF0aGlzLl9sYXRsbmdzLmxlbmd0aHx8IXRoaXMuX2xhdGxuZ3NbMF0ubGVuZ3RofSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtpZighdGhpcy5fbWFwKXRocm93IG5ldyBFcnJvcihcIk11c3QgYWRkIGxheWVyIHRvIG1hcCBiZWZvcmUgdXNpbmcgZ2V0Q2VudGVyKClcIik7dmFyIHQsZSxpLG4sbyxzLHIsYSxoLGw9dGhpcy5fcmluZ3NbMF0sdT1sLmxlbmd0aDtpZighdSlyZXR1cm4gbnVsbDtmb3Iocz1yPWE9MCx0PTAsZT11LTE7dDx1O2U9dCsrKWk9bFt0XSxuPWxbZV0sbz1pLnkqbi54LW4ueSppLngscis9KGkueCtuLngpKm8sYSs9KGkueStuLnkpKm8scys9MypvO3JldHVybiBoPTA9PT1zP2xbMF06W3IvcyxhL3NdLHRoaXMuX21hcC5sYXllclBvaW50VG9MYXRMbmcoaCl9LF9jb252ZXJ0TGF0TG5nczpmdW5jdGlvbih0KXt2YXIgZT1vLlBvbHlsaW5lLnByb3RvdHlwZS5fY29udmVydExhdExuZ3MuY2FsbCh0aGlzLHQpLGk9ZS5sZW5ndGg7cmV0dXJuIGk+PTImJmVbMF1pbnN0YW5jZW9mIG8uTGF0TG5nJiZlWzBdLmVxdWFscyhlW2ktMV0pJiZlLnBvcCgpLGV9LF9zZXRMYXRMbmdzOmZ1bmN0aW9uKHQpe28uUG9seWxpbmUucHJvdG90eXBlLl9zZXRMYXRMbmdzLmNhbGwodGhpcyx0KSxvLlBvbHlsaW5lLl9mbGF0KHRoaXMuX2xhdGxuZ3MpJiYodGhpcy5fbGF0bG5ncz1bdGhpcy5fbGF0bG5nc10pfSxfZGVmYXVsdFNoYXBlOmZ1bmN0aW9uKCl7cmV0dXJuIG8uUG9seWxpbmUuX2ZsYXQodGhpcy5fbGF0bG5nc1swXSk/dGhpcy5fbGF0bG5nc1swXTp0aGlzLl9sYXRsbmdzWzBdWzBdfSxfY2xpcFBvaW50czpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3JlbmRlcmVyLl9ib3VuZHMsZT10aGlzLm9wdGlvbnMud2VpZ2h0LGk9bmV3IG8uUG9pbnQoZSxlKTtpZih0PW5ldyBvLkJvdW5kcyh0Lm1pbi5zdWJ0cmFjdChpKSx0Lm1heC5hZGQoaSkpLHRoaXMuX3BhcnRzPVtdLHRoaXMuX3B4Qm91bmRzJiZ0aGlzLl9weEJvdW5kcy5pbnRlcnNlY3RzKHQpKXtpZih0aGlzLm9wdGlvbnMubm9DbGlwKXJldHVybiB2b2lkKHRoaXMuX3BhcnRzPXRoaXMuX3JpbmdzKTtmb3IodmFyIG4scz0wLHI9dGhpcy5fcmluZ3MubGVuZ3RoO3M8cjtzKyspbj1vLlBvbHlVdGlsLmNsaXBQb2x5Z29uKHRoaXMuX3JpbmdzW3NdLHQsITApLG4ubGVuZ3RoJiZ0aGlzLl9wYXJ0cy5wdXNoKG4pfX0sX3VwZGF0ZVBhdGg6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5fdXBkYXRlUG9seSh0aGlzLCEwKX19KSxvLnBvbHlnb249ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uUG9seWdvbih0LGUpfSxvLlJlY3RhbmdsZT1vLlBvbHlnb24uZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7by5Qb2x5Z29uLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcyx0aGlzLl9ib3VuZHNUb0xhdExuZ3ModCksZSl9LHNldEJvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRMYXRMbmdzKHRoaXMuX2JvdW5kc1RvTGF0TG5ncyh0KSl9LF9ib3VuZHNUb0xhdExuZ3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9by5sYXRMbmdCb3VuZHModCksW3QuZ2V0U291dGhXZXN0KCksdC5nZXROb3J0aFdlc3QoKSx0LmdldE5vcnRoRWFzdCgpLHQuZ2V0U291dGhFYXN0KCldfX0pLG8ucmVjdGFuZ2xlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLlJlY3RhbmdsZSh0LGUpfSxvLkNpcmNsZU1hcmtlcj1vLlBhdGguZXh0ZW5kKHtvcHRpb25zOntmaWxsOiEwLHJhZGl1czoxMH0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe28uc2V0T3B0aW9ucyh0aGlzLGUpLHRoaXMuX2xhdGxuZz1vLmxhdExuZyh0KSx0aGlzLl9yYWRpdXM9dGhpcy5vcHRpb25zLnJhZGl1c30sc2V0TGF0TG5nOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sYXRsbmc9by5sYXRMbmcodCksdGhpcy5yZWRyYXcoKSx0aGlzLmZpcmUoXCJtb3ZlXCIse2xhdGxuZzp0aGlzLl9sYXRsbmd9KX0sZ2V0TGF0TG5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ30sc2V0UmFkaXVzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMucmFkaXVzPXRoaXMuX3JhZGl1cz10LHRoaXMucmVkcmF3KCl9LGdldFJhZGl1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYWRpdXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQucmFkaXVzfHx0aGlzLl9yYWRpdXM7cmV0dXJuIG8uUGF0aC5wcm90b3R5cGUuc2V0U3R5bGUuY2FsbCh0aGlzLHQpLHRoaXMuc2V0UmFkaXVzKGUpLHRoaXN9LF9wcm9qZWN0OmZ1bmN0aW9uKCl7dGhpcy5fcG9pbnQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpLHRoaXMuX3VwZGF0ZUJvdW5kcygpfSxfdXBkYXRlQm91bmRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmFkaXVzLGU9dGhpcy5fcmFkaXVzWXx8dCxpPXRoaXMuX2NsaWNrVG9sZXJhbmNlKCksbj1bdCtpLGUraV07dGhpcy5fcHhCb3VuZHM9bmV3IG8uQm91bmRzKHRoaXMuX3BvaW50LnN1YnRyYWN0KG4pLHRoaXMuX3BvaW50LmFkZChuKSl9LF91cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl9tYXAmJnRoaXMuX3VwZGF0ZVBhdGgoKX0sX3VwZGF0ZVBhdGg6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5fdXBkYXRlQ2lyY2xlKHRoaXMpfSxfZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmFkaXVzJiYhdGhpcy5fcmVuZGVyZXIuX2JvdW5kcy5pbnRlcnNlY3RzKHRoaXMuX3B4Qm91bmRzKX19KSxvLmNpcmNsZU1hcmtlcj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5DaXJjbGVNYXJrZXIodCxlKX0sby5DaXJjbGU9by5DaXJjbGVNYXJrZXIuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSxpKXtpZihcIm51bWJlclwiPT10eXBlb2YgZSYmKGU9by5leHRlbmQoe30saSx7cmFkaXVzOmV9KSksby5zZXRPcHRpb25zKHRoaXMsZSksdGhpcy5fbGF0bG5nPW8ubGF0TG5nKHQpLGlzTmFOKHRoaXMub3B0aW9ucy5yYWRpdXMpKXRocm93IG5ldyBFcnJvcihcIkNpcmNsZSByYWRpdXMgY2Fubm90IGJlIE5hTlwiKTt0aGlzLl9tUmFkaXVzPXRoaXMub3B0aW9ucy5yYWRpdXN9LHNldFJhZGl1czpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbVJhZGl1cz10LHRoaXMucmVkcmF3KCl9LGdldFJhZGl1czpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tUmFkaXVzfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgdD1bdGhpcy5fcmFkaXVzLHRoaXMuX3JhZGl1c1l8fHRoaXMuX3JhZGl1c107cmV0dXJuIG5ldyBvLkxhdExuZ0JvdW5kcyh0aGlzLl9tYXAubGF5ZXJQb2ludFRvTGF0TG5nKHRoaXMuX3BvaW50LnN1YnRyYWN0KHQpKSx0aGlzLl9tYXAubGF5ZXJQb2ludFRvTGF0TG5nKHRoaXMuX3BvaW50LmFkZCh0KSkpO1xyXG59LHNldFN0eWxlOm8uUGF0aC5wcm90b3R5cGUuc2V0U3R5bGUsX3Byb2plY3Q6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9sYXRsbmcubG5nLGU9dGhpcy5fbGF0bG5nLmxhdCxpPXRoaXMuX21hcCxuPWkub3B0aW9ucy5jcnM7aWYobi5kaXN0YW5jZT09PW8uQ1JTLkVhcnRoLmRpc3RhbmNlKXt2YXIgcz1NYXRoLlBJLzE4MCxyPXRoaXMuX21SYWRpdXMvby5DUlMuRWFydGguUi9zLGE9aS5wcm9qZWN0KFtlK3IsdF0pLGg9aS5wcm9qZWN0KFtlLXIsdF0pLGw9YS5hZGQoaCkuZGl2aWRlQnkoMiksdT1pLnVucHJvamVjdChsKS5sYXQsYz1NYXRoLmFjb3MoKE1hdGguY29zKHIqcyktTWF0aC5zaW4oZSpzKSpNYXRoLnNpbih1KnMpKS8oTWF0aC5jb3MoZSpzKSpNYXRoLmNvcyh1KnMpKSkvczsoaXNOYU4oYyl8fDA9PT1jKSYmKGM9ci9NYXRoLmNvcyhNYXRoLlBJLzE4MCplKSksdGhpcy5fcG9pbnQ9bC5zdWJ0cmFjdChpLmdldFBpeGVsT3JpZ2luKCkpLHRoaXMuX3JhZGl1cz1pc05hTihjKT8wOk1hdGgubWF4KE1hdGgucm91bmQobC54LWkucHJvamVjdChbdSx0LWNdKS54KSwxKSx0aGlzLl9yYWRpdXNZPU1hdGgubWF4KE1hdGgucm91bmQobC55LWEueSksMSl9ZWxzZXt2YXIgZD1uLnVucHJvamVjdChuLnByb2plY3QodGhpcy5fbGF0bG5nKS5zdWJ0cmFjdChbdGhpcy5fbVJhZGl1cywwXSkpO3RoaXMuX3BvaW50PWkubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZyksdGhpcy5fcmFkaXVzPXRoaXMuX3BvaW50LngtaS5sYXRMbmdUb0xheWVyUG9pbnQoZCkueH10aGlzLl91cGRhdGVCb3VuZHMoKX19KSxvLmNpcmNsZT1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIG5ldyBvLkNpcmNsZSh0LGUsaSl9LG8uU1ZHPW8uUmVuZGVyZXIuZXh0ZW5kKHtnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD1vLlJlbmRlcmVyLnByb3RvdHlwZS5nZXRFdmVudHMuY2FsbCh0aGlzKTtyZXR1cm4gdC56b29tc3RhcnQ9dGhpcy5fb25ab29tU3RhcnQsdH0sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXI9by5TVkcuY3JlYXRlKFwic3ZnXCIpLHRoaXMuX2NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoXCJwb2ludGVyLWV2ZW50c1wiLFwibm9uZVwiKSx0aGlzLl9yb290R3JvdXA9by5TVkcuY3JlYXRlKFwiZ1wiKSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm9vdEdyb3VwKX0sX29uWm9vbVN0YXJ0OmZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlKCl9LF91cGRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fbWFwLl9hbmltYXRpbmdab29tfHwhdGhpcy5fYm91bmRzKXtvLlJlbmRlcmVyLnByb3RvdHlwZS5fdXBkYXRlLmNhbGwodGhpcyk7dmFyIHQ9dGhpcy5fYm91bmRzLGU9dC5nZXRTaXplKCksaT10aGlzLl9jb250YWluZXI7dGhpcy5fc3ZnU2l6ZSYmdGhpcy5fc3ZnU2l6ZS5lcXVhbHMoZSl8fCh0aGlzLl9zdmdTaXplPWUsaS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGUueCksaS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixlLnkpKSxvLkRvbVV0aWwuc2V0UG9zaXRpb24oaSx0Lm1pbiksaS5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsW3QubWluLngsdC5taW4ueSxlLngsZS55XS5qb2luKFwiIFwiKSksdGhpcy5maXJlKFwidXBkYXRlXCIpfX0sX2luaXRQYXRoOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX3BhdGg9by5TVkcuY3JlYXRlKFwicGF0aFwiKTt0Lm9wdGlvbnMuY2xhc3NOYW1lJiZvLkRvbVV0aWwuYWRkQ2xhc3MoZSx0Lm9wdGlvbnMuY2xhc3NOYW1lKSx0Lm9wdGlvbnMuaW50ZXJhY3RpdmUmJm8uRG9tVXRpbC5hZGRDbGFzcyhlLFwibGVhZmxldC1pbnRlcmFjdGl2ZVwiKSx0aGlzLl91cGRhdGVTdHlsZSh0KSx0aGlzLl9sYXllcnNbby5zdGFtcCh0KV09dH0sX2FkZFBhdGg6ZnVuY3Rpb24odCl7dGhpcy5fcm9vdEdyb3VwLmFwcGVuZENoaWxkKHQuX3BhdGgpLHQuYWRkSW50ZXJhY3RpdmVUYXJnZXQodC5fcGF0aCl9LF9yZW1vdmVQYXRoOmZ1bmN0aW9uKHQpe28uRG9tVXRpbC5yZW1vdmUodC5fcGF0aCksdC5yZW1vdmVJbnRlcmFjdGl2ZVRhcmdldCh0Ll9wYXRoKSxkZWxldGUgdGhpcy5fbGF5ZXJzW28uc3RhbXAodCldfSxfdXBkYXRlUGF0aDpmdW5jdGlvbih0KXt0Ll9wcm9qZWN0KCksdC5fdXBkYXRlKCl9LF91cGRhdGVTdHlsZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9wYXRoLGk9dC5vcHRpb25zO2UmJihpLnN0cm9rZT8oZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIixpLmNvbG9yKSxlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1vcGFjaXR5XCIsaS5vcGFjaXR5KSxlLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLGkud2VpZ2h0KSxlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lY2FwXCIsaS5saW5lQ2FwKSxlLnNldEF0dHJpYnV0ZShcInN0cm9rZS1saW5lam9pblwiLGkubGluZUpvaW4pLGkuZGFzaEFycmF5P2Uuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLGkuZGFzaEFycmF5KTplLnJlbW92ZUF0dHJpYnV0ZShcInN0cm9rZS1kYXNoYXJyYXlcIiksaS5kYXNoT2Zmc2V0P2Uuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hvZmZzZXRcIixpLmRhc2hPZmZzZXQpOmUucmVtb3ZlQXR0cmlidXRlKFwic3Ryb2tlLWRhc2hvZmZzZXRcIikpOmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsXCJub25lXCIpLGkuZmlsbD8oZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsaS5maWxsQ29sb3J8fGkuY29sb3IpLGUuc2V0QXR0cmlidXRlKFwiZmlsbC1vcGFjaXR5XCIsaS5maWxsT3BhY2l0eSksZS5zZXRBdHRyaWJ1dGUoXCJmaWxsLXJ1bGVcIixpLmZpbGxSdWxlfHxcImV2ZW5vZGRcIikpOmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLFwibm9uZVwiKSl9LF91cGRhdGVQb2x5OmZ1bmN0aW9uKHQsZSl7dGhpcy5fc2V0UGF0aCh0LG8uU1ZHLnBvaW50c1RvUGF0aCh0Ll9wYXJ0cyxlKSl9LF91cGRhdGVDaXJjbGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5fcG9pbnQsaT10Ll9yYWRpdXMsbj10Ll9yYWRpdXNZfHxpLG89XCJhXCIraStcIixcIituK1wiIDAgMSwwIFwiLHM9dC5fZW1wdHkoKT9cIk0wIDBcIjpcIk1cIisoZS54LWkpK1wiLFwiK2UueStvKzIqaStcIiwwIFwiK28rMiotaStcIiwwIFwiO3RoaXMuX3NldFBhdGgodCxzKX0sX3NldFBhdGg6ZnVuY3Rpb24odCxlKXt0Ll9wYXRoLnNldEF0dHJpYnV0ZShcImRcIixlKX0sX2JyaW5nVG9Gcm9udDpmdW5jdGlvbih0KXtvLkRvbVV0aWwudG9Gcm9udCh0Ll9wYXRoKX0sX2JyaW5nVG9CYWNrOmZ1bmN0aW9uKHQpe28uRG9tVXRpbC50b0JhY2sodC5fcGF0aCl9fSksby5leHRlbmQoby5TVkcse2NyZWF0ZTpmdW5jdGlvbih0KXtyZXR1cm4gZS5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLHQpfSxwb2ludHNUb1BhdGg6ZnVuY3Rpb24odCxlKXt2YXIgaSxuLHMscixhLGgsbD1cIlwiO2ZvcihpPTAscz10Lmxlbmd0aDtpPHM7aSsrKXtmb3IoYT10W2ldLG49MCxyPWEubGVuZ3RoO248cjtuKyspaD1hW25dLGwrPShuP1wiTFwiOlwiTVwiKStoLngrXCIgXCIraC55O2wrPWU/by5Ccm93c2VyLnN2Zz9cInpcIjpcInhcIjpcIlwifXJldHVybiBsfHxcIk0wIDBcIn19KSxvLkJyb3dzZXIuc3ZnPSEoIWUuY3JlYXRlRWxlbWVudE5TfHwhby5TVkcuY3JlYXRlKFwic3ZnXCIpLmNyZWF0ZVNWR1JlY3QpLG8uc3ZnPWZ1bmN0aW9uKHQpe3JldHVybiBvLkJyb3dzZXIuc3ZnfHxvLkJyb3dzZXIudm1sP25ldyBvLlNWRyh0KTpudWxsfSxvLkJyb3dzZXIudm1sPSFvLkJyb3dzZXIuc3ZnJiZmdW5jdGlvbigpe3RyeXt2YXIgdD1lLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5pbm5lckhUTUw9Jzx2OnNoYXBlIGFkaj1cIjFcIi8+Jzt2YXIgaT10LmZpcnN0Q2hpbGQ7cmV0dXJuIGkuc3R5bGUuYmVoYXZpb3I9XCJ1cmwoI2RlZmF1bHQjVk1MKVwiLGkmJlwib2JqZWN0XCI9PXR5cGVvZiBpLmFkan1jYXRjaCh0KXtyZXR1cm4hMX19KCksby5TVkcuaW5jbHVkZShvLkJyb3dzZXIudm1sP3tfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcj1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsXCJsZWFmbGV0LXZtbC1jb250YWluZXJcIil9LF91cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl9tYXAuX2FuaW1hdGluZ1pvb218fChvLlJlbmRlcmVyLnByb3RvdHlwZS5fdXBkYXRlLmNhbGwodGhpcyksdGhpcy5maXJlKFwidXBkYXRlXCIpKX0sX2luaXRQYXRoOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX2NvbnRhaW5lcj1vLlNWRy5jcmVhdGUoXCJzaGFwZVwiKTtvLkRvbVV0aWwuYWRkQ2xhc3MoZSxcImxlYWZsZXQtdm1sLXNoYXBlIFwiKyh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lfHxcIlwiKSksZS5jb29yZHNpemU9XCIxIDFcIix0Ll9wYXRoPW8uU1ZHLmNyZWF0ZShcInBhdGhcIiksZS5hcHBlbmRDaGlsZCh0Ll9wYXRoKSx0aGlzLl91cGRhdGVTdHlsZSh0KSx0aGlzLl9sYXllcnNbby5zdGFtcCh0KV09dH0sX2FkZFBhdGg6ZnVuY3Rpb24odCl7dmFyIGU9dC5fY29udGFpbmVyO3RoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChlKSx0Lm9wdGlvbnMuaW50ZXJhY3RpdmUmJnQuYWRkSW50ZXJhY3RpdmVUYXJnZXQoZSl9LF9yZW1vdmVQYXRoOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX2NvbnRhaW5lcjtvLkRvbVV0aWwucmVtb3ZlKGUpLHQucmVtb3ZlSW50ZXJhY3RpdmVUYXJnZXQoZSksZGVsZXRlIHRoaXMuX2xheWVyc1tvLnN0YW1wKHQpXX0sX3VwZGF0ZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX3N0cm9rZSxpPXQuX2ZpbGwsbj10Lm9wdGlvbnMscz10Ll9jb250YWluZXI7cy5zdHJva2VkPSEhbi5zdHJva2Uscy5maWxsZWQ9ISFuLmZpbGwsbi5zdHJva2U/KGV8fChlPXQuX3N0cm9rZT1vLlNWRy5jcmVhdGUoXCJzdHJva2VcIikpLHMuYXBwZW5kQ2hpbGQoZSksZS53ZWlnaHQ9bi53ZWlnaHQrXCJweFwiLGUuY29sb3I9bi5jb2xvcixlLm9wYWNpdHk9bi5vcGFjaXR5LG4uZGFzaEFycmF5P2UuZGFzaFN0eWxlPW8uVXRpbC5pc0FycmF5KG4uZGFzaEFycmF5KT9uLmRhc2hBcnJheS5qb2luKFwiIFwiKTpuLmRhc2hBcnJheS5yZXBsYWNlKC8oICosICopL2csXCIgXCIpOmUuZGFzaFN0eWxlPVwiXCIsZS5lbmRjYXA9bi5saW5lQ2FwLnJlcGxhY2UoXCJidXR0XCIsXCJmbGF0XCIpLGUuam9pbnN0eWxlPW4ubGluZUpvaW4pOmUmJihzLnJlbW92ZUNoaWxkKGUpLHQuX3N0cm9rZT1udWxsKSxuLmZpbGw/KGl8fChpPXQuX2ZpbGw9by5TVkcuY3JlYXRlKFwiZmlsbFwiKSkscy5hcHBlbmRDaGlsZChpKSxpLmNvbG9yPW4uZmlsbENvbG9yfHxuLmNvbG9yLGkub3BhY2l0eT1uLmZpbGxPcGFjaXR5KTppJiYocy5yZW1vdmVDaGlsZChpKSx0Ll9maWxsPW51bGwpfSxfdXBkYXRlQ2lyY2xlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX3BvaW50LnJvdW5kKCksaT1NYXRoLnJvdW5kKHQuX3JhZGl1cyksbj1NYXRoLnJvdW5kKHQuX3JhZGl1c1l8fGkpO3RoaXMuX3NldFBhdGgodCx0Ll9lbXB0eSgpP1wiTTAgMFwiOlwiQUwgXCIrZS54K1wiLFwiK2UueStcIiBcIitpK1wiLFwiK24rXCIgMCwyMzU5MjYwMFwiKX0sX3NldFBhdGg6ZnVuY3Rpb24odCxlKXt0Ll9wYXRoLnY9ZX0sX2JyaW5nVG9Gcm9udDpmdW5jdGlvbih0KXtvLkRvbVV0aWwudG9Gcm9udCh0Ll9jb250YWluZXIpfSxfYnJpbmdUb0JhY2s6ZnVuY3Rpb24odCl7by5Eb21VdGlsLnRvQmFjayh0Ll9jb250YWluZXIpfX06e30pLG8uQnJvd3Nlci52bWwmJihvLlNWRy5jcmVhdGU9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIGUubmFtZXNwYWNlcy5hZGQoXCJsdm1sXCIsXCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiKSxmdW5jdGlvbih0KXtyZXR1cm4gZS5jcmVhdGVFbGVtZW50KFwiPGx2bWw6XCIrdCsnIGNsYXNzPVwibHZtbFwiPicpfX1jYXRjaCh0KXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuY3JlYXRlRWxlbWVudChcIjxcIit0KycgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbFwiIGNsYXNzPVwibHZtbFwiPicpfX19KCkpLG8uQ2FudmFzPW8uUmVuZGVyZXIuZXh0ZW5kKHtnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD1vLlJlbmRlcmVyLnByb3RvdHlwZS5nZXRFdmVudHMuY2FsbCh0aGlzKTtyZXR1cm4gdC52aWV3cHJlcmVzZXQ9dGhpcy5fb25WaWV3UHJlUmVzZXQsdH0sX29uVmlld1ByZVJlc2V0OmZ1bmN0aW9uKCl7dGhpcy5fcG9zdHBvbmVVcGRhdGVQYXRocz0hMH0sb25BZGQ6ZnVuY3Rpb24oKXtvLlJlbmRlcmVyLnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMpLHRoaXMuX2RyYXcoKX0sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250YWluZXI9ZS5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO28uRG9tRXZlbnQub24odCxcIm1vdXNlbW92ZVwiLG8uVXRpbC50aHJvdHRsZSh0aGlzLl9vbk1vdXNlTW92ZSwzMix0aGlzKSx0aGlzKS5vbih0LFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgY29udGV4dG1lbnVcIix0aGlzLl9vbkNsaWNrLHRoaXMpLm9uKHQsXCJtb3VzZW91dFwiLHRoaXMuX2hhbmRsZU1vdXNlT3V0LHRoaXMpLHRoaXMuX2N0eD10LmdldENvbnRleHQoXCIyZFwiKX0sX3VwZGF0ZVBhdGhzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3Bvc3Rwb25lVXBkYXRlUGF0aHMpe3ZhciB0O3RoaXMuX3JlZHJhd0JvdW5kcz1udWxsO2Zvcih2YXIgZSBpbiB0aGlzLl9sYXllcnMpdD10aGlzLl9sYXllcnNbZV0sdC5fdXBkYXRlKCk7dGhpcy5fcmVkcmF3KCl9fSxfdXBkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX21hcC5fYW5pbWF0aW5nWm9vbXx8IXRoaXMuX2JvdW5kcyl7dGhpcy5fZHJhd25MYXllcnM9e30sby5SZW5kZXJlci5wcm90b3R5cGUuX3VwZGF0ZS5jYWxsKHRoaXMpO3ZhciB0PXRoaXMuX2JvdW5kcyxlPXRoaXMuX2NvbnRhaW5lcixpPXQuZ2V0U2l6ZSgpLG49by5Ccm93c2VyLnJldGluYT8yOjE7by5Eb21VdGlsLnNldFBvc2l0aW9uKGUsdC5taW4pLGUud2lkdGg9bippLngsZS5oZWlnaHQ9bippLnksZS5zdHlsZS53aWR0aD1pLngrXCJweFwiLGUuc3R5bGUuaGVpZ2h0PWkueStcInB4XCIsby5Ccm93c2VyLnJldGluYSYmdGhpcy5fY3R4LnNjYWxlKDIsMiksdGhpcy5fY3R4LnRyYW5zbGF0ZSgtdC5taW4ueCwtdC5taW4ueSksdGhpcy5maXJlKFwidXBkYXRlXCIpfX0sX3Jlc2V0OmZ1bmN0aW9uKCl7by5SZW5kZXJlci5wcm90b3R5cGUuX3Jlc2V0LmNhbGwodGhpcyksdGhpcy5fcG9zdHBvbmVVcGRhdGVQYXRocyYmKHRoaXMuX3Bvc3Rwb25lVXBkYXRlUGF0aHM9ITEsdGhpcy5fdXBkYXRlUGF0aHMoKSl9LF9pbml0UGF0aDpmdW5jdGlvbih0KXt0aGlzLl91cGRhdGVEYXNoQXJyYXkodCksdGhpcy5fbGF5ZXJzW28uc3RhbXAodCldPXQ7dmFyIGU9dC5fb3JkZXI9e2xheWVyOnQscHJldjp0aGlzLl9kcmF3TGFzdCxuZXh0Om51bGx9O3RoaXMuX2RyYXdMYXN0JiYodGhpcy5fZHJhd0xhc3QubmV4dD1lKSx0aGlzLl9kcmF3TGFzdD1lLHRoaXMuX2RyYXdGaXJzdD10aGlzLl9kcmF3Rmlyc3R8fHRoaXMuX2RyYXdMYXN0fSxfYWRkUGF0aDpmdW5jdGlvbih0KXt0aGlzLl9yZXF1ZXN0UmVkcmF3KHQpfSxfcmVtb3ZlUGF0aDpmdW5jdGlvbih0KXt2YXIgZT10Ll9vcmRlcixpPWUubmV4dCxuPWUucHJldjtpP2kucHJldj1uOnRoaXMuX2RyYXdMYXN0PW4sbj9uLm5leHQ9aTp0aGlzLl9kcmF3Rmlyc3Q9aSxkZWxldGUgdC5fb3JkZXIsZGVsZXRlIHRoaXMuX2xheWVyc1tvLnN0YW1wKHQpXSx0aGlzLl9yZXF1ZXN0UmVkcmF3KHQpfSxfdXBkYXRlUGF0aDpmdW5jdGlvbih0KXt0aGlzLl9leHRlbmRSZWRyYXdCb3VuZHModCksdC5fcHJvamVjdCgpLHQuX3VwZGF0ZSgpLHRoaXMuX3JlcXVlc3RSZWRyYXcodCl9LF91cGRhdGVTdHlsZTpmdW5jdGlvbih0KXt0aGlzLl91cGRhdGVEYXNoQXJyYXkodCksdGhpcy5fcmVxdWVzdFJlZHJhdyh0KX0sX3VwZGF0ZURhc2hBcnJheTpmdW5jdGlvbih0KXtpZih0Lm9wdGlvbnMuZGFzaEFycmF5KXt2YXIgZSxpPXQub3B0aW9ucy5kYXNoQXJyYXkuc3BsaXQoXCIsXCIpLG49W107Zm9yKGU9MDtlPGkubGVuZ3RoO2UrKyluLnB1c2goTnVtYmVyKGlbZV0pKTt0Lm9wdGlvbnMuX2Rhc2hBcnJheT1ufX0sX3JlcXVlc3RSZWRyYXc6ZnVuY3Rpb24odCl7dGhpcy5fbWFwJiYodGhpcy5fZXh0ZW5kUmVkcmF3Qm91bmRzKHQpLHRoaXMuX3JlZHJhd1JlcXVlc3Q9dGhpcy5fcmVkcmF3UmVxdWVzdHx8by5VdGlsLnJlcXVlc3RBbmltRnJhbWUodGhpcy5fcmVkcmF3LHRoaXMpKX0sX2V4dGVuZFJlZHJhd0JvdW5kczpmdW5jdGlvbih0KXt2YXIgZT0odC5vcHRpb25zLndlaWdodHx8MCkrMTt0aGlzLl9yZWRyYXdCb3VuZHM9dGhpcy5fcmVkcmF3Qm91bmRzfHxuZXcgby5Cb3VuZHMsdGhpcy5fcmVkcmF3Qm91bmRzLmV4dGVuZCh0Ll9weEJvdW5kcy5taW4uc3VidHJhY3QoW2UsZV0pKSx0aGlzLl9yZWRyYXdCb3VuZHMuZXh0ZW5kKHQuX3B4Qm91bmRzLm1heC5hZGQoW2UsZV0pKX0sX3JlZHJhdzpmdW5jdGlvbigpe3RoaXMuX3JlZHJhd1JlcXVlc3Q9bnVsbCx0aGlzLl9yZWRyYXdCb3VuZHMmJih0aGlzLl9yZWRyYXdCb3VuZHMubWluLl9mbG9vcigpLHRoaXMuX3JlZHJhd0JvdW5kcy5tYXguX2NlaWwoKSksdGhpcy5fY2xlYXIoKSx0aGlzLl9kcmF3KCksdGhpcy5fcmVkcmF3Qm91bmRzPW51bGx9LF9jbGVhcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3JlZHJhd0JvdW5kcztpZih0KXt2YXIgZT10LmdldFNpemUoKTt0aGlzLl9jdHguY2xlYXJSZWN0KHQubWluLngsdC5taW4ueSxlLngsZS55KX1lbHNlIHRoaXMuX2N0eC5jbGVhclJlY3QoMCwwLHRoaXMuX2NvbnRhaW5lci53aWR0aCx0aGlzLl9jb250YWluZXIuaGVpZ2h0KX0sX2RyYXc6ZnVuY3Rpb24oKXt2YXIgdCxlPXRoaXMuX3JlZHJhd0JvdW5kcztpZih0aGlzLl9jdHguc2F2ZSgpLGUpe3ZhciBpPWUuZ2V0U2l6ZSgpO3RoaXMuX2N0eC5iZWdpblBhdGgoKSx0aGlzLl9jdHgucmVjdChlLm1pbi54LGUubWluLnksaS54LGkueSksdGhpcy5fY3R4LmNsaXAoKX10aGlzLl9kcmF3aW5nPSEwO2Zvcih2YXIgbj10aGlzLl9kcmF3Rmlyc3Q7bjtuPW4ubmV4dCl0PW4ubGF5ZXIsKCFlfHx0Ll9weEJvdW5kcyYmdC5fcHhCb3VuZHMuaW50ZXJzZWN0cyhlKSkmJnQuX3VwZGF0ZVBhdGgoKTt0aGlzLl9kcmF3aW5nPSExLHRoaXMuX2N0eC5yZXN0b3JlKCl9LF91cGRhdGVQb2x5OmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fZHJhd2luZyl7dmFyIGksbixvLHMscj10Ll9wYXJ0cyxhPXIubGVuZ3RoLGg9dGhpcy5fY3R4O2lmKGEpe2Zvcih0aGlzLl9kcmF3bkxheWVyc1t0Ll9sZWFmbGV0X2lkXT10LGguYmVnaW5QYXRoKCksaC5zZXRMaW5lRGFzaCYmaC5zZXRMaW5lRGFzaCh0Lm9wdGlvbnMmJnQub3B0aW9ucy5fZGFzaEFycmF5fHxbXSksaT0wO2k8YTtpKyspe2ZvcihuPTAsbz1yW2ldLmxlbmd0aDtuPG87bisrKXM9cltpXVtuXSxoW24/XCJsaW5lVG9cIjpcIm1vdmVUb1wiXShzLngscy55KTtlJiZoLmNsb3NlUGF0aCgpfXRoaXMuX2ZpbGxTdHJva2UoaCx0KX19fSxfdXBkYXRlQ2lyY2xlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2RyYXdpbmcmJiF0Ll9lbXB0eSgpKXt2YXIgZT10Ll9wb2ludCxpPXRoaXMuX2N0eCxuPXQuX3JhZGl1cyxvPSh0Ll9yYWRpdXNZfHxuKS9uO3RoaXMuX2RyYXduTGF5ZXJzW3QuX2xlYWZsZXRfaWRdPXQsMSE9PW8mJihpLnNhdmUoKSxpLnNjYWxlKDEsbykpLGkuYmVnaW5QYXRoKCksaS5hcmMoZS54LGUueS9vLG4sMCwyKk1hdGguUEksITEpLDEhPT1vJiZpLnJlc3RvcmUoKSx0aGlzLl9maWxsU3Ryb2tlKGksdCl9fSxfZmlsbFN0cm9rZTpmdW5jdGlvbih0LGUpe3ZhciBpPWUub3B0aW9ucztpLmZpbGwmJih0Lmdsb2JhbEFscGhhPWkuZmlsbE9wYWNpdHksdC5maWxsU3R5bGU9aS5maWxsQ29sb3J8fGkuY29sb3IsdC5maWxsKGkuZmlsbFJ1bGV8fFwiZXZlbm9kZFwiKSksaS5zdHJva2UmJjAhPT1pLndlaWdodCYmKHQuZ2xvYmFsQWxwaGE9aS5vcGFjaXR5LHQubGluZVdpZHRoPWkud2VpZ2h0LHQuc3Ryb2tlU3R5bGU9aS5jb2xvcix0LmxpbmVDYXA9aS5saW5lQ2FwLHQubGluZUpvaW49aS5saW5lSm9pbix0LnN0cm9rZSgpKX0sX29uQ2xpY2s6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGksbj10aGlzLl9tYXAubW91c2VFdmVudFRvTGF5ZXJQb2ludCh0KSxzPXRoaXMuX2RyYXdGaXJzdDtzO3M9cy5uZXh0KWU9cy5sYXllcixlLm9wdGlvbnMuaW50ZXJhY3RpdmUmJmUuX2NvbnRhaW5zUG9pbnQobikmJiF0aGlzLl9tYXAuX2RyYWdnYWJsZU1vdmVkKGUpJiYoaT1lKTtpJiYoby5Eb21FdmVudC5fZmFrZVN0b3AodCksdGhpcy5fZmlyZUV2ZW50KFtpXSx0KSl9LF9vbk1vdXNlTW92ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9tYXAmJiF0aGlzLl9tYXAuZHJhZ2dpbmcubW92aW5nKCkmJiF0aGlzLl9tYXAuX2FuaW1hdGluZ1pvb20pe3ZhciBlPXRoaXMuX21hcC5tb3VzZUV2ZW50VG9MYXllclBvaW50KHQpO3RoaXMuX2hhbmRsZU1vdXNlSG92ZXIodCxlKX19LF9oYW5kbGVNb3VzZU91dDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9ob3ZlcmVkTGF5ZXI7ZSYmKG8uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuX2ZpcmVFdmVudChbZV0sdCxcIm1vdXNlb3V0XCIpLHRoaXMuX2hvdmVyZWRMYXllcj1udWxsKX0sX2hhbmRsZU1vdXNlSG92ZXI6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGksbixzPXRoaXMuX2RyYXdGaXJzdDtzO3M9cy5uZXh0KWk9cy5sYXllcixpLm9wdGlvbnMuaW50ZXJhY3RpdmUmJmkuX2NvbnRhaW5zUG9pbnQoZSkmJihuPWkpO24hPT10aGlzLl9ob3ZlcmVkTGF5ZXImJih0aGlzLl9oYW5kbGVNb3VzZU91dCh0KSxuJiYoby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lcixcImxlYWZsZXQtaW50ZXJhY3RpdmVcIiksdGhpcy5fZmlyZUV2ZW50KFtuXSx0LFwibW91c2VvdmVyXCIpLHRoaXMuX2hvdmVyZWRMYXllcj1uKSksdGhpcy5faG92ZXJlZExheWVyJiZ0aGlzLl9maXJlRXZlbnQoW3RoaXMuX2hvdmVyZWRMYXllcl0sdCl9LF9maXJlRXZlbnQ6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX21hcC5fZmlyZURPTUV2ZW50KGUsaXx8ZS50eXBlLHQpfSxfYnJpbmdUb0Zyb250OmZ1bmN0aW9uKHQpe3ZhciBlPXQuX29yZGVyLGk9ZS5uZXh0LG49ZS5wcmV2O2kmJihpLnByZXY9bixuP24ubmV4dD1pOmkmJih0aGlzLl9kcmF3Rmlyc3Q9aSksZS5wcmV2PXRoaXMuX2RyYXdMYXN0LHRoaXMuX2RyYXdMYXN0Lm5leHQ9ZSxlLm5leHQ9bnVsbCx0aGlzLl9kcmF3TGFzdD1lLHRoaXMuX3JlcXVlc3RSZWRyYXcodCkpfSxfYnJpbmdUb0JhY2s6ZnVuY3Rpb24odCl7dmFyIGU9dC5fb3JkZXIsaT1lLm5leHQsbj1lLnByZXY7biYmKG4ubmV4dD1pLGk/aS5wcmV2PW46biYmKHRoaXMuX2RyYXdMYXN0PW4pLGUucHJldj1udWxsLGUubmV4dD10aGlzLl9kcmF3Rmlyc3QsdGhpcy5fZHJhd0ZpcnN0LnByZXY9ZSx0aGlzLl9kcmF3Rmlyc3Q9ZSx0aGlzLl9yZXF1ZXN0UmVkcmF3KHQpKX19KSxvLkJyb3dzZXIuY2FudmFzPWZ1bmN0aW9uKCl7cmV0dXJuISFlLmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dH0oKSxvLmNhbnZhcz1mdW5jdGlvbih0KXtyZXR1cm4gby5Ccm93c2VyLmNhbnZhcz9uZXcgby5DYW52YXModCk6bnVsbH0sby5Qb2x5bGluZS5wcm90b3R5cGUuX2NvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24odCxlKXt2YXIgaSxuLHMscixhLGgsbD10aGlzLl9jbGlja1RvbGVyYW5jZSgpO2lmKCF0aGlzLl9weEJvdW5kcy5jb250YWlucyh0KSlyZXR1cm4hMTtmb3IoaT0wLHI9dGhpcy5fcGFydHMubGVuZ3RoO2k8cjtpKyspZm9yKGg9dGhpcy5fcGFydHNbaV0sbj0wLGE9aC5sZW5ndGgscz1hLTE7bjxhO3M9bisrKWlmKChlfHwwIT09bikmJm8uTGluZVV0aWwucG9pbnRUb1NlZ21lbnREaXN0YW5jZSh0LGhbc10saFtuXSk8PWwpcmV0dXJuITA7cmV0dXJuITF9LG8uUG9seWdvbi5wcm90b3R5cGUuX2NvbnRhaW5zUG9pbnQ9ZnVuY3Rpb24odCl7dmFyIGUsaSxuLHMscixhLGgsbCx1PSExO2lmKCF0aGlzLl9weEJvdW5kcy5jb250YWlucyh0KSlyZXR1cm4hMTtmb3Iocz0wLGg9dGhpcy5fcGFydHMubGVuZ3RoO3M8aDtzKyspZm9yKGU9dGhpcy5fcGFydHNbc10scj0wLGw9ZS5sZW5ndGgsYT1sLTE7cjxsO2E9cisrKWk9ZVtyXSxuPWVbYV0saS55PnQueSE9bi55PnQueSYmdC54PChuLngtaS54KSoodC55LWkueSkvKG4ueS1pLnkpK2kueCYmKHU9IXUpO3JldHVybiB1fHxvLlBvbHlsaW5lLnByb3RvdHlwZS5fY29udGFpbnNQb2ludC5jYWxsKHRoaXMsdCwhMCl9LG8uQ2lyY2xlTWFya2VyLnByb3RvdHlwZS5fY29udGFpbnNQb2ludD1mdW5jdGlvbih0KXtyZXR1cm4gdC5kaXN0YW5jZVRvKHRoaXMuX3BvaW50KTw9dGhpcy5fcmFkaXVzK3RoaXMuX2NsaWNrVG9sZXJhbmNlKCl9LG8uR2VvSlNPTj1vLkZlYXR1cmVHcm91cC5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCxlKXtvLnNldE9wdGlvbnModGhpcyxlKSx0aGlzLl9sYXllcnM9e30sdCYmdGhpcy5hZGREYXRhKHQpfSxhZGREYXRhOmZ1bmN0aW9uKHQpe3ZhciBlLGksbixzPW8uVXRpbC5pc0FycmF5KHQpP3Q6dC5mZWF0dXJlcztpZihzKXtmb3IoZT0wLGk9cy5sZW5ndGg7ZTxpO2UrKyluPXNbZV0sKG4uZ2VvbWV0cmllc3x8bi5nZW9tZXRyeXx8bi5mZWF0dXJlc3x8bi5jb29yZGluYXRlcykmJnRoaXMuYWRkRGF0YShuKTtyZXR1cm4gdGhpc312YXIgcj10aGlzLm9wdGlvbnM7aWYoci5maWx0ZXImJiFyLmZpbHRlcih0KSlyZXR1cm4gdGhpczt2YXIgYT1vLkdlb0pTT04uZ2VvbWV0cnlUb0xheWVyKHQscik7cmV0dXJuIGE/KGEuZmVhdHVyZT1vLkdlb0pTT04uYXNGZWF0dXJlKHQpLGEuZGVmYXVsdE9wdGlvbnM9YS5vcHRpb25zLHRoaXMucmVzZXRTdHlsZShhKSxyLm9uRWFjaEZlYXR1cmUmJnIub25FYWNoRmVhdHVyZSh0LGEpLHRoaXMuYWRkTGF5ZXIoYSkpOnRoaXN9LHJlc2V0U3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQub3B0aW9ucz1vLlV0aWwuZXh0ZW5kKHt9LHQuZGVmYXVsdE9wdGlvbnMpLHRoaXMuX3NldExheWVyU3R5bGUodCx0aGlzLm9wdGlvbnMuc3R5bGUpLHRoaXN9LHNldFN0eWxlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmVhY2hMYXllcihmdW5jdGlvbihlKXt0aGlzLl9zZXRMYXllclN0eWxlKGUsdCl9LHRoaXMpfSxfc2V0TGF5ZXJTdHlsZTpmdW5jdGlvbih0LGUpe1wiZnVuY3Rpb25cIj09dHlwZW9mIGUmJihlPWUodC5mZWF0dXJlKSksdC5zZXRTdHlsZSYmdC5zZXRTdHlsZShlKX19KSxvLmV4dGVuZChvLkdlb0pTT04se2dlb21ldHJ5VG9MYXllcjpmdW5jdGlvbih0LGUpe3ZhciBpLG4scyxyLGE9XCJGZWF0dXJlXCI9PT10LnR5cGU/dC5nZW9tZXRyeTp0LGg9YT9hLmNvb3JkaW5hdGVzOm51bGwsbD1bXSx1PWUmJmUucG9pbnRUb0xheWVyLGM9ZSYmZS5jb29yZHNUb0xhdExuZ3x8dGhpcy5jb29yZHNUb0xhdExuZztpZighaCYmIWEpcmV0dXJuIG51bGw7c3dpdGNoKGEudHlwZSl7Y2FzZVwiUG9pbnRcIjpyZXR1cm4gaT1jKGgpLHU/dSh0LGkpOm5ldyBvLk1hcmtlcihpKTtjYXNlXCJNdWx0aVBvaW50XCI6Zm9yKHM9MCxyPWgubGVuZ3RoO3M8cjtzKyspaT1jKGhbc10pLGwucHVzaCh1P3UodCxpKTpuZXcgby5NYXJrZXIoaSkpO3JldHVybiBuZXcgby5GZWF0dXJlR3JvdXAobCk7Y2FzZVwiTGluZVN0cmluZ1wiOmNhc2VcIk11bHRpTGluZVN0cmluZ1wiOnJldHVybiBuPXRoaXMuY29vcmRzVG9MYXRMbmdzKGgsXCJMaW5lU3RyaW5nXCI9PT1hLnR5cGU/MDoxLGMpLG5ldyBvLlBvbHlsaW5lKG4sZSk7Y2FzZVwiUG9seWdvblwiOmNhc2VcIk11bHRpUG9seWdvblwiOnJldHVybiBuPXRoaXMuY29vcmRzVG9MYXRMbmdzKGgsXCJQb2x5Z29uXCI9PT1hLnR5cGU/MToyLGMpLG5ldyBvLlBvbHlnb24obixlKTtjYXNlXCJHZW9tZXRyeUNvbGxlY3Rpb25cIjpmb3Iocz0wLHI9YS5nZW9tZXRyaWVzLmxlbmd0aDtzPHI7cysrKXt2YXIgZD10aGlzLmdlb21ldHJ5VG9MYXllcih7Z2VvbWV0cnk6YS5nZW9tZXRyaWVzW3NdLHR5cGU6XCJGZWF0dXJlXCIscHJvcGVydGllczp0LnByb3BlcnRpZXN9LGUpO2QmJmwucHVzaChkKX1yZXR1cm4gbmV3IG8uRmVhdHVyZUdyb3VwKGwpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBHZW9KU09OIG9iamVjdC5cIil9fSxjb29yZHNUb0xhdExuZzpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uTGF0TG5nKHRbMV0sdFswXSx0WzJdKX0sY29vcmRzVG9MYXRMbmdzOmZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG4sbz1bXSxzPTAscj10Lmxlbmd0aDtzPHI7cysrKW49ZT90aGlzLmNvb3Jkc1RvTGF0TG5ncyh0W3NdLGUtMSxpKTooaXx8dGhpcy5jb29yZHNUb0xhdExuZykodFtzXSksby5wdXNoKG4pO3JldHVybiBvfSxsYXRMbmdUb0Nvb3JkczpmdW5jdGlvbih0KXtyZXR1cm4gdC5hbHQhPT1pP1t0LmxuZyx0LmxhdCx0LmFsdF06W3QubG5nLHQubGF0XX0sbGF0TG5nc1RvQ29vcmRzOmZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49W10scz0wLHI9dC5sZW5ndGg7czxyO3MrKyluLnB1c2goZT9vLkdlb0pTT04ubGF0TG5nc1RvQ29vcmRzKHRbc10sZS0xLGkpOm8uR2VvSlNPTi5sYXRMbmdUb0Nvb3Jkcyh0W3NdKSk7cmV0dXJuIWUmJmkmJm4ucHVzaChuWzBdKSxufSxnZXRGZWF0dXJlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZmVhdHVyZT9vLmV4dGVuZCh7fSx0LmZlYXR1cmUse2dlb21ldHJ5OmV9KTpvLkdlb0pTT04uYXNGZWF0dXJlKGUpfSxhc0ZlYXR1cmU6ZnVuY3Rpb24odCl7cmV0dXJuXCJGZWF0dXJlXCI9PT10LnR5cGV8fFwiRmVhdHVyZUNvbGxlY3Rpb25cIj09PXQudHlwZT90Ont0eXBlOlwiRmVhdHVyZVwiLHByb3BlcnRpZXM6e30sZ2VvbWV0cnk6dH19fSk7dmFyIGE9e3RvR2VvSlNPTjpmdW5jdGlvbigpe3JldHVybiBvLkdlb0pTT04uZ2V0RmVhdHVyZSh0aGlzLHt0eXBlOlwiUG9pbnRcIixjb29yZGluYXRlczpvLkdlb0pTT04ubGF0TG5nVG9Db29yZHModGhpcy5nZXRMYXRMbmcoKSl9KX19O28uTWFya2VyLmluY2x1ZGUoYSksby5DaXJjbGUuaW5jbHVkZShhKSxvLkNpcmNsZU1hcmtlci5pbmNsdWRlKGEpLG8uUG9seWxpbmUucHJvdG90eXBlLnRvR2VvSlNPTj1mdW5jdGlvbigpe3ZhciB0PSFvLlBvbHlsaW5lLl9mbGF0KHRoaXMuX2xhdGxuZ3MpLGU9by5HZW9KU09OLmxhdExuZ3NUb0Nvb3Jkcyh0aGlzLl9sYXRsbmdzLHQ/MTowKTtyZXR1cm4gby5HZW9KU09OLmdldEZlYXR1cmUodGhpcyx7dHlwZToodD9cIk11bHRpXCI6XCJcIikrXCJMaW5lU3RyaW5nXCIsY29vcmRpbmF0ZXM6ZX0pfSxvLlBvbHlnb24ucHJvdG90eXBlLnRvR2VvSlNPTj1mdW5jdGlvbigpe3ZhciB0PSFvLlBvbHlsaW5lLl9mbGF0KHRoaXMuX2xhdGxuZ3MpLGU9dCYmIW8uUG9seWxpbmUuX2ZsYXQodGhpcy5fbGF0bG5nc1swXSksaT1vLkdlb0pTT04ubGF0TG5nc1RvQ29vcmRzKHRoaXMuX2xhdGxuZ3MsZT8yOnQ/MTowLCEwKTtyZXR1cm4gdHx8KGk9W2ldKSxvLkdlb0pTT04uZ2V0RmVhdHVyZSh0aGlzLHt0eXBlOihlP1wiTXVsdGlcIjpcIlwiKStcIlBvbHlnb25cIixjb29yZGluYXRlczppfSl9LG8uTGF5ZXJHcm91cC5pbmNsdWRlKHt0b011bHRpUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgdD1bXTtyZXR1cm4gdGhpcy5lYWNoTGF5ZXIoZnVuY3Rpb24oZSl7dC5wdXNoKGUudG9HZW9KU09OKCkuZ2VvbWV0cnkuY29vcmRpbmF0ZXMpfSksby5HZW9KU09OLmdldEZlYXR1cmUodGhpcyx7dHlwZTpcIk11bHRpUG9pbnRcIixjb29yZGluYXRlczp0fSl9LHRvR2VvSlNPTjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZmVhdHVyZSYmdGhpcy5mZWF0dXJlLmdlb21ldHJ5JiZ0aGlzLmZlYXR1cmUuZ2VvbWV0cnkudHlwZTtpZihcIk11bHRpUG9pbnRcIj09PXQpcmV0dXJuIHRoaXMudG9NdWx0aVBvaW50KCk7dmFyIGU9XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PXQsaT1bXTtyZXR1cm4gdGhpcy5lYWNoTGF5ZXIoZnVuY3Rpb24odCl7aWYodC50b0dlb0pTT04pe3ZhciBuPXQudG9HZW9KU09OKCk7aS5wdXNoKGU/bi5nZW9tZXRyeTpvLkdlb0pTT04uYXNGZWF0dXJlKG4pKX19KSxlP28uR2VvSlNPTi5nZXRGZWF0dXJlKHRoaXMse2dlb21ldHJpZXM6aSx0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCJ9KTp7dHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsZmVhdHVyZXM6aX19fSksby5nZW9KU09OPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLkdlb0pTT04odCxlKX0sby5nZW9Kc29uPW8uZ2VvSlNPTixvLkRyYWdnYWJsZT1vLkV2ZW50ZWQuZXh0ZW5kKHtvcHRpb25zOntjbGlja1RvbGVyYW5jZTozfSxzdGF0aWNzOntTVEFSVDpvLkJyb3dzZXIudG91Y2g/W1widG91Y2hzdGFydFwiLFwibW91c2Vkb3duXCJdOltcIm1vdXNlZG93blwiXSxFTkQ6e21vdXNlZG93bjpcIm1vdXNldXBcIix0b3VjaHN0YXJ0OlwidG91Y2hlbmRcIixwb2ludGVyZG93bjpcInRvdWNoZW5kXCIsTVNQb2ludGVyRG93bjpcInRvdWNoZW5kXCJ9LE1PVkU6e21vdXNlZG93bjpcIm1vdXNlbW92ZVwiLHRvdWNoc3RhcnQ6XCJ0b3VjaG1vdmVcIixwb2ludGVyZG93bjpcInRvdWNobW92ZVwiLE1TUG9pbnRlckRvd246XCJ0b3VjaG1vdmVcIn19LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlLGkpe3RoaXMuX2VsZW1lbnQ9dCx0aGlzLl9kcmFnU3RhcnRUYXJnZXQ9ZXx8dCx0aGlzLl9wcmV2ZW50T3V0bGluZT1pfSxlbmFibGU6ZnVuY3Rpb24oKXt0aGlzLl9lbmFibGVkfHwoby5Eb21FdmVudC5vbih0aGlzLl9kcmFnU3RhcnRUYXJnZXQsby5EcmFnZ2FibGUuU1RBUlQuam9pbihcIiBcIiksdGhpcy5fb25Eb3duLHRoaXMpLHRoaXMuX2VuYWJsZWQ9ITApfSxkaXNhYmxlOmZ1bmN0aW9uKCl7dGhpcy5fZW5hYmxlZCYmKG8uRHJhZ2dhYmxlLl9kcmFnZ2luZz09PXRoaXMmJnRoaXMuZmluaXNoRHJhZygpLG8uRG9tRXZlbnQub2ZmKHRoaXMuX2RyYWdTdGFydFRhcmdldCxvLkRyYWdnYWJsZS5TVEFSVC5qb2luKFwiIFwiKSx0aGlzLl9vbkRvd24sdGhpcyksdGhpcy5fZW5hYmxlZD0hMSx0aGlzLl9tb3ZlZD0hMSl9LF9vbkRvd246ZnVuY3Rpb24odCl7aWYoIXQuX3NpbXVsYXRlZCYmdGhpcy5fZW5hYmxlZCYmKHRoaXMuX21vdmVkPSExLCFvLkRvbVV0aWwuaGFzQ2xhc3ModGhpcy5fZWxlbWVudCxcImxlYWZsZXQtem9vbS1hbmltXCIpJiYhKG8uRHJhZ2dhYmxlLl9kcmFnZ2luZ3x8dC5zaGlmdEtleXx8MSE9PXQud2hpY2gmJjEhPT10LmJ1dHRvbiYmIXQudG91Y2hlc3x8KG8uRHJhZ2dhYmxlLl9kcmFnZ2luZz10aGlzLHRoaXMuX3ByZXZlbnRPdXRsaW5lJiZvLkRvbVV0aWwucHJldmVudE91dGxpbmUodGhpcy5fZWxlbWVudCksby5Eb21VdGlsLmRpc2FibGVJbWFnZURyYWcoKSxvLkRvbVV0aWwuZGlzYWJsZVRleHRTZWxlY3Rpb24oKSx0aGlzLl9tb3ZpbmcpKSkpe3RoaXMuZmlyZShcImRvd25cIik7dmFyIGk9dC50b3VjaGVzP3QudG91Y2hlc1swXTp0O3RoaXMuX3N0YXJ0UG9pbnQ9bmV3IG8uUG9pbnQoaS5jbGllbnRYLGkuY2xpZW50WSksby5Eb21FdmVudC5vbihlLG8uRHJhZ2dhYmxlLk1PVkVbdC50eXBlXSx0aGlzLl9vbk1vdmUsdGhpcykub24oZSxvLkRyYWdnYWJsZS5FTkRbdC50eXBlXSx0aGlzLl9vblVwLHRoaXMpfX0sX29uTW92ZTpmdW5jdGlvbihpKXtpZighaS5fc2ltdWxhdGVkJiZ0aGlzLl9lbmFibGVkKXtpZihpLnRvdWNoZXMmJmkudG91Y2hlcy5sZW5ndGg+MSlyZXR1cm4gdm9pZCh0aGlzLl9tb3ZlZD0hMCk7dmFyIG49aS50b3VjaGVzJiYxPT09aS50b3VjaGVzLmxlbmd0aD9pLnRvdWNoZXNbMF06aSxzPW5ldyBvLlBvaW50KG4uY2xpZW50WCxuLmNsaWVudFkpLHI9cy5zdWJ0cmFjdCh0aGlzLl9zdGFydFBvaW50KTsoci54fHxyLnkpJiYoTWF0aC5hYnMoci54KStNYXRoLmFicyhyLnkpPHRoaXMub3B0aW9ucy5jbGlja1RvbGVyYW5jZXx8KG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQoaSksdGhpcy5fbW92ZWR8fCh0aGlzLmZpcmUoXCJkcmFnc3RhcnRcIiksdGhpcy5fbW92ZWQ9ITAsdGhpcy5fc3RhcnRQb3M9by5Eb21VdGlsLmdldFBvc2l0aW9uKHRoaXMuX2VsZW1lbnQpLnN1YnRyYWN0KHIpLG8uRG9tVXRpbC5hZGRDbGFzcyhlLmJvZHksXCJsZWFmbGV0LWRyYWdnaW5nXCIpLHRoaXMuX2xhc3RUYXJnZXQ9aS50YXJnZXR8fGkuc3JjRWxlbWVudCx0LlNWR0VsZW1lbnRJbnN0YW5jZSYmdGhpcy5fbGFzdFRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnRJbnN0YW5jZSYmKHRoaXMuX2xhc3RUYXJnZXQ9dGhpcy5fbGFzdFRhcmdldC5jb3JyZXNwb25kaW5nVXNlRWxlbWVudCksby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2xhc3RUYXJnZXQsXCJsZWFmbGV0LWRyYWctdGFyZ2V0XCIpKSx0aGlzLl9uZXdQb3M9dGhpcy5fc3RhcnRQb3MuYWRkKHIpLHRoaXMuX21vdmluZz0hMCxvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2FuaW1SZXF1ZXN0KSx0aGlzLl9sYXN0RXZlbnQ9aSx0aGlzLl9hbmltUmVxdWVzdD1vLlV0aWwucmVxdWVzdEFuaW1GcmFtZSh0aGlzLl91cGRhdGVQb3NpdGlvbix0aGlzLCEwKSkpfX0sX3VwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9e29yaWdpbmFsRXZlbnQ6dGhpcy5fbGFzdEV2ZW50fTt0aGlzLmZpcmUoXCJwcmVkcmFnXCIsdCksby5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX2VsZW1lbnQsdGhpcy5fbmV3UG9zKSx0aGlzLmZpcmUoXCJkcmFnXCIsdCl9LF9vblVwOmZ1bmN0aW9uKHQpeyF0Ll9zaW11bGF0ZWQmJnRoaXMuX2VuYWJsZWQmJnRoaXMuZmluaXNoRHJhZygpfSxmaW5pc2hEcmFnOmZ1bmN0aW9uKCl7by5Eb21VdGlsLnJlbW92ZUNsYXNzKGUuYm9keSxcImxlYWZsZXQtZHJhZ2dpbmdcIiksdGhpcy5fbGFzdFRhcmdldCYmKG8uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9sYXN0VGFyZ2V0LFwibGVhZmxldC1kcmFnLXRhcmdldFwiKSx0aGlzLl9sYXN0VGFyZ2V0PW51bGwpO2Zvcih2YXIgdCBpbiBvLkRyYWdnYWJsZS5NT1ZFKW8uRG9tRXZlbnQub2ZmKGUsby5EcmFnZ2FibGUuTU9WRVt0XSx0aGlzLl9vbk1vdmUsdGhpcykub2ZmKGUsby5EcmFnZ2FibGUuRU5EW3RdLHRoaXMuX29uVXAsdGhpcyk7by5Eb21VdGlsLmVuYWJsZUltYWdlRHJhZygpLG8uRG9tVXRpbC5lbmFibGVUZXh0U2VsZWN0aW9uKCksdGhpcy5fbW92ZWQmJnRoaXMuX21vdmluZyYmKG8uVXRpbC5jYW5jZWxBbmltRnJhbWUodGhpcy5fYW5pbVJlcXVlc3QpLHRoaXMuZmlyZShcImRyYWdlbmRcIix7ZGlzdGFuY2U6dGhpcy5fbmV3UG9zLmRpc3RhbmNlVG8odGhpcy5fc3RhcnRQb3MpfSkpLHRoaXMuX21vdmluZz0hMSxvLkRyYWdnYWJsZS5fZHJhZ2dpbmc9ITF9fSksby5IYW5kbGVyPW8uQ2xhc3MuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuX21hcD10fSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5hYmxlZD90aGlzOih0aGlzLl9lbmFibGVkPSEwLHRoaXMuYWRkSG9va3MoKSx0aGlzKX0sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVkPyh0aGlzLl9lbmFibGVkPSExLHRoaXMucmVtb3ZlSG9va3MoKSx0aGlzKTp0aGlzfSxlbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9lbmFibGVkfX0pLG8uTWFwLm1lcmdlT3B0aW9ucyh7ZHJhZ2dpbmc6ITAsaW5lcnRpYTohby5Ccm93c2VyLmFuZHJvaWQyMyxpbmVydGlhRGVjZWxlcmF0aW9uOjM0MDAsaW5lcnRpYU1heFNwZWVkOjEvMCxlYXNlTGluZWFyaXR5Oi4yLHdvcmxkQ29weUp1bXA6ITEsbWF4Qm91bmRzVmlzY29zaXR5OjB9KSxvLk1hcC5EcmFnPW8uSGFuZGxlci5leHRlbmQoe2FkZEhvb2tzOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2RyYWdnYWJsZSl7dmFyIHQ9dGhpcy5fbWFwO3RoaXMuX2RyYWdnYWJsZT1uZXcgby5EcmFnZ2FibGUodC5fbWFwUGFuZSx0Ll9jb250YWluZXIpLHRoaXMuX2RyYWdnYWJsZS5vbih7ZG93bjp0aGlzLl9vbkRvd24sZHJhZ3N0YXJ0OnRoaXMuX29uRHJhZ1N0YXJ0LGRyYWc6dGhpcy5fb25EcmFnLGRyYWdlbmQ6dGhpcy5fb25EcmFnRW5kfSx0aGlzKSx0aGlzLl9kcmFnZ2FibGUub24oXCJwcmVkcmFnXCIsdGhpcy5fb25QcmVEcmFnTGltaXQsdGhpcyksdC5vcHRpb25zLndvcmxkQ29weUp1bXAmJih0aGlzLl9kcmFnZ2FibGUub24oXCJwcmVkcmFnXCIsdGhpcy5fb25QcmVEcmFnV3JhcCx0aGlzKSx0Lm9uKFwiem9vbWVuZFwiLHRoaXMuX29uWm9vbUVuZCx0aGlzKSx0LndoZW5SZWFkeSh0aGlzLl9vblpvb21FbmQsdGhpcykpfW8uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9tYXAuX2NvbnRhaW5lcixcImxlYWZsZXQtZ3JhYiBsZWFmbGV0LXRvdWNoLWRyYWdcIiksdGhpcy5fZHJhZ2dhYmxlLmVuYWJsZSgpLHRoaXMuX3Bvc2l0aW9ucz1bXSx0aGlzLl90aW1lcz1bXX0scmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fbWFwLl9jb250YWluZXIsXCJsZWFmbGV0LWdyYWJcIiksby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX21hcC5fY29udGFpbmVyLFwibGVhZmxldC10b3VjaC1kcmFnXCIpLHRoaXMuX2RyYWdnYWJsZS5kaXNhYmxlKCl9LG1vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyYWdnYWJsZSYmdGhpcy5fZHJhZ2dhYmxlLl9tb3ZlZH0sbW92aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RyYWdnYWJsZSYmdGhpcy5fZHJhZ2dhYmxlLl9tb3Zpbmd9LF9vbkRvd246ZnVuY3Rpb24oKXt0aGlzLl9tYXAuX3N0b3AoKX0sX29uRHJhZ1N0YXJ0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwO2lmKHRoaXMuX21hcC5vcHRpb25zLm1heEJvdW5kcyYmdGhpcy5fbWFwLm9wdGlvbnMubWF4Qm91bmRzVmlzY29zaXR5KXt2YXIgZT1vLmxhdExuZ0JvdW5kcyh0aGlzLl9tYXAub3B0aW9ucy5tYXhCb3VuZHMpO3RoaXMuX29mZnNldExpbWl0PW8uYm91bmRzKHRoaXMuX21hcC5sYXRMbmdUb0NvbnRhaW5lclBvaW50KGUuZ2V0Tm9ydGhXZXN0KCkpLm11bHRpcGx5QnkoLTEpLHRoaXMuX21hcC5sYXRMbmdUb0NvbnRhaW5lclBvaW50KGUuZ2V0U291dGhFYXN0KCkpLm11bHRpcGx5QnkoLTEpLmFkZCh0aGlzLl9tYXAuZ2V0U2l6ZSgpKSksdGhpcy5fdmlzY29zaXR5PU1hdGgubWluKDEsTWF0aC5tYXgoMCx0aGlzLl9tYXAub3B0aW9ucy5tYXhCb3VuZHNWaXNjb3NpdHkpKX1lbHNlIHRoaXMuX29mZnNldExpbWl0PW51bGw7dC5maXJlKFwibW92ZXN0YXJ0XCIpLmZpcmUoXCJkcmFnc3RhcnRcIiksdC5vcHRpb25zLmluZXJ0aWEmJih0aGlzLl9wb3NpdGlvbnM9W10sdGhpcy5fdGltZXM9W10pfSxfb25EcmFnOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX21hcC5vcHRpb25zLmluZXJ0aWEpe3ZhciBlPXRoaXMuX2xhc3RUaW1lPStuZXcgRGF0ZSxpPXRoaXMuX2xhc3RQb3M9dGhpcy5fZHJhZ2dhYmxlLl9hYnNQb3N8fHRoaXMuX2RyYWdnYWJsZS5fbmV3UG9zO3RoaXMuX3Bvc2l0aW9ucy5wdXNoKGkpLHRoaXMuX3RpbWVzLnB1c2goZSksZS10aGlzLl90aW1lc1swXT41MCYmKHRoaXMuX3Bvc2l0aW9ucy5zaGlmdCgpLHRoaXMuX3RpbWVzLnNoaWZ0KCkpfXRoaXMuX21hcC5maXJlKFwibW92ZVwiLHQpLmZpcmUoXCJkcmFnXCIsdCl9LF9vblpvb21FbmQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXAuZ2V0U2l6ZSgpLmRpdmlkZUJ5KDIpLGU9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludChbMCwwXSk7dGhpcy5faW5pdGlhbFdvcmxkT2Zmc2V0PWUuc3VidHJhY3QodCkueCx0aGlzLl93b3JsZFdpZHRoPXRoaXMuX21hcC5nZXRQaXhlbFdvcmxkQm91bmRzKCkuZ2V0U2l6ZSgpLnh9LF92aXNjb3VzTGltaXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC0odC1lKSp0aGlzLl92aXNjb3NpdHl9LF9vblByZURyYWdMaW1pdDpmdW5jdGlvbigpe2lmKHRoaXMuX3Zpc2Nvc2l0eSYmdGhpcy5fb2Zmc2V0TGltaXQpe3ZhciB0PXRoaXMuX2RyYWdnYWJsZS5fbmV3UG9zLnN1YnRyYWN0KHRoaXMuX2RyYWdnYWJsZS5fc3RhcnRQb3MpLGU9dGhpcy5fb2Zmc2V0TGltaXQ7dC54PGUubWluLngmJih0Lng9dGhpcy5fdmlzY291c0xpbWl0KHQueCxlLm1pbi54KSksdC55PGUubWluLnkmJih0Lnk9dGhpcy5fdmlzY291c0xpbWl0KHQueSxlLm1pbi55KSksdC54PmUubWF4LngmJih0Lng9dGhpcy5fdmlzY291c0xpbWl0KHQueCxlLm1heC54KSksdC55PmUubWF4LnkmJih0Lnk9dGhpcy5fdmlzY291c0xpbWl0KHQueSxlLm1heC55KSksdGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3M9dGhpcy5fZHJhZ2dhYmxlLl9zdGFydFBvcy5hZGQodCl9fSxfb25QcmVEcmFnV3JhcDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3dvcmxkV2lkdGgsZT1NYXRoLnJvdW5kKHQvMiksaT10aGlzLl9pbml0aWFsV29ybGRPZmZzZXQsbj10aGlzLl9kcmFnZ2FibGUuX25ld1Bvcy54LG89KG4tZStpKSV0K2UtaSxzPShuK2UraSkldC1lLWkscj1NYXRoLmFicyhvK2kpPE1hdGguYWJzKHMraSk/bzpzO3RoaXMuX2RyYWdnYWJsZS5fYWJzUG9zPXRoaXMuX2RyYWdnYWJsZS5fbmV3UG9zLmNsb25lKCksdGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3MueD1yfSxfb25EcmFnRW5kOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcCxpPWUub3B0aW9ucyxuPSFpLmluZXJ0aWF8fHRoaXMuX3RpbWVzLmxlbmd0aDwyO2lmKGUuZmlyZShcImRyYWdlbmRcIix0KSxuKWUuZmlyZShcIm1vdmVlbmRcIik7ZWxzZXt2YXIgcz10aGlzLl9sYXN0UG9zLnN1YnRyYWN0KHRoaXMuX3Bvc2l0aW9uc1swXSkscj0odGhpcy5fbGFzdFRpbWUtdGhpcy5fdGltZXNbMF0pLzFlMyxhPWkuZWFzZUxpbmVhcml0eSxoPXMubXVsdGlwbHlCeShhL3IpLGw9aC5kaXN0YW5jZVRvKFswLDBdKSx1PU1hdGgubWluKGkuaW5lcnRpYU1heFNwZWVkLGwpLGM9aC5tdWx0aXBseUJ5KHUvbCksZD11LyhpLmluZXJ0aWFEZWNlbGVyYXRpb24qYSksXz1jLm11bHRpcGx5QnkoLWQvMikucm91bmQoKTtfLnh8fF8ueT8oXz1lLl9saW1pdE9mZnNldChfLGUub3B0aW9ucy5tYXhCb3VuZHMpLG8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKGZ1bmN0aW9uKCl7ZS5wYW5CeShfLHtkdXJhdGlvbjpkLGVhc2VMaW5lYXJpdHk6YSxub01vdmVTdGFydDohMCxhbmltYXRlOiEwfSl9KSk6ZS5maXJlKFwibW92ZWVuZFwiKX19fSksby5NYXAuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJkcmFnZ2luZ1wiLG8uTWFwLkRyYWcpLG8uTWFwLm1lcmdlT3B0aW9ucyh7ZG91YmxlQ2xpY2tab29tOiEwfSksby5NYXAuRG91YmxlQ2xpY2tab29tPW8uSGFuZGxlci5leHRlbmQoe2FkZEhvb2tzOmZ1bmN0aW9uKCl7dGhpcy5fbWFwLm9uKFwiZGJsY2xpY2tcIix0aGlzLl9vbkRvdWJsZUNsaWNrLHRoaXMpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe3RoaXMuX21hcC5vZmYoXCJkYmxjbGlja1wiLHRoaXMuX29uRG91YmxlQ2xpY2ssdGhpcyl9LF9vbkRvdWJsZUNsaWNrOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcCxpPWUuZ2V0Wm9vbSgpLG49ZS5vcHRpb25zLnpvb21EZWx0YSxvPXQub3JpZ2luYWxFdmVudC5zaGlmdEtleT9pLW46aStuO1wiY2VudGVyXCI9PT1lLm9wdGlvbnMuZG91YmxlQ2xpY2tab29tP2Uuc2V0Wm9vbShvKTplLnNldFpvb21Bcm91bmQodC5jb250YWluZXJQb2ludCxvKX19KSxvLk1hcC5hZGRJbml0SG9vayhcImFkZEhhbmRsZXJcIixcImRvdWJsZUNsaWNrWm9vbVwiLG8uTWFwLkRvdWJsZUNsaWNrWm9vbSksby5NYXAubWVyZ2VPcHRpb25zKHtzY3JvbGxXaGVlbFpvb206ITAsd2hlZWxEZWJvdW5jZVRpbWU6NDAsd2hlZWxQeFBlclpvb21MZXZlbDo2MH0pLG8uTWFwLlNjcm9sbFdoZWVsWm9vbT1vLkhhbmRsZXIuZXh0ZW5kKHthZGRIb29rczpmdW5jdGlvbigpe28uRG9tRXZlbnQub24odGhpcy5fbWFwLl9jb250YWluZXIsXCJtb3VzZXdoZWVsXCIsdGhpcy5fb25XaGVlbFNjcm9sbCx0aGlzKSx0aGlzLl9kZWx0YT0wfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe28uRG9tRXZlbnQub2ZmKHRoaXMuX21hcC5fY29udGFpbmVyLFwibW91c2V3aGVlbFwiLHRoaXMuX29uV2hlZWxTY3JvbGwsdGhpcyl9LF9vbldoZWVsU2Nyb2xsOmZ1bmN0aW9uKHQpe3ZhciBlPW8uRG9tRXZlbnQuZ2V0V2hlZWxEZWx0YSh0KSxpPXRoaXMuX21hcC5vcHRpb25zLndoZWVsRGVib3VuY2VUaW1lO3RoaXMuX2RlbHRhKz1lLHRoaXMuX2xhc3RNb3VzZVBvcz10aGlzLl9tYXAubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodCksdGhpcy5fc3RhcnRUaW1lfHwodGhpcy5fc3RhcnRUaW1lPStuZXcgRGF0ZSk7dmFyIG49TWF0aC5tYXgoaS0oK25ldyBEYXRlLXRoaXMuX3N0YXJ0VGltZSksMCk7Y2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKSx0aGlzLl90aW1lcj1zZXRUaW1lb3V0KG8uYmluZCh0aGlzLl9wZXJmb3JtWm9vbSx0aGlzKSxuKSxvLkRvbUV2ZW50LnN0b3AodCl9LF9wZXJmb3JtWm9vbTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcCxlPXQuZ2V0Wm9vbSgpLGk9dGhpcy5fbWFwLm9wdGlvbnMuem9vbVNuYXB8fDA7dC5fc3RvcCgpO3ZhciBuPXRoaXMuX2RlbHRhLyg0KnRoaXMuX21hcC5vcHRpb25zLndoZWVsUHhQZXJab29tTGV2ZWwpLG89NCpNYXRoLmxvZygyLygxK01hdGguZXhwKC1NYXRoLmFicyhuKSkpKS9NYXRoLkxOMixzPWk/TWF0aC5jZWlsKG8vaSkqaTpvLHI9dC5fbGltaXRab29tKGUrKHRoaXMuX2RlbHRhPjA/czotcykpLWU7dGhpcy5fZGVsdGE9MCx0aGlzLl9zdGFydFRpbWU9bnVsbCxyJiYoXCJjZW50ZXJcIj09PXQub3B0aW9ucy5zY3JvbGxXaGVlbFpvb20/dC5zZXRab29tKGUrcik6dC5zZXRab29tQXJvdW5kKHRoaXMuX2xhc3RNb3VzZVBvcyxlK3IpKX19KSxvLk1hcC5hZGRJbml0SG9vayhcImFkZEhhbmRsZXJcIixcInNjcm9sbFdoZWVsWm9vbVwiLG8uTWFwLlNjcm9sbFdoZWVsWm9vbSksby5leHRlbmQoby5Eb21FdmVudCx7X3RvdWNoc3RhcnQ6by5Ccm93c2VyLm1zUG9pbnRlcj9cIk1TUG9pbnRlckRvd25cIjpvLkJyb3dzZXIucG9pbnRlcj9cInBvaW50ZXJkb3duXCI6XCJ0b3VjaHN0YXJ0XCIsX3RvdWNoZW5kOm8uQnJvd3Nlci5tc1BvaW50ZXI/XCJNU1BvaW50ZXJVcFwiOm8uQnJvd3Nlci5wb2ludGVyP1wicG9pbnRlcnVwXCI6XCJ0b3VjaGVuZFwiLGFkZERvdWJsZVRhcExpc3RlbmVyOmZ1bmN0aW9uKHQsZSxpKXtmdW5jdGlvbiBuKHQpe3ZhciBlO2lmKG8uQnJvd3Nlci5wb2ludGVyKXtpZighby5Ccm93c2VyLmVkZ2V8fFwibW91c2VcIj09PXQucG9pbnRlclR5cGUpcmV0dXJuO2U9by5Eb21FdmVudC5fcG9pbnRlcnNDb3VudH1lbHNlIGU9dC50b3VjaGVzLmxlbmd0aDtpZighKGU+MSkpe3ZhciBpPURhdGUubm93KCksbj1pLShyfHxpKTthPXQudG91Y2hlcz90LnRvdWNoZXNbMF06dCxoPW4+MCYmbjw9bCxyPWl9fWZ1bmN0aW9uIHModCl7aWYoaCYmIWEuY2FuY2VsQnViYmxlKXtpZihvLkJyb3dzZXIucG9pbnRlcil7aWYoIW8uQnJvd3Nlci5lZGdlfHxcIm1vdXNlXCI9PT10LnBvaW50ZXJUeXBlKXJldHVybjt2YXIgaSxuLHM9e307Zm9yKG4gaW4gYSlpPWFbbl0sc1tuXT1pJiZpLmJpbmQ/aS5iaW5kKGEpOmk7YT1zfWEudHlwZT1cImRibGNsaWNrXCIsZShhKSxyPW51bGx9fXZhciByLGEsaD0hMSxsPTI1MCx1PVwiX2xlYWZsZXRfXCIsYz10aGlzLl90b3VjaHN0YXJ0LGQ9dGhpcy5fdG91Y2hlbmQ7cmV0dXJuIHRbdStjK2ldPW4sdFt1K2QraV09cyx0W3UrXCJkYmxjbGlja1wiK2ldPWUsdC5hZGRFdmVudExpc3RlbmVyKGMsbiwhMSksdC5hZGRFdmVudExpc3RlbmVyKGQscywhMSksdC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixlLCExKSx0aGlzfSxyZW1vdmVEb3VibGVUYXBMaXN0ZW5lcjpmdW5jdGlvbih0LGUpe3ZhciBpPVwiX2xlYWZsZXRfXCIsbj10W2krdGhpcy5fdG91Y2hzdGFydCtlXSxzPXRbaSt0aGlzLl90b3VjaGVuZCtlXSxyPXRbaStcImRibGNsaWNrXCIrZV07cmV0dXJuIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl90b3VjaHN0YXJ0LG4sITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl90b3VjaGVuZCxzLCExKSxvLkJyb3dzZXIuZWRnZXx8dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIixyLCExKSx0aGlzfX0pLG8uZXh0ZW5kKG8uRG9tRXZlbnQse1BPSU5URVJfRE9XTjpvLkJyb3dzZXIubXNQb2ludGVyP1wiTVNQb2ludGVyRG93blwiOlwicG9pbnRlcmRvd25cIixQT0lOVEVSX01PVkU6by5Ccm93c2VyLm1zUG9pbnRlcj9cIk1TUG9pbnRlck1vdmVcIjpcInBvaW50ZXJtb3ZlXCIsUE9JTlRFUl9VUDpvLkJyb3dzZXIubXNQb2ludGVyP1wiTVNQb2ludGVyVXBcIjpcInBvaW50ZXJ1cFwiLFBPSU5URVJfQ0FOQ0VMOm8uQnJvd3Nlci5tc1BvaW50ZXI/XCJNU1BvaW50ZXJDYW5jZWxcIjpcInBvaW50ZXJjYW5jZWxcIixUQUdfV0hJVEVfTElTVDpbXCJJTlBVVFwiLFwiU0VMRUNUXCIsXCJPUFRJT05cIl0sX3BvaW50ZXJzOnt9LF9wb2ludGVyc0NvdW50OjAsYWRkUG9pbnRlckxpc3RlbmVyOmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVyblwidG91Y2hzdGFydFwiPT09ZT90aGlzLl9hZGRQb2ludGVyU3RhcnQodCxpLG4pOlwidG91Y2htb3ZlXCI9PT1lP3RoaXMuX2FkZFBvaW50ZXJNb3ZlKHQsaSxuKTpcInRvdWNoZW5kXCI9PT1lJiZ0aGlzLl9hZGRQb2ludGVyRW5kKHQsaSxuKSx0aGlzfSxyZW1vdmVQb2ludGVyTGlzdGVuZXI6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRbXCJfbGVhZmxldF9cIitlK2ldO3JldHVyblwidG91Y2hzdGFydFwiPT09ZT90LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX0RPV04sbiwhMSk6XCJ0b3VjaG1vdmVcIj09PWU/dC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9NT1ZFLG4sITEpOlwidG91Y2hlbmRcIj09PWUmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX1VQLG4sITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfQ0FOQ0VMLG4sITEpKSx0aGlzfSxfYWRkUG9pbnRlclN0YXJ0OmZ1bmN0aW9uKHQsaSxuKXt2YXIgcz1vLmJpbmQoZnVuY3Rpb24odCl7aWYoXCJtb3VzZVwiIT09dC5wb2ludGVyVHlwZSYmdC5NU1BPSU5URVJfVFlQRV9NT1VTRSYmdC5wb2ludGVyVHlwZSE9PXQuTVNQT0lOVEVSX1RZUEVfTU9VU0Upe2lmKCEodGhpcy5UQUdfV0hJVEVfTElTVC5pbmRleE9mKHQudGFyZ2V0LnRhZ05hbWUpPDApKXJldHVybjtvLkRvbUV2ZW50LnByZXZlbnREZWZhdWx0KHQpfXRoaXMuX2hhbmRsZVBvaW50ZXIodCxpKX0sdGhpcyk7aWYodFtcIl9sZWFmbGV0X3RvdWNoc3RhcnRcIituXT1zLHQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfRE9XTixzLCExKSwhdGhpcy5fcG9pbnRlckRvY0xpc3RlbmVyKXt2YXIgcj1vLmJpbmQodGhpcy5fZ2xvYmFsUG9pbnRlclVwLHRoaXMpO2UuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX0RPV04sby5iaW5kKHRoaXMuX2dsb2JhbFBvaW50ZXJEb3duLHRoaXMpLCEwKSxlLmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9NT1ZFLG8uYmluZCh0aGlzLl9nbG9iYWxQb2ludGVyTW92ZSx0aGlzKSwhMCksZS5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfVVAsciwhMCksZS5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfQ0FOQ0VMLHIsITApLHRoaXMuX3BvaW50ZXJEb2NMaXN0ZW5lcj0hMH19LF9nbG9iYWxQb2ludGVyRG93bjpmdW5jdGlvbih0KXt0aGlzLl9wb2ludGVyc1t0LnBvaW50ZXJJZF09dCx0aGlzLl9wb2ludGVyc0NvdW50Kyt9LF9nbG9iYWxQb2ludGVyTW92ZTpmdW5jdGlvbih0KXt0aGlzLl9wb2ludGVyc1t0LnBvaW50ZXJJZF0mJih0aGlzLl9wb2ludGVyc1t0LnBvaW50ZXJJZF09dCl9LF9nbG9iYWxQb2ludGVyVXA6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuX3BvaW50ZXJzW3QucG9pbnRlcklkXSx0aGlzLl9wb2ludGVyc0NvdW50LS19LF9oYW5kbGVQb2ludGVyOmZ1bmN0aW9uKHQsZSl7dC50b3VjaGVzPVtdO2Zvcih2YXIgaSBpbiB0aGlzLl9wb2ludGVycyl0LnRvdWNoZXMucHVzaCh0aGlzLl9wb2ludGVyc1tpXSk7dC5jaGFuZ2VkVG91Y2hlcz1bdF0sZSh0KX0sX2FkZFBvaW50ZXJNb3ZlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1vLmJpbmQoZnVuY3Rpb24odCl7KHQucG9pbnRlclR5cGUhPT10Lk1TUE9JTlRFUl9UWVBFX01PVVNFJiZcIm1vdXNlXCIhPT10LnBvaW50ZXJUeXBlfHwwIT09dC5idXR0b25zKSYmdGhpcy5faGFuZGxlUG9pbnRlcih0LGUpfSx0aGlzKTt0W1wiX2xlYWZsZXRfdG91Y2htb3ZlXCIraV09bix0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX01PVkUsbiwhMSl9LF9hZGRQb2ludGVyRW5kOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1vLmJpbmQoZnVuY3Rpb24odCl7dGhpcy5faGFuZGxlUG9pbnRlcih0LGUpfSx0aGlzKTt0W1wiX2xlYWZsZXRfdG91Y2hlbmRcIitpXT1uLHQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfVVAsbiwhMSksdC5hZGRFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9DQU5DRUwsbiwhMSl9fSksby5NYXAubWVyZ2VPcHRpb25zKHt0b3VjaFpvb206by5Ccm93c2VyLnRvdWNoJiYhby5Ccm93c2VyLmFuZHJvaWQyMyxib3VuY2VBdFpvb21MaW1pdHM6ITB9KSxvLk1hcC5Ub3VjaFpvb209by5IYW5kbGVyLmV4dGVuZCh7YWRkSG9va3M6ZnVuY3Rpb24oKXtvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fbWFwLl9jb250YWluZXIsXCJsZWFmbGV0LXRvdWNoLXpvb21cIiksby5Eb21FdmVudC5vbih0aGlzLl9tYXAuX2NvbnRhaW5lcixcInRvdWNoc3RhcnRcIix0aGlzLl9vblRvdWNoU3RhcnQsdGhpcyl9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7by5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX21hcC5fY29udGFpbmVyLFwibGVhZmxldC10b3VjaC16b29tXCIpLG8uRG9tRXZlbnQub2ZmKHRoaXMuX21hcC5fY29udGFpbmVyLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2hTdGFydCx0aGlzKX0sX29uVG91Y2hTdGFydDpmdW5jdGlvbih0KXt2YXIgaT10aGlzLl9tYXA7aWYodC50b3VjaGVzJiYyPT09dC50b3VjaGVzLmxlbmd0aCYmIWkuX2FuaW1hdGluZ1pvb20mJiF0aGlzLl96b29taW5nKXt2YXIgbj1pLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQudG91Y2hlc1swXSkscz1pLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQudG91Y2hlc1sxXSk7dGhpcy5fY2VudGVyUG9pbnQ9aS5nZXRTaXplKCkuX2RpdmlkZUJ5KDIpLHRoaXMuX3N0YXJ0TGF0TG5nPWkuY29udGFpbmVyUG9pbnRUb0xhdExuZyh0aGlzLl9jZW50ZXJQb2ludCksXCJjZW50ZXJcIiE9PWkub3B0aW9ucy50b3VjaFpvb20mJih0aGlzLl9waW5jaFN0YXJ0TGF0TG5nPWkuY29udGFpbmVyUG9pbnRUb0xhdExuZyhuLmFkZChzKS5fZGl2aWRlQnkoMikpKSx0aGlzLl9zdGFydERpc3Q9bi5kaXN0YW5jZVRvKHMpLHRoaXMuX3N0YXJ0Wm9vbT1pLmdldFpvb20oKSx0aGlzLl9tb3ZlZD0hMSx0aGlzLl96b29taW5nPSEwLGkuX3N0b3AoKSxvLkRvbUV2ZW50Lm9uKGUsXCJ0b3VjaG1vdmVcIix0aGlzLl9vblRvdWNoTW92ZSx0aGlzKS5vbihlLFwidG91Y2hlbmRcIix0aGlzLl9vblRvdWNoRW5kLHRoaXMpLG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQodCl9fSxfb25Ub3VjaE1vdmU6ZnVuY3Rpb24odCl7aWYodC50b3VjaGVzJiYyPT09dC50b3VjaGVzLmxlbmd0aCYmdGhpcy5fem9vbWluZyl7dmFyIGU9dGhpcy5fbWFwLGk9ZS5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0LnRvdWNoZXNbMF0pLG49ZS5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0LnRvdWNoZXNbMV0pLHM9aS5kaXN0YW5jZVRvKG4pL3RoaXMuX3N0YXJ0RGlzdDtpZih0aGlzLl96b29tPWUuZ2V0U2NhbGVab29tKHMsdGhpcy5fc3RhcnRab29tKSwhZS5vcHRpb25zLmJvdW5jZUF0Wm9vbUxpbWl0cyYmKHRoaXMuX3pvb208ZS5nZXRNaW5ab29tKCkmJnM8MXx8dGhpcy5fem9vbT5lLmdldE1heFpvb20oKSYmcz4xKSYmKHRoaXMuX3pvb209ZS5fbGltaXRab29tKHRoaXMuX3pvb20pKSxcImNlbnRlclwiPT09ZS5vcHRpb25zLnRvdWNoWm9vbSl7aWYodGhpcy5fY2VudGVyPXRoaXMuX3N0YXJ0TGF0TG5nLDE9PT1zKXJldHVybn1lbHNle3ZhciByPWkuX2FkZChuKS5fZGl2aWRlQnkoMikuX3N1YnRyYWN0KHRoaXMuX2NlbnRlclBvaW50KTtpZigxPT09cyYmMD09PXIueCYmMD09PXIueSlyZXR1cm47dGhpcy5fY2VudGVyPWUudW5wcm9qZWN0KGUucHJvamVjdCh0aGlzLl9waW5jaFN0YXJ0TGF0TG5nLHRoaXMuX3pvb20pLnN1YnRyYWN0KHIpLHRoaXMuX3pvb20pfXRoaXMuX21vdmVkfHwoZS5fbW92ZVN0YXJ0KCEwKSx0aGlzLl9tb3ZlZD0hMCksby5VdGlsLmNhbmNlbEFuaW1GcmFtZSh0aGlzLl9hbmltUmVxdWVzdCk7dmFyIGE9by5iaW5kKGUuX21vdmUsZSx0aGlzLl9jZW50ZXIsdGhpcy5fem9vbSx7cGluY2g6ITAscm91bmQ6ITF9KTt0aGlzLl9hbmltUmVxdWVzdD1vLlV0aWwucmVxdWVzdEFuaW1GcmFtZShhLHRoaXMsITApLG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQodCl9fSxfb25Ub3VjaEVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb3ZlZCYmdGhpcy5fem9vbWluZz8odGhpcy5fem9vbWluZz0hMSxvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2FuaW1SZXF1ZXN0KSxvLkRvbUV2ZW50Lm9mZihlLFwidG91Y2htb3ZlXCIsdGhpcy5fb25Ub3VjaE1vdmUpLm9mZihlLFwidG91Y2hlbmRcIix0aGlzLl9vblRvdWNoRW5kKSx2b2lkKHRoaXMuX21hcC5vcHRpb25zLnpvb21BbmltYXRpb24/dGhpcy5fbWFwLl9hbmltYXRlWm9vbSh0aGlzLl9jZW50ZXIsdGhpcy5fbWFwLl9saW1pdFpvb20odGhpcy5fem9vbSksITAsdGhpcy5fbWFwLm9wdGlvbnMuem9vbVNuYXApOnRoaXMuX21hcC5fcmVzZXRWaWV3KHRoaXMuX2NlbnRlcix0aGlzLl9tYXAuX2xpbWl0Wm9vbSh0aGlzLl96b29tKSkpKTp2b2lkKHRoaXMuX3pvb21pbmc9ITEpfX0pLG8uTWFwLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwidG91Y2hab29tXCIsby5NYXAuVG91Y2hab29tKSxvLk1hcC5tZXJnZU9wdGlvbnMoe3RhcDohMCx0YXBUb2xlcmFuY2U6MTV9KSxvLk1hcC5UYXA9by5IYW5kbGVyLmV4dGVuZCh7YWRkSG9va3M6ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9uKHRoaXMuX21hcC5fY29udGFpbmVyLFwidG91Y2hzdGFydFwiLHRoaXMuX29uRG93bix0aGlzKX0scmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9mZih0aGlzLl9tYXAuX2NvbnRhaW5lcixcInRvdWNoc3RhcnRcIix0aGlzLl9vbkRvd24sdGhpcyl9LF9vbkRvd246ZnVuY3Rpb24odCl7aWYodC50b3VjaGVzKXtpZihvLkRvbUV2ZW50LnByZXZlbnREZWZhdWx0KHQpLHRoaXMuX2ZpcmVDbGljaz0hMCx0LnRvdWNoZXMubGVuZ3RoPjEpcmV0dXJuIHRoaXMuX2ZpcmVDbGljaz0hMSx2b2lkIGNsZWFyVGltZW91dCh0aGlzLl9ob2xkVGltZW91dCk7dmFyIGk9dC50b3VjaGVzWzBdLG49aS50YXJnZXQ7dGhpcy5fc3RhcnRQb3M9dGhpcy5fbmV3UG9zPW5ldyBvLlBvaW50KGkuY2xpZW50WCxpLmNsaWVudFkpLG4udGFnTmFtZSYmXCJhXCI9PT1uLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmby5Eb21VdGlsLmFkZENsYXNzKG4sXCJsZWFmbGV0LWFjdGl2ZVwiKSx0aGlzLl9ob2xkVGltZW91dD1zZXRUaW1lb3V0KG8uYmluZChmdW5jdGlvbigpe3RoaXMuX2lzVGFwVmFsaWQoKSYmKHRoaXMuX2ZpcmVDbGljaz0hMSx0aGlzLl9vblVwKCksdGhpcy5fc2ltdWxhdGVFdmVudChcImNvbnRleHRtZW51XCIsaSkpfSx0aGlzKSwxZTMpLHRoaXMuX3NpbXVsYXRlRXZlbnQoXCJtb3VzZWRvd25cIixpKSxvLkRvbUV2ZW50Lm9uKGUse3RvdWNobW92ZTp0aGlzLl9vbk1vdmUsdG91Y2hlbmQ6dGhpcy5fb25VcH0sdGhpcyl9fSxfb25VcDpmdW5jdGlvbih0KXtpZihjbGVhclRpbWVvdXQodGhpcy5faG9sZFRpbWVvdXQpLG8uRG9tRXZlbnQub2ZmKGUse3RvdWNobW92ZTp0aGlzLl9vbk1vdmUsdG91Y2hlbmQ6dGhpcy5fb25VcH0sdGhpcyksdGhpcy5fZmlyZUNsaWNrJiZ0JiZ0LmNoYW5nZWRUb3VjaGVzKXt2YXIgaT10LmNoYW5nZWRUb3VjaGVzWzBdLG49aS50YXJnZXQ7biYmbi50YWdOYW1lJiZcImFcIj09PW4udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZvLkRvbVV0aWwucmVtb3ZlQ2xhc3MobixcImxlYWZsZXQtYWN0aXZlXCIpLHRoaXMuX3NpbXVsYXRlRXZlbnQoXCJtb3VzZXVwXCIsaSksdGhpcy5faXNUYXBWYWxpZCgpJiZ0aGlzLl9zaW11bGF0ZUV2ZW50KFwiY2xpY2tcIixpKX19LF9pc1RhcFZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25ld1Bvcy5kaXN0YW5jZVRvKHRoaXMuX3N0YXJ0UG9zKTw9dGhpcy5fbWFwLm9wdGlvbnMudGFwVG9sZXJhbmNlfSxfb25Nb3ZlOmZ1bmN0aW9uKHQpe3ZhciBlPXQudG91Y2hlc1swXTt0aGlzLl9uZXdQb3M9bmV3IG8uUG9pbnQoZS5jbGllbnRYLGUuY2xpZW50WSksXHJcbnRoaXMuX3NpbXVsYXRlRXZlbnQoXCJtb3VzZW1vdmVcIixlKX0sX3NpbXVsYXRlRXZlbnQ6ZnVuY3Rpb24oaSxuKXt2YXIgbz1lLmNyZWF0ZUV2ZW50KFwiTW91c2VFdmVudHNcIik7by5fc2ltdWxhdGVkPSEwLG4udGFyZ2V0Ll9zaW11bGF0ZWRDbGljaz0hMCxvLmluaXRNb3VzZUV2ZW50KGksITAsITAsdCwxLG4uc2NyZWVuWCxuLnNjcmVlblksbi5jbGllbnRYLG4uY2xpZW50WSwhMSwhMSwhMSwhMSwwLG51bGwpLG4udGFyZ2V0LmRpc3BhdGNoRXZlbnQobyl9fSksby5Ccm93c2VyLnRvdWNoJiYhby5Ccm93c2VyLnBvaW50ZXImJm8uTWFwLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwidGFwXCIsby5NYXAuVGFwKSxvLk1hcC5tZXJnZU9wdGlvbnMoe2JveFpvb206ITB9KSxvLk1hcC5Cb3hab29tPW8uSGFuZGxlci5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5fbWFwPXQsdGhpcy5fY29udGFpbmVyPXQuX2NvbnRhaW5lcix0aGlzLl9wYW5lPXQuX3BhbmVzLm92ZXJsYXlQYW5lfSxhZGRIb29rczpmdW5jdGlvbigpe28uRG9tRXZlbnQub24odGhpcy5fY29udGFpbmVyLFwibW91c2Vkb3duXCIsdGhpcy5fb25Nb3VzZURvd24sdGhpcyl9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7by5Eb21FdmVudC5vZmYodGhpcy5fY29udGFpbmVyLFwibW91c2Vkb3duXCIsdGhpcy5fb25Nb3VzZURvd24sdGhpcyl9LG1vdmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdmVkfSxfcmVzZXRTdGF0ZTpmdW5jdGlvbigpe3RoaXMuX21vdmVkPSExfSxfb25Nb3VzZURvd246ZnVuY3Rpb24odCl7cmV0dXJuISghdC5zaGlmdEtleXx8MSE9PXQud2hpY2gmJjEhPT10LmJ1dHRvbikmJih0aGlzLl9yZXNldFN0YXRlKCksby5Eb21VdGlsLmRpc2FibGVUZXh0U2VsZWN0aW9uKCksby5Eb21VdGlsLmRpc2FibGVJbWFnZURyYWcoKSx0aGlzLl9zdGFydFBvaW50PXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KSx2b2lkIG8uRG9tRXZlbnQub24oZSx7Y29udGV4dG1lbnU6by5Eb21FdmVudC5zdG9wLG1vdXNlbW92ZTp0aGlzLl9vbk1vdXNlTW92ZSxtb3VzZXVwOnRoaXMuX29uTW91c2VVcCxrZXlkb3duOnRoaXMuX29uS2V5RG93bn0sdGhpcykpfSxfb25Nb3VzZU1vdmU6ZnVuY3Rpb24odCl7dGhpcy5fbW92ZWR8fCh0aGlzLl9tb3ZlZD0hMCx0aGlzLl9ib3g9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLFwibGVhZmxldC16b29tLWJveFwiLHRoaXMuX2NvbnRhaW5lciksby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lcixcImxlYWZsZXQtY3Jvc3NoYWlyXCIpLHRoaXMuX21hcC5maXJlKFwiYm94em9vbXN0YXJ0XCIpKSx0aGlzLl9wb2ludD10aGlzLl9tYXAubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodCk7dmFyIGU9bmV3IG8uQm91bmRzKHRoaXMuX3BvaW50LHRoaXMuX3N0YXJ0UG9pbnQpLGk9ZS5nZXRTaXplKCk7by5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX2JveCxlLm1pbiksdGhpcy5fYm94LnN0eWxlLndpZHRoPWkueCtcInB4XCIsdGhpcy5fYm94LnN0eWxlLmhlaWdodD1pLnkrXCJweFwifSxfZmluaXNoOmZ1bmN0aW9uKCl7dGhpcy5fbW92ZWQmJihvLkRvbVV0aWwucmVtb3ZlKHRoaXMuX2JveCksby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lcixcImxlYWZsZXQtY3Jvc3NoYWlyXCIpKSxvLkRvbVV0aWwuZW5hYmxlVGV4dFNlbGVjdGlvbigpLG8uRG9tVXRpbC5lbmFibGVJbWFnZURyYWcoKSxvLkRvbUV2ZW50Lm9mZihlLHtjb250ZXh0bWVudTpvLkRvbUV2ZW50LnN0b3AsbW91c2Vtb3ZlOnRoaXMuX29uTW91c2VNb3ZlLG1vdXNldXA6dGhpcy5fb25Nb3VzZVVwLGtleWRvd246dGhpcy5fb25LZXlEb3dufSx0aGlzKX0sX29uTW91c2VVcDpmdW5jdGlvbih0KXtpZigoMT09PXQud2hpY2h8fDE9PT10LmJ1dHRvbikmJih0aGlzLl9maW5pc2goKSx0aGlzLl9tb3ZlZCkpe3NldFRpbWVvdXQoby5iaW5kKHRoaXMuX3Jlc2V0U3RhdGUsdGhpcyksMCk7dmFyIGU9bmV3IG8uTGF0TG5nQm91bmRzKHRoaXMuX21hcC5jb250YWluZXJQb2ludFRvTGF0TG5nKHRoaXMuX3N0YXJ0UG9pbnQpLHRoaXMuX21hcC5jb250YWluZXJQb2ludFRvTGF0TG5nKHRoaXMuX3BvaW50KSk7dGhpcy5fbWFwLmZpdEJvdW5kcyhlKS5maXJlKFwiYm94em9vbWVuZFwiLHtib3hab29tQm91bmRzOmV9KX19LF9vbktleURvd246ZnVuY3Rpb24odCl7Mjc9PT10LmtleUNvZGUmJnRoaXMuX2ZpbmlzaCgpfX0pLG8uTWFwLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwiYm94Wm9vbVwiLG8uTWFwLkJveFpvb20pLG8uTWFwLm1lcmdlT3B0aW9ucyh7a2V5Ym9hcmQ6ITAsa2V5Ym9hcmRQYW5EZWx0YTo4MH0pLG8uTWFwLktleWJvYXJkPW8uSGFuZGxlci5leHRlbmQoe2tleUNvZGVzOntsZWZ0OlszN10scmlnaHQ6WzM5XSxkb3duOls0MF0sdXA6WzM4XSx6b29tSW46WzE4NywxMDcsNjEsMTcxXSx6b29tT3V0OlsxODksMTA5LDU0LDE3M119LGluaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5fbWFwPXQsdGhpcy5fc2V0UGFuRGVsdGEodC5vcHRpb25zLmtleWJvYXJkUGFuRGVsdGEpLHRoaXMuX3NldFpvb21EZWx0YSh0Lm9wdGlvbnMuem9vbURlbHRhKX0sYWRkSG9va3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXAuX2NvbnRhaW5lcjt0LnRhYkluZGV4PD0wJiYodC50YWJJbmRleD1cIjBcIiksby5Eb21FdmVudC5vbih0LHtmb2N1czp0aGlzLl9vbkZvY3VzLGJsdXI6dGhpcy5fb25CbHVyLG1vdXNlZG93bjp0aGlzLl9vbk1vdXNlRG93bn0sdGhpcyksdGhpcy5fbWFwLm9uKHtmb2N1czp0aGlzLl9hZGRIb29rcyxibHVyOnRoaXMuX3JlbW92ZUhvb2tzfSx0aGlzKX0scmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVIb29rcygpLG8uRG9tRXZlbnQub2ZmKHRoaXMuX21hcC5fY29udGFpbmVyLHtmb2N1czp0aGlzLl9vbkZvY3VzLGJsdXI6dGhpcy5fb25CbHVyLG1vdXNlZG93bjp0aGlzLl9vbk1vdXNlRG93bn0sdGhpcyksdGhpcy5fbWFwLm9mZih7Zm9jdXM6dGhpcy5fYWRkSG9va3MsYmx1cjp0aGlzLl9yZW1vdmVIb29rc30sdGhpcyl9LF9vbk1vdXNlRG93bjpmdW5jdGlvbigpe2lmKCF0aGlzLl9mb2N1c2VkKXt2YXIgaT1lLmJvZHksbj1lLmRvY3VtZW50RWxlbWVudCxvPWkuc2Nyb2xsVG9wfHxuLnNjcm9sbFRvcCxzPWkuc2Nyb2xsTGVmdHx8bi5zY3JvbGxMZWZ0O3RoaXMuX21hcC5fY29udGFpbmVyLmZvY3VzKCksdC5zY3JvbGxUbyhzLG8pfX0sX29uRm9jdXM6ZnVuY3Rpb24oKXt0aGlzLl9mb2N1c2VkPSEwLHRoaXMuX21hcC5maXJlKFwiZm9jdXNcIil9LF9vbkJsdXI6ZnVuY3Rpb24oKXt0aGlzLl9mb2N1c2VkPSExLHRoaXMuX21hcC5maXJlKFwiYmx1clwiKX0sX3NldFBhbkRlbHRhOmZ1bmN0aW9uKHQpe3ZhciBlLGksbj10aGlzLl9wYW5LZXlzPXt9LG89dGhpcy5rZXlDb2Rlcztmb3IoZT0wLGk9by5sZWZ0Lmxlbmd0aDtlPGk7ZSsrKW5bby5sZWZ0W2VdXT1bLTEqdCwwXTtmb3IoZT0wLGk9by5yaWdodC5sZW5ndGg7ZTxpO2UrKyluW28ucmlnaHRbZV1dPVt0LDBdO2ZvcihlPTAsaT1vLmRvd24ubGVuZ3RoO2U8aTtlKyspbltvLmRvd25bZV1dPVswLHRdO2ZvcihlPTAsaT1vLnVwLmxlbmd0aDtlPGk7ZSsrKW5bby51cFtlXV09WzAsLTEqdF19LF9zZXRab29tRGVsdGE6ZnVuY3Rpb24odCl7dmFyIGUsaSxuPXRoaXMuX3pvb21LZXlzPXt9LG89dGhpcy5rZXlDb2Rlcztmb3IoZT0wLGk9by56b29tSW4ubGVuZ3RoO2U8aTtlKyspbltvLnpvb21JbltlXV09dDtmb3IoZT0wLGk9by56b29tT3V0Lmxlbmd0aDtlPGk7ZSsrKW5bby56b29tT3V0W2VdXT0tdH0sX2FkZEhvb2tzOmZ1bmN0aW9uKCl7by5Eb21FdmVudC5vbihlLFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93bix0aGlzKX0sX3JlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7by5Eb21FdmVudC5vZmYoZSxcImtleWRvd25cIix0aGlzLl9vbktleURvd24sdGhpcyl9LF9vbktleURvd246ZnVuY3Rpb24odCl7aWYoISh0LmFsdEtleXx8dC5jdHJsS2V5fHx0Lm1ldGFLZXkpKXt2YXIgZSxpPXQua2V5Q29kZSxuPXRoaXMuX21hcDtpZihpIGluIHRoaXMuX3BhbktleXMpe2lmKG4uX3BhbkFuaW0mJm4uX3BhbkFuaW0uX2luUHJvZ3Jlc3MpcmV0dXJuO2U9dGhpcy5fcGFuS2V5c1tpXSx0LnNoaWZ0S2V5JiYoZT1vLnBvaW50KGUpLm11bHRpcGx5QnkoMykpLG4ucGFuQnkoZSksbi5vcHRpb25zLm1heEJvdW5kcyYmbi5wYW5JbnNpZGVCb3VuZHMobi5vcHRpb25zLm1heEJvdW5kcyl9ZWxzZSBpZihpIGluIHRoaXMuX3pvb21LZXlzKW4uc2V0Wm9vbShuLmdldFpvb20oKSsodC5zaGlmdEtleT8zOjEpKnRoaXMuX3pvb21LZXlzW2ldKTtlbHNle2lmKDI3IT09aSlyZXR1cm47bi5jbG9zZVBvcHVwKCl9by5Eb21FdmVudC5zdG9wKHQpfX19KSxvLk1hcC5hZGRJbml0SG9vayhcImFkZEhhbmRsZXJcIixcImtleWJvYXJkXCIsby5NYXAuS2V5Ym9hcmQpLG8uSGFuZGxlci5NYXJrZXJEcmFnPW8uSGFuZGxlci5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5fbWFya2VyPXR9LGFkZEhvb2tzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFya2VyLl9pY29uO3RoaXMuX2RyYWdnYWJsZXx8KHRoaXMuX2RyYWdnYWJsZT1uZXcgby5EcmFnZ2FibGUodCx0LCEwKSksdGhpcy5fZHJhZ2dhYmxlLm9uKHtkcmFnc3RhcnQ6dGhpcy5fb25EcmFnU3RhcnQsZHJhZzp0aGlzLl9vbkRyYWcsZHJhZ2VuZDp0aGlzLl9vbkRyYWdFbmR9LHRoaXMpLmVuYWJsZSgpLG8uRG9tVXRpbC5hZGRDbGFzcyh0LFwibGVhZmxldC1tYXJrZXItZHJhZ2dhYmxlXCIpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe3RoaXMuX2RyYWdnYWJsZS5vZmYoe2RyYWdzdGFydDp0aGlzLl9vbkRyYWdTdGFydCxkcmFnOnRoaXMuX29uRHJhZyxkcmFnZW5kOnRoaXMuX29uRHJhZ0VuZH0sdGhpcykuZGlzYWJsZSgpLHRoaXMuX21hcmtlci5faWNvbiYmby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX21hcmtlci5faWNvbixcImxlYWZsZXQtbWFya2VyLWRyYWdnYWJsZVwiKX0sbW92ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuX21vdmVkfSxfb25EcmFnU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl9vbGRMYXRMbmc9dGhpcy5fbWFya2VyLmdldExhdExuZygpLHRoaXMuX21hcmtlci5jbG9zZVBvcHVwKCkuZmlyZShcIm1vdmVzdGFydFwiKS5maXJlKFwiZHJhZ3N0YXJ0XCIpfSxfb25EcmFnOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcmtlcixpPWUuX3NoYWRvdyxuPW8uRG9tVXRpbC5nZXRQb3NpdGlvbihlLl9pY29uKSxzPWUuX21hcC5sYXllclBvaW50VG9MYXRMbmcobik7aSYmby5Eb21VdGlsLnNldFBvc2l0aW9uKGksbiksZS5fbGF0bG5nPXMsdC5sYXRsbmc9cyx0Lm9sZExhdExuZz10aGlzLl9vbGRMYXRMbmcsZS5maXJlKFwibW92ZVwiLHQpLmZpcmUoXCJkcmFnXCIsdCl9LF9vbkRyYWdFbmQ6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuX29sZExhdExuZyx0aGlzLl9tYXJrZXIuZmlyZShcIm1vdmVlbmRcIikuZmlyZShcImRyYWdlbmRcIix0KX19KSxvLkNvbnRyb2w9by5DbGFzcy5leHRlbmQoe29wdGlvbnM6e3Bvc2l0aW9uOlwidG9wcmlnaHRcIn0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtvLnNldE9wdGlvbnModGhpcyx0KX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLnBvc2l0aW9ufSxzZXRQb3NpdGlvbjpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXA7cmV0dXJuIGUmJmUucmVtb3ZlQ29udHJvbCh0aGlzKSx0aGlzLm9wdGlvbnMucG9zaXRpb249dCxlJiZlLmFkZENvbnRyb2wodGhpcyksdGhpc30sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn0sYWRkVG86ZnVuY3Rpb24odCl7dGhpcy5yZW1vdmUoKSx0aGlzLl9tYXA9dDt2YXIgZT10aGlzLl9jb250YWluZXI9dGhpcy5vbkFkZCh0KSxpPXRoaXMuZ2V0UG9zaXRpb24oKSxuPXQuX2NvbnRyb2xDb3JuZXJzW2ldO3JldHVybiBvLkRvbVV0aWwuYWRkQ2xhc3MoZSxcImxlYWZsZXQtY29udHJvbFwiKSxpLmluZGV4T2YoXCJib3R0b21cIikhPT0tMT9uLmluc2VydEJlZm9yZShlLG4uZmlyc3RDaGlsZCk6bi5hcHBlbmRDaGlsZChlKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwPyhvLkRvbVV0aWwucmVtb3ZlKHRoaXMuX2NvbnRhaW5lciksdGhpcy5vblJlbW92ZSYmdGhpcy5vblJlbW92ZSh0aGlzLl9tYXApLHRoaXMuX21hcD1udWxsLHRoaXMpOnRoaXN9LF9yZWZvY3VzT25NYXA6ZnVuY3Rpb24odCl7dGhpcy5fbWFwJiZ0JiZ0LnNjcmVlblg+MCYmdC5zY3JlZW5ZPjAmJnRoaXMuX21hcC5nZXRDb250YWluZXIoKS5mb2N1cygpfX0pLG8uY29udHJvbD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uQ29udHJvbCh0KX0sby5NYXAuaW5jbHVkZSh7YWRkQ29udHJvbDpmdW5jdGlvbih0KXtyZXR1cm4gdC5hZGRUbyh0aGlzKSx0aGlzfSxyZW1vdmVDb250cm9sOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlbW92ZSgpLHRoaXN9LF9pbml0Q29udHJvbFBvczpmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxzKXt2YXIgcj1pK3QrXCIgXCIraStzO2VbdCtzXT1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIscixuKX12YXIgZT10aGlzLl9jb250cm9sQ29ybmVycz17fSxpPVwibGVhZmxldC1cIixuPXRoaXMuX2NvbnRyb2xDb250YWluZXI9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLGkrXCJjb250cm9sLWNvbnRhaW5lclwiLHRoaXMuX2NvbnRhaW5lcik7dChcInRvcFwiLFwibGVmdFwiKSx0KFwidG9wXCIsXCJyaWdodFwiKSx0KFwiYm90dG9tXCIsXCJsZWZ0XCIpLHQoXCJib3R0b21cIixcInJpZ2h0XCIpfSxfY2xlYXJDb250cm9sUG9zOmZ1bmN0aW9uKCl7by5Eb21VdGlsLnJlbW92ZSh0aGlzLl9jb250cm9sQ29udGFpbmVyKX19KSxvLkNvbnRyb2wuWm9vbT1vLkNvbnRyb2wuZXh0ZW5kKHtvcHRpb25zOntwb3NpdGlvbjpcInRvcGxlZnRcIix6b29tSW5UZXh0OlwiK1wiLHpvb21JblRpdGxlOlwiWm9vbSBpblwiLHpvb21PdXRUZXh0OlwiLVwiLHpvb21PdXRUaXRsZTpcIlpvb20gb3V0XCJ9LG9uQWRkOmZ1bmN0aW9uKHQpe3ZhciBlPVwibGVhZmxldC1jb250cm9sLXpvb21cIixpPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixlK1wiIGxlYWZsZXQtYmFyXCIpLG49dGhpcy5vcHRpb25zO3JldHVybiB0aGlzLl96b29tSW5CdXR0b249dGhpcy5fY3JlYXRlQnV0dG9uKG4uem9vbUluVGV4dCxuLnpvb21JblRpdGxlLGUrXCItaW5cIixpLHRoaXMuX3pvb21JbiksdGhpcy5fem9vbU91dEJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24obi56b29tT3V0VGV4dCxuLnpvb21PdXRUaXRsZSxlK1wiLW91dFwiLGksdGhpcy5fem9vbU91dCksdGhpcy5fdXBkYXRlRGlzYWJsZWQoKSx0Lm9uKFwiem9vbWVuZCB6b29tbGV2ZWxzY2hhbmdlXCIsdGhpcy5fdXBkYXRlRGlzYWJsZWQsdGhpcyksaX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7dC5vZmYoXCJ6b29tZW5kIHpvb21sZXZlbHNjaGFuZ2VcIix0aGlzLl91cGRhdGVEaXNhYmxlZCx0aGlzKX0sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNhYmxlZD0hMCx0aGlzLl91cGRhdGVEaXNhYmxlZCgpLHRoaXN9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXNhYmxlZD0hMSx0aGlzLl91cGRhdGVEaXNhYmxlZCgpLHRoaXN9LF96b29tSW46ZnVuY3Rpb24odCl7IXRoaXMuX2Rpc2FibGVkJiZ0aGlzLl9tYXAuX3pvb208dGhpcy5fbWFwLmdldE1heFpvb20oKSYmdGhpcy5fbWFwLnpvb21Jbih0aGlzLl9tYXAub3B0aW9ucy56b29tRGVsdGEqKHQuc2hpZnRLZXk/MzoxKSl9LF96b29tT3V0OmZ1bmN0aW9uKHQpeyF0aGlzLl9kaXNhYmxlZCYmdGhpcy5fbWFwLl96b29tPnRoaXMuX21hcC5nZXRNaW5ab29tKCkmJnRoaXMuX21hcC56b29tT3V0KHRoaXMuX21hcC5vcHRpb25zLnpvb21EZWx0YSoodC5zaGlmdEtleT8zOjEpKX0sX2NyZWF0ZUJ1dHRvbjpmdW5jdGlvbih0LGUsaSxuLHMpe3ZhciByPW8uRG9tVXRpbC5jcmVhdGUoXCJhXCIsaSxuKTtyZXR1cm4gci5pbm5lckhUTUw9dCxyLmhyZWY9XCIjXCIsci50aXRsZT1lLHIuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiYnV0dG9uXCIpLHIuc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLGUpLG8uRG9tRXZlbnQub24ocixcIm1vdXNlZG93biBkYmxjbGlja1wiLG8uRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKS5vbihyLFwiY2xpY2tcIixvLkRvbUV2ZW50LnN0b3ApLm9uKHIsXCJjbGlja1wiLHMsdGhpcykub24ocixcImNsaWNrXCIsdGhpcy5fcmVmb2N1c09uTWFwLHRoaXMpLHJ9LF91cGRhdGVEaXNhYmxlZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcCxlPVwibGVhZmxldC1kaXNhYmxlZFwiO28uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl96b29tSW5CdXR0b24sZSksby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX3pvb21PdXRCdXR0b24sZSksKHRoaXMuX2Rpc2FibGVkfHx0Ll96b29tPT09dC5nZXRNaW5ab29tKCkpJiZvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fem9vbU91dEJ1dHRvbixlKSwodGhpcy5fZGlzYWJsZWR8fHQuX3pvb209PT10LmdldE1heFpvb20oKSkmJm8uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl96b29tSW5CdXR0b24sZSl9fSksby5NYXAubWVyZ2VPcHRpb25zKHt6b29tQ29udHJvbDohMH0pLG8uTWFwLmFkZEluaXRIb29rKGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnpvb21Db250cm9sJiYodGhpcy56b29tQ29udHJvbD1uZXcgby5Db250cm9sLlpvb20sdGhpcy5hZGRDb250cm9sKHRoaXMuem9vbUNvbnRyb2wpKX0pLG8uY29udHJvbC56b29tPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5Db250cm9sLlpvb20odCl9LG8uQ29udHJvbC5BdHRyaWJ1dGlvbj1vLkNvbnRyb2wuZXh0ZW5kKHtvcHRpb25zOntwb3NpdGlvbjpcImJvdHRvbXJpZ2h0XCIscHJlZml4Oic8YSBocmVmPVwiaHR0cDovL2xlYWZsZXRqcy5jb21cIiB0aXRsZT1cIkEgSlMgbGlicmFyeSBmb3IgaW50ZXJhY3RpdmUgbWFwc1wiPkxlYWZsZXQ8L2E+J30saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtvLnNldE9wdGlvbnModGhpcyx0KSx0aGlzLl9hdHRyaWJ1dGlvbnM9e319LG9uQWRkOmZ1bmN0aW9uKHQpe3QuYXR0cmlidXRpb25Db250cm9sPXRoaXMsdGhpcy5fY29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixcImxlYWZsZXQtY29udHJvbC1hdHRyaWJ1dGlvblwiKSxvLkRvbUV2ZW50JiZvLkRvbUV2ZW50LmRpc2FibGVDbGlja1Byb3BhZ2F0aW9uKHRoaXMuX2NvbnRhaW5lcik7Zm9yKHZhciBlIGluIHQuX2xheWVycyl0Ll9sYXllcnNbZV0uZ2V0QXR0cmlidXRpb24mJnRoaXMuYWRkQXR0cmlidXRpb24odC5fbGF5ZXJzW2VdLmdldEF0dHJpYnV0aW9uKCkpO3JldHVybiB0aGlzLl91cGRhdGUoKSx0aGlzLl9jb250YWluZXJ9LHNldFByZWZpeDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLnByZWZpeD10LHRoaXMuX3VwZGF0ZSgpLHRoaXN9LGFkZEF0dHJpYnV0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0Pyh0aGlzLl9hdHRyaWJ1dGlvbnNbdF18fCh0aGlzLl9hdHRyaWJ1dGlvbnNbdF09MCksdGhpcy5fYXR0cmlidXRpb25zW3RdKyssdGhpcy5fdXBkYXRlKCksdGhpcyk6dGhpc30scmVtb3ZlQXR0cmlidXRpb246ZnVuY3Rpb24odCl7cmV0dXJuIHQ/KHRoaXMuX2F0dHJpYnV0aW9uc1t0XSYmKHRoaXMuX2F0dHJpYnV0aW9uc1t0XS0tLHRoaXMuX3VwZGF0ZSgpKSx0aGlzKTp0aGlzfSxfdXBkYXRlOmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwKXt2YXIgdD1bXTtmb3IodmFyIGUgaW4gdGhpcy5fYXR0cmlidXRpb25zKXRoaXMuX2F0dHJpYnV0aW9uc1tlXSYmdC5wdXNoKGUpO3ZhciBpPVtdO3RoaXMub3B0aW9ucy5wcmVmaXgmJmkucHVzaCh0aGlzLm9wdGlvbnMucHJlZml4KSx0Lmxlbmd0aCYmaS5wdXNoKHQuam9pbihcIiwgXCIpKSx0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MPWkuam9pbihcIiB8IFwiKX19fSksby5NYXAubWVyZ2VPcHRpb25zKHthdHRyaWJ1dGlvbkNvbnRyb2w6ITB9KSxvLk1hcC5hZGRJbml0SG9vayhmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5hdHRyaWJ1dGlvbkNvbnRyb2wmJihuZXcgby5Db250cm9sLkF0dHJpYnV0aW9uKS5hZGRUbyh0aGlzKX0pLG8uY29udHJvbC5hdHRyaWJ1dGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uQ29udHJvbC5BdHRyaWJ1dGlvbih0KX0sby5Db250cm9sLlNjYWxlPW8uQ29udHJvbC5leHRlbmQoe29wdGlvbnM6e3Bvc2l0aW9uOlwiYm90dG9tbGVmdFwiLG1heFdpZHRoOjEwMCxtZXRyaWM6ITAsaW1wZXJpYWw6ITB9LG9uQWRkOmZ1bmN0aW9uKHQpe3ZhciBlPVwibGVhZmxldC1jb250cm9sLXNjYWxlXCIsaT1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsZSksbj10aGlzLm9wdGlvbnM7cmV0dXJuIHRoaXMuX2FkZFNjYWxlcyhuLGUrXCItbGluZVwiLGkpLHQub24obi51cGRhdGVXaGVuSWRsZT9cIm1vdmVlbmRcIjpcIm1vdmVcIix0aGlzLl91cGRhdGUsdGhpcyksdC53aGVuUmVhZHkodGhpcy5fdXBkYXRlLHRoaXMpLGl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3Qub2ZmKHRoaXMub3B0aW9ucy51cGRhdGVXaGVuSWRsZT9cIm1vdmVlbmRcIjpcIm1vdmVcIix0aGlzLl91cGRhdGUsdGhpcyl9LF9hZGRTY2FsZXM6ZnVuY3Rpb24odCxlLGkpe3QubWV0cmljJiYodGhpcy5fbVNjYWxlPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixlLGkpKSx0LmltcGVyaWFsJiYodGhpcy5faVNjYWxlPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixlLGkpKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcCxlPXQuZ2V0U2l6ZSgpLnkvMixpPXQuZGlzdGFuY2UodC5jb250YWluZXJQb2ludFRvTGF0TG5nKFswLGVdKSx0LmNvbnRhaW5lclBvaW50VG9MYXRMbmcoW3RoaXMub3B0aW9ucy5tYXhXaWR0aCxlXSkpO3RoaXMuX3VwZGF0ZVNjYWxlcyhpKX0sX3VwZGF0ZVNjYWxlczpmdW5jdGlvbih0KXt0aGlzLm9wdGlvbnMubWV0cmljJiZ0JiZ0aGlzLl91cGRhdGVNZXRyaWModCksdGhpcy5vcHRpb25zLmltcGVyaWFsJiZ0JiZ0aGlzLl91cGRhdGVJbXBlcmlhbCh0KX0sX3VwZGF0ZU1ldHJpYzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRSb3VuZE51bSh0KSxpPWU8MWUzP2UrXCIgbVwiOmUvMWUzK1wiIGttXCI7dGhpcy5fdXBkYXRlU2NhbGUodGhpcy5fbVNjYWxlLGksZS90KX0sX3VwZGF0ZUltcGVyaWFsOmZ1bmN0aW9uKHQpe3ZhciBlLGksbixvPTMuMjgwODM5OSp0O28+NTI4MD8oZT1vLzUyODAsaT10aGlzLl9nZXRSb3VuZE51bShlKSx0aGlzLl91cGRhdGVTY2FsZSh0aGlzLl9pU2NhbGUsaStcIiBtaVwiLGkvZSkpOihuPXRoaXMuX2dldFJvdW5kTnVtKG8pLHRoaXMuX3VwZGF0ZVNjYWxlKHRoaXMuX2lTY2FsZSxuK1wiIGZ0XCIsbi9vKSl9LF91cGRhdGVTY2FsZTpmdW5jdGlvbih0LGUsaSl7dC5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKHRoaXMub3B0aW9ucy5tYXhXaWR0aCppKStcInB4XCIsdC5pbm5lckhUTUw9ZX0sX2dldFJvdW5kTnVtOmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucG93KDEwLChNYXRoLmZsb29yKHQpK1wiXCIpLmxlbmd0aC0xKSxpPXQvZTtyZXR1cm4gaT1pPj0xMD8xMDppPj01PzU6aT49Mz8zOmk+PTI/MjoxLGUqaX19KSxvLmNvbnRyb2wuc2NhbGU9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLkNvbnRyb2wuU2NhbGUodCl9LG8uQ29udHJvbC5MYXllcnM9by5Db250cm9sLmV4dGVuZCh7b3B0aW9uczp7Y29sbGFwc2VkOiEwLHBvc2l0aW9uOlwidG9wcmlnaHRcIixhdXRvWkluZGV4OiEwLGhpZGVTaW5nbGVCYXNlOiExLHNvcnRMYXllcnM6ITEsc29ydEZ1bmN0aW9uOmZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiBpPG4/LTE6bjxpPzE6MH19LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlLGkpe28uc2V0T3B0aW9ucyh0aGlzLGkpLHRoaXMuX2xheWVycz1bXSx0aGlzLl9sYXN0WkluZGV4PTAsdGhpcy5faGFuZGxpbmdDbGljaz0hMTtmb3IodmFyIG4gaW4gdCl0aGlzLl9hZGRMYXllcih0W25dLG4pO2ZvcihuIGluIGUpdGhpcy5fYWRkTGF5ZXIoZVtuXSxuLCEwKX0sb25BZGQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2luaXRMYXlvdXQoKSx0aGlzLl91cGRhdGUoKSx0aGlzLl9tYXA9dCx0Lm9uKFwiem9vbWVuZFwiLHRoaXMuX2NoZWNrRGlzYWJsZWRMYXllcnMsdGhpcyksdGhpcy5fY29udGFpbmVyfSxvblJlbW92ZTpmdW5jdGlvbigpe3RoaXMuX21hcC5vZmYoXCJ6b29tZW5kXCIsdGhpcy5fY2hlY2tEaXNhYmxlZExheWVycyx0aGlzKTtmb3IodmFyIHQ9MDt0PHRoaXMuX2xheWVycy5sZW5ndGg7dCsrKXRoaXMuX2xheWVyc1t0XS5sYXllci5vZmYoXCJhZGQgcmVtb3ZlXCIsdGhpcy5fb25MYXllckNoYW5nZSx0aGlzKX0sYWRkQmFzZUxheWVyOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX2FkZExheWVyKHQsZSksdGhpcy5fbWFwP3RoaXMuX3VwZGF0ZSgpOnRoaXN9LGFkZE92ZXJsYXk6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fYWRkTGF5ZXIodCxlLCEwKSx0aGlzLl9tYXA/dGhpcy5fdXBkYXRlKCk6dGhpc30scmVtb3ZlTGF5ZXI6ZnVuY3Rpb24odCl7dC5vZmYoXCJhZGQgcmVtb3ZlXCIsdGhpcy5fb25MYXllckNoYW5nZSx0aGlzKTt2YXIgZT10aGlzLl9nZXRMYXllcihvLnN0YW1wKHQpKTtyZXR1cm4gZSYmdGhpcy5fbGF5ZXJzLnNwbGljZSh0aGlzLl9sYXllcnMuaW5kZXhPZihlKSwxKSx0aGlzLl9tYXA/dGhpcy5fdXBkYXRlKCk6dGhpc30sZXhwYW5kOmZ1bmN0aW9uKCl7by5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2NvbnRhaW5lcixcImxlYWZsZXQtY29udHJvbC1sYXllcnMtZXhwYW5kZWRcIiksdGhpcy5fZm9ybS5zdHlsZS5oZWlnaHQ9bnVsbDt2YXIgdD10aGlzLl9tYXAuZ2V0U2l6ZSgpLnktKHRoaXMuX2NvbnRhaW5lci5vZmZzZXRUb3ArNTApO3JldHVybiB0PHRoaXMuX2Zvcm0uY2xpZW50SGVpZ2h0PyhvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fZm9ybSxcImxlYWZsZXQtY29udHJvbC1sYXllcnMtc2Nyb2xsYmFyXCIpLHRoaXMuX2Zvcm0uc3R5bGUuaGVpZ2h0PXQrXCJweFwiKTpvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fZm9ybSxcImxlYWZsZXQtY29udHJvbC1sYXllcnMtc2Nyb2xsYmFyXCIpLHRoaXMuX2NoZWNrRGlzYWJsZWRMYXllcnMoKSx0aGlzfSxjb2xsYXBzZTpmdW5jdGlvbigpe3JldHVybiBvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jb250cm9sLWxheWVycy1leHBhbmRlZFwiKSx0aGlzfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3ZhciB0PVwibGVhZmxldC1jb250cm9sLWxheWVyc1wiLGU9dGhpcy5fY29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0KSxpPXRoaXMub3B0aW9ucy5jb2xsYXBzZWQ7ZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhhc3BvcHVwXCIsITApLG8uRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24oZSksby5Ccm93c2VyLnRvdWNofHxvLkRvbUV2ZW50LmRpc2FibGVTY3JvbGxQcm9wYWdhdGlvbihlKTt2YXIgbj10aGlzLl9mb3JtPW8uRG9tVXRpbC5jcmVhdGUoXCJmb3JtXCIsdCtcIi1saXN0XCIpO2kmJih0aGlzLl9tYXAub24oXCJjbGlja1wiLHRoaXMuY29sbGFwc2UsdGhpcyksby5Ccm93c2VyLmFuZHJvaWR8fG8uRG9tRXZlbnQub24oZSx7bW91c2VlbnRlcjp0aGlzLmV4cGFuZCxtb3VzZWxlYXZlOnRoaXMuY29sbGFwc2V9LHRoaXMpKTt2YXIgcz10aGlzLl9sYXllcnNMaW5rPW8uRG9tVXRpbC5jcmVhdGUoXCJhXCIsdCtcIi10b2dnbGVcIixlKTtzLmhyZWY9XCIjXCIscy50aXRsZT1cIkxheWVyc1wiLG8uQnJvd3Nlci50b3VjaD9vLkRvbUV2ZW50Lm9uKHMsXCJjbGlja1wiLG8uRG9tRXZlbnQuc3RvcCkub24ocyxcImNsaWNrXCIsdGhpcy5leHBhbmQsdGhpcyk6by5Eb21FdmVudC5vbihzLFwiZm9jdXNcIix0aGlzLmV4cGFuZCx0aGlzKSxvLkRvbUV2ZW50Lm9uKG4sXCJjbGlja1wiLGZ1bmN0aW9uKCl7c2V0VGltZW91dChvLmJpbmQodGhpcy5fb25JbnB1dENsaWNrLHRoaXMpLDApfSx0aGlzKSxpfHx0aGlzLmV4cGFuZCgpLHRoaXMuX2Jhc2VMYXllcnNMaXN0PW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiLWJhc2VcIixuKSx0aGlzLl9zZXBhcmF0b3I9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCItc2VwYXJhdG9yXCIsbiksdGhpcy5fb3ZlcmxheXNMaXN0PW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiLW92ZXJsYXlzXCIsbiksZS5hcHBlbmRDaGlsZChuKX0sX2dldExheWVyOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5fbGF5ZXJzLmxlbmd0aDtlKyspaWYodGhpcy5fbGF5ZXJzW2VdJiZvLnN0YW1wKHRoaXMuX2xheWVyc1tlXS5sYXllcik9PT10KXJldHVybiB0aGlzLl9sYXllcnNbZV19LF9hZGRMYXllcjpmdW5jdGlvbih0LGUsaSl7dC5vbihcImFkZCByZW1vdmVcIix0aGlzLl9vbkxheWVyQ2hhbmdlLHRoaXMpLHRoaXMuX2xheWVycy5wdXNoKHtsYXllcjp0LG5hbWU6ZSxvdmVybGF5Oml9KSx0aGlzLm9wdGlvbnMuc29ydExheWVycyYmdGhpcy5fbGF5ZXJzLnNvcnQoby5iaW5kKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5zb3J0RnVuY3Rpb24odC5sYXllcixlLmxheWVyLHQubmFtZSxlLm5hbWUpfSx0aGlzKSksdGhpcy5vcHRpb25zLmF1dG9aSW5kZXgmJnQuc2V0WkluZGV4JiYodGhpcy5fbGFzdFpJbmRleCsrLHQuc2V0WkluZGV4KHRoaXMuX2xhc3RaSW5kZXgpKX0sX3VwZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9jb250YWluZXIpcmV0dXJuIHRoaXM7by5Eb21VdGlsLmVtcHR5KHRoaXMuX2Jhc2VMYXllcnNMaXN0KSxvLkRvbVV0aWwuZW1wdHkodGhpcy5fb3ZlcmxheXNMaXN0KTt2YXIgdCxlLGksbixzPTA7Zm9yKGk9MDtpPHRoaXMuX2xheWVycy5sZW5ndGg7aSsrKW49dGhpcy5fbGF5ZXJzW2ldLHRoaXMuX2FkZEl0ZW0obiksZT1lfHxuLm92ZXJsYXksdD10fHwhbi5vdmVybGF5LHMrPW4ub3ZlcmxheT8wOjE7cmV0dXJuIHRoaXMub3B0aW9ucy5oaWRlU2luZ2xlQmFzZSYmKHQ9dCYmcz4xLHRoaXMuX2Jhc2VMYXllcnNMaXN0LnN0eWxlLmRpc3BsYXk9dD9cIlwiOlwibm9uZVwiKSx0aGlzLl9zZXBhcmF0b3Iuc3R5bGUuZGlzcGxheT1lJiZ0P1wiXCI6XCJub25lXCIsdGhpc30sX29uTGF5ZXJDaGFuZ2U6ZnVuY3Rpb24odCl7dGhpcy5faGFuZGxpbmdDbGlja3x8dGhpcy5fdXBkYXRlKCk7dmFyIGU9dGhpcy5fZ2V0TGF5ZXIoby5zdGFtcCh0LnRhcmdldCkpLGk9ZS5vdmVybGF5P1wiYWRkXCI9PT10LnR5cGU/XCJvdmVybGF5YWRkXCI6XCJvdmVybGF5cmVtb3ZlXCI6XCJhZGRcIj09PXQudHlwZT9cImJhc2VsYXllcmNoYW5nZVwiOm51bGw7aSYmdGhpcy5fbWFwLmZpcmUoaSxlKX0sX2NyZWF0ZVJhZGlvRWxlbWVudDpmdW5jdGlvbih0LGkpe3ZhciBuPSc8aW5wdXQgdHlwZT1cInJhZGlvXCIgY2xhc3M9XCJsZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLXNlbGVjdG9yXCIgbmFtZT1cIicrdCsnXCInKyhpPycgY2hlY2tlZD1cImNoZWNrZWRcIic6XCJcIikrXCIvPlwiLG89ZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBvLmlubmVySFRNTD1uLG8uZmlyc3RDaGlsZH0sX2FkZEl0ZW06ZnVuY3Rpb24odCl7dmFyIGksbj1lLmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKSxzPXRoaXMuX21hcC5oYXNMYXllcih0LmxheWVyKTt0Lm92ZXJsYXk/KGk9ZS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksaS50eXBlPVwiY2hlY2tib3hcIixpLmNsYXNzTmFtZT1cImxlYWZsZXQtY29udHJvbC1sYXllcnMtc2VsZWN0b3JcIixpLmRlZmF1bHRDaGVja2VkPXMpOmk9dGhpcy5fY3JlYXRlUmFkaW9FbGVtZW50KFwibGVhZmxldC1iYXNlLWxheWVyc1wiLHMpLGkubGF5ZXJJZD1vLnN0YW1wKHQubGF5ZXIpLG8uRG9tRXZlbnQub24oaSxcImNsaWNrXCIsdGhpcy5fb25JbnB1dENsaWNrLHRoaXMpO3ZhciByPWUuY3JlYXRlRWxlbWVudChcInNwYW5cIik7ci5pbm5lckhUTUw9XCIgXCIrdC5uYW1lO3ZhciBhPWUuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmFwcGVuZENoaWxkKGEpLGEuYXBwZW5kQ2hpbGQoaSksYS5hcHBlbmRDaGlsZChyKTt2YXIgaD10Lm92ZXJsYXk/dGhpcy5fb3ZlcmxheXNMaXN0OnRoaXMuX2Jhc2VMYXllcnNMaXN0O3JldHVybiBoLmFwcGVuZENoaWxkKG4pLHRoaXMuX2NoZWNrRGlzYWJsZWRMYXllcnMoKSxufSxfb25JbnB1dENsaWNrOmZ1bmN0aW9uKCl7dmFyIHQsZSxpLG49dGhpcy5fZm9ybS5nZXRFbGVtZW50c0J5VGFnTmFtZShcImlucHV0XCIpLG89W10scz1bXTt0aGlzLl9oYW5kbGluZ0NsaWNrPSEwO2Zvcih2YXIgcj1uLmxlbmd0aC0xO3I+PTA7ci0tKXQ9bltyXSxlPXRoaXMuX2dldExheWVyKHQubGF5ZXJJZCkubGF5ZXIsaT10aGlzLl9tYXAuaGFzTGF5ZXIoZSksdC5jaGVja2VkJiYhaT9vLnB1c2goZSk6IXQuY2hlY2tlZCYmaSYmcy5wdXNoKGUpO2ZvcihyPTA7cjxzLmxlbmd0aDtyKyspdGhpcy5fbWFwLnJlbW92ZUxheWVyKHNbcl0pO2ZvcihyPTA7cjxvLmxlbmd0aDtyKyspdGhpcy5fbWFwLmFkZExheWVyKG9bcl0pO3RoaXMuX2hhbmRsaW5nQ2xpY2s9ITEsdGhpcy5fcmVmb2N1c09uTWFwKCl9LF9jaGVja0Rpc2FibGVkTGF5ZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0LGUsbj10aGlzLl9mb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksbz10aGlzLl9tYXAuZ2V0Wm9vbSgpLHM9bi5sZW5ndGgtMTtzPj0wO3MtLSl0PW5bc10sZT10aGlzLl9nZXRMYXllcih0LmxheWVySWQpLmxheWVyLHQuZGlzYWJsZWQ9ZS5vcHRpb25zLm1pblpvb20hPT1pJiZvPGUub3B0aW9ucy5taW5ab29tfHxlLm9wdGlvbnMubWF4Wm9vbSE9PWkmJm8+ZS5vcHRpb25zLm1heFpvb219LF9leHBhbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5leHBhbmQoKX0sX2NvbGxhcHNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29sbGFwc2UoKX19KSxvLmNvbnRyb2wubGF5ZXJzPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbmV3IG8uQ29udHJvbC5MYXllcnModCxlLGkpfX0od2luZG93LGRvY3VtZW50KTsiLCIhZnVuY3Rpb24oYSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMpbW9kdWxlLmV4cG9ydHM9YSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShhKTtlbHNle3ZhciBiO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/Yj13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9iPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKGI9c2VsZiksYi5wcm9qND1hKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBhKGIsYyxkKXtmdW5jdGlvbiBlKGcsaCl7aWYoIWNbZ10pe2lmKCFiW2ddKXt2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFoJiZpKXJldHVybiBpKGcsITApO2lmKGYpcmV0dXJuIGYoZywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitnK1wiJ1wiKX12YXIgaj1jW2ddPXtleHBvcnRzOnt9fTtiW2ddWzBdLmNhbGwoai5leHBvcnRzLGZ1bmN0aW9uKGEpe3ZhciBjPWJbZ11bMV1bYV07cmV0dXJuIGUoYz9jOmEpfSxqLGouZXhwb3J0cyxhLGIsYyxkKX1yZXR1cm4gY1tnXS5leHBvcnRzfWZvcih2YXIgZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGc9MDtnPGQubGVuZ3RoO2crKyllKGRbZ10pO3JldHVybiBlfSh7MTpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBQb2ludChhLGIsYyl7aWYoISh0aGlzIGluc3RhbmNlb2YgUG9pbnQpKXJldHVybiBuZXcgUG9pbnQoYSxiLGMpO2lmKEFycmF5LmlzQXJyYXkoYSkpdGhpcy54PWFbMF0sdGhpcy55PWFbMV0sdGhpcy56PWFbMl18fDA7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgYSl0aGlzLng9YS54LHRoaXMueT1hLnksdGhpcy56PWEuenx8MDtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgYil7dmFyIGQ9YS5zcGxpdChcIixcIik7dGhpcy54PXBhcnNlRmxvYXQoZFswXSwxMCksdGhpcy55PXBhcnNlRmxvYXQoZFsxXSwxMCksdGhpcy56PXBhcnNlRmxvYXQoZFsyXSwxMCl8fDB9ZWxzZSB0aGlzLng9YSx0aGlzLnk9Yix0aGlzLno9Y3x8MDtjb25zb2xlLndhcm4oXCJwcm9qNC5Qb2ludCB3aWxsIGJlIHJlbW92ZWQgaW4gdmVyc2lvbiAzLCB1c2UgcHJvajQudG9Qb2ludFwiKX12YXIgYz1hKFwibWdyc1wiKTtQb2ludC5mcm9tTUdSUz1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IFBvaW50KGMudG9Qb2ludChhKSl9LFBvaW50LnByb3RvdHlwZS50b01HUlM9ZnVuY3Rpb24oYSl7cmV0dXJuIGMuZm9yd2FyZChbdGhpcy54LHRoaXMueV0sYSl9LGIuZXhwb3J0cz1Qb2ludH0se21ncnM6NjZ9XSwyOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIFByb2plY3Rpb24oYSxiKXtpZighKHRoaXMgaW5zdGFuY2VvZiBQcm9qZWN0aW9uKSlyZXR1cm4gbmV3IFByb2plY3Rpb24oYSk7Yj1ifHxmdW5jdGlvbihhKXtpZihhKXRocm93IGF9O3ZhciBlPWMoYSk7aWYoXCJvYmplY3RcIiE9dHlwZW9mIGUpcmV0dXJuIHZvaWQgYihhKTt2YXIgZz1mKGUpLGg9UHJvamVjdGlvbi5wcm9qZWN0aW9ucy5nZXQoZy5wcm9qTmFtZSk7aD8oZCh0aGlzLGcpLGQodGhpcyxoKSx0aGlzLmluaXQoKSxiKG51bGwsdGhpcykpOmIoYSl9dmFyIGM9YShcIi4vcGFyc2VDb2RlXCIpLGQ9YShcIi4vZXh0ZW5kXCIpLGU9YShcIi4vcHJvamVjdGlvbnNcIiksZj1hKFwiLi9kZXJpdmVDb25zdGFudHNcIik7UHJvamVjdGlvbi5wcm9qZWN0aW9ucz1lLFByb2plY3Rpb24ucHJvamVjdGlvbnMuc3RhcnQoKSxiLmV4cG9ydHM9UHJvamVjdGlvbn0se1wiLi9kZXJpdmVDb25zdGFudHNcIjozMixcIi4vZXh0ZW5kXCI6MzMsXCIuL3BhcnNlQ29kZVwiOjM2LFwiLi9wcm9qZWN0aW9uc1wiOjM4fV0sMzpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnPWMueCxoPWMueSxpPWMuenx8MDtmb3IoZj0wOzM+ZjtmKyspaWYoIWJ8fDIhPT1mfHx2b2lkIDAhPT1jLnopc3dpdGNoKDA9PT1mPyhkPWcsZT1cInhcIik6MT09PWY/KGQ9aCxlPVwieVwiKTooZD1pLGU9XCJ6XCIpLGEuYXhpc1tmXSl7Y2FzZVwiZVwiOmNbZV09ZDticmVhaztjYXNlXCJ3XCI6Y1tlXT0tZDticmVhaztjYXNlXCJuXCI6Y1tlXT1kO2JyZWFrO2Nhc2VcInNcIjpjW2VdPS1kO2JyZWFrO2Nhc2VcInVcIjp2b2lkIDAhPT1jW2VdJiYoYy56PWQpO2JyZWFrO2Nhc2VcImRcIjp2b2lkIDAhPT1jW2VdJiYoYy56PS1kKTticmVhaztkZWZhdWx0OnJldHVybiBudWxsfXJldHVybiBjfX0se31dLDQ6W2Z1bmN0aW9uKGEsYil7dmFyIGM9TWF0aC5QSS8yLGQ9YShcIi4vc2lnblwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuIE1hdGguYWJzKGEpPGM/YTphLWQoYSkqTWF0aC5QSX19LHtcIi4vc2lnblwiOjIxfV0sNTpbZnVuY3Rpb24oYSxiKXt2YXIgYz0yKk1hdGguUEksZD1hKFwiLi9zaWduXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnMoYSk8TWF0aC5QST9hOmEtZChhKSpjfX0se1wiLi9zaWduXCI6MjF9XSw2OltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnMoYSk+MSYmKGE9YT4xPzE6LTEpLE1hdGguYXNpbihhKX19LHt9XSw3OltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gMS0uMjUqYSooMSthLzE2KigzKzEuMjUqYSkpfX0se31dLDg6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybi4zNzUqYSooMSsuMjUqYSooMSsuNDY4NzUqYSkpfX0se31dLDk6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybi4wNTg1OTM3NSphKmEqKDErLjc1KmEpfX0se31dLDEwOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gYSphKmEqKDM1LzMwNzIpfX0se31dLDExOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YipjO3JldHVybiBhL01hdGguc3FydCgxLWQqZCl9fSx7fV0sMTI6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZztmPWEvYjtmb3IodmFyIGg9MDsxNT5oO2grKylpZihnPShhLShiKmYtYypNYXRoLnNpbigyKmYpK2QqTWF0aC5zaW4oNCpmKS1lKk1hdGguc2luKDYqZikpKS8oYi0yKmMqTWF0aC5jb3MoMipmKSs0KmQqTWF0aC5jb3MoNCpmKS02KmUqTWF0aC5jb3MoNipmKSksZis9ZyxNYXRoLmFicyhnKTw9MWUtMTApcmV0dXJuIGY7cmV0dXJuIDAvMH19LHt9XSwxMzpbZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLlBJLzI7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGQ9MS0oMS1hKmEpLygyKmEpKk1hdGgubG9nKCgxLWEpLygxK2EpKTtpZihNYXRoLmFicyhNYXRoLmFicyhiKS1kKTwxZS02KXJldHVybiAwPmI/LTEqYzpjO2Zvcih2YXIgZSxmLGcsaCxpPU1hdGguYXNpbiguNSpiKSxqPTA7MzA+ajtqKyspaWYoZj1NYXRoLnNpbihpKSxnPU1hdGguY29zKGkpLGg9YSpmLGU9TWF0aC5wb3coMS1oKmgsMikvKDIqZykqKGIvKDEtYSphKS1mLygxLWgqaCkrLjUvYSpNYXRoLmxvZygoMS1oKS8oMStoKSkpLGkrPWUsTWF0aC5hYnMoZSk8PTFlLTEwKXJldHVybiBpO3JldHVybiAwLzB9fSx7fV0sMTQ6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIGEqZS1iKk1hdGguc2luKDIqZSkrYypNYXRoLnNpbig0KmUpLWQqTWF0aC5zaW4oNiplKX19LHt9XSwxNTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEqYjtyZXR1cm4gYy9NYXRoLnNxcnQoMS1kKmQpfX0se31dLDE2OltmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguUEkvMjtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGQsZSxmPS41KmEsZz1jLTIqTWF0aC5hdGFuKGIpLGg9MDsxNT49aDtoKyspaWYoZD1hKk1hdGguc2luKGcpLGU9Yy0yKk1hdGguYXRhbihiKk1hdGgucG93KCgxLWQpLygxK2QpLGYpKS1nLGcrPWUsTWF0aC5hYnMoZSk8PTFlLTEwKXJldHVybiBnO3JldHVybi05OTk5fX0se31dLDE3OltmdW5jdGlvbihhLGIpe3ZhciBjPTEsZD0uMjUsZT0uMDQ2ODc1LGY9LjAxOTUzMTI1LGc9LjAxMDY4MTE1MjM0Mzc1LGg9Ljc1LGk9LjQ2ODc1LGo9LjAxMzAyMDgzMzMzMzMzMzMzNCxrPS4wMDcxMjA3NjgyMjkxNjY2NjcsbD0uMzY0NTgzMzMzMzMzMzMzMyxtPS4wMDU2OTY2MTQ1ODMzMzMzMzMsbj0uMzA3NjE3MTg3NTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7dmFyIGI9W107YlswXT1jLWEqKGQrYSooZSthKihmK2EqZykpKSxiWzFdPWEqKGgtYSooZSthKihmK2EqZykpKTt2YXIgbz1hKmE7cmV0dXJuIGJbMl09byooaS1hKihqK2EqaykpLG8qPWEsYlszXT1vKihsLWEqbSksYls0XT1vKmEqbixifX0se31dLDE4OltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL3BqX21sZm5cIiksZD0xZS0xMCxlPTIwO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsZil7Zm9yKHZhciBnPTEvKDEtYiksaD1hLGk9ZTtpOy0taSl7dmFyIGo9TWF0aC5zaW4oaCksaz0xLWIqaipqO2lmKGs9KGMoaCxqLE1hdGguY29zKGgpLGYpLWEpKmsqTWF0aC5zcXJ0KGspKmcsaC09ayxNYXRoLmFicyhrKTxkKXJldHVybiBofXJldHVybiBofX0se1wiLi9wal9tbGZuXCI6MTl9XSwxOTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIGMqPWIsYio9YixkWzBdKmEtYyooZFsxXStiKihkWzJdK2IqKGRbM10rYipkWzRdKSkpfX0se31dLDIwOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjO3JldHVybiBhPjFlLTc/KGM9YSpiLCgxLWEqYSkqKGIvKDEtYypjKS0uNS9hKk1hdGgubG9nKCgxLWMpLygxK2MpKSkpOjIqYn19LHt9XSwyMTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuIDA+YT8tMToxfX0se31dLDIyOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLnBvdygoMS1hKS8oMSthKSxiKX19LHt9XSwyMzpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7dmFyIGI9e3g6YVswXSx5OmFbMV19O3JldHVybiBhLmxlbmd0aD4yJiYoYi56PWFbMl0pLGEubGVuZ3RoPjMmJihiLm09YVszXSksYn19LHt9XSwyNDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLlBJLzI7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1hKmQsZj0uNSphO3JldHVybiBlPU1hdGgucG93KCgxLWUpLygxK2UpLGYpLE1hdGgudGFuKC41KihjLWIpKS9lfX0se31dLDI1OltmdW5jdGlvbihhLGIsYyl7Yy53Z3M4ND17dG93Z3M4NDpcIjAsMCwwXCIsZWxsaXBzZTpcIldHUzg0XCIsZGF0dW1OYW1lOlwiV0dTODRcIn0sYy5jaDE5MDM9e3Rvd2dzODQ6XCI2NzQuMzc0LDE1LjA1Niw0MDUuMzQ2XCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcInN3aXNzXCJ9LGMuZ2dyczg3PXt0b3dnczg0OlwiLTE5OS44Nyw3NC43OSwyNDYuNjJcIixlbGxpcHNlOlwiR1JTODBcIixkYXR1bU5hbWU6XCJHcmVla19HZW9kZXRpY19SZWZlcmVuY2VfU3lzdGVtXzE5ODdcIn0sYy5uYWQ4Mz17dG93Z3M4NDpcIjAsMCwwXCIsZWxsaXBzZTpcIkdSUzgwXCIsZGF0dW1OYW1lOlwiTm9ydGhfQW1lcmljYW5fRGF0dW1fMTk4M1wifSxjLm5hZDI3PXtuYWRncmlkczpcIkBjb251cyxAYWxhc2thLEBudHYyXzAuZ3NiLEBudHYxX2Nhbi5kYXRcIixlbGxpcHNlOlwiY2xyazY2XCIsZGF0dW1OYW1lOlwiTm9ydGhfQW1lcmljYW5fRGF0dW1fMTkyN1wifSxjLnBvdHNkYW09e3Rvd2dzODQ6XCI2MDYuMCwyMy4wLDQxMy4wXCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcIlBvdHNkYW0gUmF1ZW5iZXJnIDE5NTAgREhETlwifSxjLmNhcnRoYWdlPXt0b3dnczg0OlwiLTI2My4wLDYuMCw0MzEuMFwiLGVsbGlwc2U6XCJjbGFyazgwXCIsZGF0dW1OYW1lOlwiQ2FydGhhZ2UgMTkzNCBUdW5pc2lhXCJ9LGMuaGVybWFubnNrb2dlbD17dG93Z3M4NDpcIjY1My4wLC0yMTIuMCw0NDkuMFwiLGVsbGlwc2U6XCJiZXNzZWxcIixkYXR1bU5hbWU6XCJIZXJtYW5uc2tvZ2VsXCJ9LGMuaXJlNjU9e3Rvd2dzODQ6XCI0ODIuNTMwLC0xMzAuNTk2LDU2NC41NTcsLTEuMDQyLC0wLjIxNCwtMC42MzEsOC4xNVwiLGVsbGlwc2U6XCJtb2RfYWlyeVwiLGRhdHVtTmFtZTpcIklyZWxhbmQgMTk2NVwifSxjLnJhc3NhZGlyYW49e3Rvd2dzODQ6XCItMTMzLjYzLC0xNTcuNSwtMTU4LjYyXCIsZWxsaXBzZTpcImludGxcIixkYXR1bU5hbWU6XCJSYXNzYWRpcmFuXCJ9LGMubnpnZDQ5PXt0b3dnczg0OlwiNTkuNDcsLTUuMDQsMTg3LjQ0LDAuNDcsLTAuMSwxLjAyNCwtNC41OTkzXCIsZWxsaXBzZTpcImludGxcIixkYXR1bU5hbWU6XCJOZXcgWmVhbGFuZCBHZW9kZXRpYyBEYXR1bSAxOTQ5XCJ9LGMub3NnYjM2PXt0b3dnczg0OlwiNDQ2LjQ0OCwtMTI1LjE1Nyw1NDIuMDYwLDAuMTUwMiwwLjI0NzAsMC44NDIxLC0yMC40ODk0XCIsZWxsaXBzZTpcImFpcnlcIixkYXR1bU5hbWU6XCJBaXJ5IDE4MzBcIn0sYy5zX2p0c2s9e3Rvd2dzODQ6XCI1ODksNzYsNDgwXCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcIlMtSlRTSyAoRmVycm8pXCJ9LGMuYmVkdWFyYW09e3Rvd2dzODQ6XCItMTA2LC04NywxODhcIixlbGxpcHNlOlwiY2xyazgwXCIsZGF0dW1OYW1lOlwiQmVkdWFyYW1cIn0sYy5ndW51bmdfc2VnYXJhPXt0b3dnczg0OlwiLTQwMyw2ODQsNDFcIixlbGxpcHNlOlwiYmVzc2VsXCIsZGF0dW1OYW1lOlwiR3VudW5nIFNlZ2FyYSBKYWthcnRhXCJ9LGMucm5iNzI9e3Rvd2dzODQ6XCIxMDYuODY5LC01Mi4yOTc4LDEwMy43MjQsLTAuMzM2NTcsMC40NTY5NTUsLTEuODQyMTgsMVwiLGVsbGlwc2U6XCJpbnRsXCIsZGF0dW1OYW1lOlwiUmVzZWF1IE5hdGlvbmFsIEJlbGdlIDE5NzJcIn19LHt9XSwyNjpbZnVuY3Rpb24oYSxiLGMpe2MuTUVSSVQ9e2E6NjM3ODEzNyxyZjoyOTguMjU3LGVsbGlwc2VOYW1lOlwiTUVSSVQgMTk4M1wifSxjLlNHUzg1PXthOjYzNzgxMzYscmY6Mjk4LjI1NyxlbGxpcHNlTmFtZTpcIlNvdmlldCBHZW9kZXRpYyBTeXN0ZW0gODVcIn0sYy5HUlM4MD17YTo2Mzc4MTM3LHJmOjI5OC4yNTcyMjIxMDEsZWxsaXBzZU5hbWU6XCJHUlMgMTk4MChJVUdHLCAxOTgwKVwifSxjLklBVTc2PXthOjYzNzgxNDAscmY6Mjk4LjI1NyxlbGxpcHNlTmFtZTpcIklBVSAxOTc2XCJ9LGMuYWlyeT17YTo2Mzc3NTYzLjM5NixiOjYzNTYyNTYuOTEsZWxsaXBzZU5hbWU6XCJBaXJ5IDE4MzBcIn0sYy5BUEw0PXthOjYzNzgxMzcscmY6Mjk4LjI1LGVsbGlwc2VOYW1lOlwiQXBwbC4gUGh5c2ljcy4gMTk2NVwifSxjLk5XTDlEPXthOjYzNzgxNDUscmY6Mjk4LjI1LGVsbGlwc2VOYW1lOlwiTmF2YWwgV2VhcG9ucyBMYWIuLCAxOTY1XCJ9LGMubW9kX2Fpcnk9e2E6NjM3NzM0MC4xODksYjo2MzU2MDM0LjQ0NixlbGxpcHNlTmFtZTpcIk1vZGlmaWVkIEFpcnlcIn0sYy5hbmRyYWU9e2E6NjM3NzEwNC40MyxyZjozMDAsZWxsaXBzZU5hbWU6XCJBbmRyYWUgMTg3NiAoRGVuLiwgSWNsbmQuKVwifSxjLmF1c3RfU0E9e2E6NjM3ODE2MCxyZjoyOTguMjUsZWxsaXBzZU5hbWU6XCJBdXN0cmFsaWFuIE5hdGwgJiBTLiBBbWVyLiAxOTY5XCJ9LGMuR1JTNjc9e2E6NjM3ODE2MCxyZjoyOTguMjQ3MTY3NDI3LGVsbGlwc2VOYW1lOlwiR1JTIDY3KElVR0cgMTk2NylcIn0sYy5iZXNzZWw9e2E6NjM3NzM5Ny4xNTUscmY6Mjk5LjE1MjgxMjgsZWxsaXBzZU5hbWU6XCJCZXNzZWwgMTg0MVwifSxjLmJlc3NfbmFtPXthOjYzNzc0ODMuODY1LHJmOjI5OS4xNTI4MTI4LGVsbGlwc2VOYW1lOlwiQmVzc2VsIDE4NDEgKE5hbWliaWEpXCJ9LGMuY2xyazY2PXthOjYzNzgyMDYuNCxiOjYzNTY1ODMuOCxlbGxpcHNlTmFtZTpcIkNsYXJrZSAxODY2XCJ9LGMuY2xyazgwPXthOjYzNzgyNDkuMTQ1LHJmOjI5My40NjYzLGVsbGlwc2VOYW1lOlwiQ2xhcmtlIDE4ODAgbW9kLlwifSxjLmNscms1OD17YTo2Mzc4MjkzLjY0NTIwODc1OSxyZjoyOTQuMjYwNjc2MzY5MjY1NCxlbGxpcHNlTmFtZTpcIkNsYXJrZSAxODU4XCJ9LGMuQ1BNPXthOjYzNzU3MzguNyxyZjozMzQuMjksZWxsaXBzZU5hbWU6XCJDb21tLiBkZXMgUG9pZHMgZXQgTWVzdXJlcyAxNzk5XCJ9LGMuZGVsbWJyPXthOjYzNzY0MjgscmY6MzExLjUsZWxsaXBzZU5hbWU6XCJEZWxhbWJyZSAxODEwIChCZWxnaXVtKVwifSxjLmVuZ2VsaXM9e2E6NjM3ODEzNi4wNSxyZjoyOTguMjU2NixlbGxpcHNlTmFtZTpcIkVuZ2VsaXMgMTk4NVwifSxjLmV2cnN0MzA9e2E6NjM3NzI3Ni4zNDUscmY6MzAwLjgwMTcsZWxsaXBzZU5hbWU6XCJFdmVyZXN0IDE4MzBcIn0sYy5ldnJzdDQ4PXthOjYzNzczMDQuMDYzLHJmOjMwMC44MDE3LGVsbGlwc2VOYW1lOlwiRXZlcmVzdCAxOTQ4XCJ9LGMuZXZyc3Q1Nj17YTo2Mzc3MzAxLjI0MyxyZjozMDAuODAxNyxlbGxpcHNlTmFtZTpcIkV2ZXJlc3QgMTk1NlwifSxjLmV2cnN0Njk9e2E6NjM3NzI5NS42NjQscmY6MzAwLjgwMTcsZWxsaXBzZU5hbWU6XCJFdmVyZXN0IDE5NjlcIn0sYy5ldnJzdFNTPXthOjYzNzcyOTguNTU2LHJmOjMwMC44MDE3LGVsbGlwc2VOYW1lOlwiRXZlcmVzdCAoU2FiYWggJiBTYXJhd2FrKVwifSxjLmZzY2hyNjA9e2E6NjM3ODE2NixyZjoyOTguMyxlbGxpcHNlTmFtZTpcIkZpc2NoZXIgKE1lcmN1cnkgRGF0dW0pIDE5NjBcIn0sYy5mc2NocjYwbT17YTo2Mzc4MTU1LHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiRmlzY2hlciAxOTYwXCJ9LGMuZnNjaHI2OD17YTo2Mzc4MTUwLHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiRmlzY2hlciAxOTY4XCJ9LGMuaGVsbWVydD17YTo2Mzc4MjAwLHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiSGVsbWVydCAxOTA2XCJ9LGMuaG91Z2g9e2E6NjM3ODI3MCxyZjoyOTcsZWxsaXBzZU5hbWU6XCJIb3VnaFwifSxjLmludGw9e2E6NjM3ODM4OCxyZjoyOTcsZWxsaXBzZU5hbWU6XCJJbnRlcm5hdGlvbmFsIDE5MDkgKEhheWZvcmQpXCJ9LGMua2F1bGE9e2E6NjM3ODE2MyxyZjoyOTguMjQsZWxsaXBzZU5hbWU6XCJLYXVsYSAxOTYxXCJ9LGMubGVyY2g9e2E6NjM3ODEzOSxyZjoyOTguMjU3LGVsbGlwc2VOYW1lOlwiTGVyY2ggMTk3OVwifSxjLm1wcnRzPXthOjYzOTczMDAscmY6MTkxLGVsbGlwc2VOYW1lOlwiTWF1cGVydGl1cyAxNzM4XCJ9LGMubmV3X2ludGw9e2E6NjM3ODE1Ny41LGI6NjM1Njc3Mi4yLGVsbGlwc2VOYW1lOlwiTmV3IEludGVybmF0aW9uYWwgMTk2N1wifSxjLnBsZXNzaXM9e2E6NjM3NjUyMyxyZjo2MzU1ODYzLGVsbGlwc2VOYW1lOlwiUGxlc3NpcyAxODE3IChGcmFuY2UpXCJ9LGMua3Jhc3M9e2E6NjM3ODI0NSxyZjoyOTguMyxlbGxpcHNlTmFtZTpcIktyYXNzb3Zza3ksIDE5NDJcIn0sYy5TRWFzaWE9e2E6NjM3ODE1NSxiOjYzNTY3NzMuMzIwNSxlbGxpcHNlTmFtZTpcIlNvdXRoZWFzdCBBc2lhXCJ9LGMud2FsYmVjaz17YTo2Mzc2ODk2LGI6NjM1NTgzNC44NDY3LGVsbGlwc2VOYW1lOlwiV2FsYmVja1wifSxjLldHUzYwPXthOjYzNzgxNjUscmY6Mjk4LjMsZWxsaXBzZU5hbWU6XCJXR1MgNjBcIn0sYy5XR1M2Nj17YTo2Mzc4MTQ1LHJmOjI5OC4yNSxlbGxpcHNlTmFtZTpcIldHUyA2NlwifSxjLldHUzc9e2E6NjM3ODEzNSxyZjoyOTguMjYsZWxsaXBzZU5hbWU6XCJXR1MgNzJcIn0sYy5XR1M4ND17YTo2Mzc4MTM3LHJmOjI5OC4yNTcyMjM1NjMsZWxsaXBzZU5hbWU6XCJXR1MgODRcIn0sYy5zcGhlcmU9e2E6NjM3MDk5NyxiOjYzNzA5OTcsZWxsaXBzZU5hbWU6XCJOb3JtYWwgU3BoZXJlIChyPTYzNzA5OTcpXCJ9fSx7fV0sMjc6W2Z1bmN0aW9uKGEsYixjKXtjLmdyZWVud2ljaD0wLGMubGlzYm9uPS05LjEzMTkwNjExMTExMSxjLnBhcmlzPTIuMzM3MjI5MTY2NjY3LGMuYm9nb3RhPS03NC4wODA5MTY2NjY2NjcsYy5tYWRyaWQ9LTMuNjg3OTM4ODg4ODg5LGMucm9tZT0xMi40NTIzMzMzMzMzMzMsYy5iZXJuPTcuNDM5NTgzMzMzMzMzLGMuamFrYXJ0YT0xMDYuODA3NzE5NDQ0NDQ0LGMuZmVycm89LTE3LjY2NjY2NjY2NjY2NyxjLmJydXNzZWxzPTQuMzY3OTc1LGMuc3RvY2tob2xtPTE4LjA1ODI3Nzc3Nzc3OCxjLmF0aGVucz0yMy43MTYzMzc1LGMub3Nsbz0xMC43MjI5MTY2NjY2Njd9LHt9XSwyODpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYixjKXt2YXIgZDtyZXR1cm4gQXJyYXkuaXNBcnJheShjKT8oZD1mKGEsYixjKSwzPT09Yy5sZW5ndGg/W2QueCxkLnksZC56XTpbZC54LGQueV0pOmYoYSxiLGMpfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBlP2E6YS5vUHJvaj9hLm9Qcm9qOmUoYSl9ZnVuY3Rpb24gcHJvajQoYSxiLGUpe2E9ZChhKTt2YXIgZixoPSExO3JldHVyblwidW5kZWZpbmVkXCI9PXR5cGVvZiBiPyhiPWEsYT1nLGg9ITApOihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi54fHxBcnJheS5pc0FycmF5KGIpKSYmKGU9YixiPWEsYT1nLGg9ITApLGI9ZChiKSxlP2MoYSxiLGUpOihmPXtmb3J3YXJkOmZ1bmN0aW9uKGQpe3JldHVybiBjKGEsYixkKX0saW52ZXJzZTpmdW5jdGlvbihkKXtyZXR1cm4gYyhiLGEsZCl9fSxoJiYoZi5vUHJvaj1iKSxmKX12YXIgZT1hKFwiLi9Qcm9qXCIpLGY9YShcIi4vdHJhbnNmb3JtXCIpLGc9ZShcIldHUzg0XCIpO2IuZXhwb3J0cz1wcm9qNH0se1wiLi9Qcm9qXCI6MixcIi4vdHJhbnNmb3JtXCI6NjR9XSwyOTpbZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLlBJLzIsZD0xLGU9MixmPTMsZz00LGg9NSxpPTQ4NDgxMzY4MTEwOTUzNmUtMjAsaj0xLjAwMjYsaz0uMzgyNjgzNDMyMzY1MDg5OCxsPWZ1bmN0aW9uKGEpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGwpKXJldHVybiBuZXcgbChhKTtpZih0aGlzLmRhdHVtX3R5cGU9ZyxhKXtpZihhLmRhdHVtQ29kZSYmXCJub25lXCI9PT1hLmRhdHVtQ29kZSYmKHRoaXMuZGF0dW1fdHlwZT1oKSxhLmRhdHVtX3BhcmFtcyl7Zm9yKHZhciBiPTA7YjxhLmRhdHVtX3BhcmFtcy5sZW5ndGg7YisrKWEuZGF0dW1fcGFyYW1zW2JdPXBhcnNlRmxvYXQoYS5kYXR1bV9wYXJhbXNbYl0pOygwIT09YS5kYXR1bV9wYXJhbXNbMF18fDAhPT1hLmRhdHVtX3BhcmFtc1sxXXx8MCE9PWEuZGF0dW1fcGFyYW1zWzJdKSYmKHRoaXMuZGF0dW1fdHlwZT1kKSxhLmRhdHVtX3BhcmFtcy5sZW5ndGg+MyYmKDAhPT1hLmRhdHVtX3BhcmFtc1szXXx8MCE9PWEuZGF0dW1fcGFyYW1zWzRdfHwwIT09YS5kYXR1bV9wYXJhbXNbNV18fDAhPT1hLmRhdHVtX3BhcmFtc1s2XSkmJih0aGlzLmRhdHVtX3R5cGU9ZSxhLmRhdHVtX3BhcmFtc1szXSo9aSxhLmRhdHVtX3BhcmFtc1s0XSo9aSxhLmRhdHVtX3BhcmFtc1s1XSo9aSxhLmRhdHVtX3BhcmFtc1s2XT1hLmRhdHVtX3BhcmFtc1s2XS8xZTYrMSl9dGhpcy5kYXR1bV90eXBlPWEuZ3JpZHM/Zjp0aGlzLmRhdHVtX3R5cGUsdGhpcy5hPWEuYSx0aGlzLmI9YS5iLHRoaXMuZXM9YS5lcyx0aGlzLmVwMj1hLmVwMix0aGlzLmRhdHVtX3BhcmFtcz1hLmRhdHVtX3BhcmFtcyx0aGlzLmRhdHVtX3R5cGU9PT1mJiYodGhpcy5ncmlkcz1hLmdyaWRzKX19O2wucHJvdG90eXBlPXtjb21wYXJlX2RhdHVtczpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5kYXR1bV90eXBlIT09YS5kYXR1bV90eXBlPyExOnRoaXMuYSE9PWEuYXx8TWF0aC5hYnModGhpcy5lcy1hLmVzKT41ZS0xMT8hMTp0aGlzLmRhdHVtX3R5cGU9PT1kP3RoaXMuZGF0dW1fcGFyYW1zWzBdPT09YS5kYXR1bV9wYXJhbXNbMF0mJnRoaXMuZGF0dW1fcGFyYW1zWzFdPT09YS5kYXR1bV9wYXJhbXNbMV0mJnRoaXMuZGF0dW1fcGFyYW1zWzJdPT09YS5kYXR1bV9wYXJhbXNbMl06dGhpcy5kYXR1bV90eXBlPT09ZT90aGlzLmRhdHVtX3BhcmFtc1swXT09PWEuZGF0dW1fcGFyYW1zWzBdJiZ0aGlzLmRhdHVtX3BhcmFtc1sxXT09PWEuZGF0dW1fcGFyYW1zWzFdJiZ0aGlzLmRhdHVtX3BhcmFtc1syXT09PWEuZGF0dW1fcGFyYW1zWzJdJiZ0aGlzLmRhdHVtX3BhcmFtc1szXT09PWEuZGF0dW1fcGFyYW1zWzNdJiZ0aGlzLmRhdHVtX3BhcmFtc1s0XT09PWEuZGF0dW1fcGFyYW1zWzRdJiZ0aGlzLmRhdHVtX3BhcmFtc1s1XT09PWEuZGF0dW1fcGFyYW1zWzVdJiZ0aGlzLmRhdHVtX3BhcmFtc1s2XT09PWEuZGF0dW1fcGFyYW1zWzZdOnRoaXMuZGF0dW1fdHlwZT09PWZ8fGEuZGF0dW1fdHlwZT09PWY/dGhpcy5uYWRncmlkcz09PWEubmFkZ3JpZHM6ITB9LGdlb2RldGljX3RvX2dlb2NlbnRyaWM6ZnVuY3Rpb24oYSl7dmFyIGIsZCxlLGYsZyxoLGksaj1hLngsaz1hLnksbD1hLno/YS56OjAsbT0wO2lmKC1jPmsmJms+LTEuMDAxKmMpaz0tYztlbHNlIGlmKGs+YyYmMS4wMDEqYz5rKWs9YztlbHNlIGlmKC1jPmt8fGs+YylyZXR1cm4gbnVsbDtyZXR1cm4gaj5NYXRoLlBJJiYoai09MipNYXRoLlBJKSxnPU1hdGguc2luKGspLGk9TWF0aC5jb3MoayksaD1nKmcsZj10aGlzLmEvTWF0aC5zcXJ0KDEtdGhpcy5lcypoKSxiPShmK2wpKmkqTWF0aC5jb3MoaiksZD0oZitsKSppKk1hdGguc2luKGopLGU9KGYqKDEtdGhpcy5lcykrbCkqZyxhLng9YixhLnk9ZCxhLno9ZSxtfSxnZW9jZW50cmljX3RvX2dlb2RldGljOmZ1bmN0aW9uKGEpe3ZhciBiLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdD0xZS0xMix1PXQqdCx2PTMwLHc9YS54LHg9YS55LHk9YS56P2EuejowO2lmKG89ITEsYj1NYXRoLnNxcnQodyp3K3gqeCksZD1NYXRoLnNxcnQodyp3K3gqeCt5KnkpLGIvdGhpcy5hPHQpe2lmKG89ITAscT0wLGQvdGhpcy5hPHQpcmV0dXJuIHI9Yyx2b2lkKHM9LXRoaXMuYil9ZWxzZSBxPU1hdGguYXRhbjIoeCx3KTtlPXkvZCxmPWIvZCxnPTEvTWF0aC5zcXJ0KDEtdGhpcy5lcyooMi10aGlzLmVzKSpmKmYpLGo9ZiooMS10aGlzLmVzKSpnLGs9ZSpnLHA9MDtkbyBwKyssaT10aGlzLmEvTWF0aC5zcXJ0KDEtdGhpcy5lcyprKmspLHM9YipqK3kqay1pKigxLXRoaXMuZXMqayprKSxoPXRoaXMuZXMqaS8oaStzKSxnPTEvTWF0aC5zcXJ0KDEtaCooMi1oKSpmKmYpLGw9ZiooMS1oKSpnLG09ZSpnLG49bSpqLWwqayxqPWwsaz1tO3doaWxlKG4qbj51JiZ2PnApO3JldHVybiByPU1hdGguYXRhbihtL01hdGguYWJzKGwpKSxhLng9cSxhLnk9cixhLno9cyxhfSxnZW9jZW50cmljX3RvX2dlb2RldGljX25vbml0ZXI6ZnVuY3Rpb24oYSl7dmFyIGIsZCxlLGYsZyxoLGksbCxtLG4sbyxwLHEscixzLHQsdSx2PWEueCx3PWEueSx4PWEuej9hLno6MDtpZih2PXBhcnNlRmxvYXQodiksdz1wYXJzZUZsb2F0KHcpLHg9cGFyc2VGbG9hdCh4KSx1PSExLDAhPT12KWI9TWF0aC5hdGFuMih3LHYpO2Vsc2UgaWYodz4wKWI9YztlbHNlIGlmKDA+dyliPS1jO2Vsc2UgaWYodT0hMCxiPTAseD4wKWQ9YztlbHNle2lmKCEoMD54KSlyZXR1cm4gZD1jLHZvaWQoZT0tdGhpcy5iKTtkPS1jfXJldHVybiBnPXYqdit3KncsZj1NYXRoLnNxcnQoZyksaD14KmosbD1NYXRoLnNxcnQoaCpoK2cpLG49aC9sLHA9Zi9sLG89bipuKm4saT14K3RoaXMuYip0aGlzLmVwMipvLHQ9Zi10aGlzLmEqdGhpcy5lcypwKnAqcCxtPU1hdGguc3FydChpKmkrdCp0KSxxPWkvbSxyPXQvbSxzPXRoaXMuYS9NYXRoLnNxcnQoMS10aGlzLmVzKnEqcSksZT1yPj1rP2Yvci1zOi1rPj1yP2YvLXItczp4L3ErcyoodGhpcy5lcy0xKSx1PT09ITEmJihkPU1hdGguYXRhbihxL3IpKSxhLng9YixhLnk9ZCxhLno9ZSxhfSxnZW9jZW50cmljX3RvX3dnczg0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuZGF0dW1fdHlwZT09PWQpYS54Kz10aGlzLmRhdHVtX3BhcmFtc1swXSxhLnkrPXRoaXMuZGF0dW1fcGFyYW1zWzFdLGEueis9dGhpcy5kYXR1bV9wYXJhbXNbMl07ZWxzZSBpZih0aGlzLmRhdHVtX3R5cGU9PT1lKXt2YXIgYj10aGlzLmRhdHVtX3BhcmFtc1swXSxjPXRoaXMuZGF0dW1fcGFyYW1zWzFdLGY9dGhpcy5kYXR1bV9wYXJhbXNbMl0sZz10aGlzLmRhdHVtX3BhcmFtc1szXSxoPXRoaXMuZGF0dW1fcGFyYW1zWzRdLGk9dGhpcy5kYXR1bV9wYXJhbXNbNV0saj10aGlzLmRhdHVtX3BhcmFtc1s2XSxrPWoqKGEueC1pKmEueStoKmEueikrYixsPWoqKGkqYS54K2EueS1nKmEueikrYyxtPWoqKC1oKmEueCtnKmEueSthLnopK2Y7YS54PWssYS55PWwsYS56PW19fSxnZW9jZW50cmljX2Zyb21fd2dzODQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5kYXR1bV90eXBlPT09ZClhLngtPXRoaXMuZGF0dW1fcGFyYW1zWzBdLGEueS09dGhpcy5kYXR1bV9wYXJhbXNbMV0sYS56LT10aGlzLmRhdHVtX3BhcmFtc1syXTtlbHNlIGlmKHRoaXMuZGF0dW1fdHlwZT09PWUpe3ZhciBiPXRoaXMuZGF0dW1fcGFyYW1zWzBdLGM9dGhpcy5kYXR1bV9wYXJhbXNbMV0sZj10aGlzLmRhdHVtX3BhcmFtc1syXSxnPXRoaXMuZGF0dW1fcGFyYW1zWzNdLGg9dGhpcy5kYXR1bV9wYXJhbXNbNF0saT10aGlzLmRhdHVtX3BhcmFtc1s1XSxqPXRoaXMuZGF0dW1fcGFyYW1zWzZdLGs9KGEueC1iKS9qLGw9KGEueS1jKS9qLG09KGEuei1mKS9qO2EueD1rK2kqbC1oKm0sYS55PS1pKmsrbCtnKm0sYS56PWgqay1nKmwrbX19fSxiLmV4cG9ydHM9bH0se31dLDMwOltmdW5jdGlvbihhLGIpe3ZhciBjPTEsZD0yLGU9MyxmPTUsZz02Mzc4MTM3LGg9LjAwNjY5NDM3OTk5MDE0MTMxNjtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGkpe2Z1bmN0aW9uIGooYSl7cmV0dXJuIGE9PT1jfHxhPT09ZH12YXIgayxsLG07aWYoYS5jb21wYXJlX2RhdHVtcyhiKSlyZXR1cm4gaTtpZihhLmRhdHVtX3R5cGU9PT1mfHxiLmRhdHVtX3R5cGU9PT1mKXJldHVybiBpO3ZhciBuPWEuYSxvPWEuZXMscD1iLmEscT1iLmVzLHI9YS5kYXR1bV90eXBlO2lmKHI9PT1lKWlmKDA9PT10aGlzLmFwcGx5X2dyaWRzaGlmdChhLDAsaSkpYS5hPWcsYS5lcz1oO2Vsc2V7aWYoIWEuZGF0dW1fcGFyYW1zKXJldHVybiBhLmE9bixhLmVzPWEuZXMsaTtmb3Ioaz0xLGw9MCxtPWEuZGF0dW1fcGFyYW1zLmxlbmd0aDttPmw7bCsrKWsqPWEuZGF0dW1fcGFyYW1zW2xdO2lmKDA9PT1rKXJldHVybiBhLmE9bixhLmVzPWEuZXMsaTtyPWEuZGF0dW1fcGFyYW1zLmxlbmd0aD4zP2Q6Y31yZXR1cm4gYi5kYXR1bV90eXBlPT09ZSYmKGIuYT1nLGIuZXM9aCksKGEuZXMhPT1iLmVzfHxhLmEhPT1iLmF8fGoocil8fGooYi5kYXR1bV90eXBlKSkmJihhLmdlb2RldGljX3RvX2dlb2NlbnRyaWMoaSksaihhLmRhdHVtX3R5cGUpJiZhLmdlb2NlbnRyaWNfdG9fd2dzODQoaSksaihiLmRhdHVtX3R5cGUpJiZiLmdlb2NlbnRyaWNfZnJvbV93Z3M4NChpKSxiLmdlb2NlbnRyaWNfdG9fZ2VvZGV0aWMoaSkpLGIuZGF0dW1fdHlwZT09PWUmJnRoaXMuYXBwbHlfZ3JpZHNoaWZ0KGIsMSxpKSxhLmE9bixhLmVzPW8sYi5hPXAsYi5lcz1xLGl9fSx7fV0sMzE6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXt2YXIgYj10aGlzO2lmKDI9PT1hcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1hcmd1bWVudHNbMV07Y1thXT1cInN0cmluZ1wiPT10eXBlb2YgZD9cIitcIj09PWRbMF0/ZShhcmd1bWVudHNbMV0pOmYoYXJndW1lbnRzWzFdKTpkfWVsc2UgaWYoMT09PWFyZ3VtZW50cy5sZW5ndGgpe2lmKEFycmF5LmlzQXJyYXkoYSkpcmV0dXJuIGEubWFwKGZ1bmN0aW9uKGEpe0FycmF5LmlzQXJyYXkoYSk/Yy5hcHBseShiLGEpOmMoYSl9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoYSBpbiBjKXJldHVybiBjW2FdfWVsc2VcIkVQU0dcImluIGE/Y1tcIkVQU0c6XCIrYS5FUFNHXT1hOlwiRVNSSVwiaW4gYT9jW1wiRVNSSTpcIithLkVTUkldPWE6XCJJQVUyMDAwXCJpbiBhP2NbXCJJQVUyMDAwOlwiK2EuSUFVMjAwMF09YTpjb25zb2xlLmxvZyhhKTtyZXR1cm59fXZhciBkPWEoXCIuL2dsb2JhbFwiKSxlPWEoXCIuL3Byb2pTdHJpbmdcIiksZj1hKFwiLi93a3RcIik7ZChjKSxiLmV4cG9ydHM9Y30se1wiLi9nbG9iYWxcIjozNCxcIi4vcHJvalN0cmluZ1wiOjM3LFwiLi93a3RcIjo2NX1dLDMyOltmdW5jdGlvbihhLGIpe3ZhciBjPWEoXCIuL2NvbnN0YW50cy9EYXR1bVwiKSxkPWEoXCIuL2NvbnN0YW50cy9FbGxpcHNvaWRcIiksZT1hKFwiLi9leHRlbmRcIiksZj1hKFwiLi9kYXR1bVwiKSxnPTFlLTEwLGg9LjE2NjY2NjY2NjY2NjY2NjY2LGk9LjA0NzIyMjIyMjIyMjIyMjIyLGo9LjAyMjE1NjA4NDY1NjA4NDY1NTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7aWYoYS5kYXR1bUNvZGUmJlwibm9uZVwiIT09YS5kYXR1bUNvZGUpe3ZhciBiPWNbYS5kYXR1bUNvZGVdO2ImJihhLmRhdHVtX3BhcmFtcz1iLnRvd2dzODQ/Yi50b3dnczg0LnNwbGl0KFwiLFwiKTpudWxsLGEuZWxscHM9Yi5lbGxpcHNlLGEuZGF0dW1OYW1lPWIuZGF0dW1OYW1lP2IuZGF0dW1OYW1lOmEuZGF0dW1Db2RlKX1pZighYS5hKXt2YXIgaz1kW2EuZWxscHNdP2RbYS5lbGxwc106ZC5XR1M4NDtlKGEsayl9cmV0dXJuIGEucmYmJiFhLmImJihhLmI9KDEtMS9hLnJmKSphLmEpLCgwPT09YS5yZnx8TWF0aC5hYnMoYS5hLWEuYik8ZykmJihhLnNwaGVyZT0hMCxhLmI9YS5hKSxhLmEyPWEuYSphLmEsYS5iMj1hLmIqYS5iLGEuZXM9KGEuYTItYS5iMikvYS5hMixhLmU9TWF0aC5zcXJ0KGEuZXMpLGEuUl9BJiYoYS5hKj0xLWEuZXMqKGgrYS5lcyooaSthLmVzKmopKSxhLmEyPWEuYSphLmEsYS5iMj1hLmIqYS5iLGEuZXM9MCksYS5lcDI9KGEuYTItYS5iMikvYS5iMixhLmswfHwoYS5rMD0xKSxhLmF4aXN8fChhLmF4aXM9XCJlbnVcIiksYS5kYXR1bXx8KGEuZGF0dW09ZihhKSksYX19LHtcIi4vY29uc3RhbnRzL0RhdHVtXCI6MjUsXCIuL2NvbnN0YW50cy9FbGxpcHNvaWRcIjoyNixcIi4vZGF0dW1cIjoyOSxcIi4vZXh0ZW5kXCI6MzN9XSwzMzpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXthPWF8fHt9O3ZhciBjLGQ7aWYoIWIpcmV0dXJuIGE7Zm9yKGQgaW4gYiljPWJbZF0sdm9pZCAwIT09YyYmKGFbZF09Yyk7cmV0dXJuIGF9fSx7fV0sMzQ6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe2EoXCJFUFNHOjQzMjZcIixcIit0aXRsZT1XR1MgODQgKGxvbmcvbGF0KSArcHJvaj1sb25nbGF0ICtlbGxwcz1XR1M4NCArZGF0dW09V0dTODQgK3VuaXRzPWRlZ3JlZXNcIiksYShcIkVQU0c6NDI2OVwiLFwiK3RpdGxlPU5BRDgzIChsb25nL2xhdCkgK3Byb2o9bG9uZ2xhdCArYT02Mzc4MTM3LjAgK2I9NjM1Njc1Mi4zMTQxNDAzNiArZWxscHM9R1JTODAgK2RhdHVtPU5BRDgzICt1bml0cz1kZWdyZWVzXCIpLGEoXCJFUFNHOjM4NTdcIixcIit0aXRsZT1XR1MgODQgLyBQc2V1ZG8tTWVyY2F0b3IgK3Byb2o9bWVyYyArYT02Mzc4MTM3ICtiPTYzNzgxMzcgK2xhdF90cz0wLjAgK2xvbl8wPTAuMCAreF8wPTAuMCAreV8wPTAgK2s9MS4wICt1bml0cz1tICtuYWRncmlkcz1AbnVsbCArbm9fZGVmc1wiKSxhLldHUzg0PWFbXCJFUFNHOjQzMjZcIl0sYVtcIkVQU0c6Mzc4NVwiXT1hW1wiRVBTRzozODU3XCJdLGEuR09PR0xFPWFbXCJFUFNHOjM4NTdcIl0sYVtcIkVQU0c6OTAwOTEzXCJdPWFbXCJFUFNHOjM4NTdcIl0sYVtcIkVQU0c6MTAyMTEzXCJdPWFbXCJFUFNHOjM4NTdcIl19fSx7fV0sMzU6W2Z1bmN0aW9uKGEsYil7dmFyIHByb2o0PWEoXCIuL2NvcmVcIik7cHJvajQuZGVmYXVsdERhdHVtPVwiV0dTODRcIixwcm9qNC5Qcm9qPWEoXCIuL1Byb2pcIikscHJvajQuV0dTODQ9bmV3IHByb2o0LlByb2ooXCJXR1M4NFwiKSxwcm9qNC5Qb2ludD1hKFwiLi9Qb2ludFwiKSxwcm9qNC50b1BvaW50PWEoXCIuL2NvbW1vbi90b1BvaW50XCIpLHByb2o0LmRlZnM9YShcIi4vZGVmc1wiKSxwcm9qNC50cmFuc2Zvcm09YShcIi4vdHJhbnNmb3JtXCIpLHByb2o0Lm1ncnM9YShcIm1ncnNcIikscHJvajQudmVyc2lvbj1hKFwiLi4vcGFja2FnZS5qc29uXCIpLnZlcnNpb24sYShcIi4vaW5jbHVkZWRQcm9qZWN0aW9uc1wiKShwcm9qNCksYi5leHBvcnRzPXByb2o0fSx7XCIuLi9wYWNrYWdlLmpzb25cIjo2NyxcIi4vUG9pbnRcIjoxLFwiLi9Qcm9qXCI6MixcIi4vY29tbW9uL3RvUG9pbnRcIjoyMyxcIi4vY29yZVwiOjI4LFwiLi9kZWZzXCI6MzEsXCIuL2luY2x1ZGVkUHJvamVjdGlvbnNcIjpcImdXVVBOV1wiLFwiLi90cmFuc2Zvcm1cIjo2NCxtZ3JzOjY2fV0sMzY6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYX1mdW5jdGlvbiBkKGEpe3JldHVybiBhIGluIGh9ZnVuY3Rpb24gZShhKXt2YXIgYj1bXCJHRU9HQ1NcIixcIkdFT0NDU1wiLFwiUFJPSkNTXCIsXCJMT0NBTF9DU1wiXTtyZXR1cm4gYi5yZWR1Y2UoZnVuY3Rpb24oYixjKXtyZXR1cm4gYisxK2EuaW5kZXhPZihjKX0sMCl9ZnVuY3Rpb24gZihhKXtyZXR1cm5cIitcIj09PWFbMF19ZnVuY3Rpb24gZyhhKXtyZXR1cm4gYyhhKT9kKGEpP2hbYV06ZShhKT9pKGEpOmYoYSk/aihhKTp2b2lkIDA6YX12YXIgaD1hKFwiLi9kZWZzXCIpLGk9YShcIi4vd2t0XCIpLGo9YShcIi4vcHJvalN0cmluZ1wiKTtiLmV4cG9ydHM9Z30se1wiLi9kZWZzXCI6MzEsXCIuL3Byb2pTdHJpbmdcIjozNyxcIi4vd2t0XCI6NjV9XSwzNzpbZnVuY3Rpb24oYSxiKXt2YXIgYz0uMDE3NDUzMjkyNTE5OTQzMjk1LGQ9YShcIi4vY29uc3RhbnRzL1ByaW1lTWVyaWRpYW5cIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3ZhciBiPXt9LGU9e307YS5zcGxpdChcIitcIikubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX0pLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4gYX0pLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdChcIj1cIik7Yi5wdXNoKCEwKSxlW2JbMF0udG9Mb3dlckNhc2UoKV09YlsxXX0pO3ZhciBmLGcsaCxpPXtwcm9qOlwicHJvak5hbWVcIixkYXR1bTpcImRhdHVtQ29kZVwiLHJmOmZ1bmN0aW9uKGEpe2IucmY9cGFyc2VGbG9hdChhLDEwKX0sbGF0XzA6ZnVuY3Rpb24oYSl7Yi5sYXQwPWEqY30sbGF0XzE6ZnVuY3Rpb24oYSl7Yi5sYXQxPWEqY30sbGF0XzI6ZnVuY3Rpb24oYSl7Yi5sYXQyPWEqY30sbGF0X3RzOmZ1bmN0aW9uKGEpe2IubGF0X3RzPWEqY30sbG9uXzA6ZnVuY3Rpb24oYSl7Yi5sb25nMD1hKmN9LGxvbl8xOmZ1bmN0aW9uKGEpe2IubG9uZzE9YSpjfSxsb25fMjpmdW5jdGlvbihhKXtiLmxvbmcyPWEqY30sYWxwaGE6ZnVuY3Rpb24oYSl7Yi5hbHBoYT1wYXJzZUZsb2F0KGEpKmN9LGxvbmM6ZnVuY3Rpb24oYSl7Yi5sb25nYz1hKmN9LHhfMDpmdW5jdGlvbihhKXtiLngwPXBhcnNlRmxvYXQoYSwxMCl9LHlfMDpmdW5jdGlvbihhKXtiLnkwPXBhcnNlRmxvYXQoYSwxMCl9LGtfMDpmdW5jdGlvbihhKXtiLmswPXBhcnNlRmxvYXQoYSwxMCl9LGs6ZnVuY3Rpb24oYSl7Yi5rMD1wYXJzZUZsb2F0KGEsMTApfSxyX2E6ZnVuY3Rpb24oKXtiLlJfQT0hMH0sem9uZTpmdW5jdGlvbihhKXtiLnpvbmU9cGFyc2VJbnQoYSwxMCl9LHNvdXRoOmZ1bmN0aW9uKCl7Yi51dG1Tb3V0aD0hMH0sdG93Z3M4NDpmdW5jdGlvbihhKXtiLmRhdHVtX3BhcmFtcz1hLnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIHBhcnNlRmxvYXQoYSwxMCl9KX0sdG9fbWV0ZXI6ZnVuY3Rpb24oYSl7Yi50b19tZXRlcj1wYXJzZUZsb2F0KGEsMTApfSxmcm9tX2dyZWVud2ljaDpmdW5jdGlvbihhKXtiLmZyb21fZ3JlZW53aWNoPWEqY30scG06ZnVuY3Rpb24oYSl7Yi5mcm9tX2dyZWVud2ljaD0oZFthXT9kW2FdOnBhcnNlRmxvYXQoYSwxMCkpKmN9LG5hZGdyaWRzOmZ1bmN0aW9uKGEpe1wiQG51bGxcIj09PWE/Yi5kYXR1bUNvZGU9XCJub25lXCI6Yi5uYWRncmlkcz1hfSxheGlzOmZ1bmN0aW9uKGEpe3ZhciBjPVwiZXduc3VkXCI7Mz09PWEubGVuZ3RoJiYtMSE9PWMuaW5kZXhPZihhLnN1YnN0cigwLDEpKSYmLTEhPT1jLmluZGV4T2YoYS5zdWJzdHIoMSwxKSkmJi0xIT09Yy5pbmRleE9mKGEuc3Vic3RyKDIsMSkpJiYoYi5heGlzPWEpfX07Zm9yKGYgaW4gZSlnPWVbZl0sZiBpbiBpPyhoPWlbZl0sXCJmdW5jdGlvblwiPT10eXBlb2YgaD9oKGcpOmJbaF09Zyk6YltmXT1nO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdHVtQ29kZSYmXCJXR1M4NFwiIT09Yi5kYXR1bUNvZGUmJihiLmRhdHVtQ29kZT1iLmRhdHVtQ29kZS50b0xvd2VyQ2FzZSgpKSxifX0se1wiLi9jb25zdGFudHMvUHJpbWVNZXJpZGlhblwiOjI3fV0sMzg6W2Z1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9Zy5sZW5ndGg7cmV0dXJuIGEubmFtZXM/KGdbY109YSxhLm5hbWVzLmZvckVhY2goZnVuY3Rpb24oYSl7ZlthLnRvTG93ZXJDYXNlKCldPWN9KSx0aGlzKTooY29uc29sZS5sb2coYiksITApfXZhciBlPVthKFwiLi9wcm9qZWN0aW9ucy9tZXJjXCIpLGEoXCIuL3Byb2plY3Rpb25zL2xvbmdsYXRcIildLGY9e30sZz1bXTtjLmFkZD1kLGMuZ2V0PWZ1bmN0aW9uKGEpe2lmKCFhKXJldHVybiExO3ZhciBiPWEudG9Mb3dlckNhc2UoKTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgZltiXSYmZ1tmW2JdXT9nW2ZbYl1dOnZvaWQgMH0sYy5zdGFydD1mdW5jdGlvbigpe2UuZm9yRWFjaChkKX19LHtcIi4vcHJvamVjdGlvbnMvbG9uZ2xhdFwiOjUwLFwiLi9wcm9qZWN0aW9ucy9tZXJjXCI6NTF9XSwzOTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPTFlLTEwLGU9YShcIi4uL2NvbW1vbi9tc2ZuelwiKSxmPWEoXCIuLi9jb21tb24vcXNmbnpcIiksZz1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksaD1hKFwiLi4vY29tbW9uL2FzaW56XCIpO2MuaW5pdD1mdW5jdGlvbigpe01hdGguYWJzKHRoaXMubGF0MSt0aGlzLmxhdDIpPGR8fCh0aGlzLnRlbXA9dGhpcy5iL3RoaXMuYSx0aGlzLmVzPTEtTWF0aC5wb3codGhpcy50ZW1wLDIpLHRoaXMuZTM9TWF0aC5zcXJ0KHRoaXMuZXMpLHRoaXMuc2luX3BvPU1hdGguc2luKHRoaXMubGF0MSksdGhpcy5jb3NfcG89TWF0aC5jb3ModGhpcy5sYXQxKSx0aGlzLnQxPXRoaXMuc2luX3BvLHRoaXMuY29uPXRoaXMuc2luX3BvLHRoaXMubXMxPWUodGhpcy5lMyx0aGlzLnNpbl9wbyx0aGlzLmNvc19wbyksdGhpcy5xczE9Zih0aGlzLmUzLHRoaXMuc2luX3BvLHRoaXMuY29zX3BvKSx0aGlzLnNpbl9wbz1NYXRoLnNpbih0aGlzLmxhdDIpLHRoaXMuY29zX3BvPU1hdGguY29zKHRoaXMubGF0MiksdGhpcy50Mj10aGlzLnNpbl9wbyx0aGlzLm1zMj1lKHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMucXMyPWYodGhpcy5lMyx0aGlzLnNpbl9wbyx0aGlzLmNvc19wbyksdGhpcy5zaW5fcG89TWF0aC5zaW4odGhpcy5sYXQwKSx0aGlzLmNvc19wbz1NYXRoLmNvcyh0aGlzLmxhdDApLHRoaXMudDM9dGhpcy5zaW5fcG8sdGhpcy5xczA9Zih0aGlzLmUzLHRoaXMuc2luX3BvLHRoaXMuY29zX3BvKSx0aGlzLm5zMD1NYXRoLmFicyh0aGlzLmxhdDEtdGhpcy5sYXQyKT5kPyh0aGlzLm1zMSp0aGlzLm1zMS10aGlzLm1zMip0aGlzLm1zMikvKHRoaXMucXMyLXRoaXMucXMxKTp0aGlzLmNvbix0aGlzLmM9dGhpcy5tczEqdGhpcy5tczErdGhpcy5uczAqdGhpcy5xczEsdGhpcy5yaD10aGlzLmEqTWF0aC5zcXJ0KHRoaXMuYy10aGlzLm5zMCp0aGlzLnFzMCkvdGhpcy5uczApfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS54LGM9YS55O3RoaXMuc2luX3BoaT1NYXRoLnNpbihjKSx0aGlzLmNvc19waGk9TWF0aC5jb3MoYyk7dmFyIGQ9Zih0aGlzLmUzLHRoaXMuc2luX3BoaSx0aGlzLmNvc19waGkpLGU9dGhpcy5hKk1hdGguc3FydCh0aGlzLmMtdGhpcy5uczAqZCkvdGhpcy5uczAsaD10aGlzLm5zMCpnKGItdGhpcy5sb25nMCksaT1lKk1hdGguc2luKGgpK3RoaXMueDAsaj10aGlzLnJoLWUqTWF0aC5jb3MoaCkrdGhpcy55MDtyZXR1cm4gYS54PWksYS55PWosYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsaDtyZXR1cm4gYS54LT10aGlzLngwLGEueT10aGlzLnJoLWEueSt0aGlzLnkwLHRoaXMubnMwPj0wPyhiPU1hdGguc3FydChhLngqYS54K2EueSphLnkpLGQ9MSk6KGI9LU1hdGguc3FydChhLngqYS54K2EueSphLnkpLGQ9LTEpLGU9MCwwIT09YiYmKGU9TWF0aC5hdGFuMihkKmEueCxkKmEueSkpLGQ9Yip0aGlzLm5zMC90aGlzLmEsdGhpcy5zcGhlcmU/aD1NYXRoLmFzaW4oKHRoaXMuYy1kKmQpLygyKnRoaXMubnMwKSk6KGM9KHRoaXMuYy1kKmQpL3RoaXMubnMwLGg9dGhpcy5waGkxeih0aGlzLmUzLGMpKSxmPWcoZS90aGlzLm5zMCt0aGlzLmxvbmcwKSxhLng9ZixhLnk9aCxhfSxjLnBoaTF6PWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaSxqPWgoLjUqYik7aWYoZD5hKXJldHVybiBqO2Zvcih2YXIgaz1hKmEsbD0xOzI1Pj1sO2wrKylpZihjPU1hdGguc2luKGopLGU9TWF0aC5jb3MoaiksZj1hKmMsZz0xLWYqZixpPS41KmcqZy9lKihiLygxLWspLWMvZysuNS9hKk1hdGgubG9nKCgxLWYpLygxK2YpKSksais9aSxNYXRoLmFicyhpKTw9MWUtNylyZXR1cm4gajtyZXR1cm4gbnVsbH0sYy5uYW1lcz1bXCJBbGJlcnNfQ29uaWNfRXF1YWxfQXJlYVwiLFwiQWxiZXJzXCIsXCJhZWFcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9hc2luelwiOjYsXCIuLi9jb21tb24vbXNmbnpcIjoxNSxcIi4uL2NvbW1vbi9xc2ZuelwiOjIwfV0sNDA6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZT1NYXRoLlBJLzIsZj0xZS0xMCxnPWEoXCIuLi9jb21tb24vbWxmblwiKSxoPWEoXCIuLi9jb21tb24vZTBmblwiKSxpPWEoXCIuLi9jb21tb24vZTFmblwiKSxqPWEoXCIuLi9jb21tb24vZTJmblwiKSxrPWEoXCIuLi9jb21tb24vZTNmblwiKSxsPWEoXCIuLi9jb21tb24vZ05cIiksbT1hKFwiLi4vY29tbW9uL2FzaW56XCIpLG49YShcIi4uL2NvbW1vbi9pbWxmblwiKTtjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLnNpbl9wMTI9TWF0aC5zaW4odGhpcy5sYXQwKSx0aGlzLmNvc19wMTI9TWF0aC5jb3ModGhpcy5sYXQwKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsbSxuLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDLEQsRSxGLEcsSD1hLngsST1hLnksSj1NYXRoLnNpbihhLnkpLEs9TWF0aC5jb3MoYS55KSxMPWQoSC10aGlzLmxvbmcwKTtyZXR1cm4gdGhpcy5zcGhlcmU/TWF0aC5hYnModGhpcy5zaW5fcDEyLTEpPD1mPyhhLng9dGhpcy54MCt0aGlzLmEqKGUtSSkqTWF0aC5zaW4oTCksYS55PXRoaXMueTAtdGhpcy5hKihlLUkpKk1hdGguY29zKEwpLGEpOk1hdGguYWJzKHRoaXMuc2luX3AxMisxKTw9Zj8oYS54PXRoaXMueDArdGhpcy5hKihlK0kpKk1hdGguc2luKEwpLGEueT10aGlzLnkwK3RoaXMuYSooZStJKSpNYXRoLmNvcyhMKSxhKTooQj10aGlzLnNpbl9wMTIqSit0aGlzLmNvc19wMTIqSypNYXRoLmNvcyhMKSx6PU1hdGguYWNvcyhCKSxBPXovTWF0aC5zaW4oeiksYS54PXRoaXMueDArdGhpcy5hKkEqSypNYXRoLnNpbihMKSxhLnk9dGhpcy55MCt0aGlzLmEqQSoodGhpcy5jb3NfcDEyKkotdGhpcy5zaW5fcDEyKksqTWF0aC5jb3MoTCkpLGEpOihiPWgodGhpcy5lcyksYz1pKHRoaXMuZXMpLG09aih0aGlzLmVzKSxuPWsodGhpcy5lcyksTWF0aC5hYnModGhpcy5zaW5fcDEyLTEpPD1mPyhvPXRoaXMuYSpnKGIsYyxtLG4sZSkscD10aGlzLmEqZyhiLGMsbSxuLEkpLGEueD10aGlzLngwKyhvLXApKk1hdGguc2luKEwpLGEueT10aGlzLnkwLShvLXApKk1hdGguY29zKEwpLGEpOk1hdGguYWJzKHRoaXMuc2luX3AxMisxKTw9Zj8obz10aGlzLmEqZyhiLGMsbSxuLGUpLHA9dGhpcy5hKmcoYixjLG0sbixJKSxhLng9dGhpcy54MCsobytwKSpNYXRoLnNpbihMKSxhLnk9dGhpcy55MCsobytwKSpNYXRoLmNvcyhMKSxhKToocT1KL0sscj1sKHRoaXMuYSx0aGlzLmUsdGhpcy5zaW5fcDEyKSxzPWwodGhpcy5hLHRoaXMuZSxKKSx0PU1hdGguYXRhbigoMS10aGlzLmVzKSpxK3RoaXMuZXMqcip0aGlzLnNpbl9wMTIvKHMqSykpLHU9TWF0aC5hdGFuMihNYXRoLnNpbihMKSx0aGlzLmNvc19wMTIqTWF0aC50YW4odCktdGhpcy5zaW5fcDEyKk1hdGguY29zKEwpKSxDPTA9PT11P01hdGguYXNpbih0aGlzLmNvc19wMTIqTWF0aC5zaW4odCktdGhpcy5zaW5fcDEyKk1hdGguY29zKHQpKTpNYXRoLmFicyhNYXRoLmFicyh1KS1NYXRoLlBJKTw9Zj8tTWF0aC5hc2luKHRoaXMuY29zX3AxMipNYXRoLnNpbih0KS10aGlzLnNpbl9wMTIqTWF0aC5jb3ModCkpOk1hdGguYXNpbihNYXRoLnNpbihMKSpNYXRoLmNvcyh0KS9NYXRoLnNpbih1KSksdj10aGlzLmUqdGhpcy5zaW5fcDEyL01hdGguc3FydCgxLXRoaXMuZXMpLHc9dGhpcy5lKnRoaXMuY29zX3AxMipNYXRoLmNvcyh1KS9NYXRoLnNxcnQoMS10aGlzLmVzKSx4PXYqdyx5PXcqdyxEPUMqQyxFPUQqQyxGPUUqQyxHPUYqQyx6PXIqQyooMS1EKnkqKDEteSkvNitFLzgqeCooMS0yKnkpK0YvMTIwKih5Kig0LTcqeSktMyp2KnYqKDEtNyp5KSktRy80OCp4KSxhLng9dGhpcy54MCt6Kk1hdGguc2luKHUpLGEueT10aGlzLnkwK3oqTWF0aC5jb3ModSksYSkpfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7YS54LT10aGlzLngwLGEueS09dGhpcy55MDt2YXIgYixjLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDLEQsRSxGLEcsSCxJO2lmKHRoaXMuc3BoZXJlKXtpZihiPU1hdGguc3FydChhLngqYS54K2EueSphLnkpLGI+MiplKnRoaXMuYSlyZXR1cm47cmV0dXJuIGM9Yi90aGlzLmEsbz1NYXRoLnNpbihjKSxwPU1hdGguY29zKGMpLHE9dGhpcy5sb25nMCxNYXRoLmFicyhiKTw9Zj9yPXRoaXMubGF0MDoocj1tKHAqdGhpcy5zaW5fcDEyK2EueSpvKnRoaXMuY29zX3AxMi9iKSxzPU1hdGguYWJzKHRoaXMubGF0MCktZSxxPWQoTWF0aC5hYnMocyk8PWY/dGhpcy5sYXQwPj0wP3RoaXMubG9uZzArTWF0aC5hdGFuMihhLngsLWEueSk6dGhpcy5sb25nMC1NYXRoLmF0YW4yKC1hLngsYS55KTp0aGlzLmxvbmcwK01hdGguYXRhbjIoYS54Km8sYip0aGlzLmNvc19wMTIqcC1hLnkqdGhpcy5zaW5fcDEyKm8pKSksYS54PXEsYS55PXIsYX1yZXR1cm4gdD1oKHRoaXMuZXMpLHU9aSh0aGlzLmVzKSx2PWoodGhpcy5lcyksdz1rKHRoaXMuZXMpLE1hdGguYWJzKHRoaXMuc2luX3AxMi0xKTw9Zj8oeD10aGlzLmEqZyh0LHUsdix3LGUpLGI9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSkseT14LWIscj1uKHkvdGhpcy5hLHQsdSx2LHcpLHE9ZCh0aGlzLmxvbmcwK01hdGguYXRhbjIoYS54LC0xKmEueSkpLGEueD1xLGEueT1yLGEpOk1hdGguYWJzKHRoaXMuc2luX3AxMisxKTw9Zj8oeD10aGlzLmEqZyh0LHUsdix3LGUpLGI9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSkseT1iLXgscj1uKHkvdGhpcy5hLHQsdSx2LHcpLHE9ZCh0aGlzLmxvbmcwK01hdGguYXRhbjIoYS54LGEueSkpLGEueD1xLGEueT1yLGEpOihiPU1hdGguc3FydChhLngqYS54K2EueSphLnkpLEI9TWF0aC5hdGFuMihhLngsYS55KSx6PWwodGhpcy5hLHRoaXMuZSx0aGlzLnNpbl9wMTIpLEM9TWF0aC5jb3MoQiksRD10aGlzLmUqdGhpcy5jb3NfcDEyKkMsRT0tRCpELygxLXRoaXMuZXMpLEY9Myp0aGlzLmVzKigxLUUpKnRoaXMuc2luX3AxMip0aGlzLmNvc19wMTIqQy8oMS10aGlzLmVzKSxHPWIveixIPUctRSooMStFKSpNYXRoLnBvdyhHLDMpLzYtRiooMSszKkUpKk1hdGgucG93KEcsNCkvMjQsST0xLUUqSCpILzItRypIKkgqSC82LEE9TWF0aC5hc2luKHRoaXMuc2luX3AxMipNYXRoLmNvcyhIKSt0aGlzLmNvc19wMTIqTWF0aC5zaW4oSCkqQykscT1kKHRoaXMubG9uZzArTWF0aC5hc2luKE1hdGguc2luKEIpKk1hdGguc2luKEgpL01hdGguY29zKEEpKSkscj1NYXRoLmF0YW4oKDEtdGhpcy5lcypJKnRoaXMuc2luX3AxMi9NYXRoLnNpbihBKSkqTWF0aC50YW4oQSkvKDEtdGhpcy5lcykpLGEueD1xLGEueT1yLGEpfSxjLm5hbWVzPVtcIkF6aW11dGhhbF9FcXVpZGlzdGFudFwiLFwiYWVxZFwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL2FzaW56XCI6NixcIi4uL2NvbW1vbi9lMGZuXCI6NyxcIi4uL2NvbW1vbi9lMWZuXCI6OCxcIi4uL2NvbW1vbi9lMmZuXCI6OSxcIi4uL2NvbW1vbi9lM2ZuXCI6MTAsXCIuLi9jb21tb24vZ05cIjoxMSxcIi4uL2NvbW1vbi9pbWxmblwiOjEyLFwiLi4vY29tbW9uL21sZm5cIjoxNH1dLDQxOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9tbGZuXCIpLGU9YShcIi4uL2NvbW1vbi9lMGZuXCIpLGY9YShcIi4uL2NvbW1vbi9lMWZuXCIpLGc9YShcIi4uL2NvbW1vbi9lMmZuXCIpLGg9YShcIi4uL2NvbW1vbi9lM2ZuXCIpLGk9YShcIi4uL2NvbW1vbi9nTlwiKSxqPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxrPWEoXCIuLi9jb21tb24vYWRqdXN0X2xhdFwiKSxsPWEoXCIuLi9jb21tb24vaW1sZm5cIiksbT1NYXRoLlBJLzIsbj0xZS0xMDtjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLnNwaGVyZXx8KHRoaXMuZTA9ZSh0aGlzLmVzKSx0aGlzLmUxPWYodGhpcy5lcyksdGhpcy5lMj1nKHRoaXMuZXMpLHRoaXMuZTM9aCh0aGlzLmVzKSx0aGlzLm1sMD10aGlzLmEqZCh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MCkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxlPWEueCxmPWEueTtpZihlPWooZS10aGlzLmxvbmcwKSx0aGlzLnNwaGVyZSliPXRoaXMuYSpNYXRoLmFzaW4oTWF0aC5jb3MoZikqTWF0aC5zaW4oZSkpLGM9dGhpcy5hKihNYXRoLmF0YW4yKE1hdGgudGFuKGYpLE1hdGguY29zKGUpKS10aGlzLmxhdDApO2Vsc2V7dmFyIGc9TWF0aC5zaW4oZiksaD1NYXRoLmNvcyhmKSxrPWkodGhpcy5hLHRoaXMuZSxnKSxsPU1hdGgudGFuKGYpKk1hdGgudGFuKGYpLG09ZSpNYXRoLmNvcyhmKSxuPW0qbSxvPXRoaXMuZXMqaCpoLygxLXRoaXMuZXMpLHA9dGhpcy5hKmQodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxmKTtiPWsqbSooMS1uKmwqKDEvNi0oOC1sKzgqbykqbi8xMjApKSxjPXAtdGhpcy5tbDAraypnL2gqbiooLjUrKDUtbCs2Km8pKm4vMjQpfXJldHVybiBhLng9Yit0aGlzLngwLGEueT1jK3RoaXMueTAsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe2EueC09dGhpcy54MCxhLnktPXRoaXMueTA7dmFyIGIsYyxkPWEueC90aGlzLmEsZT1hLnkvdGhpcy5hO2lmKHRoaXMuc3BoZXJlKXt2YXIgZj1lK3RoaXMubGF0MDtiPU1hdGguYXNpbihNYXRoLnNpbihmKSpNYXRoLmNvcyhkKSksYz1NYXRoLmF0YW4yKE1hdGgudGFuKGQpLE1hdGguY29zKGYpKX1lbHNle3ZhciBnPXRoaXMubWwwL3RoaXMuYStlLGg9bChnLHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMpO2lmKE1hdGguYWJzKE1hdGguYWJzKGgpLW0pPD1uKXJldHVybiBhLng9dGhpcy5sb25nMCxhLnk9bSwwPmUmJihhLnkqPS0xKSxhO3ZhciBvPWkodGhpcy5hLHRoaXMuZSxNYXRoLnNpbihoKSkscD1vKm8qby90aGlzLmEvdGhpcy5hKigxLXRoaXMuZXMpLHE9TWF0aC5wb3coTWF0aC50YW4oaCksMikscj1kKnRoaXMuYS9vLHM9cipyO2I9aC1vKk1hdGgudGFuKGgpL3AqcipyKiguNS0oMSszKnEpKnIqci8yNCksYz1yKigxLXMqKHEvMysoMSszKnEpKnEqcy8xNSkpL01hdGguY29zKGgpfXJldHVybiBhLng9aihjK3RoaXMubG9uZzApLGEueT1rKGIpLGF9LGMubmFtZXM9W1wiQ2Fzc2luaVwiLFwiQ2Fzc2luaV9Tb2xkbmVyXCIsXCJjYXNzXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xhdFwiOjQsXCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vZTBmblwiOjcsXCIuLi9jb21tb24vZTFmblwiOjgsXCIuLi9jb21tb24vZTJmblwiOjksXCIuLi9jb21tb24vZTNmblwiOjEwLFwiLi4vY29tbW9uL2dOXCI6MTEsXCIuLi9jb21tb24vaW1sZm5cIjoxMixcIi4uL2NvbW1vbi9tbGZuXCI6MTR9XSw0MjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxlPWEoXCIuLi9jb21tb24vcXNmbnpcIiksZj1hKFwiLi4vY29tbW9uL21zZm56XCIpLGc9YShcIi4uL2NvbW1vbi9pcXNmbnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zcGhlcmV8fCh0aGlzLmswPWYodGhpcy5lLE1hdGguc2luKHRoaXMubGF0X3RzKSxNYXRoLmNvcyh0aGlzLmxhdF90cykpKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZj1hLngsZz1hLnksaD1kKGYtdGhpcy5sb25nMCk7aWYodGhpcy5zcGhlcmUpYj10aGlzLngwK3RoaXMuYSpoKk1hdGguY29zKHRoaXMubGF0X3RzKSxjPXRoaXMueTArdGhpcy5hKk1hdGguc2luKGcpL01hdGguY29zKHRoaXMubGF0X3RzKTtlbHNle3ZhciBpPWUodGhpcy5lLE1hdGguc2luKGcpKTtiPXRoaXMueDArdGhpcy5hKnRoaXMuazAqaCxjPXRoaXMueTArdGhpcy5hKmkqLjUvdGhpcy5rMH1yZXR1cm4gYS54PWIsYS55PWMsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe2EueC09dGhpcy54MCxhLnktPXRoaXMueTA7dmFyIGIsYztyZXR1cm4gdGhpcy5zcGhlcmU/KGI9ZCh0aGlzLmxvbmcwK2EueC90aGlzLmEvTWF0aC5jb3ModGhpcy5sYXRfdHMpKSxjPU1hdGguYXNpbihhLnkvdGhpcy5hKk1hdGguY29zKHRoaXMubGF0X3RzKSkpOihjPWcodGhpcy5lLDIqYS55KnRoaXMuazAvdGhpcy5hKSxiPWQodGhpcy5sb25nMCthLngvKHRoaXMuYSp0aGlzLmswKSkpLGEueD1iLGEueT1jLGF9LGMubmFtZXM9W1wiY2VhXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vaXFzZm56XCI6MTMsXCIuLi9jb21tb24vbXNmbnpcIjoxNSxcIi4uL2NvbW1vbi9xc2ZuelwiOjIwfV0sNDM6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZT1hKFwiLi4vY29tbW9uL2FkanVzdF9sYXRcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy54MD10aGlzLngwfHwwLHRoaXMueTA9dGhpcy55MHx8MCx0aGlzLmxhdDA9dGhpcy5sYXQwfHwwLHRoaXMubG9uZzA9dGhpcy5sb25nMHx8MCx0aGlzLmxhdF90cz10aGlzLmxhdF90c3x8MCx0aGlzLnRpdGxlPXRoaXMudGl0bGV8fFwiRXF1aWRpc3RhbnQgQ3lsaW5kcmljYWwgKFBsYXRlIENhcnJlKVwiLHRoaXMucmM9TWF0aC5jb3ModGhpcy5sYXRfdHMpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS54LGM9YS55LGY9ZChiLXRoaXMubG9uZzApLGc9ZShjLXRoaXMubGF0MCk7cmV0dXJuIGEueD10aGlzLngwK3RoaXMuYSpmKnRoaXMucmMsYS55PXRoaXMueTArdGhpcy5hKmcsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiPWEueCxjPWEueTtyZXR1cm4gYS54PWQodGhpcy5sb25nMCsoYi10aGlzLngwKS8odGhpcy5hKnRoaXMucmMpKSxhLnk9ZSh0aGlzLmxhdDArKGMtdGhpcy55MCkvdGhpcy5hKSxhfSxjLm5hbWVzPVtcIkVxdWlyZWN0YW5ndWxhclwiLFwiRXF1aWRpc3RhbnRfQ3lsaW5kcmljYWxcIixcImVxY1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sYXRcIjo0LFwiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1fV0sNDQ6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2UwZm5cIiksZT1hKFwiLi4vY29tbW9uL2UxZm5cIiksZj1hKFwiLi4vY29tbW9uL2UyZm5cIiksZz1hKFwiLi4vY29tbW9uL2UzZm5cIiksaD1hKFwiLi4vY29tbW9uL21zZm56XCIpLGk9YShcIi4uL2NvbW1vbi9tbGZuXCIpLGo9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGs9YShcIi4uL2NvbW1vbi9hZGp1c3RfbGF0XCIpLGw9YShcIi4uL2NvbW1vbi9pbWxmblwiKSxtPTFlLTEwO2MuaW5pdD1mdW5jdGlvbigpe01hdGguYWJzKHRoaXMubGF0MSt0aGlzLmxhdDIpPG18fCh0aGlzLmxhdDI9dGhpcy5sYXQyfHx0aGlzLmxhdDEsdGhpcy50ZW1wPXRoaXMuYi90aGlzLmEsdGhpcy5lcz0xLU1hdGgucG93KHRoaXMudGVtcCwyKSx0aGlzLmU9TWF0aC5zcXJ0KHRoaXMuZXMpLHRoaXMuZTA9ZCh0aGlzLmVzKSx0aGlzLmUxPWUodGhpcy5lcyksdGhpcy5lMj1mKHRoaXMuZXMpLHRoaXMuZTM9Zyh0aGlzLmVzKSx0aGlzLnNpbnBoaT1NYXRoLnNpbih0aGlzLmxhdDEpLHRoaXMuY29zcGhpPU1hdGguY29zKHRoaXMubGF0MSksdGhpcy5tczE9aCh0aGlzLmUsdGhpcy5zaW5waGksdGhpcy5jb3NwaGkpLHRoaXMubWwxPWkodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyx0aGlzLmxhdDEpLE1hdGguYWJzKHRoaXMubGF0MS10aGlzLmxhdDIpPG0/dGhpcy5ucz10aGlzLnNpbnBoaToodGhpcy5zaW5waGk9TWF0aC5zaW4odGhpcy5sYXQyKSx0aGlzLmNvc3BoaT1NYXRoLmNvcyh0aGlzLmxhdDIpLHRoaXMubXMyPWgodGhpcy5lLHRoaXMuc2lucGhpLHRoaXMuY29zcGhpKSx0aGlzLm1sMj1pKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsdGhpcy5sYXQyKSx0aGlzLm5zPSh0aGlzLm1zMS10aGlzLm1zMikvKHRoaXMubWwyLXRoaXMubWwxKSksdGhpcy5nPXRoaXMubWwxK3RoaXMubXMxL3RoaXMubnMsdGhpcy5tbDA9aSh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MCksdGhpcy5yaD10aGlzLmEqKHRoaXMuZy10aGlzLm1sMCkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1hLngsZD1hLnk7aWYodGhpcy5zcGhlcmUpYj10aGlzLmEqKHRoaXMuZy1kKTtlbHNle3ZhciBlPWkodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxkKTtiPXRoaXMuYSoodGhpcy5nLWUpfXZhciBmPXRoaXMubnMqaihjLXRoaXMubG9uZzApLGc9dGhpcy54MCtiKk1hdGguc2luKGYpLGg9dGhpcy55MCt0aGlzLnJoLWIqTWF0aC5jb3MoZik7cmV0dXJuIGEueD1nLGEueT1oLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXthLngtPXRoaXMueDAsYS55PXRoaXMucmgtYS55K3RoaXMueTA7dmFyIGIsYyxkLGU7dGhpcy5ucz49MD8oYz1NYXRoLnNxcnQoYS54KmEueCthLnkqYS55KSxiPTEpOihjPS1NYXRoLnNxcnQoYS54KmEueCthLnkqYS55KSxiPS0xKTt2YXIgZj0wO2lmKDAhPT1jJiYoZj1NYXRoLmF0YW4yKGIqYS54LGIqYS55KSksdGhpcy5zcGhlcmUpcmV0dXJuIGU9aih0aGlzLmxvbmcwK2YvdGhpcy5ucyksZD1rKHRoaXMuZy1jL3RoaXMuYSksYS54PWUsYS55PWQsYTt2YXIgZz10aGlzLmctYy90aGlzLmE7cmV0dXJuIGQ9bChnLHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMpLGU9aih0aGlzLmxvbmcwK2YvdGhpcy5ucyksYS54PWUsYS55PWQsYX0sYy5uYW1lcz1bXCJFcXVpZGlzdGFudF9Db25pY1wiLFwiZXFkY1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sYXRcIjo0LFwiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL2UwZm5cIjo3LFwiLi4vY29tbW9uL2UxZm5cIjo4LFwiLi4vY29tbW9uL2UyZm5cIjo5LFwiLi4vY29tbW9uL2UzZm5cIjoxMCxcIi4uL2NvbW1vbi9pbWxmblwiOjEyLFwiLi4vY29tbW9uL21sZm5cIjoxNCxcIi4uL2NvbW1vbi9tc2ZuelwiOjE1fV0sNDU6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1NYXRoLlBJLzQsZT1hKFwiLi4vY29tbW9uL3NyYXRcIiksZj1NYXRoLlBJLzIsZz0yMDtjLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLnNpbih0aGlzLmxhdDApLGI9TWF0aC5jb3ModGhpcy5sYXQwKTtiKj1iLHRoaXMucmM9TWF0aC5zcXJ0KDEtdGhpcy5lcykvKDEtdGhpcy5lcyphKmEpLHRoaXMuQz1NYXRoLnNxcnQoMSt0aGlzLmVzKmIqYi8oMS10aGlzLmVzKSksdGhpcy5waGljMD1NYXRoLmFzaW4oYS90aGlzLkMpLHRoaXMucmF0ZXhwPS41KnRoaXMuQyp0aGlzLmUsdGhpcy5LPU1hdGgudGFuKC41KnRoaXMucGhpYzArZCkvKE1hdGgucG93KE1hdGgudGFuKC41KnRoaXMubGF0MCtkKSx0aGlzLkMpKmUodGhpcy5lKmEsdGhpcy5yYXRleHApKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiPWEueCxjPWEueTtyZXR1cm4gYS55PTIqTWF0aC5hdGFuKHRoaXMuSypNYXRoLnBvdyhNYXRoLnRhbiguNSpjK2QpLHRoaXMuQykqZSh0aGlzLmUqTWF0aC5zaW4oYyksdGhpcy5yYXRleHApKS1mLGEueD10aGlzLkMqYixhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTFlLTE0LGM9YS54L3RoaXMuQyxoPWEueSxpPU1hdGgucG93KE1hdGgudGFuKC41KmgrZCkvdGhpcy5LLDEvdGhpcy5DKSxqPWc7aj4wJiYoaD0yKk1hdGguYXRhbihpKmUodGhpcy5lKk1hdGguc2luKGEueSksLS41KnRoaXMuZSkpLWYsIShNYXRoLmFicyhoLWEueSk8YikpOy0tailhLnk9aDtyZXR1cm4gaj8oYS54PWMsYS55PWgsYSk6bnVsbH0sYy5uYW1lcz1bXCJnYXVzc1wiXX0se1wiLi4vY29tbW9uL3NyYXRcIjoyMn1dLDQ2OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGU9MWUtMTAsZj1hKFwiLi4vY29tbW9uL2FzaW56XCIpO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMuc2luX3AxND1NYXRoLnNpbih0aGlzLmxhdDApLHRoaXMuY29zX3AxND1NYXRoLmNvcyh0aGlzLmxhdDApLHRoaXMuaW5maW5pdHlfZGlzdD0xZTMqdGhpcy5hLHRoaXMucmM9MX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZixnLGgsaSxqLGssbD1hLngsbT1hLnk7cmV0dXJuIGY9ZChsLXRoaXMubG9uZzApLGI9TWF0aC5zaW4obSksYz1NYXRoLmNvcyhtKSxnPU1hdGguY29zKGYpLGk9dGhpcy5zaW5fcDE0KmIrdGhpcy5jb3NfcDE0KmMqZyxoPTEsaT4wfHxNYXRoLmFicyhpKTw9ZT8oaj10aGlzLngwK3RoaXMuYSpoKmMqTWF0aC5zaW4oZikvaSxrPXRoaXMueTArdGhpcy5hKmgqKHRoaXMuY29zX3AxNCpiLXRoaXMuc2luX3AxNCpjKmcpL2kpOihqPXRoaXMueDArdGhpcy5pbmZpbml0eV9kaXN0KmMqTWF0aC5zaW4oZiksaz10aGlzLnkwK3RoaXMuaW5maW5pdHlfZGlzdCoodGhpcy5jb3NfcDE0KmItdGhpcy5zaW5fcDE0KmMqZykpLGEueD1qLGEueT1rLGFcbn0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxnLGgsaTtyZXR1cm4gYS54PShhLngtdGhpcy54MCkvdGhpcy5hLGEueT0oYS55LXRoaXMueTApL3RoaXMuYSxhLngvPXRoaXMuazAsYS55Lz10aGlzLmswLChiPU1hdGguc3FydChhLngqYS54K2EueSphLnkpKT8oZz1NYXRoLmF0YW4yKGIsdGhpcy5yYyksYz1NYXRoLnNpbihnKSxlPU1hdGguY29zKGcpLGk9ZihlKnRoaXMuc2luX3AxNCthLnkqYyp0aGlzLmNvc19wMTQvYiksaD1NYXRoLmF0YW4yKGEueCpjLGIqdGhpcy5jb3NfcDE0KmUtYS55KnRoaXMuc2luX3AxNCpjKSxoPWQodGhpcy5sb25nMCtoKSk6KGk9dGhpcy5waGljMCxoPTApLGEueD1oLGEueT1pLGF9LGMubmFtZXM9W1wiZ25vbVwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL2FzaW56XCI6Nn1dLDQ3OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMuYT02Mzc3Mzk3LjE1NSx0aGlzLmVzPS4wMDY2NzQzNzIyMzA2MTQsdGhpcy5lPU1hdGguc3FydCh0aGlzLmVzKSx0aGlzLmxhdDB8fCh0aGlzLmxhdDA9Ljg2MzkzNzk3OTczNzE5MyksdGhpcy5sb25nMHx8KHRoaXMubG9uZzA9LjQzMzQyMzQzMDkxMTkyNTEpLHRoaXMuazB8fCh0aGlzLmswPS45OTk5KSx0aGlzLnM0NT0uNzg1Mzk4MTYzMzk3NDQ4LHRoaXMuczkwPTIqdGhpcy5zNDUsdGhpcy5maTA9dGhpcy5sYXQwLHRoaXMuZTI9dGhpcy5lcyx0aGlzLmU9TWF0aC5zcXJ0KHRoaXMuZTIpLHRoaXMuYWxmYT1NYXRoLnNxcnQoMSt0aGlzLmUyKk1hdGgucG93KE1hdGguY29zKHRoaXMuZmkwKSw0KS8oMS10aGlzLmUyKSksdGhpcy51cT0xLjA0MjE2ODU2MzgwNDc0LHRoaXMudTA9TWF0aC5hc2luKE1hdGguc2luKHRoaXMuZmkwKS90aGlzLmFsZmEpLHRoaXMuZz1NYXRoLnBvdygoMSt0aGlzLmUqTWF0aC5zaW4odGhpcy5maTApKS8oMS10aGlzLmUqTWF0aC5zaW4odGhpcy5maTApKSx0aGlzLmFsZmEqdGhpcy5lLzIpLHRoaXMuaz1NYXRoLnRhbih0aGlzLnUwLzIrdGhpcy5zNDUpL01hdGgucG93KE1hdGgudGFuKHRoaXMuZmkwLzIrdGhpcy5zNDUpLHRoaXMuYWxmYSkqdGhpcy5nLHRoaXMuazE9dGhpcy5rMCx0aGlzLm4wPXRoaXMuYSpNYXRoLnNxcnQoMS10aGlzLmUyKS8oMS10aGlzLmUyKk1hdGgucG93KE1hdGguc2luKHRoaXMuZmkwKSwyKSksdGhpcy5zMD0xLjM3MDA4MzQ2MjgxNTU1LHRoaXMubj1NYXRoLnNpbih0aGlzLnMwKSx0aGlzLnJvMD10aGlzLmsxKnRoaXMubjAvTWF0aC50YW4odGhpcy5zMCksdGhpcy5hZD10aGlzLnM5MC10aGlzLnVxfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxlLGYsZyxoLGksaj1hLngsaz1hLnksbD1kKGotdGhpcy5sb25nMCk7cmV0dXJuIGI9TWF0aC5wb3coKDErdGhpcy5lKk1hdGguc2luKGspKS8oMS10aGlzLmUqTWF0aC5zaW4oaykpLHRoaXMuYWxmYSp0aGlzLmUvMiksYz0yKihNYXRoLmF0YW4odGhpcy5rKk1hdGgucG93KE1hdGgudGFuKGsvMit0aGlzLnM0NSksdGhpcy5hbGZhKS9iKS10aGlzLnM0NSksZT0tbCp0aGlzLmFsZmEsZj1NYXRoLmFzaW4oTWF0aC5jb3ModGhpcy5hZCkqTWF0aC5zaW4oYykrTWF0aC5zaW4odGhpcy5hZCkqTWF0aC5jb3MoYykqTWF0aC5jb3MoZSkpLGc9TWF0aC5hc2luKE1hdGguY29zKGMpKk1hdGguc2luKGUpL01hdGguY29zKGYpKSxoPXRoaXMubipnLGk9dGhpcy5ybzAqTWF0aC5wb3coTWF0aC50YW4odGhpcy5zMC8yK3RoaXMuczQ1KSx0aGlzLm4pL01hdGgucG93KE1hdGgudGFuKGYvMit0aGlzLnM0NSksdGhpcy5uKSxhLnk9aSpNYXRoLmNvcyhoKS8xLGEueD1pKk1hdGguc2luKGgpLzEsdGhpcy5jemVjaHx8KGEueSo9LTEsYS54Kj0tMSksYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaj1hLng7YS54PWEueSxhLnk9aix0aGlzLmN6ZWNofHwoYS55Kj0tMSxhLngqPS0xKSxnPU1hdGguc3FydChhLngqYS54K2EueSphLnkpLGY9TWF0aC5hdGFuMihhLnksYS54KSxlPWYvTWF0aC5zaW4odGhpcy5zMCksZD0yKihNYXRoLmF0YW4oTWF0aC5wb3codGhpcy5ybzAvZywxL3RoaXMubikqTWF0aC50YW4odGhpcy5zMC8yK3RoaXMuczQ1KSktdGhpcy5zNDUpLGI9TWF0aC5hc2luKE1hdGguY29zKHRoaXMuYWQpKk1hdGguc2luKGQpLU1hdGguc2luKHRoaXMuYWQpKk1hdGguY29zKGQpKk1hdGguY29zKGUpKSxjPU1hdGguYXNpbihNYXRoLmNvcyhkKSpNYXRoLnNpbihlKS9NYXRoLmNvcyhiKSksYS54PXRoaXMubG9uZzAtYy90aGlzLmFsZmEsaD1iLGk9MDt2YXIgaz0wO2RvIGEueT0yKihNYXRoLmF0YW4oTWF0aC5wb3codGhpcy5rLC0xL3RoaXMuYWxmYSkqTWF0aC5wb3coTWF0aC50YW4oYi8yK3RoaXMuczQ1KSwxL3RoaXMuYWxmYSkqTWF0aC5wb3coKDErdGhpcy5lKk1hdGguc2luKGgpKS8oMS10aGlzLmUqTWF0aC5zaW4oaCkpLHRoaXMuZS8yKSktdGhpcy5zNDUpLE1hdGguYWJzKGgtYS55KTwxZS0xMCYmKGk9MSksaD1hLnksays9MTt3aGlsZSgwPT09aSYmMTU+ayk7cmV0dXJuIGs+PTE1P251bGw6YX0sYy5uYW1lcz1bXCJLcm92YWtcIixcImtyb3Zha1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1fV0sNDg6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1NYXRoLlBJLzIsZT1NYXRoLlBJLzQsZj0xZS0xMCxnPWEoXCIuLi9jb21tb24vcXNmbnpcIiksaD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIik7Yy5TX1BPTEU9MSxjLk5fUE9MRT0yLGMuRVFVSVQ9MyxjLk9CTElRPTQsYy5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5hYnModGhpcy5sYXQwKTtpZih0aGlzLm1vZGU9TWF0aC5hYnMoYS1kKTxmP3RoaXMubGF0MDwwP3RoaXMuU19QT0xFOnRoaXMuTl9QT0xFOk1hdGguYWJzKGEpPGY/dGhpcy5FUVVJVDp0aGlzLk9CTElRLHRoaXMuZXM+MCl7dmFyIGI7c3dpdGNoKHRoaXMucXA9Zyh0aGlzLmUsMSksdGhpcy5tbWY9LjUvKDEtdGhpcy5lcyksdGhpcy5hcGE9dGhpcy5hdXRoc2V0KHRoaXMuZXMpLHRoaXMubW9kZSl7Y2FzZSB0aGlzLk5fUE9MRTp0aGlzLmRkPTE7YnJlYWs7Y2FzZSB0aGlzLlNfUE9MRTp0aGlzLmRkPTE7YnJlYWs7Y2FzZSB0aGlzLkVRVUlUOnRoaXMucnE9TWF0aC5zcXJ0KC41KnRoaXMucXApLHRoaXMuZGQ9MS90aGlzLnJxLHRoaXMueG1mPTEsdGhpcy55bWY9LjUqdGhpcy5xcDticmVhaztjYXNlIHRoaXMuT0JMSVE6dGhpcy5ycT1NYXRoLnNxcnQoLjUqdGhpcy5xcCksYj1NYXRoLnNpbih0aGlzLmxhdDApLHRoaXMuc2luYjE9Zyh0aGlzLmUsYikvdGhpcy5xcCx0aGlzLmNvc2IxPU1hdGguc3FydCgxLXRoaXMuc2luYjEqdGhpcy5zaW5iMSksdGhpcy5kZD1NYXRoLmNvcyh0aGlzLmxhdDApLyhNYXRoLnNxcnQoMS10aGlzLmVzKmIqYikqdGhpcy5ycSp0aGlzLmNvc2IxKSx0aGlzLnltZj0odGhpcy54bWY9dGhpcy5ycSkvdGhpcy5kZCx0aGlzLnhtZio9dGhpcy5kZH19ZWxzZSB0aGlzLm1vZGU9PT10aGlzLk9CTElRJiYodGhpcy5zaW5waDA9TWF0aC5zaW4odGhpcy5sYXQwKSx0aGlzLmNvc3BoMD1NYXRoLmNvcyh0aGlzLmxhdDApKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsaSxqLGssbCxtLG4sbyxwLHE9YS54LHI9YS55O2lmKHE9aChxLXRoaXMubG9uZzApLHRoaXMuc3BoZXJlKXtpZihrPU1hdGguc2luKHIpLHA9TWF0aC5jb3MociksaT1NYXRoLmNvcyhxKSx0aGlzLm1vZGU9PT10aGlzLk9CTElRfHx0aGlzLm1vZGU9PT10aGlzLkVRVUlUKXtpZihjPXRoaXMubW9kZT09PXRoaXMuRVFVSVQ/MStwKmk6MSt0aGlzLnNpbnBoMCprK3RoaXMuY29zcGgwKnAqaSxmPj1jKXJldHVybiBudWxsO2M9TWF0aC5zcXJ0KDIvYyksYj1jKnAqTWF0aC5zaW4ocSksYyo9dGhpcy5tb2RlPT09dGhpcy5FUVVJVD9rOnRoaXMuY29zcGgwKmstdGhpcy5zaW5waDAqcCppfWVsc2UgaWYodGhpcy5tb2RlPT09dGhpcy5OX1BPTEV8fHRoaXMubW9kZT09PXRoaXMuU19QT0xFKXtpZih0aGlzLm1vZGU9PT10aGlzLk5fUE9MRSYmKGk9LWkpLE1hdGguYWJzKHIrdGhpcy5waGkwKTxmKXJldHVybiBudWxsO2M9ZS0uNSpyLGM9MioodGhpcy5tb2RlPT09dGhpcy5TX1BPTEU/TWF0aC5jb3MoYyk6TWF0aC5zaW4oYykpLGI9YypNYXRoLnNpbihxKSxjKj1pfX1lbHNle3N3aXRjaChtPTAsbj0wLG89MCxpPU1hdGguY29zKHEpLGo9TWF0aC5zaW4ocSksaz1NYXRoLnNpbihyKSxsPWcodGhpcy5lLGspLCh0aGlzLm1vZGU9PT10aGlzLk9CTElRfHx0aGlzLm1vZGU9PT10aGlzLkVRVUlUKSYmKG09bC90aGlzLnFwLG49TWF0aC5zcXJ0KDEtbSptKSksdGhpcy5tb2RlKXtjYXNlIHRoaXMuT0JMSVE6bz0xK3RoaXMuc2luYjEqbSt0aGlzLmNvc2IxKm4qaTticmVhaztjYXNlIHRoaXMuRVFVSVQ6bz0xK24qaTticmVhaztjYXNlIHRoaXMuTl9QT0xFOm89ZCtyLGw9dGhpcy5xcC1sO2JyZWFrO2Nhc2UgdGhpcy5TX1BPTEU6bz1yLWQsbD10aGlzLnFwK2x9aWYoTWF0aC5hYnMobyk8ZilyZXR1cm4gbnVsbDtzd2l0Y2godGhpcy5tb2RlKXtjYXNlIHRoaXMuT0JMSVE6Y2FzZSB0aGlzLkVRVUlUOm89TWF0aC5zcXJ0KDIvbyksYz10aGlzLm1vZGU9PT10aGlzLk9CTElRP3RoaXMueW1mKm8qKHRoaXMuY29zYjEqbS10aGlzLnNpbmIxKm4qaSk6KG89TWF0aC5zcXJ0KDIvKDErbippKSkpKm0qdGhpcy55bWYsYj10aGlzLnhtZipvKm4qajticmVhaztjYXNlIHRoaXMuTl9QT0xFOmNhc2UgdGhpcy5TX1BPTEU6bD49MD8oYj0obz1NYXRoLnNxcnQobCkpKmosYz1pKih0aGlzLm1vZGU9PT10aGlzLlNfUE9MRT9vOi1vKSk6Yj1jPTB9fXJldHVybiBhLng9dGhpcy5hKmIrdGhpcy54MCxhLnk9dGhpcy5hKmMrdGhpcy55MCxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7YS54LT10aGlzLngwLGEueS09dGhpcy55MDt2YXIgYixjLGUsZyxpLGosayxsPWEueC90aGlzLmEsbT1hLnkvdGhpcy5hO2lmKHRoaXMuc3BoZXJlKXt2YXIgbixvPTAscD0wO2lmKG49TWF0aC5zcXJ0KGwqbCttKm0pLGM9LjUqbixjPjEpcmV0dXJuIG51bGw7c3dpdGNoKGM9MipNYXRoLmFzaW4oYyksKHRoaXMubW9kZT09PXRoaXMuT0JMSVF8fHRoaXMubW9kZT09PXRoaXMuRVFVSVQpJiYocD1NYXRoLnNpbihjKSxvPU1hdGguY29zKGMpKSx0aGlzLm1vZGUpe2Nhc2UgdGhpcy5FUVVJVDpjPU1hdGguYWJzKG4pPD1mPzA6TWF0aC5hc2luKG0qcC9uKSxsKj1wLG09bypuO2JyZWFrO2Nhc2UgdGhpcy5PQkxJUTpjPU1hdGguYWJzKG4pPD1mP3RoaXMucGhpMDpNYXRoLmFzaW4obyp0aGlzLnNpbnBoMCttKnAqdGhpcy5jb3NwaDAvbiksbCo9cCp0aGlzLmNvc3BoMCxtPShvLU1hdGguc2luKGMpKnRoaXMuc2lucGgwKSpuO2JyZWFrO2Nhc2UgdGhpcy5OX1BPTEU6bT0tbSxjPWQtYzticmVhaztjYXNlIHRoaXMuU19QT0xFOmMtPWR9Yj0wIT09bXx8dGhpcy5tb2RlIT09dGhpcy5FUVVJVCYmdGhpcy5tb2RlIT09dGhpcy5PQkxJUT9NYXRoLmF0YW4yKGwsbSk6MH1lbHNle2lmKGs9MCx0aGlzLm1vZGU9PT10aGlzLk9CTElRfHx0aGlzLm1vZGU9PT10aGlzLkVRVUlUKXtpZihsLz10aGlzLmRkLG0qPXRoaXMuZGQsaj1NYXRoLnNxcnQobCpsK20qbSksZj5qKXJldHVybiBhLng9MCxhLnk9dGhpcy5waGkwLGE7Zz0yKk1hdGguYXNpbiguNSpqL3RoaXMucnEpLGU9TWF0aC5jb3MoZyksbCo9Zz1NYXRoLnNpbihnKSx0aGlzLm1vZGU9PT10aGlzLk9CTElRPyhrPWUqdGhpcy5zaW5iMSttKmcqdGhpcy5jb3NiMS9qLGk9dGhpcy5xcCprLG09aip0aGlzLmNvc2IxKmUtbSp0aGlzLnNpbmIxKmcpOihrPW0qZy9qLGk9dGhpcy5xcCprLG09aiplKX1lbHNlIGlmKHRoaXMubW9kZT09PXRoaXMuTl9QT0xFfHx0aGlzLm1vZGU9PT10aGlzLlNfUE9MRSl7aWYodGhpcy5tb2RlPT09dGhpcy5OX1BPTEUmJihtPS1tKSxpPWwqbCttKm0sIWkpcmV0dXJuIGEueD0wLGEueT10aGlzLnBoaTAsYTtrPTEtaS90aGlzLnFwLHRoaXMubW9kZT09PXRoaXMuU19QT0xFJiYoaz0tayl9Yj1NYXRoLmF0YW4yKGwsbSksYz10aGlzLmF1dGhsYXQoTWF0aC5hc2luKGspLHRoaXMuYXBhKX1yZXR1cm4gYS54PWgodGhpcy5sb25nMCtiKSxhLnk9YyxhfSxjLlAwMD0uMzMzMzMzMzMzMzMzMzMzMyxjLlAwMT0uMTcyMjIyMjIyMjIyMjIyMjIsYy5QMDI9LjEwMjU3OTM2NTA3OTM2NTA4LGMuUDEwPS4wNjM4ODg4ODg4ODg4ODg4OCxjLlAxMT0uMDY2NDAyMTE2NDAyMTE2NCxjLlAyMD0uMDE2NDE1MDEyOTQyMTkxNTQzLGMuYXV0aHNldD1mdW5jdGlvbihhKXt2YXIgYixjPVtdO3JldHVybiBjWzBdPWEqdGhpcy5QMDAsYj1hKmEsY1swXSs9Yip0aGlzLlAwMSxjWzFdPWIqdGhpcy5QMTAsYio9YSxjWzBdKz1iKnRoaXMuUDAyLGNbMV0rPWIqdGhpcy5QMTEsY1syXT1iKnRoaXMuUDIwLGN9LGMuYXV0aGxhdD1mdW5jdGlvbihhLGIpe3ZhciBjPWErYTtyZXR1cm4gYStiWzBdKk1hdGguc2luKGMpK2JbMV0qTWF0aC5zaW4oYytjKStiWzJdKk1hdGguc2luKGMrYytjKX0sYy5uYW1lcz1bXCJMYW1iZXJ0IEF6aW11dGhhbCBFcXVhbCBBcmVhXCIsXCJMYW1iZXJ0X0F6aW11dGhhbF9FcXVhbF9BcmVhXCIsXCJsYWVhXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vcXNmbnpcIjoyMH1dLDQ5OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9MWUtMTAsZT1hKFwiLi4vY29tbW9uL21zZm56XCIpLGY9YShcIi4uL2NvbW1vbi90c2ZuelwiKSxnPU1hdGguUEkvMixoPWEoXCIuLi9jb21tb24vc2lnblwiKSxpPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxqPWEoXCIuLi9jb21tb24vcGhpMnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7aWYodGhpcy5sYXQyfHwodGhpcy5sYXQyPXRoaXMubGF0MSksdGhpcy5rMHx8KHRoaXMuazA9MSksdGhpcy54MD10aGlzLngwfHwwLHRoaXMueTA9dGhpcy55MHx8MCwhKE1hdGguYWJzKHRoaXMubGF0MSt0aGlzLmxhdDIpPGQpKXt2YXIgYT10aGlzLmIvdGhpcy5hO3RoaXMuZT1NYXRoLnNxcnQoMS1hKmEpO3ZhciBiPU1hdGguc2luKHRoaXMubGF0MSksYz1NYXRoLmNvcyh0aGlzLmxhdDEpLGc9ZSh0aGlzLmUsYixjKSxoPWYodGhpcy5lLHRoaXMubGF0MSxiKSxpPU1hdGguc2luKHRoaXMubGF0Miksaj1NYXRoLmNvcyh0aGlzLmxhdDIpLGs9ZSh0aGlzLmUsaSxqKSxsPWYodGhpcy5lLHRoaXMubGF0MixpKSxtPWYodGhpcy5lLHRoaXMubGF0MCxNYXRoLnNpbih0aGlzLmxhdDApKTt0aGlzLm5zPU1hdGguYWJzKHRoaXMubGF0MS10aGlzLmxhdDIpPmQ/TWF0aC5sb2coZy9rKS9NYXRoLmxvZyhoL2wpOmIsaXNOYU4odGhpcy5ucykmJih0aGlzLm5zPWIpLHRoaXMuZjA9Zy8odGhpcy5ucypNYXRoLnBvdyhoLHRoaXMubnMpKSx0aGlzLnJoPXRoaXMuYSp0aGlzLmYwKk1hdGgucG93KG0sdGhpcy5ucyksdGhpcy50aXRsZXx8KHRoaXMudGl0bGU9XCJMYW1iZXJ0IENvbmZvcm1hbCBDb25pY1wiKX19LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnk7TWF0aC5hYnMoMipNYXRoLmFicyhjKS1NYXRoLlBJKTw9ZCYmKGM9aChjKSooZy0yKmQpKTt2YXIgZSxqLGs9TWF0aC5hYnMoTWF0aC5hYnMoYyktZyk7aWYoaz5kKWU9Zih0aGlzLmUsYyxNYXRoLnNpbihjKSksaj10aGlzLmEqdGhpcy5mMCpNYXRoLnBvdyhlLHRoaXMubnMpO2Vsc2V7aWYoaz1jKnRoaXMubnMsMD49aylyZXR1cm4gbnVsbDtqPTB9dmFyIGw9dGhpcy5ucyppKGItdGhpcy5sb25nMCk7cmV0dXJuIGEueD10aGlzLmswKmoqTWF0aC5zaW4obCkrdGhpcy54MCxhLnk9dGhpcy5rMCoodGhpcy5yaC1qKk1hdGguY29zKGwpKSt0aGlzLnkwLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGg9KGEueC10aGlzLngwKS90aGlzLmswLGs9dGhpcy5yaC0oYS55LXRoaXMueTApL3RoaXMuazA7dGhpcy5ucz4wPyhiPU1hdGguc3FydChoKmgrayprKSxjPTEpOihiPS1NYXRoLnNxcnQoaCpoK2sqayksYz0tMSk7dmFyIGw9MDtpZigwIT09YiYmKGw9TWF0aC5hdGFuMihjKmgsYyprKSksMCE9PWJ8fHRoaXMubnM+MCl7aWYoYz0xL3RoaXMubnMsZD1NYXRoLnBvdyhiLyh0aGlzLmEqdGhpcy5mMCksYyksZT1qKHRoaXMuZSxkKSwtOTk5OT09PWUpcmV0dXJuIG51bGx9ZWxzZSBlPS1nO3JldHVybiBmPWkobC90aGlzLm5zK3RoaXMubG9uZzApLGEueD1mLGEueT1lLGF9LGMubmFtZXM9W1wiTGFtYmVydCBUYW5nZW50aWFsIENvbmZvcm1hbCBDb25pYyBQcm9qZWN0aW9uXCIsXCJMYW1iZXJ0X0NvbmZvcm1hbF9Db25pY1wiLFwiTGFtYmVydF9Db25mb3JtYWxfQ29uaWNfMlNQXCIsXCJsY2NcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9tc2ZuelwiOjE1LFwiLi4vY29tbW9uL3BoaTJ6XCI6MTYsXCIuLi9jb21tb24vc2lnblwiOjIxLFwiLi4vY29tbW9uL3RzZm56XCI6MjR9XSw1MDpbZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSl7cmV0dXJuIGF9Yy5pbml0PWZ1bmN0aW9uKCl7fSxjLmZvcndhcmQ9ZCxjLmludmVyc2U9ZCxjLm5hbWVzPVtcImxvbmdsYXRcIixcImlkZW50aXR5XCJdfSx7fV0sNTE6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL21zZm56XCIpLGU9TWF0aC5QSS8yLGY9MWUtMTAsZz01Ny4yOTU3Nzk1MTMwODIzMixoPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxpPU1hdGguUEkvNCxqPWEoXCIuLi9jb21tb24vdHNmbnpcIiksaz1hKFwiLi4vY29tbW9uL3BoaTJ6XCIpO2MuaW5pdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYi90aGlzLmE7dGhpcy5lcz0xLWEqYSxcIngwXCJpbiB0aGlzfHwodGhpcy54MD0wKSxcInkwXCJpbiB0aGlzfHwodGhpcy55MD0wKSx0aGlzLmU9TWF0aC5zcXJ0KHRoaXMuZXMpLHRoaXMubGF0X3RzP3RoaXMuazA9dGhpcy5zcGhlcmU/TWF0aC5jb3ModGhpcy5sYXRfdHMpOmQodGhpcy5lLE1hdGguc2luKHRoaXMubGF0X3RzKSxNYXRoLmNvcyh0aGlzLmxhdF90cykpOnRoaXMuazB8fCh0aGlzLmswPXRoaXMuaz90aGlzLms6MSl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnk7aWYoYypnPjkwJiYtOTA+YypnJiZiKmc+MTgwJiYtMTgwPmIqZylyZXR1cm4gbnVsbDt2YXIgZCxrO2lmKE1hdGguYWJzKE1hdGguYWJzKGMpLWUpPD1mKXJldHVybiBudWxsO2lmKHRoaXMuc3BoZXJlKWQ9dGhpcy54MCt0aGlzLmEqdGhpcy5rMCpoKGItdGhpcy5sb25nMCksaz10aGlzLnkwK3RoaXMuYSp0aGlzLmswKk1hdGgubG9nKE1hdGgudGFuKGkrLjUqYykpO2Vsc2V7dmFyIGw9TWF0aC5zaW4oYyksbT1qKHRoaXMuZSxjLGwpO2Q9dGhpcy54MCt0aGlzLmEqdGhpcy5rMCpoKGItdGhpcy5sb25nMCksaz10aGlzLnkwLXRoaXMuYSp0aGlzLmswKk1hdGgubG9nKG0pfXJldHVybiBhLng9ZCxhLnk9ayxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPWEueC10aGlzLngwLGY9YS55LXRoaXMueTA7aWYodGhpcy5zcGhlcmUpYz1lLTIqTWF0aC5hdGFuKE1hdGguZXhwKC1mLyh0aGlzLmEqdGhpcy5rMCkpKTtlbHNle3ZhciBnPU1hdGguZXhwKC1mLyh0aGlzLmEqdGhpcy5rMCkpO2lmKGM9ayh0aGlzLmUsZyksLTk5OTk9PT1jKXJldHVybiBudWxsfXJldHVybiBiPWgodGhpcy5sb25nMCtkLyh0aGlzLmEqdGhpcy5rMCkpLGEueD1iLGEueT1jLGF9LGMubmFtZXM9W1wiTWVyY2F0b3JcIixcIlBvcHVsYXIgVmlzdWFsaXNhdGlvbiBQc2V1ZG8gTWVyY2F0b3JcIixcIk1lcmNhdG9yXzFTUFwiLFwiTWVyY2F0b3JfQXV4aWxpYXJ5X1NwaGVyZVwiLFwibWVyY1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL21zZm56XCI6MTUsXCIuLi9jb21tb24vcGhpMnpcIjoxNixcIi4uL2NvbW1vbi90c2ZuelwiOjI0fV0sNTI6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIik7Yy5pbml0PWZ1bmN0aW9uKCl7fSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS54LGM9YS55LGU9ZChiLXRoaXMubG9uZzApLGY9dGhpcy54MCt0aGlzLmEqZSxnPXRoaXMueTArdGhpcy5hKk1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkvNCtjLzIuNSkpKjEuMjU7cmV0dXJuIGEueD1mLGEueT1nLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXthLngtPXRoaXMueDAsYS55LT10aGlzLnkwO3ZhciBiPWQodGhpcy5sb25nMCthLngvdGhpcy5hKSxjPTIuNSooTWF0aC5hdGFuKE1hdGguZXhwKC44KmEueS90aGlzLmEpKS1NYXRoLlBJLzQpO3JldHVybiBhLng9YixhLnk9YyxhfSxjLm5hbWVzPVtcIk1pbGxlcl9DeWxpbmRyaWNhbFwiLFwibWlsbFwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1fV0sNTM6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZT0xZS0xMDtjLmluaXQ9ZnVuY3Rpb24oKXt9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9YS54LGM9YS55LGY9ZChiLXRoaXMubG9uZzApLGc9YyxoPU1hdGguUEkqTWF0aC5zaW4oYyksaT0wOyEwO2krKyl7dmFyIGo9LShnK01hdGguc2luKGcpLWgpLygxK01hdGguY29zKGcpKTtpZihnKz1qLE1hdGguYWJzKGopPGUpYnJlYWt9Zy89MixNYXRoLlBJLzItTWF0aC5hYnMoYyk8ZSYmKGY9MCk7dmFyIGs9LjkwMDMxNjMxNjE1OCp0aGlzLmEqZipNYXRoLmNvcyhnKSt0aGlzLngwLGw9MS40MTQyMTM1NjIzNzMxKnRoaXMuYSpNYXRoLnNpbihnKSt0aGlzLnkwO3JldHVybiBhLng9ayxhLnk9bCxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYzthLngtPXRoaXMueDAsYS55LT10aGlzLnkwLGM9YS55LygxLjQxNDIxMzU2MjM3MzEqdGhpcy5hKSxNYXRoLmFicyhjKT4uOTk5OTk5OTk5OTk5JiYoYz0uOTk5OTk5OTk5OTk5KSxiPU1hdGguYXNpbihjKTt2YXIgZT1kKHRoaXMubG9uZzArYS54LyguOTAwMzE2MzE2MTU4KnRoaXMuYSpNYXRoLmNvcyhiKSkpO2U8LU1hdGguUEkmJihlPS1NYXRoLlBJKSxlPk1hdGguUEkmJihlPU1hdGguUEkpLGM9KDIqYitNYXRoLnNpbigyKmIpKS9NYXRoLlBJLE1hdGguYWJzKGMpPjEmJihjPTEpO3ZhciBmPU1hdGguYXNpbihjKTtyZXR1cm4gYS54PWUsYS55PWYsYX0sYy5uYW1lcz1bXCJNb2xsd2VpZGVcIixcIm1vbGxcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NX1dLDU0OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9NDg0ODEzNjgxMTA5NTM2ZS0yMDtjLml0ZXJhdGlvbnM9MSxjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLkE9W10sdGhpcy5BWzFdPS42Mzk5MTc1MDczLHRoaXMuQVsyXT0tLjEzNTg3OTc2MTMsdGhpcy5BWzNdPS4wNjMyOTQ0MDksdGhpcy5BWzRdPS0uMDI1MjY4NTMsdGhpcy5BWzVdPS4wMTE3ODc5LHRoaXMuQVs2XT0tLjAwNTUxNjEsdGhpcy5BWzddPS4wMDI2OTA2LHRoaXMuQVs4XT0tLjAwMTMzMyx0aGlzLkFbOV09NjdlLTUsdGhpcy5BWzEwXT0tMzRlLTUsdGhpcy5CX3JlPVtdLHRoaXMuQl9pbT1bXSx0aGlzLkJfcmVbMV09Ljc1NTc4NTMyMjgsdGhpcy5CX2ltWzFdPTAsdGhpcy5CX3JlWzJdPS4yNDkyMDQ2NDYsdGhpcy5CX2ltWzJdPS4wMDMzNzE1MDcsdGhpcy5CX3JlWzNdPS0uMDAxNTQxNzM5LHRoaXMuQl9pbVszXT0uMDQxMDU4NTYsdGhpcy5CX3JlWzRdPS0uMTAxNjI5MDcsdGhpcy5CX2ltWzRdPS4wMTcyNzYwOSx0aGlzLkJfcmVbNV09LS4yNjYyMzQ4OSx0aGlzLkJfaW1bNV09LS4zNjI0OTIxOCx0aGlzLkJfcmVbNl09LS42ODcwOTgzLHRoaXMuQl9pbVs2XT0tMS4xNjUxOTY3LHRoaXMuQ19yZT1bXSx0aGlzLkNfaW09W10sdGhpcy5DX3JlWzFdPTEuMzIzMTI3MDQzOSx0aGlzLkNfaW1bMV09MCx0aGlzLkNfcmVbMl09LS41NzcyNDU3ODksdGhpcy5DX2ltWzJdPS0uMDA3ODA5NTk4LHRoaXMuQ19yZVszXT0uNTA4MzA3NTEzLHRoaXMuQ19pbVszXT0tLjExMjIwODk1Mix0aGlzLkNfcmVbNF09LS4xNTA5NDc2Mix0aGlzLkNfaW1bNF09LjE4MjAwNjAyLHRoaXMuQ19yZVs1XT0xLjAxNDE4MTc5LHRoaXMuQ19pbVs1XT0xLjY0NDk3Njk2LHRoaXMuQ19yZVs2XT0xLjk2NjA1NDksdGhpcy5DX2ltWzZdPTIuNTEyNzY0NSx0aGlzLkQ9W10sdGhpcy5EWzFdPTEuNTYyNzAxNDI0Myx0aGlzLkRbMl09LjUxODU0MDYzOTgsdGhpcy5EWzNdPS0uMDMzMzMwOTgsdGhpcy5EWzRdPS0uMTA1MjkwNix0aGlzLkRbNV09LS4wMzY4NTk0LHRoaXMuRFs2XT0uMDA3MzE3LHRoaXMuRFs3XT0uMDEyMix0aGlzLkRbOF09LjAwMzk0LHRoaXMuRFs5XT0tLjAwMTN9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjPWEueCxlPWEueSxmPWUtdGhpcy5sYXQwLGc9Yy10aGlzLmxvbmcwLGg9Zi9kKjFlLTUsaT1nLGo9MSxrPTA7Zm9yKGI9MTsxMD49YjtiKyspaio9aCxrKz10aGlzLkFbYl0qajt2YXIgbCxtLG49ayxvPWkscD0xLHE9MCxyPTAscz0wO2ZvcihiPTE7Nj49YjtiKyspbD1wKm4tcSpvLG09cSpuK3AqbyxwPWwscT1tLHI9cit0aGlzLkJfcmVbYl0qcC10aGlzLkJfaW1bYl0qcSxzPXMrdGhpcy5CX2ltW2JdKnArdGhpcy5CX3JlW2JdKnE7cmV0dXJuIGEueD1zKnRoaXMuYSt0aGlzLngwLGEueT1yKnRoaXMuYSt0aGlzLnkwLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGUsZj1hLngsZz1hLnksaD1mLXRoaXMueDAsaT1nLXRoaXMueTAsaj1pL3RoaXMuYSxrPWgvdGhpcy5hLGw9MSxtPTAsbj0wLG89MDtmb3IoYj0xOzY+PWI7YisrKWM9bCpqLW0qayxlPW0qaitsKmssbD1jLG09ZSxuPW4rdGhpcy5DX3JlW2JdKmwtdGhpcy5DX2ltW2JdKm0sbz1vK3RoaXMuQ19pbVtiXSpsK3RoaXMuQ19yZVtiXSptO2Zvcih2YXIgcD0wO3A8dGhpcy5pdGVyYXRpb25zO3ArKyl7dmFyIHEscixzPW4sdD1vLHU9aix2PWs7Zm9yKGI9Mjs2Pj1iO2IrKylxPXMqbi10Km8scj10Km4rcypvLHM9cSx0PXIsdSs9KGItMSkqKHRoaXMuQl9yZVtiXSpzLXRoaXMuQl9pbVtiXSp0KSx2Kz0oYi0xKSoodGhpcy5CX2ltW2JdKnMrdGhpcy5CX3JlW2JdKnQpO3M9MSx0PTA7dmFyIHc9dGhpcy5CX3JlWzFdLHg9dGhpcy5CX2ltWzFdO2ZvcihiPTI7Nj49YjtiKyspcT1zKm4tdCpvLHI9dCpuK3MqbyxzPXEsdD1yLHcrPWIqKHRoaXMuQl9yZVtiXSpzLXRoaXMuQl9pbVtiXSp0KSx4Kz1iKih0aGlzLkJfaW1bYl0qcyt0aGlzLkJfcmVbYl0qdCk7dmFyIHk9dyp3K3gqeDtuPSh1Kncrdip4KS95LG89KHYqdy11KngpL3l9dmFyIHo9bixBPW8sQj0xLEM9MDtmb3IoYj0xOzk+PWI7YisrKUIqPXosQys9dGhpcy5EW2JdKkI7dmFyIEQ9dGhpcy5sYXQwK0MqZCoxZTUsRT10aGlzLmxvbmcwK0E7cmV0dXJuIGEueD1FLGEueT1ELGF9LGMubmFtZXM9W1wiTmV3X1plYWxhbmRfTWFwX0dyaWRcIixcIm56bWdcIl19LHt9XSw1NTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vdHNmbnpcIiksZT1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZj1hKFwiLi4vY29tbW9uL3BoaTJ6XCIpLGc9TWF0aC5QSS8yLGg9TWF0aC5QSS80LGk9MWUtMTA7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5ub19vZmY9dGhpcy5ub19vZmZ8fCExLHRoaXMubm9fcm90PXRoaXMubm9fcm90fHwhMSxpc05hTih0aGlzLmswKSYmKHRoaXMuazA9MSk7dmFyIGE9TWF0aC5zaW4odGhpcy5sYXQwKSxiPU1hdGguY29zKHRoaXMubGF0MCksYz10aGlzLmUqYTt0aGlzLmJsPU1hdGguc3FydCgxK3RoaXMuZXMvKDEtdGhpcy5lcykqTWF0aC5wb3coYiw0KSksdGhpcy5hbD10aGlzLmEqdGhpcy5ibCp0aGlzLmswKk1hdGguc3FydCgxLXRoaXMuZXMpLygxLWMqYyk7dmFyIGY9ZCh0aGlzLmUsdGhpcy5sYXQwLGEpLGc9dGhpcy5ibC9iKk1hdGguc3FydCgoMS10aGlzLmVzKS8oMS1jKmMpKTsxPmcqZyYmKGc9MSk7dmFyIGgsaTtpZihpc05hTih0aGlzLmxvbmdjKSl7dmFyIGo9ZCh0aGlzLmUsdGhpcy5sYXQxLE1hdGguc2luKHRoaXMubGF0MSkpLGs9ZCh0aGlzLmUsdGhpcy5sYXQyLE1hdGguc2luKHRoaXMubGF0MikpO3RoaXMuZWw9dGhpcy5sYXQwPj0wPyhnK01hdGguc3FydChnKmctMSkpKk1hdGgucG93KGYsdGhpcy5ibCk6KGctTWF0aC5zcXJ0KGcqZy0xKSkqTWF0aC5wb3coZix0aGlzLmJsKTt2YXIgbD1NYXRoLnBvdyhqLHRoaXMuYmwpLG09TWF0aC5wb3coayx0aGlzLmJsKTtoPXRoaXMuZWwvbCxpPS41KihoLTEvaCk7dmFyIG49KHRoaXMuZWwqdGhpcy5lbC1tKmwpLyh0aGlzLmVsKnRoaXMuZWwrbSpsKSxvPShtLWwpLyhtK2wpLHA9ZSh0aGlzLmxvbmcxLXRoaXMubG9uZzIpO3RoaXMubG9uZzA9LjUqKHRoaXMubG9uZzErdGhpcy5sb25nMiktTWF0aC5hdGFuKG4qTWF0aC50YW4oLjUqdGhpcy5ibCpwKS9vKS90aGlzLmJsLHRoaXMubG9uZzA9ZSh0aGlzLmxvbmcwKTt2YXIgcT1lKHRoaXMubG9uZzEtdGhpcy5sb25nMCk7dGhpcy5nYW1tYTA9TWF0aC5hdGFuKE1hdGguc2luKHRoaXMuYmwqcSkvaSksdGhpcy5hbHBoYT1NYXRoLmFzaW4oZypNYXRoLnNpbih0aGlzLmdhbW1hMCkpfWVsc2UgaD10aGlzLmxhdDA+PTA/ZytNYXRoLnNxcnQoZypnLTEpOmctTWF0aC5zcXJ0KGcqZy0xKSx0aGlzLmVsPWgqTWF0aC5wb3coZix0aGlzLmJsKSxpPS41KihoLTEvaCksdGhpcy5nYW1tYTA9TWF0aC5hc2luKE1hdGguc2luKHRoaXMuYWxwaGEpL2cpLHRoaXMubG9uZzA9dGhpcy5sb25nYy1NYXRoLmFzaW4oaSpNYXRoLnRhbih0aGlzLmdhbW1hMCkpL3RoaXMuYmw7dGhpcy51Yz10aGlzLm5vX29mZj8wOnRoaXMubGF0MD49MD90aGlzLmFsL3RoaXMuYmwqTWF0aC5hdGFuMihNYXRoLnNxcnQoZypnLTEpLE1hdGguY29zKHRoaXMuYWxwaGEpKTotMSp0aGlzLmFsL3RoaXMuYmwqTWF0aC5hdGFuMihNYXRoLnNxcnQoZypnLTEpLE1hdGguY29zKHRoaXMuYWxwaGEpKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZixqPWEueCxrPWEueSxsPWUoai10aGlzLmxvbmcwKTtpZihNYXRoLmFicyhNYXRoLmFicyhrKS1nKTw9aSlmPWs+MD8tMToxLGM9dGhpcy5hbC90aGlzLmJsKk1hdGgubG9nKE1hdGgudGFuKGgrZip0aGlzLmdhbW1hMCouNSkpLGI9LTEqZipnKnRoaXMuYWwvdGhpcy5ibDtlbHNle3ZhciBtPWQodGhpcy5lLGssTWF0aC5zaW4oaykpLG49dGhpcy5lbC9NYXRoLnBvdyhtLHRoaXMuYmwpLG89LjUqKG4tMS9uKSxwPS41KihuKzEvbikscT1NYXRoLnNpbih0aGlzLmJsKmwpLHI9KG8qTWF0aC5zaW4odGhpcy5nYW1tYTApLXEqTWF0aC5jb3ModGhpcy5nYW1tYTApKS9wO2M9TWF0aC5hYnMoTWF0aC5hYnMociktMSk8PWk/TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOi41KnRoaXMuYWwqTWF0aC5sb2coKDEtcikvKDErcikpL3RoaXMuYmwsYj1NYXRoLmFicyhNYXRoLmNvcyh0aGlzLmJsKmwpKTw9aT90aGlzLmFsKnRoaXMuYmwqbDp0aGlzLmFsKk1hdGguYXRhbjIobypNYXRoLmNvcyh0aGlzLmdhbW1hMCkrcSpNYXRoLnNpbih0aGlzLmdhbW1hMCksTWF0aC5jb3ModGhpcy5ibCpsKSkvdGhpcy5ibH1yZXR1cm4gdGhpcy5ub19yb3Q/KGEueD10aGlzLngwK2IsYS55PXRoaXMueTArYyk6KGItPXRoaXMudWMsYS54PXRoaXMueDArYypNYXRoLmNvcyh0aGlzLmFscGhhKStiKk1hdGguc2luKHRoaXMuYWxwaGEpLGEueT10aGlzLnkwK2IqTWF0aC5jb3ModGhpcy5hbHBoYSktYypNYXRoLnNpbih0aGlzLmFscGhhKSksYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGM7dGhpcy5ub19yb3Q/KGM9YS55LXRoaXMueTAsYj1hLngtdGhpcy54MCk6KGM9KGEueC10aGlzLngwKSpNYXRoLmNvcyh0aGlzLmFscGhhKS0oYS55LXRoaXMueTApKk1hdGguc2luKHRoaXMuYWxwaGEpLGI9KGEueS10aGlzLnkwKSpNYXRoLmNvcyh0aGlzLmFscGhhKSsoYS54LXRoaXMueDApKk1hdGguc2luKHRoaXMuYWxwaGEpLGIrPXRoaXMudWMpO3ZhciBkPU1hdGguZXhwKC0xKnRoaXMuYmwqYy90aGlzLmFsKSxoPS41KihkLTEvZCksaj0uNSooZCsxL2QpLGs9TWF0aC5zaW4odGhpcy5ibCpiL3RoaXMuYWwpLGw9KGsqTWF0aC5jb3ModGhpcy5nYW1tYTApK2gqTWF0aC5zaW4odGhpcy5nYW1tYTApKS9qLG09TWF0aC5wb3codGhpcy5lbC9NYXRoLnNxcnQoKDErbCkvKDEtbCkpLDEvdGhpcy5ibCk7cmV0dXJuIE1hdGguYWJzKGwtMSk8aT8oYS54PXRoaXMubG9uZzAsYS55PWcpOk1hdGguYWJzKGwrMSk8aT8oYS54PXRoaXMubG9uZzAsYS55PS0xKmcpOihhLnk9Zih0aGlzLmUsbSksYS54PWUodGhpcy5sb25nMC1NYXRoLmF0YW4yKGgqTWF0aC5jb3ModGhpcy5nYW1tYTApLWsqTWF0aC5zaW4odGhpcy5nYW1tYTApLE1hdGguY29zKHRoaXMuYmwqYi90aGlzLmFsKSkvdGhpcy5ibCkpLGF9LGMubmFtZXM9W1wiSG90aW5lX09ibGlxdWVfTWVyY2F0b3JcIixcIkhvdGluZSBPYmxpcXVlIE1lcmNhdG9yXCIsXCJIb3RpbmVfT2JsaXF1ZV9NZXJjYXRvcl9BemltdXRoX05hdHVyYWxfT3JpZ2luXCIsXCJIb3RpbmVfT2JsaXF1ZV9NZXJjYXRvcl9BemltdXRoX0NlbnRlclwiLFwib21lcmNcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9waGkyelwiOjE2LFwiLi4vY29tbW9uL3RzZm56XCI6MjR9XSw1NjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vZTBmblwiKSxlPWEoXCIuLi9jb21tb24vZTFmblwiKSxmPWEoXCIuLi9jb21tb24vZTJmblwiKSxnPWEoXCIuLi9jb21tb24vZTNmblwiKSxoPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxpPWEoXCIuLi9jb21tb24vYWRqdXN0X2xhdFwiKSxqPWEoXCIuLi9jb21tb24vbWxmblwiKSxrPTFlLTEwLGw9YShcIi4uL2NvbW1vbi9nTlwiKSxtPTIwO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMudGVtcD10aGlzLmIvdGhpcy5hLHRoaXMuZXM9MS1NYXRoLnBvdyh0aGlzLnRlbXAsMiksdGhpcy5lPU1hdGguc3FydCh0aGlzLmVzKSx0aGlzLmUwPWQodGhpcy5lcyksdGhpcy5lMT1lKHRoaXMuZXMpLHRoaXMuZTI9Zih0aGlzLmVzKSx0aGlzLmUzPWcodGhpcy5lcyksdGhpcy5tbDA9dGhpcy5hKmoodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyx0aGlzLmxhdDApfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGU9YS54LGY9YS55LGc9aChlLXRoaXMubG9uZzApO2lmKGQ9ZypNYXRoLnNpbihmKSx0aGlzLnNwaGVyZSlNYXRoLmFicyhmKTw9az8oYj10aGlzLmEqZyxjPS0xKnRoaXMuYSp0aGlzLmxhdDApOihiPXRoaXMuYSpNYXRoLnNpbihkKS9NYXRoLnRhbihmKSxjPXRoaXMuYSooaShmLXRoaXMubGF0MCkrKDEtTWF0aC5jb3MoZCkpL01hdGgudGFuKGYpKSk7ZWxzZSBpZihNYXRoLmFicyhmKTw9ayliPXRoaXMuYSpnLGM9LTEqdGhpcy5tbDA7ZWxzZXt2YXIgbT1sKHRoaXMuYSx0aGlzLmUsTWF0aC5zaW4oZikpL01hdGgudGFuKGYpO2I9bSpNYXRoLnNpbihkKSxjPXRoaXMuYSpqKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsZiktdGhpcy5tbDArbSooMS1NYXRoLmNvcyhkKSl9cmV0dXJuIGEueD1iK3RoaXMueDAsYS55PWMrdGhpcy55MCxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGksbCxuO2lmKGQ9YS54LXRoaXMueDAsZT1hLnktdGhpcy55MCx0aGlzLnNwaGVyZSlpZihNYXRoLmFicyhlK3RoaXMuYSp0aGlzLmxhdDApPD1rKWI9aChkL3RoaXMuYSt0aGlzLmxvbmcwKSxjPTA7ZWxzZXtnPXRoaXMubGF0MCtlL3RoaXMuYSxpPWQqZC90aGlzLmEvdGhpcy5hK2cqZyxsPWc7dmFyIG87Zm9yKGY9bTtmOy0tZilpZihvPU1hdGgudGFuKGwpLG49LTEqKGcqKGwqbysxKS1sLS41KihsKmwraSkqbykvKChsLWcpL28tMSksbCs9bixNYXRoLmFicyhuKTw9ayl7Yz1sO2JyZWFrfWI9aCh0aGlzLmxvbmcwK01hdGguYXNpbihkKk1hdGgudGFuKGwpL3RoaXMuYSkvTWF0aC5zaW4oYykpfWVsc2UgaWYoTWF0aC5hYnMoZSt0aGlzLm1sMCk8PWspYz0wLGI9aCh0aGlzLmxvbmcwK2QvdGhpcy5hKTtlbHNle2c9KHRoaXMubWwwK2UpL3RoaXMuYSxpPWQqZC90aGlzLmEvdGhpcy5hK2cqZyxsPWc7dmFyIHAscSxyLHMsdDtmb3IoZj1tO2Y7LS1mKWlmKHQ9dGhpcy5lKk1hdGguc2luKGwpLHA9TWF0aC5zcXJ0KDEtdCp0KSpNYXRoLnRhbihsKSxxPXRoaXMuYSpqKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsbCkscj10aGlzLmUwLTIqdGhpcy5lMSpNYXRoLmNvcygyKmwpKzQqdGhpcy5lMipNYXRoLmNvcyg0KmwpLTYqdGhpcy5lMypNYXRoLmNvcyg2KmwpLHM9cS90aGlzLmEsbj0oZyoocCpzKzEpLXMtLjUqcCoocypzK2kpKS8odGhpcy5lcypNYXRoLnNpbigyKmwpKihzKnMraS0yKmcqcykvKDQqcCkrKGctcykqKHAqci0yL01hdGguc2luKDIqbCkpLXIpLGwtPW4sTWF0aC5hYnMobik8PWspe2M9bDticmVha31wPU1hdGguc3FydCgxLXRoaXMuZXMqTWF0aC5wb3coTWF0aC5zaW4oYyksMikpKk1hdGgudGFuKGMpLGI9aCh0aGlzLmxvbmcwK01hdGguYXNpbihkKnAvdGhpcy5hKS9NYXRoLnNpbihjKSl9cmV0dXJuIGEueD1iLGEueT1jLGF9LGMubmFtZXM9W1wiUG9seWNvbmljXCIsXCJwb2x5XCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xhdFwiOjQsXCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vZTBmblwiOjcsXCIuLi9jb21tb24vZTFmblwiOjgsXCIuLi9jb21tb24vZTJmblwiOjksXCIuLi9jb21tb24vZTNmblwiOjEwLFwiLi4vY29tbW9uL2dOXCI6MTEsXCIuLi9jb21tb24vbWxmblwiOjE0fV0sNTc6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZT1hKFwiLi4vY29tbW9uL2FkanVzdF9sYXRcIiksZj1hKFwiLi4vY29tbW9uL3BqX2VuZm5cIiksZz0yMCxoPWEoXCIuLi9jb21tb24vcGpfbWxmblwiKSxpPWEoXCIuLi9jb21tb24vcGpfaW52X21sZm5cIiksaj1NYXRoLlBJLzIsaz0xZS0xMCxsPWEoXCIuLi9jb21tb24vYXNpbnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zcGhlcmU/KHRoaXMubj0xLHRoaXMubT0wLHRoaXMuZXM9MCx0aGlzLkNfeT1NYXRoLnNxcnQoKHRoaXMubSsxKS90aGlzLm4pLHRoaXMuQ194PXRoaXMuQ195Lyh0aGlzLm0rMSkpOnRoaXMuZW49Zih0aGlzLmVzKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZT1hLngsZj1hLnk7aWYoZT1kKGUtdGhpcy5sb25nMCksdGhpcy5zcGhlcmUpe2lmKHRoaXMubSlmb3IodmFyIGk9dGhpcy5uKk1hdGguc2luKGYpLGo9ZztqOy0tail7dmFyIGw9KHRoaXMubSpmK01hdGguc2luKGYpLWkpLyh0aGlzLm0rTWF0aC5jb3MoZikpO2lmKGYtPWwsTWF0aC5hYnMobCk8aylicmVha31lbHNlIGY9MSE9PXRoaXMubj9NYXRoLmFzaW4odGhpcy5uKk1hdGguc2luKGYpKTpmO2I9dGhpcy5hKnRoaXMuQ194KmUqKHRoaXMubStNYXRoLmNvcyhmKSksYz10aGlzLmEqdGhpcy5DX3kqZn1lbHNle3ZhciBtPU1hdGguc2luKGYpLG49TWF0aC5jb3MoZik7Yz10aGlzLmEqaChmLG0sbix0aGlzLmVuKSxiPXRoaXMuYSplKm4vTWF0aC5zcXJ0KDEtdGhpcy5lcyptKm0pfXJldHVybiBhLng9YixhLnk9YyxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYyxmLGc7cmV0dXJuIGEueC09dGhpcy54MCxmPWEueC90aGlzLmEsYS55LT10aGlzLnkwLGI9YS55L3RoaXMuYSx0aGlzLnNwaGVyZT8oYi89dGhpcy5DX3ksZi89dGhpcy5DX3gqKHRoaXMubStNYXRoLmNvcyhiKSksdGhpcy5tP2I9bCgodGhpcy5tKmIrTWF0aC5zaW4oYikpL3RoaXMubik6MSE9PXRoaXMubiYmKGI9bChNYXRoLnNpbihiKS90aGlzLm4pKSxmPWQoZit0aGlzLmxvbmcwKSxiPWUoYikpOihiPWkoYS55L3RoaXMuYSx0aGlzLmVzLHRoaXMuZW4pLGc9TWF0aC5hYnMoYiksaj5nPyhnPU1hdGguc2luKGIpLGM9dGhpcy5sb25nMCthLngqTWF0aC5zcXJ0KDEtdGhpcy5lcypnKmcpLyh0aGlzLmEqTWF0aC5jb3MoYikpLGY9ZChjKSk6aj5nLWsmJihmPXRoaXMubG9uZzApKSxhLng9ZixhLnk9YixhfSxjLm5hbWVzPVtcIlNpbnVzb2lkYWxcIixcInNpbnVcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbGF0XCI6NCxcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9hc2luelwiOjYsXCIuLi9jb21tb24vcGpfZW5mblwiOjE3LFwiLi4vY29tbW9uL3BqX2ludl9tbGZuXCI6MTgsXCIuLi9jb21tb24vcGpfbWxmblwiOjE5fV0sNTg6W2Z1bmN0aW9uKGEsYixjKXtjLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxhdDA7dGhpcy5sYW1iZGEwPXRoaXMubG9uZzA7dmFyIGI9TWF0aC5zaW4oYSksYz10aGlzLmEsZD10aGlzLnJmLGU9MS9kLGY9MiplLU1hdGgucG93KGUsMiksZz10aGlzLmU9TWF0aC5zcXJ0KGYpO3RoaXMuUj10aGlzLmswKmMqTWF0aC5zcXJ0KDEtZikvKDEtZipNYXRoLnBvdyhiLDIpKSx0aGlzLmFscGhhPU1hdGguc3FydCgxK2YvKDEtZikqTWF0aC5wb3coTWF0aC5jb3MoYSksNCkpLHRoaXMuYjA9TWF0aC5hc2luKGIvdGhpcy5hbHBoYSk7dmFyIGg9TWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSS80K3RoaXMuYjAvMikpLGk9TWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSS80K2EvMikpLGo9TWF0aC5sb2coKDErZypiKS8oMS1nKmIpKTt0aGlzLks9aC10aGlzLmFscGhhKmkrdGhpcy5hbHBoYSpnLzIqan0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiPU1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkvNC1hLnkvMikpLGM9dGhpcy5lLzIqTWF0aC5sb2coKDErdGhpcy5lKk1hdGguc2luKGEueSkpLygxLXRoaXMuZSpNYXRoLnNpbihhLnkpKSksZD0tdGhpcy5hbHBoYSooYitjKSt0aGlzLkssZT0yKihNYXRoLmF0YW4oTWF0aC5leHAoZCkpLU1hdGguUEkvNCksZj10aGlzLmFscGhhKihhLngtdGhpcy5sYW1iZGEwKSxnPU1hdGguYXRhbihNYXRoLnNpbihmKS8oTWF0aC5zaW4odGhpcy5iMCkqTWF0aC50YW4oZSkrTWF0aC5jb3ModGhpcy5iMCkqTWF0aC5jb3MoZikpKSxoPU1hdGguYXNpbihNYXRoLmNvcyh0aGlzLmIwKSpNYXRoLnNpbihlKS1NYXRoLnNpbih0aGlzLmIwKSpNYXRoLmNvcyhlKSpNYXRoLmNvcyhmKSk7cmV0dXJuIGEueT10aGlzLlIvMipNYXRoLmxvZygoMStNYXRoLnNpbihoKSkvKDEtTWF0aC5zaW4oaCkpKSt0aGlzLnkwLGEueD10aGlzLlIqZyt0aGlzLngwLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9YS54LXRoaXMueDAsYz1hLnktdGhpcy55MCxkPWIvdGhpcy5SLGU9MiooTWF0aC5hdGFuKE1hdGguZXhwKGMvdGhpcy5SKSktTWF0aC5QSS80KSxmPU1hdGguYXNpbihNYXRoLmNvcyh0aGlzLmIwKSpNYXRoLnNpbihlKStNYXRoLnNpbih0aGlzLmIwKSpNYXRoLmNvcyhlKSpNYXRoLmNvcyhkKSksZz1NYXRoLmF0YW4oTWF0aC5zaW4oZCkvKE1hdGguY29zKHRoaXMuYjApKk1hdGguY29zKGQpLU1hdGguc2luKHRoaXMuYjApKk1hdGgudGFuKGUpKSksaD10aGlzLmxhbWJkYTArZy90aGlzLmFscGhhLGk9MCxqPWYsaz0tMWUzLGw9MDtNYXRoLmFicyhqLWspPjFlLTc7KXtpZigrK2w+MjApcmV0dXJuO2k9MS90aGlzLmFscGhhKihNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJLzQrZi8yKSktdGhpcy5LKSt0aGlzLmUqTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSS80K01hdGguYXNpbih0aGlzLmUqTWF0aC5zaW4oaikpLzIpKSxrPWosaj0yKk1hdGguYXRhbihNYXRoLmV4cChpKSktTWF0aC5QSS8yfXJldHVybiBhLng9aCxhLnk9aixhfSxjLm5hbWVzPVtcInNvbWVyY1wiXX0se31dLDU5OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWF0aC5QSS8yLGU9MWUtMTAsZj1hKFwiLi4vY29tbW9uL3NpZ25cIiksZz1hKFwiLi4vY29tbW9uL21zZm56XCIpLGg9YShcIi4uL2NvbW1vbi90c2ZuelwiKSxpPWEoXCIuLi9jb21tb24vcGhpMnpcIiksaj1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIik7Yy5zc2ZuXz1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIqPWMsTWF0aC50YW4oLjUqKGQrYSkpKk1hdGgucG93KCgxLWIpLygxK2IpLC41KmMpfSxjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLmNvc2xhdDA9TWF0aC5jb3ModGhpcy5sYXQwKSx0aGlzLnNpbmxhdDA9TWF0aC5zaW4odGhpcy5sYXQwKSx0aGlzLnNwaGVyZT8xPT09dGhpcy5rMCYmIWlzTmFOKHRoaXMubGF0X3RzKSYmTWF0aC5hYnModGhpcy5jb3NsYXQwKTw9ZSYmKHRoaXMuazA9LjUqKDErZih0aGlzLmxhdDApKk1hdGguc2luKHRoaXMubGF0X3RzKSkpOihNYXRoLmFicyh0aGlzLmNvc2xhdDApPD1lJiYodGhpcy5jb249dGhpcy5sYXQwPjA/MTotMSksdGhpcy5jb25zPU1hdGguc3FydChNYXRoLnBvdygxK3RoaXMuZSwxK3RoaXMuZSkqTWF0aC5wb3coMS10aGlzLmUsMS10aGlzLmUpKSwxPT09dGhpcy5rMCYmIWlzTmFOKHRoaXMubGF0X3RzKSYmTWF0aC5hYnModGhpcy5jb3NsYXQwKTw9ZSYmKHRoaXMuazA9LjUqdGhpcy5jb25zKmcodGhpcy5lLE1hdGguc2luKHRoaXMubGF0X3RzKSxNYXRoLmNvcyh0aGlzLmxhdF90cykpL2godGhpcy5lLHRoaXMuY29uKnRoaXMubGF0X3RzLHRoaXMuY29uKk1hdGguc2luKHRoaXMubGF0X3RzKSkpLHRoaXMubXMxPWcodGhpcy5lLHRoaXMuc2lubGF0MCx0aGlzLmNvc2xhdDApLHRoaXMuWDA9MipNYXRoLmF0YW4odGhpcy5zc2ZuXyh0aGlzLmxhdDAsdGhpcy5zaW5sYXQwLHRoaXMuZSkpLWQsdGhpcy5jb3NYMD1NYXRoLmNvcyh0aGlzLlgwKSx0aGlzLnNpblgwPU1hdGguc2luKHRoaXMuWDApKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZixnLGksayxsPWEueCxtPWEueSxuPU1hdGguc2luKG0pLG89TWF0aC5jb3MobSkscD1qKGwtdGhpcy5sb25nMCk7cmV0dXJuIE1hdGguYWJzKE1hdGguYWJzKGwtdGhpcy5sb25nMCktTWF0aC5QSSk8PWUmJk1hdGguYWJzKG0rdGhpcy5sYXQwKTw9ZT8oYS54PTAvMCxhLnk9MC8wLGEpOnRoaXMuc3BoZXJlPyhiPTIqdGhpcy5rMC8oMSt0aGlzLnNpbmxhdDAqbit0aGlzLmNvc2xhdDAqbypNYXRoLmNvcyhwKSksYS54PXRoaXMuYSpiKm8qTWF0aC5zaW4ocCkrdGhpcy54MCxhLnk9dGhpcy5hKmIqKHRoaXMuY29zbGF0MCpuLXRoaXMuc2lubGF0MCpvKk1hdGguY29zKHApKSt0aGlzLnkwLGEpOihjPTIqTWF0aC5hdGFuKHRoaXMuc3Nmbl8obSxuLHRoaXMuZSkpLWQsZz1NYXRoLmNvcyhjKSxmPU1hdGguc2luKGMpLE1hdGguYWJzKHRoaXMuY29zbGF0MCk8PWU/KGk9aCh0aGlzLmUsbSp0aGlzLmNvbix0aGlzLmNvbipuKSxrPTIqdGhpcy5hKnRoaXMuazAqaS90aGlzLmNvbnMsYS54PXRoaXMueDAraypNYXRoLnNpbihsLXRoaXMubG9uZzApLGEueT10aGlzLnkwLXRoaXMuY29uKmsqTWF0aC5jb3MobC10aGlzLmxvbmcwKSxhKTooTWF0aC5hYnModGhpcy5zaW5sYXQwKTxlPyhiPTIqdGhpcy5hKnRoaXMuazAvKDErZypNYXRoLmNvcyhwKSksYS55PWIqZik6KGI9Mip0aGlzLmEqdGhpcy5rMCp0aGlzLm1zMS8odGhpcy5jb3NYMCooMSt0aGlzLnNpblgwKmYrdGhpcy5jb3NYMCpnKk1hdGguY29zKHApKSksYS55PWIqKHRoaXMuY29zWDAqZi10aGlzLnNpblgwKmcqTWF0aC5jb3MocCkpK3RoaXMueTApLGEueD1iKmcqTWF0aC5zaW4ocCkrdGhpcy54MCxhKSl9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXthLngtPXRoaXMueDAsYS55LT10aGlzLnkwO3ZhciBiLGMsZixnLGgsaz1NYXRoLnNxcnQoYS54KmEueCthLnkqYS55KTtpZih0aGlzLnNwaGVyZSl7dmFyIGw9MipNYXRoLmF0YW4oay8oLjUqdGhpcy5hKnRoaXMuazApKTtyZXR1cm4gYj10aGlzLmxvbmcwLGM9dGhpcy5sYXQwLGU+PWs/KGEueD1iLGEueT1jLGEpOihjPU1hdGguYXNpbihNYXRoLmNvcyhsKSp0aGlzLnNpbmxhdDArYS55Kk1hdGguc2luKGwpKnRoaXMuY29zbGF0MC9rKSxiPWooTWF0aC5hYnModGhpcy5jb3NsYXQwKTxlP3RoaXMubGF0MD4wP3RoaXMubG9uZzArTWF0aC5hdGFuMihhLngsLTEqYS55KTp0aGlzLmxvbmcwK01hdGguYXRhbjIoYS54LGEueSk6dGhpcy5sb25nMCtNYXRoLmF0YW4yKGEueCpNYXRoLnNpbihsKSxrKnRoaXMuY29zbGF0MCpNYXRoLmNvcyhsKS1hLnkqdGhpcy5zaW5sYXQwKk1hdGguc2luKGwpKSksYS54PWIsYS55PWMsYSl9aWYoTWF0aC5hYnModGhpcy5jb3NsYXQwKTw9ZSl7aWYoZT49aylyZXR1cm4gYz10aGlzLmxhdDAsYj10aGlzLmxvbmcwLGEueD1iLGEueT1jLGE7YS54Kj10aGlzLmNvbixhLnkqPXRoaXMuY29uLGY9ayp0aGlzLmNvbnMvKDIqdGhpcy5hKnRoaXMuazApLGM9dGhpcy5jb24qaSh0aGlzLmUsZiksYj10aGlzLmNvbipqKHRoaXMuY29uKnRoaXMubG9uZzArTWF0aC5hdGFuMihhLngsLTEqYS55KSl9ZWxzZSBnPTIqTWF0aC5hdGFuKGsqdGhpcy5jb3NYMC8oMip0aGlzLmEqdGhpcy5rMCp0aGlzLm1zMSkpLGI9dGhpcy5sb25nMCxlPj1rP2g9dGhpcy5YMDooaD1NYXRoLmFzaW4oTWF0aC5jb3MoZykqdGhpcy5zaW5YMCthLnkqTWF0aC5zaW4oZykqdGhpcy5jb3NYMC9rKSxiPWoodGhpcy5sb25nMCtNYXRoLmF0YW4yKGEueCpNYXRoLnNpbihnKSxrKnRoaXMuY29zWDAqTWF0aC5jb3MoZyktYS55KnRoaXMuc2luWDAqTWF0aC5zaW4oZykpKSksYz0tMSppKHRoaXMuZSxNYXRoLnRhbiguNSooZCtoKSkpO3JldHVybiBhLng9YixhLnk9YyxhfSxjLm5hbWVzPVtcInN0ZXJlXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vbXNmbnpcIjoxNSxcIi4uL2NvbW1vbi9waGkyelwiOjE2LFwiLi4vY29tbW9uL3NpZ25cIjoyMSxcIi4uL2NvbW1vbi90c2ZuelwiOjI0fV0sNjA6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi9nYXVzc1wiKSxlPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKTtjLmluaXQ9ZnVuY3Rpb24oKXtkLmluaXQuYXBwbHkodGhpcyksdGhpcy5yYyYmKHRoaXMuc2luYzA9TWF0aC5zaW4odGhpcy5waGljMCksdGhpcy5jb3NjMD1NYXRoLmNvcyh0aGlzLnBoaWMwKSx0aGlzLlIyPTIqdGhpcy5yYyx0aGlzLnRpdGxlfHwodGhpcy50aXRsZT1cIk9ibGlxdWUgU3RlcmVvZ3JhcGhpYyBBbHRlcm5hdGl2ZVwiKSl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjLGYsZztyZXR1cm4gYS54PWUoYS54LXRoaXMubG9uZzApLGQuZm9yd2FyZC5hcHBseSh0aGlzLFthXSksYj1NYXRoLnNpbihhLnkpLGM9TWF0aC5jb3MoYS55KSxmPU1hdGguY29zKGEueCksZz10aGlzLmswKnRoaXMuUjIvKDErdGhpcy5zaW5jMCpiK3RoaXMuY29zYzAqYypmKSxhLng9ZypjKk1hdGguc2luKGEueCksYS55PWcqKHRoaXMuY29zYzAqYi10aGlzLnNpbmMwKmMqZiksYS54PXRoaXMuYSphLngrdGhpcy54MCxhLnk9dGhpcy5hKmEueSt0aGlzLnkwLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGYsZyxoO2lmKGEueD0oYS54LXRoaXMueDApL3RoaXMuYSxhLnk9KGEueS10aGlzLnkwKS90aGlzLmEsYS54Lz10aGlzLmswLGEueS89dGhpcy5rMCxoPU1hdGguc3FydChhLngqYS54K2EueSphLnkpKXt2YXIgaT0yKk1hdGguYXRhbjIoaCx0aGlzLlIyKTtiPU1hdGguc2luKGkpLGM9TWF0aC5jb3MoaSksZz1NYXRoLmFzaW4oYyp0aGlzLnNpbmMwK2EueSpiKnRoaXMuY29zYzAvaCksZj1NYXRoLmF0YW4yKGEueCpiLGgqdGhpcy5jb3NjMCpjLWEueSp0aGlzLnNpbmMwKmIpfWVsc2UgZz10aGlzLnBoaWMwLGY9MDtyZXR1cm4gYS54PWYsYS55PWcsZC5pbnZlcnNlLmFwcGx5KHRoaXMsW2FdKSxhLng9ZShhLngrdGhpcy5sb25nMCksYX0sYy5uYW1lcz1bXCJTdGVyZW9ncmFwaGljX05vcnRoX1BvbGVcIixcIk9ibGlxdWVfU3RlcmVvZ3JhcGhpY1wiLFwiUG9sYXJfU3RlcmVvZ3JhcGhpY1wiLFwic3RlcmVhXCIsXCJPYmxpcXVlIFN0ZXJlb2dyYXBoaWMgQWx0ZXJuYXRpdmVcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4vZ2F1c3NcIjo0NX1dLDYxOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9lMGZuXCIpLGU9YShcIi4uL2NvbW1vbi9lMWZuXCIpLGY9YShcIi4uL2NvbW1vbi9lMmZuXCIpLGc9YShcIi4uL2NvbW1vbi9lM2ZuXCIpLGg9YShcIi4uL2NvbW1vbi9tbGZuXCIpLGk9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGo9TWF0aC5QSS8yLGs9MWUtMTAsbD1hKFwiLi4vY29tbW9uL3NpZ25cIiksbT1hKFwiLi4vY29tbW9uL2FzaW56XCIpO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMuZTA9ZCh0aGlzLmVzKSx0aGlzLmUxPWUodGhpcy5lcyksdGhpcy5lMj1mKHRoaXMuZXMpLHRoaXMuZTM9Zyh0aGlzLmVzKSx0aGlzLm1sMD10aGlzLmEqaCh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MCl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLngsZj1hLnksZz1pKGUtdGhpcy5sb25nMCksaj1NYXRoLnNpbihmKSxrPU1hdGguY29zKGYpO2lmKHRoaXMuc3BoZXJlKXt2YXIgbD1rKk1hdGguc2luKGcpO2lmKE1hdGguYWJzKE1hdGguYWJzKGwpLTEpPDFlLTEwKXJldHVybiA5MztjPS41KnRoaXMuYSp0aGlzLmswKk1hdGgubG9nKCgxK2wpLygxLWwpKSxiPU1hdGguYWNvcyhrKk1hdGguY29zKGcpL01hdGguc3FydCgxLWwqbCkpLDA+ZiYmKGI9LWIpLGQ9dGhpcy5hKnRoaXMuazAqKGItdGhpcy5sYXQwKX1lbHNle3ZhciBtPWsqZyxuPU1hdGgucG93KG0sMiksbz10aGlzLmVwMipNYXRoLnBvdyhrLDIpLHA9TWF0aC50YW4oZikscT1NYXRoLnBvdyhwLDIpO2I9MS10aGlzLmVzKk1hdGgucG93KGosMik7dmFyIHI9dGhpcy5hL01hdGguc3FydChiKSxzPXRoaXMuYSpoKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsZik7Yz10aGlzLmswKnIqbSooMStuLzYqKDEtcStvK24vMjAqKDUtMTgqcStNYXRoLnBvdyhxLDIpKzcyKm8tNTgqdGhpcy5lcDIpKSkrdGhpcy54MCxkPXRoaXMuazAqKHMtdGhpcy5tbDArcipwKm4qKC41K24vMjQqKDUtcSs5Km8rNCpNYXRoLnBvdyhvLDIpK24vMzAqKDYxLTU4KnErTWF0aC5wb3cocSwyKSs2MDAqby0zMzAqdGhpcy5lcDIpKSkpK3RoaXMueTB9cmV0dXJuIGEueD1jLGEueT1kLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD02O2lmKHRoaXMuc3BoZXJlKXt2YXIgbj1NYXRoLmV4cChhLngvKHRoaXMuYSp0aGlzLmswKSksbz0uNSoobi0xL24pLHA9dGhpcy5sYXQwK2EueS8odGhpcy5hKnRoaXMuazApLHE9TWF0aC5jb3MocCk7Yj1NYXRoLnNxcnQoKDEtcSpxKS8oMStvKm8pKSxmPW0oYiksMD5wJiYoZj0tZiksZz0wPT09byYmMD09PXE/dGhpcy5sb25nMDppKE1hdGguYXRhbjIobyxxKSt0aGlzLmxvbmcwKX1lbHNle3ZhciByPWEueC10aGlzLngwLHM9YS55LXRoaXMueTA7Zm9yKGI9KHRoaXMubWwwK3MvdGhpcy5rMCkvdGhpcy5hLGM9YixlPTA7ITAmJihkPShiK3RoaXMuZTEqTWF0aC5zaW4oMipjKS10aGlzLmUyKk1hdGguc2luKDQqYykrdGhpcy5lMypNYXRoLnNpbig2KmMpKS90aGlzLmUwLWMsYys9ZCwhKE1hdGguYWJzKGQpPD1rKSk7ZSsrKWlmKGU+PWgpcmV0dXJuIDk1O2lmKE1hdGguYWJzKGMpPGope3ZhciB0PU1hdGguc2luKGMpLHU9TWF0aC5jb3MoYyksdj1NYXRoLnRhbihjKSx3PXRoaXMuZXAyKk1hdGgucG93KHUsMikseD1NYXRoLnBvdyh3LDIpLHk9TWF0aC5wb3codiwyKSx6PU1hdGgucG93KHksMik7Yj0xLXRoaXMuZXMqTWF0aC5wb3codCwyKTt2YXIgQT10aGlzLmEvTWF0aC5zcXJ0KGIpLEI9QSooMS10aGlzLmVzKS9iLEM9ci8oQSp0aGlzLmswKSxEPU1hdGgucG93KEMsMik7Zj1jLUEqdipEL0IqKC41LUQvMjQqKDUrMyp5KzEwKnctNCp4LTkqdGhpcy5lcDItRC8zMCooNjErOTAqeSsyOTgqdys0NSp6LTI1Mip0aGlzLmVwMi0zKngpKSksZz1pKHRoaXMubG9uZzArQyooMS1ELzYqKDErMip5K3ctRC8yMCooNS0yKncrMjgqeS0zKngrOCp0aGlzLmVwMisyNCp6KSkpL3UpfWVsc2UgZj1qKmwocyksZz10aGlzLmxvbmcwfXJldHVybiBhLng9ZyxhLnk9ZixhfSxjLm5hbWVzPVtcIlRyYW5zdmVyc2VfTWVyY2F0b3JcIixcIlRyYW5zdmVyc2UgTWVyY2F0b3JcIixcInRtZXJjXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vYXNpbnpcIjo2LFwiLi4vY29tbW9uL2UwZm5cIjo3LFwiLi4vY29tbW9uL2UxZm5cIjo4LFwiLi4vY29tbW9uL2UyZm5cIjo5LFwiLi4vY29tbW9uL2UzZm5cIjoxMCxcIi4uL2NvbW1vbi9tbGZuXCI6MTQsXCIuLi9jb21tb24vc2lnblwiOjIxfV0sNjI6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD0uMDE3NDUzMjkyNTE5OTQzMjk1LGU9YShcIi4vdG1lcmNcIik7Yy5kZXBlbmRzT249XCJ0bWVyY1wiLGMuaW5pdD1mdW5jdGlvbigpe3RoaXMuem9uZSYmKHRoaXMubGF0MD0wLHRoaXMubG9uZzA9KDYqTWF0aC5hYnModGhpcy56b25lKS0xODMpKmQsdGhpcy54MD01ZTUsdGhpcy55MD10aGlzLnV0bVNvdXRoPzFlNzowLHRoaXMuazA9Ljk5OTYsZS5pbml0LmFwcGx5KHRoaXMpLHRoaXMuZm9yd2FyZD1lLmZvcndhcmQsdGhpcy5pbnZlcnNlPWUuaW52ZXJzZSl9LGMubmFtZXM9W1wiVW5pdmVyc2FsIFRyYW5zdmVyc2UgTWVyY2F0b3IgU3lzdGVtXCIsXCJ1dG1cIl19LHtcIi4vdG1lcmNcIjo2MX1dLDYzOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGU9TWF0aC5QSS8yLGY9MWUtMTAsZz1hKFwiLi4vY29tbW9uL2FzaW56XCIpO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMuUj10aGlzLmF9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjLGg9YS54LGk9YS55LGo9ZChoLXRoaXMubG9uZzApO01hdGguYWJzKGkpPD1mJiYoYj10aGlzLngwK3RoaXMuUipqLGM9dGhpcy55MCk7dmFyIGs9ZygyKk1hdGguYWJzKGkvTWF0aC5QSSkpOyhNYXRoLmFicyhqKTw9Znx8TWF0aC5hYnMoTWF0aC5hYnMoaSktZSk8PWYpJiYoYj10aGlzLngwLGM9aT49MD90aGlzLnkwK01hdGguUEkqdGhpcy5SKk1hdGgudGFuKC41KmspOnRoaXMueTArTWF0aC5QSSp0aGlzLlIqLU1hdGgudGFuKC41KmspKTt2YXIgbD0uNSpNYXRoLmFicyhNYXRoLlBJL2otai9NYXRoLlBJKSxtPWwqbCxuPU1hdGguc2luKGspLG89TWF0aC5jb3MoaykscD1vLyhuK28tMSkscT1wKnAscj1wKigyL24tMSkscz1yKnIsdD1NYXRoLlBJKnRoaXMuUioobCoocC1zKStNYXRoLnNxcnQobSoocC1zKSoocC1zKS0ocyttKSoocS1zKSkpLyhzK20pOzA+aiYmKHQ9LXQpLGI9dGhpcy54MCt0O3ZhciB1PW0rcDtyZXR1cm4gdD1NYXRoLlBJKnRoaXMuUioocip1LWwqTWF0aC5zcXJ0KChzK20pKihtKzEpLXUqdSkpLyhzK20pLGM9aT49MD90aGlzLnkwK3Q6dGhpcy55MC10LGEueD1iLGEueT1jLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGUsZyxoLGksaixrLGwsbSxuLG8scDtyZXR1cm4gYS54LT10aGlzLngwLGEueS09dGhpcy55MCxuPU1hdGguUEkqdGhpcy5SLGU9YS54L24sZz1hLnkvbixoPWUqZStnKmcsaT0tTWF0aC5hYnMoZykqKDEraCksaj1pLTIqZypnK2UqZSxrPS0yKmkrMSsyKmcqZytoKmgscD1nKmcvaysoMipqKmoqai9rL2svay05Kmkqai9rL2spLzI3LGw9KGktaipqLzMvaykvayxtPTIqTWF0aC5zcXJ0KC1sLzMpLG49MypwL2wvbSxNYXRoLmFicyhuKT4xJiYobj1uPj0wPzE6LTEpLG89TWF0aC5hY29zKG4pLzMsYz1hLnk+PTA/KC1tKk1hdGguY29zKG8rTWF0aC5QSS8zKS1qLzMvaykqTWF0aC5QSTotKC1tKk1hdGguY29zKG8rTWF0aC5QSS8zKS1qLzMvaykqTWF0aC5QSSxiPU1hdGguYWJzKGUpPGY/dGhpcy5sb25nMDpkKHRoaXMubG9uZzArTWF0aC5QSSooaC0xK01hdGguc3FydCgxKzIqKGUqZS1nKmcpK2gqaCkpLzIvZSksYS54PWIsYS55PWMsYX0sYy5uYW1lcz1bXCJWYW5fZGVyX0dyaW50ZW5fSVwiLFwiVmFuRGVyR3JpbnRlblwiLFwidmFuZGdcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9hc2luelwiOjZ9XSw2NDpbZnVuY3Rpb24oYSxiKXt2YXIgYz0uMDE3NDUzMjkyNTE5OTQzMjk1LGQ9NTcuMjk1Nzc5NTEzMDgyMzIsZT0xLGY9MixnPWEoXCIuL2RhdHVtX3RyYW5zZm9ybVwiKSxoPWEoXCIuL2FkanVzdF9heGlzXCIpLGk9YShcIi4vUHJvalwiKSxqPWEoXCIuL2NvbW1vbi90b1BvaW50XCIpO2IuZXhwb3J0cz1mdW5jdGlvbiBrKGEsYixsKXtmdW5jdGlvbiBtKGEsYil7cmV0dXJuKGEuZGF0dW0uZGF0dW1fdHlwZT09PWV8fGEuZGF0dW0uZGF0dW1fdHlwZT09PWYpJiZcIldHUzg0XCIhPT1iLmRhdHVtQ29kZX12YXIgbjtyZXR1cm4gQXJyYXkuaXNBcnJheShsKSYmKGw9aihsKSksYS5kYXR1bSYmYi5kYXR1bSYmKG0oYSxiKXx8bShiLGEpKSYmKG49bmV3IGkoXCJXR1M4NFwiKSxrKGEsbixsKSxhPW4pLFwiZW51XCIhPT1hLmF4aXMmJmgoYSwhMSxsKSxcImxvbmdsYXRcIj09PWEucHJvak5hbWU/KGwueCo9YyxsLnkqPWMpOihhLnRvX21ldGVyJiYobC54Kj1hLnRvX21ldGVyLGwueSo9YS50b19tZXRlciksYS5pbnZlcnNlKGwpKSxhLmZyb21fZ3JlZW53aWNoJiYobC54Kz1hLmZyb21fZ3JlZW53aWNoKSxsPWcoYS5kYXR1bSxiLmRhdHVtLGwpLGIuZnJvbV9ncmVlbndpY2gmJihsLngtPWIuZnJvbV9ncmVlbndpY2gpLFwibG9uZ2xhdFwiPT09Yi5wcm9qTmFtZT8obC54Kj1kLGwueSo9ZCk6KGIuZm9yd2FyZChsKSxiLnRvX21ldGVyJiYobC54Lz1iLnRvX21ldGVyLGwueS89Yi50b19tZXRlcikpLFwiZW51XCIhPT1iLmF4aXMmJmgoYiwhMCxsKSxsfX0se1wiLi9Qcm9qXCI6MixcIi4vYWRqdXN0X2F4aXNcIjozLFwiLi9jb21tb24vdG9Qb2ludFwiOjIzLFwiLi9kYXR1bV90cmFuc2Zvcm1cIjozMH1dLDY1OltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe2FbYl09Yy5tYXAoZnVuY3Rpb24oYSl7dmFyIGI9e307cmV0dXJuIGQoYSxiKSxifSkucmVkdWNlKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGkoYSxiKX0se30pfWZ1bmN0aW9uIGQoYSxiKXt2YXIgZTtyZXR1cm4gQXJyYXkuaXNBcnJheShhKT8oZT1hLnNoaWZ0KCksXCJQQVJBTUVURVJcIj09PWUmJihlPWEuc2hpZnQoKSksMT09PWEubGVuZ3RoP0FycmF5LmlzQXJyYXkoYVswXSk/KGJbZV09e30sZChhWzBdLGJbZV0pKTpiW2VdPWFbMF06YS5sZW5ndGg/XCJUT1dHUzg0XCI9PT1lP2JbZV09YTooYltlXT17fSxbXCJVTklUXCIsXCJQUklNRU1cIixcIlZFUlRfREFUVU1cIl0uaW5kZXhPZihlKT4tMT8oYltlXT17bmFtZTphWzBdLnRvTG93ZXJDYXNlKCksY29udmVydDphWzFdfSwzPT09YS5sZW5ndGgmJihiW2VdLmF1dGg9YVsyXSkpOlwiU1BIRVJPSURcIj09PWU/KGJbZV09e25hbWU6YVswXSxhOmFbMV0scmY6YVsyXX0sND09PWEubGVuZ3RoJiYoYltlXS5hdXRoPWFbM10pKTpbXCJHRU9HQ1NcIixcIkdFT0NDU1wiLFwiREFUVU1cIixcIlZFUlRfQ1NcIixcIkNPTVBEX0NTXCIsXCJMT0NBTF9DU1wiLFwiRklUVEVEX0NTXCIsXCJMT0NBTF9EQVRVTVwiXS5pbmRleE9mKGUpPi0xPyhhWzBdPVtcIm5hbWVcIixhWzBdXSxjKGIsZSxhKSk6YS5ldmVyeShmdW5jdGlvbihhKXtyZXR1cm4gQXJyYXkuaXNBcnJheShhKX0pP2MoYixlLGEpOmQoYSxiW2VdKSk6YltlXT0hMCx2b2lkIDApOnZvaWQoYlthXT0hMCl9ZnVuY3Rpb24gZShhLGIpe3ZhciBjPWJbMF0sZD1iWzFdOyEoYyBpbiBhKSYmZCBpbiBhJiYoYVtjXT1hW2RdLDM9PT1iLmxlbmd0aCYmKGFbY109YlsyXShhW2NdKSkpfWZ1bmN0aW9uIGYoYSl7cmV0dXJuIGEqaH1mdW5jdGlvbiBnKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YS50b19tZXRlcnx8MTtyZXR1cm4gcGFyc2VGbG9hdChiLDEwKSpjfVwiR0VPR0NTXCI9PT1hLnR5cGU/YS5wcm9qTmFtZT1cImxvbmdsYXRcIjpcIkxPQ0FMX0NTXCI9PT1hLnR5cGU/KGEucHJvak5hbWU9XCJpZGVudGl0eVwiLGEubG9jYWw9ITApOmEucHJvak5hbWU9XCJvYmplY3RcIj09dHlwZW9mIGEuUFJPSkVDVElPTj9PYmplY3Qua2V5cyhhLlBST0pFQ1RJT04pWzBdOmEuUFJPSkVDVElPTixhLlVOSVQmJihhLnVuaXRzPWEuVU5JVC5uYW1lLnRvTG93ZXJDYXNlKCksXCJtZXRyZVwiPT09YS51bml0cyYmKGEudW5pdHM9XCJtZXRlclwiKSxhLlVOSVQuY29udmVydCYmKGEudG9fbWV0ZXI9cGFyc2VGbG9hdChhLlVOSVQuY29udmVydCwxMCkpKSxhLkdFT0dDUyYmKGEuZGF0dW1Db2RlPWEuR0VPR0NTLkRBVFVNP2EuR0VPR0NTLkRBVFVNLm5hbWUudG9Mb3dlckNhc2UoKTphLkdFT0dDUy5uYW1lLnRvTG93ZXJDYXNlKCksXCJkX1wiPT09YS5kYXR1bUNvZGUuc2xpY2UoMCwyKSYmKGEuZGF0dW1Db2RlPWEuZGF0dW1Db2RlLnNsaWNlKDIpKSwoXCJuZXdfemVhbGFuZF9nZW9kZXRpY19kYXR1bV8xOTQ5XCI9PT1hLmRhdHVtQ29kZXx8XCJuZXdfemVhbGFuZF8xOTQ5XCI9PT1hLmRhdHVtQ29kZSkmJihhLmRhdHVtQ29kZT1cIm56Z2Q0OVwiKSxcIndnc18xOTg0XCI9PT1hLmRhdHVtQ29kZSYmKFwiTWVyY2F0b3JfQXV4aWxpYXJ5X1NwaGVyZVwiPT09YS5QUk9KRUNUSU9OJiYoYS5zcGhlcmU9ITApLGEuZGF0dW1Db2RlPVwid2dzODRcIiksXCJfZmVycm9cIj09PWEuZGF0dW1Db2RlLnNsaWNlKC02KSYmKGEuZGF0dW1Db2RlPWEuZGF0dW1Db2RlLnNsaWNlKDAsLTYpKSxcIl9qYWthcnRhXCI9PT1hLmRhdHVtQ29kZS5zbGljZSgtOCkmJihhLmRhdHVtQ29kZT1hLmRhdHVtQ29kZS5zbGljZSgwLC04KSksfmEuZGF0dW1Db2RlLmluZGV4T2YoXCJiZWxnZVwiKSYmKGEuZGF0dW1Db2RlPVwicm5iNzJcIiksYS5HRU9HQ1MuREFUVU0mJmEuR0VPR0NTLkRBVFVNLlNQSEVST0lEJiYoYS5lbGxwcz1hLkdFT0dDUy5EQVRVTS5TUEhFUk9JRC5uYW1lLnJlcGxhY2UoXCJfMTlcIixcIlwiKS5yZXBsYWNlKC9bQ2NdbGFya2VcXF8xOC8sXCJjbHJrXCIpLFwiaW50ZXJuYXRpb25hbFwiPT09YS5lbGxwcy50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsMTMpJiYoYS5lbGxwcz1cImludGxcIiksYS5hPWEuR0VPR0NTLkRBVFVNLlNQSEVST0lELmEsYS5yZj1wYXJzZUZsb2F0KGEuR0VPR0NTLkRBVFVNLlNQSEVST0lELnJmLDEwKSksfmEuZGF0dW1Db2RlLmluZGV4T2YoXCJvc2diXzE5MzZcIikmJihhLmRhdHVtQ29kZT1cIm9zZ2IzNlwiKSksYS5iJiYhaXNGaW5pdGUoYS5iKSYmKGEuYj1hLmEpO1xudmFyIGM9ZnVuY3Rpb24oYil7cmV0dXJuIGUoYSxiKX0sZD1bW1wic3RhbmRhcmRfcGFyYWxsZWxfMVwiLFwiU3RhbmRhcmRfUGFyYWxsZWxfMVwiXSxbXCJzdGFuZGFyZF9wYXJhbGxlbF8yXCIsXCJTdGFuZGFyZF9QYXJhbGxlbF8yXCJdLFtcImZhbHNlX2Vhc3RpbmdcIixcIkZhbHNlX0Vhc3RpbmdcIl0sW1wiZmFsc2Vfbm9ydGhpbmdcIixcIkZhbHNlX05vcnRoaW5nXCJdLFtcImNlbnRyYWxfbWVyaWRpYW5cIixcIkNlbnRyYWxfTWVyaWRpYW5cIl0sW1wibGF0aXR1ZGVfb2Zfb3JpZ2luXCIsXCJMYXRpdHVkZV9PZl9PcmlnaW5cIl0sW1wic2NhbGVfZmFjdG9yXCIsXCJTY2FsZV9GYWN0b3JcIl0sW1wiazBcIixcInNjYWxlX2ZhY3RvclwiXSxbXCJsYXRpdHVkZV9vZl9jZW50ZXJcIixcIkxhdGl0dWRlX29mX2NlbnRlclwiXSxbXCJsYXQwXCIsXCJsYXRpdHVkZV9vZl9jZW50ZXJcIixmXSxbXCJsb25naXR1ZGVfb2ZfY2VudGVyXCIsXCJMb25naXR1ZGVfT2ZfQ2VudGVyXCJdLFtcImxvbmdjXCIsXCJsb25naXR1ZGVfb2ZfY2VudGVyXCIsZl0sW1wieDBcIixcImZhbHNlX2Vhc3RpbmdcIixiXSxbXCJ5MFwiLFwiZmFsc2Vfbm9ydGhpbmdcIixiXSxbXCJsb25nMFwiLFwiY2VudHJhbF9tZXJpZGlhblwiLGZdLFtcImxhdDBcIixcImxhdGl0dWRlX29mX29yaWdpblwiLGZdLFtcImxhdDBcIixcInN0YW5kYXJkX3BhcmFsbGVsXzFcIixmXSxbXCJsYXQxXCIsXCJzdGFuZGFyZF9wYXJhbGxlbF8xXCIsZl0sW1wibGF0MlwiLFwic3RhbmRhcmRfcGFyYWxsZWxfMlwiLGZdLFtcImFscGhhXCIsXCJhemltdXRoXCIsZl0sW1wic3JzQ29kZVwiLFwibmFtZVwiXV07ZC5mb3JFYWNoKGMpLGEubG9uZzB8fCFhLmxvbmdjfHxcIkFsYmVyc19Db25pY19FcXVhbF9BcmVhXCIhPT1hLlBST0pFQ1RJT04mJlwiTGFtYmVydF9BemltdXRoYWxfRXF1YWxfQXJlYVwiIT09YS5QUk9KRUNUSU9OfHwoYS5sb25nMD1hLmxvbmdjKX12YXIgaD0uMDE3NDUzMjkyNTE5OTQzMjk1LGk9YShcIi4vZXh0ZW5kXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjPUpTT04ucGFyc2UoKFwiLFwiK2EpLnJlcGxhY2UoL1xccypcXCxcXHMqKFtBLVpfMC05XSs/KShcXFspL2csJyxbXCIkMVwiLCcpLnNsaWNlKDEpLnJlcGxhY2UoL1xccypcXCxcXHMqKFtBLVpfMC05XSs/KVxcXS9nLCcsXCIkMVwiXScpKSxlPWMuc2hpZnQoKSxmPWMuc2hpZnQoKTtjLnVuc2hpZnQoW1wibmFtZVwiLGZdKSxjLnVuc2hpZnQoW1widHlwZVwiLGVdKSxjLnVuc2hpZnQoXCJvdXRwdXRcIik7dmFyIGg9e307cmV0dXJuIGQoYyxoKSxnKGgub3V0cHV0KSxpKGIsaC5vdXRwdXQpfX0se1wiLi9leHRlbmRcIjozM31dLDY2OltmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSooTWF0aC5QSS8xODApfWZ1bmN0aW9uIGUoYSl7cmV0dXJuIDE4MCooYS9NYXRoLlBJKX1mdW5jdGlvbiBmKGEpe3ZhciBiLGMsZSxmLGcsaSxqLGssbCxtPWEubGF0LG49YS5sb24sbz02Mzc4MTM3LHA9LjAwNjY5NDM4LHE9Ljk5OTYscj1kKG0pLHM9ZChuKTtsPU1hdGguZmxvb3IoKG4rMTgwKS82KSsxLDE4MD09PW4mJihsPTYwKSxtPj01NiYmNjQ+bSYmbj49MyYmMTI+biYmKGw9MzIpLG0+PTcyJiY4ND5tJiYobj49MCYmOT5uP2w9MzE6bj49OSYmMjE+bj9sPTMzOm4+PTIxJiYzMz5uP2w9MzU6bj49MzMmJjQyPm4mJihsPTM3KSksYj02KihsLTEpLTE4MCszLGs9ZChiKSxjPXAvKDEtcCksZT1vL01hdGguc3FydCgxLXAqTWF0aC5zaW4ocikqTWF0aC5zaW4ocikpLGY9TWF0aC50YW4ocikqTWF0aC50YW4ociksZz1jKk1hdGguY29zKHIpKk1hdGguY29zKHIpLGk9TWF0aC5jb3MocikqKHMtayksaj1vKigoMS1wLzQtMypwKnAvNjQtNSpwKnAqcC8yNTYpKnItKDMqcC84KzMqcCpwLzMyKzQ1KnAqcCpwLzEwMjQpKk1hdGguc2luKDIqcikrKDE1KnAqcC8yNTYrNDUqcCpwKnAvMTAyNCkqTWF0aC5zaW4oNCpyKS0zNSpwKnAqcC8zMDcyKk1hdGguc2luKDYqcikpO3ZhciB0PXEqZSooaSsoMS1mK2cpKmkqaSppLzYrKDUtMTgqZitmKmYrNzIqZy01OCpjKSppKmkqaSppKmkvMTIwKSs1ZTUsdT1xKihqK2UqTWF0aC50YW4ocikqKGkqaS8yKyg1LWYrOSpnKzQqZypnKSppKmkqaSppLzI0Kyg2MS01OCpmK2YqZis2MDAqZy0zMzAqYykqaSppKmkqaSppKmkvNzIwKSk7cmV0dXJuIDA+bSYmKHUrPTFlNykse25vcnRoaW5nOk1hdGgucm91bmQodSksZWFzdGluZzpNYXRoLnJvdW5kKHQpLHpvbmVOdW1iZXI6bCx6b25lTGV0dGVyOmgobSl9fWZ1bmN0aW9uIGcoYSl7dmFyIGI9YS5ub3J0aGluZyxjPWEuZWFzdGluZyxkPWEuem9uZUxldHRlcixmPWEuem9uZU51bWJlcjtpZigwPmZ8fGY+NjApcmV0dXJuIG51bGw7dmFyIGgsaSxqLGssbCxtLG4sbyxwLHEscj0uOTk5NixzPTYzNzgxMzcsdD0uMDA2Njk0MzgsdT0oMS1NYXRoLnNxcnQoMS10KSkvKDErTWF0aC5zcXJ0KDEtdCkpLHY9Yy01ZTUsdz1iO1wiTlwiPmQmJih3LT0xZTcpLG89NiooZi0xKS0xODArMyxoPXQvKDEtdCksbj13L3IscD1uLyhzKigxLXQvNC0zKnQqdC82NC01KnQqdCp0LzI1NikpLHE9cCsoMyp1LzItMjcqdSp1KnUvMzIpKk1hdGguc2luKDIqcCkrKDIxKnUqdS8xNi01NSp1KnUqdSp1LzMyKSpNYXRoLnNpbig0KnApKzE1MSp1KnUqdS85NipNYXRoLnNpbig2KnApLGk9cy9NYXRoLnNxcnQoMS10Kk1hdGguc2luKHEpKk1hdGguc2luKHEpKSxqPU1hdGgudGFuKHEpKk1hdGgudGFuKHEpLGs9aCpNYXRoLmNvcyhxKSpNYXRoLmNvcyhxKSxsPXMqKDEtdCkvTWF0aC5wb3coMS10Kk1hdGguc2luKHEpKk1hdGguc2luKHEpLDEuNSksbT12LyhpKnIpO3ZhciB4PXEtaSpNYXRoLnRhbihxKS9sKihtKm0vMi0oNSszKmorMTAqay00Kmsqay05KmgpKm0qbSptKm0vMjQrKDYxKzkwKmorMjk4KmsrNDUqaipqLTI1MipoLTMqayprKSptKm0qbSptKm0qbS83MjApO3g9ZSh4KTt2YXIgeT0obS0oMSsyKmoraykqbSptKm0vNisoNS0yKmsrMjgqai0zKmsqays4KmgrMjQqaipqKSptKm0qbSptKm0vMTIwKS9NYXRoLmNvcyhxKTt5PW8rZSh5KTt2YXIgejtpZihhLmFjY3VyYWN5KXt2YXIgQT1nKHtub3J0aGluZzphLm5vcnRoaW5nK2EuYWNjdXJhY3ksZWFzdGluZzphLmVhc3RpbmcrYS5hY2N1cmFjeSx6b25lTGV0dGVyOmEuem9uZUxldHRlcix6b25lTnVtYmVyOmEuem9uZU51bWJlcn0pO3o9e3RvcDpBLmxhdCxyaWdodDpBLmxvbixib3R0b206eCxsZWZ0Onl9fWVsc2Ugej17bGF0OngsbG9uOnl9O3JldHVybiB6fWZ1bmN0aW9uIGgoYSl7dmFyIGI9XCJaXCI7cmV0dXJuIDg0Pj1hJiZhPj03Mj9iPVwiWFwiOjcyPmEmJmE+PTY0P2I9XCJXXCI6NjQ+YSYmYT49NTY/Yj1cIlZcIjo1Nj5hJiZhPj00OD9iPVwiVVwiOjQ4PmEmJmE+PTQwP2I9XCJUXCI6NDA+YSYmYT49MzI/Yj1cIlNcIjozMj5hJiZhPj0yND9iPVwiUlwiOjI0PmEmJmE+PTE2P2I9XCJRXCI6MTY+YSYmYT49OD9iPVwiUFwiOjg+YSYmYT49MD9iPVwiTlwiOjA+YSYmYT49LTg/Yj1cIk1cIjotOD5hJiZhPj0tMTY/Yj1cIkxcIjotMTY+YSYmYT49LTI0P2I9XCJLXCI6LTI0PmEmJmE+PS0zMj9iPVwiSlwiOi0zMj5hJiZhPj0tNDA/Yj1cIkhcIjotNDA+YSYmYT49LTQ4P2I9XCJHXCI6LTQ4PmEmJmE+PS01Nj9iPVwiRlwiOi01Nj5hJiZhPj0tNjQ/Yj1cIkVcIjotNjQ+YSYmYT49LTcyP2I9XCJEXCI6LTcyPmEmJmE+PS04MCYmKGI9XCJDXCIpLGJ9ZnVuY3Rpb24gaShhLGIpe3ZhciBjPVwiXCIrYS5lYXN0aW5nLGQ9XCJcIithLm5vcnRoaW5nO3JldHVybiBhLnpvbmVOdW1iZXIrYS56b25lTGV0dGVyK2ooYS5lYXN0aW5nLGEubm9ydGhpbmcsYS56b25lTnVtYmVyKStjLnN1YnN0cihjLmxlbmd0aC01LGIpK2Quc3Vic3RyKGQubGVuZ3RoLTUsYil9ZnVuY3Rpb24gaihhLGIsYyl7dmFyIGQ9ayhjKSxlPU1hdGguZmxvb3IoYS8xZTUpLGY9TWF0aC5mbG9vcihiLzFlNSklMjA7cmV0dXJuIGwoZSxmLGQpfWZ1bmN0aW9uIGsoYSl7dmFyIGI9YSVxO3JldHVybiAwPT09YiYmKGI9cSksYn1mdW5jdGlvbiBsKGEsYixjKXt2YXIgZD1jLTEsZT1yLmNoYXJDb2RlQXQoZCksZj1zLmNoYXJDb2RlQXQoZCksZz1lK2EtMSxoPWYrYixpPSExO2c+eCYmKGc9Zy14K3QtMSxpPSEwKSwoZz09PXV8fHU+ZSYmZz51fHwoZz51fHx1PmUpJiZpKSYmZysrLChnPT09dnx8dj5lJiZnPnZ8fChnPnZ8fHY+ZSkmJmkpJiYoZysrLGc9PT11JiZnKyspLGc+eCYmKGc9Zy14K3QtMSksaD53PyhoPWgtdyt0LTEsaT0hMCk6aT0hMSwoaD09PXV8fHU+ZiYmaD51fHwoaD51fHx1PmYpJiZpKSYmaCsrLChoPT09dnx8dj5mJiZoPnZ8fChoPnZ8fHY+ZikmJmkpJiYoaCsrLGg9PT11JiZoKyspLGg+dyYmKGg9aC13K3QtMSk7dmFyIGo9U3RyaW5nLmZyb21DaGFyQ29kZShnKStTdHJpbmcuZnJvbUNoYXJDb2RlKGgpO3JldHVybiBqfWZ1bmN0aW9uIG0oYSl7aWYoYSYmMD09PWEubGVuZ3RoKXRocm93XCJNR1JTUG9pbnQgY292ZXJ0aW5nIGZyb20gbm90aGluZ1wiO2Zvcih2YXIgYixjPWEubGVuZ3RoLGQ9bnVsbCxlPVwiXCIsZj0wOyEvW0EtWl0vLnRlc3QoYj1hLmNoYXJBdChmKSk7KXtpZihmPj0yKXRocm93XCJNR1JTUG9pbnQgYmFkIGNvbnZlcnNpb24gZnJvbTogXCIrYTtlKz1iLGYrK312YXIgZz1wYXJzZUludChlLDEwKTtpZigwPT09Znx8ZiszPmMpdGhyb3dcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIithO3ZhciBoPWEuY2hhckF0KGYrKyk7aWYoXCJBXCI+PWh8fFwiQlwiPT09aHx8XCJZXCI9PT1ofHxoPj1cIlpcInx8XCJJXCI9PT1ofHxcIk9cIj09PWgpdGhyb3dcIk1HUlNQb2ludCB6b25lIGxldHRlciBcIitoK1wiIG5vdCBoYW5kbGVkOiBcIithO2Q9YS5zdWJzdHJpbmcoZixmKz0yKTtmb3IodmFyIGk9ayhnKSxqPW4oZC5jaGFyQXQoMCksaSksbD1vKGQuY2hhckF0KDEpLGkpO2w8cChoKTspbCs9MmU2O3ZhciBtPWMtZjtpZihtJTIhPT0wKXRocm93XCJNR1JTUG9pbnQgaGFzIHRvIGhhdmUgYW4gZXZlbiBudW1iZXIgXFxub2YgZGlnaXRzIGFmdGVyIHRoZSB6b25lIGxldHRlciBhbmQgdHdvIDEwMGttIGxldHRlcnMgLSBmcm9udCBcXG5oYWxmIGZvciBlYXN0aW5nIG1ldGVycywgc2Vjb25kIGhhbGYgZm9yIFxcbm5vcnRoaW5nIG1ldGVyc1wiK2E7dmFyIHEscixzLHQsdSx2PW0vMix3PTAseD0wO3JldHVybiB2PjAmJihxPTFlNS9NYXRoLnBvdygxMCx2KSxyPWEuc3Vic3RyaW5nKGYsZit2KSx3PXBhcnNlRmxvYXQocikqcSxzPWEuc3Vic3RyaW5nKGYrdikseD1wYXJzZUZsb2F0KHMpKnEpLHQ9dytqLHU9eCtsLHtlYXN0aW5nOnQsbm9ydGhpbmc6dSx6b25lTGV0dGVyOmgsem9uZU51bWJlcjpnLGFjY3VyYWN5OnF9fWZ1bmN0aW9uIG4oYSxiKXtmb3IodmFyIGM9ci5jaGFyQ29kZUF0KGItMSksZD0xZTUsZT0hMTtjIT09YS5jaGFyQ29kZUF0KDApOyl7aWYoYysrLGM9PT11JiZjKyssYz09PXYmJmMrKyxjPngpe2lmKGUpdGhyb3dcIkJhZCBjaGFyYWN0ZXI6IFwiK2E7Yz10LGU9ITB9ZCs9MWU1fXJldHVybiBkfWZ1bmN0aW9uIG8oYSxiKXtpZihhPlwiVlwiKXRocm93XCJNR1JTUG9pbnQgZ2l2ZW4gaW52YWxpZCBOb3J0aGluZyBcIithO2Zvcih2YXIgYz1zLmNoYXJDb2RlQXQoYi0xKSxkPTAsZT0hMTtjIT09YS5jaGFyQ29kZUF0KDApOyl7aWYoYysrLGM9PT11JiZjKyssYz09PXYmJmMrKyxjPncpe2lmKGUpdGhyb3dcIkJhZCBjaGFyYWN0ZXI6IFwiK2E7Yz10LGU9ITB9ZCs9MWU1fXJldHVybiBkfWZ1bmN0aW9uIHAoYSl7dmFyIGI7c3dpdGNoKGEpe2Nhc2VcIkNcIjpiPTExZTU7YnJlYWs7Y2FzZVwiRFwiOmI9MmU2O2JyZWFrO2Nhc2VcIkVcIjpiPTI4ZTU7YnJlYWs7Y2FzZVwiRlwiOmI9MzdlNTticmVhaztjYXNlXCJHXCI6Yj00NmU1O2JyZWFrO2Nhc2VcIkhcIjpiPTU1ZTU7YnJlYWs7Y2FzZVwiSlwiOmI9NjRlNTticmVhaztjYXNlXCJLXCI6Yj03M2U1O2JyZWFrO2Nhc2VcIkxcIjpiPTgyZTU7YnJlYWs7Y2FzZVwiTVwiOmI9OTFlNTticmVhaztjYXNlXCJOXCI6Yj0wO2JyZWFrO2Nhc2VcIlBcIjpiPThlNTticmVhaztjYXNlXCJRXCI6Yj0xN2U1O2JyZWFrO2Nhc2VcIlJcIjpiPTI2ZTU7YnJlYWs7Y2FzZVwiU1wiOmI9MzVlNTticmVhaztjYXNlXCJUXCI6Yj00NGU1O2JyZWFrO2Nhc2VcIlVcIjpiPTUzZTU7YnJlYWs7Y2FzZVwiVlwiOmI9NjJlNTticmVhaztjYXNlXCJXXCI6Yj03ZTY7YnJlYWs7Y2FzZVwiWFwiOmI9NzllNTticmVhaztkZWZhdWx0OmI9LTF9aWYoYj49MClyZXR1cm4gYjt0aHJvd1wiSW52YWxpZCB6b25lIGxldHRlcjogXCIrYX12YXIgcT02LHI9XCJBSlNBSlNcIixzPVwiQUZBRkFGXCIsdD02NSx1PTczLHY9Nzksdz04Nix4PTkwO2MuZm9yd2FyZD1mdW5jdGlvbihhLGIpe3JldHVybiBiPWJ8fDUsaShmKHtsYXQ6YVsxXSxsb246YVswXX0pLGIpfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGI9ZyhtKGEudG9VcHBlckNhc2UoKSkpO3JldHVybltiLmxlZnQsYi5ib3R0b20sYi5yaWdodCxiLnRvcF19LGMudG9Qb2ludD1mdW5jdGlvbihhKXt2YXIgYj1jLmludmVyc2UoYSk7cmV0dXJuWyhiWzJdK2JbMF0pLzIsKGJbM10rYlsxXSkvMl19fSx7fV0sNjc6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPXtuYW1lOlwicHJvajRcIix2ZXJzaW9uOlwiMi4yLjJcIixkZXNjcmlwdGlvbjpcIlByb2o0anMgaXMgYSBKYXZhU2NyaXB0IGxpYnJhcnkgdG8gdHJhbnNmb3JtIHBvaW50IGNvb3JkaW5hdGVzIGZyb20gb25lIGNvb3JkaW5hdGUgc3lzdGVtIHRvIGFub3RoZXIsIGluY2x1ZGluZyBkYXR1bSB0cmFuc2Zvcm1hdGlvbnMuXCIsbWFpbjpcImxpYi9pbmRleC5qc1wiLGRpcmVjdG9yaWVzOnt0ZXN0OlwidGVzdFwiLGRvYzpcImRvY3NcIn0sc2NyaXB0czp7dGVzdDpcIi4vbm9kZV9tb2R1bGVzL2lzdGFuYnVsL2xpYi9jbGkuanMgdGVzdCAuL25vZGVfbW9kdWxlcy9tb2NoYS9iaW4vX21vY2hhIHRlc3QvdGVzdC5qc1wifSxyZXBvc2l0b3J5Ont0eXBlOlwiZ2l0XCIsdXJsOlwiZ2l0Oi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMuZ2l0XCJ9LGF1dGhvcjpcIlwiLGxpY2Vuc2U6XCJNSVRcIixqYW06e21haW46XCJkaXN0L3Byb2o0LmpzXCIsaW5jbHVkZTpbXCJkaXN0L3Byb2o0LmpzXCIsXCJSRUFETUUubWRcIixcIkFVVEhPUlNcIixcIkxJQ0VOU0UubWRcIl19LGRldkRlcGVuZGVuY2llczp7XCJncnVudC1jbGlcIjpcIn4wLjEuMTNcIixncnVudDpcIn4wLjQuMlwiLFwiZ3J1bnQtY29udHJpYi1jb25uZWN0XCI6XCJ+MC42LjBcIixcImdydW50LWNvbnRyaWItanNoaW50XCI6XCJ+MC44LjBcIixjaGFpOlwifjEuOC4xXCIsbW9jaGE6XCJ+MS4xNy4xXCIsXCJncnVudC1tb2NoYS1waGFudG9tanNcIjpcIn4wLjQuMFwiLGJyb3dzZXJpZnk6XCJ+My4yNC41XCIsXCJncnVudC1icm93c2VyaWZ5XCI6XCJ+MS4zLjBcIixcImdydW50LWNvbnRyaWItdWdsaWZ5XCI6XCJ+MC4zLjJcIixjdXJsOlwiZ2l0Oi8vZ2l0aHViLmNvbS9jdWpvanMvY3VybC5naXRcIixpc3RhbmJ1bDpcIn4wLjIuNFwiLHRpbjpcIn4wLjQuMFwifSxkZXBlbmRlbmNpZXM6e21ncnM6XCIwLjAuMFwifX19LHt9XSxcIi4vaW5jbHVkZWRQcm9qZWN0aW9uc1wiOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1hKFwiZ1dVUE5XXCIpfSx7fV0sZ1dVUE5XOltmdW5jdGlvbihhLGIpe3ZhciBjPVthKFwiLi9saWIvcHJvamVjdGlvbnMvdG1lcmNcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL3V0bVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvc3RlcmVhXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9zdGVyZVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvc29tZXJjXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9vbWVyY1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvbGNjXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9rcm92YWtcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2Nhc3NcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2xhZWFcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2FlYVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvZ25vbVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvY2VhXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9lcWNcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL3BvbHlcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL256bWdcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL21pbGxcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL3NpbnVcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL21vbGxcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2VxZGNcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL3ZhbmRnXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9hZXFkXCIpXTtiLmV4cG9ydHM9ZnVuY3Rpb24ocHJvajQpe2MuZm9yRWFjaChmdW5jdGlvbihhKXtwcm9qNC5Qcm9qLnByb2plY3Rpb25zLmFkZChhKX0pfX0se1wiLi9saWIvcHJvamVjdGlvbnMvYWVhXCI6MzksXCIuL2xpYi9wcm9qZWN0aW9ucy9hZXFkXCI6NDAsXCIuL2xpYi9wcm9qZWN0aW9ucy9jYXNzXCI6NDEsXCIuL2xpYi9wcm9qZWN0aW9ucy9jZWFcIjo0MixcIi4vbGliL3Byb2plY3Rpb25zL2VxY1wiOjQzLFwiLi9saWIvcHJvamVjdGlvbnMvZXFkY1wiOjQ0LFwiLi9saWIvcHJvamVjdGlvbnMvZ25vbVwiOjQ2LFwiLi9saWIvcHJvamVjdGlvbnMva3JvdmFrXCI6NDcsXCIuL2xpYi9wcm9qZWN0aW9ucy9sYWVhXCI6NDgsXCIuL2xpYi9wcm9qZWN0aW9ucy9sY2NcIjo0OSxcIi4vbGliL3Byb2plY3Rpb25zL21pbGxcIjo1MixcIi4vbGliL3Byb2plY3Rpb25zL21vbGxcIjo1MyxcIi4vbGliL3Byb2plY3Rpb25zL256bWdcIjo1NCxcIi4vbGliL3Byb2plY3Rpb25zL29tZXJjXCI6NTUsXCIuL2xpYi9wcm9qZWN0aW9ucy9wb2x5XCI6NTYsXCIuL2xpYi9wcm9qZWN0aW9ucy9zaW51XCI6NTcsXCIuL2xpYi9wcm9qZWN0aW9ucy9zb21lcmNcIjo1OCxcIi4vbGliL3Byb2plY3Rpb25zL3N0ZXJlXCI6NTksXCIuL2xpYi9wcm9qZWN0aW9ucy9zdGVyZWFcIjo2MCxcIi4vbGliL3Byb2plY3Rpb25zL3RtZXJjXCI6NjEsXCIuL2xpYi9wcm9qZWN0aW9ucy91dG1cIjo2MixcIi4vbGliL3Byb2plY3Rpb25zL3ZhbmRnXCI6NjN9XX0se30sWzM1XSkoMzUpfSk7IiwiIWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPWUoKTtlbHNlIGlmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgbztcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P289d2luZG93OlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/bz1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJihvPXNlbGYpLG8uZ2VvanNvbjJzdmc9ZSgpfX0oZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c31mb3IodmFyIGk9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30oezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpeyFmdW5jdGlvbigpe2Z1bmN0aW9uIGV4cGxvZGUoZyl7cmV0dXJuIG11bHRpZXMuaW5kZXhPZihnLnR5cGUpPi0xP2cuY29vcmRpbmF0ZXMubWFwKGZ1bmN0aW9uKHBhcnQpe3ZhciBzaW5nbGU9e307cmV0dXJuIHNpbmdsZS50eXBlPWcudHlwZS5yZXBsYWNlKFwiTXVsdGlcIixcIlwiKSxzaW5nbGUuY29vcmRpbmF0ZXM9cGFydCxnLmNycyYmKHNpbmdsZS5jcnM9Zy5jcnMpLHNpbmdsZX0pOiExfWZ1bmN0aW9uIGltcGxvZGUoZ3Mpe3ZhciBzYW1lVHlwZT1ncy5ldmVyeShmdW5jdGlvbihnKXtyZXR1cm4gc2luZ2xlcy5pbmRleE9mKGcudHlwZSk+LTF9KSxjcnM9Z3NbMF0uY3JzfHwwLHNhbWVDcnM9Z3MuZXZlcnkoZnVuY3Rpb24oZyl7dmFyIGdjcnM9Zy5jcnN8fDA7cmV0dXJuIGdjcnM9PWNyc30pO2lmKHNhbWVUeXBlJiZzYW1lQ3JzKXt2YXIgbXVsdGk9e307cmV0dXJuIG11bHRpLnR5cGU9XCJNdWx0aVwiK2dzWzBdLnR5cGUsbXVsdGkuY29vcmRpbmF0ZXM9W10sMCE9Y3JzJiYobXVsdGkuY3JzPWNycyksZ3MuZm9yRWFjaChmdW5jdGlvbihnKXttdWx0aS5jb29yZGluYXRlcy5wdXNoKGcuY29vcmRpbmF0ZXMpfSksbXVsdGl9cmV0dXJuITF9dmFyIHNpbmdsZXM9W1wiUG9pbnRcIixcIkxpbmVTdHJpbmdcIixcIlBvbHlnb25cIl0sbXVsdGllcz1bXCJNdWx0aVBvaW50XCIsXCJNdWx0aUxpbmVTdHJpbmdcIixcIk11bHRpUG9seWdvblwiXSxtdWx0aWdlb2pzb249e2V4cGxvZGU6ZXhwbG9kZSxpbXBsb2RlOmltcGxvZGV9O1widW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPW11bHRpZ2VvanNvbjp3aW5kb3cmJih3aW5kb3cubXVsdGlnZW9qc29uPW11bHRpZ2VvanNvbil9KCl9LHt9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtmdW5jdGlvbiBnZXRDb29yZFN0cmluZyhjb29yZHMscmVzLG9yaWdpbil7dmFyIGNvb3JkU3RyPWNvb3Jkcy5tYXAoZnVuY3Rpb24oY29vcmQpe3JldHVybihjb29yZFswXS1vcmlnaW4ueCkvcmVzK1wiLFwiKyhvcmlnaW4ueS1jb29yZFsxXSkvcmVzfSk7cmV0dXJuIGNvb3JkU3RyLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIHBvaW50KGdlb20scmVzLG9yaWdpbixvcHQpe3ZhciByPW9wdCYmb3B0LnI/b3B0LnI6MSxwb2ludEFzQ2lyY2xlPW9wdCYmb3B0Lmhhc093blByb3BlcnR5KFwicG9pbnRBc0NpcmNsZVwiKT9vcHQucG9pbnRBc0NpcmNsZTohMSxjb29yZHM9Z2V0Q29vcmRTdHJpbmcoW2dlb20uY29vcmRpbmF0ZXNdLHJlcyxvcmlnaW4pO3JldHVybiBwb2ludEFzQ2lyY2xlP1tjb29yZHNdOltcIk1cIitjb29yZHMrXCIgbVwiKy1yK1wiLDAgYVwiK3IrXCIsXCIrcitcIiAwIDEsMSBcIisyKnIrXCIsMCBhXCIrcitcIixcIityK1wiIDAgMSwxIFwiKy0yKnIrXCIsMFwiXX1mdW5jdGlvbiBtdWx0aVBvaW50KGdlb20scmVzLG9yaWdpbixvcHQpe3ZhciBleHBsb2RlPW9wdCYmb3B0Lmhhc093blByb3BlcnR5KFwiZXhwbG9kZVwiKT9vcHQuZXhwbG9kZTohMSxwYXRocz1tdWx0aS5leHBsb2RlKGdlb20pLm1hcChmdW5jdGlvbihzaW5nbGUpe3JldHVybiBwb2ludChzaW5nbGUscmVzLG9yaWdpbixvcHQpWzBdfSk7cmV0dXJuIGV4cGxvZGU/cGF0aHM6W3BhdGhzLmpvaW4oXCIgXCIpXX1mdW5jdGlvbiBsaW5lU3RyaW5nKGdlb20scmVzLG9yaWdpbixvdHApe3ZhciBjb29yZHM9Z2V0Q29vcmRTdHJpbmcoZ2VvbS5jb29yZGluYXRlcyxyZXMsb3JpZ2luKSxwYXRoPVwiTVwiK2Nvb3JkcztyZXR1cm5bcGF0aF19ZnVuY3Rpb24gbXVsdGlMaW5lU3RyaW5nKGdlb20scmVzLG9yaWdpbixvcHQpe3ZhciBleHBsb2RlPW9wdCYmb3B0Lmhhc093blByb3BlcnR5KFwiZXhwbG9kZVwiKT9vcHQuZXhwbG9kZTohMSxwYXRocz1tdWx0aS5leHBsb2RlKGdlb20pLm1hcChmdW5jdGlvbihzaW5nbGUpe3JldHVybiBsaW5lU3RyaW5nKHNpbmdsZSxyZXMsb3JpZ2luLG9wdClbMF19KTtyZXR1cm4gZXhwbG9kZT9wYXRoczpbcGF0aHMuam9pbihcIiBcIildfWZ1bmN0aW9uIHBvbHlnb24oZ2VvbSxyZXMsb3JpZ2luLG9wdCl7dmFyIG1haW5TdHIsaG9sZXM7bWFpblN0cj1nZXRDb29yZFN0cmluZyhnZW9tLmNvb3JkaW5hdGVzWzBdLHJlcyxvcmlnaW4pLGdlb20uY29vcmRpbmF0ZXMubGVuZ3RoPjEmJihob2xlcz1nZW9tLmNvb3JkaW5hdGVzLnNsaWNlKDEsZ2VvbS5jb29yZGluYXRlcy5sZW5ndGgpKTt2YXIgcGF0aD1cIk1cIittYWluU3RyO2lmKGhvbGVzKWZvcih2YXIgaT0wO2k8aG9sZXMubGVuZ3RoO2krKylwYXRoKz1cIiBNXCIrZ2V0Q29vcmRTdHJpbmcoaG9sZXNbaV0scmVzLG9yaWdpbik7cmV0dXJuIHBhdGgrPVwiWlwiLFtwYXRoXX1mdW5jdGlvbiBtdWx0aVBvbHlnb24oZ2VvbSxyZXMsb3JpZ2luLG9wdCl7dmFyIGV4cGxvZGU9b3B0Lmhhc093blByb3BlcnR5KFwiZXhwbG9kZVwiKT9vcHQuZXhwbG9kZTohMSxwYXRocz1tdWx0aS5leHBsb2RlKGdlb20pLm1hcChmdW5jdGlvbihzaW5nbGUpe3JldHVybiBwb2x5Z29uKHNpbmdsZSxyZXMsb3JpZ2luLG9wdClbMF19KTtyZXR1cm4gZXhwbG9kZT9wYXRoczpbcGF0aHMuam9pbihcIiBcIikucmVwbGFjZSgvWi9nLFwiXCIpK1wiWlwiXX12YXIgbXVsdGk9cmVxdWlyZShcIm11bHRpZ2VvanNvblwiKTttb2R1bGUuZXhwb3J0cz17UG9pbnQ6cG9pbnQsTXVsdGlQb2ludDptdWx0aVBvaW50LExpbmVTdHJpbmc6bGluZVN0cmluZyxNdWx0aUxpbmVTdHJpbmc6bXVsdGlMaW5lU3RyaW5nLFBvbHlnb246cG9seWdvbixNdWx0aVBvbHlnb246bXVsdGlQb2x5Z29ufX0se211bHRpZ2VvanNvbjoxfV0sMzpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXt2YXIgYz17fTtyZXR1cm4gT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbihrZXkpe2Nba2V5XT1hW2tleV19KSxPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7Y1trZXldPWJba2V5XX0pLGN9fSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7ZnVuY3Rpb24gcGF0aFRvU3ZnSnNvbihwYXRoLHR5cGUsYXR0cmlidXRlcyxvcHQpe3ZhciBzdmc9e30scG9pbnRBc0NpcmNsZT1vcHQmJm9wdC5oYXNPd25Qcm9wZXJ0eShcInBvaW50QXNDaXJjbGVcIik/b3B0LnBvaW50QXNDaXJjbGU6ITE7XCJQb2ludFwiIT10eXBlJiZcIk11bHRpUG9pbnRcIiE9dHlwZXx8IXBvaW50QXNDaXJjbGU/KHN2Zz17ZDpwYXRofSwoXCJQb2x5Z29uXCI9PXR5cGV8fFwiTXVsdGlQb2x5Z29uXCI9PXR5cGUpJiZcImV2ZW5vZGRcIj09c3ZnW1wiZmlsbC1ydWxlXCJdKTooc3ZnLmN4PXBhdGguc3BsaXQoXCIsXCIpWzBdLHN2Zy5jeT1wYXRoLnNwbGl0KFwiLFwiKVsxXSxzdmcucj1vcHQmJm9wdC5yP29wdC5yOlwiMVwiKTtmb3IodmFyIGtleSBpbiBhdHRyaWJ1dGVzKXN2Z1trZXldPWF0dHJpYnV0ZXNba2V5XTtyZXR1cm4gc3ZnfWZ1bmN0aW9uIGpzb25Ub1N2Z0VsZW1lbnQoanNvbix0eXBlLG9wdCl7dmFyIHBvaW50QXNDaXJjbGU9b3B0JiZvcHQuaGFzT3duUHJvcGVydHkoXCJwb2ludEFzQ2lyY2xlXCIpP29wdC5wb2ludEFzQ2lyY2xlOiExLGVsZT1cIjxwYXRoXCI7XCJQb2ludFwiIT10eXBlJiZcIk11bHRpUG9pbnRcIiE9dHlwZXx8IXBvaW50QXNDaXJjbGV8fChlbGU9XCI8Y2lyY2xlXCIpO2Zvcih2YXIga2V5IGluIGpzb24pZWxlKz1cIiBcIitrZXkrJz1cIicranNvbltrZXldKydcIic7cmV0dXJuIGVsZSs9XCIvPlwifWZ1bmN0aW9uIHZhbHVlQXQob2JqLHBhdGgpe2Z1bmN0aW9uIGluZGV4KHByZXYsY3VyLGksYXJyKXtpZihwcmV2Lmhhc093blByb3BlcnR5KGN1cikpcmV0dXJuIHByZXZbY3VyXTt0aHJvdyBuZXcgRXJyb3IoYXJyLnNsaWNlKDAsaSsxKS5qb2luKFwiLlwiKStcIiBpcyBub3QgYSB2YWxpZCBwcm9wZXJ0eSBwYXRoXCIpfXJldHVybiBwYXRoLnNwbGl0KFwiLlwiKS5yZWR1Y2UoaW5kZXgsb2JqKX12YXIgZXh0ZW5kPXJlcXVpcmUoXCIuL2V4dGVuZC5qc1wiKSxjb252ZXJ0ZXI9cmVxdWlyZShcIi4vY29udmVydGVyLmpzXCIpLGcyc3ZnPWZ1bmN0aW9uKG9wdGlvbnMpe3RoaXMub3B0aW9ucz1vcHRpb25zfHx7fSx0aGlzLnZpZXdwb3J0U2l6ZT10aGlzLm9wdGlvbnMudmlld3BvcnRTaXplfHx7d2lkdGg6MjU2LGhlaWdodDoyNTZ9LHRoaXMubWFwRXh0ZW50PXRoaXMub3B0aW9ucy5tYXBFeHRlbnR8fHtsZWZ0Oi0yMDAzNzUwOC4zNDI3ODkyNDQscmlnaHQ6MjAwMzc1MDguMzQyNzg5MjQ0LGJvdHRvbTotMjAwMzc1MDguMzQyNzg5MjQ0LHRvcDoyMDAzNzUwOC4zNDI3ODkyNDR9LHRoaXMucmVzPXRoaXMuY2FsUmVzb2x1dGlvbih0aGlzLm1hcEV4dGVudCx0aGlzLnZpZXdwb3J0U2l6ZSx0aGlzLm9wdGlvbnMuZml0VG8pfTtnMnN2Zy5wcm90b3R5cGUuY2FsUmVzb2x1dGlvbj1mdW5jdGlvbihleHRlbnQsc2l6ZSxmaXRUbyl7dmFyIHhyZXM9KGV4dGVudC5yaWdodC1leHRlbnQubGVmdCkvc2l6ZS53aWR0aCx5cmVzPShleHRlbnQudG9wLWV4dGVudC5ib3R0b20pL3NpemUuaGVpZ2h0O2lmKGZpdFRvKXtpZihcIndpZHRoXCI9PT1maXRUby50b0xvd2VyQ2FzZSgpKXJldHVybiB4cmVzO2lmKFwiaGVpZ2h0XCI9PT1maXRUby50b0xvd2VyQ2FzZSgpKXJldHVybiB5cmVzO3Rocm93IG5ldyBFcnJvcignXCJmaXRUb1wiIG9wdGlvbiBzaG91bGQgYmUgXCJ3aWR0aFwiIG9yIFwiaGVpZ2h0XCIgJyl9cmV0dXJuIE1hdGgubWF4KHhyZXMseXJlcyl9LGcyc3ZnLnByb3RvdHlwZS5jb252ZXJ0PWZ1bmN0aW9uKGdlb2pzb24sb3B0aW9ucyl7dmFyIG9wdD1leHRlbmQodGhpcy5vcHRpb25zLG9wdGlvbnN8fHt9KSxzdmdFbGVtZW50cz1bXTtpZihcIkZlYXR1cmVDb2xsZWN0aW9uXCI9PWdlb2pzb24udHlwZSlmb3IodmFyIGk9MDtpPGdlb2pzb24uZmVhdHVyZXMubGVuZ3RoO2krKylzdmdFbGVtZW50cz1zdmdFbGVtZW50cy5jb25jYXQodGhpcy5jb252ZXJ0RmVhdHVyZShnZW9qc29uLmZlYXR1cmVzW2ldLG9wdCkpO2Vsc2UgaWYoXCJGZWF0dXJlXCI9PWdlb2pzb24udHlwZSlzdmdFbGVtZW50cz10aGlzLmNvbnZlcnRGZWF0dXJlKGdlb2pzb24sb3B0KTtlbHNlIGlmKFwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PWdlb2pzb24udHlwZSlmb3IodmFyIGk9MDtpPGdlb2pzb24uZ2VvbWV0cmllcy5sZW5ndGg7aSsrKXN2Z0VsZW1lbnRzPXN2Z0VsZW1lbnRzLmNvbmNhdCh0aGlzLmNvbnZlcnRHZW9tZXRyeShnZW9qc29uLmdlb21ldHJpZXNbaV0sb3B0KSk7ZWxzZXtpZighY29udmVydGVyW2dlb2pzb24udHlwZV0pcmV0dXJuO3N2Z0VsZW1lbnRzPXRoaXMuY29udmVydEdlb21ldHJ5KGdlb2pzb24sb3B0KX1yZXR1cm4gb3B0LmNhbGxiYWNrJiZvcHQuY2FsbGJhY2suY2FsbCh0aGlzLHN2Z0VsZW1lbnRzKSxzdmdFbGVtZW50c30sZzJzdmcucHJvdG90eXBlLmNvbnZlcnRGZWF0dXJlPWZ1bmN0aW9uKGZlYXR1cmUsb3B0aW9ucyl7aWYoZmVhdHVyZXx8ZmVhdHVyZS5nZW9tZXRyeSl7dmFyIG9wdD1leHRlbmQodGhpcy5vcHRpb25zLG9wdGlvbnN8fHt9KTtpZihvcHQuYXR0cmlidXRlcyYmb3B0LmF0dHJpYnV0ZXMgaW5zdGFuY2VvZiBBcnJheSl7dmFyIGFycj1vcHQuYXR0cmlidXRlcztvcHQuYXR0cmlidXRlcz1hcnIucmVkdWNlKGZ1bmN0aW9uKHN1bSxwcm9wZXJ0eSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHByb3BlcnR5KXt2YXIgdmFsLGtleT1wcm9wZXJ0eS5zcGxpdChcIi5cIikucG9wKCk7dHJ5e3ZhbD12YWx1ZUF0KGZlYXR1cmUscHJvcGVydHkpfWNhdGNoKGUpe3ZhbD0hMX12YWwmJihzdW1ba2V5XT12YWwpfWVsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIHByb3BlcnR5JiZwcm9wZXJ0eS50eXBlJiZwcm9wZXJ0eS5wcm9wZXJ0eSlpZihcImR5bmFtaWNcIj09PXByb3BlcnR5LnR5cGUpe3ZhciB2YWwsa2V5PXByb3BlcnR5LmtleT9wcm9wZXJ0eS5rZXk6cHJvcGVydHkucHJvcGVydHkuc3BsaXQoXCIuXCIpLnBvcCgpO3RyeXt2YWw9dmFsdWVBdChmZWF0dXJlLHByb3BlcnR5LnByb3BlcnR5KX1jYXRjaChlKXt2YWw9ITF9dmFsJiYoc3VtW2tleV09dmFsKX1lbHNlXCJzdGF0aWNcIj09PXByb3BlcnR5LnR5cGUmJnByb3BlcnR5LnZhbHVlJiYoc3VtW3Byb3BlcnR5LnByb3BlcnR5XT1wcm9wZXJ0eS52YWx1ZSk7cmV0dXJuIHN1bX0se30pfWVsc2Ugb3B0LmF0dHJpYnV0ZXM9b3B0LmF0dHJpYnV0ZXN8fHt9O3ZhciBpZD1vcHQuYXR0cmlidXRlcy5pZHx8ZmVhdHVyZS5pZHx8KGZlYXR1cmUucHJvcGVydGllcyYmZmVhdHVyZS5wcm9wZXJ0aWVzLmlkP2ZlYXR1cmUucHJvcGVydGllcy5pZDpudWxsKTtyZXR1cm4gaWQmJihvcHQuYXR0cmlidXRlcy5pZD1pZCksdGhpcy5jb252ZXJ0R2VvbWV0cnkoZmVhdHVyZS5nZW9tZXRyeSxvcHQpfX0sZzJzdmcucHJvdG90eXBlLmNvbnZlcnRHZW9tZXRyeT1mdW5jdGlvbihnZW9tLG9wdGlvbnMpe2lmKGNvbnZlcnRlcltnZW9tLnR5cGVdKXt2YXIgc3ZnSnNvbnMsc3ZnRWxlcyxvcHQ9ZXh0ZW5kKHRoaXMub3B0aW9ucyxvcHRpb25zfHx7fSksb3V0cHV0PW9wdC5vdXRwdXR8fFwic3ZnXCIscGF0aHM9Y29udmVydGVyW2dlb20udHlwZV0uY2FsbCh0aGlzLGdlb20sdGhpcy5yZXMse3g6dGhpcy5tYXBFeHRlbnQubGVmdCx5OnRoaXMubWFwRXh0ZW50LnRvcH0sb3B0KTtyZXR1cm5cInN2Z1wiPT1vdXRwdXQudG9Mb3dlckNhc2UoKT8oc3ZnSnNvbnM9cGF0aHMubWFwKGZ1bmN0aW9uKHBhdGgpe3JldHVybiBwYXRoVG9TdmdKc29uKHBhdGgsZ2VvbS50eXBlLG9wdC5hdHRyaWJ1dGVzLG9wdCl9KSxzdmdFbGVzPXN2Z0pzb25zLm1hcChmdW5jdGlvbihqc29uKXtyZXR1cm4ganNvblRvU3ZnRWxlbWVudChqc29uLGdlb20udHlwZSxvcHQpfSkpOnBhdGhzfX0sbW9kdWxlLmV4cG9ydHM9ZzJzdmd9LHtcIi4vY29udmVydGVyLmpzXCI6MixcIi4vZXh0ZW5kLmpzXCI6M31dLDU6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBnMnN2Zz1yZXF1aXJlKFwiLi9pbnN0YW5jZS5qc1wiKSxnZW9qc29uMnN2Zz1mdW5jdGlvbihvcHRpb25zKXtyZXR1cm4gbmV3IGcyc3ZnKG9wdGlvbnMpfTttb2R1bGUuZXhwb3J0cz1nZW9qc29uMnN2Z30se1wiLi9pbnN0YW5jZS5qc1wiOjR9XX0se30sWzVdKSg1KX0pOyIsIlxyXG5mdW5jdGlvbiBnZXRKU09OKHVybCwgY2IpIHtcclxuICAgIHZhciB4bWxodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICB2YXIgb25FcnJvciA9IHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLmFsZXJ0LmJpbmQod2luZG93Lm9ucy5ub3RpZmljYXRpb24sIHtcclxuICAgICAgICBtZXNzYWdlOiAnSmUgYmVudCBuaWV0IHZlcmJvbmRlbiBtZXQgZGUgc2VydmVyLiBEZSBnZWdldmVucyBkaWUgd29yZGVuIHdlZXJnZWdldmVuIHppam4gbW9nZWxpamsgdmVyb3VkZXJkLicsXHJcbiAgICB9KTtcclxuXHJcbiAgICB4bWxodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSA0KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBteUFyciA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgY2IoSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHhtbGh0dHAub25lcnJvciA9IG9uRXJyb3I7XHJcbiAgICB4bWxodHRwLm9wZW4oXCJHRVRcIiwgdXJsLCB0cnVlKTtcclxuICAgIHhtbGh0dHAuc2VuZCgpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gX3Byb21pc2UoKSB7XHJcbiAgICB2YXIgZG9uZSA9IGZhbHNlO1xyXG4gICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcclxuICAgIHZhciBjYnMgPSBbXTtcclxuICAgIHZhciBkID0gZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgZG9uZSA9IHRydWU7XHJcbiAgICAgICAgcmVzID0gcmVzdWx0OyBcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY2JzLmxlbmd0aDsgaSsrKSBjYnNbaV0ocmVzdWx0KTtcclxuICAgIH1cclxuICAgIGQudGhlbiA9IGZ1bmN0aW9uKGNiKSB7XHJcbiAgICAgICAgaWYgKGRvbmUpIGNiKHJlcyk7XHJcbiAgICAgICAgZWxzZSBjYnMucHVzaChjYik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZDtcclxufVxyXG5cclxuIiwiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICB2YXIgd2Vic2l0ZVRpdGxlID0gZG9jdW1lbnQudGl0bGU7XHJcbiAgICBpZiAod2luZG93Lm9ucy5wbGF0Zm9ybS5pc1dlYlZpZXcoKSAmJiB3aW5kb3cuaGlzdG9yeSkge1xyXG4gICAgICAgIHdpbmRvdy5mbi5uYXZpZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcigncG9zdHB1c2gnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5kZXRhaWwuZW50ZXJQYWdlLmlkID09PSAnc3BsaXR0ZXInKSByZXR1cm47XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IGUuZGV0YWlsLmVudGVyUGFnZS5xdWVyeVNlbGVjdG9yKCcudG9vbGJhcl9fY2VudGVyJykuaW5uZXJUZXh0O1xyXG4gICAgICAgICAgICBkb2N1bWVudC50aXRsZSA9IHdlYnNpdGVUaXRsZSArICcgLSAnICsgdGl0bGU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGhpc3RvcnlBUEkgPSB0cnVlO1xyXG4gICAgICAgIHdpbmRvdy5mbi5uYXZpZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcigncG9zdHBvcCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGhpc3RvcnlBUEkgPSAhIWUuZGV0YWlsLmVudGVyUGFnZS5kYXRhLmhpc3RvcnlBUEk7XHJcbiAgICAgICAgICAgIGlmICghZS5kZXRhaWwuZW50ZXJQYWdlLmRhdGEuaGlzdG9yeUFQSSkgaGlzdG9yeS5iYWNrKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGhpc3RvcnlBUEkpIHdpbmRvdy5mbi5uYXZpZ2F0b3IucG9wUGFnZSh7IGRhdGE6IHsgaGlzdG9yeUFQSTogdHJ1ZSB9IH0pO1xyXG4gICAgICAgICAgICBoaXN0b3J5QVBJID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7IiwidmFyIGNvcmRvdmFfcmVhZHkgPSBmYWxzZTtcclxuXHJcbnZhciBpc09ubGluZSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbn0sIGlzT2ZmbGluZSA9IGZ1bmN0aW9uICgpIHtcclxuXHR3aW5kb3cub25zLm5vdGlmaWNhdGlvbi5hbGVydCh7XHJcblx0XHRtZXNzYWdlOiAnSmUgYmVudCBuaWV0IHZlcmJvbmRlbiBtZXQgZGUgc2VydmVyLiBEZSBnZWdldmVucyBkaWUgd29yZGVuIHdlZXJnZWdldmVuIHppam4gbW9nZWxpamsgdmVyb3VkZXJkLicsXHJcblx0fSk7XHJcbn07XHJcblxyXG53aW5kb3cub25zLmRpc2FibGVBdXRvU3RhdHVzQmFyRmlsbCgpO1xyXG5cclxuaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XHJcblx0LypcclxuXHRcdFdvcmtzIHdlbGwgaW4gRmlyZWZveCBhbmQgT3BlcmEgd2l0aCB0aGUgXHJcblx0XHRXb3JrIE9mZmxpbmUgb3B0aW9uIGluIHRoZSBGaWxlIG1lbnUuXHJcblx0XHRQdWxsaW5nIHRoZSBldGhlcm5ldCBjYWJsZSBkb2Vzbid0IHNlZW0gdG8gdHJpZ2dlciBpdC5cclxuXHRcdExhdGVyIEdvb2dsZSBDaHJvbWUgYW5kIFNhZmFyaSBzZWVtIHRvIHRyaWdnZXIgaXQgd2VsbFxyXG5cdCovXHJcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgaXNPbmxpbmUsIGZhbHNlKTtcclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgaXNPZmZsaW5lLCBmYWxzZSk7XHJcbn1cclxuZWxzZSB7XHJcblx0LypcclxuXHRcdFdvcmtzIGluIElFIHdpdGggdGhlIFdvcmsgT2ZmbGluZSBvcHRpb24gaW4gdGhlIFxyXG5cdFx0RmlsZSBtZW51IGFuZCBwdWxsaW5nIHRoZSBldGhlcm5ldCBjYWJsZVxyXG5cdCovXHJcblx0ZG9jdW1lbnQuYm9keS5vbm9ubGluZSA9IGlzT25saW5lO1xyXG5cdGRvY3VtZW50LmJvZHkub25vZmZsaW5lID0gaXNPZmZsaW5lO1xyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzdW1lXCIsIGZ1bmN0aW9uICgpIHtcclxuXHRpZiAobmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcclxuXHRcdHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLmFsZXJ0KHtcclxuXHRcdFx0bWVzc2FnZTogJ0plIGJlbnQgbmlldCB2ZXJib25kZW4gbWV0IGRlIHNlcnZlci4gRGUgZ2VnZXZlbnMgZGllIHdvcmRlbiB3ZWVyZ2VnZXZlbiB6aWpuIG1vZ2VsaWprIHZlcm91ZGVyZC4nLFxyXG5cdFx0fSk7XHJcblx0fVxyXG59LCBmYWxzZSlcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2luaXQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHR2YXIgcGFnZSA9IGV2ZW50LnRhcmdldDtcclxuXHJcblx0aWYgKHBhZ2UuaWQgPT09ICdzcGxpdHRlcicpIHtcclxuXHJcblx0fVxyXG5cclxuXHRpZiAocGFnZS5pZCA9PT0gJ21hcC1wYWdlJykge1xyXG5cdFx0d2luZG93LmluaXRNYXAocGFnZSk7XHJcblx0fVxyXG5cclxuXHRlbHNlIGlmIChwYWdlLmlkID09PSAnZGV0YWlscycpIHtcclxuXHRcdHdpbmRvdy5pbml0RGV0YWlscyhwYWdlKTtcclxuXHR9XHJcblxyXG5cdGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdkZXRhaWxzLWdlbmVyYWwnKSB7XHJcblx0XHR3aW5kb3cuaW5pdERldGFpbHNHZW5lcmFsKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0ZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2RldGFpbHMtcGFuZGVuJykge1xyXG5cdFx0d2luZG93LmluaXREZXRhaWxzUGFuZGVuKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0ZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2RldGFpbHMtdmVyYmxpamZwbGFhdHNlbicpIHtcclxuXHRcdHdpbmRvdy5pbml0RGV0YWlsc1ZlcmJsaWpmc1BsYWF0c2VuKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0ZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2RldGFpbHMtbWlzYycpIHtcclxuXHRcdHdpbmRvdy5pbml0RGV0YWlsc01pc2MocGFnZSk7XHJcblx0fVxyXG5cclxuXHRlbHNlIGlmIChwYWdlLmlkID09PSAnZGV0YWlscy12ZXJibGlqZm9iamVjdC1kZXRhaWwnKSB7XHJcblx0XHR3aW5kb3cuaW5pdERldGFpbHNWZXJibGlqZk9iamVjdERldGFpbChwYWdlKTtcclxuXHR9XHJcblxyXG5cdGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdzZWFyY2gtcGFnZScpIHtcclxuXHRcdHdpbmRvdy5pbml0U2VhcmNoUGFnZShwYWdlKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcclxuXHRjb3Jkb3ZhX3JlYWR5ID0gdHJ1ZTtcclxuXHRpZiAoY29yZG92YS5wbGF0Zm9ybUlkID09PSAnYnJvd3NlcicpIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpLnNyYyA9ICcuL2pzL2Jyb3dzZXIuanMnO1xyXG5cdH1cclxuXHRpZiAobmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcclxuXHRcdHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLmFsZXJ0KHtcclxuXHRcdFx0bWVzc2FnZTogJ0plIGJlbnQgbmlldCB2ZXJib25kZW4gbWV0IGRlIHNlcnZlci4gRGUgZ2VnZXZlbnMgZGllIHdvcmRlbiB3ZWVyZ2VnZXZlbiB6aWpuIG1vZ2VsaWprIHZlcm91ZGVyZC5uJyxcclxuXHRcdH0pO1xyXG5cdH1cclxufSwgZmFsc2UpO1xyXG5cclxud2luZG93LmZuID0ge307XHJcblxyXG53aW5kb3cuZm4ubmF2aWdhdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdmlnYXRvcicpO1xyXG5cclxud2luZG93LmZuLm9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcblx0dmFyIG1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWVudScpO1xyXG5cdG1lbnUub3BlbigpO1xyXG59O1xyXG5cclxud2luZG93LmZuLmxvYWQgPSBmdW5jdGlvbiAocGFnZSkge1xyXG5cdHZhciBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKTtcclxuXHR2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51Jyk7XHJcblx0Y29udGVudC5sb2FkKHBhZ2UpXHJcblx0XHQudGhlbihtZW51LmNsb3NlLmJpbmQobWVudSkpO1xyXG59O1xyXG5cclxud2luZG93LmZuLmxvYWRrYWFydCA9IGZ1bmN0aW9uKCkge1xyXG5cdGlmICh3aW5kb3cuZm4ubWFwICYmIHdpbmRvdy5mbi5sYXllcikge1xyXG5cdFx0aWYgKHdpbmRvdy5mbi5sYXllclR5cGUgPT09ICdzYXQnKSB7XHJcblx0XHRcdHdpbmRvdy5mbi5sYXllci5yZW1vdmUoKTtcclxuXHRcdFx0bG9hZEthYXJ0KCk7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51JykuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0d2luZG93LmZuLmxheWVyVHlwZSA9ICdrYWFydCc7XHJcblx0XHR3aW5kb3cuZm4ubG9hZCgndmlld3MvbWFwLmh0bWwnKTtcclxuXHR9XHJcbn1cclxuXHJcbndpbmRvdy5mbi5sb2FkbHVjaHRmb3RvID0gZnVuY3Rpb24gKCkge1xyXG5cdGlmICh3aW5kb3cuZm4ubWFwICYmIHdpbmRvdy5mbi5sYXllcikge1xyXG5cdFx0aWYgKHdpbmRvdy5mbi5sYXllclR5cGUgPT09ICdrYWFydCcpIHtcclxuXHRcdFx0d2luZG93LmZuLmxheWVyLnJlbW92ZSgpO1xyXG5cdFx0XHRsb2FkU2F0KCk7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51JykuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0d2luZG93LmZuLmxheWVyVHlwZSA9ICdzYXQnO1xyXG5cdFx0d2luZG93LmZuLmxvYWQoJ3ZpZXdzL21hcC5odG1sJyk7XHJcblx0fVxyXG59O1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgZ2VtZWVudGVDb2RlcztcclxuXHR2YXIgY2JzID0gW107XHJcblx0Z2V0SlNPTignZGF0YS9nZW1lZW50ZS1jb2Rlcy5qc29uJywgZnVuY3Rpb24gKGNvZGVzKSB7XHJcblx0XHRnZW1lZW50ZUNvZGVzID0gY29kZXM7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGNicy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjYnMoY29kZXMpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHR3aW5kb3cuZm4uZ2V0R2VtZWVudGVDb2RlcyA9IGZ1bmN0aW9uIChjYikge1xyXG5cdFx0aWYgKGdlbWVlbnRlQ29kZXMpIGNiKGdlbWVlbnRlQ29kZXMpO1xyXG5cdFx0ZWxzZSBjYnMucHVzaChjYik7XHJcblx0fVxyXG59KSgpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsImZ1bmN0aW9uIGluaXRNYXAocGFnZSkge1xyXG5cclxuICAgIHZhciBpbnRlcmFjdGVkID0gZmFsc2U7XHJcbiAgICB2YXIgem9vbWVkTG93RW5vdWdoID0gZmFsc2U7XHJcbiAgICB2YXIgTCA9IHdpbmRvdy5MO1xyXG5cclxuICAgIHZhciBtYXAgPSB3aW5kb3cuZm4ubWFwID0gTC5tYXAoJ21hcCcsIHtcclxuICAgICAgICB6b29tQ29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgbWF4Wm9vbTogMjEsXHJcbiAgICAgICAgYm91bmNlQXRab29tTGltaXRzOiBmYWxzZSxcclxuICAgIH0pO1xyXG4gICAgTC5jb250cm9sLnpvb20oe1xyXG4gICAgICAgIHBvc2l0aW9uOiAndG9wcmlnaHQnLFxyXG4gICAgfSkuYWRkVG8obWFwKTtcclxuICAgIFxyXG4gICAgbWFwLnNldFZpZXcoWzUzLjIzMiwgNi41NjldLCAxNik7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5mbi5sYXllclR5cGUgPT09ICdzYXQnKSBsb2FkU2F0KCk7XHJcbiAgICBlbHNlIGxvYWRLYWFydCgpO1xyXG5cclxuICAgIEwudGlsZUxheWVyLndtcygnaHR0cHM6Ly9nZW9kYXRhLm5hdGlvbmFhbGdlb3JlZ2lzdGVyLm5sL2thZGFzdHJhbGVrYWFydHYzL3dtcz8nLCB7XHJcbiAgICAgICAgbGF5ZXJzOiAna2FkYXN0cmFsZWthYXJ0djM6a2FkYXN0cmFsZWdyZW5zLHBlcmNlZWwnLFxyXG4gICAgICAgIGZvcm1hdDogJ2ltYWdlL3BuZycsXHJcbiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsXHJcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcclxuICAgICAgICBhdHRyaWJ1dGlvbjogXCJ3d3cubmF0aW9uYWFsZ2VvcmVnaXN0ZXIubmxcIixcclxuICAgICAgICBtYXhab29tOiAyMSxcclxuICAgICAgICBtaW5ab29tOiAxMFxyXG4gICAgfSkuYWRkVG8obWFwKTtcclxuXHJcbiAgICB2YXIgZ2VvSnNvbiA9IEwuZ2VvSnNvbih1bmRlZmluZWQsIHsgb25FYWNoRmVhdHVyZTogb25FYWNoRmVhdHVyZSB9KTtcclxuICAgIGdlb0pzb24uYWRkVG8obWFwKTtcclxuXHJcbiAgICB2YXIgZ2VvSnNvbjIgPSBMLmdlb0pzb24odW5kZWZpbmVkLCB7IG9uRWFjaEZlYXR1cmU6IG9uRWFjaEZlYXR1cmUyIH0pO1xyXG4gICAgZ2VvSnNvbjIuYWRkVG8obWFwKTtcclxuXHJcbiAgICB2YXIgY2l0eSA9IHdpbmRvdy5mbi5jaXR5O1xyXG4gICAgaWYgKGNpdHkpIHtcclxuICAgICAgICB3aW5kb3cuZm4uY2l0eSA9IG51bGw7XHJcbiAgICAgICAgZ2V0SlNPTihjaXR5Ll9saW5rc1snY2l0eTppdGVtJ10uaHJlZiwgZnVuY3Rpb24gKGNpdHlJbmZvKSB7XHJcbiAgICAgICAgICAgIHZhciBsYXRMb24gPSBjaXR5SW5mby5sb2NhdGlvbi5sYXRsb247XHJcbiAgICAgICAgICAgIG1hcC5zZXRWaWV3KG5ldyBMLkxhdExuZyhsYXRMb24ubGF0aXR1ZGUsIGxhdExvbi5sb25naXR1ZGUpLCAxMyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG1hcC5sb2NhdGUoeyBzZXRWaWV3OiB0cnVlLCBtYXhab29tOiAzMCB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgbWFwLm9uKFwibW92ZWVuZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHpvb20gPSBtYXAuZ2V0Wm9vbSgpO1xyXG4gICAgICAgIGludGVyYWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIHZhciB6b29tUGVyY2VudGFnZSA9IE1hdGgubWF4KDAsIDEwMCAtIE1hdGgubWluKDEwMCwgem9vbSAvIDE3KSAqIDEwMCk7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvb21sZXZlbC1wcm9ncmVzcycpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndG9wOiAnICsgem9vbVBlcmNlbnRhZ2UgKyAnJScpO1xyXG4gICAgICAgIGlmICh6b29tIDwgMTcpIHtcclxuICAgICAgICAgICAgZ2VvSnNvbi5jbGVhckxheWVycygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHpvb21lZExvd0Vub3VnaCA9IHRydWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBtYXAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgbGF0TG9uZyA9IGUubGF0bG5nO1xyXG4gICAgICAgIHNob3dMb2NhdGlvbk9uTWFwKGxhdExvbmcpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbiAgICBmdW5jdGlvbiBvbkVhY2hGZWF0dXJlKGZlYXR1cmUsIGxheWVyKSB7XHJcbiAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcykge1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLmthZGFzdHJhbGVHZW1lZW50ZUNvZGUpXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goJ0dlbWVlbnRlIENvZGU6ICcgKyBmZWF0dXJlLnByb3BlcnRpZXMua2FkYXN0cmFsZUdlbWVlbnRlQ29kZSk7XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMudHlwZSlcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnVHlwZTogJyArIGZlYXR1cmUucHJvcGVydGllcy50eXBlIHx8IFwiXCIpXHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMua2FkYXN0cmFsZWdyb290dGUpXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goJ0thZGFzdHJhbGUgZ3Jvb3R0ZTogJyArIGZlYXR1cmUucHJvcGVydGllcy5rYWRhc3RyYWxlZ3Jvb3R0ZSArICdtPHN1cD4yPC9zdXA+JylcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy5sb2dpc2NodGlqZHN0aXBPbnRzdGFhbilcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnTG9naXNjaCB0aWpkc3RpcCBvbnRzdGFhbjogJyArIChmZWF0dXJlLnByb3BlcnRpZXMubG9naXNjaHRpamRzdGlwT250c3RhYW4gXHJcbiAgICAgICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShmZWF0dXJlLnByb3BlcnRpZXMubG9naXNjaHRpamRzdGlwT250c3RhYW4gKS50b0xvY2FsZURhdGVTdHJpbmcoJ25sLU5MJylcclxuICAgICAgICAgICAgICAgICAgICA6ICdOaWV0IGJlc2NoaWtiYWFyJykpO1xyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLmxvZ2lzY2h0aWpkc3RpcFZlcnZhbGxlbilcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnTG9naXNjaCB0aWpkc3RpcCB2ZXJ2YWxsZW46ICcgKyBmZWF0dXJlLnByb3BlcnRpZXMubG9naXNjaHRpamRzdGlwVmVydmFsbGVuIHx8IFwiXCIpXHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMubG9rYWFsSUQpXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goJ0xva2FhbElEOiAnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLmxva2FhbElEIHx8IFwiXCIpO1xyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLnBlcmNlZWxudW1tZXIpXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goJ1BlcmNlZWwgbnVtbWVyOiAnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLnBlcmNlZWxudW1tZXIgfHwgXCJcIilcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy5zZWN0aWUpXHJcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goJ1NlY3RpZTogJyArIGZlYXR1cmUucHJvcGVydGllcy5zZWN0aWUgfHwgXCJcIilcclxuXHJcbiAgICAgICAgICAgIHZhciBpZCA9ICdwb3B1cC1kZXRhaWxzLScgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KTtcclxuICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKCc8YnI+PG9ucy1idXR0b24gaWQ9XCInICsgaWQgKyAnXCIgY2xhc3M9XCJidXR0b24gcG9wdXAtZGV0YWlsc1wiPkRldGFpbHM8L29ucy1idXR0b24+Jyk7XHJcblxyXG4gICAgICAgICAgICBsYXllci5vbignYWRkJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0Lm9wZW5Qb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICAgICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2aWdhdG9yJykucHVzaFBhZ2UoJ3ZpZXdzL2RldGFpbHMuaHRtbCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGF5ZXIuYmluZFBvcHVwKHByb3BlcnRpZXMuam9pbignPGJyPicpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChmZWF0dXJlLmdlb21ldHJ5X25hbWUgPT09IFwicGxhYXRzY29vcmRpbmF0ZW5cIikge1xyXG4gICAgICAgICAgICBsYXllci5vbih7XHJcbiAgICAgICAgICAgICAgICBjbGljazogaGlnaGxpZ2h0RmVhdHVyZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25FYWNoRmVhdHVyZTIoKSB7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dMb2NhdGlvbk9uTWFwKGxhdExvbmcpIHtcclxuICAgICAgICBpZiAobWFwLmdldFpvb20oKSA8IDE3KSB7XHJcbiAgICAgICAgICAgIGdlb0pzb24uY2xlYXJMYXllcnMoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRKU09OKCdodHRwczovL2Vwc2cuaW8vdHJhbnM/ZGF0YT0nICsgbGF0TG9uZy5sbmcgKyAnLCcgKyBsYXRMb25nLmxhdCArICcmc19zcnM9NDMyNiYmdF9zcnM9Mjg5OTInLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXNwZzI4OTkyID0gcmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtcyA9ICdyZXF1ZXN0PWdldEZlYXR1cmUmJztcclxuICAgICAgICAgICAgICAgIHBhcmFtcyArPSAnc3JzTmFtZT1FUFNHOjQzMjYmJztcclxuICAgICAgICAgICAgICAgIHBhcmFtcyArPSAndmVyc2lvbj0yLjAuMCYnO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICd0eXBlbmFtZXM9a2FkYXN0cmFsZWthYXJ0djM6cGVyY2VlbCYnO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICdvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24vanNvbiYnO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICdjcWxfZmlsdGVyPUNPTlRBSU5TKGJlZ3JlbnppbmdwZXJjZWVsJTJDUE9JTlQoJyArIGVzcGcyODk5Mi54ICsgJyAnICsgZXNwZzI4OTkyLnkgKyAnKSknXHJcbiAgICAgICAgICAgICAgICBnZXRKU09OKCdodHRwczovL2dlb2RhdGEubmF0aW9uYWFsZ2VvcmVnaXN0ZXIubmwva2FkYXN0cmFsZWthYXJ0djMvd2ZzPycgKyBwYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2VvSnNvbi5jbGVhckxheWVycygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdlb0pzb24uYWRkRGF0YShkYXRhLmZlYXR1cmVzKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBpbmZvID0gTC5jb250cm9sKCk7XHJcblxyXG4gICAgaW5mby5vbkFkZCA9IGZ1bmN0aW9uIChtYXApIHtcclxuICAgICAgICB0aGlzLl9kaXYgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnaW5mbycpOyAvLyBjcmVhdGUgYSBkaXYgd2l0aCBhIGNsYXNzIFwiaW5mb1wiXHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGl2O1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBtZXRob2QgdGhhdCB3ZSB3aWxsIHVzZSB0byB1cGRhdGUgdGhlIGNvbnRyb2wgYmFzZWQgb24gZmVhdHVyZSBwcm9wZXJ0aWVzIHBhc3NlZFxyXG4gICAgaW5mby51cGRhdGUgPSBmdW5jdGlvbiAocHJvcHMpIHtcclxuICAgICAgICB2YXIgY29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHByb3BzKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gXCI8aDQ+RWlnZW5zY2hhcHBlbjo8L2g0PlwiO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IChcIjxiciAvPlwiICsgcCArIFwiOiBcIiArIHByb3BzW3BdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGl2LmlubmVySFRNTCA9IFwiPGJyIC8+U2VsZWN0ZWVyIGVlbiBwZXJjZWVsXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kaXYuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgIH07XHJcblxyXG4gICAgaW5mby5hZGRUbyhtYXApO1xyXG5cclxuICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHpvb21lZExvd0Vub3VnaCkgcmV0dXJuO1xyXG4gICAgICAgIHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLnRvYXN0KCdab29tIGluIG9tIGthZGFzdGVyIGluZm9ybWF0aWUgdGUgYmVraWprZW4uJywgeyB0aW1lb3V0OiA0MDAwLCBhbmltYXRpb246ICdmYWxsJyB9KTtcclxuICAgIH0sIDYwMDApO1xyXG5cclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignaGlkZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICBsYXllci5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtYXAucmVtb3ZlKCk7XHJcbiAgICAgICAgd2luZG93LmZuLm1hcCA9IG51bGw7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodEZlYXR1cmUoZSkge1xyXG5cclxuICAgICAgICByZXNldEhpZ2hsaWdodChlKTtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZ2VvSnNvbjIuYWRkRGF0YShlLnRhcmdldC5mZWF0dXJlLnByb3BlcnRpZXMuYmVncmVuemluZ3BlcmNlZWwpO1xyXG5cclxuICAgICAgICBtYXAuZml0Qm91bmRzKHRhcmdldC5nZXRCb3VuZHMoKSk7XHJcbiAgICAgICAgaW5mby51cGRhdGUoZS50YXJnZXQuZmVhdHVyZS5wcm9wZXJ0aWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNldEhpZ2hsaWdodChlKSB7XHJcbiAgICAgICAgaW5mby51cGRhdGUoKTtcclxuICAgICAgICBnZW9Kc29uMi5jbGVhckxheWVycygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkS2FhcnQoKSB7XHJcbiAgICAvLyBsb2FkIE9wZW5TdHJlZXRNYXAgYmFzZW1hcFxyXG4gICAgdmFyIGthYXJ0ID0gd2luZG93LkwudGlsZUxheWVyKCdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsIHtcclxuICAgICAgICBmb3JtYXQ6ICdpbWFnZS9wbmcnLFxyXG4gICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxyXG4gICAgICAgIHpJbmRleDogMCxcclxuICAgICAgICBtYXhOYXRpdmVab29tOiAxOSxcclxuICAgICAgICBtYXhab29tOiAyMSxcclxuICAgIH0pO1xyXG4gICAgd2luZG93LmZuLmxheWVyVHlwZSA9ICdrYWFydCc7XHJcbiAgICB3aW5kb3cuZm4ubGF5ZXIgPSBrYWFydDtcclxuICAgIHdpbmRvdy5mbi5tYXAuYWRkTGF5ZXIoa2FhcnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkU2F0KCkge1xyXG4gICAgdmFyIGdvb2dsZVNhdCA9IHdpbmRvdy5MLnRpbGVMYXllcignaHR0cHM6Ly97c30uZ29vZ2xlLmNvbS92dC9seXJzPXMmeD17eH0meT17eX0mej17en0nLCB7XHJcbiAgICAgICAgbWF4Wm9vbTogMjEsXHJcbiAgICAgICAgbWF4TmF0aXZlWm9vbTogMTksXHJcbiAgICAgICAgekluZGV4OiAwLFxyXG4gICAgICAgIHN1YmRvbWFpbnM6IFsnbXQwJywgJ210MScsICdtdDInLCAnbXQzJ11cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmZuLmxheWVyVHlwZSA9ICdzYXQnO1xyXG4gICAgd2luZG93LmZuLmxheWVyID0gZ29vZ2xlU2F0O1xyXG4gICAgd2luZG93LmZuLm1hcC5hZGRMYXllcihnb29nbGVTYXQpO1xyXG59XHJcblxyXG5cclxuIiwiXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIF9wcm9qNF9wcm9qX2Vwc2c0MzI2ID0gbmV3IHdpbmRvdy5wcm9qNC5Qcm9qKCdFUFNHOjQzMjYnKTsgICAgLy9zb3VyY2UgY29vcmRpbmF0ZXMgd2lsbCBiZSBpbiBMb25naXR1ZGUvTGF0aXR1ZGUsIFdHUzg0XHJcbiAgICB2YXIgX3Byb2o0X3Byb2pfZXBzZzM3ODUgPSBuZXcgd2luZG93LnByb2o0LlByb2ooJ0VQU0c6Mzc4NScpO1xyXG5cclxuICAgIHZhciBwYW5kZW5Qcm9taXNlO1xyXG4gICAgdmFyIHZlcmJsaWpmUGxhYXRzZW5Qcm9taXNlO1xyXG4gICAgdmFyIGxpZ1BsYWF0c2VuUHJvbWlzZTtcclxuICAgIHZhciBzdGFuZFBsYWF0c2VuUHJvbWlzZTtcclxuICAgIHZhciB3b29uUGxhYXRzZW5Qcm9taXNlO1xyXG5cclxuICAgIHZhciBmZWF0dXJlO1xyXG4gICAgdmFyIGdlb2pzb24zODU3O1xyXG4gICAgdmFyIHhNYXg7XHJcbiAgICB2YXIgeE1pbjtcclxuICAgIHZhciB5TWF4O1xyXG4gICAgdmFyIHlNaW47XHJcbiAgICB2YXIgcGFuZGVuO1xyXG4gICAgdmFyIGRldGFpbHNQYWdlO1xyXG4gICAgdmFyIHZlcmJsaWpmc09iamVjdGVuO1xyXG4gICAgdmFyIGxpZ1BsYWF0c2VuO1xyXG4gICAgdmFyIHN0YW5kUGxhYXRzZW47XHJcbiAgICB2YXIgd29vbnBQbGFhdHNlbjtcclxuICAgIHZhciBzdmdIVE1MO1xyXG5cclxuICAgIHdpbmRvdy5pbml0RGV0YWlsc01pc2MgPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgIHdvb25QbGFhdHNlblByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxpZ1BsYWF0c2VuUHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHN0YW5kUGxhYXRzZW5Qcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHVwRGV0YWlsTWlzY1BhZ2UocGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0dXBEZXRhaWxNaXNjUGFnZShwYWdlKSB7XHJcbiAgICAgICAgdmFyIHdvb25wbGFhdHNlbkxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29vbnBsYWF0cy1taXNjLWxpc3QtaXRlbS1jb250YWluZXInKTtcclxuICAgICAgICB2YXIgbGlnUGxhYXRzZW5MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ3BsYWF0c2VuLW1pc2MtbGlzdC1pdGVtLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHZhciBzdGFuZFBsYWF0c2VuTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFuZHBsYWF0c2VuLW1pc2MtbGlzdC1pdGVtLWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICB3b29ucFBsYWF0c2VuLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BzID0gZmVhdHVyZS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgbGlzdEl0ZW0uaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICc8b25zLWxpc3QtaXRlbT48ZGl2IGNsYXNzPVwibGVmdFwiPicgKyBwcm9wcy53b29ucGxhYXRzICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPVwicmlnaHRcIj48c21hbGw+JyArIGZlYXR1cmUuaWQucmVwbGFjZSgnLicsICcgJykgKyAnLCAnICsgJ0lkZW50aWZpY2F0aWU6ICcgKyAncHJvcHMuaWRlbnRpZmljYXRpZScgK1xyXG4gICAgICAgICAgICAgICAgJywgU3RhdHVzOiAnICsgcHJvcHMuc3RhdHVzICsgJzwvc21hbGw+PC9kaXY+PC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIHdvb25wbGFhdHNlbkxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAod29vbnBQbGFhdHNlbi5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgd29vbnBsYWF0c2VuTGlzdC5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICAgICAgJzxvbnMtbGlzdC1pdGVtPkdlZW4gd29vbnBsYWF0c2VuIGdldm9uZGVuPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsaWdQbGFhdHNlbi5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IGZlYXR1cmUucHJvcGVydGllcztcclxuICAgICAgICAgICAgdmFyIGh0bWwgPSAnPG9ucy1saXN0LWl0ZW0gZXhwYW5kYWJsZT4nO1xyXG4gICAgICAgICAgICBodG1sICs9IGZlYXR1cmUuaWQucmVwbGFjZSgnLicsICcgJyk7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJleHBhbmRhYmxlLWNvbnRlbnRcIj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkFjdHVhbGl0ZWl0c2RhdHVtOjwvYj4gJyArIChwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bVxyXG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdubC1OTCcpXHJcbiAgICAgICAgICAgICAgICA6ICdOaWV0IGJlc2NoaWtiYWFyJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5IdWlzbGV0dGVyPC9iPiAnICsgKHByb3BzLmh1aXNsZXR0ZXIgfHwgJycpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+SHVpc251bW1lcjo8L2I+ICcgKyBwcm9wcy5odWlzbnVtbWVyICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+SWRlbnRpZmljYXRpZTo8L2I+ICcgKyBwcm9wcy5pZGVudGlmaWNhdGllICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+T3BlbmJhcmUgcnVpbXRlOjwvYj4gJyArIHByb3BzLm9wZW5iYXJlX3J1aW10ZSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPlBvc3Rjb2RlOjwvYj4gJyArIHByb3BzLnBvc3Rjb2RlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+U3RhdHVzOjwvYj4gJyArIHByb3BzLnN0YXR1cyArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPlRvZXZvZWdpbmc6PC9iPiAnICsgKHByb3BzLnRvZXZvZWdpbmcgfHwgJycpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+V29vbnBsYWF0czo8L2I+ICcgKyBwcm9wcy53b29ucGxhYXRzICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgICAgICBsaWdQbGFhdHNlbkxpc3QuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGxpZ1BsYWF0c2VuLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBsaWdQbGFhdHNlbkxpc3QuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICc8b25zLWxpc3QtaXRlbT5HZWVuIGxpZ3BsYWF0c2VuIGdldm9uZGVuPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGFuZFBsYWF0c2VuLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BzID0gZmVhdHVyZS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICB2YXIgaHRtbCA9ICc8b25zLWxpc3QtaXRlbSBleHBhbmRhYmxlPic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gZmVhdHVyZS5pZC5yZXBsYWNlKCcuJywgJyAnKTtcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImV4cGFuZGFibGUtY29udGVudFwiPic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+QWN0dWFsaXRlaXRzZGF0dW06PC9iPiAnICsgKHByb3BzLmFjdHVhbGl0ZWl0c2RhdHVtXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKHByb3BzLmFjdHVhbGl0ZWl0c2RhdHVtKS50b0xvY2FsZURhdGVTdHJpbmcoJ25sLU5MJylcclxuICAgICAgICAgICAgICAgIDogJ05pZXQgYmVzY2hpa2JhYXInKSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkh1aXNsZXR0ZXI8L2I+ICcgKyAocHJvcHMuaHVpc2xldHRlciB8fCAnJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5IdWlzbnVtbWVyOjwvYj4gJyArIHByb3BzLmh1aXNudW1tZXIgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5JZGVudGlmaWNhdGllOjwvYj4gJyArIHByb3BzLmlkZW50aWZpY2F0aWUgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5PcGVuYmFyZSBydWltdGU6PC9iPiAnICsgcHJvcHMub3BlbmJhcmVfcnVpbXRlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+UG9zdGNvZGU6PC9iPiAnICsgcHJvcHMucG9zdGNvZGUgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5TdGF0dXM6PC9iPiAnICsgcHJvcHMuc3RhdHVzICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+VG9ldm9lZ2luZzo8L2I+ICcgKyAocHJvcHMudG9ldm9lZ2luZyB8fCAnJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5Xb29ucGxhYXRzOjwvYj4gJyArIHByb3BzLndvb25wbGFhdHMgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgICAgIHN0YW5kUGxhYXRzZW5MaXN0LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzdGFuZFBsYWF0c2VuLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzdGFuZFBsYWF0c2VuTGlzdC5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICAgICAgJzxvbnMtbGlzdC1pdGVtPkdlZW4gc3RhbmRwbGFhdHNlbiBnZXZvbmRlbjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cuaW5pdERldGFpbHNWZXJibGlqZk9iamVjdERldGFpbCA9IGZ1bmN0aW9uIChwYWdlKSB7XHJcbiAgICAgICAgdmFyIHZlcmJsaWpmc29iamVjdCA9IHBhZ2UuZGF0YS52ZXJibGlqZm9iamVjdDtcclxuICAgICAgICB2YXIgcHJvcHMgPSB2ZXJibGlqZnNvYmplY3QucHJvcGVydGllcztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tYWN0dWFsaXRlaXRzZGF0dW0nKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bVxyXG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdubC1OTCcpXHJcbiAgICAgICAgICAgICAgICA6ICdOaWV0IGJlc2NoaWtiYWFyJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tYm91d2phYXInKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5ib3V3amFhciB8fCAnTmlldCBiZXNjaGlrYmFhcic7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLWdlYnJ1aWtzZG9lbCcpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLmdlYnJ1aWtzZG9lbCB8fCAnTmlldCBiZXNjaGlrYmFhcic7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLWh1aXNsZXR0ZXInKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5odWlzbGV0dGVyIHx8ICdOaWV0IHZhbiB0b2VwYXNzaW5nJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8taHVpc251bW1lcicpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLmh1aXNudW1tZXIgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1pZGVudGlmaWNhdGllJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMuaWRlbnRpZmljYXRpZSB8fCAnTmlldCBiZXNjaGlrYmFhcic7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLW9wZW5iYXJlLXJ1aW10ZScpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLm9wZW5iYXJlX3J1aW10ZSB8fCAnTmlldCBiZXNjaGlrYmFhcic7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLW9wcGVydmxha3RlJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMub3BwZXJ2bGFrdGUgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1wYW5kaWRlbnRpZmljYXRpZScpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLnBhbmRpZGVudGlmaWNhdGllIHx8ICdOaWV0IGJlc2NoaWtiYWFyJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tcGFuZHN0YXR1cycpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLnBhbmRzdGF0dXMgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1wb3N0Y29kZScpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLnBvc3Rjb2RlO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1zdGF0dXMnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5zdGF0dXMgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by10b2V2b2VnaW5nJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMudG9ldm9lZ2luZyB8fCAnTmlldCB2YW4gdG9lcGFzc2luZyc7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLXdvb25wbGFhdHMnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy53b29ucGxhYXRzO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cuaW5pdERldGFpbHNQYW5kZW4gPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgIHBhbmRlblByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtcGFuZGVuLWxpc3QtY29udGVudCcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGh0bWwgPSAnJztcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5kZW4uZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IHBhbmRlbi5mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPG9ucy1saXN0LWl0ZW0gZXhwYW5kYWJsZT4nO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhdGhzID0gdG9TVkdQYXRoc0FycihwYW5kZW4uZmVhdHVyZXNbaV0sIDI1MCwgMjUwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3N0eWxlJzogJ3N0cm9rZTojNjYwMDAwOyBmaWxsOiAjRjBGOEZGO3N0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAgICAgICAgICd2ZWN0b3ItZWZmZWN0JzogJ25vbi1zY2FsaW5nLXN0cm9rZSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSBwYW5kZW4uZmVhdHVyZXNbaV0uaWQucmVwbGFjZSgnLicsICcgJyk7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiZXhwYW5kYWJsZS1jb250ZW50XCI+JztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxzdmcgY2xhc3M9XCJwYW5kLXN2Z1wiIHdpZHRoPVwiMjAwXCIgaGVpZ2h0PVwiMjAwXCIgdmlld0JveD1cIjAgMCAyNTAgMjUwXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9IHBhdGhzLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9zdmc+JztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+T3BwZXJ2bGFrdGUgKG1pbik6PC9iPiAnICsgcHJvcHMub3BwZXJ2bGFrdGVfbWluICsgJ208c3VwPjI8L3N1Yj48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5PcHBlcnZsYWt0ZSAobWF4KTo8L2I+ICcgKyBwcm9wcy5vcHBlcnZsYWt0ZV9tYXggKyAnbTxzdXA+Mjwvc3ViPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkFjdHVhbGl0ZWl0c2RhdHVtOjwvYj4gJyArIChwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bSB8fCAnTmlldCBiZXNjaGlrYmFhcicpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkdlYnJ1aWtzZG9lbDo8L2I+ICcgKyAocHJvcHMuZ2VicnVpa3Nkb2VsIHx8ICdOaWV0IGJlc2NoaWtiYWFyL3ZhbiB0b2VwYXNzaW5nJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+Qm91d2phYXI6PC9iPiAnICsgKHByb3BzLmJvdXdqYWFyIHx8ICdOaWV0IGJlc2NoaWtiYWFyJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+SWRlbnRpZmljYXRpZTo8L2I+ICcgKyAocHJvcHMuaWRlbnRpZmljYXRpZSB8fCAnTmlldCBiZXNjaGlrYmFhcicpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPlN0YXR1czo8L2I+ICcgKyAocHJvcHMuc3RhdHVzIHx8ICdOaWV0IGJlc2NoaWtiYWFyJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYW5kZW4uZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8aDM+R2VlbiBwYW5kZW4gb3AgZGl0IHBlcmNlZWwuPC9oMz4nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5pbml0RGV0YWlsc1ZlcmJsaWpmc1BsYWF0c2VuID0gZnVuY3Rpb24gKHBhZ2UpIHtcclxuICAgICAgICB2ZXJibGlqZlBsYWF0c2VuUHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12ZXJibGlqZnBsYWF0c2VuLWxpc3QnKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2ZXJibGlqZnNPYmplY3Rlbi5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmVyYmxpamZvYmplY3QgPSB2ZXJibGlqZnNPYmplY3Rlbi5mZWF0dXJlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSB2ZXJibGlqZm9iamVjdC5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IHRvU1ZHUGF0aHNBcnIoeyB0eXBlOiB2ZXJibGlqZm9iamVjdC50eXBlLCBnZW9tZXRyeTogcHJvcHMucGFuZGdlb21ldHJpZSB9LCAyNTAsIDI1MCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3R5bGUnOiAnc3Ryb2tlOiM2NjAwMDA7IGZpbGw6ICNGMEY4RkY7c3Ryb2tlLXdpZHRoOjAuNXB4OycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd2ZWN0b3ItZWZmZWN0JzogJ25vbi1zY2FsaW5nLXN0cm9rZSdcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaHRtbCA9ICc8b25zLWxpc3QtaXRlbSB0YXBwYWJsZT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJsZWZ0XCI+J1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxzdmcgY2xhc3M9XCJwYW5kLXN2Z1wiIHdpZHRoPVwiNDBcIiBoZWlnaHQ9XCI0MFwiIHZpZXdCb3g9XCIwIDAgMjUwIDI1MFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gcGF0aHMuam9pbignJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9zdmc+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwiY2VudGVyXCI+JztcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9IFtwcm9wcy5vcGVuYmFyZV9ydWltdGUsIHByb3BzLmh1aXNudW1tZXIgKyBwcm9wcy5odWlzbGV0dGVyICsgKHByb3BzLnRvZXZvZWdpbmcgfHwgJycpICsgJywnLCBwcm9wcy5wb3N0Y29kZSArICcsJywgcHJvcHMud29vbnBsYWF0c10uam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVDbG9zdXJlID0gdmVyYmxpamZzT2JqZWN0ZW4uZmVhdHVyZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZWwuZmlyc3RDaGlsZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0b3InKS5wdXNoUGFnZSgndmlld3MvZGV0YWlscy12ZXJibGlqZm9iamVjdC1kZXRhaWwuaHRtbCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgdmVyYmxpamZvYmplY3Q6IHZlcmJsaWpmb2JqZWN0IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChlbC5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2ZXJibGlqZnNPYmplY3Rlbi5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XHJcbiAgICAgICAgICAgICAgICBlbC5pbm5lclRleHQgPSAnR2VlbiB2ZXJibGlqZnBsYWF0c2VuIG9wIGRpdCBwZXJjZWVsLic7XHJcbiAgICAgICAgICAgICAgICBsaXN0LmFwcGVuZENoaWxkKGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHdpbmRvdy5pbml0RGV0YWlsc0dlbmVyYWwgPSBmdW5jdGlvbiBpbml0RGV0YWlsc0dlbmVyYWwocGFnZSkge1xyXG4gICAgICAgIHBhbmRlblByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkZXRhaWxzU3ZnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtc3ZnJyk7XHJcbiAgICAgICAgICAgIGRldGFpbHNTdmcuaW5uZXJIVE1MID0gc3ZnSFRNTDtcclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5mbi5nZXRHZW1lZW50ZUNvZGVzKGZ1bmN0aW9uIChjb2Rlcykge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbWVlbnRlJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgICAgICBjb2Rlc1tmZWF0dXJlLnByb3BlcnRpZXMua2FkYXN0cmFsZUdlbWVlbnRlQ29kZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dlbWVlbnRlLWNvZGUnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzLmthZGFzdHJhbGVHZW1lZW50ZUNvZGU7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2FkYXN0cmFsZS1ncm9vdHRlJykuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllcy5rYWRhc3RyYWxlZ3Jvb3R0ZS50b0xvY2FsZVN0cmluZygpICsgJ208c3VwPjI8L3N1Yj4nO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2lzY2gtb250c3RhYW4nKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoZmVhdHVyZS5wcm9wZXJ0aWVzLmxvZ2lzY2h0aWpkc3RpcE9udHN0YWFuKVxyXG4gICAgICAgICAgICAgICAgICAgIC50b0xvY2FsZURhdGVTdHJpbmcoJ25sLU5MJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLmxvZ2lzY2h0aWpkc3RpcFZlcnZhbGxlbikge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2lzY2gtdmVydmFsbGVuJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgICAgICBuZXcgRGF0ZShmZWF0dXJlLnByb3BlcnRpZXMubG9naXNjaHRpamRzdGlwT250c3RhYW4pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50b0xvY2FsZURhdGVTdHJpbmcoJ25sLU5MJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9naXNjaC12ZXJ2YWxsZW4nKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICAgICAgICAgICdOaWV0IHZhbiB0b2VwYXNzaW5nJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlZWwtbnVtbWVyJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllcy5wZXJjZWVsbnVtbWVyXHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VlbC1sb24nKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzLnBsYWF0c2Nvb3JkaW5hdGVuLmNvb3JkaW5hdGVzWzBdO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlZWwtbGF0JykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllcy5wbGFhdHNjb29yZGluYXRlbi5jb29yZGluYXRlc1sxXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkbXMgPSBjb252ZXJ0RE1TKGZlYXR1cmUucHJvcGVydGllcy5wbGFhdHNjb29yZGluYXRlbi5jb29yZGluYXRlc1sxXSwgZmVhdHVyZS5wcm9wZXJ0aWVzLnBsYWF0c2Nvb3JkaW5hdGVuLmNvb3JkaW5hdGVzWzBdKTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJjZWVsLWxvbi1kbXMnKS5pbm5lclRleHQgPSBkbXNbMV07XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VlbC1sYXQtZG1zJykuaW5uZXJUZXh0ID0gZG1zWzBdO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlZWwtc2VjdGllJykuaW5uZXJUZXh0ID0gZmVhdHVyZS5wcm9wZXJ0aWVzLnNlY3RpZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgd2luZG93LmluaXREZXRhaWxzID0gZnVuY3Rpb24gaW5pdERldGFpbHMocGFnZSkge1xyXG4gICAgICAgIGRldGFpbHNQYWdlID0gcGFnZTtcclxuICAgICAgICBwYW5kZW5Qcm9taXNlID0gX3Byb21pc2UoKTtcclxuICAgICAgICB2ZXJibGlqZlBsYWF0c2VuUHJvbWlzZSA9IF9wcm9taXNlKCk7XHJcbiAgICAgICAgd29vblBsYWF0c2VuUHJvbWlzZSA9IF9wcm9taXNlKCk7XHJcbiAgICAgICAgbGlnUGxhYXRzZW5Qcm9taXNlID0gX3Byb21pc2UoKTtcclxuICAgICAgICBzdGFuZFBsYWF0c2VuUHJvbWlzZSA9IF9wcm9taXNlKCk7XHJcblxyXG4gICAgICAgIGZlYXR1cmUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHBhZ2UuZGF0YS5mZWF0dXJlKSk7XHJcblxyXG4gICAgICAgIHRyYW5zZm9ybVRvRXNwZzM4NTdPblNwb3QoZmVhdHVyZSk7XHJcbiAgICAgICAgdmFyIGdlb2pzb24zODU3ID0gZmVhdHVyZTtcclxuXHJcbiAgICAgICAgeE1pbiA9IEluZmluaXR5O1xyXG4gICAgICAgIHhNYXggPSAtSW5maW5pdHk7XHJcbiAgICAgICAgeU1pbiA9IEluZmluaXR5O1xyXG4gICAgICAgIHlNYXggPSAtSW5maW5pdHk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9qc29uMzg1Ny5nZW9tZXRyeS5jb29yZGluYXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGdlb2pzb24zODU3Lmdlb21ldHJ5LmNvb3JkaW5hdGVzW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgeCA9IGdlb2pzb24zODU3Lmdlb21ldHJ5LmNvb3JkaW5hdGVzW2ldW2pdWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIHkgPSBnZW9qc29uMzg1Ny5nZW9tZXRyeS5jb29yZGluYXRlc1tpXVtqXVsxXTtcclxuICAgICAgICAgICAgICAgIGlmICh4IDwgeE1pbikgeE1pbiA9IHg7XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA+IHhNYXgpIHhNYXggPSB4O1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPCB5TWluKSB5TWluID0geTtcclxuICAgICAgICAgICAgICAgIGlmICh5ID4geU1heCkgeU1heCA9IHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBnZW9qc29uMnN2Z19jb252ZXJ0ZXIgPSB3aW5kb3cuZ2VvanNvbjJzdmcoe1xyXG4gICAgICAgICAgICB2aWV3cG9ydFNpemU6IHsgd2lkdGg6IDI1MCwgaGVpZ2h0OiAyNTAgfSxcclxuICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgJ3N0eWxlJzogJ3N0cm9rZTojMDA2NjAwOyBmaWxsOiAjRjBGOEZGO3N0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAgICAgJ3ZlY3Rvci1lZmZlY3QnOiAnbm9uLXNjYWxpbmctc3Ryb2tlJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtYXBFeHRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHhNaW4sXHJcbiAgICAgICAgICAgICAgICByaWdodDogeE1heCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogeU1pbixcclxuICAgICAgICAgICAgICAgIHRvcDogeU1heFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgc3ZnU3RyaW5ncyA9IGdlb2pzb24yc3ZnX2NvbnZlcnRlci5jb252ZXJ0KGdlb2pzb24zODU3KTtcclxuXHJcbiAgICAgICAgc3ZnSFRNTCA9IHN2Z1N0cmluZ3Muam9pbignJyk7XHJcblxyXG4gICAgICAgIHZhciB2ZXJibGlqZnNvYmplY3RlblVSTCA9IGdldEJhZ1R5cGVzVVJMKFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XSwgJ3ZlcmJsaWpmc29iamVjdCcsICdFUFNHOjM4NTcnKVxyXG4gICAgICAgIGdldEpTT04odmVyYmxpamZzb2JqZWN0ZW5VUkwsIGZ1bmN0aW9uICh2bykge1xyXG4gICAgICAgICAgICB2ZXJibGlqZnNPYmplY3RlbiA9IHZvO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12ZXJibGlqZnBsYWF0c2VuLXRhYicpLnNldEF0dHJpYnV0ZSgnYmFkZ2UnLCB2by5mZWF0dXJlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB2ZXJibGlqZlBsYWF0c2VuUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgbGlnUGxhYXRzZW5VUkwgPSBnZXRCYWdUeXBlc1VSTChbeE1pbiwgeU1pbiwgeE1heCwgeU1heF0sICdsaWdwbGFhdHMnLCAnRVBTRzozODU3Jyk7XHJcbiAgICAgICAgZ2V0SlNPTihsaWdQbGFhdHNlblVSTCwgZnVuY3Rpb24gKGxwKSB7XHJcbiAgICAgICAgICAgIGxpZ1BsYWF0c2VuID0gbHA7XHJcbiAgICAgICAgICAgIGxpZ1BsYWF0c2VuUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgc3RhbmRQbGFhdHNlblVSTCA9IGdldEJhZ1R5cGVzVVJMKFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XSwgJ3N0YW5kcGxhYXRzJywgJ0VQU0c6Mzg1NycpO1xyXG4gICAgICAgIGdldEpTT04oc3RhbmRQbGFhdHNlblVSTCwgZnVuY3Rpb24gKGxwKSB7XHJcbiAgICAgICAgICAgIHN0YW5kUGxhYXRzZW4gPSBscDtcclxuICAgICAgICAgICAgc3RhbmRQbGFhdHNlblByb21pc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHdvb25QbGFhdHNlblVSTCA9IGdldEJhZ1R5cGVzVVJMKFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XSwgJ3dvb25wbGFhdHMnLCAnRVBTRzozODU3Jyk7XHJcbiAgICAgICAgZ2V0SlNPTih3b29uUGxhYXRzZW5VUkwsIGZ1bmN0aW9uICh3cCkge1xyXG4gICAgICAgICAgICB3b29ucFBsYWF0c2VuID0gd3A7XHJcbiAgICAgICAgICAgIHdvb25QbGFhdHNlblByb21pc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHBhbmRlblVSTCA9IGdldEJhZ1R5cGVzVVJMKFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XSwgJ3BhbmQnLCAnRVBTRzozODU3Jyk7XHJcbiAgICAgICAgZ2V0SlNPTihwYW5kZW5VUkwsIGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHBhbmRlbiA9IHA7XHJcbiAgICAgICAgICAgIHZhciBwYW5kZW5TVkcgPSBnZW9qc29uMnN2Z19jb252ZXJ0ZXIuY29udmVydChwYW5kZW4sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3R5bGUnOiAnc3Ryb2tlOiM2NjAwMDA7IGZpbGw6dHJhbnNwYXJlbnQ7IHN0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndmVjdG9yLWVmZmVjdCc6ICdub24tc2NhbGluZy1zdHJva2UnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzdmdIVE1MICs9IHBhbmRlblNWRy5qb2luKCcnKTtcclxuICAgICAgICAgICAgc3ZnSFRNTCArPSAnPHRleHQgeD1cIjEyMFwiIHk9XCIxMjBcIiB0cmFuc2Zvcm09XCJyb3RhdGUoJyArIC1mZWF0dXJlLnByb3BlcnRpZXMucGVyY2VlbG51bW1lcl9yb3RhdGllICsgJywgMTIwLCAxMjApXCI+JyArIGZlYXR1cmUucHJvcGVydGllcy5wZXJjZWVsbnVtbWVyICsgJzwvdGV4dD4nO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtcGFuZGVuLXRhYicpLnNldEF0dHJpYnV0ZSgnYmFkZ2UnLCBwYW5kZW4uZmVhdHVyZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgcGFuZGVuUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvRGVncmVlc01pbnV0ZXNBbmRTZWNvbmRzKGNvb3JkaW5hdGUpIHtcclxuICAgICAgICB2YXIgYWJzb2x1dGUgPSBNYXRoLmFicyhjb29yZGluYXRlKTtcclxuICAgICAgICB2YXIgZGVncmVlcyA9IE1hdGguZmxvb3IoYWJzb2x1dGUpO1xyXG4gICAgICAgIHZhciBtaW51dGVzTm90VHJ1bmNhdGVkID0gKGFic29sdXRlIC0gZGVncmVlcykgKiA2MDtcclxuICAgICAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IobWludXRlc05vdFRydW5jYXRlZCk7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKChtaW51dGVzTm90VHJ1bmNhdGVkIC0gbWludXRlcykgKiA2MCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWdyZWVzICsgXCLCsCBcIiArIG1pbnV0ZXMgKyBcIicgXCIgKyBzZWNvbmRzICsgJ1wiJztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb252ZXJ0RE1TKGxhdCwgbG5nKSB7XHJcbiAgICAgICAgdmFyIGxhdGl0dWRlID0gdG9EZWdyZWVzTWludXRlc0FuZFNlY29uZHMobGF0KTtcclxuICAgICAgICB2YXIgbGF0aXR1ZGVDYXJkaW5hbCA9IE1hdGguc2lnbihsYXQpID49IDAgPyBcIk5cIiA6IFwiU1wiO1xyXG5cclxuICAgICAgICB2YXIgbG9uZ2l0dWRlID0gdG9EZWdyZWVzTWludXRlc0FuZFNlY29uZHMobG5nKTtcclxuICAgICAgICB2YXIgbG9uZ2l0dWRlQ2FyZGluYWwgPSBNYXRoLnNpZ24obG5nKSA+PSAwID8gXCJFXCIgOiBcIldcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtsYXRpdHVkZSArIFwiIFwiICsgbGF0aXR1ZGVDYXJkaW5hbCwgbG9uZ2l0dWRlICsgXCIgXCIgKyBsb25naXR1ZGVDYXJkaW5hbF07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0QmFnVHlwZXNVUkwoYmJveCwgdHlwZSwgc3JzKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAncmVxdWVzdD1nZXRGZWF0dXJlJztcclxuICAgICAgICBvcHRpb25zICs9ICcmdmVyc2lvbj0yLjAuMCc7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnR5cGVuYW1lcz1iYWc6JyArIHR5cGU7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnNyc05hbWU9JyArIHNycztcclxuICAgICAgICBvcHRpb25zICs9ICcmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gXCImY3FsX2ZpbHRlcj1CQk9YKGdlb21ldHJpZSwgXCIgKyBiYm94LmpvaW4oJywnKSArIFwiLCdcIiArIHNycyArIFwiJylcIjtcclxuICAgICAgICByZXR1cm4gJ2h0dHBzOi8vZ2VvZGF0YS5uYXRpb25hYWxnZW9yZWdpc3Rlci5ubC9iYWcvd2ZzPycgKyBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFBlcmNlZWxJbWFnZVVSTChwZXJjZWVsTnVtbWVyLCBsYXRMb25CYm94KSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAncmVxdWVzdD1HZXRNYXAnO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZsYXllcnM9cGVyY2VlbCc7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnN0eWxlcz0nO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZmb3JtYXQ9aW1hZ2UvcG5nJztcclxuICAgICAgICBvcHRpb25zICs9ICcmdHJhbnNwYXJlbnQ9dHJ1ZSc7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnZlcnNpb249MS4zLjAnO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZ3aWR0aD0yNTYnO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZoZWlnaHQ9MjU2JztcclxuICAgICAgICBvcHRpb25zICs9ICcmY3JzPUVQU0c6Mjg5OTInO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZjcWxfZmlsdGVyPXBlcmNlZWxudW1tZXIlMjAlM0QlMjAnICsgcGVyY2VlbE51bW1lcjtcclxuICAgICAgICBvcHRpb25zICs9ICcmYmJveD0nICsgbGF0TG9uQmJveC5qb2luKCcsJyk7XHJcbiAgICAgICAgcmV0dXJuICdodHRwczovL2dlb2RhdGEubmF0aW9uYWFsZ2VvcmVnaXN0ZXIubmwva2FkYXN0cmFsZWthYXJ0djMvd21zPycgKyBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvU1ZHUGF0aHNBcnIoZ2VvanNvbjM4NTcsIHZid2lkdGgsIHZiaGVpZ2h0LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgeE1pbiA9IEluZmluaXR5O1xyXG4gICAgICAgIHhNYXggPSAtSW5maW5pdHk7XHJcbiAgICAgICAgeU1pbiA9IEluZmluaXR5O1xyXG4gICAgICAgIHlNYXggPSAtSW5maW5pdHk7XHJcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvanNvbjM4NTcuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XHJcbiAgICAgICAgaWYgKGdlb2pzb24zODU3Lmdlb21ldHJ5LnR5cGUgIT09IFwiTXVsdGlQb2x5Z29uXCIpIGNvb3JkaW5hdGVzID0gW2Nvb3JkaW5hdGVzXVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb29yZGluYXRlc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb29yZGluYXRlc1tpXVtqXS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gY29vcmRpbmF0ZXNbaV1bal1ba11bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBjb29yZGluYXRlc1tpXVtqXVtrXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA8IHhNaW4pIHhNaW4gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID4geE1heCkgeE1heCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPCB5TWluKSB5TWluID0geTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IHlNYXgpIHlNYXggPSB5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBnZW9qc29uMnN2Z19jb252ZXJ0ZXIgPSB3aW5kb3cuZ2VvanNvbjJzdmcoe1xyXG4gICAgICAgICAgICB2aWV3cG9ydFNpemU6IHsgd2lkdGg6IDI1MCwgaGVpZ2h0OiAyNTAgfSxcclxuICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcclxuICAgICAgICAgICAgLy8gYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAvLyAgICAgJ3N0eWxlJzogJ3N0cm9rZTojMDBmZjAwOyBmaWxsOiAjRjBGOEZGO3N0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAvLyAgICAgJ3ZlY3Rvci1lZmZlY3QnOiAnbm9uLXNjYWxpbmctc3Ryb2tlJ1xyXG4gICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICBtYXBFeHRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHhNaW4sXHJcbiAgICAgICAgICAgICAgICByaWdodDogeE1heCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogeU1pbixcclxuICAgICAgICAgICAgICAgIHRvcDogeU1heFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBnZW9qc29uMnN2Z19jb252ZXJ0ZXIuY29udmVydChnZW9qc29uMzg1Nyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtVG9Fc3BnMzg1N09uU3BvdChmZWF0dXJlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzLmxlbmd0aDsgaCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbaF07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYzIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IHdpbmRvdy5wcm9qNC5Qb2ludChjMltpXVswXSwgYzJbaV1bMV0pOyAgIC8vYW55IG9iamVjdCB3aWxsIGRvIGFzIGxvbmcgYXMgaXQgaGFzICd4JyBhbmQgJ3knIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5wcm9qNC50cmFuc2Zvcm0oX3Byb2o0X3Byb2pfZXBzZzQzMjYsIF9wcm9qNF9wcm9qX2Vwc2czNzg1LCBwKTtcclxuICAgICAgICAgICAgICAgIGMyW2ldWzBdID0gcC54O1xyXG4gICAgICAgICAgICAgICAgYzJbaV1bMV0gPSBwLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG5cclxuXHJcbiIsIlxyXG5mdW5jdGlvbiBpbml0U2VhcmNoUGFnZShwYWdlKSB7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uLXNlYXJjaCcpXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb24tc2VhcmNoLWlucHV0JykudmFsdWU7XHJcbiAgICAgICAgICAgIGdldEpTT04oJ2h0dHBzOi8vYXBpLnRlbGVwb3J0Lm9yZy9hcGkvY2l0aWVzLz9zZWFyY2g9JyArIHRlcm0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcmVzLl9lbWJlZGRlZFsnY2l0eTpzZWFyY2gtcmVzdWx0cyddO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFtpXS5tYXRjaGluZ19mdWxsX25hbWUubWF0Y2goL25ldGhlcmxhbmRzJC9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGxpc3RbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlU2VhcmNoKGZpbHRlcmVkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlU2VhcmNoKHJlc3VsdHMpIHtcclxuICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbi1zZWFyY2gtcmVzdWx0cycpO1xyXG4gICAgICAgIHdoaWxlIChsaXN0LmZpcnN0Q2hpbGQpIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKTtcclxuICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKGNpdHkpIHtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB2YXIgY2l0eU5hbWUgPSBjaXR5Lm1hdGNoaW5nX2Z1bGxfbmFtZS5zcGxpdCgnLCAnKS5zbGljZSgwLCAyKS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICc8b25zLWxpc3QtaXRlbSB0YXBwYWJsZT4nICsgY2l0eU5hbWUgKyAnPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIGRpdi5maXJzdENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmZuLmNpdHkgPSBjaXR5O1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmZuLmxvYWQoJ3ZpZXdzL21hcC5odG1sJylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGl2LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbi1zZWFyY2gtY2FyZCcpLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnJyk7XHJcbiAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJzxvbnMtbGlzdC1pdGVtPkdlZW4gcmVzdWx0YXRlbjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=
