/* onsenui v2.10.1 - 2018-05-28 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ons=e()}(this,function(){"use strict";function t(t){kt.set(t,!0)}function e(t){var e=wt.get(t,[])||[];wt.delete(t),e.forEach(function(t){return t()})}function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if(void 0===kt&&(kt=new WeakMap,wt=new WeakMap),function(t,e){wt.has(t)||wt.set(t,[]),wt.get(t).push(e)}(n,i),function(e){return e.childNodes.length>0&&t(e),kt.has(e)}(n))e(n);else{new MutationObserver(function(i){t(n),e(n)}).observe(n,{childList:!0,characterData:!0}),setImmediate(function(){t(n),e(n)})}}function i(t){t._destroy instanceof Function?t._destroy():t.remove()}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}function r(t){var e=gi.has(t),n=/^[a-z][.0-9_a-z]*-[\-.0-9_a-z]*$/.test(t);return!e&&n}function a(t){var e=t.isConnected;if(void 0!==e)return e;for(var n=t;n&&!(n.__CE_isImportDocument||n instanceof Document);)n=n.parentNode||(window.ShadowRoot&&n instanceof ShadowRoot?n.host:void 0);return!(!n||!(n.__CE_isImportDocument||n instanceof Document))}function s(t,e){for(var n=e;n&&n!==t&&!n.nextSibling;)n=n.parentNode;return n&&n!==t?n.nextSibling:null}function l(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,i=t;i;){if(i.nodeType===Node.ELEMENT_NODE){var o=i;e(o);var r=o.localName;if("link"===r&&"import"===o.getAttribute("rel")){var a=o.import;if(a instanceof Node&&!n.has(a)){n.add(a);for(var u=a.firstChild;u;u=u.nextSibling)l(u,e,n)}i=s(t,o);continue}if("template"===r){i=s(t,o);continue}var c=o.__CE_shadowRoot;if(c)for(var h=c.firstChild;h;h=h.nextSibling)l(h,e,n)}i=function(t,e){return e.firstChild?e.firstChild:s(t,e)}(t,i)}}function u(t,e,n){t[e]=n}var c={},h=function(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return function(t){return"-"+e+"-"+Q.hyphenate(t)}}(),d=function(t,e){return Object.keys(e).forEach(function(n){n in t.style?t.style[n]=e[n]:h(n)in t.style?t.style[h(n)]=e[n]:Q.warn("No such style property: "+n)}),t};d.clear=function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split(/\s+/).reduce(function(t,e){return t.concat([Q.hyphenate(e),h(e)])},[]),n=[],i=t.style.length-1;i>=0;i--)!function(i){var o=t.style[i];(0===e.length||e.some(function(t){return 0===o.indexOf(t)}))&&n.push(o)}(i);n.forEach(function(e){return t.style[e]=""}),""===t.getAttribute("style")&&t.removeAttribute("style")};var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},_=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},v=function t(e,n,i){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,n,i)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(i)},b=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},y=function(t,e){var n={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i]);return n},k=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},w=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},E=window.HTMLElement,C=new(function(){function t(){p(this,t),this._selectedPlatform=null,this._ignorePlatformSelect=!1}return g(t,[{key:"select",value:function(t){"string"==typeof t&&(this._selectedPlatform=t.trim().toLowerCase())}},{key:"_getSelectedPlatform",value:function(){return this._ignorePlatformSelect?null:this._selectedPlatform}},{key:"_runOnActualPlatform",value:function(t){this._ignorePlatformSelect=!0;var e=t();return this._ignorePlatformSelect=!1,e}},{key:"isWebView",value:function(){if("loading"===document.readyState||"uninitialized"==document.readyState)throw new Error("isWebView() method is available after dom contents loaded.");return!!(window.cordova||window.phonegap||window.PhoneGap)}},{key:"isIPhone",value:function(){return/iPhone/i.test(navigator.userAgent)}},{key:"isIPhoneX",value:function(){return this.isIPhone()&&(375===window.screen.width&&812===window.screen.height||812===window.screen.width&&375===window.screen.height)}},{key:"isIPad",value:function(){return/iPad/i.test(navigator.userAgent)}},{key:"isIPod",value:function(){return/iPod/i.test(navigator.userAgent)}},{key:"isIOS",value:function(){return this._getSelectedPlatform()?"ios"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/iPhone|iPad|iPod/i.test(navigator.userAgent):/iOS/i.test(device.platform)}},{key:"isIOS7above",value:function(){if("object"===("undefined"==typeof device?"undefined":f(device))&&!/browser/i.test(device.platform))return/iOS/i.test(device.platform)&&parseInt(device.version.split(".")[0])>=7;if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){var t=(navigator.userAgent.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,".");return parseInt(t.split(".")[0])>=7}return!1}},{key:"isIOSSafari",value:function(){var t=window.navigator,e=t.userAgent;return!(!this.isIOS()||-1===e.indexOf("Safari")||-1===e.indexOf("Version")||t.standalone)}},{key:"isWKWebView",value:function(){var t=/constructor/i.test(E);return!(!(this.isIOS()&&window.webkit&&window.webkit.messageHandlers&&window.indexedDB)||t)}},{key:"isUIWebView",value:function(){return!(!this.isIOS()||this.isIOSSafari()||this.isWKWebView())}},{key:"isAndroidPhone",value:function(){return/Android/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)}},{key:"isAndroidTablet",value:function(){return/Android/i.test(navigator.userAgent)&&!/Mobile/i.test(navigator.userAgent)}},{key:"isAndroid",value:function(){return this._getSelectedPlatform()?"android"===this._getSelectedPlatform():/Android/i.test("object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?navigator.userAgent:device.platform)}},{key:"isWP",value:function(){return this._getSelectedPlatform()?"wp"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/Windows Phone|IEMobile|WPDesktop/i.test(navigator.userAgent):/Win32NT|WinCE/i.test(device.platform)}},{key:"isBlackBerry",value:function(){return this._getSelectedPlatform()?"blackberry"===this._getSelectedPlatform():"object"!==("undefined"==typeof device?"undefined":f(device))||/browser/i.test(device.platform)?/BlackBerry|RIM Tablet OS|BB10/i.test(navigator.userAgent):/BlackBerry/i.test(device.platform)}},{key:"isOpera",value:function(){return this._getSelectedPlatform()?"opera"===this._getSelectedPlatform():!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0}},{key:"isFirefox",value:function(){return this._getSelectedPlatform()?"firefox"===this._getSelectedPlatform():"undefined"!=typeof InstallTrigger}},{key:"isSafari",value:function(){return this._getSelectedPlatform()?"safari"===this._getSelectedPlatform():Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||"[object SafariRemoteNotification]"===(!window["safari"]||safari.pushNotification).toString()}},{key:"isChrome",value:function(){return this._getSelectedPlatform()?"chrome"===this._getSelectedPlatform():!(!window.chrome||window.opera||navigator.userAgent.indexOf(" OPR/")>=0||navigator.userAgent.indexOf(" Edge/")>=0)}},{key:"isIE",value:function(){return this._getSelectedPlatform()?"ie"===this._getSelectedPlatform():!!document.documentMode}},{key:"isEdge",value:function(){return this._getSelectedPlatform()?"edge"===this._getSelectedPlatform():navigator.userAgent.indexOf(" Edge/")>=0}},{key:"getMobileOS",value:function(){return this.isAndroid()?"android":this.isIOS()?"ios":this.isWP()?"wp":"other"}},{key:"getIOSDevice",value:function(){return this.isIPhone()?"iphone":this.isIPad()?"ipad":this.isIPod()?"ipod":"na"}}]),t}()),A=function(t){return Q.throw("In PageAttributeExpression: "+t)},S={_variables:{},defineVariable:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"string"!=typeof t?A("Variable name must be a string"):"string"!=typeof e&&"function"!=typeof e?A("Variable value must be a string or a function"):this._variables.hasOwnProperty(t)&&!n&&A('"'+t+'" is already defined'),this._variables[t]=e},getVariable:function(t){return this._variables.hasOwnProperty(t)?this._variables[t]:null},removeVariable:function(t){delete this._variables[t]},getAllVariables:function(){return this._variables},_parsePart:function(t){var e=void 0,n=!1,i=0,o=[];0===t.length&&A("Unable to parse empty string");for(var r=0;r<t.length;r++)if("$"===(e=t.charAt(r))&&"{"===t.charAt(r+1)){n&&A("Nested interpolation not supported");t.substring(i,r).length>0&&o.push(t.substring(i,r)),i=r,n=!0}else if("}"===e){n||A("} must be preceeded by ${");t.substring(i,r+1).length>0&&o.push(t.substring(i,r+1)),i=r+1,n=!1}return n&&A("Unterminated interpolation"),o.push(t.substring(i,t.length)),o},_replaceToken:function(t){var e=t.match(/^\${(.*?)}$/);if(!e)return t;var n=e[1].trim(),i=this.getVariable(n);if(null!==i){if("string"==typeof i)return i;var o=i();return"string"!=typeof o&&A("Must return a string"),o}A('Variable "'+n+'" does not exist')},_replaceTokens:function(t){return t.map(this._replaceToken.bind(this))},_parseExpression:function(t){return t.split(",").map(function(t){return t.trim()}).map(this._parsePart.bind(this)).map(this._replaceTokens.bind(this)).map(function(t){return t.join("")})},evaluate:function(t){return t?this._parseExpression(t):[]}};S.defineVariable("mobileOS",C.getMobileOS()),S.defineVariable("iOSDevice",C.getIOSDevice()),S.defineVariable("runtime",function(){return C.isWebView()?"cordova":"browser"});var P={};P.config={autoStatusBarFill:!0,animationsDisabled:!1,warningsDisabled:!1},P.nullElement=window.document.createElement("div"),P.isEnabledAutoStatusBarFill=function(){return!!P.config.autoStatusBarFill},P.normalizePageHTML=function(t){return(""+t).trim()},P.waitDOMContentLoaded=function(t){if("loading"===window.document.readyState||"uninitialized"==window.document.readyState){window.document.addEventListener("DOMContentLoaded",function e(){t(),window.document.removeEventListener("DOMContentLoaded",e)})}else setImmediate(t)},P.autoStatusBarFill=function(t){var e=function e(){P.shouldFillStatusBar()&&t(),document.removeEventListener("deviceready",e)};"object"===("undefined"==typeof device?"undefined":f(device))?document.addEventListener("deviceready",e):-1===["complete","interactive"].indexOf(document.readyState)?P.waitDOMContentLoaded(e):e()},P.shouldFillStatusBar=function(){return P.isEnabledAutoStatusBarFill()&&(C.isWebView()&&C.isIOS7above()&&!C.isIPhoneX()||document.body.querySelector(".ons-status-bar-mock.ios"))},P.templateStore={_storage:{},get:function(t){return P.templateStore._storage[t]||null},set:function(t,e){P.templateStore._storage[t]=e}},window.document.addEventListener("_templateloaded",function(t){"ons-template"===t.target.nodeName.toLowerCase()&&P.templateStore.set(t.templateId,t.template)},!1),P.waitDOMContentLoaded(function(){function t(t){for(var e=window.document.querySelectorAll(t),n=0;n<e.length;n++)P.templateStore.set(e[n].getAttribute("id"),e[n].textContent||e[n].content)}t('script[type="text/ons-template"]'),t('script[type="text/template"]'),t('script[type="text/ng-template"]'),t("template")}),P.getTemplateHTMLAsync=function(t){return new Promise(function(e,n){P.waitDOMContentLoaded(function(){var i=P.templateStore.get(t);if(i){if(i instanceof DocumentFragment)return e(i);var o="string"==typeof i?i:i[1];return e(P.normalizePageHTML(o))}var r=window.document.getElementById(t);if(r){var a=r.textContent||r.content;return e(a)}var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(){var i=s.responseText;if(s.status>=400&&s.status<600)n(i);else{var o=Q.createFragment(i);Q.arrayFrom(o.querySelectorAll("script")).forEach(function(t){var e=document.createElement("script");e.type=t.type||"text/javascript",e.appendChild(document.createTextNode(t.text||t.textContent||t.innerHTML)),t.parentNode.replaceChild(e,t)}),P.templateStore.set(t,o),e(o)}},s.onerror=function(){Q.throw("Page template not found: "+t)},s.send(null)})})},P.getPageHTMLAsync=function(t){var e=S.evaluate(t);return function t(n){return"string"!=typeof n?Promise.reject("Must specify a page."):P.getTemplateHTMLAsync(n).catch(function(n){return 0===e.length?Promise.reject(n):t(e.shift())})}(e.shift())};var O=function(){function t(e){p(this,t),this._animators=e.animators,this._baseClass=e.baseClass,this._baseClassName=e.baseClassName||e.baseClass.name,this._animation=e.defaultAnimation||"default",this._animationOptions=e.defaultAnimationOptions||{},this._animators[this._animation]||Q.throw("No such animation: "+this._animation)}return g(t,[{key:"setAnimationOptions",value:function(t){this._animationOptions=t}},{key:"newAnimator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],n=null;if(t.animation instanceof this._baseClass)return t.animation;var i=null;if("string"==typeof t.animation&&(i=this._animators[t.animation]),!i&&e)n=e;else{i=i||this._animators[this._animation];var o=Q.extend({},this._animationOptions,t.animationOptions||{},P.config.animationsDisabled?{duration:0,delay:0}:{});"function"==typeof(n=new i(o))&&(n=new n(o))}return n instanceof this._baseClass||Q.throw('"animator" is not an instance of '+this._baseClassName),n}}],[{key:"parseAnimationOptionsString",value:function(t){try{if("string"==typeof t){var e=Q.animationOptionsParse(t);if("object"===(void 0===e?"undefined":f(e))&&null!==e)return e;console.error('"animation-options" attribute must be a JSON object string: '+t)}return{}}catch(e){return console.error('"animation-options" attribute must be a JSON object string: '+t),{}}}}]),t}(),x=!0,T={quiet:"material--flat",light:"material--flat",outline:"material--flat",cta:"","large--quiet":"material--flat large","large--cta":"large",noborder:"",tappable:""},L={};L.android=function(t){var e=t.tagName.toLowerCase();if(!Q.hasModifier(t,"material")){var n=(t.getAttribute("modifier")||"").trim().split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t});n.unshift("material"),t.setAttribute("modifier",n.join(" ").trim())}-1===["ons-alert-dialog-button","ons-toolbar-button","ons-back-button","ons-button","ons-list-item","ons-fab","ons-speed-dial","ons-speed-dial-item","ons-tab"].indexOf(e)||t.hasAttribute("ripple")||t.querySelector("ons-ripple")||("ons-list-item"===e?t.hasAttribute("tappable")&&(t.setAttribute("ripple",""),t.removeAttribute("tappable")):t.setAttribute("ripple",""))},L.ios=function(t){Q.removeModifier(t,"material")&&(Q.removeModifier(t,"material--flat")&&Q.addModifier(t,Q.removeModifier(t,"large")?"large--quiet":"quiet"),t.getAttribute("modifier")||t.removeAttribute("modifier")),t.hasAttribute("ripple")&&("ons-list-item"===t.tagName.toLowerCase()&&t.setAttribute("tappable",""),t.removeAttribute("ripple"))};var M={android:!0},D=function(t,e){if(x&&!t.hasAttribute("disable-auto-styling")){var n=C.getMobileOS();if(L.hasOwnProperty(n)&&(M.hasOwnProperty(n)||e))return n}return null},I=function(t,e,n){return D(e,n)?t.split(/\s+/).map(function(t){return T.hasOwnProperty(t)?T[t]:t}).join(" "):t},N={isEnabled:function(){return x},enable:function(){return x=!0},disable:function(){return x=!1},prepare:function(t,e){var n=D(t,e);n&&L[n](t)},mapModifier:I,getPlatform:D,restoreModifier:function(t){if("android"===D(t)){var e=t.getAttribute("modifier")||"",n=I(e,t);if(/(^|\s+)material($|\s+)/i.test(e)||(n="material "+n),n!==e)return t.setAttribute("modifier",n.trim()),!0}return!1}},B=function(){function t(){p(this,t)}return g(t,null,[{key:"diff",value:function(e,n){function i(e){var n={};return t.split(e).forEach(function(t){return n[t]=t}),n}e=i((""+e).trim()),n=i((""+n).trim());var o=Object.keys(e).reduce(function(t,e){return n[e]||t.push(e),t},[]);return{added:Object.keys(n).reduce(function(t,n){return e[n]||t.push(n),t},[]),removed:o}}},{key:"applyDiffToClassList",value:function(t,e,n){t.added.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.add(t)})}),t.removed.map(function(t){return n.replace(/\*/g,t)}).forEach(function(t){return t.split(/\s+/).forEach(function(t){return e.remove(t)})})}},{key:"applyDiffToElement",value:function(e,n,i){Object.keys(i).forEach(function(o){for(var r=!o||Q.match(n,o)?[n]:Array.prototype.filter.call(n.querySelectorAll(o),function(t){return!Q.findParent(t,n.tagName,function(t){return t===n})}),a=0;a<r.length;a++)t.applyDiffToClassList(e,r[a].classList,i[o])})}},{key:"onModifierChanged",value:function(e,n,i,o){t.applyDiffToElement(t.diff(e,n),i,o),N.restoreModifier(i)}},{key:"refresh",value:function(e,n){t.applyDiffToElement(t.diff("",e.getAttribute("modifier")||""),e,n)}},{key:"initModifier",value:function(e,n){var i=e.getAttribute("modifier");"string"==typeof i&&t.applyDiffToElement({removed:[],added:t.split(i)},e,n)}},{key:"split",value:function(t){return"string"!=typeof t?[]:t.trim().split(/ +/).filter(function(t){return""!==t})}},{key:"addModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier"));-1==i.indexOf(n)&&(i.push(n),e.setAttribute("modifier",i.join(" ")))}else e.setAttribute("modifier",n)}},{key:"removeModifier",value:function(e,n){if(e.hasAttribute("modifier")){var i=t.split(e.getAttribute("modifier")),o=i.indexOf(n);-1!==o&&(i.splice(o,1),e.setAttribute("modifier",i.join(" ")))}}}]),t}(),j={_ready:!1,_domContentLoaded:!1,_onDOMContentLoaded:function(){j._domContentLoaded=!0,C.isWebView()?window.document.addEventListener("deviceready",function(){j._ready=!0},!1):j._ready=!0},addBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.addEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.addEventListener("backbutton",t,!1)})},removeBackButtonListener:function(t){if(!this._domContentLoaded)throw new Error("This method is available after DOMContentLoaded");this._ready?window.document.removeEventListener("backbutton",t,!1):window.document.addEventListener("deviceready",function(){window.document.removeEventListener("backbutton",t,!1)})}};window.addEventListener("DOMContentLoaded",function(){return j._onDOMContentLoaded()},!1);var H={_store:{},_genId:function(){var t=0;return function(){return t++}}(),set:function(t,e){t.dataset.deviceBackButtonHandlerId&&this.remove(t);var n=t.dataset.deviceBackButtonHandlerId=H._genId();this._store[n]=e},remove:function(t){t.dataset.deviceBackButtonHandlerId&&(delete this._store[t.dataset.deviceBackButtonHandlerId],delete t.dataset.deviceBackButtonHandlerId)},get:function(t){if(t.dataset.deviceBackButtonHandlerId){var e=t.dataset.deviceBackButtonHandlerId;if(!this._store[e])throw new Error;return this._store[e]}},has:function(t){if(!t.dataset)return!1;var e=t.dataset.deviceBackButtonHandlerId;return!!this._store[e]}},R=new(function(){function t(){p(this,t),this._isEnabled=!1,this._boundCallback=this._callback.bind(this)}return g(t,[{key:"enable",value:function(){this._isEnabled||(j.addBackButtonListener(this._boundCallback),this._isEnabled=!0)}},{key:"disable",value:function(){this._isEnabled&&(j.removeBackButtonListener(this._boundCallback),this._isEnabled=!1)}},{key:"fireDeviceBackButtonEvent",value:function(){var t=document.createEvent("Event");t.initEvent("backbutton",!0,!0),document.dispatchEvent(t)}},{key:"_callback",value:function(){this._dispatchDeviceBackButtonEvent()}},{key:"createHandler",value:function(t,e){if(!(t instanceof HTMLElement))throw new Error("element must be an instance of HTMLElement");if(!(e instanceof Function))throw new Error("callback must be an instance of Function");var n={_callback:e,_element:t,disable:function(){H.remove(t)},setListener:function(t){this._callback=t},enable:function(){H.set(t,this)},isEnabled:function(){return H.get(t)===this},destroy:function(){H.remove(t),this._callback=this._element=null}};return n.enable(),n}},{key:"_dispatchDeviceBackButtonEvent",value:function(){function t(e){return{_element:e,callParentHandler:function(){for(var e=this._element.parentNode;e;){if(i=H.get(e))return i._callback(t(e));e=e.parentNode}}}}var e=this._captureTree(),n=this._findHandlerLeafElement(e),i=H.get(n);i._callback(t(n))}},{key:"_captureTree",value:function(){function t(e){var n={element:e,children:Array.prototype.concat.apply([],function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}(e.children).map(function(e){if("none"===e.style.display||!1===e._isShown)return[];if(0===e.children.length&&!H.has(e))return[];var n=t(e);return 0!==n.children.length||H.has(n.element)?[n]:[]}))};if(!H.has(n.element))for(var i=0;i<n.children.length;i++){var o=n.children[i];if(H.has(o.element))return o}return n}return t(document.body)}},{key:"_findHandlerLeafElement",value:function(t){function e(t){return 0===t.children.length?t.element:1===t.children.length?e(t.children[0]):t.children.map(function(t){return t.element}).reduce(function(t,e){if(!t)return e;var n=parseInt(window.getComputedStyle(t,"").zIndex,10),i=parseInt(window.getComputedStyle(e,"").zIndex,10);if(!isNaN(n)&&!isNaN(i))return n>i?t:e;throw new Error("Capturing backbutton-handler is failure.")},null)}return e(t)}}]),t}());P.AnimatorFactory=O,P.ModifierUtil=B,P.dbbDispatcher=R;var F=function(t,e){return t.substr(0,e.length)===e},q=function(t,e){return t.substr(t.length-e.length,e.length)===e},z=function(t){return t.slice(1,-1)},V=function(t){return F(t,"{")&&q(t,"}")},W=function(t){return F(t,"[")&&q(t,"]")},U=function(t){return F(t,"'")&&q(t,"'")||F(t,'"')&&q(t,'"')},X=function(t,e,n){throw new Error("Unexpected token '"+t+"' at position "+(n.length-e.length-1)+" in string: '"+n+"'")},Y=function(t,e,n){return"true"===t||"false"===t?"true"===t:U(t)?z(t):isNaN(t)?V(t)?$(z(t)):W(t)?K(z(t)):void X(t,e,n):+t},G=function(t){var e=(t=t.trim()).length;if(":"===t[0]||","===t[0])e=1;else if("{"===t[0]||"["===t[0]){for(var n=t.charCodeAt(0),i=1,o=1;o<t.length;o++)if(t.charCodeAt(o)===n)i++;else if(t.charCodeAt(o)===n+2&&0==--i){e=o+1;break}}else if("'"===t[0]||'"'===t[0]){for(var r=1;r<t.length;r++)if(t[r]===t[0]){e=r+1;break}}else for(var a=1;a<t.length;a++)if(-1!==[" ",",",":"].indexOf(t[a])){e=a;break}return t.slice(0,e)},$=function(t){for(var e=t=t.trim(),n={},i=!0,o=void 0,r=void 0,a=void 0;t.length>0;)if(r=a,a=G(t),t=t.slice(a.length,t.length).trim(),":"===a&&(!i||!r||","===r)||","===a&&i||":"!==a&&","!==a&&r&&","!==r&&":"!==r)X(a,t,e);else if(":"===a&&i&&r){if(r=U(r)?z(r):r,!function(t){return/^[A-Z_$][A-Z0-9_$]*$/i.test(t)}(r))throw new Error("Invalid key token '"+r+"' at position 0 in string: '"+e+"'");o=r,i=!1}else","===a&&!i&&r&&(n[o]=Y(r,t,e),i=!0);return a&&(n[o]=Y(a,t,e)),n},K=function(t){for(var e=t=t.trim(),n=[],i=void 0,o=void 0;t.length>0;)i=o,o=G(t),t=t.slice(o.length,t.length).trim(),","!==o||i&&","!==i?","===o&&n.push(Y(i,t,e)):X(o,t,e);return o&&(","!==o?n.push(Y(o,t,e)):X(o,t,e)),n},Q={},J="[Onsen UI]";Q.globals={fabOffset:0,errorPrefix:J,supportsPassive:!1},C._runOnActualPlatform(function(){Q.globals.actualMobileOS=C.getMobileOS(),Q.globals.isUIWebView=C.isUIWebView(),Q.globals.isWKWebView=C.isWKWebView()});try{var Z=Object.defineProperty({},"passive",{get:function(){Q.globals.supportsPassive=!0}});window.addEventListener("testPassive",null,Z),window.removeEventListener("testPassive",null,Z)}catch(t){}Q.addEventListener=function(t,e,n,i,o){t.addEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.removeEventListener=function(t,e,n,i,o){t.removeEventListener(e,n,Q.globals.supportsPassive?i:(i||{}).capture)},Q.prepareQuery=function(t){return t instanceof Function?t:function(e){return Q.match(e,t)}},Q.match=function(t,e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector).call(t,e)},Q.findChild=function(t,e){for(var n=Q.prepareQuery(e),i=0;i<t.childNodes.length;i++){var o=t.childNodes[i];if(o.nodeType===Node.ELEMENT_NODE&&n(o))return o}return null},Q.findParent=function(t,e,n){for(var i=Q.prepareQuery(e),o=t.parentNode;;){if(!o||o===document||o instanceof DocumentFragment||n&&n(o))return null;if(i(o))return o;o=o.parentNode}},Q.isAttached=function(t){return document.body.contains(t)},Q.hasAnyComponentAsParent=function(t){for(;t&&document.documentElement!==t;)if((t=t.parentNode)&&t.nodeName.toLowerCase().match(/(ons-navigator|ons-tabbar|ons-modal)/))return!0;return!1},Q.getAllChildNodes=function(t){var e;return(e=[t]).concat.apply(e,w(Array.from(t.children).map(function(t){return Q.getAllChildNodes(t)})))},Q.isPageControl=function(t){return t.nodeName.match(/^ons-(navigator|splitter|tabbar|page)$/i)},Q.propagateAction=function(t,e){for(var n=0;n<t.childNodes.length;n++){var i=t.childNodes[n];i[e]instanceof Function?i[e]():Q.propagateAction(i,e)}},Q.camelize=function(t){return t.toLowerCase().replace(/-([a-z])/g,function(t,e){return e.toUpperCase()})},Q.hyphenate=function(t){return t.replace(/([a-zA-Z])([A-Z])/g,"$1-$2").toLowerCase()},Q.create=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.split("."),i=document.createElement(n.shift()||"div");return n.length&&(i.className=n.join(" ")),d(i,e),i},Q.createElement=function(t){var e=document.createElement("div");t instanceof DocumentFragment?e.appendChild(document.importNode(t,!0)):e.innerHTML=t.trim(),e.children.length>1&&Q.throw("HTML template must contain a single root element");var n=e.children[0];return e.children[0].remove(),n},Q.createFragment=function(t){var e=document.createElement("template");return e.innerHTML=t,document.importNode(e.content,!0)},Q.extend=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var o=0;o<n.length;o++)if(n[o])for(var r=Object.keys(n[o]),a=0;a<r.length;a++){var s=r[a];t[s]=n[o][s]}return t},Q.arrayFrom=function(t){return Array.prototype.slice.apply(t)},Q.parseJSONObjectSafely=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n=JSON.parse(""+t);if("object"===(void 0===n?"undefined":f(n))&&null!==n)return n}catch(t){return e}return e},Q.findFromPath=function(t){t=t.split(".");for(var e,n=window;e=t.shift();)n=n[e];return n},Q.getTopPage=function(t){return t&&("ons-page"===t.tagName.toLowerCase()?t:t.topPage)||null},Q.findToolbarPage=function(t){var e=Q.getTopPage(t);if(e){if(e._canAnimateToolbar())return e;for(var n=0;n<e._contentElement.children.length;n++){var i=Q.getTopPage(e._contentElement.children[n]);if(i&&!/ons-tabbar/i.test(e._contentElement.children[n].tagName))return Q.findToolbarPage(i)}}return null},Q.triggerElementEvent=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});return Object.keys(n).forEach(function(t){i[t]=n[t]}),t.dispatchEvent(i),i},Q.hasModifier=function(t,e){return!!t.hasAttribute("modifier")&&RegExp("(^|\\s+)"+e+"($|\\s+)","i").test(t.getAttribute("modifier"))},Q.addModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!Q.hasModifier(t,e)&&(t.setAttribute("modifier",((t.getAttribute("modifier")||"")+" "+e).trim()),!0)},Q.removeModifier=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.autoStyle&&(e=N.mapModifier(e,t,n.forceAutoStyle)),!t.getAttribute("modifier")||!Q.hasModifier(t,e))return!1;var i=t.getAttribute("modifier").split(/\s+/).filter(function(t){return t&&t!==e});return i.length?t.setAttribute("modifier",i.join(" ")):t.removeAttribute("modifier"),!0},Q.toggleModifier=function(){var t=arguments.length>2?arguments.length<=2?void 0:arguments[2]:{},e="boolean"==typeof t?t:t.force;("boolean"==typeof e?e:!Q.hasModifier.apply(Q,arguments))?Q.addModifier.apply(Q,arguments):Q.removeModifier.apply(Q,arguments)},Q.restoreClass=function(t,e,n){e.split(/\s+/).forEach(function(e){return""!==e&&!t.classList.contains(e)&&t.classList.add(e)}),t.hasAttribute("modifier")&&B.refresh(t,n)},Q.updateParentPosition=function(t){!t._parentUpdated&&t.parentElement&&("static"===window.getComputedStyle(t.parentElement).getPropertyValue("position")&&(t.parentElement.style.position="relative"),t._parentUpdated=!0)},Q.toggleAttribute=function(t,e,n){n?t.setAttribute(e,"boolean"==typeof n?"":n):t.removeAttribute(e)},Q.bindListeners=function(t,e){e.forEach(function(e){var n=e.replace(/^_[a-z]/,"_bound"+e[1].toUpperCase());t[n]=t[n]||t[e].bind(t)})},Q.each=function(t,e){return Object.keys(t).forEach(function(n){return e(n,t[n])})},Q.updateRipple=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};void 0===e&&(e=t.hasAttribute("ripple"));var i=Q.findChild(t,"ons-ripple");if(e){if(!i){var o=document.createElement("ons-ripple");Object.keys(n).forEach(function(t){return o.setAttribute(t,n[t])}),t.insertBefore(o,t.firstChild)}}else i&&i.remove()},Q.animationOptionsParse=function(t){if(t=t.trim(),V(t))return $(z(t));if(W(t))return K(z(t));throw new Error("Provided string must be object or array like: "+t)},Q.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Q.defer=function(){var t={};return t.promise=new Promise(function(e,n){t.resolve=e,t.reject=n}),t},Q.warn=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!P.config.warningsDisabled){var i;(i=console).warn.apply(i,[J].concat(e))}},Q.throw=function(t){throw new Error(J+" "+t)},Q.throwAbstract=function(){return Q.throw("Cannot instantiate abstract class")},Q.throwMember=function(){return Q.throw("Class member must be implemented")},Q.throwPageLoader=function(){return Q.throw("First parameter should be an instance of PageLoader")},Q.throwAnimator=function(t){return Q.throw('"Animator" param must inherit '+t+"Animator")};var tt=function(t){return t.cancelable&&t.preventDefault()};Q.iosPreventScroll=function(t){if("ios"===Q.globals.actualMobileOS){t.on("touchmove",tt),t.on("dragend",function e(n){t.off("touchmove",tt),t.off("dragend",e)})}},Q.iosPageScrollFix=function(t){"ios"===Q.globals.actualMobileOS&&(document.body.classList.toggle("ons-ios-scroll",t),Q.globals.isUIWebView&&!P.config.forceUIWebViewScrollFix||document.body.classList.toggle("ons-ios-scroll-fix",t))},Q.iosMaskScrollFix=function(t,e){if(Q.globals.isUIWebView){t[(e?"add":"remove")+"EventListener"]("touchmove",tt,!1)}},Q.isValidGesture=function(t){return void 0!==t.gesture&&(t.gesture.distance<=15||t.gesture.deltaTime<=100)},Q.checkMissingImport=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){c[t]||Q.throw("Ons"+t+" is required but was not imported (Custom Elements)")})};var et={};et.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},et.buildTransitionValue=function(t){t.property=t.property||"all",t.duration=t.duration||.4,t.timing=t.timing||"linear";return t.property.split(/ +/).map(function(e){return e+" "+t.duration+"s "+t.timing}).join(", ")},et.onceOnTransitionEnd=function(t,e){if(!t)return function(){};var n=function(n){t==n.target&&(n.stopPropagation(),i(),e())},i=function(){et._transitionEndEvents.forEach(function(e){t.removeEventListener(e,n,!1)})};return et._transitionEndEvents.forEach(function(e){t.addEventListener(e,n,!1)}),i},et._transitionEndEvents="ontransitionend"in window?["transitionend"]:"onwebkittransitionend"in window?["webkitTransitionEnd"]:"webkit"===et.vendorPrefix||"o"===et.vendorPrefix||"moz"===et.vendorPrefix||"ms"===et.vendorPrefix?[et.vendorPrefix+"TransitionEnd","transitionend"]:[],et._cssPropertyDict=function(){for(var t=window.getComputedStyle(document.documentElement,""),e={},n="A".charCodeAt(0),i="z".charCodeAt(0),o=0;o<t.length;o++){var r=t[o].replace(/^[-]+/,"").replace(/[-][a-z]/g,function(t){return t.substr(1).toUpperCase()}).replace(/^moz/,"Moz");n<=r.charCodeAt(0)&&i>=r.charCodeAt(0)&&"cssText"!==r&&"parentText"!==r&&(e[r]=!0)}return e}(),et.hasCssProperty=function(t){return t in et._cssPropertyDict},et.vendorPrefix=function(){var t=window.getComputedStyle(document.documentElement,"");return(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1]}(),et.forceLayoutAtOnce=function(t,e){this.batchImmediate(function(){t.forEach(function(t){t.offsetHeight}),e()})},et.batchImmediate=function(){var t=[];return function(e){0===t.length&&setImmediate(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(e)}}(),et.batchAnimationFrame=function(){var t=[],e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};return function(n){0===t.length&&e(function(){var e=t.slice(0);t=[],e.forEach(function(t){t()})}),t.push(n)}}(),et.transitionPropertyName=function(){if(et.hasCssProperty("transitionDuration"))return"transition";if(et.hasCssProperty(et.vendorPrefix+"TransitionDuration"))return et.vendorPrefix+"Transition";throw new Error("Invalid state")}();var nt=function t(e,n){if(!(this instanceof t))return new t(e,n);if(e instanceof HTMLElement)this.elements=[e];else{if("[object Array]"!==Object.prototype.toString.call(e))throw new Error("First argument must be an array or an instance of HTMLElement.");this.elements=e}this.defaults=n,this.transitionQueue=[],this.lastStyleAttributeDict=[]};nt.prototype={transitionQueue:void 0,elements:void 0,defaults:void 0,play:function(t){return"function"==typeof t&&this.transitionQueue.push(function(e){t(),e()}),this.startAnimation(),this},default:function(t,e,n){function i(t,e,n){return void 0!==t.duration&&(e=t.duration),void 0!==t.timing&&(n=t.timing),{css:t.css||t,duration:e,timing:n}}return this.saveStyle().queue(i(t,0,this.defaults.timing)).wait(void 0===n?this.defaults.delay:n).queue(i(e,this.defaults.duration,this.defaults.timing)).restoreStyle()},queue:function(t,e){var n=this.transitionQueue;if(t&&e&&(e.css=t,t=new nt.Transition(e)),t instanceof Function||t instanceof nt.Transition||(t=new nt.Transition(t.css?t:{css:t})),t instanceof Function)n.push(t);else{if(!(t instanceof nt.Transition))throw new Error("Invalid arguments");n.push(t.build())}return this},wait:function(t){return t>0&&this.transitionQueue.push(function(e){setTimeout(e,1e3*t)}),this},saveStyle:function(){return this.transitionQueue.push(function(t){this.elements.forEach(function(t,e){for(var n=this.lastStyleAttributeDict[e]={},i=0;i<t.style.length;i++)n[t.style[i]]=t.style[t.style[i]]}.bind(this)),t()}.bind(this)),this},restoreStyle:function(t){var e=this;if((t=t||{}).transition&&!t.duration)throw new Error('"options.duration" is required when "options.transition" is enabled.');var n=et.transitionPropertyName;if(t.transition||t.duration&&t.duration>0){var i=t.transition||"all "+t.duration+"s "+(t.timing||"linear");this.transitionQueue.push(function(o){var r,a=this.elements,s=function(){a.forEach(function(t){t.style[n]=""})},l=et.onceOnTransitionEnd(a[0],function(){clearTimeout(r),s(),o()});r=setTimeout(function(){l(),s(),o()},1e3*t.duration*1.4),a.forEach(function(t,o){var r=e.lastStyleAttributeDict[o];if(!r)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[o]=void 0;for(var a,s=0,l=t.style.length;s<l;s++)a=t.style[s],void 0===r[a]&&(r[a]="");t.style[n]=i,Object.keys(r).forEach(function(e){e!==n&&(t.style[e]=r[e])}),t.style[n]=i})})}else this.transitionQueue.push(function(t){e.elements.forEach(function(t,i){t.style[n]="none";var o=e.lastStyleAttributeDict[i];if(!o)throw new Error("restoreStyle(): The style is not saved. Invoke saveStyle() before.");e.lastStyleAttributeDict[i]=void 0;for(var r=0;r<t.style.length;r++)t.style[r],void 0===o[t.style[r]]&&(o[t.style[r]]="");Object.keys(o).forEach(function(e){t.style[e]=o[e]})}),t()});return this},startAnimation:function(){return this._dequeueTransition(),this},_dequeueTransition:function(){var t=this.transitionQueue.shift();if(this._currentTransition)throw new Error("Current transition exists.");this._currentTransition=t;var e=this,n=!1;t&&t.call(this,function(){if(n)throw new Error("Invalid state: This callback is called twice.");n=!0,e._currentTransition=void 0,e._dequeueTransition()})}},nt.runAll=function(){for(var t=0;t<arguments.length;t++)arguments[t].play()},(nt.Transition=function(t){this.options=t||{},this.options.duration=this.options.duration||0,this.options.timing=this.options.timing||"linear",this.options.css=this.options.css||{},this.options.property=this.options.property||"all"}).prototype={build:function(){if(0===Object.keys(this.options.css).length)throw new Error("options.css is required.");var t=function(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n];if(et.hasCssProperty(n))e[n]=i;else{var o=et.vendorPrefix+et.capitalize(n);et.hasCssProperty(o)?e[o]=i:(e[o]=i,e[n]=i)}}),e}(this.options.css);if(this.options.duration>0){var e=et.buildTransitionValue(this.options),n=this;return function(i){var o,r=this.elements,a=1e3*n.options.duration*1.4,s=et.onceOnTransitionEnd(r[0],function(){clearTimeout(o),i()});o=setTimeout(function(){s(),i()},a),r.forEach(function(n){n.style[et.transitionPropertyName]=e,Object.keys(t).forEach(function(e){n.style[e]=t[e]})})}}if(this.options.duration<=0)return function(e){var n=this.elements;n.forEach(function(e){e.style[et.transitionPropertyName]="",Object.keys(t).forEach(function(n){e.style[n]=t[n]})}),n.length>0?et.forceLayoutAtOnce(n,function(){et.batchAnimationFrame(e)}):et.batchAnimationFrame(e)}}};var it,ot,rt,at,st=function t(e,n){return new t.Instance(e,n||{})};st.defaults={behavior:{touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},st.DOCUMENT=document,st.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,st.HAS_TOUCHEVENTS="ontouchstart"in window,st.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),st.NO_MOUSEEVENTS=st.HAS_TOUCHEVENTS&&st.IS_MOBILE||st.HAS_POINTEREVENTS,st.CALCULATE_INTERVAL=25;var lt={},ut=st.DIRECTION_DOWN="down",ct=st.DIRECTION_LEFT="left",ht=st.DIRECTION_UP="up",dt=st.DIRECTION_RIGHT="right",ft=st.POINTER_MOUSE="mouse",pt=st.POINTER_TOUCH="touch",gt=st.POINTER_PEN="pen",mt=st.EVENT_START="start",_t=st.EVENT_MOVE="move",vt=st.EVENT_END="end",bt=st.EVENT_RELEASE="release",yt=st.EVENT_TOUCH="touch";st.READY=!1,st.plugins=st.plugins||{},st.gestures=st.gestures||{},ot=st.utils={extend:function(t,e,n){for(var i in e)!e.hasOwnProperty(i)||void 0!==t[i]&&n||(t[i]=e[i]);return t},on:function(t,e,n,i){Q.addEventListener(t,e,n,i,!0)},off:function(t,e,n,i){Q.removeEventListener(t,e,n,i,!0)},each:function(t,e,n){var i,o;if("forEach"in t)t.forEach(e,n);else if(void 0!==t.length){for(i=0,o=t.length;i<o;i++)if(!1===e.call(n,t[i],i,t))return}else for(i in t)if(t.hasOwnProperty(i)&&!1===e.call(n,t[i],i,t))return},inStr:function(t,e){return t.indexOf(e)>-1},inArray:function(t,e,n){if(n){for(var i=0,o=t.length;i<o;i++)if(Object.keys(e).every(function(n){return t[i][n]===e[n]}))return i;return-1}if(t.indexOf)return t.indexOf(e);for(var i=0,o=t.length;i<o;i++)if(t[i]===e)return i;return-1},toArray:function(t){return Array.prototype.slice.call(t,0)},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],n=[],i=[],o=[],r=Math.min,a=Math.max;return 1===t.length?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(ot.each(t,function(t){e.push(t.pageX),n.push(t.pageY),i.push(t.clientX),o.push(t.clientY)}),{pageX:(r.apply(Math,e)+a.apply(Math,e))/2,pageY:(r.apply(Math,n)+a.apply(Math,n))/2,clientX:(r.apply(Math,i)+a.apply(Math,i))/2,clientY:(r.apply(Math,o)+a.apply(Math,o))/2})},getVelocity:function(t,e,n){return{x:Math.abs(e/t)||0,y:Math.abs(n/t)||0}},getAngle:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return 180*Math.atan2(i,n)/Math.PI},getDirection:function(t,e){return Math.abs(t.clientX-e.clientX)>=Math.abs(t.clientY-e.clientY)?t.clientX-e.clientX>0?ct:dt:t.clientY-e.clientY>0?ht:ut},getDistance:function(t,e){var n=e.clientX-t.clientX,i=e.clientY-t.clientY;return Math.sqrt(n*n+i*i)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==ht||t==ut},setPrefixedCss:function(t,e,n,i){var o=["","Webkit","Moz","O","ms"];e=ot.toCamelCase(e);for(var r=0;r<o.length;r++){var a=e;if(o[r]&&(a=o[r]+a.slice(0,1).toUpperCase()+a.slice(1)),a in t.style){t.style[a]=(null===i||i)&&n||"";break}}},toggleBehavior:function(t,e,n){if(e&&t&&t.style){ot.each(e,function(e,i){ot.setPrefixedCss(t,i,e,n)});var i=n&&function(){return!1};"none"==e.userSelect&&(t.onselectstart=i),"none"==e.userDrag&&(t.ondragstart=i)}},toCamelCase:function(t){return t.replace(/[_-]([a-z])/g,function(t){return t[1].toUpperCase()})}},it=st.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.on(t,e,n,i),o&&o(e)})},off:function(t,e,n,i,o){var r=e.split(" ");ot.each(r,function(e){ot.off(t,e,n,i),o&&o(e)})},onTouch:function(t,e,n,i){var o=this,r=function(i){var r,a=i.type.toLowerCase(),s=st.HAS_POINTEREVENTS,l=ot.inStr(a,"mouse");l&&o.preventMouseEvents||(l&&e==mt&&0===i.button?(o.preventMouseEvents=!1,o.shouldDetect=!0):s&&e==mt?o.shouldDetect=1===i.buttons||at.matchType(pt,i):l||e!=mt||(o.preventMouseEvents=!0,o.shouldDetect=!0),s&&e!=vt&&at.updatePointer(e,i),o.shouldDetect&&(r=o.doDetect.call(o,i,e,t,n)),r==vt&&(o.preventMouseEvents=!1,o.shouldDetect=!1,at.reset()),s&&e==vt&&at.updatePointer(e,i))};return this.on(t,lt[e],r,i),r},doDetect:function(t,e,n,i){var o=this.getTouchList(t,e),r=o.length,a=e,s=o.trigger,l=r;e==mt?s=yt:e==vt&&(s=bt,l=o.length-(t.changedTouches?t.changedTouches.length:1)),l>0&&this.started&&(a=_t),this.started=!0;var u=this.collectEventData(n,a,o,t);return e!=vt&&i.call(rt,u),s&&(u.changedLength=l,u.eventType=s,i.call(rt,u),u.eventType=a,delete u.changedLength),a==vt&&(i.call(rt,u),this.started=!1),a},determineEventTypes:function(){var t;return t=st.HAS_POINTEREVENTS?window.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:st.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],lt[mt]=t[0],lt[_t]=t[1],lt[vt]=t[2],lt},getTouchList:function(t,e){if(st.HAS_POINTEREVENTS)return at.getTouchList();if(t.touches){if(e==_t)return t.touches;var n=[],i=[].concat(ot.toArray(t.touches),ot.toArray(t.changedTouches)),o=[];return ot.each(i,function(t){-1===ot.inArray(n,t.identifier)&&o.push(t),n.push(t.identifier)}),o}return t.identifier=1,[t]},collectEventData:function(t,e,n,i){var o=pt;return ot.inStr(i.type,"mouse")||at.matchType(ft,i)?o=ft:at.matchType(gt,i)&&(o=gt),{center:ot.getCenter(n),timeStamp:Date.now(),target:i.target,touches:n,eventType:e,pointerType:o,srcEvent:i,preventDefault:function(){var t=this.srcEvent;t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return rt.stopDetect()}}}},at=st.PointerEvent={pointers:{},getTouchList:function(){var t=[];return ot.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,e){t==vt||t!=vt&&1!==e.buttons?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e)},matchType:function(t,e){if(!e.pointerType)return!1;var n=e.pointerType,i={};return i[ft]=n===(e.MSPOINTER_TYPE_MOUSE||ft),i[pt]=n===(e.MSPOINTER_TYPE_TOUCH||pt),i[gt]=n===(e.MSPOINTER_TYPE_PEN||gt),i[t]},reset:function(){this.pointers={}}},rt=st.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:ot.extend({},e),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst,n=e.options;return ot.each(this.gestures,function(i){!this.stopped&&e.enabled&&n[i.name]&&i.handler.call(i,t,e)},this),this.current&&(this.current.lastEvent=t),t.eventType==vt&&this.stopDetect(),t}},stopDetect:function(){this.previous=ot.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(t,e,n,i,o){var r=this.current,a=!1,s=r.lastCalcEvent,l=r.lastCalcData;s&&t.timeStamp-s.timeStamp>st.CALCULATE_INTERVAL&&(e=s.center,n=t.timeStamp-s.timeStamp,i=t.center.clientX-s.center.clientX,o=t.center.clientY-s.center.clientY,a=!0),t.eventType!=yt&&t.eventType!=bt||(r.futureCalcEvent=t),r.lastCalcEvent&&!a||(l.velocity=ot.getVelocity(n,i,o),l.angle=ot.getAngle(e,t.center),l.direction=ot.getDirection(e,t.center),r.lastCalcEvent=r.futureCalcEvent||t,r.futureCalcEvent=t),t.velocityX=l.velocity.x,t.velocityY=l.velocity.y,t.interimAngle=l.angle,t.interimDirection=l.direction},extendEventData:function(t){var e=this.current,n=e.startEvent,i=e.lastEvent||n;t.eventType!=yt&&t.eventType!=bt||(n.touches=[],ot.each(t.touches,function(t){n.touches.push({clientX:t.clientX,clientY:t.clientY})}));var o=t.timeStamp-n.timeStamp,r=t.center.clientX-n.center.clientX,a=t.center.clientY-n.center.clientY;return this.getCalculatedData(t,i.center,o,r,a),ot.extend(t,{startEvent:n,deltaTime:o,deltaX:r,deltaY:a,distance:ot.getDistance(n.center,t.center),angle:ot.getAngle(n.center,t.center),direction:ot.getDirection(n.center,t.center),scale:ot.getScale(n.touches,t.touches),rotation:ot.getRotation(n.touches,t.touches)}),t},register:function(t){var e=t.defaults||{};return void 0===e[t.name]&&(e[t.name]=!0),ot.extend(st.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}},st.Instance=function(t,e){var n=this,i=e&&e.passive?{passive:!0}:void 0;!function(t){st.READY||(it.determineEventTypes(),ot.each(st.gestures,function(t){rt.register(t)}),it.onTouch(st.DOCUMENT,_t,rt.detect,t),it.onTouch(st.DOCUMENT,vt,rt.detect,t),st.READY=!0)}(i),this.element=t,this.enabled=!0,ot.each(e,function(t,n){delete e[n],e[ot.toCamelCase(n)]=t}),this.options=ot.extend(ot.extend({},st.defaults),e||{}),this.options.listenerOptions=i,this.options.behavior&&ot.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=it.onTouch(t,mt,function(t){n.enabled&&t.eventType==mt?rt.startDetect(n,t):t.eventType==yt&&rt.detect(t)},i),this.eventHandlers=[]},st.Instance.prototype={on:function(t,e,n){var i=this;return it.on(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){i.eventHandlers.push({gesture:t,handler:e})}),i},off:function(t,e,n){var i=this;return it.off(i.element,t,e,Q.extend({},i.options.listenerOptions,n),function(t){var n=ot.inArray(i.eventHandlers,{gesture:t,handler:e},!0);n>=0&&i.eventHandlers.splice(n,1)}),i},trigger:function(t,e){e||(e={});var n=st.DOCUMENT.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e;var i=this.element;return ot.hasParent(e.target,i)&&(i=e.target),i.dispatchEvent(n),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,e;for(ot.toggleBehavior(this.element,this.options.behavior,!1),t=-1;e=this.eventHandlers[++t];)ot.off(this.element,e.gesture,e.handler);return this.eventHandlers=[],it.off(this.element,lt[mt],this.eventStartHandler),null}},function(t){var e=!1;st.gestures.Drag={name:t,index:50,handler:function(n,i){var o=rt.current;if(!(i.options.dragMaxTouches>0&&n.touches.length>i.options.dragMaxTouches))switch(n.eventType){case mt:e=!1;break;case _t:if(n.distance<i.options.dragMinDistance&&o.name!=t)return;var r=o.startEvent.center;if(o.name!=t&&(o.name=t,i.options.dragDistanceCorrection&&n.distance>0)){var a=Math.abs(i.options.dragMinDistance/n.distance);r.pageX+=n.deltaX*a,r.pageY+=n.deltaY*a,r.clientX+=n.deltaX*a,r.clientY+=n.deltaY*a,n=rt.extendEventData(n)}(o.lastEvent.dragLockToAxis||i.options.dragLockToAxis&&i.options.dragLockMinDistance<=n.distance)&&(n.dragLockToAxis=!0);var s=o.lastEvent.direction;n.dragLockToAxis&&s!==n.direction&&(ot.isVertical(s)?n.direction=n.deltaY<0?ht:ut:n.direction=n.deltaX<0?ct:dt),e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),i.trigger(t+n.direction,n);var l=ot.isVertical(n.direction);(i.options.dragBlockVertical&&l||i.options.dragBlockHorizontal&&!l)&&n.preventDefault();break;case bt:e&&n.changedLength<=i.options.dragMaxTouches&&(i.trigger(t+"end",n),e=!1);break;case vt:e=!1}},defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),st.gestures.Gesture={name:"gesture",index:1337,handler:function(t,e){e.trigger(this.name,t)}},function(t){var e;st.gestures.Hold={name:t,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:function(n,i){var o=i.options,r=rt.current;switch(n.eventType){case mt:clearTimeout(e),r.name=t,e=setTimeout(function(){r&&r.name==t&&i.trigger(t,n)},o.holdTimeout);break;case _t:n.distance>o.holdThreshold&&clearTimeout(e);break;case bt:clearTimeout(e)}}}}("hold"),st.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==bt&&e.trigger(this.name,t)}},st.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(t,e){if(t.eventType==bt){var n=t.touches.length,i=e.options;if(n<i.swipeMinTouches||n>i.swipeMaxTouches)return;(t.velocityX>i.swipeVelocityX||t.velocityY>i.swipeVelocityY)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},function(t){var e=!1;st.gestures.Tap={name:t,index:100,handler:function(n,i){var o,r,a=i.options,s=rt.current,l=rt.previous;switch(n.eventType){case mt:e=!1;break;case _t:e=e||n.distance>a.tapMaxDistance;break;case vt:!ot.inStr(n.srcEvent.type,"cancel")&&n.deltaTime<a.tapMaxTime&&!e&&(o=l&&l.lastEvent&&n.timeStamp-l.lastEvent.timeStamp,r=!1,l&&l.name==t&&o&&o<a.doubleTapInterval&&n.distance<a.doubleTapDistance&&(i.trigger("doubletap",n),r=!0),r&&!a.tapAlways||(s.name=t,i.trigger(s.name,n)))}},defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),st.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(t,e){e.options.preventMouse&&t.pointerType==ft?t.stopDetect():(e.options.preventDefault&&t.preventDefault(),t.eventType==yt&&e.trigger("touch",t))}},function(t){var e=!1;st.gestures.Transform={name:t,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:function(n,i){switch(n.eventType){case mt:e=!1;break;case _t:if(n.touches.length<2)return;var o=Math.abs(1-n.scale),r=Math.abs(n.rotation);if(o<i.options.transformMinScale&&r<i.options.transformMinRotation)return;rt.current.name=t,e||(i.trigger(t+"start",n),e=!0),i.trigger(t,n),r>i.options.transformMinRotation&&i.trigger("rotate",n),o>i.options.transformMinScale&&(i.trigger("pinch",n),i.trigger("pinch"+(n.scale<1?"in":"out"),n));break;case bt:e&&n.changedLength<2&&(i.trigger(t+"end",n),e=!1)}}}}("transform");var kt=void 0,wt=void 0,Et=new(function(){function t(){p(this,t),this.queue=[]}return g(t,[{key:"add",value:function(t,e){var n=this;this.queue.push(t),1===this.queue.length&&setImmediate(this.queue[0]),e.then(function(){n.queue.shift(),n.queue.length>0&&setTimeout(n.queue[0],1e3/30)})}}]),t}()),Ct=function(t,e){["id","class","animation"].forEach(function(n){return e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}),e.modifier&&Q.addModifier(t,e.modifier)},At=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=_({},e),"string"==typeof t?e.message=t:e=t,e&&(e.message||e.messageHTML)||Q.throw("Notifications must contain a message"),(e.hasOwnProperty("buttonLabels")||e.hasOwnProperty("buttonLabel"))&&(e.buttonLabels=e.buttonLabels||e.buttonLabel,Array.isArray(e.buttonLabels)||(e.buttonLabels=[e.buttonLabels||""])),Q.extend({compile:function(t){return t},callback:function(t){return t},animation:"default",cancelable:!1,primaryButtonIndex:(e.buttonLabels||n.buttonLabels||[]).length-1},n,e)},St={};St._createAlertDialog=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return new Promise(function(t){var i=At.apply(void 0,e);Q.checkMissingImport("AlertDialog","AlertDialogButton");var o="";i.isPrompt&&(o='\n      <input\n        class="text-input text-input--underbar"\n        type="'+(i.inputType||"text")+'"\n        placeholder="'+(i.placeholder||"")+'"\n        value="'+(i.defaultValue||"")+'"\n        style="width: 100%; margin-top: 10px;"\n      />\n    ');var r="";i.buttonLabels.forEach(function(t,e){r+='\n      <ons-alert-dialog-button\n        class="\n          '+(e===i.primaryButtonIndex?" alert-dialog-button--primal":"")+"\n          "+(i.buttonLabels.length<=2?" alert-dialog-button--rowfooter":"")+'\n        "\n        style="position: relative;">\n        '+t+"\n      </ons-alert-dialog-button>\n    "});var a={},s=function(){a.dialog.onDialogCancel&&a.dialog.removeEventListener("dialog-cancel",a.dialog.onDialogCancel),Object.keys(a).forEach(function(t){return delete a[t]}),a=null,i.destroy instanceof Function&&i.destroy()};a.dialog=document.createElement("ons-alert-dialog"),a.dialog.innerHTML='\n    <div class="alert-dialog-mask"\n      style="\n        '+(i.maskColor?"background-color: "+i.maskColor:"")+'\n      "></div>\n    <div class="alert-dialog">\n      <div class="alert-dialog-container">\n        <div class="alert-dialog-title">\n          '+(i.title||"")+'\n        </div>\n        <div class="alert-dialog-content">\n          '+(i.message||i.messageHTML)+"\n          "+o+'\n        </div>\n        <div class="\n          alert-dialog-footer\n          '+(i.buttonLabels.length<=2?" alert-dialog-footer--rowfooter":"")+'\n        ">\n          '+r+"\n        </div>\n      </div>\n    </div>\n  ",n(a.dialog),Ct(a.dialog,i),i.isPrompt&&i.submitOnEnter&&(a.input=a.dialog.querySelector(".text-input"),a.input.onkeypress=function(e){13===e.keyCode&&a.dialog.hide().then(function(){if(a){var e=a.input.value;s(),i.callback(e),t(e)}})}),a.footer=a.dialog.querySelector(".alert-dialog-footer"),Q.arrayFrom(a.dialog.querySelectorAll(".alert-dialog-button")).forEach(function(e,n){e.onclick=function(){a.dialog.hide().then(function(){if(a){var e=n;i.isPrompt&&(e=n===i.primaryButtonIndex?a.input.value:null),a.dialog.remove(),s(),i.callback(e),t(e)}})},a.footer.appendChild(e)}),i.cancelable&&(a.dialog.cancelable=!0,a.dialog.onDialogCancel=function(){setImmediate(function(){a.dialog.remove(),s()});var e=i.isPrompt?null:-1;i.callback(e),t(e)},a.dialog.addEventListener("dialog-cancel",a.dialog.onDialogCancel,!1)),document.body.appendChild(a.dialog),i.compile(a.dialog),setImmediate(function(){a.dialog.show().then(function(){if(a.input&&i.isPrompt&&i.autofocus){var t=a.input.value.length;a.input.focus(),a.input.setSelectionRange(t,t)}})})})},St.alert=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert"})},St.confirm=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["Cancel","OK"],title:"Confirm"})},St.prompt=function(t,e){return St._createAlertDialog(t,e,{buttonLabels:["OK"],title:"Alert",isPrompt:!0,autofocus:!0,submitOnEnter:!0})},St.toast=function(t,e){var n=new Promise(function(i){Q.checkMissingImport("Toast"),e=At(t,e,{timeout:0,force:!1});var o=Q.createElement("\n      <ons-toast>\n        "+e.message+"\n        "+(e.buttonLabels?"<button>"+e.buttonLabels[0]+"</button>":"")+"\n      </ons-toast>\n    ");Ct(o,e);var r=function(t){o&&o.hide().then(function(){o&&(o.remove(),o=null,e.callback(t),i(t))})};e.buttonLabels&&(Q.findChild(o._toast,"button").onclick=function(){return r(0)}),document.body.appendChild(o),e.compile(o);var a=function(){o.parentElement&&o.show(e).then(function(){e.timeout&&setTimeout(function(){return r(-1)},e.timeout)})};setImmediate(function(){return e.force?a():Et.add(a,n)})});return n};var Pt=function(){};Pt.prototype={on:function(t,e){this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(e)},once:function(t,e){var n=this;this.on(t,function i(){return n.off(t,i),e.apply(null,arguments)})},off:function(t,e){this._events=this._events||{},t in this._events!=!1&&(this._events[t]=this._events[t].filter(function(t){return!!e&&e!==t}))},emit:function(t){if(this._events=this._events||{},t in this._events!=!1)for(var e=0;e<this._events[t].length;e++)this._events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}},Pt.mixin=function(t){for(var e=["on","once","off","emit"],n=0;n<e.length;n++)"function"==typeof t?t.prototype[e[n]]=Pt.prototype[e[n]]:t[e[n]]=Pt.prototype[e[n]]},window.MicroEvent=Pt;var Ot=function(){var t={_isPortrait:!1,isPortrait:function(){return this._isPortrait()},isLandscape:function(){return!this.isPortrait()},_init:function(){return document.addEventListener("DOMContentLoaded",this._onDOMContentLoaded.bind(this),!1),"orientation"in window?window.addEventListener("orientationchange",this._onOrientationChange.bind(this),!1):window.addEventListener("resize",this._onResize.bind(this),!1),this._isPortrait=function(){return window.innerHeight>window.innerWidth},this},_onDOMContentLoaded:function(){this._installIsPortraitImplementation(),this.emit("change",{isPortrait:this.isPortrait()})},_installIsPortraitImplementation:function(){var t=window.innerWidth<window.innerHeight;"orientation"in window?window.orientation%180==0?this._isPortrait=function(){return 0===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return 90===Math.abs(window.orientation%180)?t:!t}:this._isPortrait=function(){return window.innerHeight>window.innerWidth}},_onOrientationChange:function(){var t=this,e=this._isPortrait(),n=0,i=setInterval(function(){n++;var o=window.innerWidth,r=window.innerHeight;e&&o<=r||!e&&o>=r?(t.emit("change",{isPortrait:e}),clearInterval(i)):50===n&&(t.emit("change",{isPortrait:e}),clearInterval(i))},20)},_onResize:function(){this.emit("change",{isPortrait:this.isPortrait()})}};return Pt.mixin(t),t}()._init(),xt={add:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.addModifier(t,e)})},remove:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return Q.removeModifier(t,e)})},contains:Q.hasModifier,toggle:Q.toggleModifier},Tt=new Pt;Tt._visible=!1;var Lt=function(){Tt._visible=!0,Tt.emit("show")},Mt=function(){Tt._visible=!1,Tt.emit("hide")},Dt=function(){Q.warn("ons-keyboard: Cordova Keyboard plugin is not present.")};document.addEventListener("deviceready",function(){("undefined"!=typeof Keyboard?(Keyboard.onshow=Lt,Keyboard.onhide=Mt,Tt.emit("init",{visible:Keyboard.isVisible}),!0):void 0!==cordova.plugins&&void 0!==cordova.plugins.Keyboard&&(window.addEventListener("native.keyboardshow",Lt),window.addEventListener("native.keyboardhide",Mt),Tt.emit("init",{visible:cordova.plugins.Keyboard.isVisible}),!0))||((document.querySelector("[ons-keyboard-active]")||document.querySelector("[ons-keyboard-inactive]"))&&Dt(),Tt.on=Dt)});var It=function(){var t=0;return function(){return t++}}(),Nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this._lockList=[],this._waitList=[],this._log=e.log||function(){}}return g(t,[{key:"lock",value:function(){var t=this,e=function e(){t._unlock(e)};return e.id=It(),this._lockList.push(e),this._log("lock: "+e.id),e}},{key:"_unlock",value:function(t){var e=this._lockList.indexOf(t);if(-1===e)throw new Error("This function is not registered in the lock list.");this._lockList.splice(e,1),this._log("unlock: "+t.id),this._tryToFreeWaitList()}},{key:"_tryToFreeWaitList",value:function(){for(;!this.isLocked()&&this._waitList.length>0;)this._waitList.shift()()}},{key:"waitUnlock",value:function(t){if(!(t instanceof Function))throw new Error("The callback param must be a function.");this.isLocked()?this._waitList.push(t):t()}},{key:"isLocked",value:function(){return this._lockList.length>0}}]),t}(),Bt=function(){function t(e,n){p(this,t),this._loader=e instanceof Function?e:function(t,e){var n=t.page,i=t.parent;t.params,P.getPageHTMLAsync(n).then(function(t){var n=Q.createElement(t);i.appendChild(n),e(n)})},this._unloader=n instanceof Function?n:i}return g(t,[{key:"load",value:function(t,e){var n=t.page,i=t.parent,o=t.params,r=void 0===o?{}:o;this._loader({page:n,parent:i,params:r},function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");e(t)})}},{key:"unload",value:function(t){if(!(t instanceof Element))throw Error("pageElement must be an instance of Element.");this._unloader(t)}},{key:"internalLoader",set:function(t){if(!(t instanceof Function))throw Error("First parameter must be an instance of Function");this._loader=t},get:function(){return this._loader}}]),t}(),jt=new Bt,Ht=new Bt(function(t,e){var n=t.page,i=t.parent,o=(t.params,Q.createElement(n.trim()));i.appendChild(o),e(o)},i),Rt={animit:nt,defaultPageLoader:jt,elements:c,GestureDetector:st,modifier:xt,notification:St,orientation:Ot,pageAttributeExpression:S,PageLoader:Bt,platform:C,softwareKeyboard:Tt,_autoStyle:N,_internal:P,_readyLock:new Nt,_util:Q};Rt.platform.select((window.location.search.match(/platform=([\w-]+)/)||[])[1]),function(){var t=Rt._readyLock.lock();window.addEventListener("DOMContentLoaded",function(){Rt.isWebView()?window.document.addEventListener("deviceready",t,!1):t()},!1)}();var Ft=function(t){return Q.throw("This method must be called "+(t?"after":"before")+" ons.isReady() is true")};Rt.isReady=function(){return!Rt._readyLock.isLocked()},Rt.isWebView=Rt.platform.isWebView,Rt.ready=function(t){Rt.isReady()?t():Rt._readyLock.waitUnlock(t)},Rt.setDefaultDeviceBackButtonListener=function(t){Rt.isReady()||Ft(!0),Rt._defaultDeviceBackButtonHandler.setListener(t)},Rt.disableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.disable()},Rt.enableDeviceBackButtonHandler=function(){Rt.isReady()||Ft(!0),P.dbbDispatcher.enable()},Rt.fireDeviceBackButtonEvent=function(){P.dbbDispatcher.fireDeviceBackButtonEvent()},Rt.enableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!0},Rt.disableAutoStatusBarFill=function(){Rt.isReady()&&Ft(!1),P.config.autoStatusBarFill=!1},Rt.mockStatusBar=function(){Rt.isReady()&&Ft(!1);var t=function(){if(!document.body.children[0]||!document.body.children[0].classList.contains("ons-status-bar-mock")){var t=C.isAndroid(),e=function(t){return'<i class="'+t.split("-")[0]+" "+t+'"></i>'},n=t?e("zmdi-twitter")+" "+e("zmdi-google-play"):"No SIM "+e("fa-wifi"),i=t?"":"12:28 PM",o=t?e("zmdi-network")+" "+e("zmdi-wifi")+" "+e("zmdi-battery")+" 12:28 PM":"80% "+e("fa-battery-three-quarters");document.body.insertBefore(Q.createElement('<div class="ons-status-bar-mock '+(t?"android":"ios")+'"><div>'+n+"</div><div>"+i+"</div><div>"+o+"</div></div>"),document.body.firstChild)}};document.body?t():P.waitDOMContentLoaded(t)},Rt.disableAnimations=function(){P.config.animationsDisabled=!0},Rt.enableAnimations=function(){P.config.animationsDisabled=!1},Rt._disableWarnings=function(){P.config.warningsDisabled=!0},Rt._enableWarnings=function(){P.config.warningsDisabled=!1},Rt.disableAutoStyling=N.disable,Rt.enableAutoStyling=N.enable,Rt.disableIconAutoPrefix=function(){Q.checkMissingImport("Icon"),c.Icon.setAutoPrefix(!1)},Rt.forceUIWebViewScrollFix=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];P.config.forceUIWebViewScrollFix=t},Rt.forcePlatformStyling=function(t){Rt.enableAutoStyling(),Rt.platform.select(t||"ios"),Rt._util.arrayFrom(document.querySelectorAll("*")).forEach(function(t){"ons-if"===t.tagName.toLowerCase()?t._platformUpdate():t.tagName.match(/^ons-/i)&&(N.prepare(t,!0),"ons-tabbar"===t.tagName.toLowerCase()&&t._updatePosition())})},Rt.preload=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Promise.all((t instanceof Array?t:[t]).map(function(t){return"string"!=typeof t&&Q.throw("Expected string arguments but got "+(void 0===t?"undefined":f(t))),P.getTemplateHTMLAsync(t)}))},Rt.createElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(t){var n=Rt._util.createElement(t);if(n.remove(),e.append){(e.append instanceof HTMLElement?e.append:document.body).insertBefore(n,e.insertBefore||null),e.link instanceof Function&&e.link(n)}return n};return"<"===(t=t.trim()).charAt(0)?n(t):P.getPageHTMLAsync(t).then(n)},Rt.createPopover=Rt.createDialog=Rt.createAlertDialog=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Rt.createElement(t,_({append:!0},e))},Rt.openActionSheet=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(e){Q.checkMissingImport("ActionSheet"),function(t){var e=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Function";return Q.throw('"options.'+t+'" must be an instance of '+e)},n=function(e){return Object.hasOwnProperty.call(t,e)},i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function;return t[e]instanceof n},o="buttons",r="callback",a="compile",s="destroy";(!n(o)||!i(o,Array))&&e(o,"Array"),n(r)&&!i(r)&&e(r),n(a)&&!i(a)&&e(a),n(s)&&!i(s)&&e(s)}(t);var n=Q.createElement("\n    <ons-action-sheet\n      "+(t.title?'title="'+t.title+'"':"")+"\n      "+(t.cancelable?"cancelable":"")+"\n      "+(t.modifier?'modifier="'+t.modifier+'"':"")+"\n      "+(t.maskColor?'mask-color="'+t.maskColor+'"':"")+"\n      "+(t.id?'id="'+t.id+'"':"")+"\n      "+(t.class?'class="'+t.class+'"':"")+'\n    >\n      <div class="action-sheet"></div>\n    </ons-action-sheet>\n  '),i=function i(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;n&&(t.destroy&&t.destroy(n),n.removeEventListener("dialog-cancel",i,!1),n.remove(),n=null,t.callback&&t.callback(r),e(r))};n.addEventListener("dialog-cancel",i,!1);var o=document.createDocumentFragment();t.buttons.forEach(function(e,r){var a="string"==typeof e?{label:e}:_({},e);t.destructive===r&&(a.modifier=(a.modifier||"")+" destructive");var s=Q.createElement("\n      <ons-action-sheet-button\n        "+(a.icon?'icon="'+a.icon+'"':"")+"\n        "+(a.modifier?'modifier="'+a.modifier+'"':"")+"\n      >\n        "+a.label+"\n      </ons-action-sheet-button>\n    ");s.onclick=function(t){return n.hide().then(function(){return i(t,r)})},o.appendChild(s)}),Q.findChild(n,".action-sheet").appendChild(o),document.body.appendChild(n),t.compile&&t.compile(el.dialog),setImmediate(function(){return n.show({animation:t.animation,animationOptions:t.animationOptions})})})},Rt.resolveLoadingPlaceholder=function(t,e){var n=Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]"));0===n.length&&Q.throw("No ons-loading-placeholder exists"),n.filter(function(t){return!t.getAttribute("page")}).forEach(function(n){n.setAttribute("ons-loading-placeholder",t),Rt._resolveLoadingPlaceholder(n,t,e)})},Rt._setupLoadingPlaceHolders=function(){Rt.ready(function(){Rt._util.arrayFrom(window.document.querySelectorAll("[ons-loading-placeholder]")).forEach(function(t){var e=t.getAttribute("ons-loading-placeholder");"string"==typeof e&&Rt._resolveLoadingPlaceholder(t,e)})})},Rt._resolveLoadingPlaceholder=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return e()};e&&Rt.createElement(e).then(function(e){e.style.display="none",t.appendChild(e),n(e,function(){for(;t.firstChild&&t.firstChild!==e;)t.removeChild(t.firstChild);e.style.display=""})}).catch(function(t){return Promise.reject("Unabled to resolve placeholder: "+t)})};var qt="currentScript"in document?function(){return document.currentScript}:function(){return document.scripts[document.scripts.length-1]};Rt.getScriptPage=function(){return qt()&&/ons-page/i.test(qt().parentElement.tagName)&&qt().parentElement||null};var zt=o(function(t){!function(){function e(t,n){var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=t,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=0,s=r.length;a<s;a++)this[r[a]]=function(t,e){return function(){return t.apply(e,arguments)}}(this[r[a]],this);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var o=Node.prototype.removeEventListener;"click"===e?o.call(t,e,n.hijacked||n,i):o.call(t,e,n,i)},t.addEventListener=function(e,n,i){var o=Node.prototype.addEventListener;"click"===e?o.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),i):o.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(t){o(t)},!1),t.onclick=null)}}var n=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!n,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,r=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),a=o&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0,l=["email","number","password","search","tel","text","url"];e.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(o&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},e.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},e.prototype.sendClick=function(t,e){var n,i;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),i=e.changedTouches[0],(n=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(t),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},e.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(t){var e;o&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type&&"email"!==t.type&&"number"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},e.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},e.prototype.isTextField=function(t){return"textarea"===t.tagName.toLowerCase()||-1!==l.indexOf(t.type)},e.prototype.onTouchStart=function(t){var e,n;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],e.isContentEditable)return!0;if(o){if(e===document.activeElement&&this.isTextField(e))return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1&&t.preventDefault(),!0},e.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(t){var e,n,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay&&t.timeStamp-this.lastClickTime>-1)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,a&&(u=t.changedTouches[0],(c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=c.tagName.toLowerCase())){if(e=this.findControl(c)){if(this.focus(c),i)return!1;c=e}}else if(this.needsFocus(c))return t.timeStamp-n>100||o&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,t),r&&"select"===s||(this.targetElement=null,t.preventDefault()),!1);return!(!o||r||!(l=c.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(c)||(t.preventDefault(),this.sendClick(c,t)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},e.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||((e=this.onMouse(t))||(this.targetElement=null),e)},e.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(t){var e,n,o;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]"))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===t.style.touchAction||"manipulation"===t.style.touchAction)},e.attach=function(t,n){return new e(t,n)},t.exports?(t.exports=e.attach,t.exports.FastClick=e):window.FastClick=e}()}).FastClick;window.customElements&&(window.customElements.forcePolyfill=!0);var Vt=o(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),Wt=o(function(t){var e=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=e)}),Ut=(Wt.version,function(t){return"object"===(void 0===t?"undefined":f(t))?null!==t:"function"==typeof t}),Xt=function(t){if(!Ut(t))throw TypeError(t+" is not an object!");return t},Yt=function(t){try{return!!t()}catch(t){return!0}},Gt=!Yt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),$t=Vt.document,Kt=Ut($t)&&Ut($t.createElement),Qt=function(t){return Kt?$t.createElement(t):{}},Jt=!Gt&&!Yt(function(){return 7!=Object.defineProperty(Qt("div"),"a",{get:function(){return 7}}).a}),Zt=function(t,e){if(!Ut(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!Ut(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!Ut(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},te=Object.defineProperty,ee={f:Gt?Object.defineProperty:function(t,e,n){if(Xt(t),e=Zt(e,!0),Xt(n),Jt)try{return te(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},ne=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ie=Gt?function(t,e,n){return ee.f(t,e,ne(1,n))}:function(t,e,n){return t[e]=n,t},oe={}.hasOwnProperty,re=function(t,e){return oe.call(t,e)},ae=0,se=Math.random(),le=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++ae+se).toString(36))},ue=o(function(t){var e=le("src"),n=Function.toString,i=(""+n).split("toString");Wt.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,o,r){var a="function"==typeof o;a&&(re(o,"name")||ie(o,"name",n)),t[n]!==o&&(a&&(re(o,e)||ie(o,e,t[n]?""+t[n]:i.join(String(n)))),t===Vt?t[n]=o:r?t[n]?t[n]=o:ie(t,n,o):(delete t[n],ie(t,n,o)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[e]||n.call(this)})}),ce=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t},he=function(t,e,n){if(ce(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,o){return t.call(e,n,i,o)}}return function(){return t.apply(e,arguments)}},de=function t(e,n,i){var o,r,a,s,l=e&t.F,u=e&t.G,c=e&t.P,h=e&t.B,d=u?Vt:e&t.S?Vt[n]||(Vt[n]={}):(Vt[n]||{}).prototype,f=u?Wt:Wt[n]||(Wt[n]={}),p=f.prototype||(f.prototype={});u&&(i=n);for(o in i)a=((r=!l&&d&&void 0!==d[o])?d:i)[o],s=h&&r?he(a,Vt):c&&"function"==typeof a?he(Function.call,a):a,d&&ue(d,o,a,e&t.U),f[o]!=a&&ie(f,o,s),c&&p[o]!=a&&(p[o]=a)};Vt.core=Wt,de.F=1,de.G=2,de.S=4,de.P=8,de.B=16,de.W=32,de.U=64,de.R=128;var fe=de,pe={f:{}.propertyIsEnumerable},ge={}.toString,me=function(t){return ge.call(t).slice(8,-1)},_e=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==me(t)?t.split(""):Object(t)},ve=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},be=function(t){return _e(ve(t))},ye=Object.getOwnPropertyDescriptor,ke={f:Gt?ye:function(t,e){if(t=be(t),e=Zt(e,!0),Jt)try{return ye(t,e)}catch(t){}if(re(t,e))return ne(!pe.f.call(t,e),t[e])}},we=function(t,e){if(Xt(t),!Ut(e)&&null!==e)throw TypeError(e+": can't set as prototype!")},Ee={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=he(Function.call,ke.f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return we(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:we};fe(fe.S,"Object",{setPrototypeOf:Ee.set});Wt.Object.setPrototypeOf;var Ce=Vt["__core-js_shared__"]||(Vt["__core-js_shared__"]={}),Ae=function(t){return Ce[t]||(Ce[t]={})},Se=o(function(t){var e=Ae("wks"),n=Vt.Symbol,i="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=i&&n[t]||(i?n:le)("Symbol."+t))}).store=e}),Pe=Se("toStringTag"),Oe="Arguments"==me(function(){return arguments}()),xe=function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Pe))?n:Oe?me(e):"Object"==(i=me(e))&&"function"==typeof e.callee?"Arguments":i},Te={};Te[Se("toStringTag")]="z",Te+""!="[object z]"&&ue(Object.prototype,"toString",function(){return"[object "+xe(this)+"]"},!0);var Le=Math.ceil,Me=Math.floor,De=function(t){return isNaN(t=+t)?0:(t>0?Me:Le)(t)},Ie={},Ne=Math.min,Be=function(t){return t>0?Ne(De(t),9007199254740991):0},je=Math.max,He=Math.min,Re=Ae("keys"),Fe=function(t){return Re[t]||(Re[t]=le(t))},qe=function(t){return function(e,n,i){var o,r=be(e),a=Be(r.length),s=function(t,e){return(t=De(t))<0?je(t+e,0):He(t,e)}(i,a);if(t&&n!=n){for(;a>s;)if((o=r[s++])!=o)return!0}else for(;a>s;s++)if((t||s in r)&&r[s]===n)return t||s||0;return!t&&-1}}(!1),ze=Fe("IE_PROTO"),Ve="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),We=Object.keys||function(t){return function(t,e){var n,i=be(t),o=0,r=[];for(n in i)n!=ze&&re(i,n)&&r.push(n);for(;e.length>o;)re(i,n=e[o++])&&(~qe(r,n)||r.push(n));return r}(t,Ve)},Ue=Gt?Object.defineProperties:function(t,e){Xt(t);for(var n,i=We(e),o=i.length,r=0;o>r;)ee.f(t,n=i[r++],e[n]);return t},Xe=Vt.document,Ye=Xe&&Xe.documentElement,Ge=Fe("IE_PROTO"),$e=function(){},Ke=function(){var t,e=Qt("iframe"),n=Ve.length;for(e.style.display="none",Ye.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Ke=t.F;n--;)delete Ke.prototype[Ve[n]];return Ke()},Qe=Object.create||function(t,e){var n;return null!==t?($e.prototype=Xt(t),n=new $e,$e.prototype=null,n[Ge]=t):n=Ke(),void 0===e?n:Ue(n,e)},Je=ee.f,Ze=Se("toStringTag"),tn=function(t,e,n){t&&!re(t=n?t:t.prototype,Ze)&&Je(t,Ze,{configurable:!0,value:e})},en={};ie(en,Se("iterator"),function(){return this});var nn=function(t,e,n){t.prototype=Qe(en,{next:ne(1,n)}),tn(t,e+" Iterator")},on=function(t){return Object(ve(t))},rn=Fe("IE_PROTO"),an=Object.prototype,sn=Object.getPrototypeOf||function(t){return t=on(t),re(t,rn)?t[rn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?an:null},ln=Se("iterator"),un=!([].keys&&"next"in[].keys()),cn=function(){return this},hn=function(t,e,n,i,o,r,a){nn(n,e,i);var s,l,u,c=function(t){if(!un&&t in p)return p[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},h=e+" Iterator",d="values"==o,f=!1,p=t.prototype,g=p[ln]||p["@@iterator"]||o&&p[o],m=g||c(o),_=o?d?c("entries"):m:void 0,v="Array"==e?p.entries||g:g;if(v&&(u=sn(v.call(new t)))!==Object.prototype&&u.next&&(tn(u,h,!0),re(u,ln)||ie(u,ln,cn)),d&&g&&"values"!==g.name&&(f=!0,m=function(){return g.call(this)}),(un||f||!p[ln])&&ie(p,ln,m),Ie[e]=m,Ie[h]=cn,o)if(s={values:d?m:c("values"),keys:r?m:c("keys"),entries:_},a)for(l in s)l in p||ue(p,l,s[l]);else fe(fe.P+fe.F*(un||f),e,s);return s},dn=function(t){return function(e,n){var i,o,r=String(ve(e)),a=De(n),s=r.length;return a<0||a>=s?t?"":void 0:(i=r.charCodeAt(a))<55296||i>56319||a+1===s||(o=r.charCodeAt(a+1))<56320||o>57343?t?r.charAt(a):i:t?r.slice(a,a+2):o-56320+(i-55296<<10)+65536}}(!0);hn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=dn(e,n),this._i+=t.length,{value:t,done:!1})});var fn=Se("unscopables"),pn=Array.prototype;void 0==pn[fn]&&ie(pn,fn,{});var gn=function(t){pn[fn][t]=!0},mn=function(t,e){return{value:e,done:!!t}},_n=hn(Array,"Array",function(t,e){this._t=be(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,mn(1)):"keys"==e?mn(0,n):"values"==e?mn(0,t[n]):mn(0,[n,t[n]])},"values");Ie.Arguments=Ie.Array,gn("keys"),gn("values"),gn("entries");for(var vn=Se("iterator"),bn=Se("toStringTag"),yn=Ie.Array,kn={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},wn=We(kn),En=0;En<wn.length;En++){var Cn,An=wn[En],Sn=kn[An],Pn=Vt[An],On=Pn&&Pn.prototype;if(On&&(On[vn]||ie(On,vn,yn),On[bn]||ie(On,bn,An),Ie[An]=yn,Sn))for(Cn in _n)On[Cn]||ue(On,Cn,_n[Cn],!0)}var xn=function(t,e,n){for(var i in e)ue(t,i,e[i],n);return t},Tn=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t},Ln=function(t,e,n,i){try{return i?e(Xt(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&Xt(o.call(t)),e}},Mn=Se("iterator"),Dn=Array.prototype,In=function(t){return void 0!==t&&(Ie.Array===t||Dn[Mn]===t)},Nn=Se("iterator"),Bn=Wt.getIteratorMethod=function(t){if(void 0!=t)return t[Nn]||t["@@iterator"]||Ie[xe(t)]},jn=o(function(t){var e={},n={},i=t.exports=function(t,i,o,r,a){var s,l,u,c,h=a?function(){return t}:Bn(t),d=he(o,r,i?2:1),f=0;if("function"!=typeof h)throw TypeError(t+" is not iterable!");if(In(h)){for(s=Be(t.length);s>f;f++)if((c=i?d(Xt(l=t[f])[0],l[1]):d(t[f]))===e||c===n)return c}else for(u=h.call(t);!(l=u.next()).done;)if((c=Ln(u,d,l.value,i))===e||c===n)return c};i.BREAK=e,i.RETURN=n}),Hn=Se("species"),Rn=o(function(t){var e=le("meta"),n=ee.f,i=0,o=Object.isExtensible||function(){return!0},r=!Yt(function(){return o(Object.preventExtensions({}))}),a=function(t){n(t,e,{value:{i:"O"+ ++i,w:{}}})},s=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!Ut(t))return"symbol"==(void 0===t?"undefined":f(t))?t:("string"==typeof t?"S":"P")+t;if(!re(t,e)){if(!o(t))return"F";if(!n)return"E";a(t)}return t[e].i},getWeak:function(t,n){if(!re(t,e)){if(!o(t))return!0;if(!n)return!1;a(t)}return t[e].w},onFreeze:function(t){return r&&s.NEED&&o(t)&&!re(t,e)&&a(t),t}}}),Fn=(Rn.KEY,Rn.NEED,Rn.fastKey,Rn.getWeak,Rn.onFreeze,function(t,e){if(!Ut(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}),qn=ee.f,zn=Rn.fastKey,Vn=Gt?"_s":"size",Wn=function(t,e){var n,i=zn(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n},Un={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=Qe(null),t._f=void 0,t._l=void 0,t[Vn]=0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{clear:function(){for(var t=Fn(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[Vn]=0},delete:function(t){var n=Fn(this,e),i=Wn(n,t);if(i){var o=i.n,r=i.p;delete n._i[i.i],i.r=!0,r&&(r.n=o),o&&(o.p=r),n._f==i&&(n._f=o),n._l==i&&(n._l=r),n[Vn]--}return!!i},forEach:function(t){Fn(this,e);for(var n,i=he(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!Wn(Fn(this,e),t)}}),Gt&&qn(o.prototype,"size",{get:function(){return Fn(this,e)[Vn]}}),o},def:function(t,e,n){var i,o,r=Wn(t,e);return r?r.v=n:(t._l=r={i:o=zn(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=r),i&&(i.n=r),t[Vn]++,"F"!==o&&(t._i[o]=r)),t},getEntry:Wn,setStrong:function(t,e,n){hn(t,e,function(t,n){this._t=Fn(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?"keys"==t?mn(0,e.k):"values"==t?mn(0,e.v):mn(0,[e.k,e.v]):(this._t=void 0,mn(1))},n?"entries":"values",!n,!0),function(t){var e=Vt[t];Gt&&e&&!e[Hn]&&ee.f(e,Hn,{configurable:!0,get:function(){return this}})}(e)}},Xn=Se("iterator"),Yn=!1;try{[7][Xn]().return=function(){Yn=!0}}catch(t){}var Gn=function(t,e){if(!e&&!Yn)return!1;var n=!1;try{var i=[7],o=i[Xn]();o.next=function(){return{done:n=!0}},i[Xn]=function(){return o},t(i)}catch(t){}return n},$n=Ee.set,Kn=function(t,e,n,i,o,r){var a=Vt[t],s=a,l=o?"set":"add",u=s&&s.prototype,c={},h=function(t){var e=u[t];ue(u,t,"delete"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(r&&!Ut(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!Ut(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof s&&(r||u.forEach&&!Yt(function(){(new s).entries().next()}))){var d=new s,f=d[l](r?{}:-0,1)!=d,p=Yt(function(){d.has(1)}),g=Gn(function(t){new s(t)}),m=!r&&Yt(function(){for(var t=new s,e=5;e--;)t[l](e,e);return!t.has(-0)});g||((s=e(function(e,n){Tn(e,s,t);var i=function(t,e,n){var i,o=e.constructor;return o!==n&&"function"==typeof o&&(i=o.prototype)!==n.prototype&&Ut(i)&&$n&&$n(t,i),t}(new a,e,s);return void 0!=n&&jn(n,o,i[l],i),i})).prototype=u,u.constructor=s),(p||m)&&(h("delete"),h("has"),o&&h("get")),(m||f)&&h(l),r&&u.clear&&delete u.clear}else s=i.getConstructor(e,t,o,l),xn(s.prototype,n),Rn.NEED=!0;return tn(s,t),c[t]=s,fe(fe.G+fe.W+fe.F*(s!=a),c),r||i.setStrong(s,t,o),s},Qn=(Kn("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return Un.def(Fn(this,"Set"),t=0===t?0:t,t)}},Un),function(t){return function(){if(xe(this)!=t)throw TypeError(t+"#toJSON isn't generic");return function(t,e){var n=[];return jn(t,!1,n.push,n,e),n}(this)}});fe(fe.P+fe.R,"Set",{toJSON:Qn("Set")});var Jn=function(t){fe(fe.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})};Jn("Set");var Zn=function(t){fe(fe.S,t,{from:function(t){var e,n,i,o,r=arguments[1];return ce(this),(e=void 0!==r)&&ce(r),void 0==t?new this:(n=[],e?(i=0,o=he(r,arguments[2],2),jn(t,!1,function(t){n.push(o(t,i++))})):jn(t,!1,n.push,n),new this(n))}})};Zn("Set");Wt.Set,Kn("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=Un.getEntry(Fn(this,"Map"),t);return e&&e.v},set:function(t,e){return Un.def(Fn(this,"Map"),0===t?0:t,e)}},Un,!0);fe(fe.P+fe.R,"Map",{toJSON:Qn("Map")}),Jn("Map"),Zn("Map");Wt.Map;var ti=Array.isArray||function(t){return"Array"==me(t)},ei=Se("species"),ni=function(t,e){var n=1==t,i=2==t,o=3==t,r=4==t,a=6==t,s=5==t||a,l=e||function(t,e){return new(function(t){var e;return ti(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!ti(e.prototype)||(e=void 0),Ut(e)&&null===(e=e[ei])&&(e=void 0)),void 0===e?Array:e}(t))(e)};return function(e,u,c){for(var h,d,f=on(e),p=_e(f),g=he(u,c,3),m=Be(p.length),_=0,v=n?l(e,m):i?l(e,0):void 0;m>_;_++)if((s||_ in p)&&(h=p[_],d=g(h,_,f),t))if(n)v[_]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return _;case 2:v.push(h)}else if(r)return!1;return a?-1:o||r?r:v}},ii={f:Object.getOwnPropertySymbols},oi=Object.assign,ri=!oi||Yt(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=oi({},t)[n]||Object.keys(oi({},e)).join("")!=i})?function(t,e){for(var n=on(t),i=arguments.length,o=1,r=ii.f,a=pe.f;i>o;)for(var s,l=_e(arguments[o++]),u=r?We(l).concat(r(l)):We(l),c=u.length,h=0;c>h;)a.call(l,s=u[h++])&&(n[s]=l[s]);return n}:oi,ai=Rn.getWeak,si=ni(5),li=ni(6),ui=0,ci=function(t){return t._l||(t._l=new hi)},hi=function(){this.a=[]},di=function(t,e){return si(t.a,function(t){return t[0]===e})};hi.prototype={get:function(t){var e=di(this,t);if(e)return e[1]},has:function(t){return!!di(this,t)},set:function(t,e){var n=di(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=li(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}};var fi={getConstructor:function(t,e,n,i){var o=t(function(t,r){Tn(t,o,e,"_i"),t._t=e,t._i=ui++,t._l=void 0,void 0!=r&&jn(r,n,t[i],t)});return xn(o.prototype,{delete:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).delete(t):n&&re(n,this._i)&&delete n[this._i]},has:function(t){if(!Ut(t))return!1;var n=ai(t);return!0===n?ci(Fn(this,e)).has(t):n&&re(n,this._i)}}),o},def:function(t,e,n){var i=ai(Xt(e),!0);return!0===i?ci(t).set(e,n):i[t._i]=n,t},ufstore:ci};o(function(t){var e,n=ni(0),i=Rn.getWeak,o=Object.isExtensible,r=fi.ufstore,a={},s=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},l={get:function(t){if(Ut(t)){var e=i(t);return!0===e?r(Fn(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return fi.def(Fn(this,"WeakMap"),t,e)}},u=t.exports=Kn("WeakMap",s,l,fi,!0,!0);Yt(function(){return 7!=(new u).set((Object.freeze||Object)(a),7).get(a)})&&(e=fi.getConstructor(s,"WeakMap"),ri(e.prototype,l),Rn.NEED=!0,n(["delete","has","get","set"],function(t){var n=u.prototype,i=n[t];ue(n,t,function(n,r){if(Ut(n)&&!o(n)){this._f||(this._f=new e);var a=this._f[t](n,r);return"set"==t?this:a}return i.call(this,n,r)})}))});Jn("WeakMap"),Zn("WeakMap");Wt.WeakMap;var pi=function(t,e,n){e in t?ee.f(t,e,ne(0,n)):t[e]=n};fe(fe.S+fe.F*!Gn(function(t){}),"Array",{from:function(t){var e,n,i,o,r=on(t),a="function"==typeof this?this:Array,s=arguments.length,l=s>1?arguments[1]:void 0,u=void 0!==l,c=0,h=Bn(r);if(u&&(l=he(l,s>2?arguments[2]:void 0,2)),void 0==h||a==Array&&In(h))for(n=new a(e=Be(r.length));e>c;c++)pi(n,c,u?l(r[c],c):r[c]);else for(o=h.call(r),n=new a;!(i=o.next()).done;c++)pi(n,c,u?Ln(o,l,[i.value,c],!0):i.value);return n.length=c,n}});Wt.Array.from;var gi=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),mi={custom:1,failed:2},_i=function(){function t(){p(this,t),this._localNameToDefinition=new Map,this._constructorToDefinition=new Map,this._patches=[],this._hasPatches=!1}return g(t,[{key:"setDefinition",value:function(t,e){this._localNameToDefinition.set(t,e),this._constructorToDefinition.set(e.constructor,e)}},{key:"localNameToDefinition",value:function(t){return this._localNameToDefinition.get(t)}},{key:"constructorToDefinition",value:function(t){return this._constructorToDefinition.get(t)}},{key:"addPatch",value:function(t){this._hasPatches=!0,this._patches.push(t)}},{key:"patchTree",value:function(t){var e=this;this._hasPatches&&l(t,function(t){return e.patch(t)})}},{key:"patch",value:function(t){if(this._hasPatches&&!t.__CE_patched){t.__CE_patched=!0;for(var e=0;e<this._patches.length;e++)this._patches[e](t)}}},{key:"connectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom?a(i)&&this.connectedCallback(i):this.upgradeElement(i)}}},{key:"disconnectTree",value:function(t){var e=[];l(t,function(t){return e.push(t)});for(var n=0;n<e.length;n++){var i=e[n];i.__CE_state===mi.custom&&this.disconnectedCallback(i)}}},{key:"patchAndUpgradeTree",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=[];if(l(t,function(t){if("link"===t.localName&&"import"===t.getAttribute("rel")){var o=t.import;o instanceof Node&&"complete"===o.readyState?(o.__CE_isImportDocument=!0,o.__CE_hasRegistry=!0):t.addEventListener("load",function(){var i=t.import;i.__CE_documentLoadHandled||(i.__CE_documentLoadHandled=!0,i.__CE_isImportDocument=!0,i.__CE_hasRegistry=!0,n.delete(i),e.patchAndUpgradeTree(i,n))})}else i.push(t)},n),this._hasPatches)for(var o=0;o<i.length;o++)this.patch(i[o]);for(var r=0;r<i.length;r++)this.upgradeElement(i[r])}},{key:"upgradeElement",value:function(t){if(void 0===t.__CE_state){var e=this.localNameToDefinition(t.localName);if(e){e.constructionStack.push(t);var n=e.constructor;try{try{if(new n!==t)throw new Error("The custom element constructor did not produce the element being upgraded.")}finally{e.constructionStack.pop()}}catch(e){throw t.__CE_state=mi.failed,e}if(t.__CE_state=mi.custom,t.__CE_definition=e,e.attributeChangedCallback)for(var i=e.observedAttributes,o=0;o<i.length;o++){var r=i[o],s=t.getAttribute(r);null!==s&&this.attributeChangedCallback(t,r,null,s,null)}a(t)&&this.connectedCallback(t)}}}},{key:"connectedCallback",value:function(t){var e=t.__CE_definition;e.connectedCallback&&e.connectedCallback.call(t),t.__CE_isConnectedCallbackCalled=!0}},{key:"disconnectedCallback",value:function(t){t.__CE_isConnectedCallbackCalled||this.connectedCallback(t);var e=t.__CE_definition;e.disconnectedCallback&&e.disconnectedCallback.call(t),t.__CE_isConnectedCallbackCalled=void 0}},{key:"attributeChangedCallback",value:function(t,e,n,i,o){var r=t.__CE_definition;r.attributeChangedCallback&&r.observedAttributes.indexOf(e)>-1&&r.attributeChangedCallback.call(t,e,n,i,o)}}]),t}(),vi=function(){function t(e,n){p(this,t),this._internals=e,this._document=n,this._observer=void 0,this._internals.patchAndUpgradeTree(this._document),"loading"===this._document.readyState&&(this._observer=new MutationObserver(this._handleMutations.bind(this)),this._observer.observe(this._document,{childList:!0,subtree:!0}))}return g(t,[{key:"disconnect",value:function(){this._observer&&this._observer.disconnect()}},{key:"_handleMutations",value:function(t){var e=this._document.readyState;"interactive"!==e&&"complete"!==e||this.disconnect();for(var n=0;n<t.length;n++)for(var i=t[n].addedNodes,o=0;o<i.length;o++){var r=i[o];this._internals.patchAndUpgradeTree(r)}}}]),t}(),bi=function(){function t(){var e=this;p(this,t),this._value=void 0,this._resolve=void 0,this._promise=new Promise(function(t){e._resolve=t,e._value&&t(e._value)})}return g(t,[{key:"resolve",value:function(t){if(this._value)throw new Error("Already resolved.");this._value=t,this._resolve&&this._resolve(t)}},{key:"toPromise",value:function(){return this._promise}}]),t}(),yi=function(){function t(e){p(this,t),this._elementDefinitionIsRunning=!1,this._internals=e,this._whenDefinedDeferred=new Map,this._flushCallback=function(t){return t()},this._flushPending=!1,this._unflushedLocalNames=[],this._documentConstructionObserver=new vi(e,document)}return g(t,[{key:"define",value:function(t,e){var n=this;if(!(e instanceof Function))throw new TypeError("Custom element constructors must be functions.");if(!r(t))throw new SyntaxError("The element name '"+t+"' is not valid.");if(this._internals.localNameToDefinition(t))throw new Error("A custom element with name '"+t+"' has already been defined.");if(this._elementDefinitionIsRunning)throw new Error("A custom element is already being defined.");this._elementDefinitionIsRunning=!0;var i=void 0,o=void 0,a=void 0,s=void 0,l=void 0;try{var u=function(t){var e=c[t];if(void 0!==e&&!(e instanceof Function))throw new Error("The '"+t+"' callback must be a function.");return e},c=e.prototype;if(!(c instanceof Object))throw new TypeError("The custom element constructor's prototype is not an object.");i=u("connectedCallback"),o=u("disconnectedCallback"),a=u("adoptedCallback"),s=u("attributeChangedCallback"),l=e.observedAttributes||[]}catch(t){return}finally{this._elementDefinitionIsRunning=!1}var h={localName:t,constructor:e,connectedCallback:i,disconnectedCallback:o,adoptedCallback:a,attributeChangedCallback:s,observedAttributes:l,constructionStack:[]};this._internals.setDefinition(t,h),this._unflushedLocalNames.push(t),this._flushPending||(this._flushPending=!0,this._flushCallback(function(){return n._flush()}))}},{key:"_flush",value:function(){if(!1!==this._flushPending)for(this._flushPending=!1,this._internals.patchAndUpgradeTree(document);this._unflushedLocalNames.length>0;){var t=this._unflushedLocalNames.shift(),e=this._whenDefinedDeferred.get(t);e&&e.resolve(void 0)}}},{key:"get",value:function(t){var e=this._internals.localNameToDefinition(t);if(e)return e.constructor}},{key:"whenDefined",value:function(t){if(!r(t))return Promise.reject(new SyntaxError("'"+t+"' is not a valid custom element name."));var e=this._whenDefinedDeferred.get(t);if(e)return e.toPromise();var n=new bi;this._whenDefinedDeferred.set(t,n);return this._internals.localNameToDefinition(t)&&-1===this._unflushedLocalNames.indexOf(t)&&n.resolve(void 0),n.toPromise()}},{key:"polyfillWrapFlushCallback",value:function(t){this._documentConstructionObserver.disconnect();var e=this._flushCallback;this._flushCallback=function(n){return t(function(){return e(n)})}}}]),t}();window.CustomElementRegistry=yi,yi.prototype.define=yi.prototype.define,yi.prototype.get=yi.prototype.get,yi.prototype.whenDefined=yi.prototype.whenDefined,yi.prototype.polyfillWrapFlushCallback=yi.prototype.polyfillWrapFlushCallback;var ki={Document_createElement:window.Document.prototype.createElement,Document_createElementNS:window.Document.prototype.createElementNS,Document_importNode:window.Document.prototype.importNode,Document_prepend:window.Document.prototype.prepend,Document_append:window.Document.prototype.append,Node_cloneNode:window.Node.prototype.cloneNode,Node_appendChild:window.Node.prototype.appendChild,Node_insertBefore:window.Node.prototype.insertBefore,Node_removeChild:window.Node.prototype.removeChild,Node_replaceChild:window.Node.prototype.replaceChild,Node_textContent:Object.getOwnPropertyDescriptor(window.Node.prototype,"textContent"),Element_attachShadow:window.Element.prototype.attachShadow,Element_innerHTML:Object.getOwnPropertyDescriptor(window.Element.prototype,"innerHTML"),Element_getAttribute:window.Element.prototype.getAttribute,Element_setAttribute:window.Element.prototype.setAttribute,Element_removeAttribute:window.Element.prototype.removeAttribute,Element_getAttributeNS:window.Element.prototype.getAttributeNS,Element_setAttributeNS:window.Element.prototype.setAttributeNS,Element_removeAttributeNS:window.Element.prototype.removeAttributeNS,Element_insertAdjacentElement:window.Element.prototype.insertAdjacentElement,Element_prepend:window.Element.prototype.prepend,Element_append:window.Element.prototype.append,Element_before:window.Element.prototype.before,Element_after:window.Element.prototype.after,Element_replaceWith:window.Element.prototype.replaceWith,Element_remove:window.Element.prototype.remove,HTMLElement:window.HTMLElement,HTMLElement_innerHTML:Object.getOwnPropertyDescriptor(window.HTMLElement.prototype,"innerHTML"),HTMLElement_insertAdjacentElement:window.HTMLElement.prototype.insertAdjacentElement},wi=new function t(){p(this,t)},Ei=function(t,e,n){e.prepend=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.prepend.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.append=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.append.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}}},Ci=window.customElements;if(!Ci||Ci.forcePolyfill||"function"!=typeof Ci.define||"function"!=typeof Ci.get){var Ai=new _i;!function(t){window.HTMLElement=function(){function e(){var e=this.constructor,n=t.constructorToDefinition(e);if(!n)throw new Error("The custom element being constructed was not registered with `customElements`.");var i=n.constructionStack;if(0===i.length){var o=ki.Document_createElement.call(document,n.localName);return Object.setPrototypeOf(o,e.prototype),o.__CE_state=mi.custom,o.__CE_definition=n,t.patch(o),o}var r=i.length-1,a=i[r];if(a===wi)throw new Error("The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.");return i[r]=wi,Object.setPrototypeOf(a,e.prototype),t.patch(a),a}return e.prototype=ki.HTMLElement.prototype,e}()}(Ai),function(t){u(Document.prototype,"createElement",function(e){if(this.__CE_hasRegistry){var n=t.localNameToDefinition(e);if(n)return new n.constructor}var i=ki.Document_createElement.call(this,e);return t.patch(i),i}),u(Document.prototype,"importNode",function(e,n){var i=ki.Document_importNode.call(this,e,n);return this.__CE_hasRegistry?t.patchAndUpgradeTree(i):t.patchTree(i),i});u(Document.prototype,"createElementNS",function(e,n){if(this.__CE_hasRegistry&&(null===e||"http://www.w3.org/1999/xhtml"===e)){var i=t.localNameToDefinition(n);if(i)return new i.constructor}var o=ki.Document_createElementNS.call(this,e,n);return t.patch(o),o}),Ei(t,Document.prototype,{prepend:ki.Document_prepend,append:ki.Document_append})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"textContent",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){if(this.nodeType!==Node.TEXT_NODE){var i=void 0;if(this.firstChild){var o=this.childNodes,r=o.length;if(r>0&&a(this)){i=new Array(r);for(var s=0;s<r;s++)i[s]=o[s]}}if(n.set.call(this,e),i)for(var l=0;l<i.length;l++)t.disconnectTree(i[l])}else n.set.call(this,e)}})}u(Node.prototype,"insertBefore",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_insertBefore.call(this,e,n);if(a(this))for(var r=0;r<i.length;r++)t.connectTree(i[r]);return o}var s=a(e),l=ki.Node_insertBefore.call(this,e,n);return s&&t.disconnectTree(e),a(this)&&t.connectTree(e),l}),u(Node.prototype,"appendChild",function(e){if(e instanceof DocumentFragment){var n=Array.prototype.slice.apply(e.childNodes),i=ki.Node_appendChild.call(this,e);if(a(this))for(var o=0;o<n.length;o++)t.connectTree(n[o]);return i}var r=a(e),s=ki.Node_appendChild.call(this,e);return r&&t.disconnectTree(e),a(this)&&t.connectTree(e),s}),u(Node.prototype,"cloneNode",function(e){var n=ki.Node_cloneNode.call(this,e);return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(n):t.patchTree(n),n}),u(Node.prototype,"removeChild",function(e){var n=a(e),i=ki.Node_removeChild.call(this,e);return n&&t.disconnectTree(e),i}),u(Node.prototype,"replaceChild",function(e,n){if(e instanceof DocumentFragment){var i=Array.prototype.slice.apply(e.childNodes),o=ki.Node_replaceChild.call(this,e,n);if(a(this)){t.disconnectTree(n);for(var r=0;r<i.length;r++)t.connectTree(i[r])}return o}var s=a(e),l=ki.Node_replaceChild.call(this,e,n),u=a(this);return u&&t.disconnectTree(n),s&&t.disconnectTree(e),u&&t.connectTree(e),l}),ki.Node_textContent&&ki.Node_textContent.get?e(Node.prototype,ki.Node_textContent):t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){for(var t=[],e=0;e<this.childNodes.length;e++)t.push(this.childNodes[e].textContent);return t.join("")},set:function(t){for(;this.firstChild;)ki.Node_removeChild.call(this,this.firstChild);ki.Node_appendChild.call(this,document.createTextNode(t))}})})}(Ai),function(t){function e(e,n){Object.defineProperty(e,"innerHTML",{enumerable:n.enumerable,configurable:!0,get:n.get,set:function(e){var i=this,o=void 0;if(a(this)&&(o=[],l(this,function(t){t!==i&&o.push(t)})),n.set.call(this,e),o)for(var r=0;r<o.length;r++){var s=o[r];s.__CE_state===mi.custom&&t.disconnectedCallback(s)}return this.ownerDocument.__CE_hasRegistry?t.patchAndUpgradeTree(this):t.patchTree(this),e}})}function n(e,n){u(e,"insertAdjacentElement",function(e,i){var o=a(i),r=n.call(this,e,i);return o&&t.disconnectTree(i),a(r)&&t.connectTree(i),r})}if(ki.Element_attachShadow?u(Element.prototype,"attachShadow",function(t){var e=ki.Element_attachShadow.call(this,t);return this.__CE_shadowRoot=e,e}):console.warn("Custom Elements: `Element#attachShadow` was not patched."),ki.Element_innerHTML&&ki.Element_innerHTML.get)e(Element.prototype,ki.Element_innerHTML);else if(ki.HTMLElement_innerHTML&&ki.HTMLElement_innerHTML.get)e(HTMLElement.prototype,ki.HTMLElement_innerHTML);else{var i=ki.Document_createElement.call(document,"div");t.addPatch(function(t){e(t,{enumerable:!0,configurable:!0,get:function(){return ki.Node_cloneNode.call(this,!0).innerHTML},set:function(t){var e="template"===this.localName?this.content:this;for(i.innerHTML=t;e.childNodes.length>0;)ki.Node_removeChild.call(e,e.childNodes[0]);for(;i.childNodes.length>0;)ki.Node_appendChild.call(e,i.childNodes[0])}})})}u(Element.prototype,"setAttribute",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_setAttribute.call(this,e,n);var i=ki.Element_getAttribute.call(this,e);ki.Element_setAttribute.call(this,e,n),n=ki.Element_getAttribute.call(this,e),t.attributeChangedCallback(this,e,i,n,null)}),u(Element.prototype,"setAttributeNS",function(e,n,i){if(this.__CE_state!==mi.custom)return ki.Element_setAttributeNS.call(this,e,n,i);var o=ki.Element_getAttributeNS.call(this,e,n);ki.Element_setAttributeNS.call(this,e,n,i),i=ki.Element_getAttributeNS.call(this,e,n),t.attributeChangedCallback(this,n,o,i,e)}),u(Element.prototype,"removeAttribute",function(e){if(this.__CE_state!==mi.custom)return ki.Element_removeAttribute.call(this,e);var n=ki.Element_getAttribute.call(this,e);ki.Element_removeAttribute.call(this,e),null!==n&&t.attributeChangedCallback(this,e,n,null,null)}),u(Element.prototype,"removeAttributeNS",function(e,n){if(this.__CE_state!==mi.custom)return ki.Element_removeAttributeNS.call(this,e,n);var i=ki.Element_getAttributeNS.call(this,e,n);ki.Element_removeAttributeNS.call(this,e,n);var o=ki.Element_getAttributeNS.call(this,e,n);i!==o&&t.attributeChangedCallback(this,n,i,o,e)}),ki.HTMLElement_insertAdjacentElement?n(HTMLElement.prototype,ki.HTMLElement_insertAdjacentElement):ki.Element_insertAdjacentElement?n(Element.prototype,ki.Element_insertAdjacentElement):console.warn("Custom Elements: `Element#insertAdjacentElement` was not patched."),Ei(t,Element.prototype,{prepend:ki.Element_prepend,append:ki.Element_append}),function(t,e,n){e.before=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.before.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.after=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)});n.after.apply(this,i);for(var s=0;s<r.length;s++)t.disconnectTree(r[s]);if(a(this))for(var l=0;l<i.length;l++){var u=i[l];u instanceof Element&&t.connectTree(u)}},e.replaceWith=function(){for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];var r=i.filter(function(t){return t instanceof Node&&a(t)}),s=a(this);n.replaceWith.apply(this,i);for(var l=0;l<r.length;l++)t.disconnectTree(r[l]);if(s){t.disconnectTree(this);for(var u=0;u<i.length;u++){var c=i[u];c instanceof Element&&t.connectTree(c)}}},e.remove=function(){var e=a(this);n.remove.call(this),e&&t.disconnectTree(this)}}(t,Element.prototype,{before:ki.Element_before,after:ki.Element_after,replaceWith:ki.Element_replaceWith,remove:ki.Element_remove})}(Ai),document.__CE_hasRegistry=!0;var Si=new yi(Ai);Object.defineProperty(window,"customElements",{configurable:!0,enumerable:!0,value:Si})}!function(t){function e(){d=!1;var t=f;f=[],t.sort(function(t,e){return t.uid_-e.uid_});var n=!1;t.forEach(function(t){var e=t.takeRecords();!function(t){t.nodes_.forEach(function(e){var n=u.get(e);n&&n.forEach(function(e){e.observer===t&&e.removeTransientObservers()})})}(t),e.length&&(t.callback_(e,t),n=!0)}),n&&e()}function n(t,e){for(var n=t;n;n=n.parentNode){var i=u.get(n);if(i)for(var o=0;o<i.length;o++){var r=i[o],a=r.options;if(n===t||a.subtree){var s=e(a);s&&r.enqueue(s)}}}}function i(t){this.callback_=t,this.nodes_=[],this.records_=[],this.uid_=++p}function o(t,e){this.type=t,this.target=e,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function r(t,e){return g=new o(t,e)}function a(t){return m||(m=function(t){var e=new o(t.type,t.target);return e.addedNodes=t.addedNodes.slice(),e.removedNodes=t.removedNodes.slice(),e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,e.attributeName=t.attributeName,e.attributeNamespace=t.attributeNamespace,e.oldValue=t.oldValue,e}(g),m.oldValue=t,m)}function s(t,e,n){this.observer=t,this.target=e,this.options=n,this.transientObservedNodes=[]}if(!t.JsMutationObserver){var l,u=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))l=setTimeout;else if(window.setImmediate)l=window.setImmediate;else{var c=[],h=String(Math.random());window.addEventListener("message",function(t){if(t.data===h){var e=c;c=[],e.forEach(function(t){t()})}}),l=function(t){c.push(t),window.postMessage(h,"*")}}var d=!1,f=[],p=0;i.prototype={observe:function(t,e){if(t=function(t){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(t)||t}(t),!e.childList&&!e.attributes&&!e.characterData||e.attributeOldValue&&!e.attributes||e.attributeFilter&&e.attributeFilter.length&&!e.attributes||e.characterDataOldValue&&!e.characterData)throw new SyntaxError;var n=u.get(t);n||u.set(t,n=[]);for(var i,o=0;o<n.length;o++)if(n[o].observer===this){(i=n[o]).removeListeners(),i.options=e;break}i||(i=new s(this,t,e),n.push(i),this.nodes_.push(t)),i.addListeners()},disconnect:function(){this.nodes_.forEach(function(t){for(var e=u.get(t),n=0;n<e.length;n++){var i=e[n];if(i.observer===this){i.removeListeners(),e.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var t=this.records_;return this.records_=[],t}};var g,m;s.prototype={enqueue:function(t){var n=this.observer.records_,i=n.length;if(n.length>0){var o=function(t,e){return t===e?t:m&&function(t){return t===m||t===g}(t)?m:null}(n[i-1],t);if(o)return void(n[i-1]=o)}else!function(t){f.push(t),d||(d=!0,l(e))}(this.observer);n[i]=t},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(t){var e=this.options;e.attributes&&t.addEventListener("DOMAttrModified",this,!0),e.characterData&&t.addEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.addEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(t){var e=this.options;e.attributes&&t.removeEventListener("DOMAttrModified",this,!0),e.characterData&&t.removeEventListener("DOMCharacterDataModified",this,!0),e.childList&&t.removeEventListener("DOMNodeInserted",this,!0),(e.childList||e.subtree)&&t.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(t){if(t!==this.target){this.addListeners_(t),this.transientObservedNodes.push(t);var e=u.get(t);e||u.set(t,e=[]),e.push(this)}},removeTransientObservers:function(){var t=this.transientObservedNodes;this.transientObservedNodes=[],t.forEach(function(t){this.removeListeners_(t);for(var e=u.get(t),n=0;n<e.length;n++)if(e[n]===this){e.splice(n,1);break}},this)},handleEvent:function(t){switch(t.stopImmediatePropagation(),t.type){case"DOMAttrModified":var e=t.attrName,i=t.relatedNode.namespaceURI,o=t.target;(s=new r("attributes",o)).attributeName=e,s.attributeNamespace=i;l=t.attrChange===MutationEvent.ADDITION?null:t.prevValue;n(o,function(t){if(t.attributes&&(!t.attributeFilter||!t.attributeFilter.length||-1!==t.attributeFilter.indexOf(e)||-1!==t.attributeFilter.indexOf(i)))return t.attributeOldValue?a(l):s});break;case"DOMCharacterDataModified":var s=r("characterData",o=t.target),l=t.prevValue;n(o,function(t){if(t.characterData)return t.characterDataOldValue?a(l):s});break;case"DOMNodeRemoved":this.addTransientObserver(t.target);case"DOMNodeInserted":var u,c,h=t.target;"DOMNodeInserted"===t.type?(u=[h],c=[]):(u=[],c=[h]);var d=h.previousSibling,f=h.nextSibling;(s=r("childList",t.target.parentNode)).addedNodes=u,s.removedNodes=c,s.previousSibling=d,s.nextSibling=f,n(t.relatedNode,function(t){if(t.childList)return s})}g=m=void 0}},t.JsMutationObserver=i,t.MutationObserver||(t.MutationObserver=i,i._isPolyfilled=!0)}}(self),function(t,e){function n(t){return l[s]=i.apply(e,t),s++}function i(t){var n=[].slice.call(arguments,1);return function(){"function"==typeof t?t.apply(e,n):new Function(""+t)()}}function o(t){if(u)setTimeout(i(o,t),0);else{var e=l[t];if(e){u=!0;try{e()}finally{r(t),u=!1}}}}function r(t){delete l[t]}if(!t.setImmediate){var a,s=1,l={},u=!1,c=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(){var t=n(arguments);return process.nextTick(i(o,t)),t}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(){var i=n(arguments);return t.postMessage(e+i,"*"),i}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(){var e=n(arguments);return t.port2.postMessage(e),e}}():c&&"onreadystatechange"in c.createElement("script")?function(){var t=c.documentElement;a=function(){var e=n(arguments),i=c.createElement("script");return i.onreadystatechange=function(){o(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i),e}}():a=function(){var t=n(arguments);return setTimeout(i(o,t),0),t},h.setImmediate=a,h.clearImmediate=r}}(self),function(){var t={ensureViewportElement:function(){var t=document.querySelector("meta[name=viewport]");return t||((t=document.createElement("meta")).name="viewport",document.head.appendChild(t)),t},setup:function(){var e=t.ensureViewportElement();e&&(e.hasAttribute("content")||e.setAttribute("content","width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"))}};window.Viewport=t}();var Pi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return b(e,t),e}(function(){if("function"!=typeof HTMLElement){var t=function(){};return t.prototype=document.createElement("div"),t}return HTMLElement}()),Oi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));for(t.template=t.innerHTML;t.firstChild;)t.removeChild(t.firstChild);return t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.parentNode&&this.parentNode!==document.body&&Q.warn("ons-template (id = "+this.getAttribute("id")+") must be located just under document.body"+(this.parentNode.outerHTML?":\n\n"+this.parentNode.outerHTML:"."));var t=new CustomEvent("_templateloaded",{bubbles:!0,cancelable:!0});t.template=this.template,t.templateId=this.getAttribute("id"),this.dispatchEvent(t)}}]),e}();c.Template=Oi,customElements.define("ons-template",Oi);var xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){if(null!==C._getSelectedPlatform())t._platformUpdate();else if(!t._isAllowedPlatform()){for(;t.childNodes[0];)t.childNodes[0].remove();t._platformUpdate()}}),t._onOrientationChange(),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Ot.on("change",this._onOrientationChange.bind(this))}},{key:"attributeChangedCallback",value:function(t){"orientation"===t&&this._onOrientationChange()}},{key:"disconnectedCallback",value:function(){Ot.off("change",this._onOrientationChange)}},{key:"_platformUpdate",value:function(){this.style.display=this._isAllowedPlatform()?"":"none"}},{key:"_isAllowedPlatform",value:function(){return!this.getAttribute("platform")||this.getAttribute("platform").split(/\s+/).indexOf(C.getMobileOS())>=0}},{key:"_onOrientationChange",value:function(){if(this.hasAttribute("orientation")&&this._isAllowedPlatform()){var t=this.getAttribute("orientation").toLowerCase(),e=Ot.isPortrait()?"portrait":"landscape";this.style.display=t===e?"":"none"}}}],[{key:"observedAttributes",get:function(){return["orientation"]}}]),e}();c.If=xi,customElements.define("ons-if",xi);var Ti=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,t),this.timing=e.timing||"linear",this.duration=e.duration||0,this.delay=e.delay||0,this.def={timing:this.timing,duration:this.duration,delay:this.delay}}return g(t,null,[{key:"extend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=function(){e.apply(this,arguments),Q.extend(this,t)};return n.prototype=this.prototype,n}}]),t}(),Li={};Li.isIPhoneXPortraitPatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-portrait")&&window.innerWidth<window.innerHeight},Li.isIPhoneXLandscapePatchActive=function(){return null!=document.documentElement.getAttribute("onsflag-iphonex-landscape")&&window.innerWidth>=window.innerHeight},Li.getSafeAreaLengths=function(){return Li.isIPhoneXPortraitPatchActive()?{top:44,right:0,bottom:34,left:0}:Li.isIPhoneXLandscapePatchActive()?{top:0,right:44,bottom:21,left:44}:{top:0,right:0,bottom:0,left:0}},Li.getSafeAreaDOMRect=function(){var t=void 0;return t=Li.isIPhoneXPortraitPatchActive()?{x:0,y:44,width:window.innerWidth,height:window.innerHeight-78}:Li.isIPhoneXLandscapePatchActive()?{x:44,y:0,width:window.innerWidth-88,height:window.innerHeight-21}:{x:0,y:0,width:window.innerWidth,height:window.innerHeight},_({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})};var Mi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Di=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 80%, 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, 80%, 0)",opacity:0}).queue(function(t){e&&e(),t()}))}}]),e}(),Ii=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.maskTiming="linear",l.maskDuration=.2,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 48px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 33px)":l.liftAmount=document.body.clientHeight/2-1+"px",l}return b(e,Mi),g(e,[{key:"show",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:0}).wait(this.delay).queue({opacity:1},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){nt.runAll(nt(t._mask).queue({opacity:1}).wait(this.delay).queue({opacity:0},{duration:this.maskDuration,timing:this.maskTiming}),nt(t._sheet,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.liftAmount+", 0)"}).queue(function(t){e&&e(),t()}))}}]),e}(),Ni=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),t._visible=!1,t._doorLock=new Nt,t._cancel=t._cancel.bind(t),t._selfCamelName=Q.camelize(t.tagName.slice(4)),t._defaultDBB=function(e){return t.cancelable?t._cancel():e.callParentHandler()},t._animatorFactory=t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"_updateAnimatorFactory",value:function(){Q.throwMember()}},{key:"_toggleStyle",value:function(t){this.style.display=t?"block":"none"}},{key:"_scheme",get:function(){Q.throwMember()}}]),g(e,[{key:"_cancel",value:function(){var t=this;this.cancelable&&!this._running&&(this._running=!0,this.hide().then(function(){t._running=!1,Q.triggerElementEvent(t,"dialog-cancel")},function(){return t._running=!1}))}},{key:"show",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!0].concat(e))}},{key:"hide",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!1].concat(e))}},{key:"toggle",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._setVisible.apply(this,[!this.visible].concat(e))}},{key:"_setVisible",value:function(t){var e,i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?"show":"hide";(o=_({},o)).animationOptions=Q.extend(o.animationOptions||{},O.parseAnimationOptionsString(this.getAttribute("animation-options")));var a=!1;return Q.triggerElementEvent(this,"pre"+r,(e={},m(e,this._selfCamelName,this),m(e,"cancel",function(){return a=!0}),e)),a?Promise.reject("Canceled in pre"+r+" event."):new Promise(function(e){i._doorLock.waitUnlock(function(){var a=i._doorLock.lock(),s=i._animatorFactory.newAnimator(o);t&&i._toggleStyle(!0,o),i._visible=t,Q.iosPageScrollFix(t),n(i,function(){s[r](i,function(){!t&&i._toggleStyle(!1,o),a(),Q.propagateAction(i,"_"+r),Q.triggerElementEvent(i,"post"+r,m({},i._selfCamelName,i)),o.callback instanceof Function&&o.callback(i),e(i)})})})})}},{key:"_updateMask",value:function(){var t=this;n(this,function(){t._mask&&t.getAttribute("mask-color")&&(t._mask.style.backgroundColor=t.getAttribute("mask-color"))})}},{key:"connectedCallback",value:function(){var t=this;this.onDeviceBackButton=this._defaultDBB.bind(this),n(this,function(){t._mask&&(t._mask.addEventListener("click",t._cancel,!1),Q.iosMaskScrollFix(t._mask,!0))})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._mask&&(this._mask.removeEventListener("click",this._cancel,!1),Q.iosMaskScrollFix(this._mask,!1))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"animation":this._animatorFactory=this._updateAnimatorFactory();break;case"mask-color":this._updateMask()}}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"visible",get:function(){return this._visible}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"cancelable",set:function(t){return Q.toggleAttribute(this,"cancelable",t)},get:function(){return this.hasAttribute("cancelable")}}],[{key:"observedAttributes",get:function(){return["modifier","animation","mask-color"]}},{key:"events",get:function(){return["preshow","postshow","prehide","posthide","dialog-cancel"]}}]),e}(),Bi={".action-sheet":"action-sheet--*",".action-sheet-mask":"action-sheet-mask--*",".action-sheet-title":"action-sheet-title--*"},ji={default:function(){return C.isAndroid()?Di:Ii},none:Mi},Hi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:ji,baseClass:Mi,baseClassName:"ActionSheetAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._sheet){var t=document.createElement("div");for(t.classList.add("action-sheet");this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}if(!this._title&&this.hasAttribute("title")){var e=document.createElement("div");e.innerHTML=this.getAttribute("title"),e.classList.add("action-sheet-title"),this._sheet.insertBefore(e,this._sheet.firstChild)}if(!this._mask){var n=document.createElement("div");n.classList.add("action-sheet-mask"),this.insertBefore(n,this.firstChild)}this._sheet.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_updateTitle",value:function(){this._title&&(this._title.innerHTML=this.getAttribute("title"))}},{key:"attributeChangedCallback",value:function(t,n,i){"title"===t?this._updateTitle():v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Bi}},{key:"_mask",get:function(){return Q.findChild(this,".action-sheet-mask")}},{key:"_sheet",get:function(){return Q.findChild(this,".action-sheet")}},{key:"_title",get:function(){return this.querySelector(".action-sheet-title")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Mi||Q.throwAnimator("ActionSheet"),ji[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["title"])}},{key:"animators",get:function(){return ji}},{key:"ActionSheetAnimator",get:function(){return Mi}}]),e}();c.ActionSheet=Hi,customElements.define("ons-action-sheet",Hi);var Ri=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_scheme",get:function(){Q.throwMember()}},{key:"_defaultClassName",get:function(){Q.throwMember()}},{key:"_rippleOpt",get:function(){return[this]}}]),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add(this._defaultClassName),!this._icon&&this.hasAttribute("icon")){Q.checkMissingImport("Icon");var t=Q.createElement('<ons-icon icon="'+this.getAttribute("icon")+'"></ons-icon>');t.classList.add(this._defaultClassName.replace("button","icon")),this.insertBefore(t,this.firstChild)}this._updateRipple(),B.initModifier(this,this._scheme)}},{key:"_updateIcon",value:function(){this._icon&&this._icon.setAttribute("icon",this.getAttribute("icon"))}},{key:"_updateRipple",value:function(){this._rippleOpt&&Q.updateRipple.apply(Q,w(this._rippleOpt))}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,this._defaultClassName,this._scheme);break;case"modifier":B.onModifierChanged(e,n,this,this._scheme);break;case"icon":this._updateIcon();break;case"ripple":this.classList.contains(this._defaultClassName)&&this._updateRipple()}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"_icon",get:function(){return Q.findChild(this,"ons-icon")}}],[{key:"observedAttributes",get:function(){return["modifier","class","icon","ripple"]}}]),e}(),Fi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"action-sheet-button--*",".action-sheet-icon":"action-sheet-icon--*"}}},{key:"_defaultClassName",get:function(){return"action-sheet-button"}},{key:"_rippleOpt",get:function(){}}]),e}();c.ActionSheetButton=Fi,customElements.define("ons-action-sheet-button",Fi);var qi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),zi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1},{transform:"translate3d(-50%, -50%, 0) scale3d(.9, .9, 1)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Vi=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.duration,r=void 0===o?.2:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{duration:r,timing:i,delay:s}))}return b(e,qi),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0) scale3d(1.3, 1.3, 1)",opacity:0},{transform:"translate3d(-50%, -50%, 0) scale3d(1, 1, 1)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}))}}]),e}(),Wi={".alert-dialog":"alert-dialog--*",".alert-dialog-container":"alert-dialog-container--*",".alert-dialog-title":"alert-dialog-title--*",".alert-dialog-content":"alert-dialog-content--*",".alert-dialog-footer":"alert-dialog-footer--*",".alert-dialog-footer--rowfooter":"alert-dialog-footer--rowfooter--*",".alert-dialog-button--rowfooter":"alert-dialog-button--rowfooter--*",".alert-dialog-button--primal":"alert-dialog-button--primal--*",".alert-dialog-button":"alert-dialog-button--*","ons-alert-dialog-button":"alert-dialog-button--*",".alert-dialog-mask":"alert-dialog-mask--*",".text-input":"text-input--*"},Ui={none:qi,default:function(){return C.isAndroid()?zi:Vi},fade:function(){return C.isAndroid()?zi:Vi}},Xi=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Ui,baseClass:qi,baseClassName:"AlertDialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=10001;var t=document.createDocumentFragment();if(!this._mask&&!this._dialog)for(;this.firstChild;)t.appendChild(this.firstChild);if(!this._mask){var e=document.createElement("div");e.classList.add("alert-dialog-mask"),this.insertBefore(e,this.children[0])}if(!this._dialog){var n=document.createElement("div");n.classList.add("alert-dialog"),this.insertBefore(n,null)}if(!Q.findChild(this._dialog,".alert-dialog-container")){var i=document.createElement("div");i.classList.add("alert-dialog-container"),this._dialog.appendChild(i)}this._dialog.children[0].appendChild(t),this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Wi}},{key:"_mask",get:function(){return Q.findChild(this,".alert-dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".alert-dialog")}},{key:"_titleElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-title")}},{key:"_contentElement",get:function(){return Q.findChild(this._dialog.children[0],".alert-dialog-content")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof qi||Q.throwAnimator("AlertDialog"),Ui[t]=e}},{key:"animators",get:function(){return Ui}},{key:"AlertDialogAnimator",get:function(){return qi}}]),e}();c.AlertDialog=Xi,customElements.define("ons-alert-dialog",Xi);var Yi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"alert-dialog-button--*"}}},{key:"_defaultClassName",get:function(){return"alert-dialog-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{modifier:"light-gray"}]}}]),e}();c.AlertDialogButton=Yi,customElements.define("ons-alert-dialog-button",Yi);var Gi={"":"back-button--*",".back-button__icon":"back-button--*__icon",".back-button__label":"back-button--*__label"},$i=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._options={},t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_updateIcon",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q.findChild(this,".back-button__icon")).innerHTML="android"===N.getPlatform(this)||Q.hasModifier(this,"material")?'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>md-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="android" transform="translate(-32.000000, -32.000000)" fill-rule="nonzero">\n            <polygon id="md-back-button-icon" points="48 39 35.83 39 41.42 33.41 40 32 32 40 40 48 41.41 46.59 35.83 41 48 41"></polygon>\n        </g>\n    </g>\n</svg>\n':'<?xml version="1.0" encoding="UTF-8"?>\n<svg width="13px" height="21px" viewBox="0 0 13 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <title>ios-back-button-icon</title>\n    <desc>Created with Sketch.</desc>\n    <defs></defs>\n    <g id="toolbar-back-button" stroke="none" stroke-width="1" fill-rule="evenodd">\n        <g id="ios" transform="translate(-34.000000, -30.000000)">\n            <polygon id="ios-back-button-icon" points="34 40.5 44.5 30 46.5 32 38 40.5 46.5 49 44.5 51"></polygon>\n        </g>\n    </g>\n</svg>\n'}},{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("back-button"),!Q.findChild(this,".back-button__label")){for(var t=Q.create("span.back-button__label");this.childNodes[0];)t.appendChild(this.childNodes[0]);this.appendChild(t)}if(!Q.findChild(this,".back-button__icon")){var e=Q.create("span.back-button__icon");this._updateIcon(e),this.insertBefore(e,this.children[0])}Q.updateRipple(this,void 0,{center:"",size:"contain",background:"transparent"}),B.initModifier(this,Gi)}},{key:"_onClick",value:function(){if(this.onClick)this.onClick.apply(this);else{var t=Q.findParent(this,"ons-navigator");t&&t.popPage(this.options)}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"back-button",Gi);break;case"modifier":B.onModifierChanged(e,n,this,Gi)&&this._updateIcon()}}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"show",value:function(){this.style.display="inline-block"}},{key:"hide",value:function(){this.style.display="none"}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BackButton=$i,customElements.define("ons-back-button",$i);var Ki="bottom-bar",Qi={"":"bottom-bar--*"},Ji=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.classList.add(Ki),B.initModifier(t,Qi),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-page")&&this.parentNode.classList.add("page-with-bottom-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,Ki,Qi);break;case"modifier":B.onModifierChanged(e,n,this,Qi)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.BottomToolbar=Ji,customElements.define("ons-bottom-toolbar",Ji);var Zi=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"button--*"}}},{key:"_defaultClassName",get:function(){return"button"}}]),e}();c.Button=Zi,customElements.define("ons-button",Zi);var to={"":"card--*",".card__title":"card--*__title",".card__content":"card--*__content"},eo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.classList.contains("title")?e.classList.add("card__title"):e.classList.contains("content")&&e.classList.add("card__content")}N.prepare(this),this.classList.add("card"),B.initModifier(this,to)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"card",to);break;case"modifier":B.onModifierChanged(e,n,this,to)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Card=eo,customElements.define("ons-card",eo);var no={"":"carousel-item--*"},io=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.style.width="100%",B.initModifier(t,no),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t)return B.onModifierChanged(e,n,this,no)}}],[{key:"observedAttributes",get:function(){return["modifier"]}}]),e}();c.CarouselItem=io,customElements.define("ons-carousel-item",io);var oo={vertical:{axis:"Y",size:"Height",dir:["up","down"],t3d:["0px, ","px, 0px"]},horizontal:{axis:"X",size:"Width",dir:["left","right"],t3d:["","px, 0px, 0px"]}},ro=function(){function t(e){var n=this;p(this,t);"getInitialIndex getBubbleWidth isVertical isOverScrollable isCentered\n    isAutoScrollable refreshHook preChangeHook postChangeHook overScrollHook".split(/\s+/).forEach(function(t){return n[t]=e[t]||function(){return!1}}),this.getElement=e.getElement,this.scrollHook=e.scrollHook,this.itemSize=e.itemSize||"100%",this.getAutoScrollRatio=function(){var t=e.getAutoScrollRatio&&e.getAutoScrollRatio.apply(e,arguments);return((t="number"==typeof t&&t==t?t:.5)<0||t>1)&&Q.throw("Invalid auto-scroll-ratio "+t+". Must be between 0 and 1"),t},this.shouldBlock="other"===Q.globals.actualMobileOS,this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onResize=this.onResize.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.swipeable,i=e.autoRefresh;this.initialized=!0,this.target=this.getElement().children[0],this.blocker=this.getElement().children[1],this.target&&this.blocker||Q.throw('Expected "target" and "blocker" elements to exist before initializing Swiper'),this.shouldBlock||(this.blocker.style.display="none"),this.getElement().classList.add("ons-swiper"),this.target.classList.add("ons-swiper-target"),this.blocker.classList.add("ons-swiper-blocker"),this._gestureDetector=new st(this.getElement(),{dragMinDistance:1,dragLockToAxis:!0,passive:!this._shouldFixScroll}),this._mutationObserver=new MutationObserver(function(){return t.refresh()}),this.updateSwipeable(n),this.updateAutoRefresh(i),this._scroll=this._offset=this._lastActiveIndex=0,this._updateLayout(),this._setupInitialIndex(),setImmediate(function(){return t.initialized&&t._setupInitialIndex()}),window===window.parent&&0!==this.offsetHeight||window.requestAnimationFrame(function(){return t.initialized&&t.onResize()})}},{key:"dispose",value:function(){this.initialized=!1,this.updateSwipeable(!1),this.updateAutoRefresh(!1),this._gestureDetector&&this._gestureDetector.dispose(),this.target=this.blocker=this._gestureDetector=this._mutationObserver=null,this.setupResize(!1)}},{key:"onResize",value:function(){var t=this._scroll/this.targetSize;this._reset(),this.setActiveIndex(t),this.refresh()}},{key:"_calculateItemSize",value:function(){var t=this.itemSize.match(/^(\d+)(px|%)/);t||Q.throw("Invalid state: swiper's size unit must be '%' or 'px'");var e=parseInt(t[1],10);return"%"===t[2]?Math.round(e/100*this.targetSize):e}},{key:"_setupInitialIndex",value:function(){this._reset(),this._lastActiveIndex=Math.max(Math.min(Number(this.getInitialIndex()),this.itemCount),0),this._scroll=this._offset+this.itemNumSize*this._lastActiveIndex,this._scrollTo(this._scroll)}},{key:"_setSwiping",value:function(t){this.target.classList.toggle("swiping",t)}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._setSwiping(!0),t=Math.max(0,Math.min(t,this.itemCount-1));var i=Math.max(0,Math.min(this.maxScroll,this._offset+this.itemNumSize*t));if(C.isUIWebView()){var o=function(t){return Array.prototype.concat.apply([],t)}(Q.arrayFrom(this.target.children).map(function(t){return Q.arrayFrom(t.children).filter(function(t){return t.classList.contains("page__content")})})),r=new Map;return new Promise(function(t){o.forEach(function(t){r.set(t,t.getAttribute("class")),t.classList.add("page__content--suppress-layer-creation")}),requestAnimationFrame(t)}).then(function(){return e._changeTo(i,n)}).then(function(){return new Promise(function(t){o.forEach(function(t){t.setAttribute("class",r.get(t))}),requestAnimationFrame(t)})})}return this._changeTo(i,n)}},{key:"getActiveIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._scroll;t-=this._offset;var e=this.itemCount,n=this.itemNumSize;if(0===this.itemNumSize||!Q.isInteger(t))return this._lastActiveIndex;if(t<=0)return 0;for(var i=0;i<e;i++)if(n*i<=t&&n*(i+1)>t)return i;return e-1}},{key:"setupResize",value:function(t){window[(t?"add":"remove")+"EventListener"]("resize",this.onResize,!0)}},{key:"show",value:function(){var t=this;this.setupResize(!0),this.onResize(),setTimeout(function(){return t.target&&t.target.classList.add("active")},1e3/60)}},{key:"hide",value:function(){this.setupResize(!1),this.target.classList.remove("active")}},{key:"updateSwipeable",value:function(t){if(this._gestureDetector){var e=t?"on":"off";this._gestureDetector[e]("drag",this.onDrag),this._gestureDetector[e]("dragstart",this.onDragStart),this._gestureDetector[e]("dragend",this.onDragEnd)}}},{key:"updateAutoRefresh",value:function(t){this._mutationObserver&&(t?this._mutationObserver.observe(this.target,{childList:!0}):this._mutationObserver.disconnect())}},{key:"updateItemSize",value:function(t){this.itemSize=t||"100%",this.refresh()}},{key:"toggleBlocker",value:function(t){this.blocker.style.pointerEvents=t?"auto":"none"}},{key:"_canConsumeGesture",value:function(t){var e=t.direction,n=0===this._scroll&&!this.isOverScrollable(),i=this._scroll===this.maxScroll&&!this.isOverScrollable();return this.isVertical()?"down"===e&&!n||"up"===e&&!i:"right"===e&&!n||"left"===e&&!i}},{key:"onDragStart",value:function(t){var e=this;if(this._ignoreDrag=t.consumed||!Q.isValidGesture(t),!this._ignoreDrag){var n=t.consume;if(t.consume=function(){n&&n(),e._ignoreDrag=!0},this._canConsumeGesture(t.gesture)){var i=t.gesture.center&&t.gesture.center.clientX||0,o=this.getBubbleWidth()||0,r=function(){n&&n(),t.consumed=!0,e._started=!0,e.shouldBlock&&e.toggleBlocker(!0),e._setSwiping(!0),Q.iosPreventScroll(e._gestureDetector)};i<o||i>this.targetSize-o?setImmediate(function(){return!e._ignoreDrag&&r()}):r()}}}},{key:"onDrag",value:function(t){t.gesture&&!this._ignoreDrag&&this._started&&(this._continued=!0,t.stopPropagation(),this._scrollTo(this._scroll-this._getDelta(t),{throttle:!0}))}},{key:"onDragEnd",value:function(t){if(this._started=!1,t.gesture&&!this._ignoreDrag&&this._continued){this._continued=!1,t.stopPropagation();var e=this._scroll-this._getDelta(t),n=this._normalizeScroll(e);e===n?this._startMomentumScroll(e,t):this._killOverScroll(n),this.shouldBlock&&this.toggleBlocker(!1)}else this._ignoreDrag=!0}},{key:"_startMomentumScroll",value:function(t,e){var n=this._getVelocity(e),i=e.gesture.interimDirection===this.dM.dir[this._getDelta(e)<0?0:1],o=this._getAutoScroll(t,n,i),r=Math.abs(o-t)/(n+.01)/1e3;r=Math.min(.25,Math.max(.1,r)),this._changeTo(o,{swipe:!0,animationOptions:{duration:r,timing:"cubic-bezier(.4, .7, .5, 1)"}})}},{key:"_killOverScroll",value:function(t){var e=this;this._scroll=t;var n=this.dM.dir[Number(t>0)],i=function(){return e._changeTo(t,{animationOptions:{duration:.4,timing:"cubic-bezier(.1, .4, .1, 1)"}})};this.overScrollHook({direction:n,killOverScroll:i})||i()}},{key:"_changeTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={activeIndex:this.getActiveIndex(t),lastActiveIndex:this._lastActiveIndex,swipe:n.swipe||!1},o=i.activeIndex!==i.lastActiveIndex,r=!!o&&this.preChangeHook(i);return this._scroll=r?this._offset+i.lastActiveIndex*this.itemNumSize:t,this._lastActiveIndex=r?i.lastActiveIndex:i.activeIndex,this._scrollTo(this._scroll,n).then(function(){if(t!==e._scroll||r){if(n.reject)return e._setSwiping(!1),Promise.reject("Canceled")}else e._setSwiping(!1),o&&e.postChangeHook(i)})}},{key:"_scrollTo",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.throttle){if(t<0)t=this.isOverScrollable()?Math.round(.35*t):0;else{var i=this.maxScroll;i<t&&(t=this.isOverScrollable()?i+Math.round(.35*(t-i)):i)}}var o="none"===n.animation?{}:n.animationOptions;return this.scrollHook&&this.itemNumSize>0&&this.scrollHook((t/this.itemNumSize).toFixed(2),n.animationOptions||{}),new Promise(function(n){return nt(e.target).queue({transform:e._getTransform(t)},o).play(n)})}},{key:"_getAutoScroll",value:function(t,e,n){var i=this.maxScroll,o=this._offset,r=this.itemNumSize;if(!this.isAutoScrollable())return Math.max(0,Math.min(i,t));for(var a=[],s=o;s<i;s+=r)a.push(s);a.push(i);var l=(a=a.sort(function(e,n){return Math.abs(e-t)-Math.abs(n-t)}).filter(function(t,e){return!e||t!==a[e-1]}))[0],u=this._lastActiveIndex*r+o,c=Math.abs(t-u)/r;return c<=this.getAutoScrollRatio(n,e,r)?l=u:c<1&&a[0]===u&&a.length>1&&(l=a[1]),Math.max(0,Math.min(i,l))}},{key:"_reset",value:function(){this._targetSize=this._itemNumSize=void 0}},{key:"_normalizeScroll",value:function(t){return Math.max(Math.min(t,this.maxScroll),0)}},{key:"refresh",value:function(){if(this._reset(),this._updateLayout(),Q.isInteger(this._scroll)){var t=this._normalizeScroll(this._scroll);t!==this._scroll?this._killOverScroll(t):this._changeTo(t)}else this._setupInitialIndex();this.refreshHook()}},{key:"_getDelta",value:function(t){return t.gesture["delta"+this.dM.axis]}},{key:"_getVelocity",value:function(t){return t.gesture["velocity"+this.dM.axis]}},{key:"_getTransform",value:function(t){return"translate3d("+this.dM.t3d[0]+-t+this.dM.t3d[1]+")"}},{key:"_updateLayout",value:function(){this.dM=oo[this.isVertical()?"vertical":"horizontal"],this.target.classList.toggle("ons-swiper-target--vertical",this.isVertical());for(var t=this.target.children[0];t;t=t.nextElementSibling)t.style[this.dM.size.toLowerCase()]=this.itemSize;this.isCentered()&&(this._offset=(this.targetSize-this.itemNumSize)/-2||0)}},{key:"itemCount",get:function(){return this.target.children.length}},{key:"itemNumSize",get:function(){return"number"==typeof this._itemNumSize&&this._itemNumSize==this._itemNumSize||(this._itemNumSize=this._calculateItemSize()),this._itemNumSize}},{key:"maxScroll",get:function(){var t=this.itemCount*this.itemNumSize-this.targetSize;return Math.ceil(t<0?0:t)}},{key:"targetSize",get:function(){return this._targetSize||(this._targetSize=this.target["offset"+this.dM.size]),this._targetSize}}]),t}(),ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this.children[0]&&"ONS-CAROUSEL-ITEM"!==this.children[0].tagName&&this.children[0]||document.createElement("div");if(!t.parentNode){for(;this.firstChild;)t.appendChild(this.firstChild);this.appendChild(t)}!this.children[1]&&this.appendChild(document.createElement("div")),this.appendChild=this.appendChild.bind(t),this.insertBefore=this.insertBefore.bind(t)}},{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t},getInitialIndex:function(){return t.getAttribute("initial-index")},getAutoScrollRatio:function(){return t.autoScrollRatio},isVertical:function(){return t.vertical},isOverScrollable:function(){return t.overscrollable},isCentered:function(){return t.centered},isAutoScrollable:function(){return t.autoScroll},itemSize:this.itemSize,overScrollHook:this._onOverScroll.bind(this),preChangeHook:this._onChange.bind(this,"prechange"),postChangeHook:this._onChange.bind(this,"postchange"),refreshHook:this._onRefresh.bind(this),scrollHook:function(){return t._onSwipe&&t._onSwipe.apply(t,arguments)}}),n(this,function(){return t._swiper.init({swipeable:t.hasAttribute("swipeable"),autoRefresh:t.hasAttribute("auto-refresh")})}))}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null)}},{key:"attributeChangedCallback",value:function(t,e,n){if(this._swiper)switch(t){case"swipeable":this._swiper.updateSwipeable(this.hasAttribute("swipeable"));break;case"auto-refresh":this._swiper.updateAutoRefresh(this.hasAttribute("auto-refresh"));break;case"item-height":this.vertical&&this._swiper.updateItemSize(this.itemSize);break;case"item-width":this.vertical||this._swiper.updateItemSize(this.itemSize);break;case"direction":this._swiper.refresh()}}},{key:"_show",value:function(){this._swiper.show()}},{key:"_hide",value:function(){this._swiper.hide()}},{key:"_onOverScroll",value:function(t){var e=t.direction,n=t.killOverScroll,i=!1;return Q.triggerElementEvent(this,"overscroll",{carousel:this,activeIndex:this.getActiveIndex(),direction:e,waitToReturn:function(t){i=!0,t.then(n)}}),i}},{key:"_onChange",value:function(t,e){var n=e.activeIndex,i=e.lastActiveIndex;Q.triggerElementEvent(this,t,{carousel:this,activeIndex:n,lastActiveIndex:i})}},{key:"_onRefresh",value:function(){Q.triggerElementEvent(this,"refresh",{carousel:this})}},{key:"setActiveIndex",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=_({animation:this.getAttribute("animation"),animationOptions:this.hasAttribute("animation-options")?Q.animationOptionsParse(this.getAttribute("animation-options")):{duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"}},n),this._swiper.setActiveIndex(t,n).then(function(){return n.callback instanceof Function&&n.callback(e),Promise.resolve(e)})}},{key:"getActiveIndex",value:function(){return this._swiper.getActiveIndex()}},{key:"next",value:function(t){return this.setActiveIndex(this.getActiveIndex()+1,t)}},{key:"prev",value:function(t){return this.setActiveIndex(this.getActiveIndex()-1,t)}},{key:"first",value:function(t){return this.setActiveIndex(0,t)}},{key:"last",value:function(t){this.setActiveIndex(Math.max(this.itemCount-1,0),t)}},{key:"refresh",value:function(){this._swiper.refresh()}},{key:"itemCount",get:function(){return this._swiper.itemCount}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"autoScroll",get:function(){return this.hasAttribute("auto-scroll")},set:function(t){return Q.toggleAttribute(this,"auto-scroll",t)}},{key:"vertical",get:function(){return"vertical"===this.getAttribute("direction")}},{key:"itemSize",get:function(){var t=(this.getAttribute("item-"+(this.vertical?"height":"width"))||"").trim();return t.match(/^\d+(px|%)$/)?t:"100%"}},{key:"autoScrollRatio",get:function(){return parseFloat(this.getAttribute("auto-scroll-ratio"))},set:function(t){this.setAttribute("auto-scroll-ratio",t)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(t){return Q.toggleAttribute(this,"disabled",t)}},{key:"overscrollable",get:function(){return this.hasAttribute("overscrollable")},set:function(t){return Q.toggleAttribute(this,"overscrollable",t)}},{key:"centered",get:function(){return this.hasAttribute("centered")},set:function(t){return Q.toggleAttribute(this,"centered",t)}}],[{key:"observedAttributes",get:function(){return["swipeable","auto-refresh","direction","item-height","item-width"]}},{key:"events",get:function(){return["postchange","refresh","overscroll"]}}]),e}();c.Carousel=ao,customElements.define("ons-carousel",ao);var so=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.getAttribute("width")&&t._updateWidth(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"width"===t&&this._updateWidth()}},{key:"_updateWidth",value:function(){var t=this.getAttribute("width");t?(t=t.trim().match(/^\d+$/)?t+"%":t,d(this,{flex:"0 0 "+t,maxWidth:t})):d.clear(this,"flex maxWidth")}}],[{key:"observedAttributes",get:function(){return["width"]}}]),e}();c.Col=so,customElements.define("ons-col",so);var lo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -60%, 0)",opacity:0},{transform:"translate3d(-50%, -50%, 0)",opacity:1}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)",opacity:1},{transform:"translate3d(-50%, -60%, 0)",opacity:0}).queue(function(t){e(),t()}))}}]),e}(),co=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease-in-out":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(this.bodyHeight/2-1)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),ho={".dialog":"dialog--*",".dialog-container":"dialog-container--*",".dialog-mask":"dialog-mask--*"},fo={default:function(){return C.isAndroid()?uo:co},slide:function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,l}return b(e,lo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:0},{opacity:1}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"},{transform:"translate3d(-50%, -50%, 0)"}).queue(function(t){e(),t()}))}},{key:"hide",value:function(t,e){e=e||function(){},nt.runAll(nt(t._mask,this.def).default({opacity:1},{opacity:0}),nt(t._dialog,this.def).default({transform:"translate3d(-50%, -50%, 0)"},{transform:"translate3d(-50%, "+(-this.bodyHeight/2+1-t._dialog.clientHeight)+"px, 0)"}).queue(function(t){e(),t()}))}}]),e}(),none:lo},po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:fo,baseClass:lo,baseClassName:"DialogAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(N.prepare(this),this.style.display="none",this.style.zIndex=10001,!this._dialog){var t=document.createElement("div");t.classList.add("dialog");var e=document.createElement("div");for(e.classList.add("dialog-container");this.firstChild;)e.appendChild(this.firstChild);t.appendChild(e),this.appendChild(t)}if(!this._mask){var n=document.createElement("div");n.classList.add("dialog-mask"),this.insertBefore(n,this.firstChild)}this._dialog.style.zIndex=20001,this._mask.style.zIndex=2e4,this.setAttribute("status-bar-fill",""),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return ho}},{key:"_mask",get:function(){return Q.findChild(this,".dialog-mask")}},{key:"_dialog",get:function(){return Q.findChild(this,".dialog")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof lo||Q.throwAnimator("Dialog"),fo[t]=e}},{key:"animators",get:function(){return fo}},{key:"DialogAnimator",get:function(){return lo}}]),e}();c.Dialog=po,customElements.define("ons-dialog",po);var go="fab",mo={"":"fab--*",".fab__icon":"fab--*__icon"},_o=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.hide(),t.classList.add(go),n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),!Q.findChild(this,".fab__icon")){var t=document.createElement("span");t.classList.add("fab__icon"),Q.arrayFrom(this.childNodes).forEach(function(e){e.tagName&&"ons-ripple"===e.tagName.toLowerCase()||t.appendChild(e)}),this.appendChild(t)}this._updateRipple(),B.initModifier(this,mo),this._updatePosition()}},{key:"connectedCallback",value:function(){var t=this;setImmediate(function(){return t.show()})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,go,mo);break;case"modifier":B.onModifierChanged(e,n,this,mo);break;case"ripple":this._updateRipple();break;case"position":this._updatePosition()}}},{key:"_show",value:function(){this.show()}},{key:"_hide",value:function(){var t=this;setImmediate(function(){return t.hide()})}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"show",value:function(){this.toggle(!0)}},{key:"hide",value:function(){this.toggle(!1)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.visible,e=(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px)":"";d(this,{transform:e+" scale("+Number(t)+")"})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"visible",get:function(){return-1===this.style.transform.indexOf("scale(0)")&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","position","class"]}}]),e}();c.Fab=_o,customElements.define("ons-fab",_o);var vo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._gestureDetector=new st(t,{passive:!0}),t}return b(e,Pi),e}();c.GestureDetector=vo,customElements.define("ons-gesture-detector",vo);var bo="fa",yo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){this._cleanClassAttribute("icon"===t?e:this.getAttribute("icon"),"modifier"===t?e:void 0),this._update()}},{key:"_compile",value:function(){N.prepare(this),this._update()}},{key:"_update",value:function(){var t=this,e=this._buildClassAndStyle(this._parseAttr("icon"),this._parseAttr("size")),n=e.classList,i=e.style;Q.extend(this.style,i),n.forEach(function(e){return t.classList.add(e)})}},{key:"_parseAttr",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getAttribute("modifier")||"",n=(this.getAttribute(t)||t||"").split(/\s*,\s*/),i=n[0],o=n[1];return o=(o||"").split(/\s*:\s*/),(e&&RegExp("(^|\\s+)"+o[0]+"($|\\s+)","i").test(e)?o[1]:i)||""}},{key:"_cleanClassAttribute",value:function(t,e){var n=this,i=this._prefixIcon(this._parseAttr(t,e)),o=i.className,r=i.prefix,a=o!==r?"|"+r+"$|"+r+"-":"|"+o+"$"||"",s=new RegExp("^(fa$|fa-|ion-|zmdi$|zmdi-|ons-icon--"+a+")");Q.arrayFrom(this.classList).filter(function(t){return s.test(t)}).forEach(function(t){return n.classList.remove(t)})}},{key:"_prefixIcon",value:function(t){var e=bo+(bo?"-":"")+t;return{className:e,prefix:e.split("-")[0]}}},{key:"_buildClassAndStyle",value:function(t,e){var n=["ons-icon"],i={};if(0===t.indexOf("ion-"))n.push(t),n.push("ons-icon--ion");else if(0===t.indexOf("fa-"))n.push(t),n.push("fa");else if(0===t.indexOf("md-"))n.push("zmdi"),n.push("zmdi-"+t.split(/-(.+)?/)[1]);else{var o=this._prefixIcon(t),r=o.className,a=o.prefix;a&&n.push(a),r&&n.push(r)}return e.match(/^[1-5]x|lg$/)?(n.push("ons-icon--"+e),this.style.removeProperty("font-size")):i.fontSize=e,{classList:n,style:i}}}],[{key:"setAutoPrefix",value:function(t){bo=t?"string"==typeof t&&t||"fa":""}},{key:"observedAttributes",get:function(){return["icon","size","modifier","class"]}}]),e}();c.Icon=yo,customElements.define("ons-icon",yo);var ko=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;p(this,t),"object"===(void 0===e?"undefined":f(e))&&null!==e||Q.throw('"delegate" parameter must be an object'),this._userDelegate=e,n instanceof Element||null===n||Q.throw('"templateElement" parameter must be an instance of Element or null'),this._templateElement=n}return g(t,[{key:"hasRenderFunction",value:function(){return this._userDelegate._render instanceof Function}},{key:"_render",value:function(){this._userDelegate._render.apply(this._userDelegate,arguments)}},{key:"loadItemElement",value:function(t,e){if(this._userDelegate.loadItemElement instanceof Function)this._userDelegate.loadItemElement(t,e);else{var n=this._userDelegate.createItemContent(t,this._templateElement);n instanceof Element||Q.throw('"createItemContent" must return an instance of Element'),e({element:n})}}},{key:"countItems",value:function(){var t=this._userDelegate.countItems();return"number"!=typeof t&&Q.throw('"countItems" must return a number'),t}},{key:"updateItem",value:function(t,e){this._userDelegate.updateItemContent instanceof Function&&this._userDelegate.updateItemContent(t,e)}},{key:"calculateItemHeight",value:function(t){if(this._userDelegate.calculateItemHeight instanceof Function){var e=this._userDelegate.calculateItemHeight(t);return"number"!=typeof e&&Q.throw('"calculateItemHeight" must return a number'),e}return 0}},{key:"destroyItem",value:function(t,e){this._userDelegate.destroyItem instanceof Function&&this._userDelegate.destroyItem(t,e)}},{key:"destroy",value:function(){this._userDelegate.destroy instanceof Function&&this._userDelegate.destroy(),this._userDelegate=this._templateElement=null}},{key:"itemHeight",get:function(){return this._userDelegate.itemHeight}}]),t}(),wo=function(){function t(e,n){p(this,t),n instanceof ko||Q.throw('"delegate" parameter must be an instance of LazyRepeatDelegate'),this._wrapperElement=e,this._delegate=n,this._insertIndex=this._wrapperElement.children[0]&&"ONS-LAZY-REPEAT"===this._wrapperElement.children[0].tagName?1:0,"ons-list"===e.tagName.toLowerCase()&&e.classList.add("lazy-list"),this._pageContent=this._findPageContentElement(e),this._pageContent||Q.throw("LazyRepeat must be descendant of a Page element"),this.lastScrollTop=this._pageContent.scrollTop,this.padding=0,this._topPositions=[0],this._renderedItems={},this._delegate.itemHeight||this._delegate.calculateItemHeight(0)||(this._unknownItemHeight=!0),this._addEventListeners(),this._onChange()}return g(t,[{key:"_findPageContentElement",value:function(t){var e=Q.findParent(t,".page__content");if(e)return e;var n=Q.findParent(t,"ons-page");if(n){var i=Q.findChild(n,".content");if(i)return i}return null}},{key:"_checkItemHeight",value:function(t){var e=this;this._delegate.loadItemElement(0,function(n){e._unknownItemHeight||Q.throw("Invalid state"),e._wrapperElement.appendChild(n.element);var i=function(){e._delegate.destroyItem(0,n),n.element&&n.element.remove(),delete e._unknownItemHeight,t()};e._itemHeight=n.element.offsetHeight,e._itemHeight>0?i():(e._wrapperElement.style.visibility="hidden",n.element.style.visibility="hidden",setImmediate(function(){e._itemHeight=n.element.offsetHeight,0==e._itemHeight&&Q.throw('Invalid state: "itemHeight" must be greater than zero'),e._wrapperElement.style.visibility="",i()}))})}},{key:"_countItems",value:function(){return this._delegate.countItems()}},{key:"_getItemHeight",value:function(t){return this._renderedItems.hasOwnProperty(t)?(this._renderedItems[t].hasOwnProperty("height")||(this._renderedItems[t].height=this._renderedItems[t].element.offsetHeight),this._renderedItems[t].height):this._topPositions[t+1]&&this._topPositions[t]?this._topPositions[t+1]-this._topPositions[t]:this.staticItemHeight||this._delegate.calculateItemHeight(t)}},{key:"_calculateRenderedHeight",value:function(){var t=this;return Object.keys(this._renderedItems).reduce(function(e,n){return e+t._getItemHeight(+n)},0)}},{key:"_onChange",value:function(){this._render()}},{key:"_lastItemRendered",value:function(){return Math.max.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"_firstItemRendered",value:function(){return Math.min.apply(Math,w(Object.keys(this._renderedItems)))}},{key:"refresh",value:function(){var t={forceScrollDown:!0},e=Math.min(this._lastItemRendered(),this._countItems()-1),n=this._firstItemRendered();Q.isInteger(e)&&(t.forceLastIndex=e),Q.isInteger(n)&&(this._wrapperElement.style.height=this._topPositions[n]+this._calculateRenderedHeight()+"px",this.padding=this._topPositions[n],t.forceFirstIndex=n),this._removeAllElements(),this._render(t),this._wrapperElement.style.height="inherit"}},{key:"_render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.forceScrollDown,i=void 0!==n&&n,o=e.forceFirstIndex,r=e.forceLastIndex;if(this._unknownItemHeight)return this._checkItemHeight(this._render.bind(this,arguments[0]));var a=!i&&this.lastScrollTop>this._pageContent.scrollTop;this.lastScrollTop=this._pageContent.scrollTop;for(var s={},l=this._wrapperElement.getBoundingClientRect().top,u=4*window.innerHeight-l,c=this._countItems(),h=o||Math.max(0,this._calculateStartIndex(l)-30),d=h,f=this._topPositions[d];d<c&&f<u;d++)d>=this._topPositions.length&&(this._topPositions.length+=100),this._topPositions[d]=f,f+=this._getItemHeight(d);if(this._delegate.hasRenderFunction&&this._delegate.hasRenderFunction())return this._delegate._render(h,d,function(){t.padding=t._topPositions[h]});if(a)for(var p=d-1;p>=h;p--)s[p]=!0,this._renderElement(p,a);else for(var g=r||Math.max.apply(Math,[d-1].concat(w(Object.keys(this._renderedItems)))),m=h;m<=g;m++)s[m]=!0,this._renderElement(m,a);Object.keys(this._renderedItems).forEach(function(e){return s[e]||t._removeElement(e,a)})}},{key:"_renderElement",value:function(t,e){var n=this,i=this._renderedItems[t];i?this._delegate.updateItem(t,i):this._delegate.loadItemElement(t,function(i){e?(n._wrapperElement.insertBefore(i.element,n._wrapperElement.children[n._insertIndex]),n.padding=n._topPositions[t],i.height=n._topPositions[t+1]-n._topPositions[t]):n._wrapperElement.appendChild(i.element),n._renderedItems[t]=i})}},{key:"_removeElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=+t;var n=this._renderedItems[t];this._delegate.destroyItem(t,n),e?this._topPositions[t+1]=void 0:this.padding=this.padding+this._getItemHeight(t),n.element.parentElement&&n.element.parentElement.removeChild(n.element),delete this._renderedItems[t]}},{key:"_removeAllElements",value:function(){var t=this;Object.keys(this._renderedItems).forEach(function(e){return t._removeElement(e)})}},{key:"_recalculateTopPositions",value:function(t,e){for(var n=t;n<=e;n++)this._topPositions[n+1]=this._topPositions[n]+this._getItemHeight(n)}},{key:"_calculateStartIndex",value:function(t){var e=this._firstItemRendered(),n=this._lastItemRendered();this._recalculateTopPositions(e,n);for(var i=0,o=this._countItems()-1;;){var r=Math.floor((i+o)/2),a=t+this._topPositions[r];if(o<i)return 0;if(a<=0&&a+this._getItemHeight(r)>0)return r;isNaN(a)||a>=0?o=r-1:i=r+1}}},{key:"_debounce",value:function(t,e,n){var i=void 0;return function(){var o=this,r=arguments,a=n&&!i;clearTimeout(i),a?t.apply(this,arguments):i=setTimeout(function(){i=null,t.apply(o,r)},e)}}},{key:"_doubleFireOnTouchend",value:function(){this._render(),this._debounce(this._render.bind(this),100)}},{key:"_addEventListeners",value:function(){Q.bindListeners(this,["_onChange","_doubleFireOnTouchend"]),C.isIOS()&&(this._boundOnChange=this._debounce(this._boundOnChange,30)),this._pageContent.addEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.addEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.addEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.addEventListener("resize",this._boundOnChange,!0)}},{key:"_removeEventListeners",value:function(){this._pageContent.removeEventListener("scroll",this._boundOnChange,!0),C.isIOS()&&(Q.removeEventListener(this._pageContent,"touchmove",this._boundOnChange,{capture:!0,passive:!0}),this._pageContent.removeEventListener("touchend",this._boundDoubleFireOnTouchend,!0)),window.document.removeEventListener("resize",this._boundOnChange,!0)}},{key:"destroy",value:function(){this._removeAllElements(),this._delegate.destroy(),this._parentElement=this._delegate=this._renderedItems=null,this._removeEventListeners()}},{key:"padding",get:function(){return parseInt(this._wrapperElement.style.paddingTop,10)},set:function(t){this._wrapperElement.style.paddingTop=t+"px"}},{key:"staticItemHeight",get:function(){return this._delegate.itemHeight||this._itemHeight}}]),t}(),Eo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){this.hasAttribute("delegate")&&(this.delegate=window[this.getAttribute("delegate")])}},{key:"refresh",value:function(){this._lazyRepeatProvider&&this._lazyRepeatProvider.refresh()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"disconnectedCallback",value:function(){this._lazyRepeatProvider&&(this._lazyRepeatProvider.destroy(),this._lazyRepeatProvider=null)}},{key:"delegate",set:function(t){this._lazyRepeatProvider&&this._lazyRepeatProvider.destroy(),!this._templateElement&&this.children[0]&&(this._templateElement=this.removeChild(this.children[0]));var e=new ko(t,this._templateElement||null);this._lazyRepeatProvider=new wo(this.parentElement,e)},get:function(){Q.throw("No delegate getter")}}]),e}();P.LazyRepeatDelegate=ko,P.LazyRepeatProvider=wo,c.LazyRepeat=Eo,customElements.define("ons-lazy-repeat",Eo);var Co={"":"list-header--*"},Ao=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-header"),B.initModifier(this,Co)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-header",Co);break;case"modifier":B.onModifierChanged(e,n,this,Co)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListHeader=Ao,customElements.define("ons-list-header",Ao);var So={"":"list-title--*"},Po=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-title"),B.initModifier(this,So)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-title",So);break;case"modifier":B.onModifierChanged(e,n,this,So)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.ListTitle=Po,customElements.define("ons-list-title",Po);var Oo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"showExpansion",value:function(t,e){e()}},{key:"hideExpansion",value:function(t,e){e()}}]),e}(),xo={".list-item":"list-item--*",".list-item__left":"list-item--*__left",".list-item__center":"list-item--*__center",".list-item__right":"list-item--*__right",".list-item__label":"list-item--*__label",".list-item__title":"list-item--*__title",".list-item__subtitle":"list-item--*__subtitle",".list-item__thumbnail":"list-item--*__thumbnail",".list-item__icon":"list-item--*__icon"},To={default:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Oo),g(e,[{key:"showExpansion",value:function(t,e){this._animateExpansion(t,!0,e)}},{key:"hideExpansion",value:function(t,e){this._animateExpansion(t,!1,e)}},{key:"_animateExpansion",value:function(t,e,n){var i,o=t.expandableContent.style.height,r=t.expandableContent.style.display;t.expandableContent.style.height="auto",t.expandableContent.style.display="block";var a=window.getComputedStyle(t.expandableContent),s=[{height:0,paddingTop:0,paddingBottom:0},{height:a.height,paddingTop:a.paddingTop,paddingBottom:a.paddingBottom}],l=[{transform:"rotate(45deg)"},{transform:"rotate(225deg)"}];if(t.expandableContent.style.height=o,(i=nt(t.expandableContent,{duration:this.duration,property:"height padding-top padding-bottom"})).default.apply(i,w(e?s:s.reverse())).play(function(){t.expandableContent.style.display=r,n&&n()}),t.expandChevron){var u;(u=nt(t.expandChevron,{duration:this.duration,property:"transform"})).default.apply(u,w(e?l:l.reverse())).play()}}}]),e}(),none:Oo},Lo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t._animatorFactory=t._updateAnimatorFactory(),t.toggleExpansion=t.toggleExpansion.bind(t);var i=/^ons-(?!col$|row$|if$)/i;return t._shouldIgnoreTap=function(t){return t.hasAttribute("prevent-tap")||i.test(t.tagName)},t.show=t.showExpansion,t.hide=t.hideExpansion,n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list-item"),this.hasAttribute("expandable")&&this.classList.add("list-item--expandable");for(var t=void 0,e=void 0,n=void 0,i=void 0,o=void 0,r=Q.getAllChildNodes(this),a=0;a<r.length;a++){var s=r[a];s.classList.contains("left")?(s.classList.add("list-item__left"),t=s):s.classList.contains("center")?e=s:s.classList.contains("right")?(s.classList.add("list-item__right"),n=s):s.classList.contains("top")?(s.classList.add("list-item__top"),i=s):s.classList.contains("expandable-content")&&(s.classList.add("list-item__expandable-content"),o=s)}if(!n&&this.hasAttribute("expandable")){(n=document.createElement("div")).classList.add("list-item__right","right");var l=document.createElement("span");l.classList.add("list-item__expand-chevron"),n.appendChild(l)}if(!e){if(e=document.createElement("div"),t||n||o)for(var u=this.childNodes.length-1;u>=0;u--){var c=this.childNodes[u];c!==t&&c!==n&&c!==o&&"ONS-RIPPLE"!==c.tagName&&e.insertBefore(c,e.firstChild)}else for(;this.childNodes[0];)e.appendChild(this.childNodes[0]);o||this.insertBefore(e,n||null)}e.classList.add("center","list-item__center"),o&&(this._top=i||document.createElement("div"),this._top.classList.add("top","list-item__top"),this.appendChild(this._top),this._top.appendChild(e),t&&this._top.appendChild(t),n&&this._top.appendChild(n)),Q.updateRipple(this),B.initModifier(this,xo)}},{key:"showExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!0,this._expanding=!0;this._animatorFactory.newAnimator().showExpansion(this,function(){t.classList.add("expanded"),t._expanding=!1})}}},{key:"hideExpansion",value:function(){var t=this;if(this.hasAttribute("expandable")&&!this._expanding){this.expanded=!1,this._expanding=!0;this._animatorFactory.newAnimator().hideExpansion(this,function(){t.classList.remove("expanded"),t._expanding=!1})}}},{key:"toggleExpansion",value:function(){this.classList.contains("expanded")?this.hideExpansion():this.showExpansion()}},{key:"_updateAnimatorFactory",value:function(){return new O({animators:To,baseClass:Oo,baseClassName:"ListItemAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list-item",xo);break;case"modifier":B.onModifierChanged(e,n,this,xo);break;case"ripple":Q.updateRipple(this);break;case"animation":this._animatorFactory=this._updateAnimatorFactory()}}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._setupListeners(!0),t._originalBackgroundColor=t.style.backgroundColor,t.tapped=!1})}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouch,{passive:!0}),Q[e](this,"touchmove",this._onRelease,{passive:!0}),this[e]("touchcancel",this._onRelease),this[e]("touchend",this._onRelease),this[e]("touchleave",this._onRelease),this[e]("drag",this._onDrag),this[e]("mousedown",this._onTouch),this[e]("mouseup",this._onRelease),this[e]("mouseout",this._onRelease),this._top&&this._top[e]("click",this.toggleExpansion)}},{key:"_onDrag",value:function(t){var e=t.gesture;this.hasAttribute("lock-on-drag")&&["left","right"].indexOf(e.direction)>-1&&e.preventDefault()}},{key:"_onTouch",value:function(t){var e=this;if(!(this.tapped||this!==t.target&&(this._shouldIgnoreTap(t.target)||Q.findParent(t.target,this._shouldIgnoreTap,function(t){return t===e})))){this.tapped=!0;var n={transition:"background-color 0.0s linear 0.02s, box-shadow 0.0s linear 0.02s"};this.hasAttribute("tappable")&&(this.style.backgroundColor&&(this._originalBackgroundColor=this.style.backgroundColor),n.backgroundColor=this.getAttribute("tap-background-color")||"#d9d9d9",n.boxShadow="0px -1px 0px 0px "+n.backgroundColor),d(this,n)}}},{key:"_onRelease",value:function(){this.tapped=!1,this.style.backgroundColor=this._originalBackgroundColor||"",d.clear(this,"transition boxShadow")}},{key:"expandableContent",get:function(){return this.querySelector(".list-item__expandable-content")}},{key:"expandChevron",get:function(){return this.querySelector(".list-item__expand-chevron")}}],[{key:"observedAttributes",get:function(){return["modifier","class","ripple","animation"]}}]),e}();c.ListItem=Lo,customElements.define("ons-list-item",Lo);var Mo={"":"list--*"},Do=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("list"),B.initModifier(this,Mo)}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"list",Mo);break;case"modifier":B.onModifierChanged(e,n,this,Mo)}}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.List=Do,customElements.define("ons-list",Do);var Io=["autocapitalize","autocomplete","autocorrect","autofocus","disabled","inputmode","max","maxlength","min","minlength","name","pattern","placeholder","readonly","required","size","step","validator","value"],No=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&Q.throwAbstract(),n(t,function(){return t._compile()}),t._boundDelegateEvent=t._delegateEvent.bind(t),t}return b(e,Pi),g(e,[{key:"_update",value:function(){}},{key:"_scheme",get:function(){Q.throwMember()}},{key:"_template",get:function(){Q.throwMember()}},{key:"type",get:function(){Q.throwMember()}}]),g(e,[{key:"_compile",value:function(){N.prepare(this),this._defaultClassName&&this.classList.add(this._defaultClassName),0===this.children.length&&(this.appendChild(Q.createFragment(this._template)),this._setInputId(),this._updateBoundAttributes(),B.initModifier(this,this._scheme))}},{key:"_updateBoundAttributes",value:function(){var t=this;Io.forEach(function(e){t.hasAttribute(e)?t._input.setAttribute(e,t.getAttribute(e)):t._input.removeAttribute(e)}),this._update()}},{key:"_delegateEvent",value:function(t){var e=new CustomEvent(t.type,{bubbles:!1,cancelable:!0});return this.dispatchEvent(e)}},{key:"_setInputId",value:function(){this.hasAttribute("input-id")&&(this._input.id=this.getAttribute("input-id"))}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("focus",t._boundDelegateEvent),t._input.addEventListener("blur",t._boundDelegateEvent)})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("focus",t._boundDelegateEvent),t._input.removeEventListener("blur",t._boundDelegateEvent)})}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,o._scheme)});break;case"input-id":n(this,function(){return o._setInputId()});break;case"class":Q.restoreClass(this,this._defaultClassName,this._scheme)}Io.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_defaultClassName",get:function(){return""}},{key:"_input",get:function(){return this.querySelector("input")}},{key:"value",get:function(){return null===this._input?this.getAttribute("value"):this._input.value},set:function(t){var e=this;n(this,function(){t instanceof Date&&(t=t.toISOString().substring(0,10)),e._input.value=t,e._update()})}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["modifier","input-id","class"].concat(Io)}}]),e}(),Bo={".text-input":"text-input--*",".text-input__label":"text-input--*__label"},jo=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnInput=t._update.bind(t),t._boundOnFocusin=t._update.bind(t),t}return b(e,No),g(e,[{key:"_update",value:function(){this._updateLabel(),this._updateLabelClass()}},{key:"_updateLabel",value:function(){var t=this.getAttribute("placeholder")||"";void 0!==this._helper.textContent?this._helper.textContent=t:this._helper.innerText=t}},{key:"_updateLabelClass",value:function(){""===this.value?this._helper.classList.remove("text-input--material__label--active"):this._helper.classList.add("text-input--material__label--active")}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),n(this,function(){t._input.addEventListener("input",t._boundOnInput),t._input.addEventListener("focusin",t._boundOnFocusin)});var i=this.getAttribute("type");["checkbox","radio"].indexOf(i)>=0&&Q.warn('Warn: <ons-input type="'+i+'"> is deprecated since v2.4.0. Use <ons-'+i+"> instead.")}},{key:"disconnectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),n(this,function(){t._input.removeEventListener("input",t._boundOnInput),t._input.removeEventListener("focusin",t._boundOnFocusin)})}},{key:"attributeChangedCallback",value:function(t,i,o){var r=this;switch(t){case"type":n(this,function(){return r._input.setAttribute("type",r.type)});break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,i,o)}}},{key:"_scheme",get:function(){return Bo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="text-input">\n      <span class="text-input__label"></span>\n    '}},{key:"type",get:function(){var t=this.getAttribute("type");return["checkbox","radio"].indexOf(t)<0&&t||"text"}},{key:"_helper",get:function(){return this.querySelector("span")}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["type"])}}]),e}();c.Input=jo,customElements.define("ons-input",jo);var Ho=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.constructor===e&&util.throwAbstract(),n(t,function(){t.attributeChangedCallback("checked",null,t.getAttribute("checked"))}),t}return b(e,No),g(e,[{key:"attributeChangedCallback",value:function(t,n,i){switch(t){case"checked":this.checked=null!==i;break;default:v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <span class="'+this._defaultClassName+'__checkmark"></span>\n    '}},{key:"_helper",get:function(){return this.querySelector("span")}},{key:"checked",get:function(){return this._input.checked},set:function(t){var e=this;n(this,function(){e._input.checked=t})}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["checked"])}}]),e}(),Ro={".checkbox":"checkbox--*",".checkbox__input":"checkbox--*__input",".checkbox__checkmark":"checkbox--*__checkmark"},Fo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return Ro}},{key:"_defaultClassName",get:function(){return"checkbox"}},{key:"type",get:function(){return"checkbox"}}]),e}();c.Checkbox=Fo,customElements.define("ons-checkbox",Fo);var qo={".radio-button":"radio-button--*",".radio-button__input":"radio-button--*__input",".radio-button__checkmark":"radio-button--*__checkmark"},zo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ho),g(e,[{key:"_scheme",get:function(){return qo}},{key:"_defaultClassName",get:function(){return"radio-button"}},{key:"type",get:function(){return"radio"}}]),e}();c.Radio=zo,customElements.define("ons-radio",zo);var Vo={".search-input":"search-input--*"},Wo=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,No),g(e,[{key:"_scheme",get:function(){return Vo}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="search-input">\n    '}},{key:"type",get:function(){return"search"}}]),e}();c.SearchInput=Wo,customElements.define("ons-search-input",Wo);var Uo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),Xo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),Yo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier( .1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Uo),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}).queue(function(t){e(),t()}).play()}}]),e}(),Go={"":"modal--*",modal__content:"modal--*__content"},$o={default:Uo,fade:Xo,lift:Yo,none:Uo},Ko=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(){},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:$o,baseClass:Uo,baseClassName:"ModalAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){if(this.style.display="none",this.style.zIndex=10001,this.classList.add("modal"),!Q.findChild(this,".modal__content")){var t=document.createElement("div");for(t.classList.add("modal__content");this.childNodes[0];){var e=this.childNodes[0];this.removeChild(e),t.insertBefore(e,null)}this.appendChild(t)}B.initModifier(this,this._scheme)}},{key:"_toggleStyle",value:function(t){this.style.display=t?"table":"none"}},{key:"connectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this)}},{key:"attributeChangedCallback",value:function(t,n,i){"class"===t?Q.restoreClass(this,"modal",Go):v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return Go}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Uo||Q.throwAnimator("Modal"),$o[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["class"])}},{key:"animators",get:function(){return $o}},{key:"ModalAnimator",get:function(){return Uo}}]),e}();c.Modal=Ko,customElements.define("ons-modal",Ko);var Qo=function(){function t(e){var n=this;p(this,t),"element ignoreSwipe isInitialState onDragCallback swipeMax swipeMin swipeMid".split(/\s+/).forEach(function(t){return n[t]=e[t]}),this.elementHandler=e.elementHandler||e.element,this.getThreshold=e.getThreshold||function(){return.5},this.getSide=e.getSide||function(){return"left"},this.handleGesture=this.handleGesture.bind(this),this._shouldFixScroll="ios"===Q.globals.actualMobileOS}return g(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element.hasAttribute("swipeable");this.gestureDetector||(this.gestureDetector=new st(this.elementHandler,{dragMinDistance:1,passive:!this._shouldFixScroll}));var e=t?"on":"off";this.gestureDetector[e]("drag dragstart dragend",this.handleGesture)}},{key:"handleGesture",value:function(t){t.gesture&&("dragstart"===t.type?this.onDragStart(t):this._ignoreDrag||("dragend"===t.type?this.onDragEnd(t):this.onDrag(t)))}},{key:"onDragStart",value:function(t){var e=this;this._ignoreDrag=t.consumed||!Q.isValidGesture(t)||this.ignoreSwipe(t,"left"===e.getSide()?t.gesture.center.clientX:window.innerWidth-t.gesture.center.clientX),this._ignoreDrag||(t.consume&&t.consume(),t.consumed=!0,this._width=function(t){var e=[parseInt(t,10),/px/.test(t)],n=e[0];return e[1]?n:Math.round(document.body.offsetWidth*n/100)}(this.element.style.width||"100%"),this._startDistance=this._distance=this.isInitialState instanceof Function&&!this.isInitialState()?this._width:0,Q.iosPreventScroll(this.gestureDetector))}},{key:"onDrag",value:function(t){t.stopPropagation();var e="left"===this.getSide()?t.gesture.deltaX:-t.gesture.deltaX,n=Math.max(0,Math.min(this._width,this._startDistance+e));n!==this._distance&&(this._distance=n,this.swipeMid(this._distance,this._width))}},{key:"onDragEnd",value:function(t){t.stopPropagation();var e=t.gesture.interimDirection;this.getSide()!==e&&this._distance>this._width*this.getThreshold()?this.swipeMax():this.swipeMin()}},{key:"dispose",value:function(){this.gestureDetector&&this.gestureDetector.dispose(),this.gestureDetector=this.element=this.elementHandler=null}}]),t}(),Jo=function(t){function e(t){return p(this,e),t=Q.extend({timing:"linear",duration:"0.4",delay:"0"},t||{}),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Ti),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}},{key:"block",value:function(t){var e=Q.createElement('\n      <div style="position: absolute; background-color: transparent; width: 100%; height: 100%; z-index: 100000"></div>\n    ');return t.parentNode.appendChild(e),function(){return e.remove()}}}]),e}(),Zo=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.durationRestore,i=void 0===n?.1:n,o=t.durationSwipe,r=void 0===o?.15:o,a=t.timingSwipe,s=void 0===a?"linear":a,l=y(t,["durationRestore","durationSwipe","timingSwipe"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({},l)));return u.constructor===e&&Q.throwAbstract(),u.durationRestore=i,u.durationSwipe=r,u.timingSwipe=s,u.optSwipe={timing:s,duration:r},u.optRestore={timing:s,duration:i},u.swipeShadow=Q.createElement('<div style="position: absolute; height: 100%; width: 12px; right: 100%; top: 0; bottom: 0; z-index: -1;background: linear-gradient(to right, transparent 0, rgba(0,0,0,.04) 40%, rgba(0,0,0,.12) 80%, rgba(0,0,0,.16) 100%);"></div>'),u.isDragStart=!0,u}return b(e,Jo),g(e,null,[{key:"swipeable",get:function(){return!0}}]),g(e,[{key:"_decompose",value:function(){Q.throwMember()}},{key:"_shouldAnimateToolbar",value:function(){Q.throwMember()}},{key:"_calculateDelta",value:function(){Q.throwMember()}},{key:"_dragStartSetup",value:function(t,n){this.isDragStart=!1,this.unblock=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,n),t.parentElement.insertBefore(this.backgroundMask,t),this.target={enter:Q.findToolbarPage(t)||t,leave:Q.findToolbarPage(n)||n},this.decomp={enter:this._decompose(this.target.enter),leave:this._decompose(this.target.leave)},this.delta=this._calculateDelta(n,this.decomp.leave),this.shouldAnimateToolbar=this._shouldAnimateToolbar(this.target.enter,this.target.leave),this.shouldAnimateToolbar?(this.swipeShadow.style.top=this.decomp.leave.toolbar.offsetHeight+"px",this.target.leave.appendChild(this.swipeShadow),this._saveStyle(this.target.enter,this.target.leave)):(n.appendChild(this.swipeShadow),this._saveStyle(t,n)),n.classList.add("overflow-visible"),this.overflowElement=n,this.decomp.leave.content.classList.add("content-swiping")}},{key:"translate",value:function(t,e,n,i){this.isSwiping=!0,"none"===n.style.display&&(n.style.display=""),this.isDragStart&&(this.maxWidth=e,this._dragStartSetup(n,i));var o=(t-e)/e;this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d("+this.delta.title*o+"px, 0, 0)",opacity:1+o}),nt(this.decomp.enter.backButtonLabel).queue({opacity:1+10*o/100,transform:"translate3d("+this.delta.label*o+"px, 0, 0)"}),nt(this.decomp.enter.other).queue({opacity:1+o}),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(this.decomp.leave.toolbar).queue({opacity:-1*o}),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d("+125*(1+o)+"%, 0, 0)"}),nt(this.decomp.leave.backButtonLabel).queue({opacity:-1*o,transform:"translate3d("+this.delta.title*(1+o)+"px, 0, 0)"}),nt(this.swipeShadow).queue({opacity:-1*o})):nt.runAll(nt(i).queue({transform:"translate3d("+t+"px, 0, 0)"}),nt(n).queue({transform:"translate3d("+25*o+"%, 0, 0)",opacity:1+10*o/100}),nt(this.swipeShadow).queue({opacity:-1*o}))}},{key:"restore",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(-25%, 0, 0)",opacity:.9},this.optRestore),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(-"+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe,opacity:0}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(-"+this.delta.label+"px, 0, 0)"},this.optRestore),nt(this.decomp.enter.other).queue({opacity:0},this.optRestore),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background,this.swipeShadow]).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.toolbar).queue({opacity:1},this.optRestore),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(0, 0, 0)"},this.optRestore),nt(this.decomp.leave.backButtonLabel).queue({opacity:1,transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationRestore+"s linear, transform "+this.durationRestore+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0},this.optRestore).queue(function(e){i._reset(i.target.enter,i.target.leave),t.style.display="none",n&&n(),e()})):nt.runAll(nt(t).queue({transform:"translate3D(-25%, 0, 0)",opacity:.9},this.optRestore),nt(e).queue({transform:"translate3D(0, 0, 0)"},this.optRestore).queue(function(o){i._reset(t,e),t.style.display="none",n&&n(),o()})))}},{key:"popSwipe",value:function(t,e,n){var i=this;this.isDragStart||(this.shouldAnimateToolbar?nt.runAll(nt([this.decomp.enter.content,this.decomp.enter.bottomToolbar,this.decomp.enter.background]).queue({transform:"translate3d(0, 0, 0)",opacity:1},this.optSwipe),nt(this.decomp.enter.toolbarCenter).queue({transform:"translate3d(0, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe,opacity:1}),nt(this.decomp.enter.backButtonLabel).queue({transform:"translate3d(0, 0, 0)"},this.optSwipe),nt(this.decomp.enter.other).queue({opacity:1},this.optSwipe),nt([this.decomp.leave.content,this.decomp.leave.bottomToolbar,this.decomp.leave.background]).queue({transform:"translate3d(100%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.toolbar).queue({opacity:0},this.optSwipe),nt(this.decomp.leave.toolbarCenter).queue({transform:"translate3d(125%, 0, 0)"},this.optSwipe),nt(this.decomp.leave.backButtonLabel).queue({opacity:0,transform:"translate3d("+this.delta.title+"px, 0, 0)",transition:"opacity "+this.durationSwipe+"s linear, transform "+this.durationSwipe+"s "+this.timingSwipe}),nt(this.swipeShadow).queue({opacity:0,transform:"translate3d("+this.maxWidth+"px, 0, 0)"},this.optSwipe).queue(function(t){i._reset(i.target.enter,i.target.leave),n&&n(),t()})):nt.runAll(nt(t).queue({transform:"translate3D(0, 0, 0)",opacity:1},this.optSwipe),nt(e).queue({transform:"translate3D(100%, 0, 0)"},this.optSwipe).queue(function(o){i._reset(t,e),n&&n(),o()})))}},{key:"_saveStyle",value:function(){var t=this;this._savedStyle=new WeakMap;for(var e=function(e){return t._savedStyle.set(e,e.getAttribute("style"))},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_restoreStyle",value:function(){for(var t=this,e=function(e){null===t._savedStyle.get(e)?e.removeAttribute("style"):e.setAttribute("style",t._savedStyle.get(e)),t._savedStyle.delete(e)},n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];i.forEach(e),Object.keys(this.decomp).forEach(function(n){Object.keys(t.decomp[n]).forEach(function(i){(t.decomp[n][i]instanceof Array?t.decomp[n][i]:[t.decomp[n][i]]).forEach(e)})})}},{key:"_reset",value:function(){this.isSwiping=!1,this._savedStyle&&this._restoreStyle.apply(this,arguments),this.unblock&&this.unblock(),this.swipeShadow.remove(),this.backgroundMask.remove(),this.overflowElement.classList.remove("overflow-visible"),this.decomp.leave.content.classList.remove("content-swiping"),this.decomp=this.target=this.overflowElement=this._savedStyle=null,this.isDragStart=!0}}]),e}(),tr=function(){return"translate3d("+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+", "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)+", "+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)+")"},er=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.3, .4, 0, .9)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a,l=y(t,["timing","delay","duration"]);p(this,e);var u=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,_({timing:i,delay:r,duration:s},l)));return u.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black; z-index: 2"></div>'),u}return b(e,Zo),g(e,[{key:"_decompose",value:function(t){var e=t._getToolbarElement(),n=e._getToolbarLeftItemsElement(),i=e._getToolbarRightItemsElement(),o=function(t){for(var e=[],n=0;n<t.length;n++)"ons-back-button"!==t[n].nodeName.toLowerCase()&&e.push(t[n]);return e},r=[].concat(0===n.children.length?n:o(n.children)).concat(0===i.children.length?i:o(i.children));return{toolbarCenter:e._getToolbarCenterItemsElement(),backButtonIcon:e._getToolbarBackButtonIconElement(),backButtonLabel:e._getToolbarBackButtonLabelElement(),other:r,content:t._getContentElement(),background:t._getBackgroundElement(),toolbar:e,bottomToolbar:t._getBottomToolbarElement()}}},{key:"_shouldAnimateToolbar",value:function(t,e){var n=t._canAnimateToolbar()&&e._canAnimateToolbar(),i=t._getToolbarElement(),o=e._getToolbarElement(),r=i.hasAttribute("static")||o.hasAttribute("static"),a=Q.hasModifier(i,"material")||Q.hasModifier(o,"material"),s=Q.hasModifier(i,"transparent")||Q.hasModifier(o,"transparent");return n&&!r&&!a&&!s}},{key:"_calculateDelta",value:function(t,e){var n=void 0,i=void 0,o=t.getBoundingClientRect();if(e.backButtonLabel.classList.contains("back-button__label")){var r=e.backButtonLabel.getBoundingClientRect();n=Math.round(o.width/2-r.width/2-r.left)}else n=Math.round(o.width/2*.6);return e.backButtonIcon.classList.contains("back-button__icon")&&(i=e.backButtonIcon.getBoundingClientRect().right-2),{title:n,label:i}}},{key:"push",value:function(t,i,o){var r=this;this.backgroundMask.remove(),i.parentNode.insertBefore(this.backgroundMask,i);var a=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);n(t,function(){var e=Q.findToolbarPage(t)||t,n=Q.findToolbarPage(i)||i,s=r._decompose(e),l=r._decompose(n),u=r._calculateDelta(i,s);r._shouldAnimateToolbar(e,n)?nt.runAll(nt([s.content,s.bottomToolbar,s.background],r.def).default({transform:tr("100%")},{transform:tr()}),nt(s.toolbar,r.def).default({opacity:0},{opacity:1}),nt(s.toolbarCenter,r.def).default({transform:tr("125%"),opacity:1},{transform:tr(),opacity:1}),nt(s.backButtonLabel,r.def).default({transform:tr(u.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(s.other,r.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([l.content,l.bottomToolbar,l.background],r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}),nt(l.toolbarCenter,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.title+"px"),opacity:0,transition:"opacity "+r.duration+"s linear, transform "+r.duration+"s "+r.timing}),nt(l.backButtonLabel,r.def).default({transform:tr(),opacity:1},{transform:tr("-"+u.label+"px"),opacity:0}),nt(l.other,r.def).default({opacity:1},{css:{opacity:0},timing:"linear"})):nt.runAll(nt(t,r.def).default({transform:tr("100%")},{transform:tr()}),nt(i,r.def).default({transform:tr(),opacity:1},{transform:tr("-25%"),opacity:.9}).queue(function(t){r.backgroundMask.remove(),a(),o(),t()}))})}},{key:"pop",value:function(t,n,i){var o=this;if(this.isSwiping)return this.popSwipe(t,n,i);this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=Q.findToolbarPage(t)||t,s=Q.findToolbarPage(n)||n,l=this._decompose(a),u=this._decompose(s),c=this._calculateDelta(n,u);this._shouldAnimateToolbar(a,s)?nt.runAll(nt([l.content,l.bottomToolbar,l.background],this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(l.toolbarCenter,this.def).default({transform:tr("-"+c.title+"px"),opacity:0},{transform:tr(),opacity:1,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing}),nt(l.backButtonLabel,this.def).default({transform:tr("-"+c.label+"px")},{transform:tr()}),nt(l.other,this.def).default({opacity:0},{css:{opacity:1},timing:"linear"}),nt([u.content,u.bottomToolbar,u.background],this.def).default({transform:tr()},{transform:tr("100%")}).wait(0).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(u.toolbar,this.def).default({opacity:1},{opacity:0}),nt(u.toolbarCenter,this.def).default({transform:tr()},{transform:tr("125%")}),nt(u.backButtonLabel,this.def).default({transform:tr(),opacity:1},{transform:tr(c.title+"px"),opacity:0,transition:"opacity "+this.duration+"s linear, transform "+this.duration+"s "+this.timing})):nt.runAll(nt(t,this.def).default({transform:tr("-25%"),opacity:.9},{transform:tr(),opacity:1}),nt(n,this.def).default({transform:tr()},{transform:tr("100%")}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}}]),e}(),nr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background: linear-gradient(black, white);"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 100%, 0)"},{transform:"translate3D(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{transform:"translate3D(0, -10%, 0)",opacity:.9}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, -43px, 0)",opacity:.9},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o.backgroundMask.remove(),r(),i(),t()}),nt(n,this.def).default({transform:"translate3D(0, 0, 0)"},{transform:"translate3D(0, 100%, 0)"}))}}]),e}(),ir="translate3d(0, 0, 0)",or=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.4:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:ir,opacity:0},{transform:ir,opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:ir,opacity:1},{transform:ir,opacity:0}).queue(function(t){o(),i(),t()}))}}]),e}(),rr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.blackMaskOpacity=.4,l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%; z-index: 2;background-color: black; opacity: 0;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentElement.insertBefore(this.backgroundMask,n.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:0},{opacity:this.blackMaskOpacity}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(100%, 0, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(-45%, 0, 0)"}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t.nextSibling);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask,this.def).default({transform:"translate3d(0, 0, 0)",opacity:this.blackMaskOpacity},{opacity:0}).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({transform:"translate3d(-45%, 0, 0)",opacity:.9},{transform:"translate3d(0, 0, 0)",opacity:1}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(100%, 0, 0)"}).queue(function(t){r(),i(),t()}))}}]),e}(),ar=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.delay,r=void 0===o?.05:o,a=t.duration,s=void 0===a?.4:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.backgroundMask=Q.createElement('<div style="position: absolute; width: 100%; height: 100%;background-color: black;"></div>'),l}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=this;this.backgroundMask.remove(),n.parentNode.insertBefore(this.backgroundMask,n);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t),a=nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()});nt.runAll(a,nt(t,this.def).default({transform:"translate3d(0, 100%, 0)"},{transform:"translate3d(0, 0, 0)"}),nt(n,this.def).default({opacity:1},{opacity:.4}).queue(function(t){r(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=this;this.backgroundMask.remove(),t.parentNode.insertBefore(this.backgroundMask,t);var r=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(this.backgroundMask).wait(this.delay+this.duration).queue(function(t){o.backgroundMask.remove(),t()}),nt(t,this.def).default({opacity:.4},{opacity:1}).queue(function(t){r(),i(),t()}),nt(n,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, 100%, 0)"}))}}]),e}(),sr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(0.4, 0, 0.2, 1)":n,o=t.timingPop,r=void 0===o?"cubic-bezier(0.4, 0, 1, 1)":o,a=t.delay,s=void 0===a?0:a,l=t.duration,u=void 0===l?.2:l;p(this,e);var c=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:s,duration:u}));return c.timingPop=r,c}return b(e,Jo),g(e,[{key:"push",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(t,this.def).default({transform:"translate3D(0, 42px, 0)",opacity:0},{transform:"translate3D(0, 0, 0)",opacity:1}).queue(function(t){o(),i(),t()}))}},{key:"pop",value:function(t,n,i){var o=v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"block",this).call(this,t);nt.runAll(nt(n,this.def).default({transform:"translate3D(0, 0, 0)",opacity:1},{css:{transform:"translate3D(0, 38px, 0)",opacity:0},timing:this.timingPop}).queue(function(t){o(),i(),t()}))}}]),e}(),lr=function(t){function e(t){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return b(e,Jo),g(e,[{key:"push",value:function(t,e,n){n()}},{key:"pop",value:function(t,e,n){n()}}]),e}(),ur={default:function(){return C.isAndroid()?sr:er},slide:function(){return C.isAndroid()?rr:er},lift:function(){return C.isAndroid()?ar:nr},fade:function(){return C.isAndroid()?sr:or},"slide-ios":er,"slide-md":rr,"lift-ios":nr,"lift-md":ar,"fade-ios":or,"fade-md":sr,none:lr},cr={ready:function(t,e){e()}},hr=function(t){return"ONS-PAGE"!==t.nodeName&&Q.throw("Only page elements can be children of navigator")},dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._isRunning=!1,t._initialized=!1,t._pageLoader=jt,t._pageMap=new WeakMap,t._updateAnimatorFactory(),t}return b(e,Pi),g(e,[{key:"animatorFactory",get:function(){return this._animatorFactory}}]),g(e,[{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"connectedCallback",value:function(){var t=this;if(this.onDeviceBackButton=this._onDeviceBackButton.bind(this),!C.isAndroid()||"force"===this.getAttribute("swipeable")){var e=void 0;this._swipe=new Qo({element:this,getThreshold:function(){return Math.max(.2,parseFloat(t.getAttribute("swipe-threshold"))||0)},swipeMax:function(){t._onSwipe&&t._onSwipe(1,{duration:e.durationSwipe,timing:e.timingSwipe}),t[t.swipeMax?"swipeMax":"popPage"]({animator:e}),e=null},swipeMid:function(n,i){t._onSwipe&&t._onSwipe(n/i),e.translate(n,i,t.topPage.previousElementSibling,t.topPage)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,{duration:e.durationRestore,timing:e.timingSwipe}),e.restore(t.topPage.previousElementSibling,t.topPage),e=null},ignoreSwipe:function(n,i){if(!t._isRunning&&t.children.length>1){var o=parseInt(t.getAttribute("swipe-target-width")||25,10);if("right"===n.gesture.direction&&o>i){var r=function(t){return/ons-back-button/i.test(t.tagName)};if(!r(n.target)&&!Q.findParent(n.target,r,function(t){return/ons-page/i.test(t.tagName)})){var a=(t.topPage.pushedOptions||{}).animation||t.animatorFactory._animation,s=ur[a]instanceof Function?ur[a].call():ur[a];if(void 0!==s&&s.swipeable)return e=new s,!1}}}return!0}}),this.attributeChangedCallback("swipeable")}if(!this._initialized){this._initialized=!0;var i=Q.defer();this.loaded=i.promise,cr.ready(this,function(){var e=!Q.hasAnyComponentAsParent(t),o={animation:"none",show:e};if(0===t.pages.length&&t._getPageTarget())t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()});else if(t.pages.length>0){for(var r=0;r<t.pages.length;r++)hr(t.pages[r]);t.topPage&&n(t.topPage,function(){return setTimeout(function(){i.resolve(),e&&t.topPage._show(),t._updateLastPageBackButton()},0)})}else n(t,function(){0===t.pages.length&&t._getPageTarget()?t.pushPage(t._getPageTarget(),o).then(function(){return i.resolve()}):i.resolve()})})}}},{key:"_updateAnimatorFactory",value:function(){this._animatorFactory=new O({animators:ur,baseClass:Jo,baseClassName:"NavigatorAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this._swipe&&this._swipe.dispose(),this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"animation":this._updateAnimatorFactory();break;case"swipeable":this._swipe&&this._swipe.update()}}},{key:"popPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=this._preparePageAndOptions(null,e).options,Q.isInteger(e.times)&&e.times>1&&this._removePages(e.times);return this._popPage(e,function(){return new Promise(function(e){t._pageLoader.unload(t.pages[t.pages.length-1]),e()})})}},{key:"_popPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("popPage is already running.");if(this.pages.length<=1)return Promise.reject("ons-navigator's page stack is empty.");if(this._emitPrePopEvent())return Promise.reject("Canceled in prepop event.");var i=this.pages.length;return this._isRunning=!0,this.pages[i-2].updateBackButton(i-2>0),new Promise(function(o){var r=e.pages[i-1],a=e.pages[i-2];(t=Q.extend({},e.options||{},r.pushedOptions||{},t)).data&&(a.data=Q.extend({},a.data||{},t.data||{}));r._hide(),a.style.display="";(t.animator||e._animatorFactory.newAnimator(t)).pop(e.pages[i-2],e.pages[i-1],function(){n().then(function(){e._isRunning=!1,a._show(),Q.triggerElementEvent(e,"postpop",{leavePage:r,enterPage:a,navigator:e}),t.callback&&t.callback(a),o(a)})})}).catch(function(){return e._isRunning=!1})}},{key:"pushPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);t=i.page;var o=function(i){hr(i),e._pageMap.set(i,t),(i=Q.extend(i,{data:n.data})).style.visibility="hidden"};return(n=i.options).pageHTML?this._pushPage(n,function(){return new Promise(function(t){Ht.load({page:n.pageHTML,parent:e,params:n.data},function(e){o(e),t()})})}):this._pushPage(n,function(){return new Promise(function(i){e._pageLoader.load({page:t,parent:e,params:n.data},function(t){o(t),i()})})})}},{key:"_pushPage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return Promise.resolve()};if(this._isRunning)return Promise.reject("pushPage is already running.");if(this._emitPrePushEvent())return Promise.reject("Canceled in prepush event.");this._isRunning=!0;var i=O.parseAnimationOptionsString(this.getAttribute("animation-options"));e=Q.extend({},this.options||{},{animationOptions:i},e);var o=this._animatorFactory.newAnimator(e);return n().then(function(){var n=t.pages.length,i=t.pages[n-1],r=e.leavePage||t.pages[n-2];return hr(i),i.updateBackButton(n>(e._replacePage?2:1)),i.pushedOptions=Q.extend({},i.pushedOptions||{},e||{}),i.data=Q.extend({},i.data||{},e.data||{}),i.unload=i.unload||e.unload,new Promise(function(n){var a=function(){t._isRunning=!1,!1!==e.show&&setImmediate(function(){return i._show()}),Q.triggerElementEvent(t,"postpush",{leavePage:r,enterPage:i,navigator:t}),r&&(r.style.display="none"),e.callback&&e.callback(i),n(i)};i.style.visibility="",r?(r._hide(),o.push(i,r,a)):a()})}).catch(function(e){throw t._isRunning=!1,e})}},{key:"replacePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.pushPage(t,n).then(function(t){return e.pages.length>1&&e._pageLoader.unload(e.pages[e.pages.length-2]),e._updateLastPageBackButton(),Promise.resolve(t)})}},{key:"insertPage",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this._preparePageAndOptions(e,i);if(e=o.page,i=o.options,(t=this._normalizeIndex(t))>=this.pages.length)return this.pushPage(e,i);e="string"==typeof i.pageHTML?i.pageHTML:e;var r="string"==typeof i.pageHTML?Ht:this._pageLoader;return new Promise(function(o){r.load({page:e,parent:n},function(r){hr(r),n._pageMap.set(r,e),r=Q.extend(r,{data:i.data,pushedOptions:i}),i.animationOptions=Q.extend({},O.parseAnimationOptionsString(n.getAttribute("animation-options")),i.animationOptions||{}),r.style.display="none",n.insertBefore(r,n.pages[t]),n.topPage.updateBackButton(!0),setTimeout(function(){r=null,o(n.pages[t])},1e3/60)})})}},{key:"removePage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t=this._normalizeIndex(t))<this.pages.length-1?new Promise(function(n){var i=e.pages[t],o=e.topPage;e._pageMap.delete(i),e._pageLoader.unload(i),1===e.pages.length&&e.topPage.updateBackButton(!1),n(o)}):this.popPage(n)}},{key:"resetToPage",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._preparePageAndOptions(t,n);if(t=i.page,(n=i.options).animator||n.animation||n.pop||(n.animation="none"),n.page||n.pageHTML||!this._getPageTarget()||(t=n.page=this._getPageTarget()),n.pop)return this._removePages(),this.insertPage(0,t,{data:n.data}).then(function(){return e.popPage(n)});var o=n.callback;return n.callback=function(t){e._removePages(),t.updateBackButton(!1),o&&o(t)},this.pushPage(t,n)}},{key:"bringPageTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};-1===["number","string"].indexOf(void 0===t?"undefined":f(t))&&Q.throw("First argument must be a page name or the index of an existing page. You supplied "+t);var n="number"==typeof t?this._normalizeIndex(t):this._lastIndexOfPage(t),i=this.pages[n];if(n<0)return this.pushPage(t,e);return e=this._preparePageAndOptions(i,e).options,n===this.pages.length-1?Promise.resolve(i):(i||Q.throw("Failed to find item "+t),this._isRunning?Promise.reject("pushPage is already running."):this._emitPrePushEvent()?Promise.reject("Canceled in prepush event."):(i.style.display="",i.style.visibility="hidden",i.parentNode.appendChild(i),this._pushPage(e)))}},{key:"_preparePageAndOptions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"object"!=(void 0===e?"undefined":f(e))&&Q.throw("options must be an object. You supplied "+e),null!==t&&void 0!==t||!e.page||(t=e.page),e=Q.extend({},this.options||{},e,{page:t}),{page:t,options:e}}},{key:"_removePages",value:function(t){var e=this.pages,n=void 0===t?0:e.length-t;n=n<0?1:n;for(var i=e.length-2;i>=n;i--)this._pageMap.delete(e[i]),this._pageLoader.unload(e[i])}},{key:"_updateLastPageBackButton",value:function(){var t=this.pages.length-1;t>=0&&this.pages[t].updateBackButton(t>0)}},{key:"_normalizeIndex",value:function(t){return t>=0?t:Math.abs(this.pages.length+t)%this.pages.length}},{key:"_onDeviceBackButton",value:function(t){this.pages.length>1?this.popPage():t.callParentHandler()}},{key:"_lastIndexOfPage",value:function(t){var e=void 0;for(e=this.pages.length-1;e>=0&&(this._pageMap.has(this.pages[e])||Q.throw("Incorrect state of pageMap"),t!==this._pageMap.get(this.pages[e]));e--);return e}},{key:"_emitPreEvent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!1;return Q.triggerElementEvent(this,"pre"+t,Q.extend({navigator:this,currentPage:this.pages[this.pages.length-1],cancel:function(){return n=!0}},e)),n}},{key:"_emitPrePushEvent",value:function(){return this._emitPreEvent("push")}},{key:"_emitPrePopEvent",value:function(){var t=this.pages.length;return this._emitPreEvent("pop",{leavePage:this.pages[t-1],enterPage:this.pages[t-2]})}},{key:"_createPageElement",value:function(t){var e=Q.createElement(P.normalizePageHTML(t));return hr(e),e}},{key:"_show",value:function(){var t=this;this.loaded.then(function(){return t.topPage&&t.topPage._show()})}},{key:"_hide",value:function(){this.topPage&&this.topPage._hide()}},{key:"_destroy",value:function(){for(var t=this.pages.length-1;t>=0;t--)this._pageLoader.unload(this.pages[t]);this.remove()}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"topPage",get:function(){for(var t=this.lastElementChild;t&&"ONS-PAGE"!==t.tagName;)t=t.previousElementSibling;return t}},{key:"pages",get:function(){return Q.arrayFrom(this.children).filter(function(t){return"ONS-PAGE"===t.tagName})}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"options",get:function(){return this._options},set:function(t){this._options=t}},{key:"_isRunning",set:function(t){this.setAttribute("_is-running",t?"true":"false")},get:function(){return JSON.parse(this.getAttribute("_is-running"))}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof Jo||Q.throwAnimator("Navigator"),ur[t]=e}},{key:"observedAttributes",get:function(){return["animation","swipeable"]}},{key:"animators",get:function(){return ur}},{key:"NavigatorAnimator",get:function(){return Jo}},{key:"events",get:function(){return["prepush","postpush","prepop","postpop"]}},{key:"rewritables",get:function(){return cr}}]),e}();c.Navigator=dr,customElements.define("ons-navigator",dr);var fr={"":"toolbar--*",".toolbar__left":"toolbar--*__left",".toolbar__center":"toolbar--*__center",".toolbar__right":"toolbar--*__right"},pr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"toolbar",fr);break;case"modifier":B.onModifierChanged(e,n,this,fr)}}},{key:"_getToolbarLeftItemsElement",value:function(){return this.querySelector(".left")||P.nullElement}},{key:"_getToolbarCenterItemsElement",value:function(){return this.querySelector(".center")||P.nullElement}},{key:"_getToolbarRightItemsElement",value:function(){return this.querySelector(".right")||P.nullElement}},{key:"_getToolbarBackButtonLabelElement",value:function(){return this.querySelector("ons-back-button .back-button__label")||P.nullElement}},{key:"_getToolbarBackButtonIconElement",value:function(){return this.querySelector("ons-back-button .back-button__icon")||P.nullElement}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("toolbar"),this._ensureToolbarItemElements(),B.initModifier(this,fr)}},{key:"_ensureToolbarItemElements",value:function(){for(var t=this.childNodes.length-1;t>=0;t--)1!=this.childNodes[t].nodeType&&this.removeChild(this.childNodes[t]);var e=this._ensureToolbarElement("center");if(e.classList.add("toolbar__title"),1!==this.children.length||!this.children[0].classList.contains("center")){var n=this._ensureToolbarElement("left"),i=this._ensureToolbarElement("right");this.children[0]===n&&this.children[1]===e&&this.children[2]===i||(this.appendChild(n),this.appendChild(e),this.appendChild(i))}}},{key:"_ensureToolbarElement",value:function(t){if(Q.findChild(this,".toolbar__"+t)){var e=Q.findChild(this,".toolbar__"+t);return e.classList.add(t),e}var n=Q.findChild(this,"."+t)||Q.create("."+t);return n.classList.add("toolbar__"+t),n}}],[{key:"observedAttributes",get:function(){return["modifier","class"]}}]),e}();c.Toolbar=pr,customElements.define("ons-toolbar",pr);var gr="page",mr={"":"page--*",".page__content":"page--*__content",".page__background":"page--*__background"},_r=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._deriveHooks(),t._defaultClassName=gr,t.classList.add(gr),t._initialized=!1,n(t,function(){t._compile(),t._isShown=!1,t._contentElement=t._getContentElement(),t._backgroundElement=t._getBackgroundElement()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){var t=this;N.prepare(this);var e=Q.findChild(this,"ons-toolbar"),n=Q.findChild(this,".page__background")||Q.findChild(this,".background")||document.createElement("div");n.classList.add("page__background"),this.insertBefore(n,!e&&this.firstChild||e&&e.nextSibling);var i=Q.findChild(this,".page__content")||Q.findChild(this,".content")||document.createElement("div");i.classList.add("page__content"),i.parentElement||Q.arrayFrom(this.childNodes).forEach(function(e){(1!==e.nodeType||t._elementShouldBeMoved(e))&&i.appendChild(e)}),this._tryToFillStatusBar(i),this.insertBefore(i,n.nextSibling),e&&Q.hasModifier(e,"transparent")||1!==i.children.length||!Q.isPageControl(i.children[0])||(this._defaultClassName+=" page--wrapper",this.attributeChangedCallback("class")),B.initModifier(this,mr)}},{key:"_elementShouldBeMoved",value:function(t){if(t.classList.contains("page__background"))return!1;var e=t.tagName.toLowerCase();if("ons-fab"===e)return!t.hasAttribute("position");return t.hasAttribute("inline")||-1===["script","ons-toolbar","ons-bottom-toolbar","ons-modal","ons-speed-dial","ons-dialog","ons-alert-dialog","ons-popover","ons-action-sheet"].indexOf(e)}},{key:"_tryToFillStatusBar",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;P.autoStatusBarFill(function(){Q.toggleAttribute(t,"status-bar-fill",!Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")})&&(t._canAnimateToolbar(e)||!Q.findChild(e,Q.isPageControl)))})}},{key:"_canAnimateToolbar",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._contentElement;return!!Q.findChild(this,"ons-toolbar")||!!Q.findChild(t,function(t){return Q.match(t,"ons-toolbar")&&!t.hasAttribute("inline")})}},{key:"connectedCallback",value:function(){var t=this;Q.isAttached(this)&&n(this,function(){t._tryToFillStatusBar(),t.hasAttribute("on-infinite-scroll")&&t.attributeChangedCallback("on-infinite-scroll",null,t.getAttribute("on-infinite-scroll")),t._initialized||(t._initialized=!0,setImmediate(function(){t.onInit&&t.onInit(),Q.triggerElementEvent(t,"init")}),Q.hasAnyComponentAsParent(t)||setImmediate(function(){return t._show()}))})}},{key:"updateBackButton",value:function(t){this.backButton&&(t?this.backButton.show():this.backButton.hide())}},{key:"_onScroll",value:function(){var t=this,e=this._contentElement,n=(e.scrollTop+e.clientHeight)/e.scrollHeight>=this._infiniteScrollLimit;this._onInfiniteScroll&&!this._loadingContent&&n&&(this._loadingContent=!0,this._onInfiniteScroll(function(){return t._loadingContent=!1}))}},{key:"_getContentElement",value:function(){var t=Q.findChild(this,".page__content");if(t)return t;Q.throw('Fail to get ".page__content" element')}},{key:"_getBackgroundElement",value:function(){var t=Q.findChild(this,".page__background");if(t)return t;Q.throw('Fail to get ".page__background" element')}},{key:"_getBottomToolbarElement",value:function(){return Q.findChild(this,"ons-bottom-toolbar")||P.nullElement}},{key:"_getToolbarElement",value:function(){return Q.findChild(this,"ons-toolbar")||document.createElement("ons-toolbar")}},{key:"attributeChangedCallback",value:function(t,e,n){var i=this;switch(t){case"class":Q.restoreClass(this,this._defaultClassName,mr);break;case"modifier":B.onModifierChanged(e,n,this,mr);break;case"on-infinite-scroll":this.onInfiniteScroll=null===n?null:function(t){var e=Q.findFromPath(n);i.onInfiniteScroll=e,e(t)}}}},{key:"_show",value:function(){!this._isShown&&Q.isAttached(this)&&(this._isShown=!0,this.setAttribute("shown",""),this.onShow&&this.onShow(),Q.triggerElementEvent(this,"show"),Q.propagateAction(this,"_show"))}},{key:"_hide",value:function(){this._isShown&&(this._isShown=!1,this.removeAttribute("shown"),this.onHide&&this.onHide(),Q.triggerElementEvent(this,"hide"),Q.propagateAction(this,"_hide"))}},{key:"_destroy",value:function(){this._hide(),this.onDestroy&&this.onDestroy(),Q.triggerElementEvent(this,"destroy"),this.onDeviceBackButton&&this.onDeviceBackButton.destroy(),Q.propagateAction(this,"_destroy"),this.remove()}},{key:"_deriveHooks",value:function(){var t=this;this.constructor.events.forEach(function(e){var n="on"+e.charAt(0).toUpperCase()+e.slice(1);Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return t["_"+n]},set:function(e){e instanceof Function||Q.throw('"'+n+'" hook must be a function'),t["_"+n]=e.bind(t)}})})}},{key:"name",set:function(t){this.setAttribute("name",t)},get:function(){return this.getAttribute("name")}},{key:"backButton",get:function(){return this.querySelector("ons-back-button")}},{key:"onInfiniteScroll",set:function(t){var e=this;!t||t instanceof Function||Q.throw('"onInfiniteScroll" must be function or null'),n(this,function(){t?e._onInfiniteScroll||(e._infiniteScrollLimit=.9,e._boundOnScroll=e._onScroll.bind(e),setImmediate(function(){return e._contentElement.addEventListener("scroll",e._boundOnScroll)})):e._contentElement.removeEventListener("scroll",e._boundOnScroll),e._onInfiniteScroll=t})},get:function(){return this._onInfiniteScroll}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}},{key:"scrollTop",get:function(){return this._contentElement.scrollTop},set:function(t){this._contentElement.scrollTop=t}}],[{key:"observedAttributes",get:function(){return["modifier","on-infinite-scroll","class"]}},{key:"events",get:function(){return["init","show","hide","destroy"]}}]),e}();c.Page=_r,customElements.define("ons-page",_r);var vr=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .4, 1)":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}},{key:"_animate",value:function(t,e){var n=e.from,i=e.to,o=e.options,r=e.callback,a=e.restore,s=void 0!==a&&a,l=e.animation;return o=Q.extend({},this.options,o),l&&(n=l.from,i=l.to),l=nt(t),s&&(l=l.saveStyle()),l=l.queue(n).wait(this.delay).queue({css:i,duration:this.duration,timing:this.timing}),s&&(l=l.restoreStyle()),r&&(l=l.queue(function(t){r(),t()})),l}},{key:"_animateAll",value:function(t,e){var n=this;Object.keys(e).forEach(function(i){return n._animate(t[i],e[i]).play()})}}]),e}(),br={out:{from:{opacity:1},to:{opacity:0}},in:{from:{opacity:0},to:{opacity:1}}},yr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,vr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{animation:br.in,restore:!0,callback:e}})}},{key:"hide",value:function(t,e){this._animateAll(t,{_mask:br.out,_popover:{animation:br.out,restore:!0,callback:e}})}}]),e}(),kr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,yr),g(e,[{key:"show",value:function(t,e){this._animateAll(t,{_mask:br.in,_popover:{from:{transform:"scale3d(1.3, 1.3, 1.0)",opacity:0},to:{transform:"scale3d(1.0, 1.0,  1.0)",opacity:1},restore:!0,callback:e}})}}]),e}(),wr={".popover":"popover--*",".popover-mask":"popover-mask--*",".popover__content":"popover--*__content",".popover__arrow":"popover--*__arrow"},Er={default:function(){return C.isAndroid()?yr:kr},none:vr,"fade-ios":kr,"fade-md":yr},Cr={up:"bottom",left:"right",down:"top",right:"left"},Ar=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnChange=t._onChange.bind(t),n(t,function(){t._compile(),t.style.display="none"}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return new O({animators:Er,baseClass:vr,baseClassName:"PopoverAnimator",defaultAnimation:this.getAttribute("animation")||"default"})}},{key:"_toggleStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t?(this.style.display="block",this._currentTarget=e.target,this._positionPopover(e.target)):(this.style.display="none",this._clearStyles())}},{key:"_positionPopover",value:function(t){var e=this._radius,n=this._content,i=this._margin,o=Li.getSafeAreaLengths(),r=Li.getSafeAreaDOMRect(),a=t.getBoundingClientRect(),s=Q.hasModifier(this,"material"),l=s&&this.hasAttribute("cover-target"),u=(Q.findParent(this,"ons-page")||document.body).getBoundingClientRect(),c={top:Math.max(u.top,r.top),left:Math.max(u.left,r.left),bottom:Math.min(u.bottom,r.bottom),right:Math.min(u.right,r.right)},h={top:a.top-(c.top+i),left:a.left-(c.left+i),bottom:c.bottom-i-a.bottom,right:c.right-i-a.right},d={top:a.top+Math.round(a.height/2)-(c.top+i),left:a.left+Math.round(a.width/2)-(c.left+i),bottom:c.bottom-i-a.bottom+Math.round(a.height/2),right:c.right-i-a.right+Math.round(a.width/2)},f=this._calculateDirections(h),p=f.vertical,g=f.primary,m=f.secondary;this._currentDirection=g,Q.addModifier(this,g);var _=p?"width":"height",v=function(t){return{width:parseInt(t.getPropertyValue("width"),10),height:parseInt(t.getPropertyValue("height"),10)}}(window.getComputedStyle(n)),b=l?0:(p?a.height:a.width)+(s?0:14),y=Math.max(o[g]+i,o[g]+i+h[g]+b),k=Math.max(o[m]+i,o[m]+i+d[m]-v[_]/2);this._popover.style[g]=y+"px",this._popover.style[m]=k+"px",this._arrow.style[m]=Math.max(e,o[m]+i+d[m]-k)+"px"}},{key:"_calculateDirections",value:function(t){var e=(this.getAttribute("direction")||"up down left right").split(/\s+/).map(function(t){return Cr[t]}).sort(function(e,n){return t[e]-t[n]})[0],n="top"==e||"bottom"==e,i=void 0;return i=n?t.left<t.right?"left":"right":t.top<t.bottom?"top":"bottom",{vertical:n,primary:e,secondary:i}}},{key:"_clearStyles",value:function(){var t=this;this._currentDirection=null,["top","bottom","left","right"].forEach(function(e){t._arrow.style[e]=t._content.style[e]=t._popover.style[e]="",Q.removeModifier(t,e)})}},{key:"_onChange",value:function(){var t=this;setImmediate(function(){t._currentTarget&&t._positionPopover(t._currentTarget)})}},{key:"_compile",value:function(){if(N.prepare(this),!this._popover||!this._mask){if(this._popover&&this._content){if(!this._mask){var t=document.createElement("div");t.classList.add("popover-mask"),this.insertBefore(t,this.firstChild)}if(!this._arrow){var e=document.createElement("div");e.classList.add("popover__arrow"),this._popover.appendChild(e)}}else{for(var n=Q.createFragment('\n        <div class="popover-mask"></div>\n        <div class="popover">\n          <div class="popover__content"></div>\n          <div class="popover__arrow"></div>\n        </div>\n      '),i=n.querySelector(".popover__content");this.childNodes[0];)i.appendChild(this.childNodes[0]);this.appendChild(n)}this.hasAttribute("style")&&(this._popover.setAttribute("style",this.getAttribute("style")),this.removeAttribute("style")),B.initModifier(this,this._scheme)}}},{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof(n=!t||"object"!==(void 0===t?"undefined":f(t))||t instanceof Event||t instanceof HTMLElement?_({},n,{target:t}):_({},t)).target?n.target=document.querySelector(n.target):n.target instanceof Event&&(n.target=n.target.target),n.target instanceof HTMLElement||Q.throw("Invalid target type or undefined"),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this,n)}},{key:"connectedCallback",value:function(){var t=this;v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"connectedCallback",this).call(this),window.addEventListener("resize",this._boundOnChange,!1),this._margin=this._margin||parseInt(window.getComputedStyle(this).getPropertyValue("top")),this._margin=this._margin||6,n(this,function(){t._radius=parseInt(window.getComputedStyle(t._content).getPropertyValue("border-top-left-radius"))})}},{key:"disconnectedCallback",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disconnectedCallback",this).call(this),window.removeEventListener("resize",this._boundOnChange,!1)}},{key:"attributeChangedCallback",value:function(t,n,i){if("direction"===t)return this._boundOnChange();"modifier"===t&&this._currentDirection&&Q.addModifier(this,this._currentDirection),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return wr}},{key:"_mask",get:function(){return Q.findChild(this,".popover-mask")}},{key:"_popover",get:function(){return Q.findChild(this,".popover")}},{key:"_content",get:function(){return Q.findChild(this._popover,".popover__content")}},{key:"_arrow",get:function(){return Q.findChild(this._popover,".popover__arrow")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof vr||Q.throwAnimator("Popover"),Er[t]=e}},{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["direction"])}},{key:"animators",get:function(){return Er}},{key:"PopoverAnimator",get:function(){return vr}}]),e}();c.Popover=Ar,customElements.define("ons-popover",Ar);var Sr={".progress-bar":"progress-bar--*",".progress-bar__primary":"progress-bar--*__primary",".progress-bar__secondary":"progress-bar--*__secondary"},Pr=Q.createElement('\n  <div class="progress-bar">\n    <div class="progress-bar__secondary"></div>\n    <div class="progress-bar__primary"></div>\n  </div>\n'),Or="indeterminate",xr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-bar"):this._template=Pr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-bar__primary"),this._secondary=Q.findChild(this._template,".progress-bar__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Sr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-bar"))return!1;var t=Q.findChild(this,".progress-bar");return!!Q.findChild(t,".progress-bar__secondary")&&!!Q.findChild(t,".progress-bar__primary")}},{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Sr),this.hasAttribute(Or)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Or&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Or,{force:t.hasAttribute(Or)})})}},{key:"_updateValue",value:function(){var t=this;n(this,function(){t._primary.style.width=t.hasAttribute("value")?t.getAttribute("value")+"%":"0%",t._secondary.style.width=t.hasAttribute("secondary-value")?t.getAttribute("secondary-value")+"%":"0%"})}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Or,""):this.removeAttribute(Or)},get:function(){return this.hasAttribute(Or)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Or]}}]),e}();c.ProgressBar=xr,customElements.define("ons-progress-bar",xr);var Tr={".progress-circular":"progress-circular--*",".progress-circular__background":"progress-circular--*__background",".progress-circular__primary":"progress-circular--*__primary",".progress-circular__secondary":"progress-circular--*__secondary"},Lr=Q.createElement('\n  <svg class="progress-circular">\n    <circle class="progress-circular__background" />\n    <circle class="progress-circular__secondary" cx="50%" cy="50%" r="40%" />\n    <circle class="progress-circular__primary" cx="50%" cy="50%" r="40%" />\n  </svg>\n'),Mr="indeterminate",Dr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){"modifier"===t?(B.onModifierChanged(e,n,this,Tr),this.hasAttribute(Mr)&&this._updateDeterminate()):"value"===t||"secondary-value"===t?this._updateValue():t===Mr&&this._updateDeterminate()}},{key:"_updateDeterminate",value:function(){var t=this;n(this,function(){return Q.toggleModifier(t,Mr,{force:t.hasAttribute(Mr)})})}},{key:"_updateValue",value:function(){var t=this;this.hasAttribute("value")&&n(this,function(){var e=Math.ceil(251.32*t.getAttribute("value")*.01);t._primary.style["stroke-dasharray"]=e+"%, 251.32%"}),this.hasAttribute("secondary-value")?n(this,function(){var e=Math.ceil(251.32*t.getAttribute("secondary-value")*.01);t._secondary.style.display=null,t._secondary.style["stroke-dasharray"]=e+"%, 251.32%"}):n(this,function(){t._secondary.style.display="none"})}},{key:"_compile",value:function(){this._isCompiled()?this._template=Q.findChild(this,".progress-circular"):this._template=Lr.cloneNode(!0),this._primary=Q.findChild(this._template,".progress-circular__primary"),this._secondary=Q.findChild(this._template,".progress-circular__secondary"),this._updateDeterminate(),this._updateValue(),this.appendChild(this._template),N.prepare(this),B.initModifier(this,Tr)}},{key:"_isCompiled",value:function(){if(!Q.findChild(this,".progress-circular"))return!1;var t=Q.findChild(this,".progress-circular");return!!Q.findChild(t,".progress-circular__secondary")&&!!Q.findChild(t,".progress-circular__primary")}},{key:"value",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("value")||"0")}},{key:"secondaryValue",set:function(t){("number"!=typeof t||t<0||t>100)&&Q.throw("Invalid value"),this.setAttribute("secondary-value",Math.floor(t))},get:function(){return parseInt(this.getAttribute("secondary-value")||"0")}},{key:"indeterminate",set:function(t){t?this.setAttribute(Mr,""):this.removeAttribute(Mr)},get:function(){return this.hasAttribute(Mr)}}],[{key:"observedAttributes",get:function(){return["modifier","value","secondary-value",Mr]}}]),e}();c.ProgressCircular=Dr,customElements.define("ons-progress-circular",Dr);var Ir="initial",Nr=function(t,e){return Q.throw('"'+t+'" must be '+e)},Br=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._shouldFixScroll=Q.globals.isUIWebView,t._onDrag=t._onDrag.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onDragEnd=t._onDragEnd.bind(t),t._onScroll=t._onScroll.bind(t),t._setState(Ir,!0),t._hide(),t}return b(e,Pi),g(e,[{key:"_setStyle",value:function(){var t=this.height+"px";d(this,{height:t,lineHeight:t}),""===this.style.display&&this._show()}},{key:"_onScroll",value:function(t){var e=this._pageElement;e.scrollTop<0&&(e.scrollTop=0)}},{key:"_canConsumeGesture",value:function(t){return"up"===t.direction||"down"===t.direction}},{key:"_onDragStart",value:function(t){var e=this;if(t.gesture&&!this.disabled){var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight,o=this._shouldFixScroll?.8:1;if(this._ignoreDrag=t.consumed||n>i*o,!this._ignoreDrag){var r=t.consume;t.consume=function(){r&&r(),e._ignoreDrag=!0,e._hide()},this._canConsumeGesture(t.gesture)&&(r&&r(),t.consumed=!0,this._show())}this._startScroll=this._pageElement.scrollTop}}},{key:"_onDrag",value:function(t){var e=this;if(t.gesture&&!this.disabled&&!this._ignoreDrag&&this._canConsumeGesture(t.gesture)){"none"===this.style.display&&this._show(),t.stopPropagation();var n=t.gesture.center.clientY+this._pageElement.scrollTop,i=window.innerHeight;this._shouldFixScroll&&(this._pageElement.scrollTop=this._startScroll-t.gesture.deltaY,("up"!==t.gesture.interimDirection||n<=.5*i)&&t.gesture.preventDefault());var o=Math.max(t.gesture.deltaY-this._startScroll,0);if(o!==this._currentTranslation){var r=this.thresholdHeight;r>0&&o>=r?(t.gesture.stopDetect(),setImmediate(function(){return e._finish()})):o>=this.height?this._setState("preaction"):this._setState(Ir),this._translateTo(o)}}}},{key:"_onDragEnd",value:function(t){if(t.gesture&&!this.disabled&&!this._ignoreDrag&&(t.stopPropagation(),this._currentTranslation>0)){this._currentTranslation>this.height?this._finish():this._translateTo(0,{animate:!0})}}},{key:"_finish",value:function(){var t=this;this._setState("action"),this._translateTo(this.height,{animate:!0});(this.onAction||function(t){return t()})(function(){t._translateTo(0,{animate:!0}),t._setState(Ir)})}},{key:"_setState",value:function(t,e){var n=this.state;this.setAttribute("state",t),e||n===this.state||Q.triggerElementEvent(this,"changestate",{pullHook:this,state:t,lastState:n})}},{key:"_show",value:function(){var t=this;setImmediate(function(){t.style.display="",t._pageElement&&(t._pageElement.style.marginTop="-"+t.height+"px")})}},{key:"_hide",value:function(){this.style.display="none",this._pageElement&&(this._pageElement.style.marginTop="")}},{key:"_translateTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(0!=this._currentTranslation||0!=t){this._currentTranslation=t;var n=e.animate?{duration:.3,timing:"cubic-bezier(.1, .7, .1, 1)"}:{};this._onPull&&this._onPull((t/this.height).toFixed(2),n);var i=this.hasAttribute("fixed-content")?this:this._pageElement;nt(i).queue({transform:"translate3d(0px, "+t+"px, 0px)"},n).play(function(){0===t&&d.clear(i,"transition transform"),e.callback instanceof Function&&e.callback()})}}},{key:"_disableDragLock",value:function(){this._dragLockDisabled=!0,this._setupListeners(!0)}},{key:"_setupListeners",value:function(t){var e=this,n=function(t){return e._pageElement[t+"EventListener"]("scroll",e._onScroll,!1)},i=function(t){var n={passive:!0};e._gestureDetector[t]("drag",e._onDrag,n),e._gestureDetector[t]("dragstart",e._onDragStart,n),e._gestureDetector[t]("dragend",e._onDragEnd,n)};this._gestureDetector&&(i("off"),this._gestureDetector.dispose(),this._gestureDetector=null),n("remove"),t&&(this._gestureDetector=new st(this._pageElement,{dragMinDistance:1,dragDistanceCorrection:!1,dragLockToAxis:!this._dragLockDisabled,passive:!this._shouldFixScroll}),i("on"),n("add"))}},{key:"connectedCallback",value:function(){this._currentTranslation=0,this._pageElement=this.parentNode,this._setupListeners(!0),this._setStyle()}},{key:"disconnectedCallback",value:function(){this._hide(),this._setupListeners(!1)}},{key:"attributeChangedCallback",value:function(t,e,n){"height"===t&&this._pageElement&&this._setStyle()}},{key:"onAction",get:function(){return this._onAction},set:function(t){!t||t instanceof Function||Nr("onAction","function or null"),this._onAction=t}},{key:"onPull",get:function(){return this._onPull},set:function(t){!t||t instanceof Function||Nr("onPull","function or null"),this._onPull=t}},{key:"height",set:function(t){Q.isInteger(t)||Nr("height","integer"),this.setAttribute("height",t+"px")},get:function(){return parseInt(this.getAttribute("height")||"64",10)}},{key:"thresholdHeight",set:function(t){Q.isInteger(t)||Nr("thresholdHeight","integer"),this.setAttribute("threshold-height",t+"px")},get:function(){return parseInt(this.getAttribute("threshold-height")||"96",10)}},{key:"state",get:function(){return this.getAttribute("state")}},{key:"pullDistance",get:function(){return this._currentTranslation}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["height"]}},{key:"events",get:function(){return["changestate"]}}]),e}();c.PullHook=Br,customElements.define("ons-pull-hook",Br);var jr={"":"range--*",".range__input":"range--*__input",".range__focus-ring":"range--*__focus-ring"},Hr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onMouseDown=t._onMouseDown.bind(t),t._onMouseUp=t._onMouseUp.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onTouchEnd=t._onTouchEnd.bind(t),t._onInput=t._update.bind(t),t._onDragstart=t._onDragstart.bind(t),t._onDragend=t._onDragend.bind(t),t}return b(e,No),g(e,[{key:"_compile",value:function(){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_compile",this).call(this),this._updateDisabled(this.hasAttribute("disabled"))}},{key:"_update",value:function(){var t=this._input,e=this._focusRing;t.style.backgroundSize=100*this._ratio+"% 2px",e.value=this.value,""===t.min&&"0"===t.value||t.min===t.value?t.setAttribute("_zero",""):t.removeAttribute("_zero"),["min","max"].forEach(function(n){return e[n]=t[n]})}},{key:"_onMouseDown",value:function(t){var e=this;this._input.classList.add("range__input--active"),setImmediate(function(){return e._input.focus()})}},{key:"_onTouchStart",value:function(t){this._onMouseDown()}},{key:"_onMouseUp",value:function(t){this._input.classList.remove("range__input--active")}},{key:"_onTouchEnd",value:function(t){this._onMouseUp(t)}},{key:"_onDragstart",value:function(t){t.consumed=!0,t.gesture.stopPropagation(),this._input.classList.add("range__input--active"),this.addEventListener("drag",this._onDrag)}},{key:"_onDrag",value:function(t){t.stopPropagation()}},{key:"_onDragend",value:function(t){this._input.classList.remove("range__input--active"),this.removeEventListener("drag",this._onDrag)}},{key:"attributeChangedCallback",value:function(t,n,i){"disabled"===t&&this._updateDisabled(i),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_updateDisabled",value:function(t){t?this.classList.add("range--disabled"):this.classList.remove("range--disabled")}},{key:"connectedCallback",value:function(){this._setupListeners(!0)}},{key:"disconnectedCallback",value:function(){this._setupListeners(!1)}},{key:"_setupListeners",value:function(t){var e=(t?"add":"remove")+"EventListener";Q[e](this,"touchstart",this._onTouchStart,{passive:!0}),this[e]("mousedown",this._onMouseDown),this[e]("mouseup",this._onMouseUp),this[e]("touchend",this._onTouchEnd),this[e]("dragstart",this._onDragstart),this[e]("dragend",this._onDragend),this[e]("input",this._onInput)}},{key:"_scheme",get:function(){return jr}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <input type="range" class="range__focus-ring" tabIndex="-1">\n    '}},{key:"_defaultClassName",get:function(){return"range"}},{key:"type",get:function(){return"range"}},{key:"_focusRing",get:function(){return this.children[1]}},{key:"_ratio",get:function(){var t=""===this._input.min?0:parseInt(this._input.min),e=""===this._input.max?100:parseInt(this._input.max);return(this.value-t)/(e-t)}}],[{key:"observedAttributes",get:function(){return["disabled"].concat(w(No.observedAttributes))}}]),e}();c.Range=Hr,customElements.define("ons-range",Hr);var Rr=function(){function t(){p(this,t),this._queue=[],this._index=0}return g(t,[{key:"animate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,i=(new Date).getTime(),o={},r=!1,a=!1,s=!1,l=Object.keys(e),u={stop:function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s&&clearTimeout(s);var h=Math.min(1,((new Date).getTime()-i)/n);return l.forEach(function(n){t.style[n]=(1-h)*o[n]+h*e[n]+("opacity"==n?"":"px")}),t.style.transitionDuration="0s",c.stopNext?a=!1:r||(r=!0,a&&a()),u},then:function(t){return a=t,r&&a&&a(),u},speed:function(a){if(P.config.animationsDisabled&&(a=0),!r){s&&clearTimeout(s);var c=((new Date).getTime()-i)/n,h=a*(1-c);l.forEach(function(n){t.style[n]=(1-c)*o[n]+c*e[n]+("opacity"==n?"":"px")}),function(){var e=window.getComputedStyle(t);l.forEach(e.getPropertyValue.bind(e)),e=t.offsetHeight}(),i=t.speedUpTime,n=h,t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")}),s=setTimeout(u.stop,h)}return u},finish:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=((new Date).getTime()-i)/n;return u.speed(t/(1-e)),u}};if(t.hasAttribute("disabled")||r||P.config.animationsDisabled)return u;var c=window.getComputedStyle(t);return l.forEach(function(t){var e=parseFloat(c.getPropertyValue(t));o[t]=isNaN(e)?0:e}),r||(t.style.transitionProperty=l.join(","),t.style.transitionDuration=n/1e3+"s",l.forEach(function(n){t.style[n]=e[n]+("opacity"==n?"":"px")})),s=setTimeout(u.stop,n),this._onStopAnimations(t,u.stop),u}}]),g(t,[{key:"_onStopAnimations",value:function(t,e){var n=this._queue,i=this._index++;n[t]=n[t]||[],n[t][i]=function(o){return delete n[t][i],n[t]&&0==n[t].length&&delete n[t],e(o)}}},{key:"stopAnimations",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Array.isArray(t))return t.forEach(function(t){e.stopAnimations(t,n)});(this._queue[t]||[]).forEach(function(t){t(n||{})})}},{key:"stopAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stopAnimations(Object.keys(this._queue),t)}},{key:"fade",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return this.animate(t,{opacity:0},e)}}]),t}(),Fr={"":"ripple--*",".ripple__wave":"ripple--*__wave",".ripple__background":"ripple--*__background"},qr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onTap=t._onTap.bind(t),t._onHold=t._onHold.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onRelease=t._onRelease.bind(t),n(t,function(){return t._compile()}),t._animator=new Rr,["color","center","start-radius","background","modifier"].forEach(function(e){t.attributeChangedCallback(e,null,t.getAttribute(e))}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("ripple"),this._wave=this.getElementsByClassName("ripple__wave")[0],this._background=this.getElementsByClassName("ripple__background")[0],this._background&&this._wave||(this._wave=Q.create(".ripple__wave"),this._background=Q.create(".ripple__background"),this.appendChild(this._wave),this.appendChild(this._background)),B.initModifier(this,Fr)}},{key:"_getEffectSize",value:function(){if(this.hasAttribute("size")){var t=this.getAttribute("size");if(-1!==["cover","contain"].indexOf(t))return t}return"cover"}},{key:"_calculateCoords",value:function(t){var e=void 0,n=void 0,i=void 0,o=void 0,r=void 0,a=this.getBoundingClientRect(),s=this._getEffectSize(),l=function(){return Q.throw("Ripple invalid state")};return this._center?(e=a.width/2,n=a.height/2,"cover"===s?r=Math.sqrt(e*e+n*n):"contain"===s?r=Math.min(e,n):l()):(e=("number"==typeof t.clientX?t.clientX:t.changedTouches[0].clientX)-a.left,n=("number"==typeof t.clientY?t.clientY:t.changedTouches[0].clientY)-a.top,i=Math.max(n,a.height-n),o=Math.max(e,a.width-e),"cover"===s?r=Math.sqrt(i*i+o*o):"contain"===s?r=Math.min(Math.round(i/2),Math.round(o/2)):l()),{x:e,y:n,r:r}}},{key:"_rippleAnimation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=this._animator,i=this._wave,o=this._background,r=this._minR,a=this._calculateCoords(t),s=a.x,l=a.y,u=a.r;return n.stopAll({stopNext:1}),n.animate(o,{opacity:1},e),Q.extend(i.style,{opacity:1,top:l-r+"px",left:s-r+"px",width:2*r+"px",height:2*r+"px"}),n.animate(i,{top:l-u,left:s-u,height:2*u,width:2*u},e)}},{key:"_updateParent",value:function(){if(!this._parentUpdated&&this.parentNode){"static"===window.getComputedStyle(this.parentNode).getPropertyValue("position")&&(this.parentNode.style.position="relative"),this._parentUpdated=!0}}},{key:"_onTap",value:function(t){var e=this;this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._rippleAnimation(t.gesture.srcEvent).then(function(){e._animator.fade(e._wave),e._animator.fade(e._background)}))}},{key:"_onHold",value:function(t){this.disabled||t.ripple||(t.ripple=!0,this._updateParent(),this._holding=this._rippleAnimation(t.gesture.srcEvent,2e3),document.addEventListener("release",this._onRelease))}},{key:"_onRelease",value:function(t){var e=this;this._holding&&!t.ripple&&(t.ripple=!0,this._holding.speed(300).then(function(){e._animator.stopAll({stopNext:!0}),e._animator.fade(e._wave),e._animator.fade(e._background)}),this._holding=!1),document.removeEventListener("release",this._onRelease)}},{key:"_onDragStart",value:function(t){if(this._holding)return this._onRelease(t);-1!=["left","right"].indexOf(t.gesture.direction)&&this._onTap(t)}},{key:"connectedCallback",value:function(){this._parentNode=this.parentNode,P.config.animationsDisabled?this.disabled=!0:(this._parentNode.addEventListener("tap",this._onTap),this._parentNode.addEventListener("hold",this._onHold),this._parentNode.addEventListener("dragstart",this._onDragStart))}},{key:"disconnectedCallback",value:function(){var t=this._parentNode||this.parentNode;t.removeEventListener("tap",this._onTap),t.removeEventListener("hold",this._onHold),t.removeEventListener("dragstart",this._onDragStart)}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"ripple",Fr);break;case"modifier":B.onModifierChanged(e,i,this,Fr);break;case"start-radius":this._minR=Math.max(0,parseFloat(i)||0);break;case"color":i&&n(this,function(){o._wave.style.background=i,o.hasAttribute("background")||(o._background.style.background=i)});break;case"background":(i||e)&&("none"===i?n(this,function(){o._background.setAttribute("disabled","disabled"),o._background.style.background="transparent"}):n(this,function(){o._background.hasAttribute("disabled")&&o._background.removeAttribute("disabled"),o._background.style.background=i}));break;case"center":"center"===t&&(this._center=null!=i&&"false"!=i)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["start-radius","color","background","center","class","modifier"]}}]),e}();c.Ripple=qr,customElements.define("ons-ripple",qr);var zr=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Pi),e}();c.Row=zr,customElements.define("ons-row",zr);var Vr={"":"segment--*",".segment__item":"segment--*__item",".segment__input":"segment--*__input",".segment__button":"segment--*__button"},Wr=function(){var t=0;return function(){return"ons-segment-gen-"+t++}}(),Ur=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._segmentId=Wr(),t._tabbar=null,t._onChange=t._onChange.bind(t),t._onTabbarPreChange=t._onTabbarPreChange.bind(t),n(t,function(){t._compile(),setImmediate(function(){return t._lastActiveIndex=t._tabbar?t._tabbar.getActiveTabIndex():t.getActiveButtonIndex()})}),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){N.prepare(this),this.classList.add("segment");for(var t=this.children.length-1;t>=0;t--){var e=this.children[t];e.classList.add("segment__item");var n=Q.findChild(e,".segment__input")||Q.create("input.segment__input");n.type="radio",n.value=t,n.name=n.name||this._segmentId,n.checked=!this.hasAttribute("tabbar-id")&&t===(parseInt(this.getAttribute("active-index"))||0);var i=Q.findChild(e,".segment__button")||Q.create(".segment__button");if(i.parentElement!==e)for(;e.firstChild;)i.appendChild(e.firstChild);e.appendChild(n),e.appendChild(i)}B.initModifier(this,Vr)}},{key:"connectedCallback",value:function(){var t=this;this.hasAttribute("tabbar-id")&&n(this,function(){var e=Q.findParent(t,"ons-page");t._tabbar=e&&e.querySelector("#"+t.getAttribute("tabbar-id")),t._tabbar&&"ONS-TABBAR"===t._tabbar.tagName||Q.throw("No tabbar with id "+t.getAttribute("tabbar-id")+" was found."),t._tabbar.setAttribute("hide-tabs",""),setImmediate(function(){return t._setChecked(t._tabbar.getActiveTabIndex())}),t._tabbar.addEventListener("prechange",t._onTabbarPreChange)}),this.addEventListener("change",this._onChange)}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._tabbar&&(t._tabbar.removeEventListener("prechange",t._onTabbarPreChange),t._tabbar=null)}),this.removeEventListener("change",this._onChange)}},{key:"_setChecked",value:function(t){this.children[t].firstElementChild.checked=!0}},{key:"setActiveButton",value:function(t,e){return this._tabbar?this._tabbar.setActiveTab(t,e):(this._setChecked(t),this._postChange(t),Promise.resolve(t))}},{key:"getActiveButtonIndex",value:function(){for(var t=this.children.length-1;t>=0;t--)if(this.children[t].firstElementChild.checked)return t;return-1}},{key:"_onChange",value:function(t){t.stopPropagation(),this._tabbar?this._tabbar.setActiveTab(this.getActiveButtonIndex(),{reject:!1}):this._postChange(this.getActiveButtonIndex())}},{key:"_onTabbarPreChange",value:function(t){var e=this;setImmediate(function(){t.detail.canceled||(e._setChecked(t.index),e._postChange(t.index))})}},{key:"_postChange",value:function(t){Q.triggerElementEvent(this,"postchange",{index:t,activeIndex:t,lastActiveIndex:this._lastActiveIndex,segmentItem:this.children[t]}),this._lastActiveIndex=t}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"segment",Vr);break;case"modifier":B.onModifierChanged(e,n,this,Vr)}}},{key:"disabled",set:function(t){return Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["class","modifier"]}},{key:"events",get:function(){return["postchange"]}}]),e}();c.Segment=Ur,customElements.define("ons-segment",Ur);var Xr={"":"select-* select--*",".select-input":"select-input--*"},Yr=["autofocus","disabled","form","multiple","name","required","size"],Gr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){return t._compile()}),t._deriveGetters(),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"select",Xr);break;case"modifier":B.onModifierChanged(e,i,this,Xr)}Yr.indexOf(t)>=0&&n(this,function(){return o._updateBoundAttributes()})}},{key:"_updateBoundAttributes",value:function(){var t=this;Yr.forEach(function(e){t.hasAttribute(e)?t._select.setAttribute(e,t.getAttribute(e)):t._select.removeAttribute(e)})}},{key:"_compile",value:function(){N.prepare(this),this.classList.add("select");var t=this._select||document.createElement("select");!t.id&&this.hasAttribute("select-id")&&(t.id=this.getAttribute("select-id")),t.classList.add("select-input"),this._select||(Q.arrayFrom(this.childNodes).forEach(function(e){return t.appendChild(e)}),this.appendChild(t)),B.initModifier(this,Xr)}},{key:"_deriveGetters",value:function(){var t=this;["disabled","length","multiple","name","options","selectedIndex","size","value","form","type"].forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._select[e]},set:-1===["form","type"].indexOf(e)?function(i){return n(t,function(){return t._select[e]=i})}:void 0})})}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._select.add(t,e)}},{key:"remove",value:function(t){this._select.remove(t)}},{key:"_select",get:function(){return this.querySelector("select")}}],[{key:"observedAttributes",get:function(){return["modifier","class"].concat(Yr)}}]),e}();c.Select=Gr,customElements.define("ons-select",Gr);var $r={"":"fab--* speed-dial__item--*"},Kr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._compile(),t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"class":Q.restoreClass(this,"fab fab--mini speed-dial__item",$r);break;case"modifier":B.onModifierChanged(e,n,this,$r),Q.addModifier(this,"mini");break;case"ripple":this._updateRipple()}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_updateRipple",value:function(){Q.updateRipple(this)}},{key:"_onClick",value:function(t){t.stopPropagation()}},{key:"_compile",value:function(){var t=this;N.prepare(this),"fab fab--mini speed-dial__item".split(/\s+/).forEach(function(e){return t.classList.add(e)}),Q.addModifier(this,"mini"),this._updateRipple(),B.initModifier(this,$r)}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","class"]}}]),e}();c.SpeedDialItem=Kr,customElements.define("ons-speed-dial-item",Kr);var Qr={"":"speed-dial--*"},Jr=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t._compile()}),t._itemShown=!1,t._boundOnClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){this.classList.add("speed-dial"),N.prepare(this),this._updateRipple(),B.initModifier(this,Qr),this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up"),this._updatePosition()}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"speed-dial",Qr);break;case"modifier":B.onModifierChanged(e,i,this,Qr);break;case"ripple":n(this,function(){return o._updateRipple()});break;case"direction":n(this,function(){return o._updateDirection(i)});break;case"position":n(this,function(){return o._updatePosition()})}}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick,!1)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick,!1)}},{key:"_onClick",value:function(t){return this.onClick?(this.onClick.apply(this),Promise.resolve()):!this.disabled&&this.visible?this.toggleItems():void 0}},{key:"_show",value:function(){return this.inline?Promise.resolve():this.show()}},{key:"_hide",value:function(){var t=this;return new Promise(function(e){t.inline?e():setImmediate(function(){return t.hide().then(e)})})}},{key:"_updateRipple",value:function(){this._fab&&(this.hasAttribute("ripple")?this._fab.setAttribute("ripple",""):this._fab.removeAttribute("ripple"))}},{key:"_updateDirection",value:function(t){for(var e=this.items,n=0;n<e.length;n++)d(e[n],{transitionDelay:25*n+"ms",bottom:"auto",right:"auto",top:"auto",left:"auto"});switch(t){case"up":for(var i=0;i<e.length;i++)e[i].style.bottom=72+56*i+"px",e[i].style.right="8px";break;case"down":for(var o=0;o<e.length;o++)e[o].style.top=72+56*o+"px",e[o].style.left="8px";break;case"left":for(var r=0;r<e.length;r++)e[r].style.top="8px",e[r].style.right=72+56*r+"px";break;case"right":for(var a=0;a<e.length;a++)e[a].style.top="8px",e[a].style.left=72+56*a+"px";break;default:Q.throw("Argument must be one of up, down, left or right.")}}},{key:"_updatePosition",value:function(){var t=this.getAttribute("position");switch(this.classList.remove("fab--top__left","fab--bottom__right","fab--bottom__left","fab--top__right","fab--top__center","fab--bottom__center"),t){case"top right":case"right top":this.classList.add("fab--top__right");break;case"top left":case"left top":this.classList.add("fab--top__left");break;case"bottom right":case"right bottom":this.classList.add("fab--bottom__right");break;case"bottom left":case"left bottom":this.classList.add("fab--bottom__left");break;case"center top":case"top center":this.classList.add("fab--top__center");break;case"center bottom":case"bottom center":this.classList.add("fab--bottom__center")}}},{key:"_getTranslate",value:function(){return(this.getAttribute("position")||"").indexOf("bottom")>=0?"translate3d(0px, -"+(Q.globals.fabOffset||0)+"px, 0px) ":""}},{key:"show",value:function(){return this._fab.show(),d(this,{transform:this._getTranslate}),Promise.resolve()}},{key:"hide",value:function(){var t=this;return this.hideItems().then(function(){return t._fab.hide()})}},{key:"showItems",value:function(){this.hasAttribute("direction")?this._updateDirection(this.getAttribute("direction")):this._updateDirection("up");var t=0;if(!this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*n;t+=i,d(e[n],{transform:"scale(1)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!0,Q.triggerElementEvent(this,"open")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"hideItems",value:function(){var t=0;if(this._itemShown){for(var e=this.items,n=0;n<e.length;n++){var i=25*(e.length-n);t+=i,d(e[n],{transform:"scale(0)",transitionDelay:i+"ms"})}t+=50,this._itemShown=!1,Q.triggerElementEvent(this,"close")}var o=Q.defer();return setTimeout(o.resolve,t),o.promise}},{key:"isOpen",value:function(){return this._itemShown}},{key:"toggle",value:function(){return this.visible?this.hide():this.show()}},{key:"toggleItems",value:function(){return this.isOpen()?this.hideItems():this.showItems()}},{key:"items",get:function(){return Q.arrayFrom(this.querySelectorAll("ons-speed-dial-item"))}},{key:"_fab",get:function(){return Q.findChild(this,"ons-fab")}},{key:"disabled",set:function(t){return t&&this.hideItems(),Q.arrayFrom(this.children).forEach(function(e){Q.match(e,".fab")&&Q.toggleAttribute(e,"disabled",t)}),Q.toggleAttribute(this,"disabled",t)},get:function(){return this.hasAttribute("disabled")}},{key:"inline",get:function(){return this.hasAttribute("inline")}},{key:"visible",get:function(){return this._fab.visible&&"none"!==this.style.display}}],[{key:"observedAttributes",get:function(){return["class","modifier","ripple","direction","position"]}},{key:"events",get:function(){return["open","close"]}}]),e}();c.SpeedDial=Jr,customElements.define("ons-speed-dial",Jr);var Zr={ready:function(t,e){setImmediate(e)}},ta=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._pageLoader=jt,n(t,function(){Zr.ready(t,function(){var e=t._getPageTarget();e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){Q.match(this.parentNode,"ons-splitter")||Q.throw('"ons-splitter-content" must have "ons-splitter" as parent')}},{key:"_getPageTarget",value:function(){return this._page||this.getAttribute("page")}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}}],[{key:"observedAttributes",get:function(){return[]}},{key:"rewritables",get:function(){return Zr}}]),e}();c.SplitterContent=ta,customElements.define("ons-splitter-content",ta);var ea=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._boundOnClick=t._onClick.bind(t),n(t,function(){t.parentNode._sides.every(function(t){return"split"===t.mode})&&t.setAttribute("style","display: none !important")}),t}return b(e,Pi),g(e,[{key:"_onClick",value:function(t){this.onClick instanceof Function?this.onClick():Q.match(this.parentNode,"ons-splitter")&&this.parentNode._sides.forEach(function(t){return t.close("left").catch(function(){})}),t.stopPropagation()}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"connectedCallback",value:function(){this.addEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!0)}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._boundOnClick),Q.iosMaskScrollFix(this,!1)}}],[{key:"observedAttributes",get:function(){return[]}}]),e}();c.SplitterMask=ea,customElements.define("ons-splitter-mask",ea);var na=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"cubic-bezier(.1, .7, .1, 1)":n,o=t.duration,r=void 0===o?.3:o,a=t.delay,s=void 0===a?0:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,duration:r,delay:s}))}return b(e,Ti),g(e,[{key:"updateOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Q.extend(this,{timing:this.timing,duration:this.duration,delay:this.delay},t)}},{key:"activate",value:function(t){var e=this,i=t.parentNode;n(i,function(){e._side=t,e._oppositeSide=i.right!==t&&i.right||i.left!==t&&i.left,e._content=i.content,e._mask=i.mask})}},{key:"deactivate",value:function(){this.clearTransition(),this._mask&&this.clearMask(),this._content=this._side=this._oppositeSide=this._mask=null}},{key:"clearTransition",value:function(){var t=this;"side mask content".split(/\s+/).forEach(function(e){return t["_"+e]&&d.clear(t["_"+e],"transform transition")})}},{key:"clearMask",value:function(){this._oppositeSide&&"split"!==this._oppositeSide.mode&&this._oppositeSide.isOpen||(this._mask.style.opacity="",this._mask.style.display="none")}},{key:"translate",value:function(t){}},{key:"open",value:function(t){t()}},{key:"close",value:function(t){t()}},{key:"minus",get:function(){return"right"===this._side.side?"-":""}}]),e}(),ia=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"translate",value:function(t){this._mask.style.display="block",nt(this._side).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d("+this.minus+"100%, 0, 0)"},this.def).queue(function(e){e(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}).queue({opacity:"1"},{duration:this.duration,timing:"linear"}))}},{key:"close",value:function(t){nt.runAll(nt(this._side).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(e){t&&t(),e()}),nt(this._mask).wait(this.delay).queue({opacity:"0"},{duration:this.duration,timing:"linear"}).queue({display:"none"}))}}]),e}(),oa={default:ia,overlay:ia,push:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._side,this._content];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"translate",value:function(t){this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}).play()}},{key:"open",value:function(t){var e=this,n=this._side.offsetWidth;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d("+(this.minus+n)+"px, 0, 0)"},this.def).queue(function(n){e._slidingElements=null,n(),t&&t()}),nt(this._mask).wait(this.delay).queue({display:"block"}))}},{key:"close",value:function(t){var n=this;this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def).queue(function(i){n._slidingElements=null,v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"clearTransition",n).call(n),t&&t(),i()}),nt(this._mask).wait(this.delay).queue({display:"none"}))}}]),e}(),reveal:function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,na),g(e,[{key:"_getSlidingElements",value:function(){var t=[this._content,this._mask];return this._oppositeSide&&"split"===this._oppositeSide.mode&&t.push(this._oppositeSide),t}},{key:"activate",value:function(t){v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"activate",this).call(this,t),"collapse"===t.mode&&this._setStyles(t)}},{key:"deactivate",value:function(){this._side&&this._unsetStyles(this._side),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deactivate",this).call(this)}},{key:"_setStyles",value:function(t){d(t,{left:"right"===t.side?"auto":0,right:"right"===t.side?0:"auto",zIndex:0,backgroundColor:"black",transform:this._generateBehindPageStyle(0).container.transform,display:"none"});var e=t.parentElement;n(e,function(){return e.content&&d(e.content,{boxShadow:"0 0 12px 0 rgba(0, 0, 0, 0.2)"})})}},{key:"_unsetStyles",value:function(t){d.clear(t,"left right zIndex backgroundColor display"),t._content&&(t._content.style.opacity=""),this._oppositeSide&&"split"!==this._oppositeSide.mode||t.parentElement.content&&d.clear(t.parentElement.content,"boxShadow")}},{key:"_generateBehindPageStyle",value:function(t){var e=this.maxWidth,n=(t-e)/e*10;return{content:{opacity:1+(n=isNaN(n)?0:Math.max(Math.min(n,0),-10))/100},container:{transform:"translate3d("+(this.minus?-1:1)*n+"%, 0, 0)"}}}},{key:"translate",value:function(t){this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var e=this._generateBehindPageStyle(Math.min(t,this.maxWidth));this._slidingElements||(this._slidingElements=this._getSlidingElements()),this._mask.style.display="block",nt.runAll(nt(this._slidingElements).queue({transform:"translate3d("+(this.minus+t)+"px, 0, 0)"}),nt(this._side._content).queue(e.content),nt(this._side).queue(e.container))}},{key:"open",value:function(t){var e=this;this._side.style.display="",this._side.style.zIndex=1,this.maxWidth=this.maxWidth||this._getMaxWidth();var n=this._generateBehindPageStyle(this.maxWidth);this._slidingElements=this._getSlidingElements(),setTimeout(function(){nt.runAll(nt(e._slidingElements).wait(e.delay).queue({transform:"translate3d("+(e.minus+e.maxWidth)+"px, 0, 0)"},e.def),nt(e._mask).wait(e.delay).queue({display:"block"}),nt(e._side._content).wait(e.delay).queue(n.content,e.def),nt(e._side).wait(e.delay).queue(n.container,e.def).queue(function(n){e._slidingElements=null,n(),t&&t()}))},1e3/60)}},{key:"close",value:function(t){var e=this,n=this._generateBehindPageStyle(0);this._slidingElements=this._getSlidingElements(),nt.runAll(nt(this._slidingElements).wait(this.delay).queue({transform:"translate3d(0, 0, 0)"},this.def),nt(this._mask).wait(this.delay).queue({display:"none"}),nt(this._side._content).wait(this.delay).queue(n.content,this.def),nt(this._side).wait(this.delay).queue(n.container,this.def).queue(function(n){e._slidingElements=null,e._side.style.zIndex=0,e._side.style.display="none",e._side._content.style.opacity="",t&&t(),n()}))}},{key:"_getMaxWidth",value:function(){return this._side.offsetWidth}}]),e}()},ra=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._onModeChange=t._onModeChange.bind(t),n(t,function(){!t.mask&&t.appendChild(document.createElement("ons-splitter-mask")),t._layout()}),t}return b(e,Pi),g(e,[{key:"_getSide",value:function(t){return Q.findChild(this,function(e){return Q.match(e,"ons-splitter-side")&&e.getAttribute("side")===t})}},{key:"_onDeviceBackButton",value:function(t){this._sides.some(function(t){return!!t.isOpen&&t.close()})||t.callParentHandler()}},{key:"_onModeChange",value:function(t){var e=this;t.target.parentNode&&n(this,function(){e._layout()})}},{key:"_layout",value:function(){var t=this;this._sides.forEach(function(e){t.content&&(t.content.style[e.side]="split"===e.mode?e.style.width:0)})}},{key:"left",get:function(){return this._getSide("left")}},{key:"right",get:function(){return this._getSide("right")}},{key:"side",get:function(){return Q.findChild(this,"ons-splitter-side")}},{key:"_sides",get:function(){return[this.left,this.right].filter(function(t){return t})}},{key:"content",get:function(){return Q.findChild(this,"ons-splitter-content")}},{key:"topPage",get:function(){return this.content._content}},{key:"mask",get:function(){return Q.findChild(this,"ons-splitter-mask")}},{key:"onDeviceBackButton",get:function(){return this._backButtonHandler},set:function(t){this._backButtonHandler&&this._backButtonHandler.destroy(),this._backButtonHandler=R.createHandler(this,t)}}]),g(e,[{key:"connectedCallback",value:function(){this.onDeviceBackButton=this._onDeviceBackButton.bind(this),this.addEventListener("modechange",this._onModeChange,!1)}},{key:"disconnectedCallback",value:function(){this._backButtonHandler.destroy(),this._backButtonHandler=null,this.removeEventListener("modechange",this._onModeChange,!1)}},{key:"attributeChangedCallback",value:function(t,e,n){}},{key:"_show",value:function(){Q.propagateAction(this,"_show")}},{key:"_hide",value:function(){Q.propagateAction(this,"_hide")}},{key:"_destroy",value:function(){Q.propagateAction(this,"_destroy"),this.remove()}}],[{key:"registerAnimator",value:function(t,e){e instanceof SplitterAnimator||Q.throwAnimator("Splitter"),oa[t]=e}},{key:"SplitterAnimator",get:function(){return SplitterAnimator}},{key:"animators",get:function(){return oa}}]),e}();c.Splitter=ra,customElements.define("ons-splitter",ra);var aa="closed",sa={ready:function(t,e){setImmediate(e)}},la=function(){function t(e,n){p(this,t),this._element=e,this._onChange=this._onChange.bind(this),n&&this.changeTarget(n)}return g(t,[{key:"changeTarget",value:function(t){this.disable(),this._target=t,t&&(this._orientation=-1!==["portrait","landscape"].indexOf(t),this.activate())}},{key:"_match",value:function(t){return this._orientation?this._target===(t.isPortrait?"portrait":"landscape"):t.matches}},{key:"_onChange",value:function(t){this._element._updateMode(this._match(t)?"collapse":"split")}},{key:"activate",value:function(){this._orientation?(Ot.on("change",this._onChange),this._onChange({isPortrait:Ot.isPortrait()})):(this._queryResult=window.matchMedia(this._target),this._queryResult.addListener(this._onChange),this._onChange(this._queryResult))}},{key:"disable",value:function(){this._orientation?Ot.off("change",this._onChange):this._queryResult&&(this._queryResult.removeListener(this._onChange),this._queryResult=null)}}]),t}(),ua=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._page=null,t._state=aa,t._lock=new Nt,t._pageLoader=jt,t._collapseDetection=new la(t),t._animatorFactory=new O({animators:ra.animators,baseClass:na,baseClassName:"SplitterAnimator",defaultAnimation:t.getAttribute("animation")}),n(t,function(){t.attributeChangedCallback("width"),t.hasAttribute("side")||t.setAttribute("side","left"),sa.ready(t,function(){var e=t._page||t.getAttribute("page");e&&t.load(e)})}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;Q.match(this.parentNode,"ons-splitter")||Q.throw("Parent must be an ons-splitter element"),this._swipe=new Qo({element:this,elementHandler:this.parentElement,swipeMax:function(){t._onSwipe&&t._onSwipe(1,t._animationOpt),t.open()},swipeMid:function(e,n){t._onSwipe&&t._onSwipe(e/n),t._animator.translate(e)},swipeMin:function(){t._onSwipe&&t._onSwipe(0,t._animationOpt),t.close()},getThreshold:function(){return Math.max(0,Math.min(1,parseFloat(t.getAttribute("open-threshold"))||.3))},getSide:function(){return t.side},isInitialState:function(){var e=t._state===aa;return t._state="changing",e},ignoreSwipe:function(e,n){var i=t.isOpen,o=Math.max(0,parseInt(t.getAttribute("swipe-target-width"),10)||0);return"split"===t._mode||t._lock.isLocked()||t._isOtherSideOpen()||!function(e){return"left"===t.side?"left"===e&&i||"right"===e&&!i:"left"===e&&!i||"right"===e&&i}(e.gesture.direction)||!i&&0!==o&&n>o}}),this.attributeChangedCallback("swipeable"),n(this,function(){t.constructor.observedAttributes.forEach(function(e){return t.attributeChangedCallback(e,null,t.getAttribute(e))})})}},{key:"disconnectedCallback",value:function(){this._swipe&&this._swipe.dispose(),this._animator=this._animationOpt=this._swipe=null}},{key:"attributeChangedCallback",value:function(t,e,n){switch(t){case"swipeable":this._swipe&&this._swipe.update();break;case"width":n=this.getAttribute("width"),this.style.width=/^\d+(px|%)$/.test(n)?n:"80%";break;default:this[Q.camelize("_update-"+t)](n)}}},{key:"_emitEvent",value:function(t){if("pre"!==t.slice(0,3))return Q.triggerElementEvent(this,t,{side:this});var e=!1;return Q.triggerElementEvent(this,t,{side:this,cancel:function(){return e=!0}}),e}},{key:"_isOtherSideOpen",value:function(){var t=this;return!!Q.findChild(this.parentElement,function(e){return e instanceof t.constructor&&e!==t&&"collapse"===e._mode&&e.isOpen})}},{key:"_updateCollapse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("collapse");return null===t||"split"===t?(this._collapseDetection.disable(),this._updateMode("split")):""===t||"collapse"===t?(this._collapseDetection.disable(),this._updateMode("collapse")):void this._collapseDetection.changeTarget(t)}},{key:"_updateMode",value:function(t){t!==this._mode&&(this._mode=t,this.setAttribute("mode",t),"split"===t?(this._animator&&this._animator.deactivate(),this._state=aa):(this._animator&&this._animator.activate(this),"open"===this._state&&this._animator.open()),Q.triggerElementEvent(this,"modechange",{side:this,mode:t}))}},{key:"_updateAnimation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation");this.parentNode&&(this._animator&&this._animator.deactivate(),this._animator=this._animatorFactory.newAnimator({animation:t}),this._animator.activate(this),this._animationOpt={timing:this._animator.duration,duration:this._animator.duration})}},{key:"_updateAnimationOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("animation-options");this._animator.updateOptions(O.parseAnimationOptionsString(t))}},{key:"open",value:function(t){return this.toggle(t,!0)}},{key:"close",value:function(t){return this.toggle(t,!1)}},{key:"toggle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],i="boolean"==typeof n?n:!this.isOpen,o=i?"open":"close",r=i?"open":aa;if("split"===this._mode)return Promise.resolve(!1);if(this._state===r)return Promise.resolve(this);if(this._lock.isLocked())return Promise.reject("Another splitter-side action is already running.");if(i&&this._isOtherSideOpen())return Promise.reject("Another menu is already open.");if(this._emitEvent("pre"+o))return Promise.reject("Canceled in pre"+o+" event.");var a=this._lock.lock();return this._state="changing",new Promise(function(n){t._animator[o](function(){Q.iosPageScrollFix(i),t._state=r,a(),t._emitEvent("post"+o),e.callback instanceof Function&&e.callback(t),n(t)})})}},{key:"load",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._page=t;var i=n.callback||function(){};return new Promise(function(n){var o=e._content||null;e._pageLoader.load({page:t,parent:e},function(t){o&&(e._pageLoader.unload(o),o=null),setImmediate(function(){return e._show()}),i(t),n(t)})})}},{key:"_show",value:function(){this._content&&this._content._show()}},{key:"_hide",value:function(){this._content&&this._content._hide()}},{key:"_destroy",value:function(){this._content&&this._pageLoader.unload(this._content),this.remove()}},{key:"side",get:function(){return"right"===this.getAttribute("side")?"right":"left"}},{key:"page",get:function(){return this._page},set:function(t){this._page=t}},{key:"_content",get:function(){return this.children[0]}},{key:"pageLoader",get:function(){return this._pageLoader},set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t}},{key:"mode",get:function(){return this._mode}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}},{key:"isOpen",get:function(){return"collapse"===this._mode&&this._state!==aa}}],[{key:"observedAttributes",get:function(){return["animation","width","collapse","swipeable","animation-options"]}},{key:"events",get:function(){return["preopen","postopen","preclose","postclose","modechange"]}},{key:"rewritables",get:function(){return sa}}]),e}();c.SplitterSide=ua,customElements.define("ons-splitter-side",ua);var ca={"":"switch--*",".switch__input":"switch--*__input",".switch__handle":"switch--*__handle",".switch__toggle":"switch--*__toggle"},ha={ios:[1,21],material:[0,16]},da=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n(t,function(){t.attributeChangedCallback("modifier",null,t.getAttribute("modifier"))}),t._onChange=t._onChange.bind(t),t._onRelease=t._onRelease.bind(t),t._lastTimeStamp=0,t}return b(e,Ho),g(e,[{key:"_getPosition",value:function(t){var e=this._locations;return Math.min(e[1],Math.max(e[0],this._startX+t.gesture.deltaX))}},{key:"_emitChangeEvent",value:function(){Q.triggerElementEvent(this,"change",{value:this.checked,switch:this,isInteractive:!0})}},{key:"_onChange",value:function(t){t&&t.stopPropagation&&t.stopPropagation(),this._emitChangeEvent()}},{key:"_onClick",value:function(t){(t.target.classList.contains(this.defaultElementClass+"__touch")||t.timeStamp-this._lastTimeStamp<50)&&t.preventDefault(),this._lastTimeStamp=t.timeStamp}},{key:"_onHold",value:function(t){this.disabled||(B.addModifier(this,"active"),document.addEventListener("release",this._onRelease))}},{key:"_onDragStart",value:function(t){this.disabled||-1===["left","right"].indexOf(t.gesture.direction)?B.removeModifier(this,"active"):(t.consumed=!0,B.addModifier(this,"active"),this._startX=this._locations[this.checked?1:0],this.addEventListener("drag",this._onDrag),document.addEventListener("release",this._onRelease))}},{key:"_onDrag",value:function(t){t.stopPropagation(),this._handle.style.left=this._getPosition(t)+"px"}},{key:"_onRelease",value:function(t){var e=this._locations,n=this._getPosition(t),i=this.checked;this.checked=n>=(e[0]+e[1])/2,this.checked!==i&&this._emitChangeEvent(),this.removeEventListener("drag",this._onDrag),document.removeEventListener("release",this._onRelease),this._handle.style.left="",B.removeModifier(this,"active")}},{key:"click",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.disabled||(this.checked=!this.checked,this._emitChangeEvent(),this._lastTimeStamp=t.timeStamp||0)}},{key:"connectedCallback",value:function(){var t=this;n(this,function(){t._input.addEventListener("change",t._onChange)}),this.addEventListener("dragstart",this._onDragStart),this.addEventListener("hold",this._onHold),this.addEventListener("tap",this.click),this.addEventListener("click",this._onClick),this._gestureDetector=new st(this,{dragMinDistance:1,holdTimeout:251,passive:!0})}},{key:"disconnectedCallback",value:function(){var t=this;n(this,function(){t._input.removeEventListener("change",t._onChange)}),this.removeEventListener("dragstart",this._onDragStart),this.removeEventListener("hold",this._onHold),this.removeEventListener("tap",this.click),this.removeEventListener("click",this._onClick),this._gestureDetector&&this._gestureDetector.dispose()}},{key:"attributeChangedCallback",value:function(t,n,i){if("modifier"===t){var o=-1!==(i||"").indexOf("material");this._locations=ha[o?"material":"ios"]}v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attributeChangedCallback",this).call(this,t,n,i)}},{key:"_scheme",get:function(){return ca}},{key:"_defaultClassName",get:function(){return"switch"}},{key:"_template",get:function(){return'\n      <input type="'+this.type+'" class="'+this._defaultClassName+'__input">\n      <div class="'+this._defaultClassName+'__toggle">\n        <div class="'+this._defaultClassName+'__handle">\n          <div class="'+this._defaultClassName+'__touch"></div>\n        </div>\n      </div>\n    '}},{key:"type",get:function(){return"checkbox"}},{key:"_handle",get:function(){return this.querySelector("."+this._defaultClassName+"__handle")}},{key:"checkbox",get:function(){return this._input}}],[{key:"observedAttributes",get:function(){return[].concat(w(v(e.__proto__||Object.getPrototypeOf(e),"observedAttributes",this)),["modifier"])}}]),e}();c.Switch=da,customElements.define("ons-switch",da);var fa={".tabbar__content":"tabbar--*__content",".tabbar__border":"tabbar--*__border",".tabbar":"tabbar--*"},pa={ready:function(t,e){e()}},ga=function(t,e,n){return(1-n)*t+n*e},ma=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._loadInactive=Q.defer(),n(t,function(){return t._compile()}),t}return b(e,Pi),g(e,[{key:"connectedCallback",value:function(){var t=this;this._swiper||(this._swiper=new ro({getElement:function(){return t._contentElement},getInitialIndex:function(){return t.getAttribute("activeIndex")||t.getAttribute("active-index")},getAutoScrollRatio:this._getAutoScrollRatio.bind(this),getBubbleWidth:function(){return parseInt(t.getAttribute("ignore-edge-width")||25,10)},isAutoScrollable:function(){return!0},preChangeHook:this._onPreChange.bind(this),postChangeHook:this._onPostChange.bind(this),refreshHook:this._onRefresh.bind(this),scrollHook:this._onScroll.bind(this)}),n(this,function(){t._tabbarBorder=Q.findChild(t._tabbarElement,".tabbar__border"),t._swiper.init({swipeable:t.hasAttribute("swipeable")})})),n(this,function(){t._updatePosition(),Q.findParent(t,"ons-page",function(t){return t===document.body})||t._show()})}},{key:"disconnectedCallback",value:function(){this._swiper&&this._swiper.initialized&&(this._swiper.dispose(),this._swiper=null,this._tabbarBorder=null,this._tabsRect=null)}},{key:"_normalizeEvent",value:function(t){return _({},t,{index:t.activeIndex,tabItem:this.tabs[t.activeIndex]})}},{key:"_onPostChange",value:function(t){t=this._normalizeEvent(t),Q.triggerElementEvent(this,"postchange",t);var e=t.tabItem.pageElement;e&&e._show()}},{key:"_onPreChange",value:function(t){if(t=this._normalizeEvent(t),t.cancel=function(){return t.canceled=!0},Q.triggerElementEvent(this,"prechange",t),!t.canceled){var e=t,n=e.activeIndex,i=e.lastActiveIndex,o=this.tabs;if(o[n].setActive(!0),i>=0){var r=o[i];r.setActive(!1),r.pageElement&&r.pageElement._hide()}}return t.canceled}},{key:"_onScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._tabbarBorder)if(this._tabbarBorder.style.transition="all "+(e.duration||0)+"s "+(e.timing||""),this._autogrow&&this._tabsRect.length>0){var n=Math.floor(t),i=Math.ceil(t),o=t%1;this._tabbarBorder.style.width=ga(this._tabsRect[n].width,this._tabsRect[i].width,o)+"px",this._tabbarBorder.style.transform="translate3d("+ga(this._tabsRect[n].left,this._tabsRect[i].left,o)+"px, 0, 0)"}else this._tabbarBorder.style.transform="translate3d("+100*t+"%, 0, 0)";this._onSwipe&&this._onSwipe(t,e)}},{key:"_onRefresh",value:function(){if(this._autogrow=Q.hasModifier(this,"autogrow"),this._tabsRect=this.tabs.map(function(t){return t.getBoundingClientRect()}),this._tabbarBorder){this._tabbarBorder.style.display=this.hasAttribute("tab-border")||Q.hasModifier(this,"material")?"block":"none";var t=this.getActiveTabIndex();this._tabsRect.length>0&&t>=0&&(this._tabbarBorder.style.width=this._tabsRect[t].width+"px")}}},{key:"_getAutoScrollRatio",value:function(t,e,n){var i=n/300*(t?-1:1);return Math.min(1,Math.max(0,.6+e*i))}},{key:"_compile",value:function(){N.prepare(this);var t=this._contentElement||Q.create(".tabbar__content");t.classList.add("ons-tabbar__content");var e=this._tabbarElement||Q.create(".tabbar");if(e.classList.add("ons-tabbar__footer"),!e.parentNode)for(;this.firstChild;)e.appendChild(this.firstChild);var n=Number(this.getAttribute("activeIndex"));e.children.length>n&&!Q.findChild(e,"[active]")&&e.children[n].setAttribute("active",""),this._tabbarBorder=Q.findChild(e,".tabbar__border")||Q.create(".tabbar__border"),e.appendChild(this._tabbarBorder),e.classList.add("ons-swiper-tabbar"),!t.children[0]&&t.appendChild(document.createElement("div")),!t.children[1]&&t.appendChild(document.createElement("div")),t.appendChild=t.appendChild.bind(t.children[0]),t.insertBefore=t.insertBefore.bind(t.children[0]),this.appendChild(t),this.appendChild(e),B.initModifier(this,fa)}},{key:"_updatePosition",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getAttribute("position"),i=this._top="top"===e||"auto"===e&&Q.hasModifier(this,"material"),o=i?Q.addModifier:Q.removeModifier;o(this,"top");var r=Q.findParent(this,"ons-page");r&&n(r,function(){var e=0;r.children[0]&&Q.match(r.children[0],"ons-toolbar")&&(o(r.children[0],"noshadow"),e=1);var n=r._getContentElement(),a=window.getComputedStyle(r._getContentElement(),null);t.style.top=i?parseInt(a.getPropertyValue("padding-top"),10)-e+"px":"",n.style.top=a.top,n.style.top=""}),P.autoStatusBarFill(function(){var e=Q.findParent(t,function(t){return t.hasAttribute("status-bar-fill")});Q.toggleAttribute(t,"status-bar-fill",i&&!e)})}},{key:"setActiveTab",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.getActiveTabIndex(),o=this.tabs[i],r=this.tabs[t];if(!r)return Promise.reject("Specified index does not match any tab.");if(t===i)return Q.triggerElementEvent(this,"reactive",{index:t,activeIndex:t,tabItem:r}),Promise.resolve(r.pageElement);var a=r.pageElement;return(a?Promise.resolve(a):r.loaded).then(function(i){return e._swiper.setActiveIndex(t,_({reject:!0},n,{animation:o&&i?n.animation||e.getAttribute("animation"):"none",animationOptions:Q.extend({duration:.3,timing:"cubic-bezier(.4, .7, .5, 1)"},e.hasAttribute("animation-options")?Q.animationOptionsParse(e.getAttribute("animation-options")):{},n.animationOptions||{})})).then(function(){return n.callback instanceof Function&&n.callback(i),i})})}},{key:"setTabbarVisibility",value:function(t){var e=this;n(this,function(){e._contentElement.style[e._top?"top":"bottom"]=t?"":"0px",e._tabbarElement.style.display=t?"":"none",t&&e._onRefresh()})}},{key:"show",value:function(){this.setTabbarVisibility(!0)}},{key:"hide",value:function(){this.setTabbarVisibility(!1)}},{key:"getActiveTabIndex",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tabs,e=0;e<t.length;e++)if(t[e]&&"ONS-TAB"===t[e].tagName&&t[e].isActive())return e;return-1}},{key:"_show",value:function(){var t=this;this._swiper.show(),setImmediate(function(){var e=t.tabs,n=t.getActiveTabIndex(e);t._loadInactive.resolve(),e.length>0&&n>=0&&e[n].loaded.then(function(t){return t&&setImmediate(function(){return t._show()})})})}},{key:"_hide",value:function(){this._swiper.hide();var t=this.topPage;t&&t._hide()}},{key:"_destroy",value:function(){this.tabs.forEach(function(t){return t.remove()}),this.remove()}},{key:"attributeChangedCallback",value:function(t,e,n){if("modifier"===t){B.onModifierChanged(e,n,this,fa);var i=function(t){return/(^|\s+)top($|\s+)/i.test(t)};i(e)!==i(n)&&this._updatePosition()}else"position"===t?Q.isAttached(this)&&this._updatePosition():"swipeable"===t?this._swiper&&this._swiper.updateSwipeable(this.hasAttribute("swipeable")):"hide-tabs"===t&&this.setTabbarVisibility(!this.hasAttribute("hide-tabs")||"false"===n)}},{key:"_tabbarElement",get:function(){return Q.findChild(this,".tabbar")}},{key:"_contentElement",get:function(){return Q.findChild(this,".tabbar__content")}},{key:"_targetElement",get:function(){var t=this._contentElement;return t&&t.children[0]||null}},{key:"topPage",get:function(){var t=this.tabs,e=this.getActiveTabIndex();return t[e]?t[e].pageElement||this.pages[0]||null:null}},{key:"pages",get:function(){return Q.arrayFrom(this._targetElement.children)}},{key:"tabs",get:function(){return Array.prototype.filter.call(this._tabbarElement.children,function(t){return"ONS-TAB"===t.tagName})}},{key:"visible",get:function(){return"none"!==this._tabbarElement.style.display}},{key:"swipeable",get:function(){return this.hasAttribute("swipeable")},set:function(t){return Q.toggleAttribute(this,"swipeable",t)}},{key:"onSwipe",get:function(){return this._onSwipe},set:function(t){!t||t instanceof Function||Q.throw('"onSwipe" must be a function'),this._onSwipe=t}}],[{key:"observedAttributes",get:function(){return["modifier","position","swipeable","tab-border","hide-tabs"]}},{key:"rewritables",get:function(){return pa}},{key:"events",get:function(){return["prechange","postchange","reactive"]}}]),e}();c.Tabbar=ma,customElements.define("ons-tabbar",ma);var _a={"":"tabbar--*__item",".tabbar__button":"tabbar--*__button"},va=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return["label","icon","badge"].some(t.hasAttribute.bind(t))?t._compile():n(t,function(){return t._compile()}),t._pageLoader=jt,t._onClick=t._onClick.bind(t),t}return b(e,Pi),g(e,[{key:"_compile",value:function(){if(N.prepare(this),this.classList.add("tabbar__item"),!this._button){for(var t=Q.create("button.tabbar__button");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.create("input",{display:"none"});e.type="radio",this.appendChild(e),this.appendChild(t),this._updateButtonContent(),B.initModifier(this,_a),this._updateRipple()}}},{key:"_updateRipple",value:function(){this._button&&Q.updateRipple(this._button,this.hasAttribute("ripple"))}},{key:"_updateButtonContent",value:function(){var t=this,e=this._button,n=this._icon;if(this.hasAttribute("icon")){var i=(n=n||Q.createElement('<div class="tabbar__icon"><ons-icon></ons-icon></div>')).children[0],o=function(e){return function(){return i.attributeChangedCallback("icon",e,t.getAttribute("icon"))}}(i.getAttribute("icon"));i.setAttribute("icon",this.getAttribute("icon")),n.parentElement!==e&&e.insertBefore(n,e.firstChild),i.attributeChangedCallback instanceof Function?o():setImmediate(function(){return i.attributeChangedCallback instanceof Function&&o()})}else n&&n.remove();["label","badge"].forEach(function(n,i){var o=t.querySelector(".tabbar__"+n);t.hasAttribute(n)?((o=o||Q.create(".tabbar__"+n+("badge"===n?" notification":""))).textContent=t.getAttribute(n),o.parentElement!==e&&e.appendChild(o)):o&&o.remove()})}},{key:"_onClick",value:function(){this.onClick instanceof Function?this.onClick():this._tabbar.setActiveTab(this.index,{reject:!1})}},{key:"setActive",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._input.checked=t,this.classList.toggle("active",t),Q.toggleAttribute(this,"active",t),this.hasAttribute("icon")&&this.hasAttribute("active-icon")&&this._icon.children[0].setAttribute("icon",this.getAttribute(t?"active-icon":"icon"))}},{key:"_loadPageElement",value:function(t,e){var n=this;return this._hasLoaded=!0,new Promise(function(i){n._pageLoader.load({parent:t,page:e},function(e){t.replaceChild(e,t.children[n.index]),n._loadedPage=e,i(e)})})}},{key:"isActive",value:function(){return this.classList.contains("active")}},{key:"disconnectedCallback",value:function(){this.removeEventListener("click",this._onClick,!1),this._loadedPage&&(this._pageLoader.unload(this._loadedPage),this._loadedPage=null,this._hasLoaded=!1,this.loaded=null)}},{key:"connectedCallback",value:function(){var t=this;if(this.addEventListener("click",this._onClick,!1),Q.isAttached(this)&&!this.loaded){var e=Q.defer();this.loaded=e.promise,n(this,function(){var n=t.index,i=t._tabbar;i||Q.throw("Tab elements must be children of Tabbar"),i.hasAttribute("modifier")&&Q.addModifier(t,i.getAttribute("modifier")),t._hasLoaded||(t.hasAttribute("active")&&(t.setActive(!0),i.setAttribute("activeIndex",n)),n===i.tabs.length-1&&(i._onRefresh(),setImmediate(function(){return i._onRefresh()})),ma.rewritables.ready(i,function(){var o=t.page||t.getAttribute("page");if(!t.pageElement&&o){var r=i._targetElement,a=Q.create("div",{height:"100%",width:"100%",visibility:"hidden"});r.insertBefore(a,r.children[n]);var s=function(){return t._loadPageElement(r,o).then(e.resolve)};return t.isActive()?s():i._loadInactive.promise.then(s)}return e.resolve(t.pageElement)}))})}}},{key:"attributeChangedCallback",value:function(t,e,i){var o=this;switch(t){case"class":Q.restoreClass(this,"tabbar__item",_a);break;case"modifier":n(this,function(){return B.onModifierChanged(e,i,o,_a)});break;case"ripple":n(this,function(){return o._updateRipple()});break;case"icon":case"label":case"badge":n(this,function(){return o._updateButtonContent()});break;case"page":this.page=i||""}}},{key:"pageLoader",set:function(t){t instanceof Bt||Q.throwPageLoader(),this._pageLoader=t},get:function(){return this._pageLoader}},{key:"_input",get:function(){return Q.findChild(this,"input")}},{key:"_button",get:function(){return Q.findChild(this,".tabbar__button")}},{key:"_icon",get:function(){return this.querySelector(".tabbar__icon")}},{key:"_tabbar",get:function(){return Q.findParent(this,"ons-tabbar")}},{key:"index",get:function(){return Array.prototype.indexOf.call(this.parentElement.children,this)}},{key:"pageElement",get:function(){if(this._loadedPage)return this._loadedPage;var t=this._tabbar;return t.pages.length===t.tabs.length?t.pages[this.index]:null}}],[{key:"observedAttributes",get:function(){return["modifier","ripple","icon","label","page","badge","class"]}}]),e}();c.Tab=va,customElements.define("ons-tab",va);var ba=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.2:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,Ti),g(e,[{key:"show",value:function(t,e){e()}},{key:"hide",value:function(t,e){e()}}]),e}(),ya=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"linear":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.3:a;return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}))}return b(e,ba),g(e,[{key:"show",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:0},{opacity:1}).queue(function(t){e(),t()}).play()}},{key:"hide",value:function(t,e){e=e||function(){},nt(t,this.def).default({opacity:1},{opacity:0}).queue(function(t){e(),t()}).play()}}]),e}(),ka=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.25:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.messageDelay=.4*l.duration+l.delay,C.isAndroid()?l.ascension=48:Li.isIPhoneXPortraitPatchActive()?l.ascension=98:Li.isIPhoneXLandscapePatchActive()?l.ascension=85:l.ascension=64,l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,Q.globals.fabOffset=this.ascension,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.ascension+"px, 0)"},{transform:"translate3d(0, 0, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs()).wait(this.delay).queue({transform:"translate3d(0, -"+this.ascension+"px, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:0},{opacity:1}))}},{key:"hide",value:function(t,e){t=t._toast,Q.globals.fabOffset=0,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)"},{transform:"translate3d(0, "+this.ascension+"px, 0)"}).queue(function(t){e&&e(),t()}),nt(this._getFabs(),this.def).wait(this.delay).queue({transform:"translate3d(0, 0, 0) scale(1)"},this.def),nt(Q.arrayFrom(t.children),this.def).default({opacity:1},{opacity:0}))}},{key:"_getFabs",value:function(){return Q.arrayFrom(document.querySelectorAll("ons-fab[position~=bottom], ons-speed-dial[position~=bottom]")).filter(function(t){return t.visible})}}]),e}(),wa=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return l.bodyHeight=document.body.clientHeight,Li.isIPhoneXPortraitPatchActive()?l.liftAmount="calc(100% + 34px)":Li.isIPhoneXLandscapePatchActive()?l.liftAmount="calc(100% + 21px)":l.liftAmount="100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){t=t._toast,nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.liftAmount+", 0)",opacity:0}).queue(function(t){e&&e(),t()}))}},{key:"_updatePosition",value:function(t){0===parseInt(t.style.top,10)&&(t.style.top=t.style.bottom="")}}]),e}(),Ea=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.timing,i=void 0===n?"ease":n,o=t.delay,r=void 0===o?0:o,a=t.duration,s=void 0===a?.35:a;p(this,e);var l=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{timing:i,delay:r,duration:s}));return Li.isIPhoneXPortraitPatchActive()?l.fallAmount="calc(-100% - 44px)":l.fallAmount="-100%",l}return b(e,ba),g(e,[{key:"show",value:function(t,e){t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0},{transform:"translate3d(0, 0, 0)",opacity:1}).queue(function(t){e&&e(),t()}))}},{key:"hide",value:function(t,e){var n=this;t=t._toast,this._updatePosition(t),nt.runAll(nt(t,this.def).default({transform:"translate3d(0, 0, 0)",opacity:1},{transform:"translate3d(0, "+this.fallAmount+", 0)",opacity:0}).queue(function(i){n._updatePosition(t,!0),e&&e(),i()}))}},{key:"_updatePosition",value:function(t,e){var n=void 0;n=Li.isIPhoneXPortraitPatchActive()?"44px":"0",t.style.top!==n&&(t.style.top=n,t.style.bottom="initial")}}]),e}(),Ca={".toast":"toast--*",".toast__message":"toast--*__message",".toast__button":"toast--*__button"},Aa={default:C.isAndroid()?ka:wa,fade:ya,ascend:ka,lift:wa,fall:Ea,none:ba},Sa=function(t){function e(){p(this,e);var t=k(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._defaultDBB=function(t){return t.callParentHandler()},n(t,function(){return t._compile()}),t}return b(e,Ni),g(e,[{key:"_updateAnimatorFactory",value:function(){return this._toast&&(this._toast.style.top=this._toast.style.bottom=""),new O({animators:Aa,baseClass:ba,baseClassName:"ToastAnimator",defaultAnimation:this.getAttribute("animation")})}},{key:"_compile",value:function(){N.prepare(this),this.style.display="none",this.style.zIndex=1e4;var t=Q.findChild(this,".toast");if(!t)for((t=document.createElement("div")).classList.add("toast");this.childNodes[0];)t.appendChild(this.childNodes[0]);var e=Q.findChild(t,".toast__button");if(e||(e=Q.findChild(t,function(t){return Q.match(t,".button")||Q.match(t,"button")}))&&(e.classList.remove("button"),e.classList.add("toast__button"),t.appendChild(e)),!Q.findChild(t,".toast__message")){var n=Q.findChild(t,".message");if(!n){n=document.createElement("div");for(var i=t.childNodes.length-1;i>=0;i--)t.childNodes[i]!==e&&n.insertBefore(t.childNodes[i],n.firstChild)}n.classList.add("toast__message"),t.insertBefore(n,t.firstChild)}t.parentNode!==this&&this.appendChild(t),B.initModifier(this,this._scheme)}},{key:"_scheme",get:function(){return Ca}},{key:"_toast",get:function(){return Q.findChild(this,".toast")}}],[{key:"registerAnimator",value:function(t,e){e.prototype instanceof ba||Q.throw('"Animator" param must inherit OnsToastElement.ToastAnimator'),Aa[t]=e}},{key:"animators",get:function(){return Aa}},{key:"ToastAnimator",get:function(){return ba}}]),e}();c.Toast=Sa,customElements.define("ons-toast",Sa);var Pa=function(t){function e(){return p(this,e),k(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return b(e,Ri),g(e,[{key:"_scheme",get:function(){return{"":"toolbar-button--*"}}},{key:"_defaultClassName",get:function(){return"toolbar-button"}},{key:"_rippleOpt",get:function(){return[this,void 0,{center:"",size:"contain",background:"transparent"}]}}]),e}();return c.ToolbarButton=Pa,customElements.define("ons-toolbar-button",Pa),function(t){window._onsLoaded&&t._util.warn("Onsen UI is loaded more than once."),window._onsLoaded=!0,window.addEventListener("load",function(){t.fastClick=zt.attach(document.body);var e="touch-action"in document.body.style;t.platform._runOnActualPlatform(function(){t.platform.isAndroid()?t.fastClick.destroy():t.platform.isIOS()&&e&&(t.platform.isIOSSafari()||t.platform.isWKWebView())&&t.fastClick.destroy()})},!1),t.ready(function(){t.enableDeviceBackButtonHandler(),t._defaultDeviceBackButtonHandler=t._internal.dbbDispatcher.createHandler(window.document.body,function(){Object.hasOwnProperty.call(navigator,"app")?navigator.app.exitApp():console.warn("Could not close the app. Is 'cordova.js' included?\nError: 'window.navigator.app' is undefined.")}),document.body._gestureDetector=new t.GestureDetector(document.body,{passive:!0}),t.platform.isWebView()||document.body.addEventListener("keydown",function(e){27===e.keyCode&&t.fireDeviceBackButtonEvent()}),t._setupLoadingPlaceHolders()}),Viewport.setup()}(Rt),window._superSecretOns=Rt,Rt});
/*
 Leaflet 1.0.3, a JS library for interactive maps. http://leafletjs.com
 (c) 2010-2016 Vladimir Agafonkin, (c) 2010-2011 CloudMade
*/
!function(t,e,i){function n(){var e=t.L;o.noConflict=function(){return t.L=e,this},t.L=o}var o={version:"1.0.3"};"object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),"undefined"!=typeof t&&n(),o.Util={extend:function(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++){o=arguments[i];for(e in o)t[e]=o[e]}return t},create:Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}(),bind:function(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}},stamp:function(t){return t._leaflet_id=t._leaflet_id||++o.Util.lastId,t._leaflet_id},lastId:0,throttle:function(t,e,i){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(i,o),o=!1)},s=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(r,e),n=!0)}},wrapNum:function(t,e,i){var n=e[1],o=e[0],s=n-o;return t===n&&i?t:((t-o)%s+s)%s+o},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){t.hasOwnProperty("options")||(t.options=t.options?o.Util.create(t.options):{});for(var i in e)t.options[i]=e[i];return t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&e.indexOf("?")!==-1?"&":"?")+n.join("&")},template:function(t,e){return t.replace(o.Util.templateRe,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},templateRe:/\{ *([\w_\-]+) *\}/g,isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){return t["webkit"+e]||t["moz"+e]||t["ms"+e]}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFrame||e("RequestAnimationFrame")||i,r=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,r){return r&&s===i?void e.call(n):s.call(t,o.bind(e,n))},o.Util.cancelAnimFrame=function(e){e&&r.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,n=o.Util.create(i);n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);return t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),n.options&&(t.options=o.Util.extend(o.Util.create(n.options),t.options)),o.extend(n,t),n._initHooks=[],n.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;t<e;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){return o.extend(this.prototype,t),this},o.Class.mergeOptions=function(t){return o.extend(this.prototype.options,t),this},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this},o.Evented=o.Class.extend({on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=o.Util.splitWords(t);for(var s=0,r=t.length;s<r;s++)this._on(t[s],e,i)}return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=o.Util.splitWords(t);for(var s=0,r=t.length;s<r;s++)this._off(t[s],e,i)}else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var o=this._events[t];o||(o=[],this._events[t]=o),n===this&&(n=i);for(var s={fn:e,ctx:n},r=o,a=0,h=r.length;a<h;a++)if(r[a].fn===e&&r[a].ctx===n)return;r.push(s)},_off:function(t,e,n){var s,r,a;if(this._events&&(s=this._events[t])){if(!e){for(r=0,a=s.length;r<a;r++)s[r].fn=o.Util.falseFn;return void delete this._events[t]}if(n===this&&(n=i),s)for(r=0,a=s.length;r<a;r++){var h=s[r];if(h.ctx===n&&h.fn===e)return h.fn=o.Util.falseFn,this._firingCount&&(this._events[t]=s=s.slice()),void s.splice(r,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=o.Util.extend({},e,{type:t,target:this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var s=o.bind(function(){this.off(t,e,i).off(t,s,i)},this);return this.on(t,e,i).on(t,s,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[o.stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[o.stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,o.extend({layer:t.target},t),!0)}});var s=o.Evented.prototype;s.addEventListener=s.on,s.removeEventListener=s.clearAllEventListeners=s.off,s.addOneTimeEventListener=s.once,s.fireEvent=s.fire,s.hasEventListeners=s.listens,o.Mixin={Events:s},function(){var i=navigator.userAgent.toLowerCase(),n=e.documentElement,s="ActiveXObject"in t,r=i.indexOf("webkit")!==-1,a=i.indexOf("phantom")!==-1,h=i.search("android [23]")!==-1,l=i.indexOf("chrome")!==-1,u=i.indexOf("gecko")!==-1&&!r&&!t.opera&&!s,c=0===navigator.platform.indexOf("Win"),d="undefined"!=typeof orientation||i.indexOf("mobile")!==-1,_=!t.PointerEvent&&t.MSPointerEvent,m=t.PointerEvent||_,p=s&&"transition"in n.style,f="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!h,g="MozPerspective"in n.style,v="OTransition"in n.style,y=!t.L_NO_TOUCH&&(m||"ontouchstart"in t||t.DocumentTouch&&e instanceof t.DocumentTouch);o.Browser={ie:s,ielt9:s&&!e.addEventListener,edge:"msLaunchUri"in navigator&&!("documentMode"in e),webkit:r,gecko:u,android:i.indexOf("android")!==-1,android23:h,chrome:l,safari:!l&&i.indexOf("safari")!==-1,win:c,ie3d:p,webkit3d:f,gecko3d:g,opera12:v,any3d:!t.L_DISABLE_3D&&(p||f||g)&&!v&&!a,mobile:d,mobileWebkit:d&&r,mobileWebkit3d:d&&f,mobileOpera:d&&t.opera,mobileGecko:d&&u,touch:!!y,msPointer:!!_,pointer:!!m,retina:(t.devicePixelRatio||t.screen.deviceXDPI/t.screen.logicalXDPI)>1}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new o.Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new o.Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new o.Point(t.x,t.y):new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>=e.x&&n.x<=i.x,a=s.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,r=s.x>e.x&&n.x<i.x,a=s.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},create:function(t,i,n){var o=e.createElement(t);return o.className=i||"",n&&n.appendChild(o),o},remove:function(t){var e=t.parentNode;e&&e.removeChild(t)},empty:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},toFront:function(t){t.parentNode.appendChild(t)},toBack:function(t){var e=t.parentNode;e.insertBefore(t,e.firstChild)},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil.getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),s=0,r=n.length;s<r;s++)t.classList.add(n[s]);else if(!o.DomUtil.hasClass(t,e)){var a=o.DomUtil.getClass(t);o.DomUtil.setClass(t,(a?a+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil.setClass(t,o.Util.trim((" "+o.DomUtil.getClass(t)+" ").replace(" "+e+" "," ")))},setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&o.DomUtil._setOpacityIE(t,e)},_setOpacityIE:function(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},setTransform:function(t,e,i){var n=e||new o.Point(0,0);t.style[o.DomUtil.TRANSFORM]=(o.Browser.ie3d?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")},setPosition:function(t,e){t._leaflet_pos=e,o.Browser.any3d?o.DomUtil.setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos||new o.Point(0,0)}},function(){o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);var i=o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);if(o.DomUtil.TRANSITION_END="webkitTransition"===i||"OTransition"===i?i+"End":"transitionend","onselectstart"in e)o.DomUtil.disableTextSelection=function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},o.DomUtil.enableTextSelection=function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)};else{var n=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.DomUtil.disableTextSelection=function(){if(n){var t=e.documentElement.style;this._userSelect=t[n],t[n]="none"}},o.DomUtil.enableTextSelection=function(){n&&(e.documentElement.style[n]=this._userSelect,delete this._userSelect)}}o.DomUtil.disableImageDrag=function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},o.DomUtil.enableImageDrag=function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)},o.DomUtil.preventOutline=function(e){for(;e.tabIndex===-1;)e=e.parentNode;e&&e.style&&(o.DomUtil.restoreOutline(),this._outlineElement=e,this._outlineStyle=e.style.outline,e.style.outline="none",o.DomEvent.on(t,"keydown",o.DomUtil.restoreOutline,this))},o.DomUtil.restoreOutline=function(){this._outlineElement&&(this._outlineElement.style.outline=this._outlineStyle,delete this._outlineElement,delete this._outlineStyle,o.DomEvent.off(t,"keydown",o.DomUtil.restoreOutline,this))}}(),o.LatLng=function(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,n!==i&&(this.alt=+n)},o.LatLng.prototype={equals:function(t,e){if(!t)return!1;t=o.latLng(t);var n=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return n<=(e===i?1e-9:e)},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){return o.CRS.Earth.distance(this,o.latLng(t))},wrap:function(){return o.CRS.Earth.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return o.latLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new o.LatLng(this.lat,this.lng,this.alt)}},o.latLng=function(t,e,n){return t instanceof o.LatLng?t:o.Util.isArray(t)&&"object"!=typeof t[0]?3===t.length?new o.LatLng(t[0],t[1],t[2]):2===t.length?new o.LatLng(t[0],t[1]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===i?null:new o.LatLng(t,e,n)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,s=this._northEast;if(t instanceof o.LatLng)e=t,i=t;else{if(!(t instanceof o.LatLngBounds))return t?this.extend(o.latLng(t)||o.latLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||s?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),s.lat=Math.max(i.lat,s.lat),s.lng=Math.max(i.lng,s.lng)):(this._southWest=new o.LatLng(e.lat,e.lng),this._northEast=new o.LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng||"lat"in t?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>=e.lat&&n.lat<=i.lat,a=s.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),r=s.lat>e.lat&&n.lat<i.lat,a=s.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return!!t&&(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast()))},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)},bounds:o.bounds([-180,-90],[180,90])},o.Projection.SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=Math.sin(n*e);return new o.Point(this.R*t.lng*e,this.R*Math.log((1+s)/(1-s))/2)},unproject:function(t){var e=180/Math.PI;return new o.LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return o.bounds([-t,-t],[t,t])}()},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t),n=this.transformation.transform(e.min,i),s=this.transformation.transform(e.max,i);return o.bounds(n,s)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?o.Util.wrapNum(t.lng,this.wrapLng,!0):t.lng,i=this.wrapLat?o.Util.wrapNum(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return o.latLng(i,e,n)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,s=e.lng-i.lng;if(0===n&&0===s)return t;var r=t.getSouthWest(),a=t.getNorthEast(),h=o.latLng({lat:r.lat-n,lng:r.lng-s}),l=o.latLng({lat:a.lat-n,lng:a.lng-s});return new o.LatLngBounds(h,l)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0}),o.CRS.Earth=o.extend({},o.CRS,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,s=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos((e.lng-t.lng)*i);return this.R*Math.acos(Math.min(s,1))}}),o.CRS.EPSG3857=o.extend({},o.CRS.Earth,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:function(){var t=.5/(Math.PI*o.Projection.SphericalMercator.R);return new o.Transformation(t,.5,-t,.5)}()}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS.Earth,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/180,1,-1/180,.5)}),o.Map=o.Evented.extend({options:{crs:o.CRS.EPSG3857,center:i,zoom:i,minZoom:i,maxZoom:i,layers:[],maxBounds:i,renderer:i,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==i&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),o.DomEvent.on(this._proxy,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate,duration:n.duration},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(o.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(o.Browser.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),r=t instanceof o.Point?t:this.latLngToContainerPoint(t),a=r.subtract(s).multiplyBy(1-1/n),h=this.containerPointToLatLng(s.add(a));return this.setView(h,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n));s="number"==typeof e.maxZoom?Math.min(e.maxZoom,s):s;var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),s),h=this.project(t.getNorthEast(),s),l=this.unproject(a.add(h).divideBy(2).add(r),s);return{center:l,zoom:s}},fitBounds:function(t,e){if(t=o.latLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){function s(t){var e=t?-1:1,i=t?v:g,n=v*v-g*g+e*L*L*y*y,o=2*i*L*y,s=n/o,r=Math.sqrt(s*s+1)-s,a=r<1e-9?-18:Math.log(r);return a}function r(t){return(Math.exp(t)-Math.exp(-t))/2}function a(t){return(Math.exp(t)+Math.exp(-t))/2}function h(t){return r(t)/a(t)}function l(t){return g*(a(x)/a(x+P*t))}function u(t){return g*(a(x)*h(x+P*t)-r(x))/L}function c(t){return 1-Math.pow(1-t,1.5)}function d(){var i=(Date.now()-w)/T,n=c(i)*b;i<=1?(this._flyToFrame=o.Util.requestAnimFrame(d,this),this._move(this.unproject(_.add(m.subtract(_).multiplyBy(u(n)/y)),f),this.getScaleZoom(g/l(n),f),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(n=n||{},n.animate===!1||!o.Browser.any3d)return this.setView(t,e,n);this._stop();var _=this.project(this.getCenter()),m=this.project(t),p=this.getSize(),f=this._zoom;t=o.latLng(t),e=e===i?f:e;var g=Math.max(p.x,p.y),v=g*this.getZoomScale(f,e),y=m.distanceTo(_)||1,P=1.42,L=P*P,x=s(0),w=Date.now(),b=(s(1)-x)/P,T=n.duration?1e3*n.duration:1e3*b*.8;return this._moveStart(!0),d.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=o.latLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){return this.options.minZoom=t,this._loaded&&this.getZoom()<this.options.minZoom?this.setZoom(t):this},setMaxZoom:function(t){return this.options.maxZoom=t,this._loaded&&this.getZoom()>this.options.maxZoom?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,o.latLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),s=i.divideBy(2).round(),r=n.subtract(s);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o.extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=n.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var a=this.getBoundsZoom(s);this.setView(n,r.maxZoom?Math.min(a,r.maxZoom):a)}var h={latlng:n,bounds:s,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(h[l]=t.coords[l]);this.fire("locationfound",h)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=i,this._containerId=i}o.DomUtil.remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");for(var t in this._layers)this._layers[t].remove();return this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=o.DomUtil.create("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t),i=o.point(i||[0,0]);var n=this.getZoom()||0,s=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),h=t.getSouthEast(),l=this.getSize().subtract(i),u=o.bounds(this.project(h,n),this.project(a,n)).getSize(),c=o.Browser.any3d?this.options.zoomSnap:1,d=Math.min(l.x/u.x,l.y/u.y);return n=this.getScaleZoom(d,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(s,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new o.Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new o.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===i?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=e===i?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=e===i?this._zoom:e;var o=n.zoom(t*n.scale(e));return isNaN(o)?1/0:o},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(o.latLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(o.latLngBounds(t))},distance:function(t,e){return this.options.crs.distance(o.latLng(t),o.latLng(e))},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");o.DomEvent.addListener(e,"scroll",this._onScroll,this),this._containerId=o.Util.stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&o.Browser.any3d,o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(o.Browser.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));
var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,"leaflet-zoom-hide"),o.DomUtil.addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){o.DomUtil.setPosition(this._mapPane,new o.Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t){return t&&this.fire("zoomstart"),this.fire("movestart")},_move:function(t,e,n){e===i&&(e=this._zoom);var o=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(o||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return o.Util.cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){this._targets={},this._targets[o.stamp(this._container)]=this;var i=e?"off":"on";o.DomEvent[i](this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&o.DomEvent[i](t,"resize",this._onResize,this),o.Browser.any3d&&this.options.transform3DLimit&&this[i]("moveend",this._onMoveEnd)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],s="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if(i=this._targets[o.stamp(r)],i&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(s&&!o.DomEvent._isExternalTarget(r,t))break;if(n.push(i),s)break}if(r===this._container)break;r=r.parentNode}return n.length||a||s||!o.DomEvent._isExternalTarget(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e="keypress"===t.type&&13===t.keyCode?"click":t.type;"mousedown"===e&&o.DomUtil.preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=o.Util.extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var s=i[0];"contextmenu"===e&&s.listens(e,!0)&&o.DomEvent.preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var a=s instanceof o.Marker;r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var h=0;h<i.length;h++)if(i[h].fire(e,r,!0),r.originalEvent._stopped||i[h].options.nonBubblingEvents&&o.Util.indexOf(i[h].options.nonBubblingEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)||new o.Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var n=t&&e!==i?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return n.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return o.bounds([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),s=this.getSize().divideBy(2),r=new o.Bounds(n.subtract(s),n.add(s)),a=this._getBoundsOffset(r,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=o.bounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),s=n.min.subtract(t.min),r=n.max.subtract(t.max),a=this._rebound(s.x,-r.x),h=this._rebound(s.y,-r.y);return new o.Point(a,h)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=o.Browser.any3d?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return!((e&&e.animate)!==!0&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=o.DomUtil.create("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var i=o.DomUtil.TRANSFORM,n=t.style[i];o.DomUtil.setTransform(t,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===t.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var e=this.getCenter(),i=this.getZoom();o.DomUtil.setTransform(t,this.project(e,i),this.getZoomScale(i,1))},this)},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),s=this._getCenterOffset(t)._divideBy(1-1/n);return!(i.animate!==!0&&!this.getSize().contains(s))&&(o.Util.requestAnimFrame(function(){this._moveStart(!0)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(o.bind(this._onZoomTransitionEnd,this),250)},_onZoomTransitionEnd:function(){this._animatingZoom&&(o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),o.Util.requestAnimFrame(function(){this._moveEnd(!0)},this))}}),o.map=function(t,e){return new o.Map(t,e)},o.Layer=o.Evented.extend({options:{pane:"overlayPane",nonBubblingEvents:[],attribution:null},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[o.stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[o.stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}}),o.Map.include({addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&o.stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[o.stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=o.stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-(1/0),n=this._getZoomSpan();for(var o in this._zoomBoundLayers){var s=this._zoomBoundLayers[o].options;t=s.minZoom===i?t:Math.min(t,s.minZoom),e=s.maxZoom===i?e:Math.max(e,s.maxZoom)}this._layersMaxZoom=e===-(1/0)?i:e,this._layersMinZoom=t===1/0?i:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===i&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===i&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var r="_leaflet_events";o.DomEvent={on:function(t,e,i,n){if("object"==typeof e)for(var s in e)this._on(t,s,e[s],i);else{e=o.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._on(t,e[r],i,n)}return this},off:function(t,e,i,n){if("object"==typeof e)for(var s in e)this._off(t,s,e[s],i);else{e=o.Util.splitWords(e);for(var r=0,a=e.length;r<a;r++)this._off(t,e[r],i,n)}return this},_on:function(e,i,n,s){var a=i+o.stamp(n)+(s?"_"+o.stamp(s):"");if(e[r]&&e[r][a])return this;var h=function(i){return n.call(s||e,i||t.event)},l=h;return o.Browser.pointer&&0===i.indexOf("touch")?this.addPointerListener(e,i,h,a):!o.Browser.touch||"dblclick"!==i||!this.addDoubleTapListener||o.Browser.pointer&&o.Browser.chrome?"addEventListener"in e?"mousewheel"===i?e.addEventListener("onwheel"in e?"wheel":"mousewheel",h,!1):"mouseenter"===i||"mouseleave"===i?(h=function(i){i=i||t.event,o.DomEvent._isExternalTarget(e,i)&&l(i)},e.addEventListener("mouseenter"===i?"mouseover":"mouseout",h,!1)):("click"===i&&o.Browser.android&&(h=function(t){return o.DomEvent._filterClick(t,l)}),e.addEventListener(i,h,!1)):"attachEvent"in e&&e.attachEvent("on"+i,h):this.addDoubleTapListener(e,h,a),e[r]=e[r]||{},e[r][a]=h,this},_off:function(t,e,i,n){var s=e+o.stamp(i)+(n?"_"+o.stamp(n):""),a=t[r]&&t[r][s];return a?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,s):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,s):"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",a,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[r][s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){return o.DomEvent.on(t,"mousewheel",o.DomEvent.stopPropagation)},disableClickPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,o.Draggable.START.join(" "),e),o.DomEvent.on(t,{click:o.DomEvent._fakeStop,dblclick:e})},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},_wheelPxFactor:o.Browser.win&&o.Browser.chrome?2:o.Browser.gecko?t.devicePixelRatio:1,getWheelDelta:function(t){return o.Browser.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/o.DomEvent._wheelPxFactor:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_isExternalTarget:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,void e(t))}},o.DomEvent.addListener=o.DomEvent.on,o.DomEvent.removeListener=o.DomEvent.off,o.PosAnimation=o.Evented.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),o.DomUtil.setPosition(this._el,i),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Projection.Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:o.bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,s=this.R_MINOR/i,r=Math.sqrt(1-s*s),a=r*Math.sin(n),h=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);return n=-i*Math.log(Math.max(h,1e-10)),new o.Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,s=this.R_MINOR/n,r=Math.sqrt(1-s*s),a=Math.exp(-t.y/n),h=Math.PI/2-2*Math.atan(a),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(h),e=Math.pow((1-e)/(1+e),r/2),u=Math.PI/2-2*Math.atan(a*e)-h,h+=u;return new o.LatLng(h*i,t.x*i/n)}},o.CRS.EPSG3395=o.extend({},o.CRS.Earth,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=.5/(Math.PI*o.Projection.Mercator.R);return new o.Transformation(t,.5,-t,.5)}()}),o.GridLayer=o.Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:o.Browser.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:i,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){o.setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),o.DomUtil.remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=null},bringToFront:function(){return this._map&&(o.DomUtil.toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(o.DomUtil.toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return e.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof o.Point?t:new o.Point(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-(1/0),1/0),o=0,s=i.length;o<s;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!o.Browser.ielt9){o.DomUtil.setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var s=this._tiles[n];if(s.current&&s.loaded){var r=Math.min(1,(t-s.loaded)/200);o.DomUtil.setOpacity(s.el,r),r<1?e=!0:(s.active&&(i=!0),s.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(o.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=o.Util.requestAnimFrame(this._updateOpacity,this))}},_initContainer:function(){this._container||(this._container=o.DomUtil.create("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t===i)return i;for(var n in this._levels)this._levels[n].el.children.length||n===t?this._levels[n].el.style.zIndex=e-Math.abs(t-n):(o.DomUtil.remove(this._levels[n].el),this._removeTilesAtZoom(n),delete this._levels[n]);var s=this._levels[t],r=this._map;return s||(s=this._levels[t]={},s.el=o.DomUtil.create("div","leaflet-tile-container leaflet-zoom-animated",this._container),s.el.style.zIndex=e,s.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),s.zoom=t,this._setZoomTransform(s,r.getCenter(),r.getZoom()),o.Util.falseFn(s.el.offsetWidth)),this._level=s,s},_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)o.DomUtil.remove(this._levels[t].el),delete this._levels[t];this._removeAllTiles(),this._tileZoom=null},_retainParent:function(t,e,i,n){var s=Math.floor(t/2),r=Math.floor(e/2),a=i-1,h=new o.Point(+s,+r);h.z=+a;var l=this._tileCoordsToKey(h),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),a>n&&this._retainParent(s,r,a,n))},_retainChildren:function(t,e,i,n){for(var s=2*t;s<2*t+2;s++)for(var r=2*e;r<2*e+2;r++){var a=new o.Point(s,r);a.z=i+1;var h=this._tileCoordsToKey(a),l=this._tiles[h];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(s,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_setView:function(t,e,n,o){var s=Math.round(e);(this.options.maxZoom!==i&&s>this.options.maxZoom||this.options.minZoom!==i&&s<this.options.minZoom)&&(s=i);var r=this.options.updateWhenZooming&&s!==this._tileZoom;o&&!r||(this._tileZoom=s,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),s!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),s=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();o.Browser.any3d?o.DomUtil.setTransform(t.el,s,n):o.DomUtil.setPosition(t.el,s)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),s=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new o.Bounds(s.subtract(r),s.add(r))},_update:function(t){var n=this._map;if(n){var s=n.getZoom();if(t===i&&(t=n.getCenter()),this._tileZoom!==i){var r=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(r),h=a.getCenter(),l=[],u=this.options.keepBuffer,c=new o.Bounds(a.getBottomLeft().subtract([u,-u]),a.getTopRight().add([u,-u]));for(var d in this._tiles){var _=this._tiles[d].coords;_.z===this._tileZoom&&c.contains(o.point(_.x,_.y))||(this._tiles[d].current=!1)}if(Math.abs(s-this._tileZoom)>1)return void this._setView(t,s);for(var m=a.min.y;m<=a.max.y;m++)for(var p=a.min.x;p<=a.max.x;p++){var f=new o.Point(p,m);if(f.z=this._tileZoom,this._isValidTile(f)){var g=this._tiles[this._tileCoordsToKey(f)];g?g.current=!0:l.push(f)}}if(l.sort(function(t,e){return t.distanceTo(h)-e.distanceTo(h)}),0!==l.length){this._loading||(this._loading=!0,this.fire("loading"));var v=e.createDocumentFragment();for(p=0;p<l.length;p++)this._addTile(l[p],v);this._level.el.appendChild(v)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return o.latLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToBounds:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),s=n.add(i),r=e.unproject(n,t.z),a=e.unproject(s,t.z),h=new o.LatLngBounds(r,a);return this.options.noWrap||e.wrapLatLngBounds(h),h},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new o.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(o.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){o.DomUtil.addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=o.Util.falseFn,t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity<1&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.android&&!o.Browser.android23&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),o.bind(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&o.Util.requestAnimFrame(o.bind(this._tileReady,this,t,null,s)),o.DomUtil.setPosition(s,i),this._tiles[n]={el:s,coords:t,current:!0},e.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(o.DomUtil.setOpacity(i.el,0),o.Util.cancelAnimFrame(this._fadeFrame),this._fadeFrame=o.Util.requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(o.DomUtil.addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),o.Browser.ielt9||!this._map._fadeAnimated?o.Util.requestAnimFrame(this._pruneTiles,this):setTimeout(o.bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new o.Point(this._wrapX?o.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?o.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new o.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),o.gridLayer=function(t){return new o.GridLayer(t)},o.TileLayer=o.GridLayer.extend({options:{minZoom:0,maxZoom:18,maxNativeZoom:null,minNativeZoom:null,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),o.Browser.android||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,i){var n=e.createElement("img");return o.DomEvent.on(n,"load",o.bind(this._tileOnLoad,this,i,n)),o.DomEvent.on(n,"error",o.bind(this._tileOnError,this,i,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:o.Browser.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return o.Util.template(this._url,o.extend(e,this.options))},_tileOnLoad:function(t,e){o.Browser.ielt9?setTimeout(o.bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.src!==n&&(e.src=n),t(i,e)},getTileSize:function(){var t=this._map,e=o.GridLayer.prototype.getTileSize.call(this),i=this._tileZoom+this.options.zoomOffset,n=this.options.minNativeZoom,s=this.options.maxNativeZoom;return null!==n&&i<n?e.divideBy(t.getZoomScale(n,i)).round():null!==s&&i>s?e.divideBy(t.getZoomScale(s,i)).round():e},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset,o=this.options.minNativeZoom,s=this.options.maxNativeZoom;return i&&(t=e-t),t+=n,null!==o&&t<o?o:null!==s&&t>s?s:t},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=o.Util.falseFn,e.onerror=o.Util.falseFn,e.complete||(e.src=o.Util.emptyImageUrl,o.DomUtil.remove(e)))}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=o.setOptions(this,e),i.width=i.height=e.tileSize*(e.detectRetina&&o.Browser.retina?2:1),this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToBounds(t),i=this._crs.project(e.getNorthWest()),n=this._crs.project(e.getSouthEast()),s=(this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[n.y,i.x,i.y,n.x]:[i.x,n.y,n.x,i.y]).join(","),r=o.TileLayer.prototype.getTileUrl.call(this,t);return r+o.Util.getParamString(this.wmsParams,r,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.ImageOverlay=o.Layer.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(o.DomUtil.addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){o.DomUtil.remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&o.DomUtil.toFront(this._image),this},bringToBack:function(){return this._map&&o.DomUtil.toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=t,this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._image=o.DomUtil.create("img","leaflet-image-layer "+(this._zoomAnimated?"leaflet-zoom-animated":""));t.onselectstart=o.Util.falseFn,t.onmousemove=o.Util.falseFn,t.onload=o.bind(this.fire,this,"load"),this.options.crossOrigin&&(t.crossOrigin=""),t.src=this._url,t.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;o.DomUtil.setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new o.Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();
o.DomUtil.setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var s=o.point(n),r=o.point("shadow"===e&&i.shadowAnchor||i.iconAnchor||s&&s.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,i){return i=i||e.createElement("img"),i.src=t,i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return o.Icon.Default.imagePath||(o.Icon.Default.imagePath=this._detectIconPath()),(this.options.imagePath||o.Icon.Default.imagePath)+o.Icon.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=o.DomUtil.create("div","leaflet-default-icon-path",e.body),i=o.DomUtil.getStyle(t,"background-image")||o.DomUtil.getStyle(t,"backgroundImage");return e.body.removeChild(t),0===i.indexOf("url")?i.replace(/^url\([\"\']?/,"").replace(/marker-icon\.png[\"\']?\)$/,""):""}}),o.Marker=o.Layer.extend({options:{icon:new o.Icon.Default,interactive:!0,draggable:!1,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",nonBubblingEvents:["click","dblclick","mouseover","mouseout","contextmenu"]},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=o.latLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),t.alt&&(i.alt=t.alt)),o.DomUtil.addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var s=t.icon.createShadow(this._shadow),r=!1;s!==this._shadow&&(this._removeShadow(),r=!0),s&&(o.DomUtil.addClass(s,e),s.alt=""),this._shadow=s,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),s&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),o.DomUtil.remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&o.DomUtil.remove(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(o.DomUtil.addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),o.Handler.MarkerDrag)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new o.Handler.MarkerDrag(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;o.DomUtil.setOpacity(this._icon,t),this._shadow&&o.DomUtil.setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor||[0,0]},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor||[0,0]}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;if(i.innerHTML=n.html!==!1?n.html:"",n.bgPos){var s=o.point(n.bgPos);i.style.backgroundPosition=-s.x+"px "+-s.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.DivOverlay=o.Layer.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){o.setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&o.DomUtil.setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&o.DomUtil.setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(o.DomUtil.setOpacity(this._container,0),this._removeTimeout=setTimeout(o.bind(o.DomUtil.remove,o.DomUtil,this._container),200)):o.DomUtil.remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&o.DomUtil.toFront(this._container),this},bringToBack:function(){return this._map&&o.DomUtil.toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=o.point(this.options.offset),i=this._getAnchor();this._zoomAnimated?o.DomUtil.setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,s=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=s+"px"}},_getAnchor:function(){return[0,0]}}),o.Popup=o.DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){o.DivOverlay.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof o.Path||this._source.on("preclick",o.DomEvent.stopPropagation))},onRemove:function(t){o.DivOverlay.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof o.Path||this._source.off("preclick",o.DomEvent.stopPropagation))},getEvents:function(){var t=o.DivOverlay.prototype.getEvents.call(this);return("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=o.DomUtil.create("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated");if(this.options.closeButton){var i=this._closeButton=o.DomUtil.create("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",o.DomEvent.on(i,"click",this._onCloseButtonClick,this)}var n=this._wrapper=o.DomUtil.create("div",t+"-content-wrapper",e);this._contentNode=o.DomUtil.create("div",t+"-content",n),o.DomEvent.disableClickPropagation(n).disableScrollPropagation(this._contentNode).on(n,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",t+"-tip-container",e),this._tip=o.DomUtil.create("div",t+"-tip",this._tipContainer)},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,r="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,r)):o.DomUtil.removeClass(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();o.DomUtil.setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(o.DomUtil.getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,s=new o.Point(this._containerLeft,-i-this._containerBottom);s._add(o.DomUtil.getPosition(this._container));var r=t.layerPointToContainerPoint(s),a=o.point(this.options.autoPanPadding),h=o.point(this.options.autoPanPaddingTopLeft||a),l=o.point(this.options.autoPanPaddingBottomRight||a),u=t.getSize(),c=0,d=0;r.x+n+l.x>u.x&&(c=r.x+n-u.x+l.x),r.x-c-h.x<0&&(c=r.x-h.x),r.y+i+l.y>u.y&&(d=r.y+i-u.y+l.y),r.y-d-h.y<0&&(d=r.y-h.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)},_getAnchor:function(){return o.point(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Map.include({openPopup:function(t,e,i){return t instanceof o.Popup||(t=new o.Popup(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),o.Layer.include({bindPopup:function(t,e){return t instanceof o.Popup?(o.setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof o.Layer||(e=t,t=this),t instanceof o.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map)return o.DomEvent.stop(t),e instanceof o.Path?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.Tooltip=o.DivOverlay.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){o.DivOverlay.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){o.DivOverlay.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=o.DivOverlay.prototype.getEvents.call(this);return o.Browser.touch&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=o.DomUtil.create("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),s=e.layerPointToContainerPoint(t),r=this.options.direction,a=i.offsetWidth,h=i.offsetHeight,l=o.point(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(o.point(-a/2+l.x,-h+l.y+u.y,!0)):"bottom"===r?t=t.subtract(o.point(a/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(o.point(a/2+l.x,h/2-u.y+l.y,!0)):"right"===r||"auto"===r&&s.x<n.x?(r="right",t=t.add(o.point(l.x+u.x,u.y-h/2+l.y,!0))):(r="left",t=t.subtract(o.point(a+u.x-l.x,h/2-u.y-l.y,!0))),o.DomUtil.removeClass(i,"leaflet-tooltip-right"),o.DomUtil.removeClass(i,"leaflet-tooltip-left"),o.DomUtil.removeClass(i,"leaflet-tooltip-top"),o.DomUtil.removeClass(i,"leaflet-tooltip-bottom"),o.DomUtil.addClass(i,"leaflet-tooltip-"+r),o.DomUtil.setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&o.DomUtil.setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return o.point(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),o.tooltip=function(t,e){return new o.Tooltip(t,e)},o.Map.include({openTooltip:function(t,e,i){return t instanceof o.Tooltip||(t=new o.Tooltip(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),o.Layer.include({bindTooltip:function(t,e){return t instanceof o.Tooltip?(o.setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=o.tooltip(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),o.Browser.touch&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof o.Layer||(e=t,t=this),t instanceof o.FeatureGroup)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(o.DomUtil.addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(o.DomUtil.removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:i)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}}),o.LayerGroup=o.Layer.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;e<i;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){for(var t in this._layers)this.removeLayer(this._layers[t]);return this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){for(var e in this._layers)t.addLayer(this._layers[e])},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e])},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),o.LayerGroup.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),o.LayerGroup.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Renderer=o.Layer.extend({options:{padding:.1},initialize:function(t){o.setOptions(this,t),o.stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&o.DomUtil.addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){o.DomUtil.remove(this._container),this.off("update",this._updatePaths,this)},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=o.DomUtil.getPosition(this._container),s=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e),h=a.subtract(r),l=s.multiplyBy(-i).add(n).add(s).subtract(h);o.Browser.any3d?o.DomUtil.setTransform(this._container,l,i):o.DomUtil.setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new o.Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),o.Map.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&o.canvas()||o.svg()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||t===i)return!1;var e=this._paneRenderers[t];return e===i&&(e=o.SVG&&o.svg({pane:t})||o.Canvas&&o.canvas({pane:t}),this._paneRenderers[t]=e),e}}),o.Path=o.Layer.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return o.setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(o.Browser.touch?10:0)}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var r,a=[];for(r=0;r<n;r++)s[r]&&a.push(t[r]);return a},_simplifyDPStep:function(t,e,i,n,o){var s,r,a,h=0;for(r=n+1;r<=o-1;r++)a=this._sqClosestPointOnSegment(t[r],t[n],t[o],!0),a>h&&(s=r,h=a);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;n<s;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<s-1&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n,o){var s,r,a,h=n?this._lastCode:this._getBitCode(t,i),l=this._getBitCode(e,i);for(this._lastCode=l;;){if(!(h|l))return[t,e];if(h&l)return!1;s=h||l,r=this._getEdgeIntersection(t,e,s,i,o),a=this._getBitCode(r,i),s===h?(t=r,h=a):(e=r,l=a)}},_getEdgeIntersection:function(t,e,i,n,s){var r,a,h=e.x-t.x,l=e.y-t.y,u=n.min,c=n.max;return 8&i?(r=t.x+h*(c.y-t.y)/l,a=c.y):4&i?(r=t.x+h*(u.y-t.y)/l,a=u.y):2&i?(r=c.x,a=t.y+l*(c.x-t.x)/h):1&i&&(r=u.x,a=t.y+l*(u.x-t.x)/h),new o.Point(r,a,s)},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,r=e.x,a=e.y,h=i.x-r,l=i.y-a,u=h*h+l*l;return u>0&&(s=((t.x-r)*h+(t.y-a)*l)/u,s>1?(r=i.x,a=i.y):s>0&&(r+=h*s,a+=l*s)),h=t.x-r,l=t.y-a,n?h*h+l*l:new o.Point(r,a)}},o.Polyline=o.Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){o.setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,s=null,r=o.LineUtil._sqClosestPointOnSegment,a=0,h=this._parts.length;a<h;a++)for(var l=this._parts[a],u=1,c=l.length;u<c;u++){e=l[u-1],i=l[u];var d=r(t,e,i,!0);d<n&&(n=d,s=r(t,e,i))}return s&&(s.distance=Math.sqrt(n)),s},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(t=0,e=0;t<h-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],i=o.distanceTo(s),n+=i,n>e)return r=(n-e)/i,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=o.latLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new o.LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return o.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=o.Polyline._flat(t),n=0,s=t.length;n<s;n++)i?(e[n]=o.latLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new o.Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new o.Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,s,r=t[0]instanceof o.LatLng,a=t.length;if(r){for(s=[],n=0;n<a;n++)s[n]=this._map.latLngToLayerPoint(t[n]),i.extend(s[n]);e.push(s)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,s,r,a,h,l=this._parts;for(e=0,n=0,s=this._rings.length;e<s;e++)for(h=this._rings[e],i=0,r=h.length;i<r-1;i++)a=o.LineUtil.clipSegment(h[i],h[i+1],t,i,!0),a&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===h[i+1]&&i!==r-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=o.LineUtil.simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.Polyline._flat=function(t){return!o.Util.isArray(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e,i){var n,s,r,a,h,l,u,c,d,_=[1,4,2,8],m=o.LineUtil;for(s=0,u=t.length;s<u;s++)t[s]._code=m._getBitCode(t[s],e);for(a=0;a<4;a++){for(c=_[a],n=[],s=0,u=t.length,r=u-1;s<u;r=s++)h=t[s],l=t[r],h._code&c?l._code&c||(d=m._getEdgeIntersection(l,h,c,e,i),d._code=m._getBitCode(d,e),n.push(d)):(l._code&c&&(d=m._getEdgeIntersection(l,h,c,e,i),d._code=m._getBitCode(d,e),n.push(d)),n.push(h));t=n}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,s,r,a,h,l=this._rings[0],u=l.length;if(!u)return null;for(s=r=a=0,t=0,e=u-1;t<u;e=t++)i=l[t],n=l[e],o=i.y*n.x-n.y*i.x,r+=(i.x+n.x)*o,a+=(i.y+n.y)*o,s+=3*o;return h=0===s?l[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var e=o.Polyline.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof o.LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){o.Polyline.prototype._setLatLngs.call(this,t),o.Polyline._flat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return o.Polyline._flat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new o.Point(e,e);if(t=new o.Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,s=0,r=this._rings.length;s<r;s++)n=o.PolyUtil.clipPolygon(this._rings[s],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)}}),o.polygon=function(t,e){return new o.Polygon(t,e)},o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.CircleMarker=o.Path.extend({options:{fill:!0,radius:10},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return o.Path.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new o.Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Circle=o.CircleMarker.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=o.extend({},i,{radius:e})),o.setOptions(this,e),this._latlng=o.latLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new o.LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)));
},setStyle:o.Path.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===o.CRS.Earth.distance){var s=Math.PI/180,r=this._mRadius/o.CRS.Earth.R/s,a=i.project([e+r,t]),h=i.project([e-r,t]),l=a.add(h).divideBy(2),u=i.unproject(l).lat,c=Math.acos((Math.cos(r*s)-Math.sin(e*s)*Math.sin(u*s))/(Math.cos(e*s)*Math.cos(u*s)))/s;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:Math.max(Math.round(l.x-i.project([u,t-c]).x),1),this._radiusY=Math.max(Math.round(l.y-a.y),1)}else{var d=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(d).x}this._updateBounds()}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.SVG=o.Renderer.extend({getEvents:function(){var t=o.Renderer.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=o.SVG.create("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=o.SVG.create("g"),this._container.appendChild(this._rootGroup)},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){o.Renderer.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),o.DomUtil.setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=o.SVG.create("path");t.options.className&&o.DomUtil.addClass(e,t.options.className),t.options.interactive&&o.DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[o.stamp(t)]=t},_addPath:function(t){this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){o.DomUtil.remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[o.stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,o.SVG.pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=t._radius,n=t._radiusY||i,o="a"+i+","+n+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+o+2*i+",0 "+o+2*-i+",0 ";this._setPath(t,s)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){o.DomUtil.toFront(t._path)},_bringToBack:function(t){o.DomUtil.toBack(t._path)}}),o.extend(o.SVG,{create:function(t){return e.createElementNS("http://www.w3.org/2000/svg",t)},pointsToPath:function(t,e){var i,n,s,r,a,h,l="";for(i=0,s=t.length;i<s;i++){for(a=t[i],n=0,r=a.length;n<r;n++)h=a[n],l+=(n?"L":"M")+h.x+" "+h.y;l+=e?o.Browser.svg?"z":"x":""}return l||"M0 0"}}),o.Browser.svg=!(!e.createElementNS||!o.SVG.create("svg").createSVGRect),o.svg=function(t){return o.Browser.svg||o.Browser.vml?new o.SVG(t):null},o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(t){return!1}}(),o.SVG.include(o.Browser.vml?{_initContainer:function(){this._container=o.DomUtil.create("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(o.Renderer.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=o.SVG.create("shape");o.DomUtil.addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=o.SVG.create("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[o.stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;o.DomUtil.remove(e),t.removeInteractiveTarget(e),delete this._layers[o.stamp(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,s=t._container;s.stroked=!!n.stroke,s.filled=!!n.fill,n.stroke?(e||(e=t._stroke=o.SVG.create("stroke")),s.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=o.Util.isArray(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(s.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=o.SVG.create("fill")),s.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(s.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){o.DomUtil.toFront(t._container)},_bringToBack:function(t){o.DomUtil.toBack(t._container)}}:{}),o.Browser.vml&&(o.SVG.create=function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),o.Canvas=o.Renderer.extend({getEvents:function(){var t=o.Renderer.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){o.Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=e.createElement("canvas");o.DomEvent.on(t,"mousemove",o.Util.throttle(this._onMouseMove,32,this),this).on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this).on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},o.Renderer.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=o.Browser.retina?2:1;o.DomUtil.setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",o.Browser.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){o.Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[o.stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[o.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||o.Util.requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new o.Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(this._drawnLayers[t._leaflet_id]=t,h.beginPath(),h.setLineDash&&h.setLineDash(t.options&&t.options._dashArray||[]),i=0;i<a;i++){for(n=0,o=r[i].length;n<o;n++)s=r[i][n],h[n?"lineTo":"moveTo"](s.x,s.y);e&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=t._radius,o=(t._radiusY||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),s=this._drawFirst;s;s=s.next)e=s.layer,e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(o.DomEvent._fakeStop(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(o.DomUtil.removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,s=this._drawFirst;s;s=s.next)i=s.layer,i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(o.DomUtil.addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.canvas=function(t){return o.Browser.canvas?new o.Canvas(t):null},o.Polyline.prototype._containsPoint=function(t,e){var i,n,s,r,a,h,l=this._clickTolerance();if(!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(h=this._parts[i],n=0,a=h.length,s=a-1;n<a;s=n++)if((e||0!==n)&&o.LineUtil.pointToSegmentDistance(t,h[s],h[n])<=l)return!0;return!1},o.Polygon.prototype._containsPoint=function(t){var e,i,n,s,r,a,h,l,u=!1;if(!this._pxBounds.contains(t))return!1;for(s=0,h=this._parts.length;s<h;s++)for(e=this._parts[s],r=0,l=e.length,a=l-1;r<l;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||o.Polyline.prototype._containsPoint.call(this,t,!0)},o.CircleMarker.prototype._containsPoint=function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()},o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,s=o.Util.isArray(t)?t:t.features;if(s){for(e=0,i=s.length;e<i;e++)n=s[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=o.GeoJSON.geometryToLayer(t,r);return a?(a.feature=o.GeoJSON.asFeature(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return t.options=o.Util.extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e){var i,n,s,r,a="Feature"===t.type?t.geometry:t,h=a?a.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||this.coordsToLatLng;if(!h&&!a)return null;switch(a.type){case"Point":return i=c(h),u?u(t,i):new o.Marker(i);case"MultiPoint":for(s=0,r=h.length;s<r;s++)i=c(h[s]),l.push(u?u(t,i):new o.Marker(i));return new o.FeatureGroup(l);case"LineString":case"MultiLineString":return n=this.coordsToLatLngs(h,"LineString"===a.type?0:1,c),new o.Polyline(n,e);case"Polygon":case"MultiPolygon":return n=this.coordsToLatLngs(h,"Polygon"===a.type?1:2,c),new o.Polygon(n,e);case"GeometryCollection":for(s=0,r=a.geometries.length;s<r;s++){var d=this.geometryToLayer({geometry:a.geometries[s],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new o.FeatureGroup(l);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){for(var n,o=[],s=0,r=t.length;s<r;s++)n=e?this.coordsToLatLngs(t[s],e-1,i):(i||this.coordsToLatLng)(t[s]),o.push(n);return o},latLngToCoords:function(t){return t.alt!==i?[t.lng,t.lat,t.alt]:[t.lng,t.lat]},latLngsToCoords:function(t,e,i){for(var n=[],s=0,r=t.length;s<r;s++)n.push(e?o.GeoJSON.latLngsToCoords(t[s],e-1,i):o.GeoJSON.latLngToCoords(t[s]));return!e&&i&&n.push(n[0]),n},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.prototype.toGeoJSON=function(){var t=!o.Polyline._flat(this._latlngs),e=o.GeoJSON.latLngsToCoords(this._latlngs,t?1:0);return o.GeoJSON.getFeature(this,{type:(t?"Multi":"")+"LineString",coordinates:e})},o.Polygon.prototype.toGeoJSON=function(){var t=!o.Polyline._flat(this._latlngs),e=t&&!o.Polyline._flat(this._latlngs[0]),i=o.GeoJSON.latLngsToCoords(this._latlngs,e?2:t?1:0,!0);return t||(i=[i]),o.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:i})},o.LayerGroup.include({toMultiPoint:function(){var t=[];return this.eachLayer(function(e){t.push(e.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:"MultiPoint",coordinates:t})},toGeoJSON:function(){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===t)return this.toMultiPoint();var e="GeometryCollection"===t,i=[];return this.eachLayer(function(t){if(t.toGeoJSON){var n=t.toGeoJSON();i.push(e?n.geometry:o.GeoJSON.asFeature(n))}}),e?o.GeoJSON.getFeature(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}}),o.geoJSON=function(t,e){return new o.GeoJSON(t,e)},o.geoJson=o.geoJSON,o.Draggable=o.Evented.extend({options:{clickTolerance:3},statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e,i){this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(o.DomEvent.on(this._dragStartTarget,o.Draggable.START.join(" "),this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(o.Draggable._dragging===this&&this.finishDrag(),o.DomEvent.off(this._dragStartTarget,o.Draggable.START.join(" "),this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!o.DomUtil.hasClass(this._element,"leaflet-zoom-anim")&&!(o.Draggable._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(o.Draggable._dragging=this,this._preventOutline&&o.DomUtil.preventOutline(this._element),o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){this.fire("down");var i=t.touches?t.touches[0]:t;this._startPoint=new o.Point(i.clientX,i.clientY),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(i){if(!i._simulated&&this._enabled){if(i.touches&&i.touches.length>1)return void(this._moved=!0);var n=i.touches&&1===i.touches.length?i.touches[0]:i,s=new o.Point(n.clientX,n.clientY),r=s.subtract(this._startPoint);(r.x||r.y)&&(Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(o.DomEvent.preventDefault(i),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(r),o.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,t.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._lastEvent=i,this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){o.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove,this).off(e,o.Draggable.END[t],this._onUp,this);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,o.Draggable._dragging=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({down:this._onDown,dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}o.DomUtil.addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){o.DomUtil.removeClass(this._map._container,"leaflet-grab"),o.DomUtil.removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDown:function(){this._map._stop()},_onDragStart:function(){var t=this._map;if(this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=o.latLngBounds(this._map.options.maxBounds);this._offsetLimit=o.bounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),e-this._times[0]>50&&(this._positions.shift(),this._times.shift())}this._map.fire("move",t).fire("drag",t)},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,r=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{var s=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,h=s.multiplyBy(a/r),l=h.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,l),c=h.multiplyBy(u/l),d=u/(i.inertiaDeceleration*a),_=c.multiplyBy(-d/2).round();_.x||_.y?(_=e._limitOffset(_,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(_,{duration:d,easeLinearity:a,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),n),o.DomEvent.stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=i?Math.ceil(o/i)*i:o,r=t._limitZoom(e+(this._delta>0?s:-s))-e;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(e+r):t.setZoomAround(this._lastMousePos,e+r))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,e,i){function n(t){var e;if(o.Browser.pointer){if(!o.Browser.edge||"mouse"===t.pointerType)return;e=o.DomEvent._pointersCount}else e=t.touches.length;if(!(e>1)){var i=Date.now(),n=i-(r||i);a=t.touches?t.touches[0]:t,h=n>0&&n<=l,r=i}}function s(t){if(h&&!a.cancelBubble){if(o.Browser.pointer){if(!o.Browser.edge||"mouse"===t.pointerType)return;var i,n,s={};for(n in a)i=a[n],s[n]=i&&i.bind?i.bind(a):i;a=s}a.type="dblclick",e(a),r=null}}var r,a,h=!1,l=250,u="_leaflet_",c=this._touchstart,d=this._touchend;return t[u+c+i]=n,t[u+d+i]=s,t[u+"dblclick"+i]=e,t.addEventListener(c,n,!1),t.addEventListener(d,s,!1),t.addEventListener("dblclick",e,!1),this},removeDoubleTapListener:function(t,e){var i="_leaflet_",n=t[i+this._touchstart+e],s=t[i+this._touchend+e],r=t[i+"dblclick"+e];return t.removeEventListener(this._touchstart,n,!1),t.removeEventListener(this._touchend,s,!1),o.Browser.edge||t.removeEventListener("dblclick",r,!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",TAG_WHITE_LIST:["INPUT","SELECT","OPTION"],_pointers:{},_pointersCount:0,addPointerListener:function(t,e,i,n){return"touchstart"===e?this._addPointerStart(t,i,n):"touchmove"===e?this._addPointerMove(t,i,n):"touchend"===e&&this._addPointerEnd(t,i,n),this},removePointerListener:function(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(this.POINTER_DOWN,n,!1):"touchmove"===e?t.removeEventListener(this.POINTER_MOVE,n,!1):"touchend"===e&&(t.removeEventListener(this.POINTER_UP,n,!1),t.removeEventListener(this.POINTER_CANCEL,n,!1)),this},_addPointerStart:function(t,i,n){var s=o.bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(this.TAG_WHITE_LIST.indexOf(t.target.tagName)<0))return;o.DomEvent.preventDefault(t)}this._handlePointer(t,i)},this);if(t["_leaflet_touchstart"+n]=s,t.addEventListener(this.POINTER_DOWN,s,!1),!this._pointerDocListener){var r=o.bind(this._globalPointerUp,this);e.documentElement.addEventListener(this.POINTER_DOWN,o.bind(this._globalPointerDown,this),!0),e.documentElement.addEventListener(this.POINTER_MOVE,o.bind(this._globalPointerMove,this),!0),e.documentElement.addEventListener(this.POINTER_UP,r,!0),e.documentElement.addEventListener(this.POINTER_CANCEL,r,!0),this._pointerDocListener=!0}},_globalPointerDown:function(t){this._pointers[t.pointerId]=t,this._pointersCount++},_globalPointerMove:function(t){this._pointers[t.pointerId]&&(this._pointers[t.pointerId]=t)},_globalPointerUp:function(t){delete this._pointers[t.pointerId],this._pointersCount--},_handlePointer:function(t,e){t.touches=[];for(var i in this._pointers)t.touches.push(this._pointers[i]);t.changedTouches=[t],e(t)},_addPointerMove:function(t,e,i){var n=o.bind(function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&this._handlePointer(t,e)},this);t["_leaflet_touchmove"+i]=n,t.addEventListener(this.POINTER_MOVE,n,!1)},_addPointerEnd:function(t,e,i){var n=o.bind(function(t){this._handlePointer(t,e)},this);t["_leaflet_touchend"+i]=n,t.addEventListener(this.POINTER_UP,n,!1),t.addEventListener(this.POINTER_CANCEL,n,!1)}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomUtil.addClass(this._map._container,"leaflet-touch-zoom"),o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomUtil.removeClass(this._map._container,"leaflet-touch-zoom"),o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToContainerPoint(t.touches[0]),s=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(n.add(s)._divideBy(2))),this._startDist=n.distanceTo(s),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),s=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(s,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&s<1||this._zoom>e.getMaxZoom()&&s>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest);var a=o.bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=o.Util.requestAnimFrame(a,this,!0),o.DomEvent.preventDefault(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),o.DomEvent.on(e,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY),
this._simulateEvent("mousemove",e)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_resetState:function(){this._moved=!1},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._resetState(),o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),void o.DomEvent.on(e,{contextmenu:o.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=o.DomUtil.create("div","leaflet-zoom-box",this._container),o.DomUtil.addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new o.Bounds(this._point,this._startPoint),i=e.getSize();o.DomUtil.setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(o.DomUtil.remove(this._box),o.DomUtil.removeClass(this._container,"leaflet-crosshair")),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,{contextmenu:o.DomEvent.stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){setTimeout(o.bind(this._resetState,this),0);var e=new o.LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanDelta:80}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),o.DomEvent.on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),o.DomEvent.off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=o.point(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i)return;n.closePopup()}o.DomEvent.stop(t)}}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),o.DomUtil.addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(t){var e=this._marker,i=e._shadow,n=o.DomUtil.getPosition(e._icon),s=e._map.layerPointToLatLng(n);i&&o.DomUtil.setPosition(i,n),e._latlng=s,t.latlng=s,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),i.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(o.DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,s){var r=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",r,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){o.DomUtil.remove(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,s){var r=o.DomUtil.create("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),o.DomEvent.on(r,"mousedown dblclick",o.DomEvent.stopPropagation).on(r,"click",o.DomEvent.stop).on(r,"click",s,this).on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&o.DomUtil.addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent&&o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(new o.Control.Attribution).addTo(this)}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e,i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){o.setOptions(this,i),this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this),this._container},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(o.stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(o.DomUtil.addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):o.DomUtil.removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return o.DomUtil.removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),o.DomEvent.disableClickPropagation(e),o.Browser.touch||o.DomEvent.disableScrollPropagation(e);var n=this._form=o.DomUtil.create("form",t+"-list");i&&(this._map.on("click",this.collapse,this),o.Browser.android||o.DomEvent.on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var s=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);s.href="#",s.title="Layers",o.Browser.touch?o.DomEvent.on(s,"click",o.DomEvent.stop).on(s,"click",this.expand,this):o.DomEvent.on(s,"focus",this.expand,this),o.DomEvent.on(n,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),i||this.expand(),this._baseLayersList=o.DomUtil.create("div",t+"-base",n),this._separator=o.DomUtil.create("div",t+"-separator",n),this._overlaysList=o.DomUtil.create("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&o.stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(o.bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(!this._container)return this;o.DomUtil.empty(this._baseLayersList),o.DomUtil.empty(this._overlaysList);var t,e,i,n,s=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,s+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&s>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(o.stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var r=e.createElement("span");r.innerHTML=" "+t.name;var a=e.createElement("div");n.appendChild(a),a.appendChild(i),a.appendChild(r);var h=t.overlay?this._overlaysList:this._baseLayersList;return h.appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=[],s=[];this._handlingClick=!0;for(var r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,i=this._map.hasLayer(e),t.checked&&!i?o.push(e):!t.checked&&i&&s.push(e);for(r=0;r<s.length;r++)this._map.removeLayer(s[r]);for(r=0;r<o.length;r++)this._map.addLayer(o[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._form.getElementsByTagName("input"),o=this._map.getZoom(),s=n.length-1;s>=0;s--)t=n[s],e=this._getLayer(t.layerId).layer,t.disabled=e.options.minZoom!==i&&o<e.options.minZoom||e.options.maxZoom!==i&&o>e.options.maxZoom},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)}}(window,document);
!function(a){if("object"==typeof exports)module.exports=a();else if("function"==typeof define&&define.amd)define(a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.proj4=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var c=a("mgrs");Point.fromMGRS=function(a){return new Point(c.toPoint(a))},Point.prototype.toMGRS=function(a){return c.forward([this.x,this.y],a)},b.exports=Point},{mgrs:66}],2:[function(a,b){function Projection(a,b){if(!(this instanceof Projection))return new Projection(a);b=b||function(a){if(a)throw a};var e=c(a);if("object"!=typeof e)return void b(a);var g=f(e),h=Projection.projections.get(g.projName);h?(d(this,g),d(this,h),this.init(),b(null,this)):b(a)}var c=a("./parseCode"),d=a("./extend"),e=a("./projections"),f=a("./deriveConstants");Projection.projections=e,Projection.projections.start(),b.exports=Projection},{"./deriveConstants":32,"./extend":33,"./parseCode":36,"./projections":38}],3:[function(a,b){b.exports=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0;for(f=0;3>f;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":c[e]=d;break;case"w":c[e]=-d;break;case"n":c[e]=d;break;case"s":c[e]=-d;break;case"u":void 0!==c[e]&&(c.z=d);break;case"d":void 0!==c[e]&&(c.z=-d);break;default:return null}return c}},{}],4:[function(a,b){var c=Math.PI/2,d=a("./sign");b.exports=function(a){return Math.abs(a)<c?a:a-d(a)*Math.PI}},{"./sign":21}],5:[function(a,b){var c=2*Math.PI,d=a("./sign");b.exports=function(a){return Math.abs(a)<Math.PI?a:a-d(a)*c}},{"./sign":21}],6:[function(a,b){b.exports=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)}},{}],7:[function(a,b){b.exports=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))}},{}],8:[function(a,b){b.exports=function(a){return.375*a*(1+.25*a*(1+.46875*a))}},{}],9:[function(a,b){b.exports=function(a){return.05859375*a*a*(1+.75*a)}},{}],10:[function(a,b){b.exports=function(a){return a*a*a*(35/3072)}},{}],11:[function(a,b){b.exports=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)}},{}],12:[function(a,b){b.exports=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;15>h;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return 0/0}},{}],13:[function(a,b){var c=Math.PI/2;b.exports=function(a,b){var d=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-d)<1e-6)return 0>b?-1*c:c;for(var e,f,g,h,i=Math.asin(.5*b),j=0;30>j;j++)if(f=Math.sin(i),g=Math.cos(i),h=a*f,e=Math.pow(1-h*h,2)/(2*g)*(b/(1-a*a)-f/(1-h*h)+.5/a*Math.log((1-h)/(1+h))),i+=e,Math.abs(e)<=1e-10)return i;return 0/0}},{}],14:[function(a,b){b.exports=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)}},{}],15:[function(a,b){b.exports=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)}},{}],16:[function(a,b){var c=Math.PI/2;b.exports=function(a,b){for(var d,e,f=.5*a,g=c-2*Math.atan(b),h=0;15>=h;h++)if(d=a*Math.sin(g),e=c-2*Math.atan(b*Math.pow((1-d)/(1+d),f))-g,g+=e,Math.abs(e)<=1e-10)return g;return-9999}},{}],17:[function(a,b){var c=1,d=.25,e=.046875,f=.01953125,g=.01068115234375,h=.75,i=.46875,j=.013020833333333334,k=.007120768229166667,l=.3645833333333333,m=.005696614583333333,n=.3076171875;b.exports=function(a){var b=[];b[0]=c-a*(d+a*(e+a*(f+a*g))),b[1]=a*(h-a*(e+a*(f+a*g)));var o=a*a;return b[2]=o*(i-a*(j+a*k)),o*=a,b[3]=o*(l-a*m),b[4]=o*a*n,b}},{}],18:[function(a,b){var c=a("./pj_mlfn"),d=1e-10,e=20;b.exports=function(a,b,f){for(var g=1/(1-b),h=a,i=e;i;--i){var j=Math.sin(h),k=1-b*j*j;if(k=(c(h,j,Math.cos(h),f)-a)*k*Math.sqrt(k)*g,h-=k,Math.abs(k)<d)return h}return h}},{"./pj_mlfn":19}],19:[function(a,b){b.exports=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))}},{}],20:[function(a,b){b.exports=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b}},{}],21:[function(a,b){b.exports=function(a){return 0>a?-1:1}},{}],22:[function(a,b){b.exports=function(a,b){return Math.pow((1-a)/(1+a),b)}},{}],23:[function(a,b){b.exports=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b}},{}],24:[function(a,b){var c=Math.PI/2;b.exports=function(a,b,d){var e=a*d,f=.5*a;return e=Math.pow((1-e)/(1+e),f),Math.tan(.5*(c-b))/e}},{}],25:[function(a,b,c){c.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},c.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},c.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},c.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},c.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},c.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},c.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},c.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},c.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},c.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},c.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},c.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},c.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},c.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},c.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},c.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(a,b,c){c.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},c.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},c.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},c.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},c.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},c.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},c.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},c.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},c.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},c.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},c.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},c.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},c.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},c.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},c.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},c.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},c.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},c.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},c.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},c.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},c.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},c.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},c.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},c.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},c.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},c.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},c.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},c.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},c.hough={a:6378270,rf:297,ellipseName:"Hough"},c.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},c.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},c.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},c.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},c.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},c.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},c.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},c.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},c.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},c.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},c.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},c.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},c.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},c.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(a,b,c){c.greenwich=0,c.lisbon=-9.131906111111,c.paris=2.337229166667,c.bogota=-74.080916666667,c.madrid=-3.687938888889,c.rome=12.452333333333,c.bern=7.439583333333,c.jakarta=106.807719444444,c.ferro=-17.666666666667,c.brussels=4.367975,c.stockholm=18.058277777778,c.athens=23.7163375,c.oslo=10.722916666667},{}],28:[function(a,b){function c(a,b,c){var d;return Array.isArray(c)?(d=f(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):f(a,b,c)}function d(a){return a instanceof e?a:a.oProj?a.oProj:e(a)}function proj4(a,b,e){a=d(a);var f,h=!1;return"undefined"==typeof b?(b=a,a=g,h=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(e=b,b=a,a=g,h=!0),b=d(b),e?c(a,b,e):(f={forward:function(d){return c(a,b,d)},inverse:function(d){return c(b,a,d)}},h&&(f.oProj=b),f)}var e=a("./Proj"),f=a("./transform"),g=e("WGS84");b.exports=proj4},{"./Proj":2,"./transform":64}],29:[function(a,b){var c=Math.PI/2,d=1,e=2,f=3,g=4,h=5,i=484813681109536e-20,j=1.0026,k=.3826834323650898,l=function(a){if(!(this instanceof l))return new l(a);if(this.datum_type=g,a){if(a.datumCode&&"none"===a.datumCode&&(this.datum_type=h),a.datum_params){for(var b=0;b<a.datum_params.length;b++)a.datum_params[b]=parseFloat(a.datum_params[b]);(0!==a.datum_params[0]||0!==a.datum_params[1]||0!==a.datum_params[2])&&(this.datum_type=d),a.datum_params.length>3&&(0!==a.datum_params[3]||0!==a.datum_params[4]||0!==a.datum_params[5]||0!==a.datum_params[6])&&(this.datum_type=e,a.datum_params[3]*=i,a.datum_params[4]*=i,a.datum_params[5]*=i,a.datum_params[6]=a.datum_params[6]/1e6+1)}this.datum_type=a.grids?f:this.datum_type,this.a=a.a,this.b=a.b,this.es=a.es,this.ep2=a.ep2,this.datum_params=a.datum_params,this.datum_type===f&&(this.grids=a.grids)}};l.prototype={compare_datums:function(a){return this.datum_type!==a.datum_type?!1:this.a!==a.a||Math.abs(this.es-a.es)>5e-11?!1:this.datum_type===d?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]:this.datum_type===e?this.datum_params[0]===a.datum_params[0]&&this.datum_params[1]===a.datum_params[1]&&this.datum_params[2]===a.datum_params[2]&&this.datum_params[3]===a.datum_params[3]&&this.datum_params[4]===a.datum_params[4]&&this.datum_params[5]===a.datum_params[5]&&this.datum_params[6]===a.datum_params[6]:this.datum_type===f||a.datum_type===f?this.nadgrids===a.nadgrids:!0},geodetic_to_geocentric:function(a){var b,d,e,f,g,h,i,j=a.x,k=a.y,l=a.z?a.z:0,m=0;if(-c>k&&k>-1.001*c)k=-c;else if(k>c&&1.001*c>k)k=c;else if(-c>k||k>c)return null;return j>Math.PI&&(j-=2*Math.PI),g=Math.sin(k),i=Math.cos(k),h=g*g,f=this.a/Math.sqrt(1-this.es*h),b=(f+l)*i*Math.cos(j),d=(f+l)*i*Math.sin(j),e=(f*(1-this.es)+l)*g,a.x=b,a.y=d,a.z=e,m},geocentric_to_geodetic:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=1e-12,u=t*t,v=30,w=a.x,x=a.y,y=a.z?a.z:0;if(o=!1,b=Math.sqrt(w*w+x*x),d=Math.sqrt(w*w+x*x+y*y),b/this.a<t){if(o=!0,q=0,d/this.a<t)return r=c,void(s=-this.b)}else q=Math.atan2(x,w);e=y/d,f=b/d,g=1/Math.sqrt(1-this.es*(2-this.es)*f*f),j=f*(1-this.es)*g,k=e*g,p=0;do p++,i=this.a/Math.sqrt(1-this.es*k*k),s=b*j+y*k-i*(1-this.es*k*k),h=this.es*i/(i+s),g=1/Math.sqrt(1-h*(2-h)*f*f),l=f*(1-h)*g,m=e*g,n=m*j-l*k,j=l,k=m;while(n*n>u&&v>p);return r=Math.atan(m/Math.abs(l)),a.x=q,a.y=r,a.z=s,a},geocentric_to_geodetic_noniter:function(a){var b,d,e,f,g,h,i,l,m,n,o,p,q,r,s,t,u,v=a.x,w=a.y,x=a.z?a.z:0;if(v=parseFloat(v),w=parseFloat(w),x=parseFloat(x),u=!1,0!==v)b=Math.atan2(w,v);else if(w>0)b=c;else if(0>w)b=-c;else if(u=!0,b=0,x>0)d=c;else{if(!(0>x))return d=c,void(e=-this.b);d=-c}return g=v*v+w*w,f=Math.sqrt(g),h=x*j,l=Math.sqrt(h*h+g),n=h/l,p=f/l,o=n*n*n,i=x+this.b*this.ep2*o,t=f-this.a*this.es*p*p*p,m=Math.sqrt(i*i+t*t),q=i/m,r=t/m,s=this.a/Math.sqrt(1-this.es*q*q),e=r>=k?f/r-s:-k>=r?f/-r-s:x/q+s*(this.es-1),u===!1&&(d=Math.atan(q/r)),a.x=b,a.y=d,a.z=e,a},geocentric_to_wgs84:function(a){if(this.datum_type===d)a.x+=this.datum_params[0],a.y+=this.datum_params[1],a.z+=this.datum_params[2];else if(this.datum_type===e){var b=this.datum_params[0],c=this.datum_params[1],f=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=j*(a.x-i*a.y+h*a.z)+b,l=j*(i*a.x+a.y-g*a.z)+c,m=j*(-h*a.x+g*a.y+a.z)+f;a.x=k,a.y=l,a.z=m}},geocentric_from_wgs84:function(a){if(this.datum_type===d)a.x-=this.datum_params[0],a.y-=this.datum_params[1],a.z-=this.datum_params[2];else if(this.datum_type===e){var b=this.datum_params[0],c=this.datum_params[1],f=this.datum_params[2],g=this.datum_params[3],h=this.datum_params[4],i=this.datum_params[5],j=this.datum_params[6],k=(a.x-b)/j,l=(a.y-c)/j,m=(a.z-f)/j;a.x=k+i*l-h*m,a.y=-i*k+l+g*m,a.z=h*k-g*l+m}}},b.exports=l},{}],30:[function(a,b){var c=1,d=2,e=3,f=5,g=6378137,h=.006694379990141316;b.exports=function(a,b,i){function j(a){return a===c||a===d}var k,l,m;if(a.compare_datums(b))return i;if(a.datum_type===f||b.datum_type===f)return i;var n=a.a,o=a.es,p=b.a,q=b.es,r=a.datum_type;if(r===e)if(0===this.apply_gridshift(a,0,i))a.a=g,a.es=h;else{if(!a.datum_params)return a.a=n,a.es=a.es,i;for(k=1,l=0,m=a.datum_params.length;m>l;l++)k*=a.datum_params[l];if(0===k)return a.a=n,a.es=a.es,i;r=a.datum_params.length>3?d:c}return b.datum_type===e&&(b.a=g,b.es=h),(a.es!==b.es||a.a!==b.a||j(r)||j(b.datum_type))&&(a.geodetic_to_geocentric(i),j(a.datum_type)&&a.geocentric_to_wgs84(i),j(b.datum_type)&&b.geocentric_from_wgs84(i),b.geocentric_to_geodetic(i)),b.datum_type===e&&this.apply_gridshift(b,1,i),a.a=n,a.es=o,b.a=p,b.es=q,i}},{}],31:[function(a,b){function c(a){var b=this;if(2===arguments.length){var d=arguments[1];c[a]="string"==typeof d?"+"===d[0]?e(arguments[1]):f(arguments[1]):d}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?c.apply(b,a):c(a)});if("string"==typeof a){if(a in c)return c[a]}else"EPSG"in a?c["EPSG:"+a.EPSG]=a:"ESRI"in a?c["ESRI:"+a.ESRI]=a:"IAU2000"in a?c["IAU2000:"+a.IAU2000]=a:console.log(a);return}}var d=a("./global"),e=a("./projString"),f=a("./wkt");d(c),b.exports=c},{"./global":34,"./projString":37,"./wkt":65}],32:[function(a,b){var c=a("./constants/Datum"),d=a("./constants/Ellipsoid"),e=a("./extend"),f=a("./datum"),g=1e-10,h=.16666666666666666,i=.04722222222222222,j=.022156084656084655;b.exports=function(a){if(a.datumCode&&"none"!==a.datumCode){var b=c[a.datumCode];b&&(a.datum_params=b.towgs84?b.towgs84.split(","):null,a.ellps=b.ellipse,a.datumName=b.datumName?b.datumName:a.datumCode)}if(!a.a){var k=d[a.ellps]?d[a.ellps]:d.WGS84;e(a,k)}return a.rf&&!a.b&&(a.b=(1-1/a.rf)*a.a),(0===a.rf||Math.abs(a.a-a.b)<g)&&(a.sphere=!0,a.b=a.a),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=(a.a2-a.b2)/a.a2,a.e=Math.sqrt(a.es),a.R_A&&(a.a*=1-a.es*(h+a.es*(i+a.es*j)),a.a2=a.a*a.a,a.b2=a.b*a.b,a.es=0),a.ep2=(a.a2-a.b2)/a.b2,a.k0||(a.k0=1),a.axis||(a.axis="enu"),a.datum||(a.datum=f(a)),a}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":29,"./extend":33}],33:[function(a,b){b.exports=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a}},{}],34:[function(a,b){b.exports=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]}},{}],35:[function(a,b){var proj4=a("./core");proj4.defaultDatum="WGS84",proj4.Proj=a("./Proj"),proj4.WGS84=new proj4.Proj("WGS84"),proj4.Point=a("./Point"),proj4.toPoint=a("./common/toPoint"),proj4.defs=a("./defs"),proj4.transform=a("./transform"),proj4.mgrs=a("mgrs"),proj4.version=a("../package.json").version,a("./includedProjections")(proj4),b.exports=proj4},{"../package.json":67,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":28,"./defs":31,"./includedProjections":"gWUPNW","./transform":64,mgrs:66}],36:[function(a,b){function c(a){return"string"==typeof a}function d(a){return a in h}function e(a){var b=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return b.reduce(function(b,c){return b+1+a.indexOf(c)},0)}function f(a){return"+"===a[0]}function g(a){return c(a)?d(a)?h[a]:e(a)?i(a):f(a)?j(a):void 0:a}var h=a("./defs"),i=a("./wkt"),j=a("./projString");b.exports=g},{"./defs":31,"./projString":37,"./wkt":65}],37:[function(a,b){var c=.017453292519943295,d=a("./constants/PrimeMeridian");b.exports=function(a){var b={},e={};a.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).forEach(function(a){var b=a.split("=");b.push(!0),e[b[0].toLowerCase()]=b[1]});var f,g,h,i={proj:"projName",datum:"datumCode",rf:function(a){b.rf=parseFloat(a,10)},lat_0:function(a){b.lat0=a*c},lat_1:function(a){b.lat1=a*c},lat_2:function(a){b.lat2=a*c},lat_ts:function(a){b.lat_ts=a*c},lon_0:function(a){b.long0=a*c},lon_1:function(a){b.long1=a*c},lon_2:function(a){b.long2=a*c},alpha:function(a){b.alpha=parseFloat(a)*c},lonc:function(a){b.longc=a*c},x_0:function(a){b.x0=parseFloat(a,10)},y_0:function(a){b.y0=parseFloat(a,10)},k_0:function(a){b.k0=parseFloat(a,10)},k:function(a){b.k0=parseFloat(a,10)},r_a:function(){b.R_A=!0},zone:function(a){b.zone=parseInt(a,10)},south:function(){b.utmSouth=!0},towgs84:function(a){b.datum_params=a.split(",").map(function(a){return parseFloat(a,10)})},to_meter:function(a){b.to_meter=parseFloat(a,10)},from_greenwich:function(a){b.from_greenwich=a*c},pm:function(a){b.from_greenwich=(d[a]?d[a]:parseFloat(a,10))*c},nadgrids:function(a){"@null"===a?b.datumCode="none":b.nadgrids=a},axis:function(a){var c="ewnsud";3===a.length&&-1!==c.indexOf(a.substr(0,1))&&-1!==c.indexOf(a.substr(1,1))&&-1!==c.indexOf(a.substr(2,1))&&(b.axis=a)}};for(f in e)g=e[f],f in i?(h=i[f],"function"==typeof h?h(g):b[h]=g):b[f]=g;return"string"==typeof b.datumCode&&"WGS84"!==b.datumCode&&(b.datumCode=b.datumCode.toLowerCase()),b}},{"./constants/PrimeMeridian":27}],38:[function(a,b,c){function d(a,b){var c=g.length;return a.names?(g[c]=a,a.names.forEach(function(a){f[a.toLowerCase()]=c}),this):(console.log(b),!0)}var e=[a("./projections/merc"),a("./projections/longlat")],f={},g=[];c.add=d,c.get=function(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof f[b]&&g[f[b]]?g[f[b]]:void 0},c.start=function(){e.forEach(d)}},{"./projections/longlat":50,"./projections/merc":51}],39:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/qsfnz"),g=a("../common/adjust_lon"),h=a("../common/asinz");c.init=function(){Math.abs(this.lat1+this.lat2)<d||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=e(this.e3,this.sin_po,this.cos_po),this.qs1=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=e(this.e3,this.sin_po,this.cos_po),this.qs2=f(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=f(this.e3,this.sin_po,this.cos_po),this.ns0=Math.abs(this.lat1-this.lat2)>d?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},c.forward=function(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=f(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,h=this.ns0*g(b-this.long0),i=e*Math.sin(h)+this.x0,j=this.rh-e*Math.cos(h)+this.y0;return a.x=i,a.y=j,a},c.inverse=function(a){var b,c,d,e,f,h;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?h=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,h=this.phi1z(this.e3,c)),f=g(e/this.ns0+this.long0),a.x=f,a.y=h,a},c.phi1z=function(a,b){var c,e,f,g,i,j=h(.5*b);if(d>a)return j;for(var k=a*a,l=1;25>=l;l++)if(c=Math.sin(j),e=Math.cos(j),f=a*c,g=1-f*f,i=.5*g*g/e*(b/(1-k)-c/g+.5/a*Math.log((1-f)/(1+f))),j+=i,Math.abs(i)<=1e-7)return j;return null},c.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],40:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/mlfn"),h=a("../common/e0fn"),i=a("../common/e1fn"),j=a("../common/e2fn"),k=a("../common/e3fn"),l=a("../common/gN"),m=a("../common/asinz"),n=a("../common/imlfn");c.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},c.forward=function(a){var b,c,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.x,I=a.y,J=Math.sin(a.y),K=Math.cos(a.y),L=d(H-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=f?(a.x=this.x0+this.a*(e-I)*Math.sin(L),a.y=this.y0-this.a*(e-I)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(a.x=this.x0+this.a*(e+I)*Math.sin(L),a.y=this.y0+this.a*(e+I)*Math.cos(L),a):(B=this.sin_p12*J+this.cos_p12*K*Math.cos(L),z=Math.acos(B),A=z/Math.sin(z),a.x=this.x0+this.a*A*K*Math.sin(L),a.y=this.y0+this.a*A*(this.cos_p12*J-this.sin_p12*K*Math.cos(L)),a):(b=h(this.es),c=i(this.es),m=j(this.es),n=k(this.es),Math.abs(this.sin_p12-1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o-p)*Math.sin(L),a.y=this.y0-(o-p)*Math.cos(L),a):Math.abs(this.sin_p12+1)<=f?(o=this.a*g(b,c,m,n,e),p=this.a*g(b,c,m,n,I),a.x=this.x0+(o+p)*Math.sin(L),a.y=this.y0+(o+p)*Math.cos(L),a):(q=J/K,r=l(this.a,this.e,this.sin_p12),s=l(this.a,this.e,J),t=Math.atan((1-this.es)*q+this.es*r*this.sin_p12/(s*K)),u=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(t)-this.sin_p12*Math.cos(L)),C=0===u?Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.abs(Math.abs(u)-Math.PI)<=f?-Math.asin(this.cos_p12*Math.sin(t)-this.sin_p12*Math.cos(t)):Math.asin(Math.sin(L)*Math.cos(t)/Math.sin(u)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),w=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),x=v*w,y=w*w,D=C*C,E=D*C,F=E*C,G=F*C,z=r*C*(1-D*y*(1-y)/6+E/8*x*(1-2*y)+F/120*(y*(4-7*y)-3*v*v*(1-7*y))-G/48*x),a.x=this.x0+z*Math.sin(u),a.y=this.y0+z*Math.cos(u),a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*e*this.a)return;return c=b/this.a,o=Math.sin(c),p=Math.cos(c),q=this.long0,Math.abs(b)<=f?r=this.lat0:(r=m(p*this.sin_p12+a.y*o*this.cos_p12/b),s=Math.abs(this.lat0)-e,q=d(Math.abs(s)<=f?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*o,b*this.cos_p12*p-a.y*this.sin_p12*o))),a.x=q,a.y=r,a}return t=h(this.es),u=i(this.es),v=j(this.es),w=k(this.es),Math.abs(this.sin_p12-1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=x-b,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,-1*a.y)),a.x=q,a.y=r,a):Math.abs(this.sin_p12+1)<=f?(x=this.a*g(t,u,v,w,e),b=Math.sqrt(a.x*a.x+a.y*a.y),y=b-x,r=n(y/this.a,t,u,v,w),q=d(this.long0+Math.atan2(a.x,a.y)),a.x=q,a.y=r,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),B=Math.atan2(a.x,a.y),z=l(this.a,this.e,this.sin_p12),C=Math.cos(B),D=this.e*this.cos_p12*C,E=-D*D/(1-this.es),F=3*this.es*(1-E)*this.sin_p12*this.cos_p12*C/(1-this.es),G=b/z,H=G-E*(1+E)*Math.pow(G,3)/6-F*(1+3*E)*Math.pow(G,4)/24,I=1-E*H*H/2-G*H*H*H/6,A=Math.asin(this.sin_p12*Math.cos(H)+this.cos_p12*Math.sin(H)*C),q=d(this.long0+Math.asin(Math.sin(B)*Math.sin(H)/Math.cos(A))),r=Math.atan((1-this.es*I*this.sin_p12/Math.sin(A))*Math.tan(A)/(1-this.es)),a.x=q,a.y=r,a)},c.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(a,b,c){var d=a("../common/mlfn"),e=a("../common/e0fn"),f=a("../common/e1fn"),g=a("../common/e2fn"),h=a("../common/e3fn"),i=a("../common/gN"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=Math.PI/2,n=1e-10;c.init=function(){this.sphere||(this.e0=e(this.es),this.e1=f(this.es),this.e2=g(this.es),this.e3=h(this.es),this.ml0=this.a*d(this.e0,this.e1,this.e2,this.e3,this.lat0))},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=j(e-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(f)*Math.sin(e)),c=this.a*(Math.atan2(Math.tan(f),Math.cos(e))-this.lat0);else{var g=Math.sin(f),h=Math.cos(f),k=i(this.a,this.e,g),l=Math.tan(f)*Math.tan(f),m=e*Math.cos(f),n=m*m,o=this.es*h*h/(1-this.es),p=this.a*d(this.e0,this.e1,this.e2,this.e3,f);b=k*m*(1-n*l*(1/6-(8-l+8*o)*n/120)),c=p-this.ml0+k*g/h*n*(.5+(5-l+6*o)*n/24)}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=l(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-m)<=n)return a.x=this.long0,a.y=m,0>e&&(a.y*=-1),a;var o=i(this.a,this.e,Math.sin(h)),p=o*o*o/this.a/this.a*(1-this.es),q=Math.pow(Math.tan(h),2),r=d*this.a/o,s=r*r;b=h-o*Math.tan(h)/p*r*r*(.5-(1+3*q)*r*r/24),c=r*(1-s*(q/3+(1+3*q)*q*s/15))/Math.cos(h)}return a.x=j(c+this.long0),a.y=k(b),a},c.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/qsfnz"),f=a("../common/msfnz"),g=a("../common/iqsfnz");c.init=function(){this.sphere||(this.k0=f(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},c.forward=function(a){var b,c,f=a.x,g=a.y,h=d(f-this.long0);if(this.sphere)b=this.x0+this.a*h*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(g)/Math.cos(this.lat_ts);else{var i=e(this.e,Math.sin(g));b=this.x0+this.a*this.k0*h,c=this.y0+this.a*i*.5/this.k0}return a.x=b,a.y=c,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=d(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=g(this.e,2*a.y*this.k0/this.a),b=d(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a},c.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],43:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat");c.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},c.forward=function(a){var b=a.x,c=a.y,f=d(b-this.long0),g=e(c-this.lat0);return a.x=this.x0+this.a*f*this.rc,a.y=this.y0+this.a*g,a},c.inverse=function(a){var b=a.x,c=a.y;return a.x=d(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=e(this.lat0+(c-this.y0)/this.a),a},c.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],44:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/msfnz"),i=a("../common/mlfn"),j=a("../common/adjust_lon"),k=a("../common/adjust_lat"),l=a("../common/imlfn"),m=1e-10;c.init=function(){Math.abs(this.lat1+this.lat2)<m||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=h(this.e,this.sinphi,this.cosphi),this.ml1=i(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<m?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=h(this.e,this.sinphi,this.cosphi),this.ml2=i(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=i(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},c.forward=function(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=i(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*j(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a},c.inverse=function(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=j(this.long0+f/this.ns),d=k(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=l(g,this.e0,this.e1,this.e2,this.e3),e=j(this.long0+f/this.ns),a.x=e,a.y=d,a},c.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],45:[function(a,b,c){var d=Math.PI/4,e=a("../common/srat"),f=Math.PI/2,g=20;c.init=function(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+d)/(Math.pow(Math.tan(.5*this.lat0+d),this.C)*e(this.e*a,this.ratexp))},c.forward=function(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+d),this.C)*e(this.e*Math.sin(c),this.ratexp))-f,a.x=this.C*b,a},c.inverse=function(a){for(var b=1e-14,c=a.x/this.C,h=a.y,i=Math.pow(Math.tan(.5*h+d)/this.K,1/this.C),j=g;j>0&&(h=2*Math.atan(i*e(this.e*Math.sin(a.y),-.5*this.e))-f,!(Math.abs(h-a.y)<b));--j)a.y=h;return j?(a.x=c,a.y=h,a):null},c.names=["gauss"]},{"../common/srat":22}],46:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10,f=a("../common/asinz");c.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},c.forward=function(a){var b,c,f,g,h,i,j,k,l=a.x,m=a.y;return f=d(l-this.long0),b=Math.sin(m),c=Math.cos(m),g=Math.cos(f),i=this.sin_p14*b+this.cos_p14*c*g,h=1,i>0||Math.abs(i)<=e?(j=this.x0+this.a*h*c*Math.sin(f)/i,k=this.y0+this.a*h*(this.cos_p14*b-this.sin_p14*c*g)/i):(j=this.x0+this.infinity_dist*c*Math.sin(f),k=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*g)),a.x=j,a.y=k,a
},c.inverse=function(a){var b,c,e,g,h,i;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(g=Math.atan2(b,this.rc),c=Math.sin(g),e=Math.cos(g),i=f(e*this.sin_p14+a.y*c*this.cos_p14/b),h=Math.atan2(a.x*c,b*this.cos_p14*e-a.y*this.sin_p14*c),h=d(this.long0+h)):(i=this.phic0,h=0),a.x=h,a.y=i,a},c.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],47:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},c.forward=function(a){var b,c,e,f,g,h,i,j=a.x,k=a.y,l=d(j-this.long0);return b=Math.pow((1+this.e*Math.sin(k))/(1-this.e*Math.sin(k)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(k/2+this.s45),this.alfa)/b)-this.s45),e=-l*this.alfa,f=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(e)),g=Math.asin(Math.cos(c)*Math.sin(e)/Math.cos(f)),h=this.n*g,i=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(f/2+this.s45),this.n),a.y=i*Math.cos(h)/1,a.x=i*Math.sin(h)/1,this.czech||(a.y*=-1,a.x*=-1),a},c.inverse=function(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&15>k);return k>=15?null:a},c.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],48:[function(a,b,c){var d=Math.PI/2,e=Math.PI/4,f=1e-10,g=a("../common/qsfnz"),h=a("../common/adjust_lon");c.S_POLE=1,c.N_POLE=2,c.EQUIT=3,c.OBLIQ=4,c.init=function(){var a=Math.abs(this.lat0);if(this.mode=Math.abs(a-d)<f?this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<f?this.EQUIT:this.OBLIQ,this.es>0){var b;switch(this.qp=g(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=g(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},c.forward=function(a){var b,c,i,j,k,l,m,n,o,p,q=a.x,r=a.y;if(q=h(q-this.long0),this.sphere){if(k=Math.sin(r),p=Math.cos(r),i=Math.cos(q),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+p*i:1+this.sinph0*k+this.cosph0*p*i,f>=c)return null;c=Math.sqrt(2/c),b=c*p*Math.sin(q),c*=this.mode===this.EQUIT?k:this.cosph0*k-this.sinph0*p*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(r+this.phi0)<f)return null;c=e-.5*r,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(q),c*=i}}else{switch(m=0,n=0,o=0,i=Math.cos(q),j=Math.sin(q),k=Math.sin(r),l=g(this.e,k),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=l/this.qp,n=Math.sqrt(1-m*m)),this.mode){case this.OBLIQ:o=1+this.sinb1*m+this.cosb1*n*i;break;case this.EQUIT:o=1+n*i;break;case this.N_POLE:o=d+r,l=this.qp-l;break;case this.S_POLE:o=r-d,l=this.qp+l}if(Math.abs(o)<f)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:o=Math.sqrt(2/o),c=this.mode===this.OBLIQ?this.ymf*o*(this.cosb1*m-this.sinb1*n*i):(o=Math.sqrt(2/(1+n*i)))*m*this.ymf,b=this.xmf*o*n*j;break;case this.N_POLE:case this.S_POLE:l>=0?(b=(o=Math.sqrt(l))*j,c=i*(this.mode===this.S_POLE?o:-o)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,e,g,i,j,k,l=a.x/this.a,m=a.y/this.a;if(this.sphere){var n,o=0,p=0;if(n=Math.sqrt(l*l+m*m),c=.5*n,c>1)return null;switch(c=2*Math.asin(c),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(p=Math.sin(c),o=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(n)<=f?0:Math.asin(m*p/n),l*=p,m=o*n;break;case this.OBLIQ:c=Math.abs(n)<=f?this.phi0:Math.asin(o*this.sinph0+m*p*this.cosph0/n),l*=p*this.cosph0,m=(o-Math.sin(c)*this.sinph0)*n;break;case this.N_POLE:m=-m,c=d-c;break;case this.S_POLE:c-=d}b=0!==m||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,m):0}else{if(k=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,m*=this.dd,j=Math.sqrt(l*l+m*m),f>j)return a.x=0,a.y=this.phi0,a;g=2*Math.asin(.5*j/this.rq),e=Math.cos(g),l*=g=Math.sin(g),this.mode===this.OBLIQ?(k=e*this.sinb1+m*g*this.cosb1/j,i=this.qp*k,m=j*this.cosb1*e-m*this.sinb1*g):(k=m*g/j,i=this.qp*k,m=j*e)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(m=-m),i=l*l+m*m,!i)return a.x=0,a.y=this.phi0,a;k=1-i/this.qp,this.mode===this.S_POLE&&(k=-k)}b=Math.atan2(l,m),c=this.authlat(Math.asin(k),this.apa)}return a.x=h(this.long0+b),a.y=c,a},c.P00=.3333333333333333,c.P01=.17222222222222222,c.P02=.10257936507936508,c.P10=.06388888888888888,c.P11=.0664021164021164,c.P20=.016415012942191543,c.authset=function(a){var b,c=[];return c[0]=a*this.P00,b=a*a,c[0]+=b*this.P01,c[1]=b*this.P10,b*=a,c[0]+=b*this.P02,c[1]+=b*this.P11,c[2]=b*this.P20,c},c.authlat=function(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)},c.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],49:[function(a,b,c){var d=1e-10,e=a("../common/msfnz"),f=a("../common/tsfnz"),g=Math.PI/2,h=a("../common/sign"),i=a("../common/adjust_lon"),j=a("../common/phi2z");c.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<d)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),g=e(this.e,b,c),h=f(this.e,this.lat1,b),i=Math.sin(this.lat2),j=Math.cos(this.lat2),k=e(this.e,i,j),l=f(this.e,this.lat2,i),m=f(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>d?Math.log(g/k)/Math.log(h/l):b,isNaN(this.ns)&&(this.ns=b),this.f0=g/(this.ns*Math.pow(h,this.ns)),this.rh=this.a*this.f0*Math.pow(m,this.ns),this.title||(this.title="Lambert Conformal Conic")}},c.forward=function(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=d&&(c=h(c)*(g-2*d));var e,j,k=Math.abs(Math.abs(c)-g);if(k>d)e=f(this.e,c,Math.sin(c)),j=this.a*this.f0*Math.pow(e,this.ns);else{if(k=c*this.ns,0>=k)return null;j=0}var l=this.ns*i(b-this.long0);return a.x=this.k0*j*Math.sin(l)+this.x0,a.y=this.k0*(this.rh-j*Math.cos(l))+this.y0,a},c.inverse=function(a){var b,c,d,e,f,h=(a.x-this.x0)/this.k0,k=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(h*h+k*k),c=1):(b=-Math.sqrt(h*h+k*k),c=-1);var l=0;if(0!==b&&(l=Math.atan2(c*h,c*k)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=j(this.e,d),-9999===e)return null}else e=-g;return f=i(l/this.ns+this.long0),a.x=f,a.y=e,a},c.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],50:[function(a,b,c){function d(a){return a}c.init=function(){},c.forward=d,c.inverse=d,c.names=["longlat","identity"]},{}],51:[function(a,b,c){var d=a("../common/msfnz"),e=Math.PI/2,f=1e-10,g=57.29577951308232,h=a("../common/adjust_lon"),i=Math.PI/4,j=a("../common/tsfnz"),k=a("../common/phi2z");c.init=function(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):d(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},c.forward=function(a){var b=a.x,c=a.y;if(c*g>90&&-90>c*g&&b*g>180&&-180>b*g)return null;var d,k;if(Math.abs(Math.abs(c)-e)<=f)return null;if(this.sphere)d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*c));else{var l=Math.sin(c),m=j(this.e,c,l);d=this.x0+this.a*this.k0*h(b-this.long0),k=this.y0-this.a*this.k0*Math.log(m)}return a.x=d,a.y=k,a},c.inverse=function(a){var b,c,d=a.x-this.x0,f=a.y-this.y0;if(this.sphere)c=e-2*Math.atan(Math.exp(-f/(this.a*this.k0)));else{var g=Math.exp(-f/(this.a*this.k0));if(c=k(this.e,g),-9999===c)return null}return b=h(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a},c.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],52:[function(a,b,c){var d=a("../common/adjust_lon");c.init=function(){},c.forward=function(a){var b=a.x,c=a.y,e=d(b-this.long0),f=this.x0+this.a*e,g=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=f,a.y=g,a},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b=d(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a},c.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],53:[function(a,b,c){var d=a("../common/adjust_lon"),e=1e-10;c.init=function(){},c.forward=function(a){for(var b=a.x,c=a.y,f=d(b-this.long0),g=c,h=Math.PI*Math.sin(c),i=0;!0;i++){var j=-(g+Math.sin(g)-h)/(1+Math.cos(g));if(g+=j,Math.abs(j)<e)break}g/=2,Math.PI/2-Math.abs(c)<e&&(f=0);var k=.900316316158*this.a*f*Math.cos(g)+this.x0,l=1.4142135623731*this.a*Math.sin(g)+this.y0;return a.x=k,a.y=l,a},c.inverse=function(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var e=d(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));e<-Math.PI&&(e=-Math.PI),e>Math.PI&&(e=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var f=Math.asin(c);return a.x=e,a.y=f,a},c.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],54:[function(a,b,c){var d=484813681109536e-20;c.iterations=1,c.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},c.forward=function(a){var b,c=a.x,e=a.y,f=e-this.lat0,g=c-this.long0,h=f/d*1e-5,i=g,j=1,k=0;for(b=1;10>=b;b++)j*=h,k+=this.A[b]*j;var l,m,n=k,o=i,p=1,q=0,r=0,s=0;for(b=1;6>=b;b++)l=p*n-q*o,m=q*n+p*o,p=l,q=m,r=r+this.B_re[b]*p-this.B_im[b]*q,s=s+this.B_im[b]*p+this.B_re[b]*q;return a.x=s*this.a+this.x0,a.y=r*this.a+this.y0,a},c.inverse=function(a){var b,c,e,f=a.x,g=a.y,h=f-this.x0,i=g-this.y0,j=i/this.a,k=h/this.a,l=1,m=0,n=0,o=0;for(b=1;6>=b;b++)c=l*j-m*k,e=m*j+l*k,l=c,m=e,n=n+this.C_re[b]*l-this.C_im[b]*m,o=o+this.C_im[b]*l+this.C_re[b]*m;for(var p=0;p<this.iterations;p++){var q,r,s=n,t=o,u=j,v=k;for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,u+=(b-1)*(this.B_re[b]*s-this.B_im[b]*t),v+=(b-1)*(this.B_im[b]*s+this.B_re[b]*t);s=1,t=0;var w=this.B_re[1],x=this.B_im[1];for(b=2;6>=b;b++)q=s*n-t*o,r=t*n+s*o,s=q,t=r,w+=b*(this.B_re[b]*s-this.B_im[b]*t),x+=b*(this.B_im[b]*s+this.B_re[b]*t);var y=w*w+x*x;n=(u*w+v*x)/y,o=(v*w-u*x)/y}var z=n,A=o,B=1,C=0;for(b=1;9>=b;b++)B*=z,C+=this.D[b]*B;var D=this.lat0+C*d*1e5,E=this.long0+A;return a.x=E,a.y=D,a},c.names=["New_Zealand_Map_Grid","nzmg"]},{}],55:[function(a,b,c){var d=a("../common/tsfnz"),e=a("../common/adjust_lon"),f=a("../common/phi2z"),g=Math.PI/2,h=Math.PI/4,i=1e-10;c.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var f=d(this.e,this.lat0,a),g=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));1>g*g&&(g=1);var h,i;if(isNaN(this.longc)){var j=d(this.e,this.lat1,Math.sin(this.lat1)),k=d(this.e,this.lat2,Math.sin(this.lat2));this.el=this.lat0>=0?(g+Math.sqrt(g*g-1))*Math.pow(f,this.bl):(g-Math.sqrt(g*g-1))*Math.pow(f,this.bl);var l=Math.pow(j,this.bl),m=Math.pow(k,this.bl);h=this.el/l,i=.5*(h-1/h);var n=(this.el*this.el-m*l)/(this.el*this.el+m*l),o=(m-l)/(m+l),p=e(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(n*Math.tan(.5*this.bl*p)/o)/this.bl,this.long0=e(this.long0);var q=e(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*q)/i),this.alpha=Math.asin(g*Math.sin(this.gamma0))}else h=this.lat0>=0?g+Math.sqrt(g*g-1):g-Math.sqrt(g*g-1),this.el=h*Math.pow(f,this.bl),i=.5*(h-1/h),this.gamma0=Math.asin(Math.sin(this.alpha)/g),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.uc=this.no_off?0:this.lat0>=0?this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha)):-1*this.al/this.bl*Math.atan2(Math.sqrt(g*g-1),Math.cos(this.alpha))},c.forward=function(a){var b,c,f,j=a.x,k=a.y,l=e(j-this.long0);if(Math.abs(Math.abs(k)-g)<=i)f=k>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(h+f*this.gamma0*.5)),b=-1*f*g*this.al/this.bl;else{var m=d(this.e,k,Math.sin(k)),n=this.el/Math.pow(m,this.bl),o=.5*(n-1/n),p=.5*(n+1/n),q=Math.sin(this.bl*l),r=(o*Math.sin(this.gamma0)-q*Math.cos(this.gamma0))/p;c=Math.abs(Math.abs(r)-1)<=i?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-r)/(1+r))/this.bl,b=Math.abs(Math.cos(this.bl*l))<=i?this.al*this.bl*l:this.al*Math.atan2(o*Math.cos(this.gamma0)+q*Math.sin(this.gamma0),Math.cos(this.bl*l))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a},c.inverse=function(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),h=.5*(d-1/d),j=.5*(d+1/d),k=Math.sin(this.bl*b/this.al),l=(k*Math.cos(this.gamma0)+h*Math.sin(this.gamma0))/j,m=Math.pow(this.el/Math.sqrt((1+l)/(1-l)),1/this.bl);return Math.abs(l-1)<i?(a.x=this.long0,a.y=g):Math.abs(l+1)<i?(a.x=this.long0,a.y=-1*g):(a.y=f(this.e,m),a.x=e(this.long0-Math.atan2(h*Math.cos(this.gamma0)-k*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a},c.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],56:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/adjust_lon"),i=a("../common/adjust_lat"),j=a("../common/mlfn"),k=1e-10,l=a("../common/gN"),m=20;c.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*j(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=h(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=k?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(i(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=k)b=this.a*g,c=-1*this.ml0;else{var m=l(this.a,this.e,Math.sin(f))/Math.tan(f);b=m*Math.sin(d),c=this.a*j(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+m*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a},c.inverse=function(a){var b,c,d,e,f,g,i,l,n;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=k)b=h(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,i=d*d/this.a/this.a+g*g,l=g;var o;for(f=m;f;--f)if(o=Math.tan(l),n=-1*(g*(l*o+1)-l-.5*(l*l+i)*o)/((l-g)/o-1),l+=n,Math.abs(n)<=k){c=l;break}b=h(this.long0+Math.asin(d*Math.tan(l)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=k)c=0,b=h(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,i=d*d/this.a/this.a+g*g,l=g;var p,q,r,s,t;for(f=m;f;--f)if(t=this.e*Math.sin(l),p=Math.sqrt(1-t*t)*Math.tan(l),q=this.a*j(this.e0,this.e1,this.e2,this.e3,l),r=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),s=q/this.a,n=(g*(p*s+1)-s-.5*p*(s*s+i))/(this.es*Math.sin(2*l)*(s*s+i-2*g*s)/(4*p)+(g-s)*(p*r-2/Math.sin(2*l))-r),l-=n,Math.abs(n)<=k){c=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=h(this.long0+Math.asin(d*p/this.a)/Math.sin(c))}return a.x=b,a.y=c,a},c.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],57:[function(a,b,c){var d=a("../common/adjust_lon"),e=a("../common/adjust_lat"),f=a("../common/pj_enfn"),g=20,h=a("../common/pj_mlfn"),i=a("../common/pj_inv_mlfn"),j=Math.PI/2,k=1e-10,l=a("../common/asinz");c.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=f(this.es)},c.forward=function(a){var b,c,e=a.x,f=a.y;if(e=d(e-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(f),j=g;j;--j){var l=(this.m*f+Math.sin(f)-i)/(this.m+Math.cos(f));if(f-=l,Math.abs(l)<k)break}else f=1!==this.n?Math.asin(this.n*Math.sin(f)):f;b=this.a*this.C_x*e*(this.m+Math.cos(f)),c=this.a*this.C_y*f}else{var m=Math.sin(f),n=Math.cos(f);c=this.a*h(f,m,n,this.en),b=this.a*e*n/Math.sqrt(1-this.es*m*m)}return a.x=b,a.y=c,a},c.inverse=function(a){var b,c,f,g;return a.x-=this.x0,f=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,f/=this.C_x*(this.m+Math.cos(b)),this.m?b=l((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=l(Math.sin(b)/this.n)),f=d(f+this.long0),b=e(b)):(b=i(a.y/this.a,this.es,this.en),g=Math.abs(b),j>g?(g=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*g*g)/(this.a*Math.cos(b)),f=d(c)):j>g-k&&(f=this.long0)),a.x=f,a.y=b,a},c.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],58:[function(a,b,c){c.init=function(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j},c.forward=function(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a},c.inverse=function(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a},c.names=["somerc"]},{}],59:[function(a,b,c){var d=Math.PI/2,e=1e-10,f=a("../common/sign"),g=a("../common/msfnz"),h=a("../common/tsfnz"),i=a("../common/phi2z"),j=a("../common/adjust_lon");c.ssfn_=function(a,b,c){return b*=c,Math.tan(.5*(d+a))*Math.pow((1-b)/(1+b),.5*c)},c.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*(1+f(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=e&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=e&&(this.k0=.5*this.cons*g(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/h(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=g(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-d,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},c.forward=function(a){var b,c,f,g,i,k,l=a.x,m=a.y,n=Math.sin(m),o=Math.cos(m),p=j(l-this.long0);return Math.abs(Math.abs(l-this.long0)-Math.PI)<=e&&Math.abs(m+this.lat0)<=e?(a.x=0/0,a.y=0/0,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*n+this.coslat0*o*Math.cos(p)),a.x=this.a*b*o*Math.sin(p)+this.x0,a.y=this.a*b*(this.coslat0*n-this.sinlat0*o*Math.cos(p))+this.y0,a):(c=2*Math.atan(this.ssfn_(m,n,this.e))-d,g=Math.cos(c),f=Math.sin(c),Math.abs(this.coslat0)<=e?(i=h(this.e,m*this.con,this.con*n),k=2*this.a*this.k0*i/this.cons,a.x=this.x0+k*Math.sin(l-this.long0),a.y=this.y0-this.con*k*Math.cos(l-this.long0),a):(Math.abs(this.sinlat0)<e?(b=2*this.a*this.k0/(1+g*Math.cos(p)),a.y=b*f):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*g*Math.cos(p))),a.y=b*(this.cosX0*f-this.sinX0*g*Math.cos(p))+this.y0),a.x=b*g*Math.sin(p)+this.x0,a))},c.inverse=function(a){a.x-=this.x0,a.y-=this.y0;var b,c,f,g,h,k=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var l=2*Math.atan(k/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,e>=k?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(l)*this.sinlat0+a.y*Math.sin(l)*this.coslat0/k),b=j(Math.abs(this.coslat0)<e?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(l),k*this.coslat0*Math.cos(l)-a.y*this.sinlat0*Math.sin(l))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=e){if(e>=k)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,f=k*this.cons/(2*this.a*this.k0),c=this.con*i(this.e,f),b=this.con*j(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else g=2*Math.atan(k*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,e>=k?h=this.X0:(h=Math.asin(Math.cos(g)*this.sinX0+a.y*Math.sin(g)*this.cosX0/k),b=j(this.long0+Math.atan2(a.x*Math.sin(g),k*this.cosX0*Math.cos(g)-a.y*this.sinX0*Math.sin(g)))),c=-1*i(this.e,Math.tan(.5*(d+h)));return a.x=b,a.y=c,a},c.names=["stere"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],60:[function(a,b,c){var d=a("./gauss"),e=a("../common/adjust_lon");c.init=function(){d.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},c.forward=function(a){var b,c,f,g;return a.x=e(a.x-this.long0),d.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),f=Math.cos(a.x),g=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*f),a.x=g*c*Math.sin(a.x),a.y=g*(this.cosc0*b-this.sinc0*c*f),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a},c.inverse=function(a){var b,c,f,g,h;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,h=Math.sqrt(a.x*a.x+a.y*a.y)){var i=2*Math.atan2(h,this.R2);b=Math.sin(i),c=Math.cos(i),g=Math.asin(c*this.sinc0+a.y*b*this.cosc0/h),f=Math.atan2(a.x*b,h*this.cosc0*c-a.y*this.sinc0*b)}else g=this.phic0,f=0;return a.x=f,a.y=g,d.inverse.apply(this,[a]),a.x=e(a.x+this.long0),a},c.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":45}],61:[function(a,b,c){var d=a("../common/e0fn"),e=a("../common/e1fn"),f=a("../common/e2fn"),g=a("../common/e3fn"),h=a("../common/mlfn"),i=a("../common/adjust_lon"),j=Math.PI/2,k=1e-10,l=a("../common/sign"),m=a("../common/asinz");c.init=function(){this.e0=d(this.es),this.e1=e(this.es),this.e2=f(this.es),this.e3=g(this.es),this.ml0=this.a*h(this.e0,this.e1,this.e2,this.e3,this.lat0)},c.forward=function(a){var b,c,d,e=a.x,f=a.y,g=i(e-this.long0),j=Math.sin(f),k=Math.cos(f);if(this.sphere){var l=k*Math.sin(g);if(Math.abs(Math.abs(l)-1)<1e-10)return 93;c=.5*this.a*this.k0*Math.log((1+l)/(1-l)),b=Math.acos(k*Math.cos(g)/Math.sqrt(1-l*l)),0>f&&(b=-b),d=this.a*this.k0*(b-this.lat0)}else{var m=k*g,n=Math.pow(m,2),o=this.ep2*Math.pow(k,2),p=Math.tan(f),q=Math.pow(p,2);b=1-this.es*Math.pow(j,2);var r=this.a/Math.sqrt(b),s=this.a*h(this.e0,this.e1,this.e2,this.e3,f);c=this.k0*r*m*(1+n/6*(1-q+o+n/20*(5-18*q+Math.pow(q,2)+72*o-58*this.ep2)))+this.x0,d=this.k0*(s-this.ml0+r*p*n*(.5+n/24*(5-q+9*o+4*Math.pow(o,2)+n/30*(61-58*q+Math.pow(q,2)+600*o-330*this.ep2))))+this.y0}return a.x=c,a.y=d,a},c.inverse=function(a){var b,c,d,e,f,g,h=6;if(this.sphere){var n=Math.exp(a.x/(this.a*this.k0)),o=.5*(n-1/n),p=this.lat0+a.y/(this.a*this.k0),q=Math.cos(p);b=Math.sqrt((1-q*q)/(1+o*o)),f=m(b),0>p&&(f=-f),g=0===o&&0===q?this.long0:i(Math.atan2(o,q)+this.long0)}else{var r=a.x-this.x0,s=a.y-this.y0;for(b=(this.ml0+s/this.k0)/this.a,c=b,e=0;!0&&(d=(b+this.e1*Math.sin(2*c)-this.e2*Math.sin(4*c)+this.e3*Math.sin(6*c))/this.e0-c,c+=d,!(Math.abs(d)<=k));e++)if(e>=h)return 95;if(Math.abs(c)<j){var t=Math.sin(c),u=Math.cos(c),v=Math.tan(c),w=this.ep2*Math.pow(u,2),x=Math.pow(w,2),y=Math.pow(v,2),z=Math.pow(y,2);b=1-this.es*Math.pow(t,2);var A=this.a/Math.sqrt(b),B=A*(1-this.es)/b,C=r/(A*this.k0),D=Math.pow(C,2);f=c-A*v*D/B*(.5-D/24*(5+3*y+10*w-4*x-9*this.ep2-D/30*(61+90*y+298*w+45*z-252*this.ep2-3*x))),g=i(this.long0+C*(1-D/6*(1+2*y+w-D/20*(5-2*w+28*y-3*x+8*this.ep2+24*z)))/u)}else f=j*l(s),g=this.long0}return a.x=g,a.y=f,a},c.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],62:[function(a,b,c){var d=.017453292519943295,e=a("./tmerc");c.dependsOn="tmerc",c.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*d,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,e.init.apply(this),this.forward=e.forward,this.inverse=e.inverse)},c.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":61}],63:[function(a,b,c){var d=a("../common/adjust_lon"),e=Math.PI/2,f=1e-10,g=a("../common/asinz");c.init=function(){this.R=this.a},c.forward=function(a){var b,c,h=a.x,i=a.y,j=d(h-this.long0);Math.abs(i)<=f&&(b=this.x0+this.R*j,c=this.y0);var k=g(2*Math.abs(i/Math.PI));(Math.abs(j)<=f||Math.abs(Math.abs(i)-e)<=f)&&(b=this.x0,c=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*k):this.y0+Math.PI*this.R*-Math.tan(.5*k));var l=.5*Math.abs(Math.PI/j-j/Math.PI),m=l*l,n=Math.sin(k),o=Math.cos(k),p=o/(n+o-1),q=p*p,r=p*(2/n-1),s=r*r,t=Math.PI*this.R*(l*(p-s)+Math.sqrt(m*(p-s)*(p-s)-(s+m)*(q-s)))/(s+m);0>j&&(t=-t),b=this.x0+t;var u=m+p;return t=Math.PI*this.R*(r*u-l*Math.sqrt((s+m)*(m+1)-u*u))/(s+m),c=i>=0?this.y0+t:this.y0-t,a.x=b,a.y=c,a},c.inverse=function(a){var b,c,e,g,h,i,j,k,l,m,n,o,p;return a.x-=this.x0,a.y-=this.y0,n=Math.PI*this.R,e=a.x/n,g=a.y/n,h=e*e+g*g,i=-Math.abs(g)*(1+h),j=i-2*g*g+e*e,k=-2*i+1+2*g*g+h*h,p=g*g/k+(2*j*j*j/k/k/k-9*i*j/k/k)/27,l=(i-j*j/3/k)/k,m=2*Math.sqrt(-l/3),n=3*p/l/m,Math.abs(n)>1&&(n=n>=0?1:-1),o=Math.acos(n)/3,c=a.y>=0?(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI:-(-m*Math.cos(o+Math.PI/3)-j/3/k)*Math.PI,b=Math.abs(e)<f?this.long0:d(this.long0+Math.PI*(h-1+Math.sqrt(1+2*(e*e-g*g)+h*h))/2/e),a.x=b,a.y=c,a},c.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],64:[function(a,b){var c=.017453292519943295,d=57.29577951308232,e=1,f=2,g=a("./datum_transform"),h=a("./adjust_axis"),i=a("./Proj"),j=a("./common/toPoint");b.exports=function k(a,b,l){function m(a,b){return(a.datum.datum_type===e||a.datum.datum_type===f)&&"WGS84"!==b.datumCode}var n;return Array.isArray(l)&&(l=j(l)),a.datum&&b.datum&&(m(a,b)||m(b,a))&&(n=new i("WGS84"),k(a,n,l),a=n),"enu"!==a.axis&&h(a,!1,l),"longlat"===a.projName?(l.x*=c,l.y*=c):(a.to_meter&&(l.x*=a.to_meter,l.y*=a.to_meter),a.inverse(l)),a.from_greenwich&&(l.x+=a.from_greenwich),l=g(a.datum,b.datum,l),b.from_greenwich&&(l.x-=b.from_greenwich),"longlat"===b.projName?(l.x*=d,l.y*=d):(b.forward(l),b.to_meter&&(l.x/=b.to_meter,l.y/=b.to_meter)),"enu"!==b.axis&&h(b,!0,l),l}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":30}],65:[function(a,b){function c(a,b,c){a[b]=c.map(function(a){var b={};return d(a,b),b}).reduce(function(a,b){return i(a,b)},{})}function d(a,b){var e;return Array.isArray(a)?(e=a.shift(),"PARAMETER"===e&&(e=a.shift()),1===a.length?Array.isArray(a[0])?(b[e]={},d(a[0],b[e])):b[e]=a[0]:a.length?"TOWGS84"===e?b[e]=a:(b[e]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(e)>-1?(b[e]={name:a[0].toLowerCase(),convert:a[1]},3===a.length&&(b[e].auth=a[2])):"SPHEROID"===e?(b[e]={name:a[0],a:a[1],rf:a[2]},4===a.length&&(b[e].auth=a[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(e)>-1?(a[0]=["name",a[0]],c(b,e,a)):a.every(function(a){return Array.isArray(a)})?c(b,e,a):d(a,b[e])):b[e]=!0,void 0):void(b[a]=!0)}function e(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function f(a){return a*h}function g(a){function b(b){var c=a.to_meter||1;return parseFloat(b,10)*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):a.projName="object"==typeof a.PROJECTION?Object.keys(a.PROJECTION)[0]:a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&(a.to_meter=parseFloat(a.UNIT.convert,10))),a.GEOGCS&&(a.datumCode=a.GEOGCS.DATUM?a.GEOGCS.DATUM.name.toLowerCase():a.GEOGCS.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===a.datumCode||"new_zealand_1949"===a.datumCode)&&(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),a.GEOGCS.DATUM&&a.GEOGCS.DATUM.SPHEROID&&(a.ellps=a.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=a.GEOGCS.DATUM.SPHEROID.a,a.rf=parseFloat(a.GEOGCS.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);
var c=function(b){return e(a,b)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",f],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",f],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",f],["lat0","latitude_of_origin",f],["lat0","standard_parallel_1",f],["lat1","standard_parallel_1",f],["lat2","standard_parallel_2",f],["alpha","azimuth",f],["srsCode","name"]];d.forEach(c),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.PROJECTION&&"Lambert_Azimuthal_Equal_Area"!==a.PROJECTION||(a.long0=a.longc)}var h=.017453292519943295,i=a("./extend");b.exports=function(a,b){var c=JSON.parse((","+a).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]')),e=c.shift(),f=c.shift();c.unshift(["name",f]),c.unshift(["type",e]),c.unshift("output");var h={};return d(c,h),g(h.output),i(b,h.output)}},{"./extend":33}],66:[function(a,b,c){function d(a){return a*(Math.PI/180)}function e(a){return 180*(a/Math.PI)}function f(a){var b,c,e,f,g,i,j,k,l,m=a.lat,n=a.lon,o=6378137,p=.00669438,q=.9996,r=d(m),s=d(n);l=Math.floor((n+180)/6)+1,180===n&&(l=60),m>=56&&64>m&&n>=3&&12>n&&(l=32),m>=72&&84>m&&(n>=0&&9>n?l=31:n>=9&&21>n?l=33:n>=21&&33>n?l=35:n>=33&&42>n&&(l=37)),b=6*(l-1)-180+3,k=d(b),c=p/(1-p),e=o/Math.sqrt(1-p*Math.sin(r)*Math.sin(r)),f=Math.tan(r)*Math.tan(r),g=c*Math.cos(r)*Math.cos(r),i=Math.cos(r)*(s-k),j=o*((1-p/4-3*p*p/64-5*p*p*p/256)*r-(3*p/8+3*p*p/32+45*p*p*p/1024)*Math.sin(2*r)+(15*p*p/256+45*p*p*p/1024)*Math.sin(4*r)-35*p*p*p/3072*Math.sin(6*r));var t=q*e*(i+(1-f+g)*i*i*i/6+(5-18*f+f*f+72*g-58*c)*i*i*i*i*i/120)+5e5,u=q*(j+e*Math.tan(r)*(i*i/2+(5-f+9*g+4*g*g)*i*i*i*i/24+(61-58*f+f*f+600*g-330*c)*i*i*i*i*i*i/720));return 0>m&&(u+=1e7),{northing:Math.round(u),easting:Math.round(t),zoneNumber:l,zoneLetter:h(m)}}function g(a){var b=a.northing,c=a.easting,d=a.zoneLetter,f=a.zoneNumber;if(0>f||f>60)return null;var h,i,j,k,l,m,n,o,p,q,r=.9996,s=6378137,t=.00669438,u=(1-Math.sqrt(1-t))/(1+Math.sqrt(1-t)),v=c-5e5,w=b;"N">d&&(w-=1e7),o=6*(f-1)-180+3,h=t/(1-t),n=w/r,p=n/(s*(1-t/4-3*t*t/64-5*t*t*t/256)),q=p+(3*u/2-27*u*u*u/32)*Math.sin(2*p)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*p)+151*u*u*u/96*Math.sin(6*p),i=s/Math.sqrt(1-t*Math.sin(q)*Math.sin(q)),j=Math.tan(q)*Math.tan(q),k=h*Math.cos(q)*Math.cos(q),l=s*(1-t)/Math.pow(1-t*Math.sin(q)*Math.sin(q),1.5),m=v/(i*r);var x=q-i*Math.tan(q)/l*(m*m/2-(5+3*j+10*k-4*k*k-9*h)*m*m*m*m/24+(61+90*j+298*k+45*j*j-252*h-3*k*k)*m*m*m*m*m*m/720);x=e(x);var y=(m-(1+2*j+k)*m*m*m/6+(5-2*k+28*j-3*k*k+8*h+24*j*j)*m*m*m*m*m/120)/Math.cos(q);y=o+e(y);var z;if(a.accuracy){var A=g({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});z={top:A.lat,right:A.lon,bottom:x,left:y}}else z={lat:x,lon:y};return z}function h(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function i(a,b){var c=""+a.easting,d=""+a.northing;return a.zoneNumber+a.zoneLetter+j(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function j(a,b,c){var d=k(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return l(e,f,d)}function k(a){var b=a%q;return 0===b&&(b=q),b}function l(a,b,c){var d=c-1,e=r.charCodeAt(d),f=s.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>x&&(g=g-x+t-1,i=!0),(g===u||u>e&&g>u||(g>u||u>e)&&i)&&g++,(g===v||v>e&&g>v||(g>v||v>e)&&i)&&(g++,g===u&&g++),g>x&&(g=g-x+t-1),h>w?(h=h-w+t-1,i=!0):i=!1,(h===u||u>f&&h>u||(h>u||u>f)&&i)&&h++,(h===v||v>f&&h>v||(h>v||v>f)&&i)&&(h++,h===u&&h++),h>w&&(h=h-w+t-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function m(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=k(g),j=n(d.charAt(0),i),l=o(d.charAt(1),i);l<p(h);)l+=2e6;var m=c-f;if(m%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var q,r,s,t,u,v=m/2,w=0,x=0;return v>0&&(q=1e5/Math.pow(10,v),r=a.substring(f,f+v),w=parseFloat(r)*q,s=a.substring(f+v),x=parseFloat(s)*q),t=w+j,u=x+l,{easting:t,northing:u,zoneLetter:h,zoneNumber:g,accuracy:q}}function n(a,b){for(var c=r.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>x){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function o(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=s.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===u&&c++,c===v&&c++,c>w){if(e)throw"Bad character: "+a;c=t,e=!0}d+=1e5}return d}function p(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}var q=6,r="AJSAJS",s="AFAFAF",t=65,u=73,v=79,w=86,x=90;c.forward=function(a,b){return b=b||5,i(f({lat:a[1],lon:a[0]}),b)},c.inverse=function(a){var b=g(m(a.toUpperCase()));return[b.left,b.bottom,b.right,b.top]},c.toPoint=function(a){var b=c.inverse(a);return[(b[2]+b[0])/2,(b[3]+b[1])/2]}},{}],67:[function(a,b){b.exports={name:"proj4",version:"2.2.2",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~3.24.5","grunt-browserify":"~1.3.0","grunt-contrib-uglify":"~0.3.2",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"0.0.0"}}},{}],"./includedProjections":[function(a,b){b.exports=a("gWUPNW")},{}],gWUPNW:[function(a,b){var c=[a("./lib/projections/tmerc"),a("./lib/projections/utm"),a("./lib/projections/sterea"),a("./lib/projections/stere"),a("./lib/projections/somerc"),a("./lib/projections/omerc"),a("./lib/projections/lcc"),a("./lib/projections/krovak"),a("./lib/projections/cass"),a("./lib/projections/laea"),a("./lib/projections/aea"),a("./lib/projections/gnom"),a("./lib/projections/cea"),a("./lib/projections/eqc"),a("./lib/projections/poly"),a("./lib/projections/nzmg"),a("./lib/projections/mill"),a("./lib/projections/sinu"),a("./lib/projections/moll"),a("./lib/projections/eqdc"),a("./lib/projections/vandg"),a("./lib/projections/aeqd")];b.exports=function(proj4){c.forEach(function(a){proj4.Proj.projections.add(a)})}},{"./lib/projections/aea":39,"./lib/projections/aeqd":40,"./lib/projections/cass":41,"./lib/projections/cea":42,"./lib/projections/eqc":43,"./lib/projections/eqdc":44,"./lib/projections/gnom":46,"./lib/projections/krovak":47,"./lib/projections/laea":48,"./lib/projections/lcc":49,"./lib/projections/mill":52,"./lib/projections/moll":53,"./lib/projections/nzmg":54,"./lib/projections/omerc":55,"./lib/projections/poly":56,"./lib/projections/sinu":57,"./lib/projections/somerc":58,"./lib/projections/stere":59,"./lib/projections/sterea":60,"./lib/projections/tmerc":61,"./lib/projections/utm":62,"./lib/projections/vandg":63}]},{},[35])(35)});
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.geojson2svg=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(){function explode(g){return multies.indexOf(g.type)>-1?g.coordinates.map(function(part){var single={};return single.type=g.type.replace("Multi",""),single.coordinates=part,g.crs&&(single.crs=g.crs),single}):!1}function implode(gs){var sameType=gs.every(function(g){return singles.indexOf(g.type)>-1}),crs=gs[0].crs||0,sameCrs=gs.every(function(g){var gcrs=g.crs||0;return gcrs==crs});if(sameType&&sameCrs){var multi={};return multi.type="Multi"+gs[0].type,multi.coordinates=[],0!=crs&&(multi.crs=crs),gs.forEach(function(g){multi.coordinates.push(g.coordinates)}),multi}return!1}var singles=["Point","LineString","Polygon"],multies=["MultiPoint","MultiLineString","MultiPolygon"],multigeojson={explode:explode,implode:implode};"undefined"!=typeof module&&module.exports?module.exports=multigeojson:window&&(window.multigeojson=multigeojson)}()},{}],2:[function(require,module,exports){function getCoordString(coords,res,origin){var coordStr=coords.map(function(coord){return(coord[0]-origin.x)/res+","+(origin.y-coord[1])/res});return coordStr.join(" ")}function point(geom,res,origin,opt){var r=opt&&opt.r?opt.r:1,pointAsCircle=opt&&opt.hasOwnProperty("pointAsCircle")?opt.pointAsCircle:!1,coords=getCoordString([geom.coordinates],res,origin);return pointAsCircle?[coords]:["M"+coords+" m"+-r+",0 a"+r+","+r+" 0 1,1 "+2*r+",0 a"+r+","+r+" 0 1,1 "+-2*r+",0"]}function multiPoint(geom,res,origin,opt){var explode=opt&&opt.hasOwnProperty("explode")?opt.explode:!1,paths=multi.explode(geom).map(function(single){return point(single,res,origin,opt)[0]});return explode?paths:[paths.join(" ")]}function lineString(geom,res,origin,otp){var coords=getCoordString(geom.coordinates,res,origin),path="M"+coords;return[path]}function multiLineString(geom,res,origin,opt){var explode=opt&&opt.hasOwnProperty("explode")?opt.explode:!1,paths=multi.explode(geom).map(function(single){return lineString(single,res,origin,opt)[0]});return explode?paths:[paths.join(" ")]}function polygon(geom,res,origin,opt){var mainStr,holes;mainStr=getCoordString(geom.coordinates[0],res,origin),geom.coordinates.length>1&&(holes=geom.coordinates.slice(1,geom.coordinates.length));var path="M"+mainStr;if(holes)for(var i=0;i<holes.length;i++)path+=" M"+getCoordString(holes[i],res,origin);return path+="Z",[path]}function multiPolygon(geom,res,origin,opt){var explode=opt.hasOwnProperty("explode")?opt.explode:!1,paths=multi.explode(geom).map(function(single){return polygon(single,res,origin,opt)[0]});return explode?paths:[paths.join(" ").replace(/Z/g,"")+"Z"]}var multi=require("multigeojson");module.exports={Point:point,MultiPoint:multiPoint,LineString:lineString,MultiLineString:multiLineString,Polygon:polygon,MultiPolygon:multiPolygon}},{multigeojson:1}],3:[function(require,module,exports){module.exports=function(a,b){var c={};return Object.keys(a).forEach(function(key){c[key]=a[key]}),Object.keys(b).forEach(function(key){c[key]=b[key]}),c}},{}],4:[function(require,module,exports){function pathToSvgJson(path,type,attributes,opt){var svg={},pointAsCircle=opt&&opt.hasOwnProperty("pointAsCircle")?opt.pointAsCircle:!1;"Point"!=type&&"MultiPoint"!=type||!pointAsCircle?(svg={d:path},("Polygon"==type||"MultiPolygon"==type)&&"evenodd"==svg["fill-rule"]):(svg.cx=path.split(",")[0],svg.cy=path.split(",")[1],svg.r=opt&&opt.r?opt.r:"1");for(var key in attributes)svg[key]=attributes[key];return svg}function jsonToSvgElement(json,type,opt){var pointAsCircle=opt&&opt.hasOwnProperty("pointAsCircle")?opt.pointAsCircle:!1,ele="<path";"Point"!=type&&"MultiPoint"!=type||!pointAsCircle||(ele="<circle");for(var key in json)ele+=" "+key+'="'+json[key]+'"';return ele+="/>"}function valueAt(obj,path){function index(prev,cur,i,arr){if(prev.hasOwnProperty(cur))return prev[cur];throw new Error(arr.slice(0,i+1).join(".")+" is not a valid property path")}return path.split(".").reduce(index,obj)}var extend=require("./extend.js"),converter=require("./converter.js"),g2svg=function(options){this.options=options||{},this.viewportSize=this.options.viewportSize||{width:256,height:256},this.mapExtent=this.options.mapExtent||{left:-20037508.342789244,right:20037508.342789244,bottom:-20037508.342789244,top:20037508.342789244},this.res=this.calResolution(this.mapExtent,this.viewportSize,this.options.fitTo)};g2svg.prototype.calResolution=function(extent,size,fitTo){var xres=(extent.right-extent.left)/size.width,yres=(extent.top-extent.bottom)/size.height;if(fitTo){if("width"===fitTo.toLowerCase())return xres;if("height"===fitTo.toLowerCase())return yres;throw new Error('"fitTo" option should be "width" or "height" ')}return Math.max(xres,yres)},g2svg.prototype.convert=function(geojson,options){var opt=extend(this.options,options||{}),svgElements=[];if("FeatureCollection"==geojson.type)for(var i=0;i<geojson.features.length;i++)svgElements=svgElements.concat(this.convertFeature(geojson.features[i],opt));else if("Feature"==geojson.type)svgElements=this.convertFeature(geojson,opt);else if("GeometryCollection"==geojson.type)for(var i=0;i<geojson.geometries.length;i++)svgElements=svgElements.concat(this.convertGeometry(geojson.geometries[i],opt));else{if(!converter[geojson.type])return;svgElements=this.convertGeometry(geojson,opt)}return opt.callback&&opt.callback.call(this,svgElements),svgElements},g2svg.prototype.convertFeature=function(feature,options){if(feature||feature.geometry){var opt=extend(this.options,options||{});if(opt.attributes&&opt.attributes instanceof Array){var arr=opt.attributes;opt.attributes=arr.reduce(function(sum,property){if("string"==typeof property){var val,key=property.split(".").pop();try{val=valueAt(feature,property)}catch(e){val=!1}val&&(sum[key]=val)}else if("object"==typeof property&&property.type&&property.property)if("dynamic"===property.type){var val,key=property.key?property.key:property.property.split(".").pop();try{val=valueAt(feature,property.property)}catch(e){val=!1}val&&(sum[key]=val)}else"static"===property.type&&property.value&&(sum[property.property]=property.value);return sum},{})}else opt.attributes=opt.attributes||{};var id=opt.attributes.id||feature.id||(feature.properties&&feature.properties.id?feature.properties.id:null);return id&&(opt.attributes.id=id),this.convertGeometry(feature.geometry,opt)}},g2svg.prototype.convertGeometry=function(geom,options){if(converter[geom.type]){var svgJsons,svgEles,opt=extend(this.options,options||{}),output=opt.output||"svg",paths=converter[geom.type].call(this,geom,this.res,{x:this.mapExtent.left,y:this.mapExtent.top},opt);return"svg"==output.toLowerCase()?(svgJsons=paths.map(function(path){return pathToSvgJson(path,geom.type,opt.attributes,opt)}),svgEles=svgJsons.map(function(json){return jsonToSvgElement(json,geom.type,opt)})):paths}},module.exports=g2svg},{"./converter.js":2,"./extend.js":3}],5:[function(require,module,exports){var g2svg=require("./instance.js"),geojson2svg=function(options){return new g2svg(options)};module.exports=geojson2svg},{"./instance.js":4}]},{},[5])(5)});

function getJSON(url, cb) {
    var xmlhttp = new XMLHttpRequest();
    var onError = window.ons.notification.alert.bind(window.ons.notification, {
        message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
    });

    xmlhttp.onreadystatechange = function () {
        if (this.readyState === 4) {
            if (this.status == 200) {
                var myArr = JSON.parse(this.responseText);
                cb(JSON.parse(this.responseText));
            }
        }
    };
    xmlhttp.onerror = onError;
    xmlhttp.open("GET", url, true);
    xmlhttp.send();
}


function _promise() {
    var done = false;
    var res = undefined;
    var cbs = [];
    var d = function(result) {
        done = true;
        res = result; 
        for(var i = 0; i < cbs.length; i++) cbs[i](result);
    }
    d.then = function(cb) {
        if (done) cb(res);
        else cbs.push(cb);
    }
    return d;
}


var cordova_ready = false;

var isOnline = function () {

}, isOffline = function () {
	window.ons.notification.alert({
		message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
	});
};

window.ons.disableAutoStatusBarFill();

if (window.addEventListener) {
	/*
		Works well in Firefox and Opera with the 
		Work Offline option in the File menu.
		Pulling the ethernet cable doesn't seem to trigger it.
		Later Google Chrome and Safari seem to trigger it well
	*/
	window.addEventListener("online", isOnline, false);
	window.addEventListener("offline", isOffline, false);
}
else {
	/*
		Works in IE with the Work Offline option in the 
		File menu and pulling the ethernet cable
	*/
	document.body.ononline = isOnline;
	document.body.onoffline = isOffline;
}

document.addEventListener("resume", function () {
	if (navigator.onLine === false) {
		window.ons.notification.alert({
			message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.',
		});
	}
}, false)

document.addEventListener('init', function (event) {
	var page = event.target;
	//console.log("button pressed");

	if (page.id === 'splitter') {

	}

	if (page.id === 'map-page') {
		window.initMap(page);
	}

	else if (page.id === 'details') {
		window.initDetails(page);
	}

	else if (page.id === 'details-general') {
		window.initDetailsGeneral(page);
	}

	else if (page.id === 'details-panden') {
		window.initDetailsPanden(page);
	}

	else if (page.id === 'details-verblijfplaatsen') {
		window.initDetailsVerblijfsPlaatsen(page);
	}

	else if (page.id === 'details-misc') {
		window.initDetailsMisc(page);
	}

	else if (page.id === 'details-verblijfobject-detail') {
		window.initDetailsVerblijfObjectDetail(page);
	}

	else if (page.id === 'search-page') {
		window.initSearchPage(page);
	}
});

document.addEventListener("deviceready", function () {
	cordova_ready = true;
	if (cordova.platformId === 'browser') {
		document.body.appendChild(document.createElement('script')).src = './js/browser.js';
	}
	if (navigator.onLine === false) {
		window.ons.notification.alert({
			message: 'Je bent niet verbonden met de server. De gegevens die worden weergegeven zijn mogelijk verouderd.n',
		});
	}
}, false);

window.fn = {};

window.fn.open = function () {
	var menu = document.getElementById('menu');
	menu.open();
};

window.fn.load = function (page) {
	var content = document.getElementById('content');
	var menu = document.getElementById('menu');
	content.load(page)
		.then(menu.close.bind(menu));
};

window.fn.loadkaart = function() {
	if (window.fn.map && window.fn.layer) {
		if (window.fn.layerType === 'sat') {
			window.fn.layer.remove();
			loadKaart();
			document.getElementById('menu').close();
		}
	} else {
		window.fn.layerType = 'kaart';
		window.fn.load('views/map.html');
	}
}

window.fn.loadluchtfoto = function () {
	if (window.fn.map && window.fn.layer) {
		if (window.fn.layerType === 'kaart') {
			window.fn.layer.remove();
			loadSat();
			document.getElementById('menu').close();
		}
	} else {
		window.fn.layerType = 'sat';
		window.fn.load('views/map.html');
	}
};

(function () {
	var gemeenteCodes;
	var cbs = [];
	getJSON('data/gemeente-codes.json', function (codes) {
		gemeenteCodes = codes;
		for (var i = 0; i < cbs.length; i++) {
			cbs(codes);
		}
	});

	window.fn.getGemeenteCodes = function (cb) {
		if (gemeenteCodes) cb(gemeenteCodes);
		else cbs.push(cb);
	}
})();






function initMap(page) {

    var interacted = false;
    var zoomedLowEnough = false;
    var L = window.L;

    var map = window.fn.map = L.map('map', {
        zoomControl: false,
        maxZoom: 21,
        bounceAtZoomLimits: false,
    });
    L.control.zoom({
        position: 'topright',
    }).addTo(map);
    
    map.setView([53.232, 6.569], 16);

    if (window.fn.layerType === 'sat') loadSat();
    else loadKaart();

    L.tileLayer.wms('https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wms?', {
        layers: 'kadastralekaartv3:kadastralegrens,perceel',
        format: 'image/png',
        transparent: true,
        version: '1.0.0',
        attribution: "www.nationaalgeoregister.nl",
        maxZoom: 21,
        minZoom: 10
    }).addTo(map);

    var geoJson = L.geoJson(undefined, { onEachFeature: onEachFeature });
    geoJson.addTo(map);

    var geoJson2 = L.geoJson(undefined, { onEachFeature: onEachFeature2 });
    geoJson2.addTo(map);

    var city = window.fn.city;
    if (city) {
        window.fn.city = null;
        getJSON(city._links['city:item'].href, function (cityInfo) {
            var latLon = cityInfo.location.latlon;
            map.setView(new L.LatLng(latLon.latitude, latLon.longitude), 13);
        });
    } else {
        map.locate({ setView: true, maxZoom: 30 });
    }


    map.on("moveend", function () {
        var zoom = map.getZoom();
        console.log(zoom)
        interacted = true;
        var zoomPercentage = 100 - Math.min(100, zoom / 17) * 100;
        document.getElementById('zoomlevel-progress').setAttribute('style', 'top: ' + zoomPercentage + '%');
        if (zoom < 17) {
            geoJson.clearLayers();
            return;
        }
        zoomedLowEnough = true;
        // var viewBounds = map.getBounds();
        // var url = 'https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wfs?';
        // var params = 'service=wfs&';
        // params += 'version=3.0.0&';
        // params += 'request=GetFeature&';
        // params += 'typeName=kadastralekaartv3:perceel&';
        // params += 'outputFormat=json&';
        // params += 'srsName=EPSG:4326&';
        // params += `BBOX=${viewBounds._southWest.lng},${viewBounds._southWest.lat},${viewBounds._northEast.lng},${viewBounds._northEast.lat},EPSG:4326&`;
        // params += 'count=10000';

        // getJSON(url + params, function (data) {
        //     console.log(data);
        //     geoJson.clearLayers();
        //     geoJson.addData(data.features);
        // });
    });

    map.on('click', function (e) {
        console.log('click', e);
        var latLong = e.latlng;
        console.log(latLong);
        showLocationOnMap(latLong);
    });


    //---------------------------------------------------------------------------------------------------------------------------------//

    function onEachFeature(feature, layer) {
        if (feature.properties) {
            var properties = [];
            if (feature.properties.kadastraleGemeenteCode)
                properties.push('Gemeente Code: ' + feature.properties.kadastraleGemeenteCode);
            if (feature.properties.type)
                properties.push('Type: ' + feature.properties.type || "")
            if (feature.properties.kadastralegrootte)
                properties.push('Kadastrale grootte: ' + feature.properties.kadastralegrootte + 'm<sup>2</sup>')
            if (feature.properties.logischtijdstipOntstaan)
                properties.push('Logisch tijdstip ontstaan: ' + (feature.properties.logischtijdstipOntstaan 
                    ? new Date(feature.properties.logischtijdstipOntstaan ).toLocaleDateString('nl-NL')
                    : 'Niet beschikbaar'));
            if (feature.properties.logischtijdstipVervallen)
                properties.push('Logisch tijdstip vervallen: ' + feature.properties.logischtijdstipVervallen || "")
            if (feature.properties.lokaalID)
                properties.push('LokaalID: ' + feature.properties.lokaalID || "");
            if (feature.properties.perceelnummer)
                properties.push('Perceel nummer: ' + feature.properties.perceelnummer || "")
            if (feature.properties.sectie)
                properties.push('Sectie: ' + feature.properties.sectie || "")

            var id = 'popup-details-' + Math.random().toString(36);
            properties.push('<br><ons-button id="' + id + '" class="button popup-details">Details</ons-button>');

            layer.on('add', function (e) {
                e.target.openPopup();
                var btn = document.getElementById(id);
                btn.addEventListener('click', function () {
                    document.getElementById('navigator').pushPage('views/details.html', {
                        data: {
                            feature: feature,
                        }
                    });
                });
            });

            layer.bindPopup(properties.join('<br>'));
        }

        if (feature.geometry_name === "plaatscoordinaten") {
            layer.on({
                click: highlightFeature
            });
        }
    }

    function onEachFeature2() {

    }

    function showLocationOnMap(latLong) {
        if (map.getZoom() < 17) {
            geoJson.clearLayers();
            return;
        }
        getJSON('https://epsg.io/trans?data=' + latLong.lng + ',' + latLong.lat + '&s_srs=4326&&t_srs=28992',
            function (res) {
                var espg28992 = res[0];
                var params = 'request=getFeature&';
                params += 'srsName=EPSG:4326&';
                params += 'version=2.0.0&';
                params += 'typenames=kadastralekaartv3:perceel&';
                params += 'outputFormat=application/json&';
                params += 'cql_filter=CONTAINS(begrenzingperceel%2CPOINT(' + espg28992.x + ' ' + espg28992.y + '))'
                getJSON('https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wfs?' + params, function (data) {
                    console.log(data);
                    geoJson.clearLayers();
                    geoJson.addData(data.features);
                })
            });
    }

    var info = L.control();

    info.onAdd = function (map) {
        this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
        this.update();
        return this._div;
    };

    // method that we will use to update the control based on feature properties passed
    info.update = function (props) {
        console.log(props);
        var content = "";
        if (props) {
            content += "<h4>Eigenschappen:</h4>";
            for (var p in props) {
                content += ("<br />" + p + ": " + props[p]);
            }
        }
        else {
            this._div.innerHTML = "<br />Selecteer een perceel";
        }

        this._div.innerHTML = content;
    };

    info.addTo(map);

    var timeout = setTimeout(function () {
        if (zoomedLowEnough) return;
        window.ons.notification.toast('Zoom in om kadaster informatie te bekijken.', { timeout: 4000, animation: 'fall' });
    }, 6000);

    page.addEventListener('hide', function () {
        console.log('map hide');
        clearTimeout(timeout);
    })

    page.addEventListener('destroy', function () {
        map.eachLayer(function (layer) {
            layer.remove();
        });
        map.remove();
        window.fn.map = null;
        document.getElementById('map').parentElement.removeChild(document.getElementById('map'));
    });



    //---------------------------------------------------------------------------------------------------------------------------------//

    function highlightFeature(e) {

        resetHighlight(e);
        var target = geoJson2.addData(e.target.feature.properties.begrenzingperceel);

        map.fitBounds(target.getBounds());
        info.update(e.target.feature.properties);
    }

    function resetHighlight(e) {
        info.update();
        geoJson2.clearLayers();
    }
}

function loadKaart() {
    // load OpenStreetMap basemap
    var kaart = window.L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        format: 'image/png',
        transparent: true,
        zIndex: 0,
        maxZoom: 21,
    });
    window.fn.layerType = 'kaart';
    window.fn.layer = kaart;
    window.fn.map.addLayer(kaart);
}

function loadSat() {
    var googleSat = window.L.tileLayer('https://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
        maxZoom: 20,
        zIndex: 0,
        subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
    });
    window.fn.layerType = 'sat';
    window.fn.layer = googleSat;
    window.fn.map.addLayer(googleSat);
}




(function () {

    var _proj4_proj_epsg4326 = new window.proj4.Proj('EPSG:4326');    //source coordinates will be in Longitude/Latitude, WGS84
    var _proj4_proj_epsg3785 = new window.proj4.Proj('EPSG:3785');

    var pandenPromise;
    var verblijfPlaatsenPromise;
    var ligPlaatsenPromise;
    var standPlaatsenPromise;
    var woonPlaatsenPromise;

    var feature;
    var geojson3857;
    var xMax;
    var xMin;
    var yMax;
    var yMin;
    var panden;
    var detailsPage;
    var verblijfsObjecten;
    var ligPlaatsen;
    var standPlaatsen;
    var woonpPlaatsen;
    var svgHTML;

    window.initDetailsMisc = function (page) {
        woonPlaatsenPromise.then(function () {
            ligPlaatsenPromise.then(function () {
                standPlaatsenPromise.then(function () {
                    setupDetailMiscPage(page);
                });
            });
        });
    }

    function setupDetailMiscPage(page) {
        var woonplaatsenList = document.getElementById('woonplaats-misc-list-item-container');
        var ligPlaatsenList = document.getElementById('ligplaatsen-misc-list-item-container');
        var standPlaatsenList = document.getElementById('standplaatsen-misc-list-item-container');

        woonpPlaatsen.features.forEach(function (feature) {
            var props = feature.properties;
            var listItem = document.createElement('div');
            listItem.innerHTML =
                '<ons-list-item><div class="left">' + props.woonplaats +
                '</div><div class="right"><small>' + feature.id.replace('.', ' ') + ', ' + 'Identificatie: ' + 'props.identificatie' +
                ', Status: ' + props.status + '</small></div></ons-list-item>';
            woonplaatsenList.appendChild(listItem);
        });

        if (woonpPlaatsen.features.length === 0) {
            woonplaatsenList.innerHTML =
                '<ons-list-item>Geen woonplaatsen gevonden</ons-list-item>';
        }

        ligPlaatsen.features.forEach(function (feature) {
            var props = feature.properties;
            var html = '<ons-list-item expandable>';
            html += feature.id.replace('.', ' ');
            html += '<div class="expandable-content">';
            html += '<div><b>Actualiteitsdatum:</b> ' + (props.actualiteitsdatum
                ? new Date(props.actualiteitsdatum).toLocaleDateString('nl-NL')
                : 'Niet beschikbaar') + '</div>';
            html += '<div><b>Huisletter</b> ' + (props.huisletter || '') + '</div>';
            html += '<div><b>Huisnummer:</b> ' + props.huisnummer + '</div>';
            html += '<div><b>Identificatie:</b> ' + props.identificatie + '</div>';
            html += '<div><b>Openbare ruimte:</b> ' + props.openbare_ruimte + '</div>';
            html += '<div><b>Postcode:</b> ' + props.postcode + '</div>';
            html += '<div><b>Status:</b> ' + props.status + '</div>';
            html += '<div><b>Toevoeging:</b> ' + (props.toevoeging || '') + '</div>';
            html += '<div><b>Woonplaats:</b> ' + props.woonplaats + '</div>';
            html += '</div></ons-list-item>';
            var div = document.createElement('div');
            div.innerHTML = html;
            ligPlaatsenList.appendChild(div);
        });

        if (ligPlaatsen.features.length === 0) {
            ligPlaatsenList.innerHTML =
                '<ons-list-item>Geen ligplaatsen gevonden</ons-list-item>';
        }

        standPlaatsen.features.forEach(function (feature) {
            var props = feature.properties;
            var html = '<ons-list-item expandable>';
            html += feature.id.replace('.', ' ');
            html += '<div class="expandable-content">';
            html += '<div><b>Actualiteitsdatum:</b> ' + (props.actualiteitsdatum
                ? new Date(props.actualiteitsdatum).toLocaleDateString('nl-NL')
                : 'Niet beschikbaar') + '</div>';
            html += '<div><b>Huisletter</b> ' + (props.huisletter || '') + '</div>';
            html += '<div><b>Huisnummer:</b> ' + props.huisnummer + '</div>';
            html += '<div><b>Identificatie:</b> ' + props.identificatie + '</div>';
            html += '<div><b>Openbare ruimte:</b> ' + props.openbare_ruimte + '</div>';
            html += '<div><b>Postcode:</b> ' + props.postcode + '</div>';
            html += '<div><b>Status:</b> ' + props.status + '</div>';
            html += '<div><b>Toevoeging:</b> ' + (props.toevoeging || '') + '</div>';
            html += '<div><b>Woonplaats:</b> ' + props.woonplaats + '</div>';
            html += '</div></ons-list-item>';
            var div = document.createElement('div');
            div.innerHTML = html;
            standPlaatsenList.appendChild(div);
        });

        if (standPlaatsen.features.length === 0) {
            standPlaatsenList.innerHTML =
                '<ons-list-item>Geen standplaatsen gevonden</ons-list-item>';
        }

        console.log('misc', woonpPlaatsen, ligPlaatsen, standPlaatsen);
    }

    window.initDetailsVerblijfObjectDetail = function (page) {
        var verblijfsobject = page.data.verblijfobject;
        var props = verblijfsobject.properties;

        document.getElementById('details-vo-actualiteitsdatum').innerText =
            props.actualiteitsdatum
                ? new Date(props.actualiteitsdatum).toLocaleDateString('nl-NL')
                : 'Niet beschikbaar';

        document.getElementById('details-vo-bouwjaar').innerText =
            props.bouwjaar || 'Niet beschikbaar';

        document.getElementById('details-vo-gebruiksdoel').innerText =
            props.gebruiksdoel || 'Niet beschikbaar';

        document.getElementById('details-vo-huisletter').innerText =
            props.huisletter || 'Niet van toepassing';

        document.getElementById('details-vo-huisnummer').innerText =
            props.huisnummer || 'Niet beschikbaar';

        document.getElementById('details-vo-identificatie').innerText =
            props.identificatie || 'Niet beschikbaar';

        document.getElementById('details-vo-openbare-ruimte').innerText =
            props.openbare_ruimte || 'Niet beschikbaar';

        document.getElementById('details-vo-oppervlakte').innerText =
            props.oppervlakte || 'Niet beschikbaar';

        document.getElementById('details-vo-pandidentificatie').innerText =
            props.pandidentificatie || 'Niet beschikbaar';

        document.getElementById('details-vo-pandstatus').innerText =
            props.pandstatus || 'Niet beschikbaar';

        document.getElementById('details-vo-postcode').innerText =
            props.postcode;

        document.getElementById('details-vo-status').innerText =
            props.status || 'Niet beschikbaar';

        document.getElementById('details-vo-toevoeging').innerText =
            props.toevoeging || 'Niet van toepassing';

        document.getElementById('details-vo-woonplaats').innerText =
            props.woonplaats;

    }

    window.initDetailsPanden = function (page) {
        pandenPromise.then(function () {
            var list = document.getElementById('details-panden-list-content');

            var html = '';
            for (var i = 0; i < panden.features.length; i++) {
                var props = panden.features[i].properties;
                html += '<ons-list-item expandable>';
                var paths = toSVGPathsArr(panden.features[i], 250, 250, {
                    'style': 'stroke:#660000; fill: #F0F8FF;stroke-width:0.5px;',
                    'vector-effect': 'non-scaling-stroke'
                });
                html += panden.features[i].id.replace('.', ' ');
                html += '<div class="expandable-content">';
                html += '<svg class="pand-svg" width="200" height="200" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg">';
                html += paths.join('');
                html += '</svg>';
                html += '<div><b>Oppervlakte (min):</b> ' + props.oppervlakte_min + 'm<sup>2</sub></div>';
                html += '<div><b>Oppervlakte (max):</b> ' + props.oppervlakte_max + 'm<sup>2</sub></div>';
                html += '<div><b>Actualiteitsdatum:</b> ' + (props.actualiteitsdatum || 'Niet beschikbaar') + '</div>';
                html += '<div><b>Gebruiksdoel:</b> ' + (props.gebruiksdoel || 'Niet beschikbaar/van toepassing') + '</div>';
                html += '<div><b>Bouwjaar:</b> ' + (props.bouwjaar || 'Niet beschikbaar') + '</div>';
                html += '<div><b>Identificatie:</b> ' + (props.identificatie || 'Niet beschikbaar') + '</div>';
                html += '<div><b>Status:</b> ' + (props.status || 'Niet beschikbaar') + '</div>';
                html += '</div></ons-list-item>';
            }
            if (panden.features.length === 0) {
                html += '<h3>Geen panden op dit perceel.</h3>'
            }
            var d = document.createElement('div');
            d.innerHTML = html;
            list.appendChild(d);
        });
    }

    window.initDetailsVerblijfsPlaatsen = function (page) {
        verblijfPlaatsenPromise.then(function () {
            var list = document.getElementById('details-verblijfplaatsen-list');
            for (var i = 0; i < verblijfsObjecten.features.length; i++) {
                (function () {
                    var verblijfobject = verblijfsObjecten.features[i];
                    var props = verblijfobject.properties;
                    var paths = toSVGPathsArr({ type: verblijfobject.type, geometry: props.pandgeometrie }, 250, 250, {
                        'style': 'stroke:#660000; fill: #F0F8FF;stroke-width:0.5px;',
                        'vector-effect': 'non-scaling-stroke'
                    });
                    var html = '<ons-list-item tappable>';
                    html += '<div class="left">'
                    html += '<svg class="pand-svg" width="40" height="40" viewBox="0 0 250 250" xmlns="http://www.w3.org/2000/svg">';
                    html += paths.join('');
                    html += '</svg></div>';
                    html += '<div class="center">';
                    html += [props.openbare_ruimte, props.huisnummer + props.huisletter + (props.toevoeging || '') + ',', props.postcode + ',', props.woonplaats].join(' ');
                    html += '</div></ons-list-item>';
                    var el = document.createElement('div');
                    el.innerHTML = html;
                    var featureClosure = verblijfsObjecten.features[i];
                    el.firstChild.addEventListener('click', function (e) {
                        document.getElementById('navigator').pushPage('views/details-verblijfobject-detail.html', {
                            data: { verblijfobject: verblijfobject }
                        });
                    });
                    list.appendChild(el.firstChild);
                })();

            }
            if (verblijfsObjecten.features.length === 0) {
                var el = document.createElement('h3');
                el.innerText = 'Geen verblijfplaatsen op dit perceel.';
                list.appendChild(el);
            }
        });
    }

    window.initDetailsGeneral = function initDetailsGeneral(page) {
        pandenPromise.then(function () {
            var detailsSvg = document.getElementById('details-svg');
            detailsSvg.innerHTML = svgHTML;

            window.fn.getGemeenteCodes(function (codes) {
                document.getElementById('gemeente').innerText =
                    codes[feature.properties.kadastraleGemeenteCode];
            });

            document.getElementById('gemeente-code').innerText =
                feature.properties.kadastraleGemeenteCode;

            document.getElementById('kadastrale-grootte').innerHTML =
                feature.properties.kadastralegrootte.toLocaleString() + 'm<sup>2</sub>';

            document.getElementById('logisch-ontstaan').innerText =
                new Date(feature.properties.logischtijdstipOntstaan)
                    .toLocaleDateString('nl-NL');

            if (feature.properties.logischtijdstipVervallen) {
                document.getElementById('logisch-vervallen').innerText =
                    new Date(feature.properties.logischtijdstipOntstaan)
                        .toLocaleDateString('nl-NL');
            } else {
                document.getElementById('logisch-vervallen').innerText =
                    'Niet van toepassing';
            }

            document.getElementById('perceel-nummer').innerText =
                feature.properties.perceelnummer

            document.getElementById('perceel-lon').innerText =
                feature.properties.plaatscoordinaten.coordinates[0];

            document.getElementById('perceel-lat').innerText =
                feature.properties.plaatscoordinaten.coordinates[1];

            var dms = convertDMS(feature.properties.plaatscoordinaten.coordinates[1], feature.properties.plaatscoordinaten.coordinates[0]);

            document.getElementById('perceel-lon-dms').innerText = dms[1];

            document.getElementById('perceel-lat-dms').innerText = dms[0];

            document.getElementById('perceel-sectie').innerText = feature.properties.sectie;
        });
    }


    window.initDetails = function initDetails(page) {
        detailsPage = page;
        console.log('init details', page, page.data);
        pandenPromise = _promise();
        verblijfPlaatsenPromise = _promise();
        woonPlaatsenPromise = _promise();
        ligPlaatsenPromise = _promise();
        standPlaatsenPromise = _promise();

        feature = page.data.feature;



        console.log('transform', feature.geometry.coordinates[0][0]);
        transformToEspg3857OnSpot(feature);
        var geojson3857 = feature;

        console.log(geojson3857);
        xMin = Infinity;
        xMax = -Infinity;
        yMin = Infinity;
        yMax = -Infinity;
        for (var i = 0; i < geojson3857.geometry.coordinates.length; i++) {
            for (var j = 0; j < geojson3857.geometry.coordinates[i].length; j++) {
                var x = geojson3857.geometry.coordinates[i][j][0],
                    y = geojson3857.geometry.coordinates[i][j][1];
                if (x < xMin) xMin = x;
                if (x > xMax) xMax = x;
                if (y < yMin) yMin = y;
                if (y > yMax) yMax = y;
            }
        }

        var geojson2svg_converter = window.geojson2svg({
            viewportSize: { width: 250, height: 250 },
            attributes: {
                'style': 'stroke:#006600; fill: #F0F8FF;stroke-width:0.5px;',
                'vector-effect': 'non-scaling-stroke'
            },
            mapExtent: {
                left: xMin,
                right: xMax,
                bottom: yMin,
                top: yMax
            },
        });

        var svgStrings = geojson2svg_converter.convert(geojson3857);
        console.log(svgStrings);

        svgHTML = svgStrings.join('');

        var verblijfsobjectenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'verblijfsobject', 'EPSG:3857')
        getJSON(verblijfsobjectenURL, function (vo) {
            verblijfsObjecten = vo;
            console.log('verblijfobjecten', verblijfsObjecten);
            document.getElementById('details-verblijfplaatsen-tab').setAttribute('badge', vo.features.length);
            verblijfPlaatsenPromise();
        });

        var ligPlaatsenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'ligplaats', 'EPSG:3857');
        getJSON(ligPlaatsenURL, function (lp) {
            ligPlaatsen = lp;
            ligPlaatsenPromise();
        });

        var standPlaatsenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'standplaats', 'EPSG:3857');
        getJSON(standPlaatsenURL, function (lp) {
            standPlaatsen = lp;
            standPlaatsenPromise();
        });

        var woonPlaatsenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'woonplaats', 'EPSG:3857');
        getJSON(woonPlaatsenURL, function (wp) {
            woonpPlaatsen = wp;
            woonPlaatsenPromise();
        });

        var pandenURL = getBagTypesURL([xMin, yMin, xMax, yMax], 'pand', 'EPSG:3857');
        getJSON(pandenURL, function (p) {
            panden = p;
            console.log('panden', panden);
            var pandenSVG = geojson2svg_converter.convert(panden,
                {
                    attributes: {
                        'style': 'stroke:#660000; fill:transparent; stroke-width:0.5px;',
                        'vector-effect': 'non-scaling-stroke'
                    }
                });

            svgHTML += pandenSVG.join('');
            svgHTML += '<text x="120" y="120" transform="rotate(' + -feature.properties.perceelnummer_rotatie + ', 120, 120)">' + feature.properties.perceelnummer + '</text>';

            document.getElementById('details-panden-tab').setAttribute('badge', panden.features.length);
            pandenPromise();
        });
    }

    function toDegreesMinutesAndSeconds(coordinate) {
        var absolute = Math.abs(coordinate);
        var degrees = Math.floor(absolute);
        var minutesNotTruncated = (absolute - degrees) * 60;
        var minutes = Math.floor(minutesNotTruncated);
        var seconds = Math.floor((minutesNotTruncated - minutes) * 60);

        return degrees + "° " + minutes + "' " + seconds + '"';
    }

    function convertDMS(lat, lng) {
        var latitude = toDegreesMinutesAndSeconds(lat);
        var latitudeCardinal = Math.sign(lat) >= 0 ? "N" : "S";

        var longitude = toDegreesMinutesAndSeconds(lng);
        var longitudeCardinal = Math.sign(lng) >= 0 ? "E" : "W";

        return [latitude + " " + latitudeCardinal, longitude + " " + longitudeCardinal];
    }

    function getBagTypesURL(bbox, type, srs) {
        var options = 'request=getFeature';
        options += '&version=2.0.0';
        options += '&typenames=bag:' + type;
        options += '&srsName=' + srs;
        options += '&outputFormat=application/json';
        options += "&cql_filter=BBOX(geometrie, " + bbox.join(',') + ",'" + srs + "')";
        return 'https://geodata.nationaalgeoregister.nl/bag/wfs?' + options;
    }

    function getPerceelImageURL(perceelNummer, latLonBbox) {
        var options = 'request=GetMap';
        options += '&layers=perceel';
        options += '&styles=';
        options += '&format=image/png';
        options += '&transparent=true';
        options += '&version=1.3.0';
        options += '&width=256';
        options += '&height=256';
        options += '&crs=EPSG:28992';
        options += '&cql_filter=perceelnummer%20%3D%20' + perceelNummer;
        options += '&bbox=' + latLonBbox.join(',');
        return 'https://geodata.nationaalgeoregister.nl/kadastralekaartv3/wms?' + options;
    }

    function toSVGPathsArr(geojson3857, vbwidth, vbheight, attributes) {
        xMin = Infinity;
        xMax = -Infinity;
        yMin = Infinity;
        yMax = -Infinity;
        var coordinates = geojson3857.geometry.coordinates;
        if (geojson3857.geometry.type !== "MultiPolygon") coordinates = [coordinates]
        for (var i = 0; i < coordinates.length; i++) {
            for (var j = 0; j < coordinates[i].length; j++) {
                for (var k = 0; k < coordinates[i][j].length; k++) {
                    var x = coordinates[i][j][k][0],
                        y = coordinates[i][j][k][1];
                    if (x < xMin) xMin = x;
                    if (x > xMax) xMax = x;
                    if (y < yMin) yMin = y;
                    if (y > yMax) yMax = y;
                }
            }
        }
        var geojson2svg_converter = window.geojson2svg({
            viewportSize: { width: 250, height: 250 },
            attributes: attributes,
            // attributes: {
            //     'style': 'stroke:#00ff00; fill: #F0F8FF;stroke-width:0.5px;',
            //     'vector-effect': 'non-scaling-stroke'
            // },
            mapExtent: {
                left: xMin,
                right: xMax,
                bottom: yMin,
                top: yMax
            },
        });
        return geojson2svg_converter.convert(geojson3857);
    }

    function transformToEspg3857OnSpot(feature) {
        for (var h = 0; h < feature.geometry.coordinates.length; h++) {
            var c2 = feature.geometry.coordinates[h];
            for (var i = 0; i < c2.length; i++) {
                var p = new window.proj4.Point(c2[i][0], c2[i][1]);   //any object will do as long as it has 'x' and 'y' properties
                window.proj4.transform(_proj4_proj_epsg4326, _proj4_proj_epsg3785, p);
                c2[i][0] = p.x;
                c2[i][1] = p.y;
            }
        }
    }

})();




function initSearchPage(page) {

    document.getElementById('location-search')
        .addEventListener('click', function (e) {
            var term = document.getElementById('location-search-input').value;
            getJSON('https://api.teleport.org/api/cities/?search=' + term, function (res) {
                var list = res._embedded['city:search-results'];
                var filtered = [];
                for (var i = 0; i < list.length; i++) {
                    if (list[i].matching_full_name.match(/netherlands$/i)) {
                        filtered.push(list[i])
                    }
                }
                handleSearch(filtered);
            });
        });

    function handleSearch(results) {
        var list = document.getElementById('location-search-results');
        while (list.firstChild) list.removeChild(list.firstChild);
        results.forEach(function (city) {
            var div = document.createElement('div');
            var cityName = city.matching_full_name.split(', ').slice(0, 2).join(', ');
            div.innerHTML =
                '<ons-list-item tappable>' + cityName + '</ons-list-item>';
            div.firstChild.addEventListener('click', function () {
                window.fn.city = city;
                window.fn.load('views/map.html')
            });
            list.appendChild(div.firstChild);
        });
        document.getElementById('location-search-card').setAttribute('class', '');
        if (results.length === 0) {
            list.innerHTML = '<ons-list-item>Geen resultaten</ons-list-item>';
        }
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9qcy9saWIvb25zZW51aS5taW4uanMiLCJzcmMvanMvbGliL2xlYWZsZXQuanMiLCJzcmMvanMvbGliL3Byb2o0LmpzIiwic3JjL2pzL2xpYi9nZW9qc29uMnN2Zy5qcyIsInNyYy9qcy9jb3JlLmpzIiwic3JjL2pzL2luZGV4LmpzIiwic3JjL2pzL2thZGFzdGVyLW1hcC5qcyIsInNyYy9qcy9kZXRhaWxzLmpzIiwic3JjL2pzL3NlYXJjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDUkE7QUFDQTtBQUNBO0FDRkE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3hKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaGVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogb25zZW51aSB2Mi4xMC4xIC0gMjAxOC0wNS0yOCAqL1xuIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9ZSgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZSk6dC5vbnM9ZSgpfSh0aGlzLGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXtrdC5zZXQodCwhMCl9ZnVuY3Rpb24gZSh0KXt2YXIgZT13dC5nZXQodCxbXSl8fFtdO3d0LmRlbGV0ZSh0KSxlLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pfWZ1bmN0aW9uIG4obil7dmFyIGk9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOmZ1bmN0aW9uKCl7fTtpZih2b2lkIDA9PT1rdCYmKGt0PW5ldyBXZWFrTWFwLHd0PW5ldyBXZWFrTWFwKSxmdW5jdGlvbih0LGUpe3d0Lmhhcyh0KXx8d3Quc2V0KHQsW10pLHd0LmdldCh0KS5wdXNoKGUpfShuLGkpLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoaWxkTm9kZXMubGVuZ3RoPjAmJnQoZSksa3QuaGFzKGUpfShuKSllKG4pO2Vsc2V7bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oaSl7dChuKSxlKG4pfSkub2JzZXJ2ZShuLHtjaGlsZExpc3Q6ITAsY2hhcmFjdGVyRGF0YTohMH0pLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3QobiksZShuKX0pfX1mdW5jdGlvbiBpKHQpe3QuX2Rlc3Ryb3kgaW5zdGFuY2VvZiBGdW5jdGlvbj90Ll9kZXN0cm95KCk6dC5yZW1vdmUoKX1mdW5jdGlvbiBvKHQsZSl7cmV0dXJuIGU9e2V4cG9ydHM6e319LHQoZSxlLmV4cG9ydHMpLGUuZXhwb3J0c31mdW5jdGlvbiByKHQpe3ZhciBlPWdpLmhhcyh0KSxuPS9eW2Etel1bLjAtOV9hLXpdKi1bXFwtLjAtOV9hLXpdKiQvLnRlc3QodCk7cmV0dXJuIWUmJm59ZnVuY3Rpb24gYSh0KXt2YXIgZT10LmlzQ29ubmVjdGVkO2lmKHZvaWQgMCE9PWUpcmV0dXJuIGU7Zm9yKHZhciBuPXQ7biYmIShuLl9fQ0VfaXNJbXBvcnREb2N1bWVudHx8biBpbnN0YW5jZW9mIERvY3VtZW50KTspbj1uLnBhcmVudE5vZGV8fCh3aW5kb3cuU2hhZG93Um9vdCYmbiBpbnN0YW5jZW9mIFNoYWRvd1Jvb3Q/bi5ob3N0OnZvaWQgMCk7cmV0dXJuISghbnx8IShuLl9fQ0VfaXNJbXBvcnREb2N1bWVudHx8biBpbnN0YW5jZW9mIERvY3VtZW50KSl9ZnVuY3Rpb24gcyh0LGUpe2Zvcih2YXIgbj1lO24mJm4hPT10JiYhbi5uZXh0U2libGluZzspbj1uLnBhcmVudE5vZGU7cmV0dXJuIG4mJm4hPT10P24ubmV4dFNpYmxpbmc6bnVsbH1mdW5jdGlvbiBsKHQsZSl7Zm9yKHZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTpuZXcgU2V0LGk9dDtpOyl7aWYoaS5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFKXt2YXIgbz1pO2Uobyk7dmFyIHI9by5sb2NhbE5hbWU7aWYoXCJsaW5rXCI9PT1yJiZcImltcG9ydFwiPT09by5nZXRBdHRyaWJ1dGUoXCJyZWxcIikpe3ZhciBhPW8uaW1wb3J0O2lmKGEgaW5zdGFuY2VvZiBOb2RlJiYhbi5oYXMoYSkpe24uYWRkKGEpO2Zvcih2YXIgdT1hLmZpcnN0Q2hpbGQ7dTt1PXUubmV4dFNpYmxpbmcpbCh1LGUsbil9aT1zKHQsbyk7Y29udGludWV9aWYoXCJ0ZW1wbGF0ZVwiPT09cil7aT1zKHQsbyk7Y29udGludWV9dmFyIGM9by5fX0NFX3NoYWRvd1Jvb3Q7aWYoYylmb3IodmFyIGg9Yy5maXJzdENoaWxkO2g7aD1oLm5leHRTaWJsaW5nKWwoaCxlLG4pfWk9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5maXJzdENoaWxkP2UuZmlyc3RDaGlsZDpzKHQsZSl9KHQsaSl9fWZ1bmN0aW9uIHUodCxlLG4pe3RbZV09bn12YXIgYz17fSxoPWZ1bmN0aW9uKCl7dmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFwiXCIpLGU9KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpLmpvaW4oXCJcIikubWF0Y2goLy0obW96fHdlYmtpdHxtcyktLyl8fFwiXCI9PT10Lk9MaW5rJiZbXCJcIixcIm9cIl0pWzFdO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm5cIi1cIitlK1wiLVwiK1EuaHlwaGVuYXRlKHQpfX0oKSxkPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7biBpbiB0LnN0eWxlP3Quc3R5bGVbbl09ZVtuXTpoKG4paW4gdC5zdHlsZT90LnN0eWxlW2gobildPWVbbl06US53YXJuKFwiTm8gc3VjaCBzdHlsZSBwcm9wZXJ0eTogXCIrbil9KSx0fTtkLmNsZWFyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0oYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOlwiXCIpLnNwbGl0KC9cXHMrLykucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29uY2F0KFtRLmh5cGhlbmF0ZShlKSxoKGUpXSl9LFtdKSxuPVtdLGk9dC5zdHlsZS5sZW5ndGgtMTtpPj0wO2ktLSkhZnVuY3Rpb24oaSl7dmFyIG89dC5zdHlsZVtpXTsoMD09PWUubGVuZ3RofHxlLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIDA9PT1vLmluZGV4T2YodCl9KSkmJm4ucHVzaChvKX0oaSk7bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnN0eWxlW2VdPVwiXCJ9KSxcIlwiPT09dC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSYmdC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKX07dmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sLml0ZXJhdG9yP2Z1bmN0aW9uKHQpe3JldHVybiB0eXBlb2YgdH06ZnVuY3Rpb24odCl7cmV0dXJuIHQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmdC5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmdCE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjp0eXBlb2YgdH0scD1mdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIGUpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIil9LGc9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5lbnVtZXJhYmxlPWkuZW51bWVyYWJsZXx8ITEsaS5jb25maWd1cmFibGU9ITAsXCJ2YWx1ZVwiaW4gaSYmKGkud3JpdGFibGU9ITApLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGkua2V5LGkpfX1yZXR1cm4gZnVuY3Rpb24oZSxuLGkpe3JldHVybiBuJiZ0KGUucHJvdG90eXBlLG4pLGkmJnQoZSxpKSxlfX0oKSxtPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gZSBpbiB0P09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTp0W2VdPW4sdH0sXz1PYmplY3QuYXNzaWdufHxmdW5jdGlvbih0KXtmb3IodmFyIGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXt2YXIgbj1hcmd1bWVudHNbZV07Zm9yKHZhciBpIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4saSkmJih0W2ldPW5baV0pfXJldHVybiB0fSx2PWZ1bmN0aW9uIHQoZSxuLGkpe251bGw9PT1lJiYoZT1GdW5jdGlvbi5wcm90b3R5cGUpO3ZhciBvPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxuKTtpZih2b2lkIDA9PT1vKXt2YXIgcj1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7cmV0dXJuIG51bGw9PT1yP3ZvaWQgMDp0KHIsbixpKX1pZihcInZhbHVlXCJpbiBvKXJldHVybiBvLnZhbHVlO3ZhciBhPW8uZ2V0O2lmKHZvaWQgMCE9PWEpcmV0dXJuIGEuY2FsbChpKX0sYj1mdW5jdGlvbih0LGUpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGUmJm51bGwhPT1lKXRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiK3R5cGVvZiBlKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGUmJmUucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp7dmFsdWU6dCxlbnVtZXJhYmxlOiExLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH19KSxlJiYoT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZih0LGUpOnQuX19wcm90b19fPWUpfSx5PWZ1bmN0aW9uKHQsZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQpZS5pbmRleE9mKGkpPj0wfHxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxpKSYmKG5baV09dFtpXSk7cmV0dXJuIG59LGs9ZnVuY3Rpb24odCxlKXtpZighdCl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7cmV0dXJuIWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBlP3Q6ZX0sdz1mdW5jdGlvbih0KXtpZihBcnJheS5pc0FycmF5KHQpKXtmb3IodmFyIGU9MCxuPUFycmF5KHQubGVuZ3RoKTtlPHQubGVuZ3RoO2UrKyluW2VdPXRbZV07cmV0dXJuIG59cmV0dXJuIEFycmF5LmZyb20odCl9LEU9d2luZG93LkhUTUxFbGVtZW50LEM9bmV3KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9zZWxlY3RlZFBsYXRmb3JtPW51bGwsdGhpcy5faWdub3JlUGxhdGZvcm1TZWxlY3Q9ITF9cmV0dXJuIGcodCxbe2tleTpcInNlbGVjdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0JiYodGhpcy5fc2VsZWN0ZWRQbGF0Zm9ybT10LnRyaW0oKS50b0xvd2VyQ2FzZSgpKX19LHtrZXk6XCJfZ2V0U2VsZWN0ZWRQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0P251bGw6dGhpcy5fc2VsZWN0ZWRQbGF0Zm9ybX19LHtrZXk6XCJfcnVuT25BY3R1YWxQbGF0Zm9ybVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2lnbm9yZVBsYXRmb3JtU2VsZWN0PSEwO3ZhciBlPXQoKTtyZXR1cm4gdGhpcy5faWdub3JlUGxhdGZvcm1TZWxlY3Q9ITEsZX19LHtrZXk6XCJpc1dlYlZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe2lmKFwibG9hZGluZ1wiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8XCJ1bmluaXRpYWxpemVkXCI9PWRvY3VtZW50LnJlYWR5U3RhdGUpdGhyb3cgbmV3IEVycm9yKFwiaXNXZWJWaWV3KCkgbWV0aG9kIGlzIGF2YWlsYWJsZSBhZnRlciBkb20gY29udGVudHMgbG9hZGVkLlwiKTtyZXR1cm4hISh3aW5kb3cuY29yZG92YXx8d2luZG93LnBob25lZ2FwfHx3aW5kb3cuUGhvbmVHYXApfX0se2tleTpcImlzSVBob25lXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4vaVBob25lL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0lQaG9uZVhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzSVBob25lKCkmJigzNzU9PT13aW5kb3cuc2NyZWVuLndpZHRoJiY4MTI9PT13aW5kb3cuc2NyZWVuLmhlaWdodHx8ODEyPT09d2luZG93LnNjcmVlbi53aWR0aCYmMzc1PT09d2luZG93LnNjcmVlbi5oZWlnaHQpfX0se2tleTpcImlzSVBhZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL2lQYWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfX0se2tleTpcImlzSVBvZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuL2lQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpfX0se2tleTpcImlzSU9TXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wiaW9zXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJvYmplY3RcIiE9PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKXx8L2Jyb3dzZXIvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSk/L2lQaG9uZXxpUGFkfGlQb2QvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOi9pT1MvaS50ZXN0KGRldmljZS5wbGF0Zm9ybSl9fSx7a2V5OlwiaXNJT1M3YWJvdmVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKFwib2JqZWN0XCI9PT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSkmJiEvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKSlyZXR1cm4vaU9TL2kudGVzdChkZXZpY2UucGxhdGZvcm0pJiZwYXJzZUludChkZXZpY2UudmVyc2lvbi5zcGxpdChcIi5cIilbMF0pPj03O2lmKC9pUGhvbmV8aVBhZHxpUG9kL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSl7dmFyIHQ9KG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1xcYlswLTldK19bMC05XSsoPzpfWzAtOV0rKT9cXGIvKXx8W1wiXCJdKVswXS5yZXBsYWNlKC9fL2csXCIuXCIpO3JldHVybiBwYXJzZUludCh0LnNwbGl0KFwiLlwiKVswXSk+PTd9cmV0dXJuITF9fSx7a2V5OlwiaXNJT1NTYWZhcmlcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5uYXZpZ2F0b3IsZT10LnVzZXJBZ2VudDtyZXR1cm4hKCF0aGlzLmlzSU9TKCl8fC0xPT09ZS5pbmRleE9mKFwiU2FmYXJpXCIpfHwtMT09PWUuaW5kZXhPZihcIlZlcnNpb25cIil8fHQuc3RhbmRhbG9uZSl9fSx7a2V5OlwiaXNXS1dlYlZpZXdcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PS9jb25zdHJ1Y3Rvci9pLnRlc3QoRSk7cmV0dXJuISghKHRoaXMuaXNJT1MoKSYmd2luZG93LndlYmtpdCYmd2luZG93LndlYmtpdC5tZXNzYWdlSGFuZGxlcnMmJndpbmRvdy5pbmRleGVkREIpfHx0KX19LHtrZXk6XCJpc1VJV2ViVmlld1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuISghdGhpcy5pc0lPUygpfHx0aGlzLmlzSU9TU2FmYXJpKCl8fHRoaXMuaXNXS1dlYlZpZXcoKSl9fSx7a2V5OlwiaXNBbmRyb2lkUGhvbmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybi9BbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSYmL01vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCl9fSx7a2V5OlwiaXNBbmRyb2lkVGFibGV0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4vQW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiEvTW9iaWxlL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KX19LHtrZXk6XCJpc0FuZHJvaWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJhbmRyb2lkXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6L0FuZHJvaWQvaS50ZXN0KFwib2JqZWN0XCIhPT0oXCJ1bmRlZmluZWRcIj09dHlwZW9mIGRldmljZT9cInVuZGVmaW5lZFwiOmYoZGV2aWNlKSl8fC9icm93c2VyL2kudGVzdChkZXZpY2UucGxhdGZvcm0pP25hdmlnYXRvci51c2VyQWdlbnQ6ZGV2aWNlLnBsYXRmb3JtKX19LHtrZXk6XCJpc1dQXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wid3BcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTpcIm9iamVjdFwiIT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpfHwvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKT8vV2luZG93cyBQaG9uZXxJRU1vYmlsZXxXUERlc2t0b3AvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOi9XaW4zMk5UfFdpbkNFL2kudGVzdChkZXZpY2UucGxhdGZvcm0pfX0se2tleTpcImlzQmxhY2tCZXJyeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cImJsYWNrYmVycnlcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTpcIm9iamVjdFwiIT09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiBkZXZpY2U/XCJ1bmRlZmluZWRcIjpmKGRldmljZSkpfHwvYnJvd3Nlci9pLnRlc3QoZGV2aWNlLnBsYXRmb3JtKT8vQmxhY2tCZXJyeXxSSU0gVGFibGV0IE9TfEJCMTAvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOi9CbGFja0JlcnJ5L2kudGVzdChkZXZpY2UucGxhdGZvcm0pfX0se2tleTpcImlzT3BlcmFcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJvcGVyYVwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOiEhd2luZG93Lm9wZXJhfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgT1BSL1wiKT49MH19LHtrZXk6XCJpc0ZpcmVmb3hcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJmaXJlZm94XCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIEluc3RhbGxUcmlnZ2VyfX0se2tleTpcImlzU2FmYXJpXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpP1wic2FmYXJpXCI9PT10aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk6T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdy5IVE1MRWxlbWVudCkuaW5kZXhPZihcIkNvbnN0cnVjdG9yXCIpPjB8fFwiW29iamVjdCBTYWZhcmlSZW1vdGVOb3RpZmljYXRpb25dXCI9PT0oIXdpbmRvd1tcInNhZmFyaVwiXXx8c2FmYXJpLnB1c2hOb3RpZmljYXRpb24pLnRvU3RyaW5nKCl9fSx7a2V5OlwiaXNDaHJvbWVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJjaHJvbWVcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTohKCF3aW5kb3cuY2hyb21lfHx3aW5kb3cub3BlcmF8fG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIiBPUFIvXCIpPj0wfHxuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgRWRnZS9cIik+PTApfX0se2tleTpcImlzSUVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9nZXRTZWxlY3RlZFBsYXRmb3JtKCk/XCJpZVwiPT09dGhpcy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpOiEhZG9jdW1lbnQuZG9jdW1lbnRNb2RlfX0se2tleTpcImlzRWRnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKT9cImVkZ2VcIj09PXRoaXMuX2dldFNlbGVjdGVkUGxhdGZvcm0oKTpuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCIgRWRnZS9cIik+PTB9fSx7a2V5OlwiZ2V0TW9iaWxlT1NcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQW5kcm9pZCgpP1wiYW5kcm9pZFwiOnRoaXMuaXNJT1MoKT9cImlvc1wiOnRoaXMuaXNXUCgpP1wid3BcIjpcIm90aGVyXCJ9fSx7a2V5OlwiZ2V0SU9TRGV2aWNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0lQaG9uZSgpP1wiaXBob25lXCI6dGhpcy5pc0lQYWQoKT9cImlwYWRcIjp0aGlzLmlzSVBvZCgpP1wiaXBvZFwiOlwibmFcIn19XSksdH0oKSksQT1mdW5jdGlvbih0KXtyZXR1cm4gUS50aHJvdyhcIkluIFBhZ2VBdHRyaWJ1dGVFeHByZXNzaW9uOiBcIit0KX0sUz17X3ZhcmlhYmxlczp7fSxkZWZpbmVWYXJpYWJsZTpmdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdJiZhcmd1bWVudHNbMl07XCJzdHJpbmdcIiE9dHlwZW9mIHQ/QShcIlZhcmlhYmxlIG5hbWUgbXVzdCBiZSBhIHN0cmluZ1wiKTpcInN0cmluZ1wiIT10eXBlb2YgZSYmXCJmdW5jdGlvblwiIT10eXBlb2YgZT9BKFwiVmFyaWFibGUgdmFsdWUgbXVzdCBiZSBhIHN0cmluZyBvciBhIGZ1bmN0aW9uXCIpOnRoaXMuX3ZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eSh0KSYmIW4mJkEoJ1wiJyt0KydcIiBpcyBhbHJlYWR5IGRlZmluZWQnKSx0aGlzLl92YXJpYWJsZXNbdF09ZX0sZ2V0VmFyaWFibGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3ZhcmlhYmxlcy5oYXNPd25Qcm9wZXJ0eSh0KT90aGlzLl92YXJpYWJsZXNbdF06bnVsbH0scmVtb3ZlVmFyaWFibGU6ZnVuY3Rpb24odCl7ZGVsZXRlIHRoaXMuX3ZhcmlhYmxlc1t0XX0sZ2V0QWxsVmFyaWFibGVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZhcmlhYmxlc30sX3BhcnNlUGFydDpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDAsbj0hMSxpPTAsbz1bXTswPT09dC5sZW5ndGgmJkEoXCJVbmFibGUgdG8gcGFyc2UgZW1wdHkgc3RyaW5nXCIpO2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7cisrKWlmKFwiJFwiPT09KGU9dC5jaGFyQXQocikpJiZcIntcIj09PXQuY2hhckF0KHIrMSkpe24mJkEoXCJOZXN0ZWQgaW50ZXJwb2xhdGlvbiBub3Qgc3VwcG9ydGVkXCIpO3Quc3Vic3RyaW5nKGkscikubGVuZ3RoPjAmJm8ucHVzaCh0LnN1YnN0cmluZyhpLHIpKSxpPXIsbj0hMH1lbHNlIGlmKFwifVwiPT09ZSl7bnx8QShcIn0gbXVzdCBiZSBwcmVjZWVkZWQgYnkgJHtcIik7dC5zdWJzdHJpbmcoaSxyKzEpLmxlbmd0aD4wJiZvLnB1c2godC5zdWJzdHJpbmcoaSxyKzEpKSxpPXIrMSxuPSExfXJldHVybiBuJiZBKFwiVW50ZXJtaW5hdGVkIGludGVycG9sYXRpb25cIiksby5wdXNoKHQuc3Vic3RyaW5nKGksdC5sZW5ndGgpKSxvfSxfcmVwbGFjZVRva2VuOmZ1bmN0aW9uKHQpe3ZhciBlPXQubWF0Y2goL15cXCR7KC4qPyl9JC8pO2lmKCFlKXJldHVybiB0O3ZhciBuPWVbMV0udHJpbSgpLGk9dGhpcy5nZXRWYXJpYWJsZShuKTtpZihudWxsIT09aSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGkpcmV0dXJuIGk7dmFyIG89aSgpO3JldHVyblwic3RyaW5nXCIhPXR5cGVvZiBvJiZBKFwiTXVzdCByZXR1cm4gYSBzdHJpbmdcIiksb31BKCdWYXJpYWJsZSBcIicrbisnXCIgZG9lcyBub3QgZXhpc3QnKX0sX3JlcGxhY2VUb2tlbnM6ZnVuY3Rpb24odCl7cmV0dXJuIHQubWFwKHRoaXMuX3JlcGxhY2VUb2tlbi5iaW5kKHRoaXMpKX0sX3BhcnNlRXhwcmVzc2lvbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5zcGxpdChcIixcIikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0oKX0pLm1hcCh0aGlzLl9wYXJzZVBhcnQuYmluZCh0aGlzKSkubWFwKHRoaXMuX3JlcGxhY2VUb2tlbnMuYmluZCh0aGlzKSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmpvaW4oXCJcIil9KX0sZXZhbHVhdGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQ/dGhpcy5fcGFyc2VFeHByZXNzaW9uKHQpOltdfX07Uy5kZWZpbmVWYXJpYWJsZShcIm1vYmlsZU9TXCIsQy5nZXRNb2JpbGVPUygpKSxTLmRlZmluZVZhcmlhYmxlKFwiaU9TRGV2aWNlXCIsQy5nZXRJT1NEZXZpY2UoKSksUy5kZWZpbmVWYXJpYWJsZShcInJ1bnRpbWVcIixmdW5jdGlvbigpe3JldHVybiBDLmlzV2ViVmlldygpP1wiY29yZG92YVwiOlwiYnJvd3NlclwifSk7dmFyIFA9e307UC5jb25maWc9e2F1dG9TdGF0dXNCYXJGaWxsOiEwLGFuaW1hdGlvbnNEaXNhYmxlZDohMSx3YXJuaW5nc0Rpc2FibGVkOiExfSxQLm51bGxFbGVtZW50PXdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFAuaXNFbmFibGVkQXV0b1N0YXR1c0JhckZpbGw9ZnVuY3Rpb24oKXtyZXR1cm4hIVAuY29uZmlnLmF1dG9TdGF0dXNCYXJGaWxsfSxQLm5vcm1hbGl6ZVBhZ2VIVE1MPWZ1bmN0aW9uKHQpe3JldHVybihcIlwiK3QpLnRyaW0oKX0sUC53YWl0RE9NQ29udGVudExvYWRlZD1mdW5jdGlvbih0KXtpZihcImxvYWRpbmdcIj09PXdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlfHxcInVuaW5pdGlhbGl6ZWRcIj09d2luZG93LmRvY3VtZW50LnJlYWR5U3RhdGUpe3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGZ1bmN0aW9uIGUoKXt0KCksd2luZG93LmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZSl9KX1lbHNlIHNldEltbWVkaWF0ZSh0KX0sUC5hdXRvU3RhdHVzQmFyRmlsbD1mdW5jdGlvbih0KXt2YXIgZT1mdW5jdGlvbiBlKCl7UC5zaG91bGRGaWxsU3RhdHVzQmFyKCkmJnQoKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixlKX07XCJvYmplY3RcIj09PShcInVuZGVmaW5lZFwiPT10eXBlb2YgZGV2aWNlP1widW5kZWZpbmVkXCI6ZihkZXZpY2UpKT9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixlKTotMT09PVtcImNvbXBsZXRlXCIsXCJpbnRlcmFjdGl2ZVwiXS5pbmRleE9mKGRvY3VtZW50LnJlYWR5U3RhdGUpP1Aud2FpdERPTUNvbnRlbnRMb2FkZWQoZSk6ZSgpfSxQLnNob3VsZEZpbGxTdGF0dXNCYXI9ZnVuY3Rpb24oKXtyZXR1cm4gUC5pc0VuYWJsZWRBdXRvU3RhdHVzQmFyRmlsbCgpJiYoQy5pc1dlYlZpZXcoKSYmQy5pc0lPUzdhYm92ZSgpJiYhQy5pc0lQaG9uZVgoKXx8ZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKFwiLm9ucy1zdGF0dXMtYmFyLW1vY2suaW9zXCIpKX0sUC50ZW1wbGF0ZVN0b3JlPXtfc3RvcmFnZTp7fSxnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFAudGVtcGxhdGVTdG9yZS5fc3RvcmFnZVt0XXx8bnVsbH0sc2V0OmZ1bmN0aW9uKHQsZSl7UC50ZW1wbGF0ZVN0b3JlLl9zdG9yYWdlW3RdPWV9fSx3aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIl90ZW1wbGF0ZWxvYWRlZFwiLGZ1bmN0aW9uKHQpe1wib25zLXRlbXBsYXRlXCI9PT10LnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZQLnRlbXBsYXRlU3RvcmUuc2V0KHQudGVtcGxhdGVJZCx0LnRlbXBsYXRlKX0sITEpLFAud2FpdERPTUNvbnRlbnRMb2FkZWQoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe2Zvcih2YXIgZT13aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0KSxuPTA7bjxlLmxlbmd0aDtuKyspUC50ZW1wbGF0ZVN0b3JlLnNldChlW25dLmdldEF0dHJpYnV0ZShcImlkXCIpLGVbbl0udGV4dENvbnRlbnR8fGVbbl0uY29udGVudCl9dCgnc2NyaXB0W3R5cGU9XCJ0ZXh0L29ucy10ZW1wbGF0ZVwiXScpLHQoJ3NjcmlwdFt0eXBlPVwidGV4dC90ZW1wbGF0ZVwiXScpLHQoJ3NjcmlwdFt0eXBlPVwidGV4dC9uZy10ZW1wbGF0ZVwiXScpLHQoXCJ0ZW1wbGF0ZVwiKX0pLFAuZ2V0VGVtcGxhdGVIVE1MQXN5bmM9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsbil7UC53YWl0RE9NQ29udGVudExvYWRlZChmdW5jdGlvbigpe3ZhciBpPVAudGVtcGxhdGVTdG9yZS5nZXQodCk7aWYoaSl7aWYoaSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIGUoaSk7dmFyIG89XCJzdHJpbmdcIj09dHlwZW9mIGk/aTppWzFdO3JldHVybiBlKFAubm9ybWFsaXplUGFnZUhUTUwobykpfXZhciByPXdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0KTtpZihyKXt2YXIgYT1yLnRleHRDb250ZW50fHxyLmNvbnRlbnQ7cmV0dXJuIGUoYSl9dmFyIHM9bmV3IFhNTEh0dHBSZXF1ZXN0O3Mub3BlbihcIkdFVFwiLHQsITApLHMub25sb2FkPWZ1bmN0aW9uKCl7dmFyIGk9cy5yZXNwb25zZVRleHQ7aWYocy5zdGF0dXM+PTQwMCYmcy5zdGF0dXM8NjAwKW4oaSk7ZWxzZXt2YXIgbz1RLmNyZWF0ZUZyYWdtZW50KGkpO1EuYXJyYXlGcm9tKG8ucXVlcnlTZWxlY3RvckFsbChcInNjcmlwdFwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO2UudHlwZT10LnR5cGV8fFwidGV4dC9qYXZhc2NyaXB0XCIsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0LnRleHR8fHQudGV4dENvbnRlbnR8fHQuaW5uZXJIVE1MKSksdC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlLHQpfSksUC50ZW1wbGF0ZVN0b3JlLnNldCh0LG8pLGUobyl9fSxzLm9uZXJyb3I9ZnVuY3Rpb24oKXtRLnRocm93KFwiUGFnZSB0ZW1wbGF0ZSBub3QgZm91bmQ6IFwiK3QpfSxzLnNlbmQobnVsbCl9KX0pfSxQLmdldFBhZ2VIVE1MQXN5bmM9ZnVuY3Rpb24odCl7dmFyIGU9Uy5ldmFsdWF0ZSh0KTtyZXR1cm4gZnVuY3Rpb24gdChuKXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Ygbj9Qcm9taXNlLnJlamVjdChcIk11c3Qgc3BlY2lmeSBhIHBhZ2UuXCIpOlAuZ2V0VGVtcGxhdGVIVE1MQXN5bmMobikuY2F0Y2goZnVuY3Rpb24obil7cmV0dXJuIDA9PT1lLmxlbmd0aD9Qcm9taXNlLnJlamVjdChuKTp0KGUuc2hpZnQoKSl9KX0oZS5zaGlmdCgpKX07dmFyIE89ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUpe3AodGhpcyx0KSx0aGlzLl9hbmltYXRvcnM9ZS5hbmltYXRvcnMsdGhpcy5fYmFzZUNsYXNzPWUuYmFzZUNsYXNzLHRoaXMuX2Jhc2VDbGFzc05hbWU9ZS5iYXNlQ2xhc3NOYW1lfHxlLmJhc2VDbGFzcy5uYW1lLHRoaXMuX2FuaW1hdGlvbj1lLmRlZmF1bHRBbmltYXRpb258fFwiZGVmYXVsdFwiLHRoaXMuX2FuaW1hdGlvbk9wdGlvbnM9ZS5kZWZhdWx0QW5pbWF0aW9uT3B0aW9uc3x8e30sdGhpcy5fYW5pbWF0b3JzW3RoaXMuX2FuaW1hdGlvbl18fFEudGhyb3coXCJObyBzdWNoIGFuaW1hdGlvbjogXCIrdGhpcy5fYW5pbWF0aW9uKX1yZXR1cm4gZyh0LFt7a2V5Olwic2V0QW5pbWF0aW9uT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2FuaW1hdGlvbk9wdGlvbnM9dH19LHtrZXk6XCJuZXdBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LGU9YXJndW1lbnRzWzFdLG49bnVsbDtpZih0LmFuaW1hdGlvbiBpbnN0YW5jZW9mIHRoaXMuX2Jhc2VDbGFzcylyZXR1cm4gdC5hbmltYXRpb247dmFyIGk9bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgdC5hbmltYXRpb24mJihpPXRoaXMuX2FuaW1hdG9yc1t0LmFuaW1hdGlvbl0pLCFpJiZlKW49ZTtlbHNle2k9aXx8dGhpcy5fYW5pbWF0b3JzW3RoaXMuX2FuaW1hdGlvbl07dmFyIG89US5leHRlbmQoe30sdGhpcy5fYW5pbWF0aW9uT3B0aW9ucyx0LmFuaW1hdGlvbk9wdGlvbnN8fHt9LFAuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD97ZHVyYXRpb246MCxkZWxheTowfTp7fSk7XCJmdW5jdGlvblwiPT10eXBlb2Yobj1uZXcgaShvKSkmJihuPW5ldyBuKG8pKX1yZXR1cm4gbiBpbnN0YW5jZW9mIHRoaXMuX2Jhc2VDbGFzc3x8US50aHJvdygnXCJhbmltYXRvclwiIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiAnK3RoaXMuX2Jhc2VDbGFzc05hbWUpLG59fV0sW3trZXk6XCJwYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmdcIix2YWx1ZTpmdW5jdGlvbih0KXt0cnl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIHQpe3ZhciBlPVEuYW5pbWF0aW9uT3B0aW9uc1BhcnNlKHQpO2lmKFwib2JqZWN0XCI9PT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmYoZSkpJiZudWxsIT09ZSlyZXR1cm4gZTtjb25zb2xlLmVycm9yKCdcImFuaW1hdGlvbi1vcHRpb25zXCIgYXR0cmlidXRlIG11c3QgYmUgYSBKU09OIG9iamVjdCBzdHJpbmc6ICcrdCl9cmV0dXJue319Y2F0Y2goZSl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoJ1wiYW5pbWF0aW9uLW9wdGlvbnNcIiBhdHRyaWJ1dGUgbXVzdCBiZSBhIEpTT04gb2JqZWN0IHN0cmluZzogJyt0KSx7fX19fV0pLHR9KCkseD0hMCxUPXtxdWlldDpcIm1hdGVyaWFsLS1mbGF0XCIsbGlnaHQ6XCJtYXRlcmlhbC0tZmxhdFwiLG91dGxpbmU6XCJtYXRlcmlhbC0tZmxhdFwiLGN0YTpcIlwiLFwibGFyZ2UtLXF1aWV0XCI6XCJtYXRlcmlhbC0tZmxhdCBsYXJnZVwiLFwibGFyZ2UtLWN0YVwiOlwibGFyZ2VcIixub2JvcmRlcjpcIlwiLHRhcHBhYmxlOlwiXCJ9LEw9e307TC5hbmRyb2lkPWZ1bmN0aW9uKHQpe3ZhciBlPXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFRLmhhc01vZGlmaWVyKHQsXCJtYXRlcmlhbFwiKSl7dmFyIG49KHQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIil8fFwiXCIpLnRyaW0oKS5zcGxpdCgvXFxzKy8pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gVC5oYXNPd25Qcm9wZXJ0eSh0KT9UW3RdOnR9KTtuLnVuc2hpZnQoXCJtYXRlcmlhbFwiKSx0LnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsbi5qb2luKFwiIFwiKS50cmltKCkpfS0xPT09W1wib25zLWFsZXJ0LWRpYWxvZy1idXR0b25cIixcIm9ucy10b29sYmFyLWJ1dHRvblwiLFwib25zLWJhY2stYnV0dG9uXCIsXCJvbnMtYnV0dG9uXCIsXCJvbnMtbGlzdC1pdGVtXCIsXCJvbnMtZmFiXCIsXCJvbnMtc3BlZWQtZGlhbFwiLFwib25zLXNwZWVkLWRpYWwtaXRlbVwiLFwib25zLXRhYlwiXS5pbmRleE9mKGUpfHx0Lmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKXx8dC5xdWVyeVNlbGVjdG9yKFwib25zLXJpcHBsZVwiKXx8KFwib25zLWxpc3QtaXRlbVwiPT09ZT90Lmhhc0F0dHJpYnV0ZShcInRhcHBhYmxlXCIpJiYodC5zZXRBdHRyaWJ1dGUoXCJyaXBwbGVcIixcIlwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcInRhcHBhYmxlXCIpKTp0LnNldEF0dHJpYnV0ZShcInJpcHBsZVwiLFwiXCIpKX0sTC5pb3M9ZnVuY3Rpb24odCl7US5yZW1vdmVNb2RpZmllcih0LFwibWF0ZXJpYWxcIikmJihRLnJlbW92ZU1vZGlmaWVyKHQsXCJtYXRlcmlhbC0tZmxhdFwiKSYmUS5hZGRNb2RpZmllcih0LFEucmVtb3ZlTW9kaWZpZXIodCxcImxhcmdlXCIpP1wibGFyZ2UtLXF1aWV0XCI6XCJxdWlldFwiKSx0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpfHx0LnJlbW92ZUF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKSx0Lmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKSYmKFwib25zLWxpc3QtaXRlbVwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnQuc2V0QXR0cmlidXRlKFwidGFwcGFibGVcIixcIlwiKSx0LnJlbW92ZUF0dHJpYnV0ZShcInJpcHBsZVwiKSl9O3ZhciBNPXthbmRyb2lkOiEwfSxEPWZ1bmN0aW9uKHQsZSl7aWYoeCYmIXQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZS1hdXRvLXN0eWxpbmdcIikpe3ZhciBuPUMuZ2V0TW9iaWxlT1MoKTtpZihMLmhhc093blByb3BlcnR5KG4pJiYoTS5oYXNPd25Qcm9wZXJ0eShuKXx8ZSkpcmV0dXJuIG59cmV0dXJuIG51bGx9LEk9ZnVuY3Rpb24odCxlLG4pe3JldHVybiBEKGUsbik/dC5zcGxpdCgvXFxzKy8pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gVC5oYXNPd25Qcm9wZXJ0eSh0KT9UW3RdOnR9KS5qb2luKFwiIFwiKTp0fSxOPXtpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4geH0sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHg9ITB9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4geD0hMX0scHJlcGFyZTpmdW5jdGlvbih0LGUpe3ZhciBuPUQodCxlKTtuJiZMW25dKHQpfSxtYXBNb2RpZmllcjpJLGdldFBsYXRmb3JtOkQscmVzdG9yZU1vZGlmaWVyOmZ1bmN0aW9uKHQpe2lmKFwiYW5kcm9pZFwiPT09RCh0KSl7dmFyIGU9dC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIixuPUkoZSx0KTtpZigvKF58XFxzKyltYXRlcmlhbCgkfFxccyspL2kudGVzdChlKXx8KG49XCJtYXRlcmlhbCBcIituKSxuIT09ZSlyZXR1cm4gdC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLG4udHJpbSgpKSwhMH1yZXR1cm4hMX19LEI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpfXJldHVybiBnKHQsbnVsbCxbe2tleTpcImRpZmZcIix2YWx1ZTpmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIGkoZSl7dmFyIG49e307cmV0dXJuIHQuc3BsaXQoZSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gblt0XT10fSksbn1lPWkoKFwiXCIrZSkudHJpbSgpKSxuPWkoKFwiXCIrbikudHJpbSgpKTt2YXIgbz1PYmplY3Qua2V5cyhlKS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gbltlXXx8dC5wdXNoKGUpLHR9LFtdKTtyZXR1cm57YWRkZWQ6T2JqZWN0LmtleXMobikucmVkdWNlKGZ1bmN0aW9uKHQsbil7cmV0dXJuIGVbbl18fHQucHVzaChuKSx0fSxbXSkscmVtb3ZlZDpvfX19LHtrZXk6XCJhcHBseURpZmZUb0NsYXNzTGlzdFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt0LmFkZGVkLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbi5yZXBsYWNlKC9cXCovZyx0KX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLmFkZCh0KX0pfSksdC5yZW1vdmVkLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbi5yZXBsYWNlKC9cXCovZyx0KX0pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3JldHVybiBlLnJlbW92ZSh0KX0pfSl9fSx7a2V5OlwiYXBwbHlEaWZmVG9FbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oZSxuLGkpe09iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24obyl7Zm9yKHZhciByPSFvfHxRLm1hdGNoKG4sbyk/W25dOkFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChuLnF1ZXJ5U2VsZWN0b3JBbGwobyksZnVuY3Rpb24odCl7cmV0dXJuIVEuZmluZFBhcmVudCh0LG4udGFnTmFtZSxmdW5jdGlvbih0KXtyZXR1cm4gdD09PW59KX0pLGE9MDthPHIubGVuZ3RoO2ErKyl0LmFwcGx5RGlmZlRvQ2xhc3NMaXN0KGUsclthXS5jbGFzc0xpc3QsaVtvXSl9KX19LHtrZXk6XCJvbk1vZGlmaWVyQ2hhbmdlZFwiLHZhbHVlOmZ1bmN0aW9uKGUsbixpLG8pe3QuYXBwbHlEaWZmVG9FbGVtZW50KHQuZGlmZihlLG4pLGksbyksTi5yZXN0b3JlTW9kaWZpZXIoaSl9fSx7a2V5OlwicmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKGUsbil7dC5hcHBseURpZmZUb0VsZW1lbnQodC5kaWZmKFwiXCIsZS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIiksZSxuKX19LHtrZXk6XCJpbml0TW9kaWZpZXJcIix2YWx1ZTpmdW5jdGlvbihlLG4pe3ZhciBpPWUuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIik7XCJzdHJpbmdcIj09dHlwZW9mIGkmJnQuYXBwbHlEaWZmVG9FbGVtZW50KHtyZW1vdmVkOltdLGFkZGVkOnQuc3BsaXQoaSl9LGUsbil9fSx7a2V5Olwic3BsaXRcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdD9bXTp0LnRyaW0oKS5zcGxpdCgvICsvKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuXCJcIiE9PXR9KX19LHtrZXk6XCJhZGRNb2RpZmllclwiLHZhbHVlOmZ1bmN0aW9uKGUsbil7aWYoZS5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSl7dmFyIGk9dC5zcGxpdChlLmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKTstMT09aS5pbmRleE9mKG4pJiYoaS5wdXNoKG4pLGUuc2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIixpLmpvaW4oXCIgXCIpKSl9ZWxzZSBlLnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsbil9fSx7a2V5OlwicmVtb3ZlTW9kaWZpZXJcIix2YWx1ZTpmdW5jdGlvbihlLG4pe2lmKGUuaGFzQXR0cmlidXRlKFwibW9kaWZpZXJcIikpe3ZhciBpPXQuc3BsaXQoZS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSksbz1pLmluZGV4T2Yobik7LTEhPT1vJiYoaS5zcGxpY2UobywxKSxlLnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsaS5qb2luKFwiIFwiKSkpfX19XSksdH0oKSxqPXtfcmVhZHk6ITEsX2RvbUNvbnRlbnRMb2FkZWQ6ITEsX29uRE9NQ29udGVudExvYWRlZDpmdW5jdGlvbigpe2ouX2RvbUNvbnRlbnRMb2FkZWQ9ITAsQy5pc1dlYlZpZXcoKT93aW5kb3cuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsZnVuY3Rpb24oKXtqLl9yZWFkeT0hMH0sITEpOmouX3JlYWR5PSEwfSxhZGRCYWNrQnV0dG9uTGlzdGVuZXI6ZnVuY3Rpb24odCl7aWYoIXRoaXMuX2RvbUNvbnRlbnRMb2FkZWQpdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBtZXRob2QgaXMgYXZhaWxhYmxlIGFmdGVyIERPTUNvbnRlbnRMb2FkZWRcIik7dGhpcy5fcmVhZHk/d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJiYWNrYnV0dG9uXCIsdCwhMSk6d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7d2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJiYWNrYnV0dG9uXCIsdCwhMSl9KX0scmVtb3ZlQmFja0J1dHRvbkxpc3RlbmVyOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9kb21Db250ZW50TG9hZGVkKXRocm93IG5ldyBFcnJvcihcIlRoaXMgbWV0aG9kIGlzIGF2YWlsYWJsZSBhZnRlciBET01Db250ZW50TG9hZGVkXCIpO3RoaXMuX3JlYWR5P3dpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpOndpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIixmdW5jdGlvbigpe3dpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmFja2J1dHRvblwiLHQsITEpfSl9fTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe3JldHVybiBqLl9vbkRPTUNvbnRlbnRMb2FkZWQoKX0sITEpO3ZhciBIPXtfc3RvcmU6e30sX2dlbklkOmZ1bmN0aW9uKCl7dmFyIHQ9MDtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdCsrfX0oKSxzZXQ6ZnVuY3Rpb24odCxlKXt0LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZCYmdGhpcy5yZW1vdmUodCk7dmFyIG49dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQ9SC5fZ2VuSWQoKTt0aGlzLl9zdG9yZVtuXT1lfSxyZW1vdmU6ZnVuY3Rpb24odCl7dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQmJihkZWxldGUgdGhpcy5fc3RvcmVbdC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWRdLGRlbGV0ZSB0LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZCl9LGdldDpmdW5jdGlvbih0KXtpZih0LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZCl7dmFyIGU9dC5kYXRhc2V0LmRldmljZUJhY2tCdXR0b25IYW5kbGVySWQ7aWYoIXRoaXMuX3N0b3JlW2VdKXRocm93IG5ldyBFcnJvcjtyZXR1cm4gdGhpcy5fc3RvcmVbZV19fSxoYXM6ZnVuY3Rpb24odCl7aWYoIXQuZGF0YXNldClyZXR1cm4hMTt2YXIgZT10LmRhdGFzZXQuZGV2aWNlQmFja0J1dHRvbkhhbmRsZXJJZDtyZXR1cm4hIXRoaXMuX3N0b3JlW2VdfX0sUj1uZXcoZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpLHRoaXMuX2lzRW5hYmxlZD0hMSx0aGlzLl9ib3VuZENhbGxiYWNrPXRoaXMuX2NhbGxiYWNrLmJpbmQodGhpcyl9cmV0dXJuIGcodCxbe2tleTpcImVuYWJsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNFbmFibGVkfHwoai5hZGRCYWNrQnV0dG9uTGlzdGVuZXIodGhpcy5fYm91bmRDYWxsYmFjayksdGhpcy5faXNFbmFibGVkPSEwKX19LHtrZXk6XCJkaXNhYmxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pc0VuYWJsZWQmJihqLnJlbW92ZUJhY2tCdXR0b25MaXN0ZW5lcih0aGlzLl9ib3VuZENhbGxiYWNrKSx0aGlzLl9pc0VuYWJsZWQ9ITEpfX0se2tleTpcImZpcmVEZXZpY2VCYWNrQnV0dG9uRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIik7dC5pbml0RXZlbnQoXCJiYWNrYnV0dG9uXCIsITAsITApLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQodCl9fSx7a2V5OlwiX2NhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9kaXNwYXRjaERldmljZUJhY2tCdXR0b25FdmVudCgpfX0se2tleTpcImNyZWF0ZUhhbmRsZXJcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2lmKCEodCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSl0aHJvdyBuZXcgRXJyb3IoXCJlbGVtZW50IG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgSFRNTEVsZW1lbnRcIik7aWYoIShlIGluc3RhbmNlb2YgRnVuY3Rpb24pKXRocm93IG5ldyBFcnJvcihcImNhbGxiYWNrIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgRnVuY3Rpb25cIik7dmFyIG49e19jYWxsYmFjazplLF9lbGVtZW50OnQsZGlzYWJsZTpmdW5jdGlvbigpe0gucmVtb3ZlKHQpfSxzZXRMaXN0ZW5lcjpmdW5jdGlvbih0KXt0aGlzLl9jYWxsYmFjaz10fSxlbmFibGU6ZnVuY3Rpb24oKXtILnNldCh0LHRoaXMpfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gSC5nZXQodCk9PT10aGlzfSxkZXN0cm95OmZ1bmN0aW9uKCl7SC5yZW1vdmUodCksdGhpcy5fY2FsbGJhY2s9dGhpcy5fZWxlbWVudD1udWxsfX07cmV0dXJuIG4uZW5hYmxlKCksbn19LHtrZXk6XCJfZGlzcGF0Y2hEZXZpY2VCYWNrQnV0dG9uRXZlbnRcIix2YWx1ZTpmdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cmV0dXJue19lbGVtZW50OmUsY2FsbFBhcmVudEhhbmRsZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fZWxlbWVudC5wYXJlbnROb2RlO2U7KXtpZihpPUguZ2V0KGUpKXJldHVybiBpLl9jYWxsYmFjayh0KGUpKTtlPWUucGFyZW50Tm9kZX19fX12YXIgZT10aGlzLl9jYXB0dXJlVHJlZSgpLG49dGhpcy5fZmluZEhhbmRsZXJMZWFmRWxlbWVudChlKSxpPUguZ2V0KG4pO2kuX2NhbGxiYWNrKHQobikpfX0se2tleTpcIl9jYXB0dXJlVHJlZVwiLHZhbHVlOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj17ZWxlbWVudDplLGNoaWxkcmVuOkFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLG49MDtuPHQubGVuZ3RoO24rKyllLnB1c2godFtuXSk7cmV0dXJuIGV9KGUuY2hpbGRyZW4pLm1hcChmdW5jdGlvbihlKXtpZihcIm5vbmVcIj09PWUuc3R5bGUuZGlzcGxheXx8ITE9PT1lLl9pc1Nob3duKXJldHVybltdO2lmKDA9PT1lLmNoaWxkcmVuLmxlbmd0aCYmIUguaGFzKGUpKXJldHVybltdO3ZhciBuPXQoZSk7cmV0dXJuIDAhPT1uLmNoaWxkcmVuLmxlbmd0aHx8SC5oYXMobi5lbGVtZW50KT9bbl06W119KSl9O2lmKCFILmhhcyhuLmVsZW1lbnQpKWZvcih2YXIgaT0wO2k8bi5jaGlsZHJlbi5sZW5ndGg7aSsrKXt2YXIgbz1uLmNoaWxkcmVuW2ldO2lmKEguaGFzKG8uZWxlbWVudCkpcmV0dXJuIG99cmV0dXJuIG59cmV0dXJuIHQoZG9jdW1lbnQuYm9keSl9fSx7a2V5OlwiX2ZpbmRIYW5kbGVyTGVhZkVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtmdW5jdGlvbiBlKHQpe3JldHVybiAwPT09dC5jaGlsZHJlbi5sZW5ndGg/dC5lbGVtZW50OjE9PT10LmNoaWxkcmVuLmxlbmd0aD9lKHQuY2hpbGRyZW5bMF0pOnQuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmVsZW1lbnR9KS5yZWR1Y2UoZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gZTt2YXIgbj1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LFwiXCIpLnpJbmRleCwxMCksaT1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlLFwiXCIpLnpJbmRleCwxMCk7aWYoIWlzTmFOKG4pJiYhaXNOYU4oaSkpcmV0dXJuIG4+aT90OmU7dGhyb3cgbmV3IEVycm9yKFwiQ2FwdHVyaW5nIGJhY2tidXR0b24taGFuZGxlciBpcyBmYWlsdXJlLlwiKX0sbnVsbCl9cmV0dXJuIGUodCl9fV0pLHR9KCkpO1AuQW5pbWF0b3JGYWN0b3J5PU8sUC5Nb2RpZmllclV0aWw9QixQLmRiYkRpc3BhdGNoZXI9Ujt2YXIgRj1mdW5jdGlvbih0LGUpe3JldHVybiB0LnN1YnN0cigwLGUubGVuZ3RoKT09PWV9LHE9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5zdWJzdHIodC5sZW5ndGgtZS5sZW5ndGgsZS5sZW5ndGgpPT09ZX0sej1mdW5jdGlvbih0KXtyZXR1cm4gdC5zbGljZSgxLC0xKX0sVj1mdW5jdGlvbih0KXtyZXR1cm4gRih0LFwie1wiKSYmcSh0LFwifVwiKX0sVz1mdW5jdGlvbih0KXtyZXR1cm4gRih0LFwiW1wiKSYmcSh0LFwiXVwiKX0sVT1mdW5jdGlvbih0KXtyZXR1cm4gRih0LFwiJ1wiKSYmcSh0LFwiJ1wiKXx8Rih0LCdcIicpJiZxKHQsJ1wiJyl9LFg9ZnVuY3Rpb24odCxlLG4pe3Rocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgdG9rZW4gJ1wiK3QrXCInIGF0IHBvc2l0aW9uIFwiKyhuLmxlbmd0aC1lLmxlbmd0aC0xKStcIiBpbiBzdHJpbmc6ICdcIituK1wiJ1wiKX0sWT1mdW5jdGlvbih0LGUsbil7cmV0dXJuXCJ0cnVlXCI9PT10fHxcImZhbHNlXCI9PT10P1widHJ1ZVwiPT09dDpVKHQpP3oodCk6aXNOYU4odCk/Vih0KT8kKHoodCkpOlcodCk/Syh6KHQpKTp2b2lkIFgodCxlLG4pOit0fSxHPWZ1bmN0aW9uKHQpe3ZhciBlPSh0PXQudHJpbSgpKS5sZW5ndGg7aWYoXCI6XCI9PT10WzBdfHxcIixcIj09PXRbMF0pZT0xO2Vsc2UgaWYoXCJ7XCI9PT10WzBdfHxcIltcIj09PXRbMF0pe2Zvcih2YXIgbj10LmNoYXJDb2RlQXQoMCksaT0xLG89MTtvPHQubGVuZ3RoO28rKylpZih0LmNoYXJDb2RlQXQobyk9PT1uKWkrKztlbHNlIGlmKHQuY2hhckNvZGVBdChvKT09PW4rMiYmMD09LS1pKXtlPW8rMTticmVha319ZWxzZSBpZihcIidcIj09PXRbMF18fCdcIic9PT10WzBdKXtmb3IodmFyIHI9MTtyPHQubGVuZ3RoO3IrKylpZih0W3JdPT09dFswXSl7ZT1yKzE7YnJlYWt9fWVsc2UgZm9yKHZhciBhPTE7YTx0Lmxlbmd0aDthKyspaWYoLTEhPT1bXCIgXCIsXCIsXCIsXCI6XCJdLmluZGV4T2YodFthXSkpe2U9YTticmVha31yZXR1cm4gdC5zbGljZSgwLGUpfSwkPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10PXQudHJpbSgpLG49e30saT0hMCxvPXZvaWQgMCxyPXZvaWQgMCxhPXZvaWQgMDt0Lmxlbmd0aD4wOylpZihyPWEsYT1HKHQpLHQ9dC5zbGljZShhLmxlbmd0aCx0Lmxlbmd0aCkudHJpbSgpLFwiOlwiPT09YSYmKCFpfHwhcnx8XCIsXCI9PT1yKXx8XCIsXCI9PT1hJiZpfHxcIjpcIiE9PWEmJlwiLFwiIT09YSYmciYmXCIsXCIhPT1yJiZcIjpcIiE9PXIpWChhLHQsZSk7ZWxzZSBpZihcIjpcIj09PWEmJmkmJnIpe2lmKHI9VShyKT96KHIpOnIsIWZ1bmN0aW9uKHQpe3JldHVybi9eW0EtWl8kXVtBLVowLTlfJF0qJC9pLnRlc3QodCl9KHIpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQga2V5IHRva2VuICdcIityK1wiJyBhdCBwb3NpdGlvbiAwIGluIHN0cmluZzogJ1wiK2UrXCInXCIpO289cixpPSExfWVsc2VcIixcIj09PWEmJiFpJiZyJiYobltvXT1ZKHIsdCxlKSxpPSEwKTtyZXR1cm4gYSYmKG5bb109WShhLHQsZSkpLG59LEs9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQ9dC50cmltKCksbj1bXSxpPXZvaWQgMCxvPXZvaWQgMDt0Lmxlbmd0aD4wOylpPW8sbz1HKHQpLHQ9dC5zbGljZShvLmxlbmd0aCx0Lmxlbmd0aCkudHJpbSgpLFwiLFwiIT09b3x8aSYmXCIsXCIhPT1pP1wiLFwiPT09byYmbi5wdXNoKFkoaSx0LGUpKTpYKG8sdCxlKTtyZXR1cm4gbyYmKFwiLFwiIT09bz9uLnB1c2goWShvLHQsZSkpOlgobyx0LGUpKSxufSxRPXt9LEo9XCJbT25zZW4gVUldXCI7US5nbG9iYWxzPXtmYWJPZmZzZXQ6MCxlcnJvclByZWZpeDpKLHN1cHBvcnRzUGFzc2l2ZTohMX0sQy5fcnVuT25BY3R1YWxQbGF0Zm9ybShmdW5jdGlvbigpe1EuZ2xvYmFscy5hY3R1YWxNb2JpbGVPUz1DLmdldE1vYmlsZU9TKCksUS5nbG9iYWxzLmlzVUlXZWJWaWV3PUMuaXNVSVdlYlZpZXcoKSxRLmdsb2JhbHMuaXNXS1dlYlZpZXc9Qy5pc1dLV2ViVmlldygpfSk7dHJ5e3ZhciBaPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7US5nbG9iYWxzLnN1cHBvcnRzUGFzc2l2ZT0hMH19KTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RQYXNzaXZlXCIsbnVsbCxaKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RQYXNzaXZlXCIsbnVsbCxaKX1jYXRjaCh0KXt9US5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSxuLGksbyl7dC5hZGRFdmVudExpc3RlbmVyKGUsbixRLmdsb2JhbHMuc3VwcG9ydHNQYXNzaXZlP2k6KGl8fHt9KS5jYXB0dXJlKX0sUS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsZSxuLGksbyl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbixRLmdsb2JhbHMuc3VwcG9ydHNQYXNzaXZlP2k6KGl8fHt9KS5jYXB0dXJlKX0sUS5wcmVwYXJlUXVlcnk9ZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBGdW5jdGlvbj90OmZ1bmN0aW9uKGUpe3JldHVybiBRLm1hdGNoKGUsdCl9fSxRLm1hdGNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQubWF0Y2hlc3x8dC53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fHQubW96TWF0Y2hlc1NlbGVjdG9yfHx0Lm1zTWF0Y2hlc1NlbGVjdG9yKS5jYWxsKHQsZSl9LFEuZmluZENoaWxkPWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBuPVEucHJlcGFyZVF1ZXJ5KGUpLGk9MDtpPHQuY2hpbGROb2Rlcy5sZW5ndGg7aSsrKXt2YXIgbz10LmNoaWxkTm9kZXNbaV07aWYoby5ub2RlVHlwZT09PU5vZGUuRUxFTUVOVF9OT0RFJiZuKG8pKXJldHVybiBvfXJldHVybiBudWxsfSxRLmZpbmRQYXJlbnQ9ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaT1RLnByZXBhcmVRdWVyeShlKSxvPXQucGFyZW50Tm9kZTs7KXtpZighb3x8bz09PWRvY3VtZW50fHxvIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudHx8biYmbihvKSlyZXR1cm4gbnVsbDtpZihpKG8pKXJldHVybiBvO289by5wYXJlbnROb2RlfX0sUS5pc0F0dGFjaGVkPWZ1bmN0aW9uKHQpe3JldHVybiBkb2N1bWVudC5ib2R5LmNvbnRhaW5zKHQpfSxRLmhhc0FueUNvbXBvbmVudEFzUGFyZW50PWZ1bmN0aW9uKHQpe2Zvcig7dCYmZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IT09dDspaWYoKHQ9dC5wYXJlbnROb2RlKSYmdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLm1hdGNoKC8ob25zLW5hdmlnYXRvcnxvbnMtdGFiYmFyfG9ucy1tb2RhbCkvKSlyZXR1cm4hMDtyZXR1cm4hMX0sUS5nZXRBbGxDaGlsZE5vZGVzPWZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybihlPVt0XSkuY29uY2F0LmFwcGx5KGUsdyhBcnJheS5mcm9tKHQuY2hpbGRyZW4pLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gUS5nZXRBbGxDaGlsZE5vZGVzKHQpfSkpKX0sUS5pc1BhZ2VDb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiB0Lm5vZGVOYW1lLm1hdGNoKC9eb25zLShuYXZpZ2F0b3J8c3BsaXR0ZXJ8dGFiYmFyfHBhZ2UpJC9pKX0sUS5wcm9wYWdhdGVBY3Rpb249ZnVuY3Rpb24odCxlKXtmb3IodmFyIG49MDtuPHQuY2hpbGROb2Rlcy5sZW5ndGg7bisrKXt2YXIgaT10LmNoaWxkTm9kZXNbbl07aVtlXWluc3RhbmNlb2YgRnVuY3Rpb24/aVtlXSgpOlEucHJvcGFnYXRlQWN0aW9uKGksZSl9fSxRLmNhbWVsaXplPWZ1bmN0aW9uKHQpe3JldHVybiB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvLShbYS16XSkvZyxmdW5jdGlvbih0LGUpe3JldHVybiBlLnRvVXBwZXJDYXNlKCl9KX0sUS5oeXBoZW5hdGU9ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVwbGFjZSgvKFthLXpBLVpdKShbQS1aXSkvZyxcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCl9LFEuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOlwiXCIsZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj10LnNwbGl0KFwiLlwiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobi5zaGlmdCgpfHxcImRpdlwiKTtyZXR1cm4gbi5sZW5ndGgmJihpLmNsYXNzTmFtZT1uLmpvaW4oXCIgXCIpKSxkKGksZSksaX0sUS5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dCBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQ/ZS5hcHBlbmRDaGlsZChkb2N1bWVudC5pbXBvcnROb2RlKHQsITApKTplLmlubmVySFRNTD10LnRyaW0oKSxlLmNoaWxkcmVuLmxlbmd0aD4xJiZRLnRocm93KFwiSFRNTCB0ZW1wbGF0ZSBtdXN0IGNvbnRhaW4gYSBzaW5nbGUgcm9vdCBlbGVtZW50XCIpO3ZhciBuPWUuY2hpbGRyZW5bMF07cmV0dXJuIGUuY2hpbGRyZW5bMF0ucmVtb3ZlKCksbn0sUS5jcmVhdGVGcmFnbWVudD1mdW5jdGlvbih0KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7cmV0dXJuIGUuaW5uZXJIVE1MPXQsZG9jdW1lbnQuaW1wb3J0Tm9kZShlLmNvbnRlbnQsITApfSxRLmV4dGVuZD1mdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGU+MT9lLTE6MCksaT0xO2k8ZTtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKylpZihuW29dKWZvcih2YXIgcj1PYmplY3Qua2V5cyhuW29dKSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBzPXJbYV07dFtzXT1uW29dW3NdfXJldHVybiB0fSxRLmFycmF5RnJvbT1mdW5jdGlvbih0KXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KHQpfSxRLnBhcnNlSlNPTk9iamVjdFNhZmVseT1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307dHJ5e3ZhciBuPUpTT04ucGFyc2UoXCJcIit0KTtpZihcIm9iamVjdFwiPT09KHZvaWQgMD09PW4/XCJ1bmRlZmluZWRcIjpmKG4pKSYmbnVsbCE9PW4pcmV0dXJuIG59Y2F0Y2godCl7cmV0dXJuIGV9cmV0dXJuIGV9LFEuZmluZEZyb21QYXRoPWZ1bmN0aW9uKHQpe3Q9dC5zcGxpdChcIi5cIik7Zm9yKHZhciBlLG49d2luZG93O2U9dC5zaGlmdCgpOyluPW5bZV07cmV0dXJuIG59LFEuZ2V0VG9wUGFnZT1mdW5jdGlvbih0KXtyZXR1cm4gdCYmKFwib25zLXBhZ2VcIj09PXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpP3Q6dC50b3BQYWdlKXx8bnVsbH0sUS5maW5kVG9vbGJhclBhZ2U9ZnVuY3Rpb24odCl7dmFyIGU9US5nZXRUb3BQYWdlKHQpO2lmKGUpe2lmKGUuX2NhbkFuaW1hdGVUb29sYmFyKCkpcmV0dXJuIGU7Zm9yKHZhciBuPTA7bjxlLl9jb250ZW50RWxlbWVudC5jaGlsZHJlbi5sZW5ndGg7bisrKXt2YXIgaT1RLmdldFRvcFBhZ2UoZS5fY29udGVudEVsZW1lbnQuY2hpbGRyZW5bbl0pO2lmKGkmJiEvb25zLXRhYmJhci9pLnRlc3QoZS5fY29udGVudEVsZW1lbnQuY2hpbGRyZW5bbl0udGFnTmFtZSkpcmV0dXJuIFEuZmluZFRvb2xiYXJQYWdlKGkpfX1yZXR1cm4gbnVsbH0sUS50cmlnZ2VyRWxlbWVudEV2ZW50PWZ1bmN0aW9uKHQsZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOnt9LGk9bmV3IEN1c3RvbUV2ZW50KGUse2J1YmJsZXM6ITAsY2FuY2VsYWJsZTohMCxkZXRhaWw6bn0pO3JldHVybiBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lbdF09blt0XX0pLHQuZGlzcGF0Y2hFdmVudChpKSxpfSxRLmhhc01vZGlmaWVyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuISF0Lmhhc0F0dHJpYnV0ZShcIm1vZGlmaWVyXCIpJiZSZWdFeHAoXCIoXnxcXFxccyspXCIrZStcIigkfFxcXFxzKylcIixcImlcIikudGVzdCh0LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpKX0sUS5hZGRNb2RpZmllcj1mdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTtyZXR1cm4gbi5hdXRvU3R5bGUmJihlPU4ubWFwTW9kaWZpZXIoZSx0LG4uZm9yY2VBdXRvU3R5bGUpKSwhUS5oYXNNb2RpZmllcih0LGUpJiYodC5zZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiLCgodC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIikrXCIgXCIrZSkudHJpbSgpKSwhMCl9LFEucmVtb3ZlTW9kaWZpZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307aWYobi5hdXRvU3R5bGUmJihlPU4ubWFwTW9kaWZpZXIoZSx0LG4uZm9yY2VBdXRvU3R5bGUpKSwhdC5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8IVEuaGFzTW9kaWZpZXIodCxlKSlyZXR1cm4hMTt2YXIgaT10LmdldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIpLnNwbGl0KC9cXHMrLykuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0IT09ZX0pO3JldHVybiBpLmxlbmd0aD90LnNldEF0dHJpYnV0ZShcIm1vZGlmaWVyXCIsaS5qb2luKFwiIFwiKSk6dC5yZW1vdmVBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSwhMH0sUS50b2dnbGVNb2RpZmllcj1mdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+Mj9hcmd1bWVudHMubGVuZ3RoPD0yP3ZvaWQgMDphcmd1bWVudHNbMl06e30sZT1cImJvb2xlYW5cIj09dHlwZW9mIHQ/dDp0LmZvcmNlOyhcImJvb2xlYW5cIj09dHlwZW9mIGU/ZTohUS5oYXNNb2RpZmllci5hcHBseShRLGFyZ3VtZW50cykpP1EuYWRkTW9kaWZpZXIuYXBwbHkoUSxhcmd1bWVudHMpOlEucmVtb3ZlTW9kaWZpZXIuYXBwbHkoUSxhcmd1bWVudHMpfSxRLnJlc3RvcmVDbGFzcz1mdW5jdGlvbih0LGUsbil7ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuXCJcIiE9PWUmJiF0LmNsYXNzTGlzdC5jb250YWlucyhlKSYmdC5jbGFzc0xpc3QuYWRkKGUpfSksdC5oYXNBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSYmQi5yZWZyZXNoKHQsbil9LFEudXBkYXRlUGFyZW50UG9zaXRpb249ZnVuY3Rpb24odCl7IXQuX3BhcmVudFVwZGF0ZWQmJnQucGFyZW50RWxlbWVudCYmKFwic3RhdGljXCI9PT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LnBhcmVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoXCJwb3NpdGlvblwiKSYmKHQucGFyZW50RWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLHQuX3BhcmVudFVwZGF0ZWQ9ITApfSxRLnRvZ2dsZUF0dHJpYnV0ZT1mdW5jdGlvbih0LGUsbil7bj90LnNldEF0dHJpYnV0ZShlLFwiYm9vbGVhblwiPT10eXBlb2Ygbj9cIlwiOm4pOnQucmVtb3ZlQXR0cmlidXRlKGUpfSxRLmJpbmRMaXN0ZW5lcnM9ZnVuY3Rpb24odCxlKXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49ZS5yZXBsYWNlKC9eX1thLXpdLyxcIl9ib3VuZFwiK2VbMV0udG9VcHBlckNhc2UoKSk7dFtuXT10W25dfHx0W2VdLmJpbmQodCl9KX0sUS5lYWNoPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24obil7cmV0dXJuIGUobix0W25dKX0pfSxRLnVwZGF0ZVJpcHBsZT1mdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXTp7fTt2b2lkIDA9PT1lJiYoZT10Lmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKSk7dmFyIGk9US5maW5kQ2hpbGQodCxcIm9ucy1yaXBwbGVcIik7aWYoZSl7aWYoIWkpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvbnMtcmlwcGxlXCIpO09iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG8uc2V0QXR0cmlidXRlKHQsblt0XSl9KSx0Lmluc2VydEJlZm9yZShvLHQuZmlyc3RDaGlsZCl9fWVsc2UgaSYmaS5yZW1vdmUoKX0sUS5hbmltYXRpb25PcHRpb25zUGFyc2U9ZnVuY3Rpb24odCl7aWYodD10LnRyaW0oKSxWKHQpKXJldHVybiAkKHoodCkpO2lmKFcodCkpcmV0dXJuIEsoeih0KSk7dGhyb3cgbmV3IEVycm9yKFwiUHJvdmlkZWQgc3RyaW5nIG11c3QgYmUgb2JqZWN0IG9yIGFycmF5IGxpa2U6IFwiK3QpfSxRLmlzSW50ZWdlcj1mdW5jdGlvbih0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdCYmaXNGaW5pdGUodCkmJk1hdGguZmxvb3IodCk9PT10fSxRLmRlZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIHQucHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbihlLG4pe3QucmVzb2x2ZT1lLHQucmVqZWN0PW59KSx0fSxRLndhcm49ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO2lmKCFQLmNvbmZpZy53YXJuaW5nc0Rpc2FibGVkKXt2YXIgaTsoaT1jb25zb2xlKS53YXJuLmFwcGx5KGksW0pdLmNvbmNhdChlKSl9fSxRLnRocm93PWZ1bmN0aW9uKHQpe3Rocm93IG5ldyBFcnJvcihKK1wiIFwiK3QpfSxRLnRocm93QWJzdHJhY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gUS50aHJvdyhcIkNhbm5vdCBpbnN0YW50aWF0ZSBhYnN0cmFjdCBjbGFzc1wiKX0sUS50aHJvd01lbWJlcj1mdW5jdGlvbigpe3JldHVybiBRLnRocm93KFwiQ2xhc3MgbWVtYmVyIG11c3QgYmUgaW1wbGVtZW50ZWRcIil9LFEudGhyb3dQYWdlTG9hZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIFEudGhyb3coXCJGaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIGFuIGluc3RhbmNlIG9mIFBhZ2VMb2FkZXJcIil9LFEudGhyb3dBbmltYXRvcj1mdW5jdGlvbih0KXtyZXR1cm4gUS50aHJvdygnXCJBbmltYXRvclwiIHBhcmFtIG11c3QgaW5oZXJpdCAnK3QrXCJBbmltYXRvclwiKX07dmFyIHR0PWZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbmNlbGFibGUmJnQucHJldmVudERlZmF1bHQoKX07US5pb3NQcmV2ZW50U2Nyb2xsPWZ1bmN0aW9uKHQpe2lmKFwiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1Mpe3Qub24oXCJ0b3VjaG1vdmVcIix0dCksdC5vbihcImRyYWdlbmRcIixmdW5jdGlvbiBlKG4pe3Qub2ZmKFwidG91Y2htb3ZlXCIsdHQpLHQub2ZmKFwiZHJhZ2VuZFwiLGUpfSl9fSxRLmlvc1BhZ2VTY3JvbGxGaXg9ZnVuY3Rpb24odCl7XCJpb3NcIj09PVEuZ2xvYmFscy5hY3R1YWxNb2JpbGVPUyYmKGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcIm9ucy1pb3Mtc2Nyb2xsXCIsdCksUS5nbG9iYWxzLmlzVUlXZWJWaWV3JiYhUC5jb25maWcuZm9yY2VVSVdlYlZpZXdTY3JvbGxGaXh8fGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcIm9ucy1pb3Mtc2Nyb2xsLWZpeFwiLHQpKX0sUS5pb3NNYXNrU2Nyb2xsRml4PWZ1bmN0aW9uKHQsZSl7aWYoUS5nbG9iYWxzLmlzVUlXZWJWaWV3KXt0WyhlP1wiYWRkXCI6XCJyZW1vdmVcIikrXCJFdmVudExpc3RlbmVyXCJdKFwidG91Y2htb3ZlXCIsdHQsITEpfX0sUS5pc1ZhbGlkR2VzdHVyZT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwIT09dC5nZXN0dXJlJiYodC5nZXN0dXJlLmRpc3RhbmNlPD0xNXx8dC5nZXN0dXJlLmRlbHRhVGltZTw9MTAwKX0sUS5jaGVja01pc3NpbmdJbXBvcnQ9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO2UuZm9yRWFjaChmdW5jdGlvbih0KXtjW3RdfHxRLnRocm93KFwiT25zXCIrdCtcIiBpcyByZXF1aXJlZCBidXQgd2FzIG5vdCBpbXBvcnRlZCAoQ3VzdG9tIEVsZW1lbnRzKVwiKX0pfTt2YXIgZXQ9e307ZXQuY2FwaXRhbGl6ZT1mdW5jdGlvbih0KXtyZXR1cm4gdC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpfSxldC5idWlsZFRyYW5zaXRpb25WYWx1ZT1mdW5jdGlvbih0KXt0LnByb3BlcnR5PXQucHJvcGVydHl8fFwiYWxsXCIsdC5kdXJhdGlvbj10LmR1cmF0aW9ufHwuNCx0LnRpbWluZz10LnRpbWluZ3x8XCJsaW5lYXJcIjtyZXR1cm4gdC5wcm9wZXJ0eS5zcGxpdCgvICsvKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIGUrXCIgXCIrdC5kdXJhdGlvbitcInMgXCIrdC50aW1pbmd9KS5qb2luKFwiLCBcIil9LGV0Lm9uY2VPblRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24odCxlKXtpZighdClyZXR1cm4gZnVuY3Rpb24oKXt9O3ZhciBuPWZ1bmN0aW9uKG4pe3Q9PW4udGFyZ2V0JiYobi5zdG9wUHJvcGFnYXRpb24oKSxpKCksZSgpKX0saT1mdW5jdGlvbigpe2V0Ll90cmFuc2l0aW9uRW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbiwhMSl9KX07cmV0dXJuIGV0Ll90cmFuc2l0aW9uRW5kRXZlbnRzLmZvckVhY2goZnVuY3Rpb24oZSl7dC5hZGRFdmVudExpc3RlbmVyKGUsbiwhMSl9KSxpfSxldC5fdHJhbnNpdGlvbkVuZEV2ZW50cz1cIm9udHJhbnNpdGlvbmVuZFwiaW4gd2luZG93P1tcInRyYW5zaXRpb25lbmRcIl06XCJvbndlYmtpdHRyYW5zaXRpb25lbmRcImluIHdpbmRvdz9bXCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCJdOlwid2Via2l0XCI9PT1ldC52ZW5kb3JQcmVmaXh8fFwib1wiPT09ZXQudmVuZG9yUHJlZml4fHxcIm1velwiPT09ZXQudmVuZG9yUHJlZml4fHxcIm1zXCI9PT1ldC52ZW5kb3JQcmVmaXg/W2V0LnZlbmRvclByZWZpeCtcIlRyYW5zaXRpb25FbmRcIixcInRyYW5zaXRpb25lbmRcIl06W10sZXQuX2Nzc1Byb3BlcnR5RGljdD1mdW5jdGlvbigpe2Zvcih2YXIgdD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXCJcIiksZT17fSxuPVwiQVwiLmNoYXJDb2RlQXQoMCksaT1cInpcIi5jaGFyQ29kZUF0KDApLG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIHI9dFtvXS5yZXBsYWNlKC9eWy1dKy8sXCJcIikucmVwbGFjZSgvWy1dW2Etel0vZyxmdW5jdGlvbih0KXtyZXR1cm4gdC5zdWJzdHIoMSkudG9VcHBlckNhc2UoKX0pLnJlcGxhY2UoL15tb3ovLFwiTW96XCIpO248PXIuY2hhckNvZGVBdCgwKSYmaT49ci5jaGFyQ29kZUF0KDApJiZcImNzc1RleHRcIiE9PXImJlwicGFyZW50VGV4dFwiIT09ciYmKGVbcl09ITApfXJldHVybiBlfSgpLGV0Lmhhc0Nzc1Byb3BlcnR5PWZ1bmN0aW9uKHQpe3JldHVybiB0IGluIGV0Ll9jc3NQcm9wZXJ0eURpY3R9LGV0LnZlbmRvclByZWZpeD1mdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcIlwiKTtyZXR1cm4oQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkuam9pbihcIlwiKS5tYXRjaCgvLShtb3p8d2Via2l0fG1zKS0vKXx8XCJcIj09PXQuT0xpbmsmJltcIlwiLFwib1wiXSlbMV19KCksZXQuZm9yY2VMYXlvdXRBdE9uY2U9ZnVuY3Rpb24odCxlKXt0aGlzLmJhdGNoSW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Qub2Zmc2V0SGVpZ2h0fSksZSgpfSl9LGV0LmJhdGNoSW1tZWRpYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9W107cmV0dXJuIGZ1bmN0aW9uKGUpezA9PT10Lmxlbmd0aCYmc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dmFyIGU9dC5zbGljZSgwKTt0PVtdLGUuZm9yRWFjaChmdW5jdGlvbih0KXt0KCl9KX0pLHQucHVzaChlKX19KCksZXQuYmF0Y2hBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciB0PVtdLGU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24odCl7c2V0VGltZW91dCh0LDFlMy82MCl9O3JldHVybiBmdW5jdGlvbihuKXswPT09dC5sZW5ndGgmJmUoZnVuY3Rpb24oKXt2YXIgZT10LnNsaWNlKDApO3Q9W10sZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoKX0pfSksdC5wdXNoKG4pfX0oKSxldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lPWZ1bmN0aW9uKCl7aWYoZXQuaGFzQ3NzUHJvcGVydHkoXCJ0cmFuc2l0aW9uRHVyYXRpb25cIikpcmV0dXJuXCJ0cmFuc2l0aW9uXCI7aWYoZXQuaGFzQ3NzUHJvcGVydHkoZXQudmVuZG9yUHJlZml4K1wiVHJhbnNpdGlvbkR1cmF0aW9uXCIpKXJldHVybiBldC52ZW5kb3JQcmVmaXgrXCJUcmFuc2l0aW9uXCI7dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZVwiKX0oKTt2YXIgbnQ9ZnVuY3Rpb24gdChlLG4pe2lmKCEodGhpcyBpbnN0YW5jZW9mIHQpKXJldHVybiBuZXcgdChlLG4pO2lmKGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl0aGlzLmVsZW1lbnRzPVtlXTtlbHNle2lmKFwiW29iamVjdCBBcnJheV1cIiE9PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSl0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGFuIGFycmF5IG9yIGFuIGluc3RhbmNlIG9mIEhUTUxFbGVtZW50LlwiKTt0aGlzLmVsZW1lbnRzPWV9dGhpcy5kZWZhdWx0cz1uLHRoaXMudHJhbnNpdGlvblF1ZXVlPVtdLHRoaXMubGFzdFN0eWxlQXR0cmlidXRlRGljdD1bXX07bnQucHJvdG90eXBlPXt0cmFuc2l0aW9uUXVldWU6dm9pZCAwLGVsZW1lbnRzOnZvaWQgMCxkZWZhdWx0czp2b2lkIDAscGxheTpmdW5jdGlvbih0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0JiZ0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKGUpe3QoKSxlKCl9KSx0aGlzLnN0YXJ0QW5pbWF0aW9uKCksdGhpc30sZGVmYXVsdDpmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gaSh0LGUsbil7cmV0dXJuIHZvaWQgMCE9PXQuZHVyYXRpb24mJihlPXQuZHVyYXRpb24pLHZvaWQgMCE9PXQudGltaW5nJiYobj10LnRpbWluZykse2Nzczp0LmNzc3x8dCxkdXJhdGlvbjplLHRpbWluZzpufX1yZXR1cm4gdGhpcy5zYXZlU3R5bGUoKS5xdWV1ZShpKHQsMCx0aGlzLmRlZmF1bHRzLnRpbWluZykpLndhaXQodm9pZCAwPT09bj90aGlzLmRlZmF1bHRzLmRlbGF5Om4pLnF1ZXVlKGkoZSx0aGlzLmRlZmF1bHRzLmR1cmF0aW9uLHRoaXMuZGVmYXVsdHMudGltaW5nKSkucmVzdG9yZVN0eWxlKCl9LHF1ZXVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy50cmFuc2l0aW9uUXVldWU7aWYodCYmZSYmKGUuY3NzPXQsdD1uZXcgbnQuVHJhbnNpdGlvbihlKSksdCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHx0IGluc3RhbmNlb2YgbnQuVHJhbnNpdGlvbnx8KHQ9bmV3IG50LlRyYW5zaXRpb24odC5jc3M/dDp7Y3NzOnR9KSksdCBpbnN0YW5jZW9mIEZ1bmN0aW9uKW4ucHVzaCh0KTtlbHNle2lmKCEodCBpbnN0YW5jZW9mIG50LlRyYW5zaXRpb24pKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzXCIpO24ucHVzaCh0LmJ1aWxkKCkpfXJldHVybiB0aGlzfSx3YWl0OmZ1bmN0aW9uKHQpe3JldHVybiB0PjAmJnRoaXMudHJhbnNpdGlvblF1ZXVlLnB1c2goZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDFlMyp0KX0pLHRoaXN9LHNhdmVTdHlsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRyYW5zaXRpb25RdWV1ZS5wdXNoKGZ1bmN0aW9uKHQpe3RoaXMuZWxlbWVudHMuZm9yRWFjaChmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10aGlzLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3RbZV09e30saT0wO2k8dC5zdHlsZS5sZW5ndGg7aSsrKW5bdC5zdHlsZVtpXV09dC5zdHlsZVt0LnN0eWxlW2ldXX0uYmluZCh0aGlzKSksdCgpfS5iaW5kKHRoaXMpKSx0aGlzfSxyZXN0b3JlU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZigodD10fHx7fSkudHJhbnNpdGlvbiYmIXQuZHVyYXRpb24pdGhyb3cgbmV3IEVycm9yKCdcIm9wdGlvbnMuZHVyYXRpb25cIiBpcyByZXF1aXJlZCB3aGVuIFwib3B0aW9ucy50cmFuc2l0aW9uXCIgaXMgZW5hYmxlZC4nKTt2YXIgbj1ldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lO2lmKHQudHJhbnNpdGlvbnx8dC5kdXJhdGlvbiYmdC5kdXJhdGlvbj4wKXt2YXIgaT10LnRyYW5zaXRpb258fFwiYWxsIFwiK3QuZHVyYXRpb24rXCJzIFwiKyh0LnRpbWluZ3x8XCJsaW5lYXJcIik7dGhpcy50cmFuc2l0aW9uUXVldWUucHVzaChmdW5jdGlvbihvKXt2YXIgcixhPXRoaXMuZWxlbWVudHMscz1mdW5jdGlvbigpe2EuZm9yRWFjaChmdW5jdGlvbih0KXt0LnN0eWxlW25dPVwiXCJ9KX0sbD1ldC5vbmNlT25UcmFuc2l0aW9uRW5kKGFbMF0sZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQocikscygpLG8oKX0pO3I9c2V0VGltZW91dChmdW5jdGlvbigpe2woKSxzKCksbygpfSwxZTMqdC5kdXJhdGlvbioxLjQpLGEuZm9yRWFjaChmdW5jdGlvbih0LG8pe3ZhciByPWUubGFzdFN0eWxlQXR0cmlidXRlRGljdFtvXTtpZighcil0aHJvdyBuZXcgRXJyb3IoXCJyZXN0b3JlU3R5bGUoKTogVGhlIHN0eWxlIGlzIG5vdCBzYXZlZC4gSW52b2tlIHNhdmVTdHlsZSgpIGJlZm9yZS5cIik7ZS5sYXN0U3R5bGVBdHRyaWJ1dGVEaWN0W29dPXZvaWQgMDtmb3IodmFyIGEscz0wLGw9dC5zdHlsZS5sZW5ndGg7czxsO3MrKylhPXQuc3R5bGVbc10sdm9pZCAwPT09clthXSYmKHJbYV09XCJcIik7dC5zdHlsZVtuXT1pLE9iamVjdC5rZXlzKHIpLmZvckVhY2goZnVuY3Rpb24oZSl7ZSE9PW4mJih0LnN0eWxlW2VdPXJbZV0pfSksdC5zdHlsZVtuXT1pfSl9KX1lbHNlIHRoaXMudHJhbnNpdGlvblF1ZXVlLnB1c2goZnVuY3Rpb24odCl7ZS5lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKHQsaSl7dC5zdHlsZVtuXT1cIm5vbmVcIjt2YXIgbz1lLmxhc3RTdHlsZUF0dHJpYnV0ZURpY3RbaV07aWYoIW8pdGhyb3cgbmV3IEVycm9yKFwicmVzdG9yZVN0eWxlKCk6IFRoZSBzdHlsZSBpcyBub3Qgc2F2ZWQuIEludm9rZSBzYXZlU3R5bGUoKSBiZWZvcmUuXCIpO2UubGFzdFN0eWxlQXR0cmlidXRlRGljdFtpXT12b2lkIDA7Zm9yKHZhciByPTA7cjx0LnN0eWxlLmxlbmd0aDtyKyspdC5zdHlsZVtyXSx2b2lkIDA9PT1vW3Quc3R5bGVbcl1dJiYob1t0LnN0eWxlW3JdXT1cIlwiKTtPYmplY3Qua2V5cyhvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3Quc3R5bGVbZV09b1tlXX0pfSksdCgpfSk7cmV0dXJuIHRoaXN9LHN0YXJ0QW5pbWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlcXVldWVUcmFuc2l0aW9uKCksdGhpc30sX2RlcXVldWVUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50cmFuc2l0aW9uUXVldWUuc2hpZnQoKTtpZih0aGlzLl9jdXJyZW50VHJhbnNpdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJDdXJyZW50IHRyYW5zaXRpb24gZXhpc3RzLlwiKTt0aGlzLl9jdXJyZW50VHJhbnNpdGlvbj10O3ZhciBlPXRoaXMsbj0hMTt0JiZ0LmNhbGwodGhpcyxmdW5jdGlvbigpe2lmKG4pdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzdGF0ZTogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgdHdpY2UuXCIpO249ITAsZS5fY3VycmVudFRyYW5zaXRpb249dm9pZCAwLGUuX2RlcXVldWVUcmFuc2l0aW9uKCl9KX19LG50LnJ1bkFsbD1mdW5jdGlvbigpe2Zvcih2YXIgdD0wO3Q8YXJndW1lbnRzLmxlbmd0aDt0KyspYXJndW1lbnRzW3RdLnBsYXkoKX0sKG50LlRyYW5zaXRpb249ZnVuY3Rpb24odCl7dGhpcy5vcHRpb25zPXR8fHt9LHRoaXMub3B0aW9ucy5kdXJhdGlvbj10aGlzLm9wdGlvbnMuZHVyYXRpb258fDAsdGhpcy5vcHRpb25zLnRpbWluZz10aGlzLm9wdGlvbnMudGltaW5nfHxcImxpbmVhclwiLHRoaXMub3B0aW9ucy5jc3M9dGhpcy5vcHRpb25zLmNzc3x8e30sdGhpcy5vcHRpb25zLnByb3BlcnR5PXRoaXMub3B0aW9ucy5wcm9wZXJ0eXx8XCJhbGxcIn0pLnByb3RvdHlwZT17YnVpbGQ6ZnVuY3Rpb24oKXtpZigwPT09T2JqZWN0LmtleXModGhpcy5vcHRpb25zLmNzcykubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIm9wdGlvbnMuY3NzIGlzIHJlcXVpcmVkLlwiKTt2YXIgdD1mdW5jdGlvbih0KXt2YXIgZT17fTtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgaT10W25dO2lmKGV0Lmhhc0Nzc1Byb3BlcnR5KG4pKWVbbl09aTtlbHNle3ZhciBvPWV0LnZlbmRvclByZWZpeCtldC5jYXBpdGFsaXplKG4pO2V0Lmhhc0Nzc1Byb3BlcnR5KG8pP2Vbb109aTooZVtvXT1pLGVbbl09aSl9fSksZX0odGhpcy5vcHRpb25zLmNzcyk7aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uPjApe3ZhciBlPWV0LmJ1aWxkVHJhbnNpdGlvblZhbHVlKHRoaXMub3B0aW9ucyksbj10aGlzO3JldHVybiBmdW5jdGlvbihpKXt2YXIgbyxyPXRoaXMuZWxlbWVudHMsYT0xZTMqbi5vcHRpb25zLmR1cmF0aW9uKjEuNCxzPWV0Lm9uY2VPblRyYW5zaXRpb25FbmQoclswXSxmdW5jdGlvbigpe2NsZWFyVGltZW91dChvKSxpKCl9KTtvPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtzKCksaSgpfSxhKSxyLmZvckVhY2goZnVuY3Rpb24obil7bi5zdHlsZVtldC50cmFuc2l0aW9uUHJvcGVydHlOYW1lXT1lLE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oZSl7bi5zdHlsZVtlXT10W2VdfSl9KX19aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uPD0wKXJldHVybiBmdW5jdGlvbihlKXt2YXIgbj10aGlzLmVsZW1lbnRzO24uZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0eWxlW2V0LnRyYW5zaXRpb25Qcm9wZXJ0eU5hbWVdPVwiXCIsT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihuKXtlLnN0eWxlW25dPXRbbl19KX0pLG4ubGVuZ3RoPjA/ZXQuZm9yY2VMYXlvdXRBdE9uY2UobixmdW5jdGlvbigpe2V0LmJhdGNoQW5pbWF0aW9uRnJhbWUoZSl9KTpldC5iYXRjaEFuaW1hdGlvbkZyYW1lKGUpfX19O3ZhciBpdCxvdCxydCxhdCxzdD1mdW5jdGlvbiB0KGUsbil7cmV0dXJuIG5ldyB0Lkluc3RhbmNlKGUsbnx8e30pfTtzdC5kZWZhdWx0cz17YmVoYXZpb3I6e3RvdWNoQWN0aW9uOlwicGFuLXlcIix0b3VjaENhbGxvdXQ6XCJub25lXCIsY29udGVudFpvb21pbmc6XCJub25lXCIsdXNlckRyYWc6XCJub25lXCIsdGFwSGlnaGxpZ2h0Q29sb3I6XCJyZ2JhKDAsMCwwLDApXCJ9fSxzdC5ET0NVTUVOVD1kb2N1bWVudCxzdC5IQVNfUE9JTlRFUkVWRU5UUz1uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWR8fG5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkLHN0LkhBU19UT1VDSEVWRU5UUz1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93LHN0LklTX01PQklMRT0vbW9iaWxlfHRhYmxldHxpcChhZHxob25lfG9kKXxhbmRyb2lkfHNpbGsvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHN0Lk5PX01PVVNFRVZFTlRTPXN0LkhBU19UT1VDSEVWRU5UUyYmc3QuSVNfTU9CSUxFfHxzdC5IQVNfUE9JTlRFUkVWRU5UUyxzdC5DQUxDVUxBVEVfSU5URVJWQUw9MjU7dmFyIGx0PXt9LHV0PXN0LkRJUkVDVElPTl9ET1dOPVwiZG93blwiLGN0PXN0LkRJUkVDVElPTl9MRUZUPVwibGVmdFwiLGh0PXN0LkRJUkVDVElPTl9VUD1cInVwXCIsZHQ9c3QuRElSRUNUSU9OX1JJR0hUPVwicmlnaHRcIixmdD1zdC5QT0lOVEVSX01PVVNFPVwibW91c2VcIixwdD1zdC5QT0lOVEVSX1RPVUNIPVwidG91Y2hcIixndD1zdC5QT0lOVEVSX1BFTj1cInBlblwiLG10PXN0LkVWRU5UX1NUQVJUPVwic3RhcnRcIixfdD1zdC5FVkVOVF9NT1ZFPVwibW92ZVwiLHZ0PXN0LkVWRU5UX0VORD1cImVuZFwiLGJ0PXN0LkVWRU5UX1JFTEVBU0U9XCJyZWxlYXNlXCIseXQ9c3QuRVZFTlRfVE9VQ0g9XCJ0b3VjaFwiO3N0LlJFQURZPSExLHN0LnBsdWdpbnM9c3QucGx1Z2luc3x8e30sc3QuZ2VzdHVyZXM9c3QuZ2VzdHVyZXN8fHt9LG90PXN0LnV0aWxzPXtleHRlbmQ6ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaSBpbiBlKSFlLmhhc093blByb3BlcnR5KGkpfHx2b2lkIDAhPT10W2ldJiZufHwodFtpXT1lW2ldKTtyZXR1cm4gdH0sb246ZnVuY3Rpb24odCxlLG4saSl7US5hZGRFdmVudExpc3RlbmVyKHQsZSxuLGksITApfSxvZmY6ZnVuY3Rpb24odCxlLG4saSl7US5yZW1vdmVFdmVudExpc3RlbmVyKHQsZSxuLGksITApfSxlYWNoOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaSxvO2lmKFwiZm9yRWFjaFwiaW4gdCl0LmZvckVhY2goZSxuKTtlbHNlIGlmKHZvaWQgMCE9PXQubGVuZ3RoKXtmb3IoaT0wLG89dC5sZW5ndGg7aTxvO2krKylpZighMT09PWUuY2FsbChuLHRbaV0saSx0KSlyZXR1cm59ZWxzZSBmb3IoaSBpbiB0KWlmKHQuaGFzT3duUHJvcGVydHkoaSkmJiExPT09ZS5jYWxsKG4sdFtpXSxpLHQpKXJldHVybn0saW5TdHI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5pbmRleE9mKGUpPi0xfSxpbkFycmF5OmZ1bmN0aW9uKHQsZSxuKXtpZihuKXtmb3IodmFyIGk9MCxvPXQubGVuZ3RoO2k8bztpKyspaWYoT2JqZWN0LmtleXMoZSkuZXZlcnkoZnVuY3Rpb24obil7cmV0dXJuIHRbaV1bbl09PT1lW25dfSkpcmV0dXJuIGk7cmV0dXJuLTF9aWYodC5pbmRleE9mKXJldHVybiB0LmluZGV4T2YoZSk7Zm9yKHZhciBpPTAsbz10Lmxlbmd0aDtpPG87aSsrKWlmKHRbaV09PT1lKXJldHVybiBpO3JldHVybi0xfSx0b0FycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDApfSxoYXNQYXJlbnQ6ZnVuY3Rpb24odCxlKXtmb3IoO3Q7KXtpZih0PT1lKXJldHVybiEwO3Q9dC5wYXJlbnROb2RlfXJldHVybiExfSxnZXRDZW50ZXI6ZnVuY3Rpb24odCl7dmFyIGU9W10sbj1bXSxpPVtdLG89W10scj1NYXRoLm1pbixhPU1hdGgubWF4O3JldHVybiAxPT09dC5sZW5ndGg/e3BhZ2VYOnRbMF0ucGFnZVgscGFnZVk6dFswXS5wYWdlWSxjbGllbnRYOnRbMF0uY2xpZW50WCxjbGllbnRZOnRbMF0uY2xpZW50WX06KG90LmVhY2godCxmdW5jdGlvbih0KXtlLnB1c2godC5wYWdlWCksbi5wdXNoKHQucGFnZVkpLGkucHVzaCh0LmNsaWVudFgpLG8ucHVzaCh0LmNsaWVudFkpfSkse3BhZ2VYOihyLmFwcGx5KE1hdGgsZSkrYS5hcHBseShNYXRoLGUpKS8yLHBhZ2VZOihyLmFwcGx5KE1hdGgsbikrYS5hcHBseShNYXRoLG4pKS8yLGNsaWVudFg6KHIuYXBwbHkoTWF0aCxpKSthLmFwcGx5KE1hdGgsaSkpLzIsY2xpZW50WTooci5hcHBseShNYXRoLG8pK2EuYXBwbHkoTWF0aCxvKSkvMn0pfSxnZXRWZWxvY2l0eTpmdW5jdGlvbih0LGUsbil7cmV0dXJue3g6TWF0aC5hYnMoZS90KXx8MCx5Ok1hdGguYWJzKG4vdCl8fDB9fSxnZXRBbmdsZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuY2xpZW50WC10LmNsaWVudFgsaT1lLmNsaWVudFktdC5jbGllbnRZO3JldHVybiAxODAqTWF0aC5hdGFuMihpLG4pL01hdGguUEl9LGdldERpcmVjdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLmFicyh0LmNsaWVudFgtZS5jbGllbnRYKT49TWF0aC5hYnModC5jbGllbnRZLWUuY2xpZW50WSk/dC5jbGllbnRYLWUuY2xpZW50WD4wP2N0OmR0OnQuY2xpZW50WS1lLmNsaWVudFk+MD9odDp1dH0sZ2V0RGlzdGFuY2U6ZnVuY3Rpb24odCxlKXt2YXIgbj1lLmNsaWVudFgtdC5jbGllbnRYLGk9ZS5jbGllbnRZLXQuY2xpZW50WTtyZXR1cm4gTWF0aC5zcXJ0KG4qbitpKmkpfSxnZXRTY2FsZTpmdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aD49MiYmZS5sZW5ndGg+PTI/dGhpcy5nZXREaXN0YW5jZShlWzBdLGVbMV0pL3RoaXMuZ2V0RGlzdGFuY2UodFswXSx0WzFdKToxfSxnZXRSb3RhdGlvbjpmdW5jdGlvbih0LGUpe3JldHVybiB0Lmxlbmd0aD49MiYmZS5sZW5ndGg+PTI/dGhpcy5nZXRBbmdsZShlWzFdLGVbMF0pLXRoaXMuZ2V0QW5nbGUodFsxXSx0WzBdKTowfSxpc1ZlcnRpY2FsOmZ1bmN0aW9uKHQpe3JldHVybiB0PT1odHx8dD09dXR9LHNldFByZWZpeGVkQ3NzOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPVtcIlwiLFwiV2Via2l0XCIsXCJNb3pcIixcIk9cIixcIm1zXCJdO2U9b3QudG9DYW1lbENhc2UoZSk7Zm9yKHZhciByPTA7cjxvLmxlbmd0aDtyKyspe3ZhciBhPWU7aWYob1tyXSYmKGE9b1tyXSthLnNsaWNlKDAsMSkudG9VcHBlckNhc2UoKSthLnNsaWNlKDEpKSxhIGluIHQuc3R5bGUpe3Quc3R5bGVbYV09KG51bGw9PT1pfHxpKSYmbnx8XCJcIjticmVha319fSx0b2dnbGVCZWhhdmlvcjpmdW5jdGlvbih0LGUsbil7aWYoZSYmdCYmdC5zdHlsZSl7b3QuZWFjaChlLGZ1bmN0aW9uKGUsaSl7b3Quc2V0UHJlZml4ZWRDc3ModCxpLGUsbil9KTt2YXIgaT1uJiZmdW5jdGlvbigpe3JldHVybiExfTtcIm5vbmVcIj09ZS51c2VyU2VsZWN0JiYodC5vbnNlbGVjdHN0YXJ0PWkpLFwibm9uZVwiPT1lLnVzZXJEcmFnJiYodC5vbmRyYWdzdGFydD1pKX19LHRvQ2FtZWxDYXNlOmZ1bmN0aW9uKHQpe3JldHVybiB0LnJlcGxhY2UoL1tfLV0oW2Etel0pL2csZnVuY3Rpb24odCl7cmV0dXJuIHRbMV0udG9VcHBlckNhc2UoKX0pfX0saXQ9c3QuZXZlbnQ9e3ByZXZlbnRNb3VzZUV2ZW50czohMSxzdGFydGVkOiExLHNob3VsZERldGVjdDohMSxvbjpmdW5jdGlvbih0LGUsbixpLG8pe3ZhciByPWUuc3BsaXQoXCIgXCIpO290LmVhY2gocixmdW5jdGlvbihlKXtvdC5vbih0LGUsbixpKSxvJiZvKGUpfSl9LG9mZjpmdW5jdGlvbih0LGUsbixpLG8pe3ZhciByPWUuc3BsaXQoXCIgXCIpO290LmVhY2gocixmdW5jdGlvbihlKXtvdC5vZmYodCxlLG4saSksbyYmbyhlKX0pfSxvblRvdWNoOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXRoaXMscj1mdW5jdGlvbihpKXt2YXIgcixhPWkudHlwZS50b0xvd2VyQ2FzZSgpLHM9c3QuSEFTX1BPSU5URVJFVkVOVFMsbD1vdC5pblN0cihhLFwibW91c2VcIik7bCYmby5wcmV2ZW50TW91c2VFdmVudHN8fChsJiZlPT1tdCYmMD09PWkuYnV0dG9uPyhvLnByZXZlbnRNb3VzZUV2ZW50cz0hMSxvLnNob3VsZERldGVjdD0hMCk6cyYmZT09bXQ/by5zaG91bGREZXRlY3Q9MT09PWkuYnV0dG9uc3x8YXQubWF0Y2hUeXBlKHB0LGkpOmx8fGUhPW10fHwoby5wcmV2ZW50TW91c2VFdmVudHM9ITAsby5zaG91bGREZXRlY3Q9ITApLHMmJmUhPXZ0JiZhdC51cGRhdGVQb2ludGVyKGUsaSksby5zaG91bGREZXRlY3QmJihyPW8uZG9EZXRlY3QuY2FsbChvLGksZSx0LG4pKSxyPT12dCYmKG8ucHJldmVudE1vdXNlRXZlbnRzPSExLG8uc2hvdWxkRGV0ZWN0PSExLGF0LnJlc2V0KCkpLHMmJmU9PXZ0JiZhdC51cGRhdGVQb2ludGVyKGUsaSkpfTtyZXR1cm4gdGhpcy5vbih0LGx0W2VdLHIsaSkscn0sZG9EZXRlY3Q6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89dGhpcy5nZXRUb3VjaExpc3QodCxlKSxyPW8ubGVuZ3RoLGE9ZSxzPW8udHJpZ2dlcixsPXI7ZT09bXQ/cz15dDplPT12dCYmKHM9YnQsbD1vLmxlbmd0aC0odC5jaGFuZ2VkVG91Y2hlcz90LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDoxKSksbD4wJiZ0aGlzLnN0YXJ0ZWQmJihhPV90KSx0aGlzLnN0YXJ0ZWQ9ITA7dmFyIHU9dGhpcy5jb2xsZWN0RXZlbnREYXRhKG4sYSxvLHQpO3JldHVybiBlIT12dCYmaS5jYWxsKHJ0LHUpLHMmJih1LmNoYW5nZWRMZW5ndGg9bCx1LmV2ZW50VHlwZT1zLGkuY2FsbChydCx1KSx1LmV2ZW50VHlwZT1hLGRlbGV0ZSB1LmNoYW5nZWRMZW5ndGgpLGE9PXZ0JiYoaS5jYWxsKHJ0LHUpLHRoaXMuc3RhcnRlZD0hMSksYX0sZGV0ZXJtaW5lRXZlbnRUeXBlczpmdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PXN0LkhBU19QT0lOVEVSRVZFTlRTP3dpbmRvdy5Qb2ludGVyRXZlbnQ/W1wicG9pbnRlcmRvd25cIixcInBvaW50ZXJtb3ZlXCIsXCJwb2ludGVydXAgcG9pbnRlcmNhbmNlbCBsb3N0cG9pbnRlcmNhcHR1cmVcIl06W1wiTVNQb2ludGVyRG93blwiLFwiTVNQb2ludGVyTW92ZVwiLFwiTVNQb2ludGVyVXAgTVNQb2ludGVyQ2FuY2VsIE1TTG9zdFBvaW50ZXJDYXB0dXJlXCJdOnN0Lk5PX01PVVNFRVZFTlRTP1tcInRvdWNoc3RhcnRcIixcInRvdWNobW92ZVwiLFwidG91Y2hlbmQgdG91Y2hjYW5jZWxcIl06W1widG91Y2hzdGFydCBtb3VzZWRvd25cIixcInRvdWNobW92ZSBtb3VzZW1vdmVcIixcInRvdWNoZW5kIHRvdWNoY2FuY2VsIG1vdXNldXBcIl0sbHRbbXRdPXRbMF0sbHRbX3RdPXRbMV0sbHRbdnRdPXRbMl0sbHR9LGdldFRvdWNoTGlzdDpmdW5jdGlvbih0LGUpe2lmKHN0LkhBU19QT0lOVEVSRVZFTlRTKXJldHVybiBhdC5nZXRUb3VjaExpc3QoKTtpZih0LnRvdWNoZXMpe2lmKGU9PV90KXJldHVybiB0LnRvdWNoZXM7dmFyIG49W10saT1bXS5jb25jYXQob3QudG9BcnJheSh0LnRvdWNoZXMpLG90LnRvQXJyYXkodC5jaGFuZ2VkVG91Y2hlcykpLG89W107cmV0dXJuIG90LmVhY2goaSxmdW5jdGlvbih0KXstMT09PW90LmluQXJyYXkobix0LmlkZW50aWZpZXIpJiZvLnB1c2godCksbi5wdXNoKHQuaWRlbnRpZmllcil9KSxvfXJldHVybiB0LmlkZW50aWZpZXI9MSxbdF19LGNvbGxlY3RFdmVudERhdGE6ZnVuY3Rpb24odCxlLG4saSl7dmFyIG89cHQ7cmV0dXJuIG90LmluU3RyKGkudHlwZSxcIm1vdXNlXCIpfHxhdC5tYXRjaFR5cGUoZnQsaSk/bz1mdDphdC5tYXRjaFR5cGUoZ3QsaSkmJihvPWd0KSx7Y2VudGVyOm90LmdldENlbnRlcihuKSx0aW1lU3RhbXA6RGF0ZS5ub3coKSx0YXJnZXQ6aS50YXJnZXQsdG91Y2hlczpuLGV2ZW50VHlwZTplLHBvaW50ZXJUeXBlOm8sc3JjRXZlbnQ6aSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc3JjRXZlbnQ7dC5wcmV2ZW50TWFuaXB1bGF0aW9uJiZ0LnByZXZlbnRNYW5pcHVsYXRpb24oKSx0LnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3RoaXMuc3JjRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BEZXRlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gcnQuc3RvcERldGVjdCgpfX19fSxhdD1zdC5Qb2ludGVyRXZlbnQ9e3BvaW50ZXJzOnt9LGdldFRvdWNoTGlzdDpmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiBvdC5lYWNoKHRoaXMucG9pbnRlcnMsZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSksdH0sdXBkYXRlUG9pbnRlcjpmdW5jdGlvbih0LGUpe3Q9PXZ0fHx0IT12dCYmMSE9PWUuYnV0dG9ucz9kZWxldGUgdGhpcy5wb2ludGVyc1tlLnBvaW50ZXJJZF06KGUuaWRlbnRpZmllcj1lLnBvaW50ZXJJZCx0aGlzLnBvaW50ZXJzW2UucG9pbnRlcklkXT1lKX0sbWF0Y2hUeXBlOmZ1bmN0aW9uKHQsZSl7aWYoIWUucG9pbnRlclR5cGUpcmV0dXJuITE7dmFyIG49ZS5wb2ludGVyVHlwZSxpPXt9O3JldHVybiBpW2Z0XT1uPT09KGUuTVNQT0lOVEVSX1RZUEVfTU9VU0V8fGZ0KSxpW3B0XT1uPT09KGUuTVNQT0lOVEVSX1RZUEVfVE9VQ0h8fHB0KSxpW2d0XT1uPT09KGUuTVNQT0lOVEVSX1RZUEVfUEVOfHxndCksaVt0XX0scmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLnBvaW50ZXJzPXt9fX0scnQ9c3QuZGV0ZWN0aW9uPXtnZXN0dXJlczpbXSxjdXJyZW50Om51bGwscHJldmlvdXM6bnVsbCxzdG9wcGVkOiExLHN0YXJ0RGV0ZWN0OmZ1bmN0aW9uKHQsZSl7dGhpcy5jdXJyZW50fHwodGhpcy5zdG9wcGVkPSExLHRoaXMuY3VycmVudD17aW5zdDp0LHN0YXJ0RXZlbnQ6b3QuZXh0ZW5kKHt9LGUpLGxhc3RFdmVudDohMSxsYXN0Q2FsY0V2ZW50OiExLGZ1dHVyZUNhbGNFdmVudDohMSxsYXN0Q2FsY0RhdGE6e30sbmFtZTpcIlwifSx0aGlzLmRldGVjdChlKSl9LGRldGVjdDpmdW5jdGlvbih0KXtpZih0aGlzLmN1cnJlbnQmJiF0aGlzLnN0b3BwZWQpe3Q9dGhpcy5leHRlbmRFdmVudERhdGEodCk7dmFyIGU9dGhpcy5jdXJyZW50Lmluc3Qsbj1lLm9wdGlvbnM7cmV0dXJuIG90LmVhY2godGhpcy5nZXN0dXJlcyxmdW5jdGlvbihpKXshdGhpcy5zdG9wcGVkJiZlLmVuYWJsZWQmJm5baS5uYW1lXSYmaS5oYW5kbGVyLmNhbGwoaSx0LGUpfSx0aGlzKSx0aGlzLmN1cnJlbnQmJih0aGlzLmN1cnJlbnQubGFzdEV2ZW50PXQpLHQuZXZlbnRUeXBlPT12dCYmdGhpcy5zdG9wRGV0ZWN0KCksdH19LHN0b3BEZXRlY3Q6ZnVuY3Rpb24oKXt0aGlzLnByZXZpb3VzPW90LmV4dGVuZCh7fSx0aGlzLmN1cnJlbnQpLHRoaXMuY3VycmVudD1udWxsLHRoaXMuc3RvcHBlZD0hMH0sZ2V0Q2FsY3VsYXRlZERhdGE6ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj10aGlzLmN1cnJlbnQsYT0hMSxzPXIubGFzdENhbGNFdmVudCxsPXIubGFzdENhbGNEYXRhO3MmJnQudGltZVN0YW1wLXMudGltZVN0YW1wPnN0LkNBTENVTEFURV9JTlRFUlZBTCYmKGU9cy5jZW50ZXIsbj10LnRpbWVTdGFtcC1zLnRpbWVTdGFtcCxpPXQuY2VudGVyLmNsaWVudFgtcy5jZW50ZXIuY2xpZW50WCxvPXQuY2VudGVyLmNsaWVudFktcy5jZW50ZXIuY2xpZW50WSxhPSEwKSx0LmV2ZW50VHlwZSE9eXQmJnQuZXZlbnRUeXBlIT1idHx8KHIuZnV0dXJlQ2FsY0V2ZW50PXQpLHIubGFzdENhbGNFdmVudCYmIWF8fChsLnZlbG9jaXR5PW90LmdldFZlbG9jaXR5KG4saSxvKSxsLmFuZ2xlPW90LmdldEFuZ2xlKGUsdC5jZW50ZXIpLGwuZGlyZWN0aW9uPW90LmdldERpcmVjdGlvbihlLHQuY2VudGVyKSxyLmxhc3RDYWxjRXZlbnQ9ci5mdXR1cmVDYWxjRXZlbnR8fHQsci5mdXR1cmVDYWxjRXZlbnQ9dCksdC52ZWxvY2l0eVg9bC52ZWxvY2l0eS54LHQudmVsb2NpdHlZPWwudmVsb2NpdHkueSx0LmludGVyaW1BbmdsZT1sLmFuZ2xlLHQuaW50ZXJpbURpcmVjdGlvbj1sLmRpcmVjdGlvbn0sZXh0ZW5kRXZlbnREYXRhOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY3VycmVudCxuPWUuc3RhcnRFdmVudCxpPWUubGFzdEV2ZW50fHxuO3QuZXZlbnRUeXBlIT15dCYmdC5ldmVudFR5cGUhPWJ0fHwobi50b3VjaGVzPVtdLG90LmVhY2godC50b3VjaGVzLGZ1bmN0aW9uKHQpe24udG91Y2hlcy5wdXNoKHtjbGllbnRYOnQuY2xpZW50WCxjbGllbnRZOnQuY2xpZW50WX0pfSkpO3ZhciBvPXQudGltZVN0YW1wLW4udGltZVN0YW1wLHI9dC5jZW50ZXIuY2xpZW50WC1uLmNlbnRlci5jbGllbnRYLGE9dC5jZW50ZXIuY2xpZW50WS1uLmNlbnRlci5jbGllbnRZO3JldHVybiB0aGlzLmdldENhbGN1bGF0ZWREYXRhKHQsaS5jZW50ZXIsbyxyLGEpLG90LmV4dGVuZCh0LHtzdGFydEV2ZW50Om4sZGVsdGFUaW1lOm8sZGVsdGFYOnIsZGVsdGFZOmEsZGlzdGFuY2U6b3QuZ2V0RGlzdGFuY2Uobi5jZW50ZXIsdC5jZW50ZXIpLGFuZ2xlOm90LmdldEFuZ2xlKG4uY2VudGVyLHQuY2VudGVyKSxkaXJlY3Rpb246b3QuZ2V0RGlyZWN0aW9uKG4uY2VudGVyLHQuY2VudGVyKSxzY2FsZTpvdC5nZXRTY2FsZShuLnRvdWNoZXMsdC50b3VjaGVzKSxyb3RhdGlvbjpvdC5nZXRSb3RhdGlvbihuLnRvdWNoZXMsdC50b3VjaGVzKX0pLHR9LHJlZ2lzdGVyOmZ1bmN0aW9uKHQpe3ZhciBlPXQuZGVmYXVsdHN8fHt9O3JldHVybiB2b2lkIDA9PT1lW3QubmFtZV0mJihlW3QubmFtZV09ITApLG90LmV4dGVuZChzdC5kZWZhdWx0cyxlLCEwKSx0LmluZGV4PXQuaW5kZXh8fDFlMyx0aGlzLmdlc3R1cmVzLnB1c2godCksdGhpcy5nZXN0dXJlcy5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuaW5kZXg8ZS5pbmRleD8tMTp0LmluZGV4PmUuaW5kZXg/MTowfSksdGhpcy5nZXN0dXJlc319LHN0Lkluc3RhbmNlPWZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPWUmJmUucGFzc2l2ZT97cGFzc2l2ZTohMH06dm9pZCAwOyFmdW5jdGlvbih0KXtzdC5SRUFEWXx8KGl0LmRldGVybWluZUV2ZW50VHlwZXMoKSxvdC5lYWNoKHN0Lmdlc3R1cmVzLGZ1bmN0aW9uKHQpe3J0LnJlZ2lzdGVyKHQpfSksaXQub25Ub3VjaChzdC5ET0NVTUVOVCxfdCxydC5kZXRlY3QsdCksaXQub25Ub3VjaChzdC5ET0NVTUVOVCx2dCxydC5kZXRlY3QsdCksc3QuUkVBRFk9ITApfShpKSx0aGlzLmVsZW1lbnQ9dCx0aGlzLmVuYWJsZWQ9ITAsb3QuZWFjaChlLGZ1bmN0aW9uKHQsbil7ZGVsZXRlIGVbbl0sZVtvdC50b0NhbWVsQ2FzZShuKV09dH0pLHRoaXMub3B0aW9ucz1vdC5leHRlbmQob3QuZXh0ZW5kKHt9LHN0LmRlZmF1bHRzKSxlfHx7fSksdGhpcy5vcHRpb25zLmxpc3RlbmVyT3B0aW9ucz1pLHRoaXMub3B0aW9ucy5iZWhhdmlvciYmb3QudG9nZ2xlQmVoYXZpb3IodGhpcy5lbGVtZW50LHRoaXMub3B0aW9ucy5iZWhhdmlvciwhMCksdGhpcy5ldmVudFN0YXJ0SGFuZGxlcj1pdC5vblRvdWNoKHQsbXQsZnVuY3Rpb24odCl7bi5lbmFibGVkJiZ0LmV2ZW50VHlwZT09bXQ/cnQuc3RhcnREZXRlY3Qobix0KTp0LmV2ZW50VHlwZT09eXQmJnJ0LmRldGVjdCh0KX0saSksdGhpcy5ldmVudEhhbmRsZXJzPVtdfSxzdC5JbnN0YW5jZS5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3JldHVybiBpdC5vbihpLmVsZW1lbnQsdCxlLFEuZXh0ZW5kKHt9LGkub3B0aW9ucy5saXN0ZW5lck9wdGlvbnMsbiksZnVuY3Rpb24odCl7aS5ldmVudEhhbmRsZXJzLnB1c2goe2dlc3R1cmU6dCxoYW5kbGVyOmV9KX0pLGl9LG9mZjpmdW5jdGlvbih0LGUsbil7dmFyIGk9dGhpcztyZXR1cm4gaXQub2ZmKGkuZWxlbWVudCx0LGUsUS5leHRlbmQoe30saS5vcHRpb25zLmxpc3RlbmVyT3B0aW9ucyxuKSxmdW5jdGlvbih0KXt2YXIgbj1vdC5pbkFycmF5KGkuZXZlbnRIYW5kbGVycyx7Z2VzdHVyZTp0LGhhbmRsZXI6ZX0sITApO24+PTAmJmkuZXZlbnRIYW5kbGVycy5zcGxpY2UobiwxKX0pLGl9LHRyaWdnZXI6ZnVuY3Rpb24odCxlKXtlfHwoZT17fSk7dmFyIG49c3QuRE9DVU1FTlQuY3JlYXRlRXZlbnQoXCJFdmVudFwiKTtuLmluaXRFdmVudCh0LCEwLCEwKSxuLmdlc3R1cmU9ZTt2YXIgaT10aGlzLmVsZW1lbnQ7cmV0dXJuIG90Lmhhc1BhcmVudChlLnRhcmdldCxpKSYmKGk9ZS50YXJnZXQpLGkuZGlzcGF0Y2hFdmVudChuKSx0aGlzfSxlbmFibGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZW5hYmxlZD10LHRoaXN9LGRpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgdCxlO2ZvcihvdC50b2dnbGVCZWhhdmlvcih0aGlzLmVsZW1lbnQsdGhpcy5vcHRpb25zLmJlaGF2aW9yLCExKSx0PS0xO2U9dGhpcy5ldmVudEhhbmRsZXJzWysrdF07KW90Lm9mZih0aGlzLmVsZW1lbnQsZS5nZXN0dXJlLGUuaGFuZGxlcik7cmV0dXJuIHRoaXMuZXZlbnRIYW5kbGVycz1bXSxpdC5vZmYodGhpcy5lbGVtZW50LGx0W210XSx0aGlzLmV2ZW50U3RhcnRIYW5kbGVyKSxudWxsfX0sZnVuY3Rpb24odCl7dmFyIGU9ITE7c3QuZ2VzdHVyZXMuRHJhZz17bmFtZTp0LGluZGV4OjUwLGhhbmRsZXI6ZnVuY3Rpb24obixpKXt2YXIgbz1ydC5jdXJyZW50O2lmKCEoaS5vcHRpb25zLmRyYWdNYXhUb3VjaGVzPjAmJm4udG91Y2hlcy5sZW5ndGg+aS5vcHRpb25zLmRyYWdNYXhUb3VjaGVzKSlzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6ZT0hMTticmVhaztjYXNlIF90OmlmKG4uZGlzdGFuY2U8aS5vcHRpb25zLmRyYWdNaW5EaXN0YW5jZSYmby5uYW1lIT10KXJldHVybjt2YXIgcj1vLnN0YXJ0RXZlbnQuY2VudGVyO2lmKG8ubmFtZSE9dCYmKG8ubmFtZT10LGkub3B0aW9ucy5kcmFnRGlzdGFuY2VDb3JyZWN0aW9uJiZuLmRpc3RhbmNlPjApKXt2YXIgYT1NYXRoLmFicyhpLm9wdGlvbnMuZHJhZ01pbkRpc3RhbmNlL24uZGlzdGFuY2UpO3IucGFnZVgrPW4uZGVsdGFYKmEsci5wYWdlWSs9bi5kZWx0YVkqYSxyLmNsaWVudFgrPW4uZGVsdGFYKmEsci5jbGllbnRZKz1uLmRlbHRhWSphLG49cnQuZXh0ZW5kRXZlbnREYXRhKG4pfShvLmxhc3RFdmVudC5kcmFnTG9ja1RvQXhpc3x8aS5vcHRpb25zLmRyYWdMb2NrVG9BeGlzJiZpLm9wdGlvbnMuZHJhZ0xvY2tNaW5EaXN0YW5jZTw9bi5kaXN0YW5jZSkmJihuLmRyYWdMb2NrVG9BeGlzPSEwKTt2YXIgcz1vLmxhc3RFdmVudC5kaXJlY3Rpb247bi5kcmFnTG9ja1RvQXhpcyYmcyE9PW4uZGlyZWN0aW9uJiYob3QuaXNWZXJ0aWNhbChzKT9uLmRpcmVjdGlvbj1uLmRlbHRhWTwwP2h0OnV0Om4uZGlyZWN0aW9uPW4uZGVsdGFYPDA/Y3Q6ZHQpLGV8fChpLnRyaWdnZXIodCtcInN0YXJ0XCIsbiksZT0hMCksaS50cmlnZ2VyKHQsbiksaS50cmlnZ2VyKHQrbi5kaXJlY3Rpb24sbik7dmFyIGw9b3QuaXNWZXJ0aWNhbChuLmRpcmVjdGlvbik7KGkub3B0aW9ucy5kcmFnQmxvY2tWZXJ0aWNhbCYmbHx8aS5vcHRpb25zLmRyYWdCbG9ja0hvcml6b250YWwmJiFsKSYmbi5wcmV2ZW50RGVmYXVsdCgpO2JyZWFrO2Nhc2UgYnQ6ZSYmbi5jaGFuZ2VkTGVuZ3RoPD1pLm9wdGlvbnMuZHJhZ01heFRvdWNoZXMmJihpLnRyaWdnZXIodCtcImVuZFwiLG4pLGU9ITEpO2JyZWFrO2Nhc2UgdnQ6ZT0hMX19LGRlZmF1bHRzOntkcmFnTWluRGlzdGFuY2U6MTAsZHJhZ0Rpc3RhbmNlQ29ycmVjdGlvbjohMCxkcmFnTWF4VG91Y2hlczoxLGRyYWdCbG9ja0hvcml6b250YWw6ITEsZHJhZ0Jsb2NrVmVydGljYWw6ITEsZHJhZ0xvY2tUb0F4aXM6ITEsZHJhZ0xvY2tNaW5EaXN0YW5jZToyNX19fShcImRyYWdcIiksc3QuZ2VzdHVyZXMuR2VzdHVyZT17bmFtZTpcImdlc3R1cmVcIixpbmRleDoxMzM3LGhhbmRsZXI6ZnVuY3Rpb24odCxlKXtlLnRyaWdnZXIodGhpcy5uYW1lLHQpfX0sZnVuY3Rpb24odCl7dmFyIGU7c3QuZ2VzdHVyZXMuSG9sZD17bmFtZTp0LGluZGV4OjEwLGRlZmF1bHRzOntob2xkVGltZW91dDo1MDAsaG9sZFRocmVzaG9sZDoyfSxoYW5kbGVyOmZ1bmN0aW9uKG4saSl7dmFyIG89aS5vcHRpb25zLHI9cnQuY3VycmVudDtzd2l0Y2gobi5ldmVudFR5cGUpe2Nhc2UgbXQ6Y2xlYXJUaW1lb3V0KGUpLHIubmFtZT10LGU9c2V0VGltZW91dChmdW5jdGlvbigpe3ImJnIubmFtZT09dCYmaS50cmlnZ2VyKHQsbil9LG8uaG9sZFRpbWVvdXQpO2JyZWFrO2Nhc2UgX3Q6bi5kaXN0YW5jZT5vLmhvbGRUaHJlc2hvbGQmJmNsZWFyVGltZW91dChlKTticmVhaztjYXNlIGJ0OmNsZWFyVGltZW91dChlKX19fX0oXCJob2xkXCIpLHN0Lmdlc3R1cmVzLlJlbGVhc2U9e25hbWU6XCJyZWxlYXNlXCIsaW5kZXg6MS8wLGhhbmRsZXI6ZnVuY3Rpb24odCxlKXt0LmV2ZW50VHlwZT09YnQmJmUudHJpZ2dlcih0aGlzLm5hbWUsdCl9fSxzdC5nZXN0dXJlcy5Td2lwZT17bmFtZTpcInN3aXBlXCIsaW5kZXg6NDAsZGVmYXVsdHM6e3N3aXBlTWluVG91Y2hlczoxLHN3aXBlTWF4VG91Y2hlczoxLHN3aXBlVmVsb2NpdHlYOi42LHN3aXBlVmVsb2NpdHlZOi42fSxoYW5kbGVyOmZ1bmN0aW9uKHQsZSl7aWYodC5ldmVudFR5cGU9PWJ0KXt2YXIgbj10LnRvdWNoZXMubGVuZ3RoLGk9ZS5vcHRpb25zO2lmKG48aS5zd2lwZU1pblRvdWNoZXN8fG4+aS5zd2lwZU1heFRvdWNoZXMpcmV0dXJuOyh0LnZlbG9jaXR5WD5pLnN3aXBlVmVsb2NpdHlYfHx0LnZlbG9jaXR5WT5pLnN3aXBlVmVsb2NpdHlZKSYmKGUudHJpZ2dlcih0aGlzLm5hbWUsdCksZS50cmlnZ2VyKHRoaXMubmFtZSt0LmRpcmVjdGlvbix0KSl9fX0sZnVuY3Rpb24odCl7dmFyIGU9ITE7c3QuZ2VzdHVyZXMuVGFwPXtuYW1lOnQsaW5kZXg6MTAwLGhhbmRsZXI6ZnVuY3Rpb24obixpKXt2YXIgbyxyLGE9aS5vcHRpb25zLHM9cnQuY3VycmVudCxsPXJ0LnByZXZpb3VzO3N3aXRjaChuLmV2ZW50VHlwZSl7Y2FzZSBtdDplPSExO2JyZWFrO2Nhc2UgX3Q6ZT1lfHxuLmRpc3RhbmNlPmEudGFwTWF4RGlzdGFuY2U7YnJlYWs7Y2FzZSB2dDohb3QuaW5TdHIobi5zcmNFdmVudC50eXBlLFwiY2FuY2VsXCIpJiZuLmRlbHRhVGltZTxhLnRhcE1heFRpbWUmJiFlJiYobz1sJiZsLmxhc3RFdmVudCYmbi50aW1lU3RhbXAtbC5sYXN0RXZlbnQudGltZVN0YW1wLHI9ITEsbCYmbC5uYW1lPT10JiZvJiZvPGEuZG91YmxlVGFwSW50ZXJ2YWwmJm4uZGlzdGFuY2U8YS5kb3VibGVUYXBEaXN0YW5jZSYmKGkudHJpZ2dlcihcImRvdWJsZXRhcFwiLG4pLHI9ITApLHImJiFhLnRhcEFsd2F5c3x8KHMubmFtZT10LGkudHJpZ2dlcihzLm5hbWUsbikpKX19LGRlZmF1bHRzOnt0YXBNYXhUaW1lOjI1MCx0YXBNYXhEaXN0YW5jZToxMCx0YXBBbHdheXM6ITAsZG91YmxlVGFwRGlzdGFuY2U6MjAsZG91YmxlVGFwSW50ZXJ2YWw6MzAwfX19KFwidGFwXCIpLHN0Lmdlc3R1cmVzLlRvdWNoPXtuYW1lOlwidG91Y2hcIixpbmRleDotMS8wLGRlZmF1bHRzOntwcmV2ZW50RGVmYXVsdDohMSxwcmV2ZW50TW91c2U6ITF9LGhhbmRsZXI6ZnVuY3Rpb24odCxlKXtlLm9wdGlvbnMucHJldmVudE1vdXNlJiZ0LnBvaW50ZXJUeXBlPT1mdD90LnN0b3BEZXRlY3QoKTooZS5vcHRpb25zLnByZXZlbnREZWZhdWx0JiZ0LnByZXZlbnREZWZhdWx0KCksdC5ldmVudFR5cGU9PXl0JiZlLnRyaWdnZXIoXCJ0b3VjaFwiLHQpKX19LGZ1bmN0aW9uKHQpe3ZhciBlPSExO3N0Lmdlc3R1cmVzLlRyYW5zZm9ybT17bmFtZTp0LGluZGV4OjQ1LGRlZmF1bHRzOnt0cmFuc2Zvcm1NaW5TY2FsZTouMDEsdHJhbnNmb3JtTWluUm90YXRpb246MX0saGFuZGxlcjpmdW5jdGlvbihuLGkpe3N3aXRjaChuLmV2ZW50VHlwZSl7Y2FzZSBtdDplPSExO2JyZWFrO2Nhc2UgX3Q6aWYobi50b3VjaGVzLmxlbmd0aDwyKXJldHVybjt2YXIgbz1NYXRoLmFicygxLW4uc2NhbGUpLHI9TWF0aC5hYnMobi5yb3RhdGlvbik7aWYobzxpLm9wdGlvbnMudHJhbnNmb3JtTWluU2NhbGUmJnI8aS5vcHRpb25zLnRyYW5zZm9ybU1pblJvdGF0aW9uKXJldHVybjtydC5jdXJyZW50Lm5hbWU9dCxlfHwoaS50cmlnZ2VyKHQrXCJzdGFydFwiLG4pLGU9ITApLGkudHJpZ2dlcih0LG4pLHI+aS5vcHRpb25zLnRyYW5zZm9ybU1pblJvdGF0aW9uJiZpLnRyaWdnZXIoXCJyb3RhdGVcIixuKSxvPmkub3B0aW9ucy50cmFuc2Zvcm1NaW5TY2FsZSYmKGkudHJpZ2dlcihcInBpbmNoXCIsbiksaS50cmlnZ2VyKFwicGluY2hcIisobi5zY2FsZTwxP1wiaW5cIjpcIm91dFwiKSxuKSk7YnJlYWs7Y2FzZSBidDplJiZuLmNoYW5nZWRMZW5ndGg8MiYmKGkudHJpZ2dlcih0K1wiZW5kXCIsbiksZT0hMSl9fX19KFwidHJhbnNmb3JtXCIpO3ZhciBrdD12b2lkIDAsd3Q9dm9pZCAwLEV0PW5ldyhmdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtwKHRoaXMsdCksdGhpcy5xdWV1ZT1bXX1yZXR1cm4gZyh0LFt7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMucXVldWUucHVzaCh0KSwxPT09dGhpcy5xdWV1ZS5sZW5ndGgmJnNldEltbWVkaWF0ZSh0aGlzLnF1ZXVlWzBdKSxlLnRoZW4oZnVuY3Rpb24oKXtuLnF1ZXVlLnNoaWZ0KCksbi5xdWV1ZS5sZW5ndGg+MCYmc2V0VGltZW91dChuLnF1ZXVlWzBdLDFlMy8zMCl9KX19XSksdH0oKSksQ3Q9ZnVuY3Rpb24odCxlKXtbXCJpZFwiLFwiY2xhc3NcIixcImFuaW1hdGlvblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiBlLmhhc093blByb3BlcnR5KG4pJiZ0LnNldEF0dHJpYnV0ZShuLGVbbl0pfSksZS5tb2RpZmllciYmUS5hZGRNb2RpZmllcih0LGUubW9kaWZpZXIpfSxBdD1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30sbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e307cmV0dXJuIGU9Xyh7fSxlKSxcInN0cmluZ1wiPT10eXBlb2YgdD9lLm1lc3NhZ2U9dDplPXQsZSYmKGUubWVzc2FnZXx8ZS5tZXNzYWdlSFRNTCl8fFEudGhyb3coXCJOb3RpZmljYXRpb25zIG11c3QgY29udGFpbiBhIG1lc3NhZ2VcIiksKGUuaGFzT3duUHJvcGVydHkoXCJidXR0b25MYWJlbHNcIil8fGUuaGFzT3duUHJvcGVydHkoXCJidXR0b25MYWJlbFwiKSkmJihlLmJ1dHRvbkxhYmVscz1lLmJ1dHRvbkxhYmVsc3x8ZS5idXR0b25MYWJlbCxBcnJheS5pc0FycmF5KGUuYnV0dG9uTGFiZWxzKXx8KGUuYnV0dG9uTGFiZWxzPVtlLmJ1dHRvbkxhYmVsc3x8XCJcIl0pKSxRLmV4dGVuZCh7Y29tcGlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdH0sY2FsbGJhY2s6ZnVuY3Rpb24odCl7cmV0dXJuIHR9LGFuaW1hdGlvbjpcImRlZmF1bHRcIixjYW5jZWxhYmxlOiExLHByaW1hcnlCdXR0b25JbmRleDooZS5idXR0b25MYWJlbHN8fG4uYnV0dG9uTGFiZWxzfHxbXSkubGVuZ3RoLTF9LG4sZSl9LFN0PXt9O1N0Ll9jcmVhdGVBbGVydERpYWxvZz1mdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGU9QXJyYXkodCksaT0wO2k8dDtpKyspZVtpXT1hcmd1bWVudHNbaV07cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe3ZhciBpPUF0LmFwcGx5KHZvaWQgMCxlKTtRLmNoZWNrTWlzc2luZ0ltcG9ydChcIkFsZXJ0RGlhbG9nXCIsXCJBbGVydERpYWxvZ0J1dHRvblwiKTt2YXIgbz1cIlwiO2kuaXNQcm9tcHQmJihvPSdcXG4gICAgICA8aW5wdXRcXG4gICAgICAgIGNsYXNzPVwidGV4dC1pbnB1dCB0ZXh0LWlucHV0LS11bmRlcmJhclwiXFxuICAgICAgICB0eXBlPVwiJysoaS5pbnB1dFR5cGV8fFwidGV4dFwiKSsnXCJcXG4gICAgICAgIHBsYWNlaG9sZGVyPVwiJysoaS5wbGFjZWhvbGRlcnx8XCJcIikrJ1wiXFxuICAgICAgICB2YWx1ZT1cIicrKGkuZGVmYXVsdFZhbHVlfHxcIlwiKSsnXCJcXG4gICAgICAgIHN0eWxlPVwid2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDEwcHg7XCJcXG4gICAgICAvPlxcbiAgICAnKTt2YXIgcj1cIlwiO2kuYnV0dG9uTGFiZWxzLmZvckVhY2goZnVuY3Rpb24odCxlKXtyKz0nXFxuICAgICAgPG9ucy1hbGVydC1kaWFsb2ctYnV0dG9uXFxuICAgICAgICBjbGFzcz1cIlxcbiAgICAgICAgICAnKyhlPT09aS5wcmltYXJ5QnV0dG9uSW5kZXg/XCIgYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcHJpbWFsXCI6XCJcIikrXCJcXG4gICAgICAgICAgXCIrKGkuYnV0dG9uTGFiZWxzLmxlbmd0aDw9Mj9cIiBhbGVydC1kaWFsb2ctYnV0dG9uLS1yb3dmb290ZXJcIjpcIlwiKSsnXFxuICAgICAgICBcIlxcbiAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7XCI+XFxuICAgICAgICAnK3QrXCJcXG4gICAgICA8L29ucy1hbGVydC1kaWFsb2ctYnV0dG9uPlxcbiAgICBcIn0pO3ZhciBhPXt9LHM9ZnVuY3Rpb24oKXthLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbCYmYS5kaWFsb2cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixhLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbCksT2JqZWN0LmtleXMoYSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gZGVsZXRlIGFbdF19KSxhPW51bGwsaS5kZXN0cm95IGluc3RhbmNlb2YgRnVuY3Rpb24mJmkuZGVzdHJveSgpfTthLmRpYWxvZz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib25zLWFsZXJ0LWRpYWxvZ1wiKSxhLmRpYWxvZy5pbm5lckhUTUw9J1xcbiAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtZGlhbG9nLW1hc2tcIlxcbiAgICAgIHN0eWxlPVwiXFxuICAgICAgICAnKyhpLm1hc2tDb2xvcj9cImJhY2tncm91bmQtY29sb3I6IFwiK2kubWFza0NvbG9yOlwiXCIpKydcXG4gICAgICBcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZ1wiPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJhbGVydC1kaWFsb2ctY29udGFpbmVyXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVwiYWxlcnQtZGlhbG9nLXRpdGxlXCI+XFxuICAgICAgICAgICcrKGkudGl0bGV8fFwiXCIpKydcXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cImFsZXJ0LWRpYWxvZy1jb250ZW50XCI+XFxuICAgICAgICAgICcrKGkubWVzc2FnZXx8aS5tZXNzYWdlSFRNTCkrXCJcXG4gICAgICAgICAgXCIrbysnXFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XCJcXG4gICAgICAgICAgYWxlcnQtZGlhbG9nLWZvb3RlclxcbiAgICAgICAgICAnKyhpLmJ1dHRvbkxhYmVscy5sZW5ndGg8PTI/XCIgYWxlcnQtZGlhbG9nLWZvb3Rlci0tcm93Zm9vdGVyXCI6XCJcIikrJ1xcbiAgICAgICAgXCI+XFxuICAgICAgICAgICcrcitcIlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgXCIsbihhLmRpYWxvZyksQ3QoYS5kaWFsb2csaSksaS5pc1Byb21wdCYmaS5zdWJtaXRPbkVudGVyJiYoYS5pbnB1dD1hLmRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiLnRleHQtaW5wdXRcIiksYS5pbnB1dC5vbmtleXByZXNzPWZ1bmN0aW9uKGUpezEzPT09ZS5rZXlDb2RlJiZhLmRpYWxvZy5oaWRlKCkudGhlbihmdW5jdGlvbigpe2lmKGEpe3ZhciBlPWEuaW5wdXQudmFsdWU7cygpLGkuY2FsbGJhY2soZSksdChlKX19KX0pLGEuZm9vdGVyPWEuZGlhbG9nLnF1ZXJ5U2VsZWN0b3IoXCIuYWxlcnQtZGlhbG9nLWZvb3RlclwiKSxRLmFycmF5RnJvbShhLmRpYWxvZy5xdWVyeVNlbGVjdG9yQWxsKFwiLmFsZXJ0LWRpYWxvZy1idXR0b25cIikpLmZvckVhY2goZnVuY3Rpb24oZSxuKXtlLm9uY2xpY2s9ZnVuY3Rpb24oKXthLmRpYWxvZy5oaWRlKCkudGhlbihmdW5jdGlvbigpe2lmKGEpe3ZhciBlPW47aS5pc1Byb21wdCYmKGU9bj09PWkucHJpbWFyeUJ1dHRvbkluZGV4P2EuaW5wdXQudmFsdWU6bnVsbCksYS5kaWFsb2cucmVtb3ZlKCkscygpLGkuY2FsbGJhY2soZSksdChlKX19KX0sYS5mb290ZXIuYXBwZW5kQ2hpbGQoZSl9KSxpLmNhbmNlbGFibGUmJihhLmRpYWxvZy5jYW5jZWxhYmxlPSEwLGEuZGlhbG9nLm9uRGlhbG9nQ2FuY2VsPWZ1bmN0aW9uKCl7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7YS5kaWFsb2cucmVtb3ZlKCkscygpfSk7dmFyIGU9aS5pc1Byb21wdD9udWxsOi0xO2kuY2FsbGJhY2soZSksdChlKX0sYS5kaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixhLmRpYWxvZy5vbkRpYWxvZ0NhbmNlbCwhMSkpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYS5kaWFsb2cpLGkuY29tcGlsZShhLmRpYWxvZyksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7YS5kaWFsb2cuc2hvdygpLnRoZW4oZnVuY3Rpb24oKXtpZihhLmlucHV0JiZpLmlzUHJvbXB0JiZpLmF1dG9mb2N1cyl7dmFyIHQ9YS5pbnB1dC52YWx1ZS5sZW5ndGg7YS5pbnB1dC5mb2N1cygpLGEuaW5wdXQuc2V0U2VsZWN0aW9uUmFuZ2UodCx0KX19KX0pfSl9LFN0LmFsZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFN0Ll9jcmVhdGVBbGVydERpYWxvZyh0LGUse2J1dHRvbkxhYmVsczpbXCJPS1wiXSx0aXRsZTpcIkFsZXJ0XCJ9KX0sU3QuY29uZmlybT1mdW5jdGlvbih0LGUpe3JldHVybiBTdC5fY3JlYXRlQWxlcnREaWFsb2codCxlLHtidXR0b25MYWJlbHM6W1wiQ2FuY2VsXCIsXCJPS1wiXSx0aXRsZTpcIkNvbmZpcm1cIn0pfSxTdC5wcm9tcHQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gU3QuX2NyZWF0ZUFsZXJ0RGlhbG9nKHQsZSx7YnV0dG9uTGFiZWxzOltcIk9LXCJdLHRpdGxlOlwiQWxlcnRcIixpc1Byb21wdDohMCxhdXRvZm9jdXM6ITAsc3VibWl0T25FbnRlcjohMH0pfSxTdC50b2FzdD1mdW5jdGlvbih0LGUpe3ZhciBuPW5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpe1EuY2hlY2tNaXNzaW5nSW1wb3J0KFwiVG9hc3RcIiksZT1BdCh0LGUse3RpbWVvdXQ6MCxmb3JjZTohMX0pO3ZhciBvPVEuY3JlYXRlRWxlbWVudChcIlxcbiAgICAgIDxvbnMtdG9hc3Q+XFxuICAgICAgICBcIitlLm1lc3NhZ2UrXCJcXG4gICAgICAgIFwiKyhlLmJ1dHRvbkxhYmVscz9cIjxidXR0b24+XCIrZS5idXR0b25MYWJlbHNbMF0rXCI8L2J1dHRvbj5cIjpcIlwiKStcIlxcbiAgICAgIDwvb25zLXRvYXN0PlxcbiAgICBcIik7Q3QobyxlKTt2YXIgcj1mdW5jdGlvbih0KXtvJiZvLmhpZGUoKS50aGVuKGZ1bmN0aW9uKCl7byYmKG8ucmVtb3ZlKCksbz1udWxsLGUuY2FsbGJhY2sodCksaSh0KSl9KX07ZS5idXR0b25MYWJlbHMmJihRLmZpbmRDaGlsZChvLl90b2FzdCxcImJ1dHRvblwiKS5vbmNsaWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHIoMCl9KSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG8pLGUuY29tcGlsZShvKTt2YXIgYT1mdW5jdGlvbigpe28ucGFyZW50RWxlbWVudCYmby5zaG93KGUpLnRoZW4oZnVuY3Rpb24oKXtlLnRpbWVvdXQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gcigtMSl9LGUudGltZW91dCl9KX07c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZm9yY2U/YSgpOkV0LmFkZChhLG4pfSl9KTtyZXR1cm4gbn07dmFyIFB0PWZ1bmN0aW9uKCl7fTtQdC5wcm90b3R5cGU9e29uOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdGhpcy5fZXZlbnRzW3RdPXRoaXMuX2V2ZW50c1t0XXx8W10sdGhpcy5fZXZlbnRzW3RdLnB1c2goZSl9LG9uY2U6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzO3RoaXMub24odCxmdW5jdGlvbiBpKCl7cmV0dXJuIG4ub2ZmKHQsaSksZS5hcHBseShudWxsLGFyZ3VtZW50cyl9KX0sb2ZmOmZ1bmN0aW9uKHQsZSl7dGhpcy5fZXZlbnRzPXRoaXMuX2V2ZW50c3x8e30sdCBpbiB0aGlzLl9ldmVudHMhPSExJiYodGhpcy5fZXZlbnRzW3RdPXRoaXMuX2V2ZW50c1t0XS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuISFlJiZlIT09dH0pKX0sZW1pdDpmdW5jdGlvbih0KXtpZih0aGlzLl9ldmVudHM9dGhpcy5fZXZlbnRzfHx7fSx0IGluIHRoaXMuX2V2ZW50cyE9ITEpZm9yKHZhciBlPTA7ZTx0aGlzLl9ldmVudHNbdF0ubGVuZ3RoO2UrKyl0aGlzLl9ldmVudHNbdF1bZV0uYXBwbHkodGhpcyxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpfX0sUHQubWl4aW49ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtcIm9uXCIsXCJvbmNlXCIsXCJvZmZcIixcImVtaXRcIl0sbj0wO248ZS5sZW5ndGg7bisrKVwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/dC5wcm90b3R5cGVbZVtuXV09UHQucHJvdG90eXBlW2Vbbl1dOnRbZVtuXV09UHQucHJvdG90eXBlW2Vbbl1dfSx3aW5kb3cuTWljcm9FdmVudD1QdDt2YXIgT3Q9ZnVuY3Rpb24oKXt2YXIgdD17X2lzUG9ydHJhaXQ6ITEsaXNQb3J0cmFpdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1BvcnRyYWl0KCl9LGlzTGFuZHNjYXBlOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuaXNQb3J0cmFpdCgpfSxfaW5pdDpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHRoaXMuX29uRE9NQ29udGVudExvYWRlZC5iaW5kKHRoaXMpLCExKSxcIm9yaWVudGF0aW9uXCJpbiB3aW5kb3c/d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvcmllbnRhdGlvbmNoYW5nZVwiLHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSwhMSk6d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9vblJlc2l6ZS5iaW5kKHRoaXMpLCExKSx0aGlzLl9pc1BvcnRyYWl0PWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodD53aW5kb3cuaW5uZXJXaWR0aH0sdGhpc30sX29uRE9NQ29udGVudExvYWRlZDpmdW5jdGlvbigpe3RoaXMuX2luc3RhbGxJc1BvcnRyYWl0SW1wbGVtZW50YXRpb24oKSx0aGlzLmVtaXQoXCJjaGFuZ2VcIix7aXNQb3J0cmFpdDp0aGlzLmlzUG9ydHJhaXQoKX0pfSxfaW5zdGFsbElzUG9ydHJhaXRJbXBsZW1lbnRhdGlvbjpmdW5jdGlvbigpe3ZhciB0PXdpbmRvdy5pbm5lcldpZHRoPHdpbmRvdy5pbm5lckhlaWdodDtcIm9yaWVudGF0aW9uXCJpbiB3aW5kb3c/d2luZG93Lm9yaWVudGF0aW9uJTE4MD09MD90aGlzLl9pc1BvcnRyYWl0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT1NYXRoLmFicyh3aW5kb3cub3JpZW50YXRpb24lMTgwKT90OiF0fTp0aGlzLl9pc1BvcnRyYWl0PWZ1bmN0aW9uKCl7cmV0dXJuIDkwPT09TWF0aC5hYnMod2luZG93Lm9yaWVudGF0aW9uJTE4MCk/dDohdH06dGhpcy5faXNQb3J0cmFpdD1mdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ+d2luZG93LmlubmVyV2lkdGh9fSxfb25PcmllbnRhdGlvbkNoYW5nZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl9pc1BvcnRyYWl0KCksbj0wLGk9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtuKys7dmFyIG89d2luZG93LmlubmVyV2lkdGgscj13aW5kb3cuaW5uZXJIZWlnaHQ7ZSYmbzw9cnx8IWUmJm8+PXI/KHQuZW1pdChcImNoYW5nZVwiLHtpc1BvcnRyYWl0OmV9KSxjbGVhckludGVydmFsKGkpKTo1MD09PW4mJih0LmVtaXQoXCJjaGFuZ2VcIix7aXNQb3J0cmFpdDplfSksY2xlYXJJbnRlcnZhbChpKSl9LDIwKX0sX29uUmVzaXplOmZ1bmN0aW9uKCl7dGhpcy5lbWl0KFwiY2hhbmdlXCIse2lzUG9ydHJhaXQ6dGhpcy5pc1BvcnRyYWl0KCl9KX19O3JldHVybiBQdC5taXhpbih0KSx0fSgpLl9pbml0KCkseHQ9e2FkZDpmdW5jdGlvbih0KXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxuPUFycmF5KGU+MT9lLTE6MCksaT0xO2k8ZTtpKyspbltpLTFdPWFyZ3VtZW50c1tpXTtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBRLmFkZE1vZGlmaWVyKHQsZSl9KX0scmVtb3ZlOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLG49QXJyYXkoZT4xP2UtMTowKSxpPTE7aTxlO2krKyluW2ktMV09YXJndW1lbnRzW2ldO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIFEucmVtb3ZlTW9kaWZpZXIodCxlKX0pfSxjb250YWluczpRLmhhc01vZGlmaWVyLHRvZ2dsZTpRLnRvZ2dsZU1vZGlmaWVyfSxUdD1uZXcgUHQ7VHQuX3Zpc2libGU9ITE7dmFyIEx0PWZ1bmN0aW9uKCl7VHQuX3Zpc2libGU9ITAsVHQuZW1pdChcInNob3dcIil9LE10PWZ1bmN0aW9uKCl7VHQuX3Zpc2libGU9ITEsVHQuZW1pdChcImhpZGVcIil9LER0PWZ1bmN0aW9uKCl7US53YXJuKFwib25zLWtleWJvYXJkOiBDb3Jkb3ZhIEtleWJvYXJkIHBsdWdpbiBpcyBub3QgcHJlc2VudC5cIil9O2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VyZWFkeVwiLGZ1bmN0aW9uKCl7KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBLZXlib2FyZD8oS2V5Ym9hcmQub25zaG93PUx0LEtleWJvYXJkLm9uaGlkZT1NdCxUdC5lbWl0KFwiaW5pdFwiLHt2aXNpYmxlOktleWJvYXJkLmlzVmlzaWJsZX0pLCEwKTp2b2lkIDAhPT1jb3Jkb3ZhLnBsdWdpbnMmJnZvaWQgMCE9PWNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCYmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibmF0aXZlLmtleWJvYXJkc2hvd1wiLEx0KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm5hdGl2ZS5rZXlib2FyZGhpZGVcIixNdCksVHQuZW1pdChcImluaXRcIix7dmlzaWJsZTpjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaXNWaXNpYmxlfSksITApKXx8KChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW29ucy1rZXlib2FyZC1hY3RpdmVdXCIpfHxkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW29ucy1rZXlib2FyZC1pbmFjdGl2ZV1cIikpJiZEdCgpLFR0Lm9uPUR0KX0pO3ZhciBJdD1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQrK319KCksTnQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3AodGhpcyx0KSx0aGlzLl9sb2NrTGlzdD1bXSx0aGlzLl93YWl0TGlzdD1bXSx0aGlzLl9sb2c9ZS5sb2d8fGZ1bmN0aW9uKCl7fX1yZXR1cm4gZyh0LFt7a2V5OlwibG9ja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWZ1bmN0aW9uIGUoKXt0Ll91bmxvY2soZSl9O3JldHVybiBlLmlkPUl0KCksdGhpcy5fbG9ja0xpc3QucHVzaChlKSx0aGlzLl9sb2coXCJsb2NrOiBcIitlLmlkKSxlfX0se2tleTpcIl91bmxvY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sb2NrTGlzdC5pbmRleE9mKHQpO2lmKC0xPT09ZSl0aHJvdyBuZXcgRXJyb3IoXCJUaGlzIGZ1bmN0aW9uIGlzIG5vdCByZWdpc3RlcmVkIGluIHRoZSBsb2NrIGxpc3QuXCIpO3RoaXMuX2xvY2tMaXN0LnNwbGljZShlLDEpLHRoaXMuX2xvZyhcInVubG9jazogXCIrdC5pZCksdGhpcy5fdHJ5VG9GcmVlV2FpdExpc3QoKX19LHtrZXk6XCJfdHJ5VG9GcmVlV2FpdExpc3RcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcig7IXRoaXMuaXNMb2NrZWQoKSYmdGhpcy5fd2FpdExpc3QubGVuZ3RoPjA7KXRoaXMuX3dhaXRMaXN0LnNoaWZ0KCkoKX19LHtrZXk6XCJ3YWl0VW5sb2NrXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgRnVuY3Rpb24pKXRocm93IG5ldyBFcnJvcihcIlRoZSBjYWxsYmFjayBwYXJhbSBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO3RoaXMuaXNMb2NrZWQoKT90aGlzLl93YWl0TGlzdC5wdXNoKHQpOnQoKX19LHtrZXk6XCJpc0xvY2tlZFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvY2tMaXN0Lmxlbmd0aD4wfX1dKSx0fSgpLEJ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSx0aGlzLl9sb2FkZXI9ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uP2U6ZnVuY3Rpb24odCxlKXt2YXIgbj10LnBhZ2UsaT10LnBhcmVudDt0LnBhcmFtcyxQLmdldFBhZ2VIVE1MQXN5bmMobikudGhlbihmdW5jdGlvbih0KXt2YXIgbj1RLmNyZWF0ZUVsZW1lbnQodCk7aS5hcHBlbmRDaGlsZChuKSxlKG4pfSl9LHRoaXMuX3VubG9hZGVyPW4gaW5zdGFuY2VvZiBGdW5jdGlvbj9uOml9cmV0dXJuIGcodCxbe2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXQucGFnZSxpPXQucGFyZW50LG89dC5wYXJhbXMscj12b2lkIDA9PT1vP3t9Om87dGhpcy5fbG9hZGVyKHtwYWdlOm4scGFyZW50OmkscGFyYW1zOnJ9LGZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEVsZW1lbnQpKXRocm93IEVycm9yKFwicGFnZUVsZW1lbnQgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBFbGVtZW50LlwiKTtlKHQpfSl9fSx7a2V5OlwidW5sb2FkXCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoISh0IGluc3RhbmNlb2YgRWxlbWVudCkpdGhyb3cgRXJyb3IoXCJwYWdlRWxlbWVudCBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEVsZW1lbnQuXCIpO3RoaXMuX3VubG9hZGVyKHQpfX0se2tleTpcImludGVybmFsTG9hZGVyXCIsc2V0OmZ1bmN0aW9uKHQpe2lmKCEodCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBFcnJvcihcIkZpcnN0IHBhcmFtZXRlciBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZ1bmN0aW9uXCIpO3RoaXMuX2xvYWRlcj10fSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGVyfX1dKSx0fSgpLGp0PW5ldyBCdCxIdD1uZXcgQnQoZnVuY3Rpb24odCxlKXt2YXIgbj10LnBhZ2UsaT10LnBhcmVudCxvPSh0LnBhcmFtcyxRLmNyZWF0ZUVsZW1lbnQobi50cmltKCkpKTtpLmFwcGVuZENoaWxkKG8pLGUobyl9LGkpLFJ0PXthbmltaXQ6bnQsZGVmYXVsdFBhZ2VMb2FkZXI6anQsZWxlbWVudHM6YyxHZXN0dXJlRGV0ZWN0b3I6c3QsbW9kaWZpZXI6eHQsbm90aWZpY2F0aW9uOlN0LG9yaWVudGF0aW9uOk90LHBhZ2VBdHRyaWJ1dGVFeHByZXNzaW9uOlMsUGFnZUxvYWRlcjpCdCxwbGF0Zm9ybTpDLHNvZnR3YXJlS2V5Ym9hcmQ6VHQsX2F1dG9TdHlsZTpOLF9pbnRlcm5hbDpQLF9yZWFkeUxvY2s6bmV3IE50LF91dGlsOlF9O1J0LnBsYXRmb3JtLnNlbGVjdCgod2luZG93LmxvY2F0aW9uLnNlYXJjaC5tYXRjaCgvcGxhdGZvcm09KFtcXHctXSspLyl8fFtdKVsxXSksZnVuY3Rpb24oKXt2YXIgdD1SdC5fcmVhZHlMb2NrLmxvY2soKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe1J0LmlzV2ViVmlldygpP3dpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiZGV2aWNlcmVhZHlcIix0LCExKTp0KCl9LCExKX0oKTt2YXIgRnQ9ZnVuY3Rpb24odCl7cmV0dXJuIFEudGhyb3coXCJUaGlzIG1ldGhvZCBtdXN0IGJlIGNhbGxlZCBcIisodD9cImFmdGVyXCI6XCJiZWZvcmVcIikrXCIgb25zLmlzUmVhZHkoKSBpcyB0cnVlXCIpfTtSdC5pc1JlYWR5PWZ1bmN0aW9uKCl7cmV0dXJuIVJ0Ll9yZWFkeUxvY2suaXNMb2NrZWQoKX0sUnQuaXNXZWJWaWV3PVJ0LnBsYXRmb3JtLmlzV2ViVmlldyxSdC5yZWFkeT1mdW5jdGlvbih0KXtSdC5pc1JlYWR5KCk/dCgpOlJ0Ll9yZWFkeUxvY2sud2FpdFVubG9jayh0KX0sUnQuc2V0RGVmYXVsdERldmljZUJhY2tCdXR0b25MaXN0ZW5lcj1mdW5jdGlvbih0KXtSdC5pc1JlYWR5KCl8fEZ0KCEwKSxSdC5fZGVmYXVsdERldmljZUJhY2tCdXR0b25IYW5kbGVyLnNldExpc3RlbmVyKHQpfSxSdC5kaXNhYmxlRGV2aWNlQmFja0J1dHRvbkhhbmRsZXI9ZnVuY3Rpb24oKXtSdC5pc1JlYWR5KCl8fEZ0KCEwKSxQLmRiYkRpc3BhdGNoZXIuZGlzYWJsZSgpfSxSdC5lbmFibGVEZXZpY2VCYWNrQnV0dG9uSGFuZGxlcj1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKXx8RnQoITApLFAuZGJiRGlzcGF0Y2hlci5lbmFibGUoKX0sUnQuZmlyZURldmljZUJhY2tCdXR0b25FdmVudD1mdW5jdGlvbigpe1AuZGJiRGlzcGF0Y2hlci5maXJlRGV2aWNlQmFja0J1dHRvbkV2ZW50KCl9LFJ0LmVuYWJsZUF1dG9TdGF0dXNCYXJGaWxsPWZ1bmN0aW9uKCl7UnQuaXNSZWFkeSgpJiZGdCghMSksUC5jb25maWcuYXV0b1N0YXR1c0JhckZpbGw9ITB9LFJ0LmRpc2FibGVBdXRvU3RhdHVzQmFyRmlsbD1mdW5jdGlvbigpe1J0LmlzUmVhZHkoKSYmRnQoITEpLFAuY29uZmlnLmF1dG9TdGF0dXNCYXJGaWxsPSExfSxSdC5tb2NrU3RhdHVzQmFyPWZ1bmN0aW9uKCl7UnQuaXNSZWFkeSgpJiZGdCghMSk7dmFyIHQ9ZnVuY3Rpb24oKXtpZighZG9jdW1lbnQuYm9keS5jaGlsZHJlblswXXx8IWRvY3VtZW50LmJvZHkuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmNvbnRhaW5zKFwib25zLXN0YXR1cy1iYXItbW9ja1wiKSl7dmFyIHQ9Qy5pc0FuZHJvaWQoKSxlPWZ1bmN0aW9uKHQpe3JldHVybic8aSBjbGFzcz1cIicrdC5zcGxpdChcIi1cIilbMF0rXCIgXCIrdCsnXCI+PC9pPid9LG49dD9lKFwiem1kaS10d2l0dGVyXCIpK1wiIFwiK2UoXCJ6bWRpLWdvb2dsZS1wbGF5XCIpOlwiTm8gU0lNIFwiK2UoXCJmYS13aWZpXCIpLGk9dD9cIlwiOlwiMTI6MjggUE1cIixvPXQ/ZShcInptZGktbmV0d29ya1wiKStcIiBcIitlKFwiem1kaS13aWZpXCIpK1wiIFwiK2UoXCJ6bWRpLWJhdHRlcnlcIikrXCIgMTI6MjggUE1cIjpcIjgwJSBcIitlKFwiZmEtYmF0dGVyeS10aHJlZS1xdWFydGVyc1wiKTtkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShRLmNyZWF0ZUVsZW1lbnQoJzxkaXYgY2xhc3M9XCJvbnMtc3RhdHVzLWJhci1tb2NrICcrKHQ/XCJhbmRyb2lkXCI6XCJpb3NcIikrJ1wiPjxkaXY+JytuK1wiPC9kaXY+PGRpdj5cIitpK1wiPC9kaXY+PGRpdj5cIitvK1wiPC9kaXY+PC9kaXY+XCIpLGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCl9fTtkb2N1bWVudC5ib2R5P3QoKTpQLndhaXRET01Db250ZW50TG9hZGVkKHQpfSxSdC5kaXNhYmxlQW5pbWF0aW9ucz1mdW5jdGlvbigpe1AuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD0hMH0sUnQuZW5hYmxlQW5pbWF0aW9ucz1mdW5jdGlvbigpe1AuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD0hMX0sUnQuX2Rpc2FibGVXYXJuaW5ncz1mdW5jdGlvbigpe1AuY29uZmlnLndhcm5pbmdzRGlzYWJsZWQ9ITB9LFJ0Ll9lbmFibGVXYXJuaW5ncz1mdW5jdGlvbigpe1AuY29uZmlnLndhcm5pbmdzRGlzYWJsZWQ9ITF9LFJ0LmRpc2FibGVBdXRvU3R5bGluZz1OLmRpc2FibGUsUnQuZW5hYmxlQXV0b1N0eWxpbmc9Ti5lbmFibGUsUnQuZGlzYWJsZUljb25BdXRvUHJlZml4PWZ1bmN0aW9uKCl7US5jaGVja01pc3NpbmdJbXBvcnQoXCJJY29uXCIpLGMuSWNvbi5zZXRBdXRvUHJlZml4KCExKX0sUnQuZm9yY2VVSVdlYlZpZXdTY3JvbGxGaXg9ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO1AuY29uZmlnLmZvcmNlVUlXZWJWaWV3U2Nyb2xsRml4PXR9LFJ0LmZvcmNlUGxhdGZvcm1TdHlsaW5nPWZ1bmN0aW9uKHQpe1J0LmVuYWJsZUF1dG9TdHlsaW5nKCksUnQucGxhdGZvcm0uc2VsZWN0KHR8fFwiaW9zXCIpLFJ0Ll91dGlsLmFycmF5RnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXtcIm9ucy1pZlwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk/dC5fcGxhdGZvcm1VcGRhdGUoKTp0LnRhZ05hbWUubWF0Y2goL15vbnMtL2kpJiYoTi5wcmVwYXJlKHQsITApLFwib25zLXRhYmJhclwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJnQuX3VwZGF0ZVBvc2l0aW9uKCkpfSl9LFJ0LnByZWxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06W107cmV0dXJuIFByb21pc2UuYWxsKCh0IGluc3RhbmNlb2YgQXJyYXk/dDpbdF0pLm1hcChmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgdCYmUS50aHJvdyhcIkV4cGVjdGVkIHN0cmluZyBhcmd1bWVudHMgYnV0IGdvdCBcIisodm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpKSxQLmdldFRlbXBsYXRlSFRNTEFzeW5jKHQpfSkpfSxSdC5jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPWZ1bmN0aW9uKHQpe3ZhciBuPVJ0Ll91dGlsLmNyZWF0ZUVsZW1lbnQodCk7aWYobi5yZW1vdmUoKSxlLmFwcGVuZCl7KGUuYXBwZW5kIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQ/ZS5hcHBlbmQ6ZG9jdW1lbnQuYm9keSkuaW5zZXJ0QmVmb3JlKG4sZS5pbnNlcnRCZWZvcmV8fG51bGwpLGUubGluayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmxpbmsobil9cmV0dXJuIG59O3JldHVyblwiPFwiPT09KHQ9dC50cmltKCkpLmNoYXJBdCgwKT9uKHQpOlAuZ2V0UGFnZUhUTUxBc3luYyh0KS50aGVuKG4pfSxSdC5jcmVhdGVQb3BvdmVyPVJ0LmNyZWF0ZURpYWxvZz1SdC5jcmVhdGVBbGVydERpYWxvZz1mdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuIFJ0LmNyZWF0ZUVsZW1lbnQodCxfKHthcHBlbmQ6ITB9LGUpKX0sUnQub3BlbkFjdGlvblNoZWV0PWZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXtRLmNoZWNrTWlzc2luZ0ltcG9ydChcIkFjdGlvblNoZWV0XCIpLGZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpcIkZ1bmN0aW9uXCI7cmV0dXJuIFEudGhyb3coJ1wib3B0aW9ucy4nK3QrJ1wiIG11c3QgYmUgYW4gaW5zdGFuY2Ugb2YgJytlKX0sbj1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwodCxlKX0saT1mdW5jdGlvbihlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06RnVuY3Rpb247cmV0dXJuIHRbZV1pbnN0YW5jZW9mIG59LG89XCJidXR0b25zXCIscj1cImNhbGxiYWNrXCIsYT1cImNvbXBpbGVcIixzPVwiZGVzdHJveVwiOyghbihvKXx8IWkobyxBcnJheSkpJiZlKG8sXCJBcnJheVwiKSxuKHIpJiYhaShyKSYmZShyKSxuKGEpJiYhaShhKSYmZShhKSxuKHMpJiYhaShzKSYmZShzKX0odCk7dmFyIG49US5jcmVhdGVFbGVtZW50KFwiXFxuICAgIDxvbnMtYWN0aW9uLXNoZWV0XFxuICAgICAgXCIrKHQudGl0bGU/J3RpdGxlPVwiJyt0LnRpdGxlKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5jYW5jZWxhYmxlP1wiY2FuY2VsYWJsZVwiOlwiXCIpK1wiXFxuICAgICAgXCIrKHQubW9kaWZpZXI/J21vZGlmaWVyPVwiJyt0Lm1vZGlmaWVyKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5tYXNrQ29sb3I/J21hc2stY29sb3I9XCInK3QubWFza0NvbG9yKydcIic6XCJcIikrXCJcXG4gICAgICBcIisodC5pZD8naWQ9XCInK3QuaWQrJ1wiJzpcIlwiKStcIlxcbiAgICAgIFwiKyh0LmNsYXNzPydjbGFzcz1cIicrdC5jbGFzcysnXCInOlwiXCIpKydcXG4gICAgPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJhY3Rpb24tc2hlZXRcIj48L2Rpdj5cXG4gICAgPC9vbnMtYWN0aW9uLXNoZWV0PlxcbiAgJyksaT1mdW5jdGlvbiBpKG8pe3ZhciByPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTotMTtuJiYodC5kZXN0cm95JiZ0LmRlc3Ryb3kobiksbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiZGlhbG9nLWNhbmNlbFwiLGksITEpLG4ucmVtb3ZlKCksbj1udWxsLHQuY2FsbGJhY2smJnQuY2FsbGJhY2sociksZShyKSl9O24uYWRkRXZlbnRMaXN0ZW5lcihcImRpYWxvZy1jYW5jZWxcIixpLCExKTt2YXIgbz1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dC5idXR0b25zLmZvckVhY2goZnVuY3Rpb24oZSxyKXt2YXIgYT1cInN0cmluZ1wiPT10eXBlb2YgZT97bGFiZWw6ZX06Xyh7fSxlKTt0LmRlc3RydWN0aXZlPT09ciYmKGEubW9kaWZpZXI9KGEubW9kaWZpZXJ8fFwiXCIpK1wiIGRlc3RydWN0aXZlXCIpO3ZhciBzPVEuY3JlYXRlRWxlbWVudChcIlxcbiAgICAgIDxvbnMtYWN0aW9uLXNoZWV0LWJ1dHRvblxcbiAgICAgICAgXCIrKGEuaWNvbj8naWNvbj1cIicrYS5pY29uKydcIic6XCJcIikrXCJcXG4gICAgICAgIFwiKyhhLm1vZGlmaWVyPydtb2RpZmllcj1cIicrYS5tb2RpZmllcisnXCInOlwiXCIpK1wiXFxuICAgICAgPlxcbiAgICAgICAgXCIrYS5sYWJlbCtcIlxcbiAgICAgIDwvb25zLWFjdGlvbi1zaGVldC1idXR0b24+XFxuICAgIFwiKTtzLm9uY2xpY2s9ZnVuY3Rpb24odCl7cmV0dXJuIG4uaGlkZSgpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaSh0LHIpfSl9LG8uYXBwZW5kQ2hpbGQocyl9KSxRLmZpbmRDaGlsZChuLFwiLmFjdGlvbi1zaGVldFwiKS5hcHBlbmRDaGlsZChvKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLHQuY29tcGlsZSYmdC5jb21waWxlKGVsLmRpYWxvZyksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIG4uc2hvdyh7YW5pbWF0aW9uOnQuYW5pbWF0aW9uLGFuaW1hdGlvbk9wdGlvbnM6dC5hbmltYXRpb25PcHRpb25zfSl9KX0pfSxSdC5yZXNvbHZlTG9hZGluZ1BsYWNlaG9sZGVyPWZ1bmN0aW9uKHQsZSl7dmFyIG49UnQuX3V0aWwuYXJyYXlGcm9tKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW29ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXVwiKSk7MD09PW4ubGVuZ3RoJiZRLnRocm93KFwiTm8gb25zLWxvYWRpbmctcGxhY2Vob2xkZXIgZXhpc3RzXCIpLG4uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmdldEF0dHJpYnV0ZShcInBhZ2VcIil9KS5mb3JFYWNoKGZ1bmN0aW9uKG4pe24uc2V0QXR0cmlidXRlKFwib25zLWxvYWRpbmctcGxhY2Vob2xkZXJcIix0KSxSdC5fcmVzb2x2ZUxvYWRpbmdQbGFjZWhvbGRlcihuLHQsZSl9KX0sUnQuX3NldHVwTG9hZGluZ1BsYWNlSG9sZGVycz1mdW5jdGlvbigpe1J0LnJlYWR5KGZ1bmN0aW9uKCl7UnQuX3V0aWwuYXJyYXlGcm9tKHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW29ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXVwiKSkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT10LmdldEF0dHJpYnV0ZShcIm9ucy1sb2FkaW5nLXBsYWNlaG9sZGVyXCIpO1wic3RyaW5nXCI9PXR5cGVvZiBlJiZSdC5fcmVzb2x2ZUxvYWRpbmdQbGFjZWhvbGRlcih0LGUpfSl9KX0sUnQuX3Jlc29sdmVMb2FkaW5nUGxhY2Vob2xkZXI9ZnVuY3Rpb24odCxlKXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06ZnVuY3Rpb24odCxlKXtyZXR1cm4gZSgpfTtlJiZSdC5jcmVhdGVFbGVtZW50KGUpLnRoZW4oZnVuY3Rpb24oZSl7ZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQuYXBwZW5kQ2hpbGQoZSksbihlLGZ1bmN0aW9uKCl7Zm9yKDt0LmZpcnN0Q2hpbGQmJnQuZmlyc3RDaGlsZCE9PWU7KXQucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKTtlLnN0eWxlLmRpc3BsYXk9XCJcIn0pfSkuY2F0Y2goZnVuY3Rpb24odCl7cmV0dXJuIFByb21pc2UucmVqZWN0KFwiVW5hYmxlZCB0byByZXNvbHZlIHBsYWNlaG9sZGVyOiBcIit0KX0pfTt2YXIgcXQ9XCJjdXJyZW50U2NyaXB0XCJpbiBkb2N1bWVudD9mdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5jdXJyZW50U2NyaXB0fTpmdW5jdGlvbigpe3JldHVybiBkb2N1bWVudC5zY3JpcHRzW2RvY3VtZW50LnNjcmlwdHMubGVuZ3RoLTFdfTtSdC5nZXRTY3JpcHRQYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHF0KCkmJi9vbnMtcGFnZS9pLnRlc3QocXQoKS5wYXJlbnRFbGVtZW50LnRhZ05hbWUpJiZxdCgpLnBhcmVudEVsZW1lbnR8fG51bGx9O3ZhciB6dD1vKGZ1bmN0aW9uKHQpeyFmdW5jdGlvbigpe2Z1bmN0aW9uIGUodCxuKXt2YXIgbztpZihuPW58fHt9LHRoaXMudHJhY2tpbmdDbGljaz0hMSx0aGlzLnRyYWNraW5nQ2xpY2tTdGFydD0wLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsLHRoaXMudG91Y2hTdGFydFg9MCx0aGlzLnRvdWNoU3RhcnRZPTAsdGhpcy5sYXN0VG91Y2hJZGVudGlmaWVyPTAsdGhpcy50b3VjaEJvdW5kYXJ5PW4udG91Y2hCb3VuZGFyeXx8MTAsdGhpcy5sYXllcj10LHRoaXMudGFwRGVsYXk9bi50YXBEZWxheXx8MjAwLHRoaXMudGFwVGltZW91dD1uLnRhcFRpbWVvdXR8fDcwMCwhZS5ub3ROZWVkZWQodCkpe2Zvcih2YXIgcj1bXCJvbk1vdXNlXCIsXCJvbkNsaWNrXCIsXCJvblRvdWNoU3RhcnRcIixcIm9uVG91Y2hNb3ZlXCIsXCJvblRvdWNoRW5kXCIsXCJvblRvdWNoQ2FuY2VsXCJdLGE9MCxzPXIubGVuZ3RoO2E8czthKyspdGhpc1tyW2FdXT1mdW5jdGlvbih0LGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0LmFwcGx5KGUsYXJndW1lbnRzKX19KHRoaXNbclthXV0sdGhpcyk7aSYmKHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHRoaXMub25Nb3VzZSwhMCksdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlLCEwKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlLCEwKSksdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2ssITApLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uVG91Y2hTdGFydCwhMSksdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSwhMSksdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQsITEpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblRvdWNoQ2FuY2VsLCExKSxFdmVudC5wcm90b3R5cGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9ufHwodC5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsbixpKXt2YXIgbz1Ob2RlLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyO1wiY2xpY2tcIj09PWU/by5jYWxsKHQsZSxuLmhpamFja2VkfHxuLGkpOm8uY2FsbCh0LGUsbixpKX0sdC5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGUsbixpKXt2YXIgbz1Ob2RlLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyO1wiY2xpY2tcIj09PWU/by5jYWxsKHQsZSxuLmhpamFja2VkfHwobi5oaWphY2tlZD1mdW5jdGlvbih0KXt0LnByb3BhZ2F0aW9uU3RvcHBlZHx8bih0KX0pLGkpOm8uY2FsbCh0LGUsbixpKX0pLFwiZnVuY3Rpb25cIj09dHlwZW9mIHQub25jbGljayYmKG89dC5vbmNsaWNrLHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsZnVuY3Rpb24odCl7byh0KX0sITEpLHQub25jbGljaz1udWxsKX19dmFyIG49bmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiV2luZG93cyBQaG9uZVwiKT49MCxpPW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkFuZHJvaWRcIik+MCYmIW4sbz0vaVAoYWR8aG9uZXxvZCkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkmJiFuLHI9byYmL09TIDRfXFxkKF9cXGQpPy8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxhPW8mJi9PUyBbNi03XV9cXGQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkscz1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJCQjEwXCIpPjAsbD1bXCJlbWFpbFwiLFwibnVtYmVyXCIsXCJwYXNzd29yZFwiLFwic2VhcmNoXCIsXCJ0ZWxcIixcInRleHRcIixcInVybFwiXTtlLnByb3RvdHlwZS5uZWVkc0NsaWNrPWZ1bmN0aW9uKHQpe3N3aXRjaCh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImJ1dHRvblwiOmNhc2VcInNlbGVjdFwiOmNhc2VcInRleHRhcmVhXCI6aWYodC5kaXNhYmxlZClyZXR1cm4hMDticmVhaztjYXNlXCJpbnB1dFwiOmlmKG8mJlwiZmlsZVwiPT09dC50eXBlfHx0LmRpc2FibGVkKXJldHVybiEwO2JyZWFrO2Nhc2VcImxhYmVsXCI6Y2FzZVwiaWZyYW1lXCI6Y2FzZVwidmlkZW9cIjpyZXR1cm4hMH1yZXR1cm4vXFxibmVlZHNjbGlja1xcYi8udGVzdCh0LmNsYXNzTmFtZSl9LGUucHJvdG90eXBlLm5lZWRzRm9jdXM9ZnVuY3Rpb24odCl7c3dpdGNoKHQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7Y2FzZVwidGV4dGFyZWFcIjpyZXR1cm4hMDtjYXNlXCJzZWxlY3RcIjpyZXR1cm4haTtjYXNlXCJpbnB1dFwiOnN3aXRjaCh0LnR5cGUpe2Nhc2VcImJ1dHRvblwiOmNhc2VcImNoZWNrYm94XCI6Y2FzZVwiZmlsZVwiOmNhc2VcImltYWdlXCI6Y2FzZVwicmFkaW9cIjpjYXNlXCJzdWJtaXRcIjpyZXR1cm4hMX1yZXR1cm4hdC5kaXNhYmxlZCYmIXQucmVhZE9ubHk7ZGVmYXVsdDpyZXR1cm4vXFxibmVlZHNmb2N1c1xcYi8udGVzdCh0LmNsYXNzTmFtZSl9fSxlLnByb3RvdHlwZS5zZW5kQ2xpY2s9ZnVuY3Rpb24odCxlKXt2YXIgbixpO2RvY3VtZW50LmFjdGl2ZUVsZW1lbnQmJmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQhPT10JiZkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKSxpPWUuY2hhbmdlZFRvdWNoZXNbMF0sKG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKSkuaW5pdE1vdXNlRXZlbnQodGhpcy5kZXRlcm1pbmVFdmVudFR5cGUodCksITAsITAsd2luZG93LDEsaS5zY3JlZW5YLGkuc2NyZWVuWSxpLmNsaWVudFgsaS5jbGllbnRZLCExLCExLCExLCExLDAsbnVsbCksbi5mb3J3YXJkZWRUb3VjaEV2ZW50PSEwLHQuZGlzcGF0Y2hFdmVudChuKX0sZS5wcm90b3R5cGUuZGV0ZXJtaW5lRXZlbnRUeXBlPWZ1bmN0aW9uKHQpe3JldHVybiBpJiZcInNlbGVjdFwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCk/XCJtb3VzZWRvd25cIjpcImNsaWNrXCJ9LGUucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKHQpe3ZhciBlO28mJnQuc2V0U2VsZWN0aW9uUmFuZ2UmJjAhPT10LnR5cGUuaW5kZXhPZihcImRhdGVcIikmJlwidGltZVwiIT09dC50eXBlJiZcIm1vbnRoXCIhPT10LnR5cGUmJlwiZW1haWxcIiE9PXQudHlwZSYmXCJudW1iZXJcIiE9PXQudHlwZT8oZT10LnZhbHVlLmxlbmd0aCx0LnNldFNlbGVjdGlvblJhbmdlKGUsZSkpOnQuZm9jdXMoKX0sZS5wcm90b3R5cGUudXBkYXRlU2Nyb2xsUGFyZW50PWZ1bmN0aW9uKHQpe3ZhciBlLG47aWYoIShlPXQuZmFzdENsaWNrU2Nyb2xsUGFyZW50KXx8IWUuY29udGFpbnModCkpe249dDtkb3tpZihuLnNjcm9sbEhlaWdodD5uLm9mZnNldEhlaWdodCl7ZT1uLHQuZmFzdENsaWNrU2Nyb2xsUGFyZW50PW47YnJlYWt9bj1uLnBhcmVudEVsZW1lbnR9d2hpbGUobil9ZSYmKGUuZmFzdENsaWNrTGFzdFNjcm9sbFRvcD1lLnNjcm9sbFRvcCl9LGUucHJvdG90eXBlLmdldFRhcmdldEVsZW1lbnRGcm9tRXZlbnRUYXJnZXQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQubm9kZVR5cGU9PT1Ob2RlLlRFWFRfTk9ERT90LnBhcmVudE5vZGU6dH0sZS5wcm90b3R5cGUuaXNUZXh0RmllbGQ9ZnVuY3Rpb24odCl7cmV0dXJuXCJ0ZXh0YXJlYVwiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCl8fC0xIT09bC5pbmRleE9mKHQudHlwZSl9LGUucHJvdG90eXBlLm9uVG91Y2hTdGFydD1mdW5jdGlvbih0KXt2YXIgZSxuO2lmKHQudGFyZ2V0VG91Y2hlcy5sZW5ndGg+MSlyZXR1cm4hMDtpZihlPXRoaXMuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldCh0LnRhcmdldCksbj10LnRhcmdldFRvdWNoZXNbMF0sZS5pc0NvbnRlbnRFZGl0YWJsZSlyZXR1cm4hMDtpZihvKXtpZihlPT09ZG9jdW1lbnQuYWN0aXZlRWxlbWVudCYmdGhpcy5pc1RleHRGaWVsZChlKSlyZXR1cm4hMDtpZighcil7aWYobi5pZGVudGlmaWVyJiZuLmlkZW50aWZpZXI9PT10aGlzLmxhc3RUb3VjaElkZW50aWZpZXIpcmV0dXJuIHQucHJldmVudERlZmF1bHQoKSwhMTt0aGlzLmxhc3RUb3VjaElkZW50aWZpZXI9bi5pZGVudGlmaWVyLHRoaXMudXBkYXRlU2Nyb2xsUGFyZW50KGUpfX1yZXR1cm4gdGhpcy50cmFja2luZ0NsaWNrPSEwLHRoaXMudHJhY2tpbmdDbGlja1N0YXJ0PXQudGltZVN0YW1wLHRoaXMudGFyZ2V0RWxlbWVudD1lLHRoaXMudG91Y2hTdGFydFg9bi5wYWdlWCx0aGlzLnRvdWNoU3RhcnRZPW4ucGFnZVksdC50aW1lU3RhbXAtdGhpcy5sYXN0Q2xpY2tUaW1lPHRoaXMudGFwRGVsYXkmJnQudGltZVN0YW1wLXRoaXMubGFzdENsaWNrVGltZT4tMSYmdC5wcmV2ZW50RGVmYXVsdCgpLCEwfSxlLnByb3RvdHlwZS50b3VjaEhhc01vdmVkPWZ1bmN0aW9uKHQpe3ZhciBlPXQuY2hhbmdlZFRvdWNoZXNbMF0sbj10aGlzLnRvdWNoQm91bmRhcnk7cmV0dXJuIE1hdGguYWJzKGUucGFnZVgtdGhpcy50b3VjaFN0YXJ0WCk+bnx8TWF0aC5hYnMoZS5wYWdlWS10aGlzLnRvdWNoU3RhcnRZKT5ufSxlLnByb3RvdHlwZS5vblRvdWNoTW92ZT1mdW5jdGlvbih0KXtyZXR1cm4hdGhpcy50cmFja2luZ0NsaWNrfHwoKHRoaXMudGFyZ2V0RWxlbWVudCE9PXRoaXMuZ2V0VGFyZ2V0RWxlbWVudEZyb21FdmVudFRhcmdldCh0LnRhcmdldCl8fHRoaXMudG91Y2hIYXNNb3ZlZCh0KSkmJih0aGlzLnRyYWNraW5nQ2xpY2s9ITEsdGhpcy50YXJnZXRFbGVtZW50PW51bGwpLCEwKX0sZS5wcm90b3R5cGUuZmluZENvbnRyb2w9ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQuY29udHJvbD90LmNvbnRyb2w6dC5odG1sRm9yP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuaHRtbEZvcik6dC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uLCBpbnB1dDpub3QoW3R5cGU9aGlkZGVuXSksIGtleWdlbiwgbWV0ZXIsIG91dHB1dCwgcHJvZ3Jlc3MsIHNlbGVjdCwgdGV4dGFyZWFcIil9LGUucHJvdG90eXBlLm9uVG91Y2hFbmQ9ZnVuY3Rpb24odCl7dmFyIGUsbixzLGwsdSxjPXRoaXMudGFyZ2V0RWxlbWVudDtpZighdGhpcy50cmFja2luZ0NsaWNrKXJldHVybiEwO2lmKHQudGltZVN0YW1wLXRoaXMubGFzdENsaWNrVGltZTx0aGlzLnRhcERlbGF5JiZ0LnRpbWVTdGFtcC10aGlzLmxhc3RDbGlja1RpbWU+LTEpcmV0dXJuIHRoaXMuY2FuY2VsTmV4dENsaWNrPSEwLCEwO2lmKHQudGltZVN0YW1wLXRoaXMudHJhY2tpbmdDbGlja1N0YXJ0PnRoaXMudGFwVGltZW91dClyZXR1cm4hMDtpZih0aGlzLmNhbmNlbE5leHRDbGljaz0hMSx0aGlzLmxhc3RDbGlja1RpbWU9dC50aW1lU3RhbXAsbj10aGlzLnRyYWNraW5nQ2xpY2tTdGFydCx0aGlzLnRyYWNraW5nQ2xpY2s9ITEsdGhpcy50cmFja2luZ0NsaWNrU3RhcnQ9MCxhJiYodT10LmNoYW5nZWRUb3VjaGVzWzBdLChjPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodS5wYWdlWC13aW5kb3cucGFnZVhPZmZzZXQsdS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpfHxjKS5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQ9dGhpcy50YXJnZXRFbGVtZW50LmZhc3RDbGlja1Njcm9sbFBhcmVudCksXCJsYWJlbFwiPT09KHM9Yy50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKXtpZihlPXRoaXMuZmluZENvbnRyb2woYykpe2lmKHRoaXMuZm9jdXMoYyksaSlyZXR1cm4hMTtjPWV9fWVsc2UgaWYodGhpcy5uZWVkc0ZvY3VzKGMpKXJldHVybiB0LnRpbWVTdGFtcC1uPjEwMHx8byYmd2luZG93LnRvcCE9PXdpbmRvdyYmXCJpbnB1dFwiPT09cz8odGhpcy50YXJnZXRFbGVtZW50PW51bGwsITEpOih0aGlzLmZvY3VzKGMpLHRoaXMuc2VuZENsaWNrKGMsdCksciYmXCJzZWxlY3RcIj09PXN8fCh0aGlzLnRhcmdldEVsZW1lbnQ9bnVsbCx0LnByZXZlbnREZWZhdWx0KCkpLCExKTtyZXR1cm4hKCFvfHxyfHwhKGw9Yy5mYXN0Q2xpY2tTY3JvbGxQYXJlbnQpfHxsLmZhc3RDbGlja0xhc3RTY3JvbGxUb3A9PT1sLnNjcm9sbFRvcCl8fCh0aGlzLm5lZWRzQ2xpY2soYyl8fCh0LnByZXZlbnREZWZhdWx0KCksdGhpcy5zZW5kQ2xpY2soYyx0KSksITEpfSxlLnByb3RvdHlwZS5vblRvdWNoQ2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy50cmFja2luZ0NsaWNrPSExLHRoaXMudGFyZ2V0RWxlbWVudD1udWxsfSxlLnByb3RvdHlwZS5vbk1vdXNlPWZ1bmN0aW9uKHQpe3JldHVybiF0aGlzLnRhcmdldEVsZW1lbnR8fCghIXQuZm9yd2FyZGVkVG91Y2hFdmVudHx8KCF0LmNhbmNlbGFibGV8fCghKCF0aGlzLm5lZWRzQ2xpY2sodGhpcy50YXJnZXRFbGVtZW50KXx8dGhpcy5jYW5jZWxOZXh0Q2xpY2spfHwodC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24/dC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTp0LnByb3BhZ2F0aW9uU3RvcHBlZD0hMCx0LnN0b3BQcm9wYWdhdGlvbigpLHQucHJldmVudERlZmF1bHQoKSwhMSkpKSl9LGUucHJvdG90eXBlLm9uQ2xpY2s9ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHRoaXMudHJhY2tpbmdDbGljaz8odGhpcy50YXJnZXRFbGVtZW50PW51bGwsdGhpcy50cmFja2luZ0NsaWNrPSExLCEwKTpcInN1Ym1pdFwiPT09dC50YXJnZXQudHlwZSYmMD09PXQuZGV0YWlsfHwoKGU9dGhpcy5vbk1vdXNlKHQpKXx8KHRoaXMudGFyZ2V0RWxlbWVudD1udWxsKSxlKX0sZS5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGF5ZXI7aSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHRoaXMub25Nb3VzZSwhMCksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5vbk1vdXNlLCEwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5vbk1vdXNlLCEwKSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2ssITApLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm9uVG91Y2hTdGFydCwhMSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5vblRvdWNoTW92ZSwhMSksdC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIix0aGlzLm9uVG91Y2hFbmQsITEpLHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5vblRvdWNoQ2FuY2VsLCExKX0sZS5ub3ROZWVkZWQ9ZnVuY3Rpb24odCl7dmFyIGUsbixvO2lmKHZvaWQgMD09PXdpbmRvdy5vbnRvdWNoc3RhcnQpcmV0dXJuITA7aWYobj0rKC9DaHJvbWVcXC8oWzAtOV0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WywwXSlbMV0pe2lmKCFpKXJldHVybiEwO2lmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpe2lmKC0xIT09ZS5jb250ZW50LmluZGV4T2YoXCJ1c2VyLXNjYWxhYmxlPW5vXCIpKXJldHVybiEwO2lmKG4+MzEmJmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aDw9d2luZG93Lm91dGVyV2lkdGgpcmV0dXJuITB9fWlmKHMmJihvPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cXC8oWzAtOV0qKVxcLihbMC05XSopLykpWzFdPj0xMCYmb1syXT49MyYmKGU9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIikpKXtpZigtMSE9PWUuY29udGVudC5pbmRleE9mKFwidXNlci1zY2FsYWJsZT1ub1wiKSlyZXR1cm4hMDtpZihkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGg8PXdpbmRvdy5vdXRlcldpZHRoKXJldHVybiEwfXJldHVyblwibm9uZVwiPT09dC5zdHlsZS5tc1RvdWNoQWN0aW9ufHxcIm1hbmlwdWxhdGlvblwiPT09dC5zdHlsZS50b3VjaEFjdGlvbnx8KCEhKCsoL0ZpcmVmb3hcXC8oWzAtOV0rKS8uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KXx8WywwXSlbMV0+PTI3JiYoZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwibWV0YVtuYW1lPXZpZXdwb3J0XVwiKSkmJigtMSE9PWUuY29udGVudC5pbmRleE9mKFwidXNlci1zY2FsYWJsZT1ub1wiKXx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoPD13aW5kb3cub3V0ZXJXaWR0aCkpfHxcIm5vbmVcIj09PXQuc3R5bGUudG91Y2hBY3Rpb258fFwibWFuaXB1bGF0aW9uXCI9PT10LnN0eWxlLnRvdWNoQWN0aW9uKX0sZS5hdHRhY2g9ZnVuY3Rpb24odCxuKXtyZXR1cm4gbmV3IGUodCxuKX0sdC5leHBvcnRzPyh0LmV4cG9ydHM9ZS5hdHRhY2gsdC5leHBvcnRzLkZhc3RDbGljaz1lKTp3aW5kb3cuRmFzdENsaWNrPWV9KCl9KS5GYXN0Q2xpY2s7d2luZG93LmN1c3RvbUVsZW1lbnRzJiYod2luZG93LmN1c3RvbUVsZW1lbnRzLmZvcmNlUG9seWZpbGw9ITApO3ZhciBWdD1vKGZ1bmN0aW9uKHQpe3ZhciBlPXQuZXhwb3J0cz1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuTWF0aD09TWF0aD93aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHNlbGYmJnNlbGYuTWF0aD09TWF0aD9zZWxmOkZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcIm51bWJlclwiPT10eXBlb2YgX19nJiYoX19nPWUpfSksV3Q9byhmdW5jdGlvbih0KXt2YXIgZT10LmV4cG9ydHM9e3ZlcnNpb246XCIyLjUuMVwifTtcIm51bWJlclwiPT10eXBlb2YgX19lJiYoX19lPWUpfSksVXQ9KFd0LnZlcnNpb24sZnVuY3Rpb24odCl7cmV0dXJuXCJvYmplY3RcIj09PSh2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6Zih0KSk/bnVsbCE9PXQ6XCJmdW5jdGlvblwiPT10eXBlb2YgdH0pLFh0PWZ1bmN0aW9uKHQpe2lmKCFVdCh0KSl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYW4gb2JqZWN0IVwiKTtyZXR1cm4gdH0sWXQ9ZnVuY3Rpb24odCl7dHJ5e3JldHVybiEhdCgpfWNhdGNoKHQpe3JldHVybiEwfX0sR3Q9IVl0KGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pLCR0PVZ0LmRvY3VtZW50LEt0PVV0KCR0KSYmVXQoJHQuY3JlYXRlRWxlbWVudCksUXQ9ZnVuY3Rpb24odCl7cmV0dXJuIEt0PyR0LmNyZWF0ZUVsZW1lbnQodCk6e319LEp0PSFHdCYmIVl0KGZ1bmN0aW9uKCl7cmV0dXJuIDchPU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRdChcImRpdlwiKSxcImFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDd9fSkuYX0pLFp0PWZ1bmN0aW9uKHQsZSl7aWYoIVV0KHQpKXJldHVybiB0O3ZhciBuLGk7aWYoZSYmXCJmdW5jdGlvblwiPT10eXBlb2Yobj10LnRvU3RyaW5nKSYmIVV0KGk9bi5jYWxsKHQpKSlyZXR1cm4gaTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihuPXQudmFsdWVPZikmJiFVdChpPW4uY2FsbCh0KSkpcmV0dXJuIGk7aWYoIWUmJlwiZnVuY3Rpb25cIj09dHlwZW9mKG49dC50b1N0cmluZykmJiFVdChpPW4uY2FsbCh0KSkpcmV0dXJuIGk7dGhyb3cgVHlwZUVycm9yKFwiQ2FuJ3QgY29udmVydCBvYmplY3QgdG8gcHJpbWl0aXZlIHZhbHVlXCIpfSx0ZT1PYmplY3QuZGVmaW5lUHJvcGVydHksZWU9e2Y6R3Q/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKHQsZSxuKXtpZihYdCh0KSxlPVp0KGUsITApLFh0KG4pLEp0KXRyeXtyZXR1cm4gdGUodCxlLG4pfWNhdGNoKHQpe31pZihcImdldFwiaW4gbnx8XCJzZXRcImluIG4pdGhyb3cgVHlwZUVycm9yKFwiQWNjZXNzb3JzIG5vdCBzdXBwb3J0ZWQhXCIpO3JldHVyblwidmFsdWVcImluIG4mJih0W2VdPW4udmFsdWUpLHR9fSxuZT1mdW5jdGlvbih0LGUpe3JldHVybntlbnVtZXJhYmxlOiEoMSZ0KSxjb25maWd1cmFibGU6ISgyJnQpLHdyaXRhYmxlOiEoNCZ0KSx2YWx1ZTplfX0saWU9R3Q/ZnVuY3Rpb24odCxlLG4pe3JldHVybiBlZS5mKHQsZSxuZSgxLG4pKX06ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0W2VdPW4sdH0sb2U9e30uaGFzT3duUHJvcGVydHkscmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gb2UuY2FsbCh0LGUpfSxhZT0wLHNlPU1hdGgucmFuZG9tKCksbGU9ZnVuY3Rpb24odCl7cmV0dXJuXCJTeW1ib2woXCIuY29uY2F0KHZvaWQgMD09PXQ/XCJcIjp0LFwiKV9cIiwoKythZStzZSkudG9TdHJpbmcoMzYpKX0sdWU9byhmdW5jdGlvbih0KXt2YXIgZT1sZShcInNyY1wiKSxuPUZ1bmN0aW9uLnRvU3RyaW5nLGk9KFwiXCIrbikuc3BsaXQoXCJ0b1N0cmluZ1wiKTtXdC5pbnNwZWN0U291cmNlPWZ1bmN0aW9uKHQpe3JldHVybiBuLmNhbGwodCl9LCh0LmV4cG9ydHM9ZnVuY3Rpb24odCxuLG8scil7dmFyIGE9XCJmdW5jdGlvblwiPT10eXBlb2YgbzthJiYocmUobyxcIm5hbWVcIil8fGllKG8sXCJuYW1lXCIsbikpLHRbbl0hPT1vJiYoYSYmKHJlKG8sZSl8fGllKG8sZSx0W25dP1wiXCIrdFtuXTppLmpvaW4oU3RyaW5nKG4pKSkpLHQ9PT1WdD90W25dPW86cj90W25dP3Rbbl09bzppZSh0LG4sbyk6KGRlbGV0ZSB0W25dLGllKHQsbixvKSkpfSkoRnVuY3Rpb24ucHJvdG90eXBlLFwidG9TdHJpbmdcIixmdW5jdGlvbigpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMmJnRoaXNbZV18fG4uY2FsbCh0aGlzKX0pfSksY2U9ZnVuY3Rpb24odCl7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgdCl0aHJvdyBUeXBlRXJyb3IodCtcIiBpcyBub3QgYSBmdW5jdGlvbiFcIik7cmV0dXJuIHR9LGhlPWZ1bmN0aW9uKHQsZSxuKXtpZihjZSh0KSx2b2lkIDA9PT1lKXJldHVybiB0O3N3aXRjaChuKXtjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiB0LmNhbGwoZSxuKX07Y2FzZSAyOnJldHVybiBmdW5jdGlvbihuLGkpe3JldHVybiB0LmNhbGwoZSxuLGkpfTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4saSxvKXtyZXR1cm4gdC5jYWxsKGUsbixpLG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdC5hcHBseShlLGFyZ3VtZW50cyl9fSxkZT1mdW5jdGlvbiB0KGUsbixpKXt2YXIgbyxyLGEscyxsPWUmdC5GLHU9ZSZ0LkcsYz1lJnQuUCxoPWUmdC5CLGQ9dT9WdDplJnQuUz9WdFtuXXx8KFZ0W25dPXt9KTooVnRbbl18fHt9KS5wcm90b3R5cGUsZj11P1d0Old0W25dfHwoV3Rbbl09e30pLHA9Zi5wcm90b3R5cGV8fChmLnByb3RvdHlwZT17fSk7dSYmKGk9bik7Zm9yKG8gaW4gaSlhPSgocj0hbCYmZCYmdm9pZCAwIT09ZFtvXSk/ZDppKVtvXSxzPWgmJnI/aGUoYSxWdCk6YyYmXCJmdW5jdGlvblwiPT10eXBlb2YgYT9oZShGdW5jdGlvbi5jYWxsLGEpOmEsZCYmdWUoZCxvLGEsZSZ0LlUpLGZbb10hPWEmJmllKGYsbyxzKSxjJiZwW29dIT1hJiYocFtvXT1hKX07VnQuY29yZT1XdCxkZS5GPTEsZGUuRz0yLGRlLlM9NCxkZS5QPTgsZGUuQj0xNixkZS5XPTMyLGRlLlU9NjQsZGUuUj0xMjg7dmFyIGZlPWRlLHBlPXtmOnt9LnByb3BlcnR5SXNFbnVtZXJhYmxlfSxnZT17fS50b1N0cmluZyxtZT1mdW5jdGlvbih0KXtyZXR1cm4gZ2UuY2FsbCh0KS5zbGljZSg4LC0xKX0sX2U9T2JqZWN0KFwielwiKS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgwKT9PYmplY3Q6ZnVuY3Rpb24odCl7cmV0dXJuXCJTdHJpbmdcIj09bWUodCk/dC5zcGxpdChcIlwiKTpPYmplY3QodCl9LHZlPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09dCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIrdCk7cmV0dXJuIHR9LGJlPWZ1bmN0aW9uKHQpe3JldHVybiBfZSh2ZSh0KSl9LHllPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Isa2U9e2Y6R3Q/eWU6ZnVuY3Rpb24odCxlKXtpZih0PWJlKHQpLGU9WnQoZSwhMCksSnQpdHJ5e3JldHVybiB5ZSh0LGUpfWNhdGNoKHQpe31pZihyZSh0LGUpKXJldHVybiBuZSghcGUuZi5jYWxsKHQsZSksdFtlXSl9fSx3ZT1mdW5jdGlvbih0LGUpe2lmKFh0KHQpLCFVdChlKSYmbnVsbCE9PWUpdGhyb3cgVHlwZUVycm9yKGUrXCI6IGNhbid0IHNldCBhcyBwcm90b3R5cGUhXCIpfSxFZT17c2V0Ok9iamVjdC5zZXRQcm90b3R5cGVPZnx8KFwiX19wcm90b19fXCJpbnt9P2Z1bmN0aW9uKHQsZSxuKXt0cnl7KG49aGUoRnVuY3Rpb24uY2FsbCxrZS5mKE9iamVjdC5wcm90b3R5cGUsXCJfX3Byb3RvX19cIikuc2V0LDIpKSh0LFtdKSxlPSEodCBpbnN0YW5jZW9mIEFycmF5KX1jYXRjaCh0KXtlPSEwfXJldHVybiBmdW5jdGlvbih0LGkpe3JldHVybiB3ZSh0LGkpLGU/dC5fX3Byb3RvX189aTpuKHQsaSksdH19KHt9LCExKTp2b2lkIDApLGNoZWNrOndlfTtmZShmZS5TLFwiT2JqZWN0XCIse3NldFByb3RvdHlwZU9mOkVlLnNldH0pO1d0Lk9iamVjdC5zZXRQcm90b3R5cGVPZjt2YXIgQ2U9VnRbXCJfX2NvcmUtanNfc2hhcmVkX19cIl18fChWdFtcIl9fY29yZS1qc19zaGFyZWRfX1wiXT17fSksQWU9ZnVuY3Rpb24odCl7cmV0dXJuIENlW3RdfHwoQ2VbdF09e30pfSxTZT1vKGZ1bmN0aW9uKHQpe3ZhciBlPUFlKFwid2tzXCIpLG49VnQuU3ltYm9sLGk9XCJmdW5jdGlvblwiPT10eXBlb2YgbjsodC5leHBvcnRzPWZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfHwoZVt0XT1pJiZuW3RdfHwoaT9uOmxlKShcIlN5bWJvbC5cIit0KSl9KS5zdG9yZT1lfSksUGU9U2UoXCJ0b1N0cmluZ1RhZ1wiKSxPZT1cIkFyZ3VtZW50c1wiPT1tZShmdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHN9KCkpLHhlPWZ1bmN0aW9uKHQpe3ZhciBlLG4saTtyZXR1cm4gdm9pZCAwPT09dD9cIlVuZGVmaW5lZFwiOm51bGw9PT10P1wiTnVsbFwiOlwic3RyaW5nXCI9PXR5cGVvZihuPWZ1bmN0aW9uKHQsZSl7dHJ5e3JldHVybiB0W2VdfWNhdGNoKHQpe319KGU9T2JqZWN0KHQpLFBlKSk/bjpPZT9tZShlKTpcIk9iamVjdFwiPT0oaT1tZShlKSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuY2FsbGVlP1wiQXJndW1lbnRzXCI6aX0sVGU9e307VGVbU2UoXCJ0b1N0cmluZ1RhZ1wiKV09XCJ6XCIsVGUrXCJcIiE9XCJbb2JqZWN0IHpdXCImJnVlKE9iamVjdC5wcm90b3R5cGUsXCJ0b1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuXCJbb2JqZWN0IFwiK3hlKHRoaXMpK1wiXVwifSwhMCk7dmFyIExlPU1hdGguY2VpbCxNZT1NYXRoLmZsb29yLERlPWZ1bmN0aW9uKHQpe3JldHVybiBpc05hTih0PSt0KT8wOih0PjA/TWU6TGUpKHQpfSxJZT17fSxOZT1NYXRoLm1pbixCZT1mdW5jdGlvbih0KXtyZXR1cm4gdD4wP05lKERlKHQpLDkwMDcxOTkyNTQ3NDA5OTEpOjB9LGplPU1hdGgubWF4LEhlPU1hdGgubWluLFJlPUFlKFwia2V5c1wiKSxGZT1mdW5jdGlvbih0KXtyZXR1cm4gUmVbdF18fChSZVt0XT1sZSh0KSl9LHFlPWZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbihlLG4saSl7dmFyIG8scj1iZShlKSxhPUJlKHIubGVuZ3RoKSxzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQ9RGUodCkpPDA/amUodCtlLDApOkhlKHQsZSl9KGksYSk7aWYodCYmbiE9bil7Zm9yKDthPnM7KWlmKChvPXJbcysrXSkhPW8pcmV0dXJuITB9ZWxzZSBmb3IoO2E+cztzKyspaWYoKHR8fHMgaW4gcikmJnJbc109PT1uKXJldHVybiB0fHxzfHwwO3JldHVybiF0JiYtMX19KCExKSx6ZT1GZShcIklFX1BST1RPXCIpLFZlPVwiY29uc3RydWN0b3IsaGFzT3duUHJvcGVydHksaXNQcm90b3R5cGVPZixwcm9wZXJ0eUlzRW51bWVyYWJsZSx0b0xvY2FsZVN0cmluZyx0b1N0cmluZyx2YWx1ZU9mXCIuc3BsaXQoXCIsXCIpLFdlPU9iamVjdC5rZXlzfHxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbixpPWJlKHQpLG89MCxyPVtdO2ZvcihuIGluIGkpbiE9emUmJnJlKGksbikmJnIucHVzaChuKTtmb3IoO2UubGVuZ3RoPm87KXJlKGksbj1lW28rK10pJiYofnFlKHIsbil8fHIucHVzaChuKSk7cmV0dXJuIHJ9KHQsVmUpfSxVZT1HdD9PYmplY3QuZGVmaW5lUHJvcGVydGllczpmdW5jdGlvbih0LGUpe1h0KHQpO2Zvcih2YXIgbixpPVdlKGUpLG89aS5sZW5ndGgscj0wO28+cjspZWUuZih0LG49aVtyKytdLGVbbl0pO3JldHVybiB0fSxYZT1WdC5kb2N1bWVudCxZZT1YZSYmWGUuZG9jdW1lbnRFbGVtZW50LEdlPUZlKFwiSUVfUFJPVE9cIiksJGU9ZnVuY3Rpb24oKXt9LEtlPWZ1bmN0aW9uKCl7dmFyIHQsZT1RdChcImlmcmFtZVwiKSxuPVZlLmxlbmd0aDtmb3IoZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLFllLmFwcGVuZENoaWxkKGUpLGUuc3JjPVwiamF2YXNjcmlwdDpcIiwodD1lLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQpLm9wZW4oKSx0LndyaXRlKFwiPHNjcmlwdD5kb2N1bWVudC5GPU9iamVjdDxcXC9zY3JpcHQ+XCIpLHQuY2xvc2UoKSxLZT10LkY7bi0tOylkZWxldGUgS2UucHJvdG90eXBlW1ZlW25dXTtyZXR1cm4gS2UoKX0sUWU9T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24odCxlKXt2YXIgbjtyZXR1cm4gbnVsbCE9PXQ/KCRlLnByb3RvdHlwZT1YdCh0KSxuPW5ldyAkZSwkZS5wcm90b3R5cGU9bnVsbCxuW0dlXT10KTpuPUtlKCksdm9pZCAwPT09ZT9uOlVlKG4sZSl9LEplPWVlLmYsWmU9U2UoXCJ0b1N0cmluZ1RhZ1wiKSx0bj1mdW5jdGlvbih0LGUsbil7dCYmIXJlKHQ9bj90OnQucHJvdG90eXBlLFplKSYmSmUodCxaZSx7Y29uZmlndXJhYmxlOiEwLHZhbHVlOmV9KX0sZW49e307aWUoZW4sU2UoXCJpdGVyYXRvclwiKSxmdW5jdGlvbigpe3JldHVybiB0aGlzfSk7dmFyIG5uPWZ1bmN0aW9uKHQsZSxuKXt0LnByb3RvdHlwZT1RZShlbix7bmV4dDpuZSgxLG4pfSksdG4odCxlK1wiIEl0ZXJhdG9yXCIpfSxvbj1mdW5jdGlvbih0KXtyZXR1cm4gT2JqZWN0KHZlKHQpKX0scm49RmUoXCJJRV9QUk9UT1wiKSxhbj1PYmplY3QucHJvdG90eXBlLHNuPU9iamVjdC5nZXRQcm90b3R5cGVPZnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQ9b24odCkscmUodCxybik/dFtybl06XCJmdW5jdGlvblwiPT10eXBlb2YgdC5jb25zdHJ1Y3RvciYmdCBpbnN0YW5jZW9mIHQuY29uc3RydWN0b3I/dC5jb25zdHJ1Y3Rvci5wcm90b3R5cGU6dCBpbnN0YW5jZW9mIE9iamVjdD9hbjpudWxsfSxsbj1TZShcIml0ZXJhdG9yXCIpLHVuPSEoW10ua2V5cyYmXCJuZXh0XCJpbltdLmtleXMoKSksY249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30saG49ZnVuY3Rpb24odCxlLG4saSxvLHIsYSl7bm4obixlLGkpO3ZhciBzLGwsdSxjPWZ1bmN0aW9uKHQpe2lmKCF1biYmdCBpbiBwKXJldHVybiBwW3RdO3N3aXRjaCh0KXtjYXNlXCJrZXlzXCI6Y2FzZVwidmFsdWVzXCI6cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuKHRoaXMsdCl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBuZXcgbih0aGlzLHQpfX0saD1lK1wiIEl0ZXJhdG9yXCIsZD1cInZhbHVlc1wiPT1vLGY9ITEscD10LnByb3RvdHlwZSxnPXBbbG5dfHxwW1wiQEBpdGVyYXRvclwiXXx8byYmcFtvXSxtPWd8fGMobyksXz1vP2Q/YyhcImVudHJpZXNcIik6bTp2b2lkIDAsdj1cIkFycmF5XCI9PWU/cC5lbnRyaWVzfHxnOmc7aWYodiYmKHU9c24odi5jYWxsKG5ldyB0KSkpIT09T2JqZWN0LnByb3RvdHlwZSYmdS5uZXh0JiYodG4odSxoLCEwKSxyZSh1LGxuKXx8aWUodSxsbixjbikpLGQmJmcmJlwidmFsdWVzXCIhPT1nLm5hbWUmJihmPSEwLG09ZnVuY3Rpb24oKXtyZXR1cm4gZy5jYWxsKHRoaXMpfSksKHVufHxmfHwhcFtsbl0pJiZpZShwLGxuLG0pLEllW2VdPW0sSWVbaF09Y24sbylpZihzPXt2YWx1ZXM6ZD9tOmMoXCJ2YWx1ZXNcIiksa2V5czpyP206YyhcImtleXNcIiksZW50cmllczpffSxhKWZvcihsIGluIHMpbCBpbiBwfHx1ZShwLGwsc1tsXSk7ZWxzZSBmZShmZS5QK2ZlLkYqKHVufHxmKSxlLHMpO3JldHVybiBzfSxkbj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxuKXt2YXIgaSxvLHI9U3RyaW5nKHZlKGUpKSxhPURlKG4pLHM9ci5sZW5ndGg7cmV0dXJuIGE8MHx8YT49cz90P1wiXCI6dm9pZCAwOihpPXIuY2hhckNvZGVBdChhKSk8NTUyOTZ8fGk+NTYzMTl8fGErMT09PXN8fChvPXIuY2hhckNvZGVBdChhKzEpKTw1NjMyMHx8bz41NzM0Mz90P3IuY2hhckF0KGEpOmk6dD9yLnNsaWNlKGEsYSsyKTpvLTU2MzIwKyhpLTU1Mjk2PDwxMCkrNjU1MzZ9fSghMCk7aG4oU3RyaW5nLFwiU3RyaW5nXCIsZnVuY3Rpb24odCl7dGhpcy5fdD1TdHJpbmcodCksdGhpcy5faT0wfSxmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fdCxuPXRoaXMuX2k7cmV0dXJuIG4+PWUubGVuZ3RoP3t2YWx1ZTp2b2lkIDAsZG9uZTohMH06KHQ9ZG4oZSxuKSx0aGlzLl9pKz10Lmxlbmd0aCx7dmFsdWU6dCxkb25lOiExfSl9KTt2YXIgZm49U2UoXCJ1bnNjb3BhYmxlc1wiKSxwbj1BcnJheS5wcm90b3R5cGU7dm9pZCAwPT1wbltmbl0mJmllKHBuLGZuLHt9KTt2YXIgZ249ZnVuY3Rpb24odCl7cG5bZm5dW3RdPSEwfSxtbj1mdW5jdGlvbih0LGUpe3JldHVybnt2YWx1ZTplLGRvbmU6ISF0fX0sX249aG4oQXJyYXksXCJBcnJheVwiLGZ1bmN0aW9uKHQsZSl7dGhpcy5fdD1iZSh0KSx0aGlzLl9pPTAsdGhpcy5faz1lfSxmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3QsZT10aGlzLl9rLG49dGhpcy5faSsrO3JldHVybiF0fHxuPj10Lmxlbmd0aD8odGhpcy5fdD12b2lkIDAsbW4oMSkpOlwia2V5c1wiPT1lP21uKDAsbik6XCJ2YWx1ZXNcIj09ZT9tbigwLHRbbl0pOm1uKDAsW24sdFtuXV0pfSxcInZhbHVlc1wiKTtJZS5Bcmd1bWVudHM9SWUuQXJyYXksZ24oXCJrZXlzXCIpLGduKFwidmFsdWVzXCIpLGduKFwiZW50cmllc1wiKTtmb3IodmFyIHZuPVNlKFwiaXRlcmF0b3JcIiksYm49U2UoXCJ0b1N0cmluZ1RhZ1wiKSx5bj1JZS5BcnJheSxrbj17Q1NTUnVsZUxpc3Q6ITAsQ1NTU3R5bGVEZWNsYXJhdGlvbjohMSxDU1NWYWx1ZUxpc3Q6ITEsQ2xpZW50UmVjdExpc3Q6ITEsRE9NUmVjdExpc3Q6ITEsRE9NU3RyaW5nTGlzdDohMSxET01Ub2tlbkxpc3Q6ITAsRGF0YVRyYW5zZmVySXRlbUxpc3Q6ITEsRmlsZUxpc3Q6ITEsSFRNTEFsbENvbGxlY3Rpb246ITEsSFRNTENvbGxlY3Rpb246ITEsSFRNTEZvcm1FbGVtZW50OiExLEhUTUxTZWxlY3RFbGVtZW50OiExLE1lZGlhTGlzdDohMCxNaW1lVHlwZUFycmF5OiExLE5hbWVkTm9kZU1hcDohMSxOb2RlTGlzdDohMCxQYWludFJlcXVlc3RMaXN0OiExLFBsdWdpbjohMSxQbHVnaW5BcnJheTohMSxTVkdMZW5ndGhMaXN0OiExLFNWR051bWJlckxpc3Q6ITEsU1ZHUGF0aFNlZ0xpc3Q6ITEsU1ZHUG9pbnRMaXN0OiExLFNWR1N0cmluZ0xpc3Q6ITEsU1ZHVHJhbnNmb3JtTGlzdDohMSxTb3VyY2VCdWZmZXJMaXN0OiExLFN0eWxlU2hlZXRMaXN0OiEwLFRleHRUcmFja0N1ZUxpc3Q6ITEsVGV4dFRyYWNrTGlzdDohMSxUb3VjaExpc3Q6ITF9LHduPVdlKGtuKSxFbj0wO0VuPHduLmxlbmd0aDtFbisrKXt2YXIgQ24sQW49d25bRW5dLFNuPWtuW0FuXSxQbj1WdFtBbl0sT249UG4mJlBuLnByb3RvdHlwZTtpZihPbiYmKE9uW3ZuXXx8aWUoT24sdm4seW4pLE9uW2JuXXx8aWUoT24sYm4sQW4pLEllW0FuXT15bixTbikpZm9yKENuIGluIF9uKU9uW0NuXXx8dWUoT24sQ24sX25bQ25dLCEwKX12YXIgeG49ZnVuY3Rpb24odCxlLG4pe2Zvcih2YXIgaSBpbiBlKXVlKHQsaSxlW2ldLG4pO3JldHVybiB0fSxUbj1mdW5jdGlvbih0LGUsbixpKXtpZighKHQgaW5zdGFuY2VvZiBlKXx8dm9pZCAwIT09aSYmaSBpbiB0KXRocm93IFR5cGVFcnJvcihuK1wiOiBpbmNvcnJlY3QgaW52b2NhdGlvbiFcIik7cmV0dXJuIHR9LExuPWZ1bmN0aW9uKHQsZSxuLGkpe3RyeXtyZXR1cm4gaT9lKFh0KG4pWzBdLG5bMV0pOmUobil9Y2F0Y2goZSl7dmFyIG89dC5yZXR1cm47dGhyb3cgdm9pZCAwIT09byYmWHQoby5jYWxsKHQpKSxlfX0sTW49U2UoXCJpdGVyYXRvclwiKSxEbj1BcnJheS5wcm90b3R5cGUsSW49ZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXQmJihJZS5BcnJheT09PXR8fERuW01uXT09PXQpfSxObj1TZShcIml0ZXJhdG9yXCIpLEJuPVd0LmdldEl0ZXJhdG9yTWV0aG9kPWZ1bmN0aW9uKHQpe2lmKHZvaWQgMCE9dClyZXR1cm4gdFtObl18fHRbXCJAQGl0ZXJhdG9yXCJdfHxJZVt4ZSh0KV19LGpuPW8oZnVuY3Rpb24odCl7dmFyIGU9e30sbj17fSxpPXQuZXhwb3J0cz1mdW5jdGlvbih0LGksbyxyLGEpe3ZhciBzLGwsdSxjLGg9YT9mdW5jdGlvbigpe3JldHVybiB0fTpCbih0KSxkPWhlKG8scixpPzI6MSksZj0wO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGgpdGhyb3cgVHlwZUVycm9yKHQrXCIgaXMgbm90IGl0ZXJhYmxlIVwiKTtpZihJbihoKSl7Zm9yKHM9QmUodC5sZW5ndGgpO3M+ZjtmKyspaWYoKGM9aT9kKFh0KGw9dFtmXSlbMF0sbFsxXSk6ZCh0W2ZdKSk9PT1lfHxjPT09bilyZXR1cm4gY31lbHNlIGZvcih1PWguY2FsbCh0KTshKGw9dS5uZXh0KCkpLmRvbmU7KWlmKChjPUxuKHUsZCxsLnZhbHVlLGkpKT09PWV8fGM9PT1uKXJldHVybiBjfTtpLkJSRUFLPWUsaS5SRVRVUk49bn0pLEhuPVNlKFwic3BlY2llc1wiKSxSbj1vKGZ1bmN0aW9uKHQpe3ZhciBlPWxlKFwibWV0YVwiKSxuPWVlLmYsaT0wLG89T2JqZWN0LmlzRXh0ZW5zaWJsZXx8ZnVuY3Rpb24oKXtyZXR1cm4hMH0scj0hWXQoZnVuY3Rpb24oKXtyZXR1cm4gbyhPYmplY3QucHJldmVudEV4dGVuc2lvbnMoe30pKX0pLGE9ZnVuY3Rpb24odCl7bih0LGUse3ZhbHVlOntpOlwiT1wiKyArK2ksdzp7fX19KX0scz10LmV4cG9ydHM9e0tFWTplLE5FRUQ6ITEsZmFzdEtleTpmdW5jdGlvbih0LG4pe2lmKCFVdCh0KSlyZXR1cm5cInN5bWJvbFwiPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpP3Q6KFwic3RyaW5nXCI9PXR5cGVvZiB0P1wiU1wiOlwiUFwiKSt0O2lmKCFyZSh0LGUpKXtpZighbyh0KSlyZXR1cm5cIkZcIjtpZighbilyZXR1cm5cIkVcIjthKHQpfXJldHVybiB0W2VdLml9LGdldFdlYWs6ZnVuY3Rpb24odCxuKXtpZighcmUodCxlKSl7aWYoIW8odCkpcmV0dXJuITA7aWYoIW4pcmV0dXJuITE7YSh0KX1yZXR1cm4gdFtlXS53fSxvbkZyZWV6ZTpmdW5jdGlvbih0KXtyZXR1cm4gciYmcy5ORUVEJiZvKHQpJiYhcmUodCxlKSYmYSh0KSx0fX19KSxGbj0oUm4uS0VZLFJuLk5FRUQsUm4uZmFzdEtleSxSbi5nZXRXZWFrLFJuLm9uRnJlZXplLGZ1bmN0aW9uKHQsZSl7aWYoIVV0KHQpfHx0Ll90IT09ZSl0aHJvdyBUeXBlRXJyb3IoXCJJbmNvbXBhdGlibGUgcmVjZWl2ZXIsIFwiK2UrXCIgcmVxdWlyZWQhXCIpO3JldHVybiB0fSkscW49ZWUuZix6bj1Sbi5mYXN0S2V5LFZuPUd0P1wiX3NcIjpcInNpemVcIixXbj1mdW5jdGlvbih0LGUpe3ZhciBuLGk9em4oZSk7aWYoXCJGXCIhPT1pKXJldHVybiB0Ll9pW2ldO2ZvcihuPXQuX2Y7bjtuPW4ubilpZihuLms9PWUpcmV0dXJuIG59LFVuPXtnZXRDb25zdHJ1Y3RvcjpmdW5jdGlvbih0LGUsbixpKXt2YXIgbz10KGZ1bmN0aW9uKHQscil7VG4odCxvLGUsXCJfaVwiKSx0Ll90PWUsdC5faT1RZShudWxsKSx0Ll9mPXZvaWQgMCx0Ll9sPXZvaWQgMCx0W1ZuXT0wLHZvaWQgMCE9ciYmam4ocixuLHRbaV0sdCl9KTtyZXR1cm4geG4oby5wcm90b3R5cGUse2NsZWFyOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PUZuKHRoaXMsZSksbj10Ll9pLGk9dC5fZjtpO2k9aS5uKWkucj0hMCxpLnAmJihpLnA9aS5wLm49dm9pZCAwKSxkZWxldGUgbltpLmldO3QuX2Y9dC5fbD12b2lkIDAsdFtWbl09MH0sZGVsZXRlOmZ1bmN0aW9uKHQpe3ZhciBuPUZuKHRoaXMsZSksaT1XbihuLHQpO2lmKGkpe3ZhciBvPWkubixyPWkucDtkZWxldGUgbi5faVtpLmldLGkucj0hMCxyJiYoci5uPW8pLG8mJihvLnA9ciksbi5fZj09aSYmKG4uX2Y9byksbi5fbD09aSYmKG4uX2w9ciksbltWbl0tLX1yZXR1cm4hIWl9LGZvckVhY2g6ZnVuY3Rpb24odCl7Rm4odGhpcyxlKTtmb3IodmFyIG4saT1oZSh0LGFyZ3VtZW50cy5sZW5ndGg+MT9hcmd1bWVudHNbMV06dm9pZCAwLDMpO249bj9uLm46dGhpcy5fZjspZm9yKGkobi52LG4uayx0aGlzKTtuJiZuLnI7KW49bi5wfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuISFXbihGbih0aGlzLGUpLHQpfX0pLEd0JiZxbihvLnByb3RvdHlwZSxcInNpemVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEZuKHRoaXMsZSlbVm5dfX0pLG99LGRlZjpmdW5jdGlvbih0LGUsbil7dmFyIGksbyxyPVduKHQsZSk7cmV0dXJuIHI/ci52PW46KHQuX2w9cj17aTpvPXpuKGUsITApLGs6ZSx2Om4scDppPXQuX2wsbjp2b2lkIDAscjohMX0sdC5fZnx8KHQuX2Y9ciksaSYmKGkubj1yKSx0W1ZuXSsrLFwiRlwiIT09byYmKHQuX2lbb109cikpLHR9LGdldEVudHJ5OlduLHNldFN0cm9uZzpmdW5jdGlvbih0LGUsbil7aG4odCxlLGZ1bmN0aW9uKHQsbil7dGhpcy5fdD1Gbih0LGUpLHRoaXMuX2s9bix0aGlzLl9sPXZvaWQgMH0sZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5fayxlPXRoaXMuX2w7ZSYmZS5yOyllPWUucDtyZXR1cm4gdGhpcy5fdCYmKHRoaXMuX2w9ZT1lP2Uubjp0aGlzLl90Ll9mKT9cImtleXNcIj09dD9tbigwLGUuayk6XCJ2YWx1ZXNcIj09dD9tbigwLGUudik6bW4oMCxbZS5rLGUudl0pOih0aGlzLl90PXZvaWQgMCxtbigxKSl9LG4/XCJlbnRyaWVzXCI6XCJ2YWx1ZXNcIiwhbiwhMCksZnVuY3Rpb24odCl7dmFyIGU9VnRbdF07R3QmJmUmJiFlW0huXSYmZWUuZihlLEhuLHtjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9fSl9KGUpfX0sWG49U2UoXCJpdGVyYXRvclwiKSxZbj0hMTt0cnl7WzddW1huXSgpLnJldHVybj1mdW5jdGlvbigpe1luPSEwfX1jYXRjaCh0KXt9dmFyIEduPWZ1bmN0aW9uKHQsZSl7aWYoIWUmJiFZbilyZXR1cm4hMTt2YXIgbj0hMTt0cnl7dmFyIGk9WzddLG89aVtYbl0oKTtvLm5leHQ9ZnVuY3Rpb24oKXtyZXR1cm57ZG9uZTpuPSEwfX0saVtYbl09ZnVuY3Rpb24oKXtyZXR1cm4gb30sdChpKX1jYXRjaCh0KXt9cmV0dXJuIG59LCRuPUVlLnNldCxLbj1mdW5jdGlvbih0LGUsbixpLG8scil7dmFyIGE9VnRbdF0scz1hLGw9bz9cInNldFwiOlwiYWRkXCIsdT1zJiZzLnByb3RvdHlwZSxjPXt9LGg9ZnVuY3Rpb24odCl7dmFyIGU9dVt0XTt1ZSh1LHQsXCJkZWxldGVcIj09dD9mdW5jdGlvbih0KXtyZXR1cm4hKHImJiFVdCh0KSkmJmUuY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiaGFzXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIShyJiYhVXQodCkpJiZlLmNhbGwodGhpcywwPT09dD8wOnQpfTpcImdldFwiPT10P2Z1bmN0aW9uKHQpe3JldHVybiByJiYhVXQodCk/dm9pZCAwOmUuY2FsbCh0aGlzLDA9PT10PzA6dCl9OlwiYWRkXCI9PXQ/ZnVuY3Rpb24odCl7cmV0dXJuIGUuY2FsbCh0aGlzLDA9PT10PzA6dCksdGhpc306ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5jYWxsKHRoaXMsMD09PXQ/MDp0LG4pLHRoaXN9KX07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgcyYmKHJ8fHUuZm9yRWFjaCYmIVl0KGZ1bmN0aW9uKCl7KG5ldyBzKS5lbnRyaWVzKCkubmV4dCgpfSkpKXt2YXIgZD1uZXcgcyxmPWRbbF0ocj97fTotMCwxKSE9ZCxwPVl0KGZ1bmN0aW9uKCl7ZC5oYXMoMSl9KSxnPUduKGZ1bmN0aW9uKHQpe25ldyBzKHQpfSksbT0hciYmWXQoZnVuY3Rpb24oKXtmb3IodmFyIHQ9bmV3IHMsZT01O2UtLTspdFtsXShlLGUpO3JldHVybiF0LmhhcygtMCl9KTtnfHwoKHM9ZShmdW5jdGlvbihlLG4pe1RuKGUscyx0KTt2YXIgaT1mdW5jdGlvbih0LGUsbil7dmFyIGksbz1lLmNvbnN0cnVjdG9yO3JldHVybiBvIT09biYmXCJmdW5jdGlvblwiPT10eXBlb2YgbyYmKGk9by5wcm90b3R5cGUpIT09bi5wcm90b3R5cGUmJlV0KGkpJiYkbiYmJG4odCxpKSx0fShuZXcgYSxlLHMpO3JldHVybiB2b2lkIDAhPW4mJmpuKG4sbyxpW2xdLGkpLGl9KSkucHJvdG90eXBlPXUsdS5jb25zdHJ1Y3Rvcj1zKSwocHx8bSkmJihoKFwiZGVsZXRlXCIpLGgoXCJoYXNcIiksbyYmaChcImdldFwiKSksKG18fGYpJiZoKGwpLHImJnUuY2xlYXImJmRlbGV0ZSB1LmNsZWFyfWVsc2Ugcz1pLmdldENvbnN0cnVjdG9yKGUsdCxvLGwpLHhuKHMucHJvdG90eXBlLG4pLFJuLk5FRUQ9ITA7cmV0dXJuIHRuKHMsdCksY1t0XT1zLGZlKGZlLkcrZmUuVytmZS5GKihzIT1hKSxjKSxyfHxpLnNldFN0cm9uZyhzLHQsbyksc30sUW49KEtuKFwiU2V0XCIsZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSx7YWRkOmZ1bmN0aW9uKHQpe3JldHVybiBVbi5kZWYoRm4odGhpcyxcIlNldFwiKSx0PTA9PT10PzA6dCx0KX19LFVuKSxmdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oKXtpZih4ZSh0aGlzKSE9dCl0aHJvdyBUeXBlRXJyb3IodCtcIiN0b0pTT04gaXNuJ3QgZ2VuZXJpY1wiKTtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgbj1bXTtyZXR1cm4gam4odCwhMSxuLnB1c2gsbixlKSxufSh0aGlzKX19KTtmZShmZS5QK2ZlLlIsXCJTZXRcIix7dG9KU09OOlFuKFwiU2V0XCIpfSk7dmFyIEpuPWZ1bmN0aW9uKHQpe2ZlKGZlLlMsdCx7b2Y6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpO3QtLTspZVt0XT1hcmd1bWVudHNbdF07cmV0dXJuIG5ldyB0aGlzKGUpfX0pfTtKbihcIlNldFwiKTt2YXIgWm49ZnVuY3Rpb24odCl7ZmUoZmUuUyx0LHtmcm9tOmZ1bmN0aW9uKHQpe3ZhciBlLG4saSxvLHI9YXJndW1lbnRzWzFdO3JldHVybiBjZSh0aGlzKSwoZT12b2lkIDAhPT1yKSYmY2Uociksdm9pZCAwPT10P25ldyB0aGlzOihuPVtdLGU/KGk9MCxvPWhlKHIsYXJndW1lbnRzWzJdLDIpLGpuKHQsITEsZnVuY3Rpb24odCl7bi5wdXNoKG8odCxpKyspKX0pKTpqbih0LCExLG4ucHVzaCxuKSxuZXcgdGhpcyhuKSl9fSl9O1puKFwiU2V0XCIpO1d0LlNldCxLbihcIk1hcFwiLGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0KHRoaXMsYXJndW1lbnRzLmxlbmd0aD4wP2FyZ3VtZW50c1swXTp2b2lkIDApfX0se2dldDpmdW5jdGlvbih0KXt2YXIgZT1Vbi5nZXRFbnRyeShGbih0aGlzLFwiTWFwXCIpLHQpO3JldHVybiBlJiZlLnZ9LHNldDpmdW5jdGlvbih0LGUpe3JldHVybiBVbi5kZWYoRm4odGhpcyxcIk1hcFwiKSwwPT09dD8wOnQsZSl9fSxVbiwhMCk7ZmUoZmUuUCtmZS5SLFwiTWFwXCIse3RvSlNPTjpRbihcIk1hcFwiKX0pLEpuKFwiTWFwXCIpLFpuKFwiTWFwXCIpO1d0Lk1hcDt2YXIgdGk9QXJyYXkuaXNBcnJheXx8ZnVuY3Rpb24odCl7cmV0dXJuXCJBcnJheVwiPT1tZSh0KX0sZWk9U2UoXCJzcGVjaWVzXCIpLG5pPWZ1bmN0aW9uKHQsZSl7dmFyIG49MT09dCxpPTI9PXQsbz0zPT10LHI9ND09dCxhPTY9PXQscz01PT10fHxhLGw9ZXx8ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3KGZ1bmN0aW9uKHQpe3ZhciBlO3JldHVybiB0aSh0KSYmKFwiZnVuY3Rpb25cIiE9dHlwZW9mKGU9dC5jb25zdHJ1Y3Rvcil8fGUhPT1BcnJheSYmIXRpKGUucHJvdG90eXBlKXx8KGU9dm9pZCAwKSxVdChlKSYmbnVsbD09PShlPWVbZWldKSYmKGU9dm9pZCAwKSksdm9pZCAwPT09ZT9BcnJheTplfSh0KSkoZSl9O3JldHVybiBmdW5jdGlvbihlLHUsYyl7Zm9yKHZhciBoLGQsZj1vbihlKSxwPV9lKGYpLGc9aGUodSxjLDMpLG09QmUocC5sZW5ndGgpLF89MCx2PW4/bChlLG0pOmk/bChlLDApOnZvaWQgMDttPl87XysrKWlmKChzfHxfIGluIHApJiYoaD1wW19dLGQ9ZyhoLF8sZiksdCkpaWYobil2W19dPWQ7ZWxzZSBpZihkKXN3aXRjaCh0KXtjYXNlIDM6cmV0dXJuITA7Y2FzZSA1OnJldHVybiBoO2Nhc2UgNjpyZXR1cm4gXztjYXNlIDI6di5wdXNoKGgpfWVsc2UgaWYocilyZXR1cm4hMTtyZXR1cm4gYT8tMTpvfHxyP3I6dn19LGlpPXtmOk9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHN9LG9pPU9iamVjdC5hc3NpZ24scmk9IW9pfHxZdChmdW5jdGlvbigpe3ZhciB0PXt9LGU9e30sbj1TeW1ib2woKSxpPVwiYWJjZGVmZ2hpamtsbW5vcHFyc3RcIjtyZXR1cm4gdFtuXT03LGkuc3BsaXQoXCJcIikuZm9yRWFjaChmdW5jdGlvbih0KXtlW3RdPXR9KSw3IT1vaSh7fSx0KVtuXXx8T2JqZWN0LmtleXMob2koe30sZSkpLmpvaW4oXCJcIikhPWl9KT9mdW5jdGlvbih0LGUpe2Zvcih2YXIgbj1vbih0KSxpPWFyZ3VtZW50cy5sZW5ndGgsbz0xLHI9aWkuZixhPXBlLmY7aT5vOylmb3IodmFyIHMsbD1fZShhcmd1bWVudHNbbysrXSksdT1yP1dlKGwpLmNvbmNhdChyKGwpKTpXZShsKSxjPXUubGVuZ3RoLGg9MDtjPmg7KWEuY2FsbChsLHM9dVtoKytdKSYmKG5bc109bFtzXSk7cmV0dXJuIG59Om9pLGFpPVJuLmdldFdlYWssc2k9bmkoNSksbGk9bmkoNiksdWk9MCxjaT1mdW5jdGlvbih0KXtyZXR1cm4gdC5fbHx8KHQuX2w9bmV3IGhpKX0saGk9ZnVuY3Rpb24oKXt0aGlzLmE9W119LGRpPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHNpKHQuYSxmdW5jdGlvbih0KXtyZXR1cm4gdFswXT09PWV9KX07aGkucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24odCl7dmFyIGU9ZGkodGhpcyx0KTtpZihlKXJldHVybiBlWzFdfSxoYXM6ZnVuY3Rpb24odCl7cmV0dXJuISFkaSh0aGlzLHQpfSxzZXQ6ZnVuY3Rpb24odCxlKXt2YXIgbj1kaSh0aGlzLHQpO24/blsxXT1lOnRoaXMuYS5wdXNoKFt0LGVdKX0sZGVsZXRlOmZ1bmN0aW9uKHQpe3ZhciBlPWxpKHRoaXMuYSxmdW5jdGlvbihlKXtyZXR1cm4gZVswXT09PXR9KTtyZXR1cm5+ZSYmdGhpcy5hLnNwbGljZShlLDEpLCEhfmV9fTt2YXIgZmk9e2dldENvbnN0cnVjdG9yOmZ1bmN0aW9uKHQsZSxuLGkpe3ZhciBvPXQoZnVuY3Rpb24odCxyKXtUbih0LG8sZSxcIl9pXCIpLHQuX3Q9ZSx0Ll9pPXVpKyssdC5fbD12b2lkIDAsdm9pZCAwIT1yJiZqbihyLG4sdFtpXSx0KX0pO3JldHVybiB4bihvLnByb3RvdHlwZSx7ZGVsZXRlOmZ1bmN0aW9uKHQpe2lmKCFVdCh0KSlyZXR1cm4hMTt2YXIgbj1haSh0KTtyZXR1cm4hMD09PW4/Y2koRm4odGhpcyxlKSkuZGVsZXRlKHQpOm4mJnJlKG4sdGhpcy5faSkmJmRlbGV0ZSBuW3RoaXMuX2ldfSxoYXM6ZnVuY3Rpb24odCl7aWYoIVV0KHQpKXJldHVybiExO3ZhciBuPWFpKHQpO3JldHVybiEwPT09bj9jaShGbih0aGlzLGUpKS5oYXModCk6biYmcmUobix0aGlzLl9pKX19KSxvfSxkZWY6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPWFpKFh0KGUpLCEwKTtyZXR1cm4hMD09PWk/Y2kodCkuc2V0KGUsbik6aVt0Ll9pXT1uLHR9LHVmc3RvcmU6Y2l9O28oZnVuY3Rpb24odCl7dmFyIGUsbj1uaSgwKSxpPVJuLmdldFdlYWssbz1PYmplY3QuaXNFeHRlbnNpYmxlLHI9ZmkudWZzdG9yZSxhPXt9LHM9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQodGhpcyxhcmd1bWVudHMubGVuZ3RoPjA/YXJndW1lbnRzWzBdOnZvaWQgMCl9fSxsPXtnZXQ6ZnVuY3Rpb24odCl7aWYoVXQodCkpe3ZhciBlPWkodCk7cmV0dXJuITA9PT1lP3IoRm4odGhpcyxcIldlYWtNYXBcIikpLmdldCh0KTplP2VbdGhpcy5faV06dm9pZCAwfX0sc2V0OmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGZpLmRlZihGbih0aGlzLFwiV2Vha01hcFwiKSx0LGUpfX0sdT10LmV4cG9ydHM9S24oXCJXZWFrTWFwXCIscyxsLGZpLCEwLCEwKTtZdChmdW5jdGlvbigpe3JldHVybiA3IT0obmV3IHUpLnNldCgoT2JqZWN0LmZyZWV6ZXx8T2JqZWN0KShhKSw3KS5nZXQoYSl9KSYmKGU9ZmkuZ2V0Q29uc3RydWN0b3IocyxcIldlYWtNYXBcIikscmkoZS5wcm90b3R5cGUsbCksUm4uTkVFRD0hMCxuKFtcImRlbGV0ZVwiLFwiaGFzXCIsXCJnZXRcIixcInNldFwiXSxmdW5jdGlvbih0KXt2YXIgbj11LnByb3RvdHlwZSxpPW5bdF07dWUobix0LGZ1bmN0aW9uKG4scil7aWYoVXQobikmJiFvKG4pKXt0aGlzLl9mfHwodGhpcy5fZj1uZXcgZSk7dmFyIGE9dGhpcy5fZlt0XShuLHIpO3JldHVyblwic2V0XCI9PXQ/dGhpczphfXJldHVybiBpLmNhbGwodGhpcyxuLHIpfSl9KSl9KTtKbihcIldlYWtNYXBcIiksWm4oXCJXZWFrTWFwXCIpO1d0LldlYWtNYXA7dmFyIHBpPWZ1bmN0aW9uKHQsZSxuKXtlIGluIHQ/ZWUuZih0LGUsbmUoMCxuKSk6dFtlXT1ufTtmZShmZS5TK2ZlLkYqIUduKGZ1bmN0aW9uKHQpe30pLFwiQXJyYXlcIix7ZnJvbTpmdW5jdGlvbih0KXt2YXIgZSxuLGksbyxyPW9uKHQpLGE9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcz90aGlzOkFycmF5LHM9YXJndW1lbnRzLmxlbmd0aCxsPXM+MT9hcmd1bWVudHNbMV06dm9pZCAwLHU9dm9pZCAwIT09bCxjPTAsaD1CbihyKTtpZih1JiYobD1oZShsLHM+Mj9hcmd1bWVudHNbMl06dm9pZCAwLDIpKSx2b2lkIDA9PWh8fGE9PUFycmF5JiZJbihoKSlmb3Iobj1uZXcgYShlPUJlKHIubGVuZ3RoKSk7ZT5jO2MrKylwaShuLGMsdT9sKHJbY10sYyk6cltjXSk7ZWxzZSBmb3Iobz1oLmNhbGwociksbj1uZXcgYTshKGk9by5uZXh0KCkpLmRvbmU7YysrKXBpKG4sYyx1P0xuKG8sbCxbaS52YWx1ZSxjXSwhMCk6aS52YWx1ZSk7cmV0dXJuIG4ubGVuZ3RoPWMsbn19KTtXdC5BcnJheS5mcm9tO3ZhciBnaT1uZXcgU2V0KFtcImFubm90YXRpb24teG1sXCIsXCJjb2xvci1wcm9maWxlXCIsXCJmb250LWZhY2VcIixcImZvbnQtZmFjZS1zcmNcIixcImZvbnQtZmFjZS11cmlcIixcImZvbnQtZmFjZS1mb3JtYXRcIixcImZvbnQtZmFjZS1uYW1lXCIsXCJtaXNzaW5nLWdseXBoXCJdKSxtaT17Y3VzdG9tOjEsZmFpbGVkOjJ9LF9pPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3AodGhpcyx0KSx0aGlzLl9sb2NhbE5hbWVUb0RlZmluaXRpb249bmV3IE1hcCx0aGlzLl9jb25zdHJ1Y3RvclRvRGVmaW5pdGlvbj1uZXcgTWFwLHRoaXMuX3BhdGNoZXM9W10sdGhpcy5faGFzUGF0Y2hlcz0hMX1yZXR1cm4gZyh0LFt7a2V5Olwic2V0RGVmaW5pdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fbG9jYWxOYW1lVG9EZWZpbml0aW9uLnNldCh0LGUpLHRoaXMuX2NvbnN0cnVjdG9yVG9EZWZpbml0aW9uLnNldChlLmNvbnN0cnVjdG9yLGUpfX0se2tleTpcImxvY2FsTmFtZVRvRGVmaW5pdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9sb2NhbE5hbWVUb0RlZmluaXRpb24uZ2V0KHQpfX0se2tleTpcImNvbnN0cnVjdG9yVG9EZWZpbml0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbnN0cnVjdG9yVG9EZWZpbml0aW9uLmdldCh0KX19LHtrZXk6XCJhZGRQYXRjaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2hhc1BhdGNoZXM9ITAsdGhpcy5fcGF0Y2hlcy5wdXNoKHQpfX0se2tleTpcInBhdGNoVHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faGFzUGF0Y2hlcyYmbCh0LGZ1bmN0aW9uKHQpe3JldHVybiBlLnBhdGNoKHQpfSl9fSx7a2V5OlwicGF0Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9oYXNQYXRjaGVzJiYhdC5fX0NFX3BhdGNoZWQpe3QuX19DRV9wYXRjaGVkPSEwO2Zvcih2YXIgZT0wO2U8dGhpcy5fcGF0Y2hlcy5sZW5ndGg7ZSsrKXRoaXMuX3BhdGNoZXNbZV0odCl9fX0se2tleTpcImNvbm5lY3RUcmVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9W107bCh0LGZ1bmN0aW9uKHQpe3JldHVybiBlLnB1c2godCl9KTtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9ZVtuXTtpLl9fQ0Vfc3RhdGU9PT1taS5jdXN0b20/YShpKSYmdGhpcy5jb25uZWN0ZWRDYWxsYmFjayhpKTp0aGlzLnVwZ3JhZGVFbGVtZW50KGkpfX19LHtrZXk6XCJkaXNjb25uZWN0VHJlZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPVtdO2wodCxmdW5jdGlvbih0KXtyZXR1cm4gZS5wdXNoKHQpfSk7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBpPWVbbl07aS5fX0NFX3N0YXRlPT09bWkuY3VzdG9tJiZ0aGlzLmRpc2Nvbm5lY3RlZENhbGxiYWNrKGkpfX19LHtrZXk6XCJwYXRjaEFuZFVwZ3JhZGVUcmVlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpuZXcgU2V0LGk9W107aWYobCh0LGZ1bmN0aW9uKHQpe2lmKFwibGlua1wiPT09dC5sb2NhbE5hbWUmJlwiaW1wb3J0XCI9PT10LmdldEF0dHJpYnV0ZShcInJlbFwiKSl7dmFyIG89dC5pbXBvcnQ7byBpbnN0YW5jZW9mIE5vZGUmJlwiY29tcGxldGVcIj09PW8ucmVhZHlTdGF0ZT8oby5fX0NFX2lzSW1wb3J0RG9jdW1lbnQ9ITAsby5fX0NFX2hhc1JlZ2lzdHJ5PSEwKTp0LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXt2YXIgaT10LmltcG9ydDtpLl9fQ0VfZG9jdW1lbnRMb2FkSGFuZGxlZHx8KGkuX19DRV9kb2N1bWVudExvYWRIYW5kbGVkPSEwLGkuX19DRV9pc0ltcG9ydERvY3VtZW50PSEwLGkuX19DRV9oYXNSZWdpc3RyeT0hMCxuLmRlbGV0ZShpKSxlLnBhdGNoQW5kVXBncmFkZVRyZWUoaSxuKSl9KX1lbHNlIGkucHVzaCh0KX0sbiksdGhpcy5faGFzUGF0Y2hlcylmb3IodmFyIG89MDtvPGkubGVuZ3RoO28rKyl0aGlzLnBhdGNoKGlbb10pO2Zvcih2YXIgcj0wO3I8aS5sZW5ndGg7cisrKXRoaXMudXBncmFkZUVsZW1lbnQoaVtyXSl9fSx7a2V5OlwidXBncmFkZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih2b2lkIDA9PT10Ll9fQ0Vfc3RhdGUpe3ZhciBlPXRoaXMubG9jYWxOYW1lVG9EZWZpbml0aW9uKHQubG9jYWxOYW1lKTtpZihlKXtlLmNvbnN0cnVjdGlvblN0YWNrLnB1c2godCk7dmFyIG49ZS5jb25zdHJ1Y3Rvcjt0cnl7dHJ5e2lmKG5ldyBuIT09dCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgY3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3IgZGlkIG5vdCBwcm9kdWNlIHRoZSBlbGVtZW50IGJlaW5nIHVwZ3JhZGVkLlwiKX1maW5hbGx5e2UuY29uc3RydWN0aW9uU3RhY2sucG9wKCl9fWNhdGNoKGUpe3Rocm93IHQuX19DRV9zdGF0ZT1taS5mYWlsZWQsZX1pZih0Ll9fQ0Vfc3RhdGU9bWkuY3VzdG9tLHQuX19DRV9kZWZpbml0aW9uPWUsZS5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2spZm9yKHZhciBpPWUub2JzZXJ2ZWRBdHRyaWJ1dGVzLG89MDtvPGkubGVuZ3RoO28rKyl7dmFyIHI9aVtvXSxzPXQuZ2V0QXR0cmlidXRlKHIpO251bGwhPT1zJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0LHIsbnVsbCxzLG51bGwpfWEodCkmJnRoaXMuY29ubmVjdGVkQ2FsbGJhY2sodCl9fX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX19DRV9kZWZpbml0aW9uO2UuY29ubmVjdGVkQ2FsbGJhY2smJmUuY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0KSx0Ll9fQ0VfaXNDb25uZWN0ZWRDYWxsYmFja0NhbGxlZD0hMH19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuX19DRV9pc0Nvbm5lY3RlZENhbGxiYWNrQ2FsbGVkfHx0aGlzLmNvbm5lY3RlZENhbGxiYWNrKHQpO3ZhciBlPXQuX19DRV9kZWZpbml0aW9uO2UuZGlzY29ubmVjdGVkQ2FsbGJhY2smJmUuZGlzY29ubmVjdGVkQ2FsbGJhY2suY2FsbCh0KSx0Ll9fQ0VfaXNDb25uZWN0ZWRDYWxsYmFja0NhbGxlZD12b2lkIDB9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4saSxvKXt2YXIgcj10Ll9fQ0VfZGVmaW5pdGlvbjtyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayYmci5vYnNlcnZlZEF0dHJpYnV0ZXMuaW5kZXhPZihlKT4tMSYmci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2suY2FsbCh0LGUsbixpLG8pfX1dKSx0fSgpLHZpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSx0aGlzLl9pbnRlcm5hbHM9ZSx0aGlzLl9kb2N1bWVudD1uLHRoaXMuX29ic2VydmVyPXZvaWQgMCx0aGlzLl9pbnRlcm5hbHMucGF0Y2hBbmRVcGdyYWRlVHJlZSh0aGlzLl9kb2N1bWVudCksXCJsb2FkaW5nXCI9PT10aGlzLl9kb2N1bWVudC5yZWFkeVN0YXRlJiYodGhpcy5fb2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5faGFuZGxlTXV0YXRpb25zLmJpbmQodGhpcykpLHRoaXMuX29ic2VydmVyLm9ic2VydmUodGhpcy5fZG9jdW1lbnQse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSkpfXJldHVybiBnKHQsW3trZXk6XCJkaXNjb25uZWN0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vYnNlcnZlciYmdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpfX0se2tleTpcIl9oYW5kbGVNdXRhdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kb2N1bWVudC5yZWFkeVN0YXRlO1wiaW50ZXJhY3RpdmVcIiE9PWUmJlwiY29tcGxldGVcIiE9PWV8fHRoaXMuZGlzY29ubmVjdCgpO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7bisrKWZvcih2YXIgaT10W25dLmFkZGVkTm9kZXMsbz0wO288aS5sZW5ndGg7bysrKXt2YXIgcj1pW29dO3RoaXMuX2ludGVybmFscy5wYXRjaEFuZFVwZ3JhZGVUcmVlKHIpfX19XSksdH0oKSxiaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT10aGlzO3AodGhpcyx0KSx0aGlzLl92YWx1ZT12b2lkIDAsdGhpcy5fcmVzb2x2ZT12b2lkIDAsdGhpcy5fcHJvbWlzZT1uZXcgUHJvbWlzZShmdW5jdGlvbih0KXtlLl9yZXNvbHZlPXQsZS5fdmFsdWUmJnQoZS5fdmFsdWUpfSl9cmV0dXJuIGcodCxbe2tleTpcInJlc29sdmVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl92YWx1ZSl0aHJvdyBuZXcgRXJyb3IoXCJBbHJlYWR5IHJlc29sdmVkLlwiKTt0aGlzLl92YWx1ZT10LHRoaXMuX3Jlc29sdmUmJnRoaXMuX3Jlc29sdmUodCl9fSx7a2V5OlwidG9Qcm9taXNlXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHJvbWlzZX19XSksdH0oKSx5aT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7cCh0aGlzLHQpLHRoaXMuX2VsZW1lbnREZWZpbml0aW9uSXNSdW5uaW5nPSExLHRoaXMuX2ludGVybmFscz1lLHRoaXMuX3doZW5EZWZpbmVkRGVmZXJyZWQ9bmV3IE1hcCx0aGlzLl9mbHVzaENhbGxiYWNrPWZ1bmN0aW9uKHQpe3JldHVybiB0KCl9LHRoaXMuX2ZsdXNoUGVuZGluZz0hMSx0aGlzLl91bmZsdXNoZWRMb2NhbE5hbWVzPVtdLHRoaXMuX2RvY3VtZW50Q29uc3RydWN0aW9uT2JzZXJ2ZXI9bmV3IHZpKGUsZG9jdW1lbnQpfXJldHVybiBnKHQsW3trZXk6XCJkZWZpbmVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7aWYoIShlIGluc3RhbmNlb2YgRnVuY3Rpb24pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDdXN0b20gZWxlbWVudCBjb25zdHJ1Y3RvcnMgbXVzdCBiZSBmdW5jdGlvbnMuXCIpO2lmKCFyKHQpKXRocm93IG5ldyBTeW50YXhFcnJvcihcIlRoZSBlbGVtZW50IG5hbWUgJ1wiK3QrXCInIGlzIG5vdCB2YWxpZC5cIik7aWYodGhpcy5faW50ZXJuYWxzLmxvY2FsTmFtZVRvRGVmaW5pdGlvbih0KSl0aHJvdyBuZXcgRXJyb3IoXCJBIGN1c3RvbSBlbGVtZW50IHdpdGggbmFtZSAnXCIrdCtcIicgaGFzIGFscmVhZHkgYmVlbiBkZWZpbmVkLlwiKTtpZih0aGlzLl9lbGVtZW50RGVmaW5pdGlvbklzUnVubmluZyl0aHJvdyBuZXcgRXJyb3IoXCJBIGN1c3RvbSBlbGVtZW50IGlzIGFscmVhZHkgYmVpbmcgZGVmaW5lZC5cIik7dGhpcy5fZWxlbWVudERlZmluaXRpb25Jc1J1bm5pbmc9ITA7dmFyIGk9dm9pZCAwLG89dm9pZCAwLGE9dm9pZCAwLHM9dm9pZCAwLGw9dm9pZCAwO3RyeXt2YXIgdT1mdW5jdGlvbih0KXt2YXIgZT1jW3RdO2lmKHZvaWQgMCE9PWUmJiEoZSBpbnN0YW5jZW9mIEZ1bmN0aW9uKSl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgJ1wiK3QrXCInIGNhbGxiYWNrIG11c3QgYmUgYSBmdW5jdGlvbi5cIik7cmV0dXJuIGV9LGM9ZS5wcm90b3R5cGU7aWYoIShjIGluc3RhbmNlb2YgT2JqZWN0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGN1c3RvbSBlbGVtZW50IGNvbnN0cnVjdG9yJ3MgcHJvdG90eXBlIGlzIG5vdCBhbiBvYmplY3QuXCIpO2k9dShcImNvbm5lY3RlZENhbGxiYWNrXCIpLG89dShcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIpLGE9dShcImFkb3B0ZWRDYWxsYmFja1wiKSxzPXUoXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIiksbD1lLm9ic2VydmVkQXR0cmlidXRlc3x8W119Y2F0Y2godCl7cmV0dXJufWZpbmFsbHl7dGhpcy5fZWxlbWVudERlZmluaXRpb25Jc1J1bm5pbmc9ITF9dmFyIGg9e2xvY2FsTmFtZTp0LGNvbnN0cnVjdG9yOmUsY29ubmVjdGVkQ2FsbGJhY2s6aSxkaXNjb25uZWN0ZWRDYWxsYmFjazpvLGFkb3B0ZWRDYWxsYmFjazphLGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjazpzLG9ic2VydmVkQXR0cmlidXRlczpsLGNvbnN0cnVjdGlvblN0YWNrOltdfTt0aGlzLl9pbnRlcm5hbHMuc2V0RGVmaW5pdGlvbih0LGgpLHRoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMucHVzaCh0KSx0aGlzLl9mbHVzaFBlbmRpbmd8fCh0aGlzLl9mbHVzaFBlbmRpbmc9ITAsdGhpcy5fZmx1c2hDYWxsYmFjayhmdW5jdGlvbigpe3JldHVybiBuLl9mbHVzaCgpfSkpfX0se2tleTpcIl9mbHVzaFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoITEhPT10aGlzLl9mbHVzaFBlbmRpbmcpZm9yKHRoaXMuX2ZsdXNoUGVuZGluZz0hMSx0aGlzLl9pbnRlcm5hbHMucGF0Y2hBbmRVcGdyYWRlVHJlZShkb2N1bWVudCk7dGhpcy5fdW5mbHVzaGVkTG9jYWxOYW1lcy5sZW5ndGg+MDspe3ZhciB0PXRoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMuc2hpZnQoKSxlPXRoaXMuX3doZW5EZWZpbmVkRGVmZXJyZWQuZ2V0KHQpO2UmJmUucmVzb2x2ZSh2b2lkIDApfX19LHtrZXk6XCJnZXRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9pbnRlcm5hbHMubG9jYWxOYW1lVG9EZWZpbml0aW9uKHQpO2lmKGUpcmV0dXJuIGUuY29uc3RydWN0b3J9fSx7a2V5Olwid2hlbkRlZmluZWRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZighcih0KSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFN5bnRheEVycm9yKFwiJ1wiK3QrXCInIGlzIG5vdCBhIHZhbGlkIGN1c3RvbSBlbGVtZW50IG5hbWUuXCIpKTt2YXIgZT10aGlzLl93aGVuRGVmaW5lZERlZmVycmVkLmdldCh0KTtpZihlKXJldHVybiBlLnRvUHJvbWlzZSgpO3ZhciBuPW5ldyBiaTt0aGlzLl93aGVuRGVmaW5lZERlZmVycmVkLnNldCh0LG4pO3JldHVybiB0aGlzLl9pbnRlcm5hbHMubG9jYWxOYW1lVG9EZWZpbml0aW9uKHQpJiYtMT09PXRoaXMuX3VuZmx1c2hlZExvY2FsTmFtZXMuaW5kZXhPZih0KSYmbi5yZXNvbHZlKHZvaWQgMCksbi50b1Byb21pc2UoKX19LHtrZXk6XCJwb2x5ZmlsbFdyYXBGbHVzaENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fZG9jdW1lbnRDb25zdHJ1Y3Rpb25PYnNlcnZlci5kaXNjb25uZWN0KCk7dmFyIGU9dGhpcy5fZmx1c2hDYWxsYmFjazt0aGlzLl9mbHVzaENhbGxiYWNrPWZ1bmN0aW9uKG4pe3JldHVybiB0KGZ1bmN0aW9uKCl7cmV0dXJuIGUobil9KX19fV0pLHR9KCk7d2luZG93LkN1c3RvbUVsZW1lbnRSZWdpc3RyeT15aSx5aS5wcm90b3R5cGUuZGVmaW5lPXlpLnByb3RvdHlwZS5kZWZpbmUseWkucHJvdG90eXBlLmdldD15aS5wcm90b3R5cGUuZ2V0LHlpLnByb3RvdHlwZS53aGVuRGVmaW5lZD15aS5wcm90b3R5cGUud2hlbkRlZmluZWQseWkucHJvdG90eXBlLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2s9eWkucHJvdG90eXBlLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2s7dmFyIGtpPXtEb2N1bWVudF9jcmVhdGVFbGVtZW50OndpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuY3JlYXRlRWxlbWVudCxEb2N1bWVudF9jcmVhdGVFbGVtZW50TlM6d2luZG93LkRvY3VtZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50TlMsRG9jdW1lbnRfaW1wb3J0Tm9kZTp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLmltcG9ydE5vZGUsRG9jdW1lbnRfcHJlcGVuZDp3aW5kb3cuRG9jdW1lbnQucHJvdG90eXBlLnByZXBlbmQsRG9jdW1lbnRfYXBwZW5kOndpbmRvdy5Eb2N1bWVudC5wcm90b3R5cGUuYXBwZW5kLE5vZGVfY2xvbmVOb2RlOndpbmRvdy5Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGUsTm9kZV9hcHBlbmRDaGlsZDp3aW5kb3cuTm9kZS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQsTm9kZV9pbnNlcnRCZWZvcmU6d2luZG93Lk5vZGUucHJvdG90eXBlLmluc2VydEJlZm9yZSxOb2RlX3JlbW92ZUNoaWxkOndpbmRvdy5Ob2RlLnByb3RvdHlwZS5yZW1vdmVDaGlsZCxOb2RlX3JlcGxhY2VDaGlsZDp3aW5kb3cuTm9kZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkLE5vZGVfdGV4dENvbnRlbnQ6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuTm9kZS5wcm90b3R5cGUsXCJ0ZXh0Q29udGVudFwiKSxFbGVtZW50X2F0dGFjaFNoYWRvdzp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUuYXR0YWNoU2hhZG93LEVsZW1lbnRfaW5uZXJIVE1MOk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iod2luZG93LkVsZW1lbnQucHJvdG90eXBlLFwiaW5uZXJIVE1MXCIpLEVsZW1lbnRfZ2V0QXR0cmlidXRlOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5nZXRBdHRyaWJ1dGUsRWxlbWVudF9zZXRBdHRyaWJ1dGU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZSxFbGVtZW50X3JlbW92ZUF0dHJpYnV0ZTp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlQXR0cmlidXRlLEVsZW1lbnRfZ2V0QXR0cmlidXRlTlM6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmdldEF0dHJpYnV0ZU5TLEVsZW1lbnRfc2V0QXR0cmlidXRlTlM6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnNldEF0dHJpYnV0ZU5TLEVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlTlM6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZU5TLEVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50OndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5pbnNlcnRBZGphY2VudEVsZW1lbnQsRWxlbWVudF9wcmVwZW5kOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5wcmVwZW5kLEVsZW1lbnRfYXBwZW5kOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5hcHBlbmQsRWxlbWVudF9iZWZvcmU6d2luZG93LkVsZW1lbnQucHJvdG90eXBlLmJlZm9yZSxFbGVtZW50X2FmdGVyOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5hZnRlcixFbGVtZW50X3JlcGxhY2VXaXRoOndpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZXBsYWNlV2l0aCxFbGVtZW50X3JlbW92ZTp3aW5kb3cuRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlLEhUTUxFbGVtZW50OndpbmRvdy5IVE1MRWxlbWVudCxIVE1MRWxlbWVudF9pbm5lckhUTUw6T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuSFRNTEVsZW1lbnQucHJvdG90eXBlLFwiaW5uZXJIVE1MXCIpLEhUTUxFbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudDp3aW5kb3cuSFRNTEVsZW1lbnQucHJvdG90eXBlLmluc2VydEFkamFjZW50RWxlbWVudH0sd2k9bmV3IGZ1bmN0aW9uIHQoKXtwKHRoaXMsdCl9LEVpPWZ1bmN0aW9uKHQsZSxuKXtlLnByZXBlbmQ9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pO24ucHJlcGVuZC5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19LGUuYXBwZW5kPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShlKSxvPTA7bzxlO28rKylpW29dPWFyZ3VtZW50c1tvXTt2YXIgcj1pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIE5vZGUmJmEodCl9KTtuLmFwcGVuZC5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19fSxDaT13aW5kb3cuY3VzdG9tRWxlbWVudHM7aWYoIUNpfHxDaS5mb3JjZVBvbHlmaWxsfHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBDaS5kZWZpbmV8fFwiZnVuY3Rpb25cIiE9dHlwZW9mIENpLmdldCl7dmFyIEFpPW5ldyBfaTshZnVuY3Rpb24odCl7d2luZG93LkhUTUxFbGVtZW50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXRoaXMuY29uc3RydWN0b3Isbj10LmNvbnN0cnVjdG9yVG9EZWZpbml0aW9uKGUpO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIlRoZSBjdXN0b20gZWxlbWVudCBiZWluZyBjb25zdHJ1Y3RlZCB3YXMgbm90IHJlZ2lzdGVyZWQgd2l0aCBgY3VzdG9tRWxlbWVudHNgLlwiKTt2YXIgaT1uLmNvbnN0cnVjdGlvblN0YWNrO2lmKDA9PT1pLmxlbmd0aCl7dmFyIG89a2kuRG9jdW1lbnRfY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LG4ubG9jYWxOYW1lKTtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mKG8sZS5wcm90b3R5cGUpLG8uX19DRV9zdGF0ZT1taS5jdXN0b20sby5fX0NFX2RlZmluaXRpb249bix0LnBhdGNoKG8pLG99dmFyIHI9aS5sZW5ndGgtMSxhPWlbcl07aWYoYT09PXdpKXRocm93IG5ldyBFcnJvcihcIlRoZSBIVE1MRWxlbWVudCBjb25zdHJ1Y3RvciB3YXMgZWl0aGVyIGNhbGxlZCByZWVudHJhbnRseSBmb3IgdGhpcyBjb25zdHJ1Y3RvciBvciBjYWxsZWQgbXVsdGlwbGUgdGltZXMuXCIpO3JldHVybiBpW3JdPXdpLE9iamVjdC5zZXRQcm90b3R5cGVPZihhLGUucHJvdG90eXBlKSx0LnBhdGNoKGEpLGF9cmV0dXJuIGUucHJvdG90eXBlPWtpLkhUTUxFbGVtZW50LnByb3RvdHlwZSxlfSgpfShBaSksZnVuY3Rpb24odCl7dShEb2N1bWVudC5wcm90b3R5cGUsXCJjcmVhdGVFbGVtZW50XCIsZnVuY3Rpb24oZSl7aWYodGhpcy5fX0NFX2hhc1JlZ2lzdHJ5KXt2YXIgbj10LmxvY2FsTmFtZVRvRGVmaW5pdGlvbihlKTtpZihuKXJldHVybiBuZXcgbi5jb25zdHJ1Y3Rvcn12YXIgaT1raS5Eb2N1bWVudF9jcmVhdGVFbGVtZW50LmNhbGwodGhpcyxlKTtyZXR1cm4gdC5wYXRjaChpKSxpfSksdShEb2N1bWVudC5wcm90b3R5cGUsXCJpbXBvcnROb2RlXCIsZnVuY3Rpb24oZSxuKXt2YXIgaT1raS5Eb2N1bWVudF9pbXBvcnROb2RlLmNhbGwodGhpcyxlLG4pO3JldHVybiB0aGlzLl9fQ0VfaGFzUmVnaXN0cnk/dC5wYXRjaEFuZFVwZ3JhZGVUcmVlKGkpOnQucGF0Y2hUcmVlKGkpLGl9KTt1KERvY3VtZW50LnByb3RvdHlwZSxcImNyZWF0ZUVsZW1lbnROU1wiLGZ1bmN0aW9uKGUsbil7aWYodGhpcy5fX0NFX2hhc1JlZ2lzdHJ5JiYobnVsbD09PWV8fFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiPT09ZSkpe3ZhciBpPXQubG9jYWxOYW1lVG9EZWZpbml0aW9uKG4pO2lmKGkpcmV0dXJuIG5ldyBpLmNvbnN0cnVjdG9yfXZhciBvPWtpLkRvY3VtZW50X2NyZWF0ZUVsZW1lbnROUy5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gdC5wYXRjaChvKSxvfSksRWkodCxEb2N1bWVudC5wcm90b3R5cGUse3ByZXBlbmQ6a2kuRG9jdW1lbnRfcHJlcGVuZCxhcHBlbmQ6a2kuRG9jdW1lbnRfYXBwZW5kfSl9KEFpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJ0ZXh0Q29udGVudFwiLHtlbnVtZXJhYmxlOm4uZW51bWVyYWJsZSxjb25maWd1cmFibGU6ITAsZ2V0Om4uZ2V0LHNldDpmdW5jdGlvbihlKXtpZih0aGlzLm5vZGVUeXBlIT09Tm9kZS5URVhUX05PREUpe3ZhciBpPXZvaWQgMDtpZih0aGlzLmZpcnN0Q2hpbGQpe3ZhciBvPXRoaXMuY2hpbGROb2RlcyxyPW8ubGVuZ3RoO2lmKHI+MCYmYSh0aGlzKSl7aT1uZXcgQXJyYXkocik7Zm9yKHZhciBzPTA7czxyO3MrKylpW3NdPW9bc119fWlmKG4uc2V0LmNhbGwodGhpcyxlKSxpKWZvcih2YXIgbD0wO2w8aS5sZW5ndGg7bCsrKXQuZGlzY29ubmVjdFRyZWUoaVtsXSl9ZWxzZSBuLnNldC5jYWxsKHRoaXMsZSl9fSl9dShOb2RlLnByb3RvdHlwZSxcImluc2VydEJlZm9yZVwiLGZ1bmN0aW9uKGUsbil7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpe3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShlLmNoaWxkTm9kZXMpLG89a2kuTm9kZV9pbnNlcnRCZWZvcmUuY2FsbCh0aGlzLGUsbik7aWYoYSh0aGlzKSlmb3IodmFyIHI9MDtyPGkubGVuZ3RoO3IrKyl0LmNvbm5lY3RUcmVlKGlbcl0pO3JldHVybiBvfXZhciBzPWEoZSksbD1raS5Ob2RlX2luc2VydEJlZm9yZS5jYWxsKHRoaXMsZSxuKTtyZXR1cm4gcyYmdC5kaXNjb25uZWN0VHJlZShlKSxhKHRoaXMpJiZ0LmNvbm5lY3RUcmVlKGUpLGx9KSx1KE5vZGUucHJvdG90eXBlLFwiYXBwZW5kQ2hpbGRcIixmdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGUuY2hpbGROb2RlcyksaT1raS5Ob2RlX2FwcGVuZENoaWxkLmNhbGwodGhpcyxlKTtpZihhKHRoaXMpKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKXQuY29ubmVjdFRyZWUobltvXSk7cmV0dXJuIGl9dmFyIHI9YShlKSxzPWtpLk5vZGVfYXBwZW5kQ2hpbGQuY2FsbCh0aGlzLGUpO3JldHVybiByJiZ0LmRpc2Nvbm5lY3RUcmVlKGUpLGEodGhpcykmJnQuY29ubmVjdFRyZWUoZSksc30pLHUoTm9kZS5wcm90b3R5cGUsXCJjbG9uZU5vZGVcIixmdW5jdGlvbihlKXt2YXIgbj1raS5Ob2RlX2Nsb25lTm9kZS5jYWxsKHRoaXMsZSk7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5fX0NFX2hhc1JlZ2lzdHJ5P3QucGF0Y2hBbmRVcGdyYWRlVHJlZShuKTp0LnBhdGNoVHJlZShuKSxufSksdShOb2RlLnByb3RvdHlwZSxcInJlbW92ZUNoaWxkXCIsZnVuY3Rpb24oZSl7dmFyIG49YShlKSxpPWtpLk5vZGVfcmVtb3ZlQ2hpbGQuY2FsbCh0aGlzLGUpO3JldHVybiBuJiZ0LmRpc2Nvbm5lY3RUcmVlKGUpLGl9KSx1KE5vZGUucHJvdG90eXBlLFwicmVwbGFjZUNoaWxkXCIsZnVuY3Rpb24oZSxuKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmFwcGx5KGUuY2hpbGROb2Rlcyksbz1raS5Ob2RlX3JlcGxhY2VDaGlsZC5jYWxsKHRoaXMsZSxuKTtpZihhKHRoaXMpKXt0LmRpc2Nvbm5lY3RUcmVlKG4pO2Zvcih2YXIgcj0wO3I8aS5sZW5ndGg7cisrKXQuY29ubmVjdFRyZWUoaVtyXSl9cmV0dXJuIG99dmFyIHM9YShlKSxsPWtpLk5vZGVfcmVwbGFjZUNoaWxkLmNhbGwodGhpcyxlLG4pLHU9YSh0aGlzKTtyZXR1cm4gdSYmdC5kaXNjb25uZWN0VHJlZShuKSxzJiZ0LmRpc2Nvbm5lY3RUcmVlKGUpLHUmJnQuY29ubmVjdFRyZWUoZSksbH0pLGtpLk5vZGVfdGV4dENvbnRlbnQmJmtpLk5vZGVfdGV4dENvbnRlbnQuZ2V0P2UoTm9kZS5wcm90b3R5cGUsa2kuTm9kZV90ZXh0Q29udGVudCk6dC5hZGRQYXRjaChmdW5jdGlvbih0KXtlKHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTx0aGlzLmNoaWxkTm9kZXMubGVuZ3RoO2UrKyl0LnB1c2godGhpcy5jaGlsZE5vZGVzW2VdLnRleHRDb250ZW50KTtyZXR1cm4gdC5qb2luKFwiXCIpfSxzZXQ6ZnVuY3Rpb24odCl7Zm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KWtpLk5vZGVfcmVtb3ZlQ2hpbGQuY2FsbCh0aGlzLHRoaXMuZmlyc3RDaGlsZCk7a2kuTm9kZV9hcHBlbmRDaGlsZC5jYWxsKHRoaXMsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodCkpfX0pfSl9KEFpKSxmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsbil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJpbm5lckhUTUxcIix7ZW51bWVyYWJsZTpuLmVudW1lcmFibGUsY29uZmlndXJhYmxlOiEwLGdldDpuLmdldCxzZXQ6ZnVuY3Rpb24oZSl7dmFyIGk9dGhpcyxvPXZvaWQgMDtpZihhKHRoaXMpJiYobz1bXSxsKHRoaXMsZnVuY3Rpb24odCl7dCE9PWkmJm8ucHVzaCh0KX0pKSxuLnNldC5jYWxsKHRoaXMsZSksbylmb3IodmFyIHI9MDtyPG8ubGVuZ3RoO3IrKyl7dmFyIHM9b1tyXTtzLl9fQ0Vfc3RhdGU9PT1taS5jdXN0b20mJnQuZGlzY29ubmVjdGVkQ2FsbGJhY2socyl9cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5fX0NFX2hhc1JlZ2lzdHJ5P3QucGF0Y2hBbmRVcGdyYWRlVHJlZSh0aGlzKTp0LnBhdGNoVHJlZSh0aGlzKSxlfX0pfWZ1bmN0aW9uIG4oZSxuKXt1KGUsXCJpbnNlcnRBZGphY2VudEVsZW1lbnRcIixmdW5jdGlvbihlLGkpe3ZhciBvPWEoaSkscj1uLmNhbGwodGhpcyxlLGkpO3JldHVybiBvJiZ0LmRpc2Nvbm5lY3RUcmVlKGkpLGEocikmJnQuY29ubmVjdFRyZWUoaSkscn0pfWlmKGtpLkVsZW1lbnRfYXR0YWNoU2hhZG93P3UoRWxlbWVudC5wcm90b3R5cGUsXCJhdHRhY2hTaGFkb3dcIixmdW5jdGlvbih0KXt2YXIgZT1raS5FbGVtZW50X2F0dGFjaFNoYWRvdy5jYWxsKHRoaXMsdCk7cmV0dXJuIHRoaXMuX19DRV9zaGFkb3dSb290PWUsZX0pOmNvbnNvbGUud2FybihcIkN1c3RvbSBFbGVtZW50czogYEVsZW1lbnQjYXR0YWNoU2hhZG93YCB3YXMgbm90IHBhdGNoZWQuXCIpLGtpLkVsZW1lbnRfaW5uZXJIVE1MJiZraS5FbGVtZW50X2lubmVySFRNTC5nZXQpZShFbGVtZW50LnByb3RvdHlwZSxraS5FbGVtZW50X2lubmVySFRNTCk7ZWxzZSBpZihraS5IVE1MRWxlbWVudF9pbm5lckhUTUwmJmtpLkhUTUxFbGVtZW50X2lubmVySFRNTC5nZXQpZShIVE1MRWxlbWVudC5wcm90b3R5cGUsa2kuSFRNTEVsZW1lbnRfaW5uZXJIVE1MKTtlbHNle3ZhciBpPWtpLkRvY3VtZW50X2NyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCxcImRpdlwiKTt0LmFkZFBhdGNoKGZ1bmN0aW9uKHQpe2UodCx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGtpLk5vZGVfY2xvbmVOb2RlLmNhbGwodGhpcywhMCkuaW5uZXJIVE1MfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9XCJ0ZW1wbGF0ZVwiPT09dGhpcy5sb2NhbE5hbWU/dGhpcy5jb250ZW50OnRoaXM7Zm9yKGkuaW5uZXJIVE1MPXQ7ZS5jaGlsZE5vZGVzLmxlbmd0aD4wOylraS5Ob2RlX3JlbW92ZUNoaWxkLmNhbGwoZSxlLmNoaWxkTm9kZXNbMF0pO2Zvcig7aS5jaGlsZE5vZGVzLmxlbmd0aD4wOylraS5Ob2RlX2FwcGVuZENoaWxkLmNhbGwoZSxpLmNoaWxkTm9kZXNbMF0pfX0pfSl9dShFbGVtZW50LnByb3RvdHlwZSxcInNldEF0dHJpYnV0ZVwiLGZ1bmN0aW9uKGUsbil7aWYodGhpcy5fX0NFX3N0YXRlIT09bWkuY3VzdG9tKXJldHVybiBraS5FbGVtZW50X3NldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSxuKTt2YXIgaT1raS5FbGVtZW50X2dldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSk7a2kuRWxlbWVudF9zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUsbiksbj1raS5FbGVtZW50X2dldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSksdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxlLGksbixudWxsKX0pLHUoRWxlbWVudC5wcm90b3R5cGUsXCJzZXRBdHRyaWJ1dGVOU1wiLGZ1bmN0aW9uKGUsbixpKXtpZih0aGlzLl9fQ0Vfc3RhdGUhPT1taS5jdXN0b20pcmV0dXJuIGtpLkVsZW1lbnRfc2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbixpKTt2YXIgbz1raS5FbGVtZW50X2dldEF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO2tpLkVsZW1lbnRfc2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbixpKSxpPWtpLkVsZW1lbnRfZ2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbiksdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sodGhpcyxuLG8saSxlKX0pLHUoRWxlbWVudC5wcm90b3R5cGUsXCJyZW1vdmVBdHRyaWJ1dGVcIixmdW5jdGlvbihlKXtpZih0aGlzLl9fQ0Vfc3RhdGUhPT1taS5jdXN0b20pcmV0dXJuIGtpLkVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcyxlKTt2YXIgbj1raS5FbGVtZW50X2dldEF0dHJpYnV0ZS5jYWxsKHRoaXMsZSk7a2kuRWxlbWVudF9yZW1vdmVBdHRyaWJ1dGUuY2FsbCh0aGlzLGUpLG51bGwhPT1uJiZ0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayh0aGlzLGUsbixudWxsLG51bGwpfSksdShFbGVtZW50LnByb3RvdHlwZSxcInJlbW92ZUF0dHJpYnV0ZU5TXCIsZnVuY3Rpb24oZSxuKXtpZih0aGlzLl9fQ0Vfc3RhdGUhPT1taS5jdXN0b20pcmV0dXJuIGtpLkVsZW1lbnRfcmVtb3ZlQXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbik7dmFyIGk9a2kuRWxlbWVudF9nZXRBdHRyaWJ1dGVOUy5jYWxsKHRoaXMsZSxuKTtraS5FbGVtZW50X3JlbW92ZUF0dHJpYnV0ZU5TLmNhbGwodGhpcyxlLG4pO3ZhciBvPWtpLkVsZW1lbnRfZ2V0QXR0cmlidXRlTlMuY2FsbCh0aGlzLGUsbik7aSE9PW8mJnQuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHRoaXMsbixpLG8sZSl9KSxraS5IVE1MRWxlbWVudF9pbnNlcnRBZGphY2VudEVsZW1lbnQ/bihIVE1MRWxlbWVudC5wcm90b3R5cGUsa2kuSFRNTEVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50KTpraS5FbGVtZW50X2luc2VydEFkamFjZW50RWxlbWVudD9uKEVsZW1lbnQucHJvdG90eXBlLGtpLkVsZW1lbnRfaW5zZXJ0QWRqYWNlbnRFbGVtZW50KTpjb25zb2xlLndhcm4oXCJDdXN0b20gRWxlbWVudHM6IGBFbGVtZW50I2luc2VydEFkamFjZW50RWxlbWVudGAgd2FzIG5vdCBwYXRjaGVkLlwiKSxFaSh0LEVsZW1lbnQucHJvdG90eXBlLHtwcmVwZW5kOmtpLkVsZW1lbnRfcHJlcGVuZCxhcHBlbmQ6a2kuRWxlbWVudF9hcHBlbmR9KSxmdW5jdGlvbih0LGUsbil7ZS5iZWZvcmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pO24uYmVmb3JlLmFwcGx5KHRoaXMsaSk7Zm9yKHZhciBzPTA7czxyLmxlbmd0aDtzKyspdC5kaXNjb25uZWN0VHJlZShyW3NdKTtpZihhKHRoaXMpKWZvcih2YXIgbD0wO2w8aS5sZW5ndGg7bCsrKXt2YXIgdT1pW2xdO3UgaW5zdGFuY2VvZiBFbGVtZW50JiZ0LmNvbm5lY3RUcmVlKHUpfX0sZS5hZnRlcj1mdW5jdGlvbigpe2Zvcih2YXIgZT1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkoZSksbz0wO288ZTtvKyspaVtvXT1hcmd1bWVudHNbb107dmFyIHI9aS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQgaW5zdGFuY2VvZiBOb2RlJiZhKHQpfSk7bi5hZnRlci5hcHBseSh0aGlzLGkpO2Zvcih2YXIgcz0wO3M8ci5sZW5ndGg7cysrKXQuZGlzY29ubmVjdFRyZWUocltzXSk7aWYoYSh0aGlzKSlmb3IodmFyIGw9MDtsPGkubGVuZ3RoO2wrKyl7dmFyIHU9aVtsXTt1IGluc3RhbmNlb2YgRWxlbWVudCYmdC5jb25uZWN0VHJlZSh1KX19LGUucmVwbGFjZVdpdGg9ZnVuY3Rpb24oKXtmb3IodmFyIGU9YXJndW1lbnRzLmxlbmd0aCxpPUFycmF5KGUpLG89MDtvPGU7bysrKWlbb109YXJndW1lbnRzW29dO3ZhciByPWkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0IGluc3RhbmNlb2YgTm9kZSYmYSh0KX0pLHM9YSh0aGlzKTtuLnJlcGxhY2VXaXRoLmFwcGx5KHRoaXMsaSk7Zm9yKHZhciBsPTA7bDxyLmxlbmd0aDtsKyspdC5kaXNjb25uZWN0VHJlZShyW2xdKTtpZihzKXt0LmRpc2Nvbm5lY3RUcmVlKHRoaXMpO2Zvcih2YXIgdT0wO3U8aS5sZW5ndGg7dSsrKXt2YXIgYz1pW3VdO2MgaW5zdGFuY2VvZiBFbGVtZW50JiZ0LmNvbm5lY3RUcmVlKGMpfX19LGUucmVtb3ZlPWZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKTtuLnJlbW92ZS5jYWxsKHRoaXMpLGUmJnQuZGlzY29ubmVjdFRyZWUodGhpcyl9fSh0LEVsZW1lbnQucHJvdG90eXBlLHtiZWZvcmU6a2kuRWxlbWVudF9iZWZvcmUsYWZ0ZXI6a2kuRWxlbWVudF9hZnRlcixyZXBsYWNlV2l0aDpraS5FbGVtZW50X3JlcGxhY2VXaXRoLHJlbW92ZTpraS5FbGVtZW50X3JlbW92ZX0pfShBaSksZG9jdW1lbnQuX19DRV9oYXNSZWdpc3RyeT0hMDt2YXIgU2k9bmV3IHlpKEFpKTtPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LFwiY3VzdG9tRWxlbWVudHNcIix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsdmFsdWU6U2l9KX0hZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2Q9ITE7dmFyIHQ9ZjtmPVtdLHQuc29ydChmdW5jdGlvbih0LGUpe3JldHVybiB0LnVpZF8tZS51aWRffSk7dmFyIG49ITE7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBlPXQudGFrZVJlY29yZHMoKTshZnVuY3Rpb24odCl7dC5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj11LmdldChlKTtuJiZuLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5vYnNlcnZlcj09PXQmJmUucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9KX0pfSh0KSxlLmxlbmd0aCYmKHQuY2FsbGJhY2tfKGUsdCksbj0hMCl9KSxuJiZlKCl9ZnVuY3Rpb24gbih0LGUpe2Zvcih2YXIgbj10O247bj1uLnBhcmVudE5vZGUpe3ZhciBpPXUuZ2V0KG4pO2lmKGkpZm9yKHZhciBvPTA7bzxpLmxlbmd0aDtvKyspe3ZhciByPWlbb10sYT1yLm9wdGlvbnM7aWYobj09PXR8fGEuc3VidHJlZSl7dmFyIHM9ZShhKTtzJiZyLmVucXVldWUocyl9fX19ZnVuY3Rpb24gaSh0KXt0aGlzLmNhbGxiYWNrXz10LHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrcH1mdW5jdGlvbiBvKHQsZSl7dGhpcy50eXBlPXQsdGhpcy50YXJnZXQ9ZSx0aGlzLmFkZGVkTm9kZXM9W10sdGhpcy5yZW1vdmVkTm9kZXM9W10sdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gcih0LGUpe3JldHVybiBnPW5ldyBvKHQsZSl9ZnVuY3Rpb24gYSh0KXtyZXR1cm4gbXx8KG09ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG8odC50eXBlLHQudGFyZ2V0KTtyZXR1cm4gZS5hZGRlZE5vZGVzPXQuYWRkZWROb2Rlcy5zbGljZSgpLGUucmVtb3ZlZE5vZGVzPXQucmVtb3ZlZE5vZGVzLnNsaWNlKCksZS5wcmV2aW91c1NpYmxpbmc9dC5wcmV2aW91c1NpYmxpbmcsZS5uZXh0U2libGluZz10Lm5leHRTaWJsaW5nLGUuYXR0cmlidXRlTmFtZT10LmF0dHJpYnV0ZU5hbWUsZS5hdHRyaWJ1dGVOYW1lc3BhY2U9dC5hdHRyaWJ1dGVOYW1lc3BhY2UsZS5vbGRWYWx1ZT10Lm9sZFZhbHVlLGV9KGcpLG0ub2xkVmFsdWU9dCxtKX1mdW5jdGlvbiBzKHQsZSxuKXt0aGlzLm9ic2VydmVyPXQsdGhpcy50YXJnZXQ9ZSx0aGlzLm9wdGlvbnM9bix0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119aWYoIXQuSnNNdXRhdGlvbk9ic2VydmVyKXt2YXIgbCx1PW5ldyBXZWFrTWFwO2lmKC9UcmlkZW50fEVkZ2UvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpbD1zZXRUaW1lb3V0O2Vsc2UgaWYod2luZG93LnNldEltbWVkaWF0ZSlsPXdpbmRvdy5zZXRJbW1lZGlhdGU7ZWxzZXt2YXIgYz1bXSxoPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbih0KXtpZih0LmRhdGE9PT1oKXt2YXIgZT1jO2M9W10sZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoKX0pfX0pLGw9ZnVuY3Rpb24odCl7Yy5wdXNoKHQpLHdpbmRvdy5wb3N0TWVzc2FnZShoLFwiKlwiKX19dmFyIGQ9ITEsZj1bXSxwPTA7aS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24odCxlKXtpZih0PWZ1bmN0aW9uKHQpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQodCl8fHR9KHQpLCFlLmNoaWxkTGlzdCYmIWUuYXR0cmlidXRlcyYmIWUuY2hhcmFjdGVyRGF0YXx8ZS5hdHRyaWJ1dGVPbGRWYWx1ZSYmIWUuYXR0cmlidXRlc3x8ZS5hdHRyaWJ1dGVGaWx0ZXImJmUuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmIWUuYXR0cmlidXRlc3x8ZS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUmJiFlLmNoYXJhY3RlckRhdGEpdGhyb3cgbmV3IFN5bnRheEVycm9yO3ZhciBuPXUuZ2V0KHQpO258fHUuc2V0KHQsbj1bXSk7Zm9yKHZhciBpLG89MDtvPG4ubGVuZ3RoO28rKylpZihuW29dLm9ic2VydmVyPT09dGhpcyl7KGk9bltvXSkucmVtb3ZlTGlzdGVuZXJzKCksaS5vcHRpb25zPWU7YnJlYWt9aXx8KGk9bmV3IHModGhpcyx0LGUpLG4ucHVzaChpKSx0aGlzLm5vZGVzXy5wdXNoKHQpKSxpLmFkZExpc3RlbmVycygpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbih0KXtmb3IodmFyIGU9dS5nZXQodCksbj0wO248ZS5sZW5ndGg7bisrKXt2YXIgaT1lW25dO2lmKGkub2JzZXJ2ZXI9PT10aGlzKXtpLnJlbW92ZUxpc3RlbmVycygpLGUuc3BsaWNlKG4sMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLHR9fTt2YXIgZyxtO3MucHJvdG90eXBlPXtlbnF1ZXVlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXMub2JzZXJ2ZXIucmVjb3Jkc18saT1uLmxlbmd0aDtpZihuLmxlbmd0aD4wKXt2YXIgbz1mdW5jdGlvbih0LGUpe3JldHVybiB0PT09ZT90Om0mJmZ1bmN0aW9uKHQpe3JldHVybiB0PT09bXx8dD09PWd9KHQpP206bnVsbH0obltpLTFdLHQpO2lmKG8pcmV0dXJuIHZvaWQobltpLTFdPW8pfWVsc2UhZnVuY3Rpb24odCl7Zi5wdXNoKHQpLGR8fChkPSEwLGwoZSkpfSh0aGlzLm9ic2VydmVyKTtuW2ldPXR9LGFkZExpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMuYWRkTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LGFkZExpc3RlbmVyc186ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5vcHRpb25zO2UuYXR0cmlidXRlcyYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQXR0ck1vZGlmaWVkXCIsdGhpcywhMCksZS5jaGFyYWN0ZXJEYXRhJiZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIix0aGlzLCEwKSxlLmNoaWxkTGlzdCYmdC5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZUluc2VydGVkXCIsdGhpcywhMCksKGUuY2hpbGRMaXN0fHxlLnN1YnRyZWUpJiZ0LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Ob2RlUmVtb3ZlZFwiLHRoaXMsITApfSxyZW1vdmVMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odGhpcy50YXJnZXQpfSxyZW1vdmVMaXN0ZW5lcnNfOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMub3B0aW9ucztlLmF0dHJpYnV0ZXMmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUF0dHJNb2RpZmllZFwiLHRoaXMsITApLGUuY2hhcmFjdGVyRGF0YSYmdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsdGhpcywhMCksZS5jaGlsZExpc3QmJnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVJbnNlcnRlZFwiLHRoaXMsITApLChlLmNoaWxkTGlzdHx8ZS5zdWJ0cmVlKSYmdC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NTm9kZVJlbW92ZWRcIix0aGlzLCEwKX0sYWRkVHJhbnNpZW50T2JzZXJ2ZXI6ZnVuY3Rpb24odCl7aWYodCE9PXRoaXMudGFyZ2V0KXt0aGlzLmFkZExpc3RlbmVyc18odCksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2godCk7dmFyIGU9dS5nZXQodCk7ZXx8dS5zZXQodCxlPVtdKSxlLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdLHQuZm9yRWFjaChmdW5jdGlvbih0KXt0aGlzLnJlbW92ZUxpc3RlbmVyc18odCk7Zm9yKHZhciBlPXUuZ2V0KHQpLG49MDtuPGUubGVuZ3RoO24rKylpZihlW25dPT09dGhpcyl7ZS5zcGxpY2UobiwxKTticmVha319LHRoaXMpfSxoYW5kbGVFdmVudDpmdW5jdGlvbih0KXtzd2l0Y2godC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0LnR5cGUpe2Nhc2VcIkRPTUF0dHJNb2RpZmllZFwiOnZhciBlPXQuYXR0ck5hbWUsaT10LnJlbGF0ZWROb2RlLm5hbWVzcGFjZVVSSSxvPXQudGFyZ2V0OyhzPW5ldyByKFwiYXR0cmlidXRlc1wiLG8pKS5hdHRyaWJ1dGVOYW1lPWUscy5hdHRyaWJ1dGVOYW1lc3BhY2U9aTtsPXQuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDp0LnByZXZWYWx1ZTtuKG8sZnVuY3Rpb24odCl7aWYodC5hdHRyaWJ1dGVzJiYoIXQuYXR0cmlidXRlRmlsdGVyfHwhdC5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RofHwtMSE9PXQuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YoZSl8fC0xIT09dC5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihpKSkpcmV0dXJuIHQuYXR0cmlidXRlT2xkVmFsdWU/YShsKTpzfSk7YnJlYWs7Y2FzZVwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCI6dmFyIHM9cihcImNoYXJhY3RlckRhdGFcIixvPXQudGFyZ2V0KSxsPXQucHJldlZhbHVlO24obyxmdW5jdGlvbih0KXtpZih0LmNoYXJhY3RlckRhdGEpcmV0dXJuIHQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlP2EobCk6c30pO2JyZWFrO2Nhc2VcIkRPTU5vZGVSZW1vdmVkXCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcih0LnRhcmdldCk7Y2FzZVwiRE9NTm9kZUluc2VydGVkXCI6dmFyIHUsYyxoPXQudGFyZ2V0O1wiRE9NTm9kZUluc2VydGVkXCI9PT10LnR5cGU/KHU9W2hdLGM9W10pOih1PVtdLGM9W2hdKTt2YXIgZD1oLnByZXZpb3VzU2libGluZyxmPWgubmV4dFNpYmxpbmc7KHM9cihcImNoaWxkTGlzdFwiLHQudGFyZ2V0LnBhcmVudE5vZGUpKS5hZGRlZE5vZGVzPXUscy5yZW1vdmVkTm9kZXM9YyxzLnByZXZpb3VzU2libGluZz1kLHMubmV4dFNpYmxpbmc9ZixuKHQucmVsYXRlZE5vZGUsZnVuY3Rpb24odCl7aWYodC5jaGlsZExpc3QpcmV0dXJuIHN9KX1nPW09dm9pZCAwfX0sdC5Kc011dGF0aW9uT2JzZXJ2ZXI9aSx0Lk11dGF0aW9uT2JzZXJ2ZXJ8fCh0Lk11dGF0aW9uT2JzZXJ2ZXI9aSxpLl9pc1BvbHlmaWxsZWQ9ITApfX0oc2VsZiksZnVuY3Rpb24odCxlKXtmdW5jdGlvbiBuKHQpe3JldHVybiBsW3NdPWkuYXBwbHkoZSx0KSxzKyt9ZnVuY3Rpb24gaSh0KXt2YXIgbj1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PXR5cGVvZiB0P3QuYXBwbHkoZSxuKTpuZXcgRnVuY3Rpb24oXCJcIit0KSgpfX1mdW5jdGlvbiBvKHQpe2lmKHUpc2V0VGltZW91dChpKG8sdCksMCk7ZWxzZXt2YXIgZT1sW3RdO2lmKGUpe3U9ITA7dHJ5e2UoKX1maW5hbGx5e3IodCksdT0hMX19fX1mdW5jdGlvbiByKHQpe2RlbGV0ZSBsW3RdfWlmKCF0LnNldEltbWVkaWF0ZSl7dmFyIGEscz0xLGw9e30sdT0hMSxjPXQuZG9jdW1lbnQsaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YmJk9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtoPWgmJmguc2V0VGltZW91dD9oOnQsXCJbb2JqZWN0IHByb2Nlc3NdXCI9PT17fS50b1N0cmluZy5jYWxsKHQucHJvY2Vzcyk/YT1mdW5jdGlvbigpe3ZhciB0PW4oYXJndW1lbnRzKTtyZXR1cm4gcHJvY2Vzcy5uZXh0VGljayhpKG8sdCkpLHR9OmZ1bmN0aW9uKCl7aWYodC5wb3N0TWVzc2FnZSYmIXQuaW1wb3J0U2NyaXB0cyl7dmFyIGU9ITAsbj10Lm9ubWVzc2FnZTtyZXR1cm4gdC5vbm1lc3NhZ2U9ZnVuY3Rpb24oKXtlPSExfSx0LnBvc3RNZXNzYWdlKFwiXCIsXCIqXCIpLHQub25tZXNzYWdlPW4sZX19KCk/ZnVuY3Rpb24oKXt2YXIgZT1cInNldEltbWVkaWF0ZSRcIitNYXRoLnJhbmRvbSgpK1wiJFwiLGk9ZnVuY3Rpb24obil7bi5zb3VyY2U9PT10JiZcInN0cmluZ1wiPT10eXBlb2Ygbi5kYXRhJiYwPT09bi5kYXRhLmluZGV4T2YoZSkmJm8oK24uZGF0YS5zbGljZShlLmxlbmd0aCkpfTt0LmFkZEV2ZW50TGlzdGVuZXI/dC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGksITEpOnQuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIixpKSxhPWZ1bmN0aW9uKCl7dmFyIGk9bihhcmd1bWVudHMpO3JldHVybiB0LnBvc3RNZXNzYWdlKGUraSxcIipcIiksaX19KCk6dC5NZXNzYWdlQ2hhbm5lbD9mdW5jdGlvbigpe3ZhciB0PW5ldyBNZXNzYWdlQ2hhbm5lbDt0LnBvcnQxLm9ubWVzc2FnZT1mdW5jdGlvbih0KXtvKHQuZGF0YSl9LGE9ZnVuY3Rpb24oKXt2YXIgZT1uKGFyZ3VtZW50cyk7cmV0dXJuIHQucG9ydDIucG9zdE1lc3NhZ2UoZSksZX19KCk6YyYmXCJvbnJlYWR5c3RhdGVjaGFuZ2VcImluIGMuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKT9mdW5jdGlvbigpe3ZhciB0PWMuZG9jdW1lbnRFbGVtZW50O2E9ZnVuY3Rpb24oKXt2YXIgZT1uKGFyZ3VtZW50cyksaT1jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7cmV0dXJuIGkub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7byhlKSxpLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsLHQucmVtb3ZlQ2hpbGQoaSksaT1udWxsfSx0LmFwcGVuZENoaWxkKGkpLGV9fSgpOmE9ZnVuY3Rpb24oKXt2YXIgdD1uKGFyZ3VtZW50cyk7cmV0dXJuIHNldFRpbWVvdXQoaShvLHQpLDApLHR9LGguc2V0SW1tZWRpYXRlPWEsaC5jbGVhckltbWVkaWF0ZT1yfX0oc2VsZiksZnVuY3Rpb24oKXt2YXIgdD17ZW5zdXJlVmlld3BvcnRFbGVtZW50OmZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1ldGFbbmFtZT12aWV3cG9ydF1cIik7cmV0dXJuIHR8fCgodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibWV0YVwiKSkubmFtZT1cInZpZXdwb3J0XCIsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0KSksdH0sc2V0dXA6ZnVuY3Rpb24oKXt2YXIgZT10LmVuc3VyZVZpZXdwb3J0RWxlbWVudCgpO2UmJihlLmhhc0F0dHJpYnV0ZShcImNvbnRlbnRcIil8fGUuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLFwid2lkdGg9ZGV2aWNlLXdpZHRoLGluaXRpYWwtc2NhbGU9MSxtYXhpbXVtLXNjYWxlPTEsbWluaW11bS1zY2FsZT0xLHVzZXItc2NhbGFibGU9bm9cIikpfX07d2luZG93LlZpZXdwb3J0PXR9KCk7dmFyIFBpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSl9cmV0dXJuIGIoZSx0KSxlfShmdW5jdGlvbigpe2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIEhUTUxFbGVtZW50KXt2YXIgdD1mdW5jdGlvbigpe307cmV0dXJuIHQucHJvdG90eXBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdH1yZXR1cm4gSFRNTEVsZW1lbnR9KCkpLE9pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtmb3IodC50ZW1wbGF0ZT10LmlubmVySFRNTDt0LmZpcnN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKTtyZXR1cm4gdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUhPT1kb2N1bWVudC5ib2R5JiZRLndhcm4oXCJvbnMtdGVtcGxhdGUgKGlkID0gXCIrdGhpcy5nZXRBdHRyaWJ1dGUoXCJpZFwiKStcIikgbXVzdCBiZSBsb2NhdGVkIGp1c3QgdW5kZXIgZG9jdW1lbnQuYm9keVwiKyh0aGlzLnBhcmVudE5vZGUub3V0ZXJIVE1MP1wiOlxcblxcblwiK3RoaXMucGFyZW50Tm9kZS5vdXRlckhUTUw6XCIuXCIpKTt2YXIgdD1uZXcgQ3VzdG9tRXZlbnQoXCJfdGVtcGxhdGVsb2FkZWRcIix7YnViYmxlczohMCxjYW5jZWxhYmxlOiEwfSk7dC50ZW1wbGF0ZT10aGlzLnRlbXBsYXRlLHQudGVtcGxhdGVJZD10aGlzLmdldEF0dHJpYnV0ZShcImlkXCIpLHRoaXMuZGlzcGF0Y2hFdmVudCh0KX19XSksZX0oKTtjLlRlbXBsYXRlPU9pLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy10ZW1wbGF0ZVwiLE9pKTt2YXIgeGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtpZihudWxsIT09Qy5fZ2V0U2VsZWN0ZWRQbGF0Zm9ybSgpKXQuX3BsYXRmb3JtVXBkYXRlKCk7ZWxzZSBpZighdC5faXNBbGxvd2VkUGxhdGZvcm0oKSl7Zm9yKDt0LmNoaWxkTm9kZXNbMF07KXQuY2hpbGROb2Rlc1swXS5yZW1vdmUoKTt0Ll9wbGF0Zm9ybVVwZGF0ZSgpfX0pLHQuX29uT3JpZW50YXRpb25DaGFuZ2UoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtPdC5vbihcImNoYW5nZVwiLHRoaXMuX29uT3JpZW50YXRpb25DaGFuZ2UuYmluZCh0aGlzKSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7XCJvcmllbnRhdGlvblwiPT09dCYmdGhpcy5fb25PcmllbnRhdGlvbkNoYW5nZSgpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXtPdC5vZmYoXCJjaGFuZ2VcIix0aGlzLl9vbk9yaWVudGF0aW9uQ2hhbmdlKX19LHtrZXk6XCJfcGxhdGZvcm1VcGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc3R5bGUuZGlzcGxheT10aGlzLl9pc0FsbG93ZWRQbGF0Zm9ybSgpP1wiXCI6XCJub25lXCJ9fSx7a2V5OlwiX2lzQWxsb3dlZFBsYXRmb3JtXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5nZXRBdHRyaWJ1dGUoXCJwbGF0Zm9ybVwiKXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJwbGF0Zm9ybVwiKS5zcGxpdCgvXFxzKy8pLmluZGV4T2YoQy5nZXRNb2JpbGVPUygpKT49MH19LHtrZXk6XCJfb25PcmllbnRhdGlvbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJvcmllbnRhdGlvblwiKSYmdGhpcy5faXNBbGxvd2VkUGxhdGZvcm0oKSl7dmFyIHQ9dGhpcy5nZXRBdHRyaWJ1dGUoXCJvcmllbnRhdGlvblwiKS50b0xvd2VyQ2FzZSgpLGU9T3QuaXNQb3J0cmFpdCgpP1wicG9ydHJhaXRcIjpcImxhbmRzY2FwZVwiO3RoaXMuc3R5bGUuZGlzcGxheT10PT09ZT9cIlwiOlwibm9uZVwifX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm9yaWVudGF0aW9uXCJdfX1dKSxlfSgpO2MuSWY9eGksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWlmXCIseGkpO3ZhciBUaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e307cCh0aGlzLHQpLHRoaXMudGltaW5nPWUudGltaW5nfHxcImxpbmVhclwiLHRoaXMuZHVyYXRpb249ZS5kdXJhdGlvbnx8MCx0aGlzLmRlbGF5PWUuZGVsYXl8fDAsdGhpcy5kZWY9e3RpbWluZzp0aGlzLnRpbWluZyxkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLGRlbGF5OnRoaXMuZGVsYXl9fXJldHVybiBnKHQsbnVsbCxbe2tleTpcImV4dGVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LGU9dGhpcyxuPWZ1bmN0aW9uKCl7ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksUS5leHRlbmQodGhpcyx0KX07cmV0dXJuIG4ucHJvdG90eXBlPXRoaXMucHJvdG90eXBlLG59fV0pLHR9KCksTGk9e307TGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZT1mdW5jdGlvbigpe3JldHVybiBudWxsIT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwib25zZmxhZy1pcGhvbmV4LXBvcnRyYWl0XCIpJiZ3aW5kb3cuaW5uZXJXaWR0aDx3aW5kb3cuaW5uZXJIZWlnaHR9LExpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJvbnNmbGFnLWlwaG9uZXgtbGFuZHNjYXBlXCIpJiZ3aW5kb3cuaW5uZXJXaWR0aD49d2luZG93LmlubmVySGVpZ2h0fSxMaS5nZXRTYWZlQXJlYUxlbmd0aHM9ZnVuY3Rpb24oKXtyZXR1cm4gTGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZSgpP3t0b3A6NDQscmlnaHQ6MCxib3R0b206MzQsbGVmdDowfTpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP3t0b3A6MCxyaWdodDo0NCxib3R0b206MjEsbGVmdDo0NH06e3RvcDowLHJpZ2h0OjAsYm90dG9tOjAsbGVmdDowfX0sTGkuZ2V0U2FmZUFyZWFET01SZWN0PWZ1bmN0aW9uKCl7dmFyIHQ9dm9pZCAwO3JldHVybiB0PUxpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT97eDowLHk6NDQsd2lkdGg6d2luZG93LmlubmVyV2lkdGgsaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodC03OH06TGkuaXNJUGhvbmVYTGFuZHNjYXBlUGF0Y2hBY3RpdmUoKT97eDo0NCx5OjAsd2lkdGg6d2luZG93LmlubmVyV2lkdGgtODgsaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodC0yMX06e3g6MCx5OjAsd2lkdGg6d2luZG93LmlubmVyV2lkdGgsaGVpZ2h0OndpbmRvdy5pbm5lckhlaWdodH0sXyh7fSx0LHtsZWZ0OnQueCx0b3A6dC55LHJpZ2h0OnQueCt0LndpZHRoLGJvdHRvbTp0LnkrdC5oZWlnaHR9KX07dmFyIE1pPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSxEaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLm1hc2tUaW1pbmc9XCJsaW5lYXJcIixsLm1hc2tEdXJhdGlvbj0uMixsfXJldHVybiBiKGUsTWkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe250LnJ1bkFsbChudCh0Ll9tYXNrKS5xdWV1ZSh7b3BhY2l0eTowfSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eToxfSx7ZHVyYXRpb246dGhpcy5tYXNrRHVyYXRpb24sdGltaW5nOnRoaXMubWFza1RpbWluZ30pLG50KHQuX3NoZWV0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCA4MCUsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe250LnJ1bkFsbChudCh0Ll9tYXNrKS5xdWV1ZSh7b3BhY2l0eToxfSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eTowfSx7ZHVyYXRpb246dGhpcy5tYXNrRHVyYXRpb24sdGltaW5nOnRoaXMubWFza1RpbWluZ30pLG50KHQuX3NoZWV0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDgwJSwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX1dKSxlfSgpLElpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwubWFza1RpbWluZz1cImxpbmVhclwiLGwubWFza0R1cmF0aW9uPS4yLExpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9sLmxpZnRBbW91bnQ9XCJjYWxjKDEwMCUgKyA0OHB4KVwiOkxpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgMzNweClcIjpsLmxpZnRBbW91bnQ9ZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQvMi0xK1wicHhcIixsfXJldHVybiBiKGUsTWkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe250LnJ1bkFsbChudCh0Ll9tYXNrKS5xdWV1ZSh7b3BhY2l0eTowfSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eToxfSx7ZHVyYXRpb246dGhpcy5tYXNrRHVyYXRpb24sdGltaW5nOnRoaXMubWFza1RpbWluZ30pLG50KHQuX3NoZWV0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmxpZnRBbW91bnQrXCIsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSYmZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtudC5ydW5BbGwobnQodC5fbWFzaykucXVldWUoe29wYWNpdHk6MX0pLndhaXQodGhpcy5kZWxheSkucXVldWUoe29wYWNpdHk6MH0se2R1cmF0aW9uOnRoaXMubWFza0R1cmF0aW9uLHRpbWluZzp0aGlzLm1hc2tUaW1pbmd9KSxudCh0Ll9zaGVldCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMubGlmdEFtb3VudCtcIiwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fV0pLGV9KCksTmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmNvbnN0cnVjdG9yPT09ZSYmUS50aHJvd0Fic3RyYWN0KCksdC5fdmlzaWJsZT0hMSx0Ll9kb29yTG9jaz1uZXcgTnQsdC5fY2FuY2VsPXQuX2NhbmNlbC5iaW5kKHQpLHQuX3NlbGZDYW1lbE5hbWU9US5jYW1lbGl6ZSh0LnRhZ05hbWUuc2xpY2UoNCkpLHQuX2RlZmF1bHREQkI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2FuY2VsYWJsZT90Ll9jYW5jZWwoKTplLmNhbGxQYXJlbnRIYW5kbGVyKCl9LHQuX2FuaW1hdG9yRmFjdG9yeT10Ll91cGRhdGVBbmltYXRvckZhY3RvcnkoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19LHtrZXk6XCJfdG9nZ2xlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnN0eWxlLmRpc3BsYXk9dD9cImJsb2NrXCI6XCJub25lXCJ9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19XSksZyhlLFt7a2V5OlwiX2NhbmNlbFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNhbmNlbGFibGUmJiF0aGlzLl9ydW5uaW5nJiYodGhpcy5fcnVubmluZz0hMCx0aGlzLmhpZGUoKS50aGVuKGZ1bmN0aW9uKCl7dC5fcnVubmluZz0hMSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodCxcImRpYWxvZy1jYW5jZWxcIil9LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3J1bm5pbmc9ITF9KSl9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fc2V0VmlzaWJsZS5hcHBseSh0aGlzLFshMF0uY29uY2F0KGUpKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9YXJndW1lbnRzLmxlbmd0aCxlPUFycmF5KHQpLG49MDtuPHQ7bisrKWVbbl09YXJndW1lbnRzW25dO3JldHVybiB0aGlzLl9zZXRWaXNpYmxlLmFwcGx5KHRoaXMsWyExXS5jb25jYXQoZSkpfX0se2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0KSxuPTA7bjx0O24rKyllW25dPWFyZ3VtZW50c1tuXTtyZXR1cm4gdGhpcy5fc2V0VmlzaWJsZS5hcHBseSh0aGlzLFshdGhpcy52aXNpYmxlXS5jb25jYXQoZSkpfX0se2tleTpcIl9zZXRWaXNpYmxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGUsaT10aGlzLG89YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9LHI9dD9cInNob3dcIjpcImhpZGVcIjsobz1fKHt9LG8pKS5hbmltYXRpb25PcHRpb25zPVEuZXh0ZW5kKG8uYW5pbWF0aW9uT3B0aW9uc3x8e30sTy5wYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmcodGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKSkpO3ZhciBhPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInByZVwiK3IsKGU9e30sbShlLHRoaXMuX3NlbGZDYW1lbE5hbWUsdGhpcyksbShlLFwiY2FuY2VsXCIsZnVuY3Rpb24oKXtyZXR1cm4gYT0hMH0pLGUpKSxhP1Byb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlXCIrcitcIiBldmVudC5cIik6bmV3IFByb21pc2UoZnVuY3Rpb24oZSl7aS5fZG9vckxvY2sud2FpdFVubG9jayhmdW5jdGlvbigpe3ZhciBhPWkuX2Rvb3JMb2NrLmxvY2soKSxzPWkuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcihvKTt0JiZpLl90b2dnbGVTdHlsZSghMCxvKSxpLl92aXNpYmxlPXQsUS5pb3NQYWdlU2Nyb2xsRml4KHQpLG4oaSxmdW5jdGlvbigpe3Nbcl0oaSxmdW5jdGlvbigpeyF0JiZpLl90b2dnbGVTdHlsZSghMSxvKSxhKCksUS5wcm9wYWdhdGVBY3Rpb24oaSxcIl9cIityKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQoaSxcInBvc3RcIityLG0oe30saS5fc2VsZkNhbWVsTmFtZSxpKSksby5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZvLmNhbGxiYWNrKGkpLGUoaSl9KX0pfSl9KX19LHtrZXk6XCJfdXBkYXRlTWFza1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9tYXNrJiZ0LmdldEF0dHJpYnV0ZShcIm1hc2stY29sb3JcIikmJih0Ll9tYXNrLnN0eWxlLmJhY2tncm91bmRDb2xvcj10LmdldEF0dHJpYnV0ZShcIm1hc2stY29sb3JcIikpfSl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5vbkRldmljZUJhY2tCdXR0b249dGhpcy5fZGVmYXVsdERCQi5iaW5kKHRoaXMpLG4odGhpcyxmdW5jdGlvbigpe3QuX21hc2smJih0Ll9tYXNrLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHQuX2NhbmNlbCwhMSksUS5pb3NNYXNrU2Nyb2xsRml4KHQuX21hc2ssITApKX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9bnVsbCx0aGlzLl9tYXNrJiYodGhpcy5fbWFzay5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9jYW5jZWwsITEpLFEuaW9zTWFza1Njcm9sbEZpeCh0aGlzLl9tYXNrLCExKSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsdGhpcy5fc2NoZW1lKTticmVhaztjYXNlXCJhbmltYXRpb25cIjp0aGlzLl9hbmltYXRvckZhY3Rvcnk9dGhpcy5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCk7YnJlYWs7Y2FzZVwibWFzay1jb2xvclwiOnRoaXMuX3VwZGF0ZU1hc2soKX19fSx7a2V5Olwib25EZXZpY2VCYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXImJnRoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1SLmNyZWF0ZUhhbmRsZXIodGhpcyx0KX19LHtrZXk6XCJ2aXNpYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Zpc2libGV9fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19LHtrZXk6XCJjYW5jZWxhYmxlXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiY2FuY2VsYWJsZVwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJjYW5jZWxhYmxlXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImFuaW1hdGlvblwiLFwibWFzay1jb2xvclwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVzaG93XCIsXCJwb3N0c2hvd1wiLFwicHJlaGlkZVwiLFwicG9zdGhpZGVcIixcImRpYWxvZy1jYW5jZWxcIl19fV0pLGV9KCksQmk9e1wiLmFjdGlvbi1zaGVldFwiOlwiYWN0aW9uLXNoZWV0LS0qXCIsXCIuYWN0aW9uLXNoZWV0LW1hc2tcIjpcImFjdGlvbi1zaGVldC1tYXNrLS0qXCIsXCIuYWN0aW9uLXNoZWV0LXRpdGxlXCI6XCJhY3Rpb24tc2hlZXQtdGl0bGUtLSpcIn0samk9e2RlZmF1bHQ6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9EaTpJaX0sbm9uZTpNaX0sSGk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczpqaSxiYXNlQ2xhc3M6TWksYmFzZUNsYXNzTmFtZTpcIkFjdGlvblNoZWV0QW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5zdHlsZS56SW5kZXg9MTAwMDEsIXRoaXMuX3NoZWV0KXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Zvcih0LmNsYXNzTGlzdC5hZGQoXCJhY3Rpb24tc2hlZXRcIik7dGhpcy5maXJzdENoaWxkOyl0LmFwcGVuZENoaWxkKHRoaXMuZmlyc3RDaGlsZCk7dGhpcy5hcHBlbmRDaGlsZCh0KX1pZighdGhpcy5fdGl0bGUmJnRoaXMuaGFzQXR0cmlidXRlKFwidGl0bGVcIikpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5pbm5lckhUTUw9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKSxlLmNsYXNzTGlzdC5hZGQoXCJhY3Rpb24tc2hlZXQtdGl0bGVcIiksdGhpcy5fc2hlZXQuaW5zZXJ0QmVmb3JlKGUsdGhpcy5fc2hlZXQuZmlyc3RDaGlsZCl9aWYoIXRoaXMuX21hc2spe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwiYWN0aW9uLXNoZWV0LW1hc2tcIiksdGhpcy5pbnNlcnRCZWZvcmUobix0aGlzLmZpcnN0Q2hpbGQpfXRoaXMuX3NoZWV0LnN0eWxlLnpJbmRleD0yMDAwMSx0aGlzLl9tYXNrLnN0eWxlLnpJbmRleD0yZTQsQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX0se2tleTpcIl91cGRhdGVUaXRsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fdGl0bGUmJih0aGlzLl90aXRsZS5pbm5lckhUTUw9dGhpcy5nZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiKSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe1widGl0bGVcIj09PXQ/dGhpcy5fdXBkYXRlVGl0bGUoKTp2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyx0LG4saSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBCaX19LHtrZXk6XCJfbWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFjdGlvbi1zaGVldC1tYXNrXCIpfX0se2tleTpcIl9zaGVldFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFjdGlvbi1zaGVldFwiKX19LHtrZXk6XCJfdGl0bGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmFjdGlvbi1zaGVldC10aXRsZVwiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgTWl8fFEudGhyb3dBbmltYXRvcihcIkFjdGlvblNoZWV0XCIpLGppW3RdPWV9fSx7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW10uY29uY2F0KHcodihlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLFwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsdGhpcykpLFtcInRpdGxlXCJdKX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gaml9fSx7a2V5OlwiQWN0aW9uU2hlZXRBbmltYXRvclwiLGdldDpmdW5jdGlvbigpe3JldHVybiBNaX19XSksZX0oKTtjLkFjdGlvblNoZWV0PUhpLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1hY3Rpb24tc2hlZXRcIixIaSk7dmFyIFJpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jb25zdHJ1Y3Rvcj09PWUmJlEudGhyb3dBYnN0cmFjdCgpLG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX2RlZmF1bHRDbGFzc05hbWVcIixnZXQ6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX3JpcHBsZU9wdFwiLGdldDpmdW5jdGlvbigpe3JldHVyblt0aGlzXX19XSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdENsYXNzTmFtZSksIXRoaXMuX2ljb24mJnRoaXMuaGFzQXR0cmlidXRlKFwiaWNvblwiKSl7US5jaGVja01pc3NpbmdJbXBvcnQoXCJJY29uXCIpO3ZhciB0PVEuY3JlYXRlRWxlbWVudCgnPG9ucy1pY29uIGljb249XCInK3RoaXMuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSsnXCI+PC9vbnMtaWNvbj4nKTt0LmNsYXNzTGlzdC5hZGQodGhpcy5fZGVmYXVsdENsYXNzTmFtZS5yZXBsYWNlKFwiYnV0dG9uXCIsXCJpY29uXCIpKSx0aGlzLmluc2VydEJlZm9yZSh0LHRoaXMuZmlyc3RDaGlsZCl9dGhpcy5fdXBkYXRlUmlwcGxlKCksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpfX0se2tleTpcIl91cGRhdGVJY29uXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9pY29uJiZ0aGlzLl9pY29uLnNldEF0dHJpYnV0ZShcImljb25cIix0aGlzLmdldEF0dHJpYnV0ZShcImljb25cIikpfX0se2tleTpcIl91cGRhdGVSaXBwbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3JpcHBsZU9wdCYmUS51cGRhdGVSaXBwbGUuYXBwbHkoUSx3KHRoaXMuX3JpcHBsZU9wdCkpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUsdGhpcy5fc2NoZW1lKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsdGhpcy5fc2NoZW1lKTticmVhaztjYXNlXCJpY29uXCI6dGhpcy5fdXBkYXRlSWNvbigpO2JyZWFrO2Nhc2VcInJpcHBsZVwiOnRoaXMuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuX2RlZmF1bHRDbGFzc05hbWUpJiZ0aGlzLl91cGRhdGVSaXBwbGUoKX19fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19LHtrZXk6XCJfaWNvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLWljb25cIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIixcImljb25cIixcInJpcHBsZVwiXX19XSksZX0oKSxGaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwiYWN0aW9uLXNoZWV0LWJ1dHRvbi0tKlwiLFwiLmFjdGlvbi1zaGVldC1pY29uXCI6XCJhY3Rpb24tc2hlZXQtaWNvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiYWN0aW9uLXNoZWV0LWJ1dHRvblwifX0se2tleTpcIl9yaXBwbGVPcHRcIixnZXQ6ZnVuY3Rpb24oKXt9fV0pLGV9KCk7Yy5BY3Rpb25TaGVldEJ1dHRvbj1GaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWN0aW9uLXNoZWV0LWJ1dHRvblwiLEZpKTt2YXIgcWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLHppPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kdXJhdGlvbixyPXZvaWQgMD09PW8/LjI6byxhPXQuZGVsYXkscz12b2lkIDA9PT1hPzA6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHtkdXJhdGlvbjpyLHRpbWluZzppLGRlbGF5OnN9KSl9cmV0dXJuIGIoZSxxaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCguOSwgLjksIDEpXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCgxLCAxLCAxKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMCkgc2NhbGUzZCgxLCAxLCAxKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoLjksIC45LCAxKVwiLG9wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksVmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciguMSwgLjcsIC40LCAxKVwiOm4sbz10LmR1cmF0aW9uLHI9dm9pZCAwPT09bz8uMjpvLGE9dC5kZWxheSxzPXZvaWQgMD09PWE/MDphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse2R1cmF0aW9uOnIsdGltaW5nOmksZGVsYXk6c30pKX1yZXR1cm4gYihlLHFpKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTowfSx7b3BhY2l0eToxfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKSBzY2FsZTNkKDEuMywgMS4zLCAxKVwiLG9wYWNpdHk6MH0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIC01MCUsIDApIHNjYWxlM2QoMSwgMSwgMSlcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5OjB9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksV2k9e1wiLmFsZXJ0LWRpYWxvZ1wiOlwiYWxlcnQtZGlhbG9nLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWNvbnRhaW5lclwiOlwiYWxlcnQtZGlhbG9nLWNvbnRhaW5lci0tKlwiLFwiLmFsZXJ0LWRpYWxvZy10aXRsZVwiOlwiYWxlcnQtZGlhbG9nLXRpdGxlLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWNvbnRlbnRcIjpcImFsZXJ0LWRpYWxvZy1jb250ZW50LS0qXCIsXCIuYWxlcnQtZGlhbG9nLWZvb3RlclwiOlwiYWxlcnQtZGlhbG9nLWZvb3Rlci0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1mb290ZXItLXJvd2Zvb3RlclwiOlwiYWxlcnQtZGlhbG9nLWZvb3Rlci0tcm93Zm9vdGVyLS0qXCIsXCIuYWxlcnQtZGlhbG9nLWJ1dHRvbi0tcm93Zm9vdGVyXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS1yb3dmb290ZXItLSpcIixcIi5hbGVydC1kaWFsb2ctYnV0dG9uLS1wcmltYWxcIjpcImFsZXJ0LWRpYWxvZy1idXR0b24tLXByaW1hbC0tKlwiLFwiLmFsZXJ0LWRpYWxvZy1idXR0b25cIjpcImFsZXJ0LWRpYWxvZy1idXR0b24tLSpcIixcIm9ucy1hbGVydC1kaWFsb2ctYnV0dG9uXCI6XCJhbGVydC1kaWFsb2ctYnV0dG9uLS0qXCIsXCIuYWxlcnQtZGlhbG9nLW1hc2tcIjpcImFsZXJ0LWRpYWxvZy1tYXNrLS0qXCIsXCIudGV4dC1pbnB1dFwiOlwidGV4dC1pbnB1dC0tKlwifSxVaT17bm9uZTpxaSxkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/emk6Vml9LGZhZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT96aTpWaX19LFhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6VWksYmFzZUNsYXNzOnFpLGJhc2VDbGFzc05hbWU6XCJBbGVydERpYWxvZ0FuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuc3R5bGUuekluZGV4PTEwMDAxO3ZhciB0PWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZighdGhpcy5fbWFzayYmIXRoaXMuX2RpYWxvZylmb3IoO3RoaXMuZmlyc3RDaGlsZDspdC5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO2lmKCF0aGlzLl9tYXNrKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NMaXN0LmFkZChcImFsZXJ0LWRpYWxvZy1tYXNrXCIpLHRoaXMuaW5zZXJ0QmVmb3JlKGUsdGhpcy5jaGlsZHJlblswXSl9aWYoIXRoaXMuX2RpYWxvZyl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmNsYXNzTGlzdC5hZGQoXCJhbGVydC1kaWFsb2dcIiksdGhpcy5pbnNlcnRCZWZvcmUobixudWxsKX1pZighUS5maW5kQ2hpbGQodGhpcy5fZGlhbG9nLFwiLmFsZXJ0LWRpYWxvZy1jb250YWluZXJcIikpe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5jbGFzc0xpc3QuYWRkKFwiYWxlcnQtZGlhbG9nLWNvbnRhaW5lclwiKSx0aGlzLl9kaWFsb2cuYXBwZW5kQ2hpbGQoaSl9dGhpcy5fZGlhbG9nLmNoaWxkcmVuWzBdLmFwcGVuZENoaWxkKHQpLHRoaXMuX2RpYWxvZy5zdHlsZS56SW5kZXg9MjAwMDEsdGhpcy5fbWFzay5zdHlsZS56SW5kZXg9MmU0LEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFdpfX0se2tleTpcIl9tYXNrXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIuYWxlcnQtZGlhbG9nLW1hc2tcIil9fSx7a2V5OlwiX2RpYWxvZ1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmFsZXJ0LWRpYWxvZ1wiKX19LHtrZXk6XCJfdGl0bGVFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX2RpYWxvZy5jaGlsZHJlblswXSxcIi5hbGVydC1kaWFsb2ctdGl0bGVcIil9fSx7a2V5OlwiX2NvbnRlbnRFbGVtZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX2RpYWxvZy5jaGlsZHJlblswXSxcIi5hbGVydC1kaWFsb2ctY29udGVudFwiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgcWl8fFEudGhyb3dBbmltYXRvcihcIkFsZXJ0RGlhbG9nXCIpLFVpW3RdPWV9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFVpfX0se2tleTpcIkFsZXJ0RGlhbG9nQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcWl9fV0pLGV9KCk7Yy5BbGVydERpYWxvZz1YaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWxlcnQtZGlhbG9nXCIsWGkpO3ZhciBZaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwiYWxlcnQtZGlhbG9nLWJ1dHRvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiYWxlcnQtZGlhbG9nLWJ1dHRvblwifX0se2tleTpcIl9yaXBwbGVPcHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcyx2b2lkIDAse21vZGlmaWVyOlwibGlnaHQtZ3JheVwifV19fV0pLGV9KCk7Yy5BbGVydERpYWxvZ0J1dHRvbj1ZaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYWxlcnQtZGlhbG9nLWJ1dHRvblwiLFlpKTt2YXIgR2k9e1wiXCI6XCJiYWNrLWJ1dHRvbi0tKlwiLFwiLmJhY2stYnV0dG9uX19pY29uXCI6XCJiYWNrLWJ1dHRvbi0tKl9faWNvblwiLFwiLmJhY2stYnV0dG9uX19sYWJlbFwiOlwiYmFjay1idXR0b24tLSpfX2xhYmVsXCJ9LCRpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdC5fb3B0aW9ucz17fSx0Ll9ib3VuZE9uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUljb25cIix2YWx1ZTpmdW5jdGlvbigpeyhhcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06US5maW5kQ2hpbGQodGhpcyxcIi5iYWNrLWJ1dHRvbl9faWNvblwiKSkuaW5uZXJIVE1MPVwiYW5kcm9pZFwiPT09Ti5nZXRQbGF0Zm9ybSh0aGlzKXx8US5oYXNNb2RpZmllcih0aGlzLFwibWF0ZXJpYWxcIik/Jzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCI/Plxcbjxzdmcgd2lkdGg9XCIxNnB4XCIgaGVpZ2h0PVwiMTZweFwiIHZpZXdCb3g9XCIwIDAgMTYgMTZcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiPlxcbiAgICA8dGl0bGU+bWQtYmFjay1idXR0b24taWNvbjwvdGl0bGU+XFxuICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPlxcbiAgICA8ZGVmcz48L2RlZnM+XFxuICAgIDxnIGlkPVwidG9vbGJhci1iYWNrLWJ1dHRvblwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxcbiAgICAgICAgPGcgaWQ9XCJhbmRyb2lkXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKC0zMi4wMDAwMDAsIC0zMi4wMDAwMDApXCIgZmlsbC1ydWxlPVwibm9uemVyb1wiPlxcbiAgICAgICAgICAgIDxwb2x5Z29uIGlkPVwibWQtYmFjay1idXR0b24taWNvblwiIHBvaW50cz1cIjQ4IDM5IDM1LjgzIDM5IDQxLjQyIDMzLjQxIDQwIDMyIDMyIDQwIDQwIDQ4IDQxLjQxIDQ2LjU5IDM1LjgzIDQxIDQ4IDQxXCI+PC9wb2x5Z29uPlxcbiAgICAgICAgPC9nPlxcbiAgICA8L2c+XFxuPC9zdmc+XFxuJzonPD94bWwgdmVyc2lvbj1cIjEuMFwiIGVuY29kaW5nPVwiVVRGLThcIj8+XFxuPHN2ZyB3aWR0aD1cIjEzcHhcIiBoZWlnaHQ9XCIyMXB4XCIgdmlld0JveD1cIjAgMCAxMyAyMVwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCI+XFxuICAgIDx0aXRsZT5pb3MtYmFjay1idXR0b24taWNvbjwvdGl0bGU+XFxuICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPlxcbiAgICA8ZGVmcz48L2RlZnM+XFxuICAgIDxnIGlkPVwidG9vbGJhci1iYWNrLWJ1dHRvblwiIHN0cm9rZT1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIxXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiPlxcbiAgICAgICAgPGcgaWQ9XCJpb3NcIiB0cmFuc2Zvcm09XCJ0cmFuc2xhdGUoLTM0LjAwMDAwMCwgLTMwLjAwMDAwMClcIj5cXG4gICAgICAgICAgICA8cG9seWdvbiBpZD1cImlvcy1iYWNrLWJ1dHRvbi1pY29uXCIgcG9pbnRzPVwiMzQgNDAuNSA0NC41IDMwIDQ2LjUgMzIgMzggNDAuNSA0Ni41IDQ5IDQ0LjUgNTFcIj48L3BvbHlnb24+XFxuICAgICAgICA8L2c+XFxuICAgIDwvZz5cXG48L3N2Zz5cXG4nfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwiYmFjay1idXR0b25cIiksIVEuZmluZENoaWxkKHRoaXMsXCIuYmFjay1idXR0b25fX2xhYmVsXCIpKXtmb3IodmFyIHQ9US5jcmVhdGUoXCJzcGFuLmJhY2stYnV0dG9uX19sYWJlbFwiKTt0aGlzLmNoaWxkTm9kZXNbMF07KXQuYXBwZW5kQ2hpbGQodGhpcy5jaGlsZE5vZGVzWzBdKTt0aGlzLmFwcGVuZENoaWxkKHQpfWlmKCFRLmZpbmRDaGlsZCh0aGlzLFwiLmJhY2stYnV0dG9uX19pY29uXCIpKXt2YXIgZT1RLmNyZWF0ZShcInNwYW4uYmFjay1idXR0b25fX2ljb25cIik7dGhpcy5fdXBkYXRlSWNvbihlKSx0aGlzLmluc2VydEJlZm9yZShlLHRoaXMuY2hpbGRyZW5bMF0pfVEudXBkYXRlUmlwcGxlKHRoaXMsdm9pZCAwLHtjZW50ZXI6XCJcIixzaXplOlwiY29udGFpblwiLGJhY2tncm91bmQ6XCJ0cmFuc3BhcmVudFwifSksQi5pbml0TW9kaWZpZXIodGhpcyxHaSl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMub25DbGljayl0aGlzLm9uQ2xpY2suYXBwbHkodGhpcyk7ZWxzZXt2YXIgdD1RLmZpbmRQYXJlbnQodGhpcyxcIm9ucy1uYXZpZ2F0b3JcIik7dCYmdC5wb3BQYWdlKHRoaXMub3B0aW9ucyl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJiYWNrLWJ1dHRvblwiLEdpKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsR2kpJiZ0aGlzLl91cGRhdGVJY29uKCl9fX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCJ9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwifX0se2tleTpcIm9wdGlvbnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX29wdGlvbnM9dH19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkJhY2tCdXR0b249JGksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWJhY2stYnV0dG9uXCIsJGkpO3ZhciBLaT1cImJvdHRvbS1iYXJcIixRaT17XCJcIjpcImJvdHRvbS1iYXItLSpcIn0sSmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0LmNsYXNzTGlzdC5hZGQoS2kpLEIuaW5pdE1vZGlmaWVyKHQsUWkpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe1EubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXBhZ2VcIikmJnRoaXMucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKFwicGFnZS13aXRoLWJvdHRvbS10b29sYmFyXCIpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLEtpLFFpKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsUWkpfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkJvdHRvbVRvb2xiYXI9SmksY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWJvdHRvbS10b29sYmFyXCIsSmkpO3ZhciBaaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxSaSksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybntcIlwiOlwiYnV0dG9uLS0qXCJ9fX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJidXR0b25cIn19XSksZX0oKTtjLkJ1dHRvbj1aaSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtYnV0dG9uXCIsWmkpO3ZhciB0bz17XCJcIjpcImNhcmQtLSpcIixcIi5jYXJkX190aXRsZVwiOlwiY2FyZC0tKl9fdGl0bGVcIixcIi5jYXJkX19jb250ZW50XCI6XCJjYXJkLS0qX19jb250ZW50XCJ9LGVvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTA7dDx0aGlzLmNoaWxkcmVuLmxlbmd0aDt0Kyspe3ZhciBlPXRoaXMuY2hpbGRyZW5bdF07ZS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aXRsZVwiKT9lLmNsYXNzTGlzdC5hZGQoXCJjYXJkX190aXRsZVwiKTplLmNsYXNzTGlzdC5jb250YWlucyhcImNvbnRlbnRcIikmJmUuY2xhc3NMaXN0LmFkZChcImNhcmRfX2NvbnRlbnRcIil9Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcImNhcmRcIiksQi5pbml0TW9kaWZpZXIodGhpcyx0byl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJjYXJkXCIsdG8pO2JyZWFrO2Nhc2VcIm1vZGlmaWVyXCI6Qi5vbk1vZGlmaWVyQ2hhbmdlZChlLG4sdGhpcyx0byl9fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuQ2FyZD1lbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtY2FyZFwiLGVvKTt2YXIgbm89e1wiXCI6XCJjYXJvdXNlbC1pdGVtLS0qXCJ9LGlvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5zdHlsZS53aWR0aD1cIjEwMCVcIixCLmluaXRNb2RpZmllcih0LG5vKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZihcIm1vZGlmaWVyXCI9PT10KXJldHVybiBCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLG5vKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCJdfX1dKSxlfSgpO2MuQ2Fyb3VzZWxJdGVtPWlvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jYXJvdXNlbC1pdGVtXCIsaW8pO3ZhciBvbz17dmVydGljYWw6e2F4aXM6XCJZXCIsc2l6ZTpcIkhlaWdodFwiLGRpcjpbXCJ1cFwiLFwiZG93blwiXSx0M2Q6W1wiMHB4LCBcIixcInB4LCAwcHhcIl19LGhvcml6b250YWw6e2F4aXM6XCJYXCIsc2l6ZTpcIldpZHRoXCIsZGlyOltcImxlZnRcIixcInJpZ2h0XCJdLHQzZDpbXCJcIixcInB4LCAwcHgsIDBweFwiXX19LHJvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzO3AodGhpcyx0KTtcImdldEluaXRpYWxJbmRleCBnZXRCdWJibGVXaWR0aCBpc1ZlcnRpY2FsIGlzT3ZlclNjcm9sbGFibGUgaXNDZW50ZXJlZFxcbiAgICBpc0F1dG9TY3JvbGxhYmxlIHJlZnJlc2hIb29rIHByZUNoYW5nZUhvb2sgcG9zdENoYW5nZUhvb2sgb3ZlclNjcm9sbEhvb2tcIi5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG5bdF09ZVt0XXx8ZnVuY3Rpb24oKXtyZXR1cm4hMX19KSx0aGlzLmdldEVsZW1lbnQ9ZS5nZXRFbGVtZW50LHRoaXMuc2Nyb2xsSG9vaz1lLnNjcm9sbEhvb2ssdGhpcy5pdGVtU2l6ZT1lLml0ZW1TaXplfHxcIjEwMCVcIix0aGlzLmdldEF1dG9TY3JvbGxSYXRpbz1mdW5jdGlvbigpe3ZhciB0PWUuZ2V0QXV0b1Njcm9sbFJhdGlvJiZlLmdldEF1dG9TY3JvbGxSYXRpby5hcHBseShlLGFyZ3VtZW50cyk7cmV0dXJuKCh0PVwibnVtYmVyXCI9PXR5cGVvZiB0JiZ0PT10P3Q6LjUpPDB8fHQ+MSkmJlEudGhyb3coXCJJbnZhbGlkIGF1dG8tc2Nyb2xsLXJhdGlvIFwiK3QrXCIuIE11c3QgYmUgYmV0d2VlbiAwIGFuZCAxXCIpLHR9LHRoaXMuc2hvdWxkQmxvY2s9XCJvdGhlclwiPT09US5nbG9iYWxzLmFjdHVhbE1vYmlsZU9TLHRoaXMub25EcmFnU3RhcnQ9dGhpcy5vbkRyYWdTdGFydC5iaW5kKHRoaXMpLHRoaXMub25EcmFnPXRoaXMub25EcmFnLmJpbmQodGhpcyksdGhpcy5vbkRyYWdFbmQ9dGhpcy5vbkRyYWdFbmQuYmluZCh0aGlzKSx0aGlzLm9uUmVzaXplPXRoaXMub25SZXNpemUuYmluZCh0aGlzKSx0aGlzLl9zaG91bGRGaXhTY3JvbGw9XCJpb3NcIj09PVEuZ2xvYmFscy5hY3R1YWxNb2JpbGVPU31yZXR1cm4gZyh0LFt7a2V5OlwiaW5pdFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWUuc3dpcGVhYmxlLGk9ZS5hdXRvUmVmcmVzaDt0aGlzLmluaXRpYWxpemVkPSEwLHRoaXMudGFyZ2V0PXRoaXMuZ2V0RWxlbWVudCgpLmNoaWxkcmVuWzBdLHRoaXMuYmxvY2tlcj10aGlzLmdldEVsZW1lbnQoKS5jaGlsZHJlblsxXSx0aGlzLnRhcmdldCYmdGhpcy5ibG9ja2VyfHxRLnRocm93KCdFeHBlY3RlZCBcInRhcmdldFwiIGFuZCBcImJsb2NrZXJcIiBlbGVtZW50cyB0byBleGlzdCBiZWZvcmUgaW5pdGlhbGl6aW5nIFN3aXBlcicpLHRoaXMuc2hvdWxkQmxvY2t8fCh0aGlzLmJsb2NrZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksdGhpcy5nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXJcIiksdGhpcy50YXJnZXQuY2xhc3NMaXN0LmFkZChcIm9ucy1zd2lwZXItdGFyZ2V0XCIpLHRoaXMuYmxvY2tlci5jbGFzc0xpc3QuYWRkKFwib25zLXN3aXBlci1ibG9ja2VyXCIpLHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcy5nZXRFbGVtZW50KCkse2RyYWdNaW5EaXN0YW5jZToxLGRyYWdMb2NrVG9BeGlzOiEwLHBhc3NpdmU6IXRoaXMuX3Nob3VsZEZpeFNjcm9sbH0pLHRoaXMuX211dGF0aW9uT2JzZXJ2ZXI9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKXtyZXR1cm4gdC5yZWZyZXNoKCl9KSx0aGlzLnVwZGF0ZVN3aXBlYWJsZShuKSx0aGlzLnVwZGF0ZUF1dG9SZWZyZXNoKGkpLHRoaXMuX3Njcm9sbD10aGlzLl9vZmZzZXQ9dGhpcy5fbGFzdEFjdGl2ZUluZGV4PTAsdGhpcy5fdXBkYXRlTGF5b3V0KCksdGhpcy5fc2V0dXBJbml0aWFsSW5kZXgoKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5pbml0aWFsaXplZCYmdC5fc2V0dXBJbml0aWFsSW5kZXgoKX0pLHdpbmRvdz09PXdpbmRvdy5wYXJlbnQmJjAhPT10aGlzLm9mZnNldEhlaWdodHx8d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbigpe3JldHVybiB0LmluaXRpYWxpemVkJiZ0Lm9uUmVzaXplKCl9KX19LHtrZXk6XCJkaXNwb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmluaXRpYWxpemVkPSExLHRoaXMudXBkYXRlU3dpcGVhYmxlKCExKSx0aGlzLnVwZGF0ZUF1dG9SZWZyZXNoKCExKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3ImJnRoaXMuX2dlc3R1cmVEZXRlY3Rvci5kaXNwb3NlKCksdGhpcy50YXJnZXQ9dGhpcy5ibG9ja2VyPXRoaXMuX2dlc3R1cmVEZXRlY3Rvcj10aGlzLl9tdXRhdGlvbk9ic2VydmVyPW51bGwsdGhpcy5zZXR1cFJlc2l6ZSghMSl9fSx7a2V5Olwib25SZXNpemVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3Njcm9sbC90aGlzLnRhcmdldFNpemU7dGhpcy5fcmVzZXQoKSx0aGlzLnNldEFjdGl2ZUluZGV4KHQpLHRoaXMucmVmcmVzaCgpfX0se2tleTpcIl9jYWxjdWxhdGVJdGVtU2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pdGVtU2l6ZS5tYXRjaCgvXihcXGQrKShweHwlKS8pO3R8fFEudGhyb3coXCJJbnZhbGlkIHN0YXRlOiBzd2lwZXIncyBzaXplIHVuaXQgbXVzdCBiZSAnJScgb3IgJ3B4J1wiKTt2YXIgZT1wYXJzZUludCh0WzFdLDEwKTtyZXR1cm5cIiVcIj09PXRbMl0/TWF0aC5yb3VuZChlLzEwMCp0aGlzLnRhcmdldFNpemUpOmV9fSx7a2V5OlwiX3NldHVwSW5pdGlhbEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9yZXNldCgpLHRoaXMuX2xhc3RBY3RpdmVJbmRleD1NYXRoLm1heChNYXRoLm1pbihOdW1iZXIodGhpcy5nZXRJbml0aWFsSW5kZXgoKSksdGhpcy5pdGVtQ291bnQpLDApLHRoaXMuX3Njcm9sbD10aGlzLl9vZmZzZXQrdGhpcy5pdGVtTnVtU2l6ZSp0aGlzLl9sYXN0QWN0aXZlSW5kZXgsdGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsKX19LHtrZXk6XCJfc2V0U3dpcGluZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJzd2lwaW5nXCIsdCl9fSx7a2V5Olwic2V0QWN0aXZlSW5kZXhcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RoaXMuX3NldFN3aXBpbmcoITApLHQ9TWF0aC5tYXgoMCxNYXRoLm1pbih0LHRoaXMuaXRlbUNvdW50LTEpKTt2YXIgaT1NYXRoLm1heCgwLE1hdGgubWluKHRoaXMubWF4U2Nyb2xsLHRoaXMuX29mZnNldCt0aGlzLml0ZW1OdW1TaXplKnQpKTtpZihDLmlzVUlXZWJWaWV3KCkpe3ZhciBvPWZ1bmN0aW9uKHQpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLHQpfShRLmFycmF5RnJvbSh0aGlzLnRhcmdldC5jaGlsZHJlbikubWFwKGZ1bmN0aW9uKHQpe3JldHVybiBRLmFycmF5RnJvbSh0LmNoaWxkcmVuKS5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFnZV9fY29udGVudFwiKX0pfSkpLHI9bmV3IE1hcDtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCl7by5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Iuc2V0KHQsdC5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSksdC5jbGFzc0xpc3QuYWRkKFwicGFnZV9fY29udGVudC0tc3VwcHJlc3MtbGF5ZXItY3JlYXRpb25cIil9KSxyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NoYW5nZVRvKGksbil9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe28uZm9yRWFjaChmdW5jdGlvbih0KXt0LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsci5nZXQodCkpfSkscmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfSl9KX1yZXR1cm4gdGhpcy5fY2hhbmdlVG8oaSxuKX19LHtrZXk6XCJnZXRBY3RpdmVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuX3Njcm9sbDt0LT10aGlzLl9vZmZzZXQ7dmFyIGU9dGhpcy5pdGVtQ291bnQsbj10aGlzLml0ZW1OdW1TaXplO2lmKDA9PT10aGlzLml0ZW1OdW1TaXplfHwhUS5pc0ludGVnZXIodCkpcmV0dXJuIHRoaXMuX2xhc3RBY3RpdmVJbmRleDtpZih0PD0wKXJldHVybiAwO2Zvcih2YXIgaT0wO2k8ZTtpKyspaWYobippPD10JiZuKihpKzEpPnQpcmV0dXJuIGk7cmV0dXJuIGUtMX19LHtrZXk6XCJzZXR1cFJlc2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3dpbmRvd1sodD9cImFkZFwiOlwicmVtb3ZlXCIpK1wiRXZlbnRMaXN0ZW5lclwiXShcInJlc2l6ZVwiLHRoaXMub25SZXNpemUsITApfX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5zZXR1cFJlc2l6ZSghMCksdGhpcy5vblJlc2l6ZSgpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gdC50YXJnZXQmJnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIil9LDFlMy82MCl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5zZXR1cFJlc2l6ZSghMSksdGhpcy50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKX19LHtrZXk6XCJ1cGRhdGVTd2lwZWFibGVcIix2YWx1ZTpmdW5jdGlvbih0KXtpZih0aGlzLl9nZXN0dXJlRGV0ZWN0b3Ipe3ZhciBlPXQ/XCJvblwiOlwib2ZmXCI7dGhpcy5fZ2VzdHVyZURldGVjdG9yW2VdKFwiZHJhZ1wiLHRoaXMub25EcmFnKSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3JbZV0oXCJkcmFnc3RhcnRcIix0aGlzLm9uRHJhZ1N0YXJ0KSx0aGlzLl9nZXN0dXJlRGV0ZWN0b3JbZV0oXCJkcmFnZW5kXCIsdGhpcy5vbkRyYWdFbmQpfX19LHtrZXk6XCJ1cGRhdGVBdXRvUmVmcmVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX211dGF0aW9uT2JzZXJ2ZXImJih0P3RoaXMuX211dGF0aW9uT2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLnRhcmdldCx7Y2hpbGRMaXN0OiEwfSk6dGhpcy5fbXV0YXRpb25PYnNlcnZlci5kaXNjb25uZWN0KCkpfX0se2tleTpcInVwZGF0ZUl0ZW1TaXplXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5pdGVtU2l6ZT10fHxcIjEwMCVcIix0aGlzLnJlZnJlc2goKX19LHtrZXk6XCJ0b2dnbGVCbG9ja2VyXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5ibG9ja2VyLnN0eWxlLnBvaW50ZXJFdmVudHM9dD9cImF1dG9cIjpcIm5vbmVcIn19LHtrZXk6XCJfY2FuQ29uc3VtZUdlc3R1cmVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10LmRpcmVjdGlvbixuPTA9PT10aGlzLl9zY3JvbGwmJiF0aGlzLmlzT3ZlclNjcm9sbGFibGUoKSxpPXRoaXMuX3Njcm9sbD09PXRoaXMubWF4U2Nyb2xsJiYhdGhpcy5pc092ZXJTY3JvbGxhYmxlKCk7cmV0dXJuIHRoaXMuaXNWZXJ0aWNhbCgpP1wiZG93blwiPT09ZSYmIW58fFwidXBcIj09PWUmJiFpOlwicmlnaHRcIj09PWUmJiFufHxcImxlZnRcIj09PWUmJiFpfX0se2tleTpcIm9uRHJhZ1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLl9pZ25vcmVEcmFnPXQuY29uc3VtZWR8fCFRLmlzVmFsaWRHZXN0dXJlKHQpLCF0aGlzLl9pZ25vcmVEcmFnKXt2YXIgbj10LmNvbnN1bWU7aWYodC5jb25zdW1lPWZ1bmN0aW9uKCl7biYmbigpLGUuX2lnbm9yZURyYWc9ITB9LHRoaXMuX2NhbkNvbnN1bWVHZXN0dXJlKHQuZ2VzdHVyZSkpe3ZhciBpPXQuZ2VzdHVyZS5jZW50ZXImJnQuZ2VzdHVyZS5jZW50ZXIuY2xpZW50WHx8MCxvPXRoaXMuZ2V0QnViYmxlV2lkdGgoKXx8MCxyPWZ1bmN0aW9uKCl7biYmbigpLHQuY29uc3VtZWQ9ITAsZS5fc3RhcnRlZD0hMCxlLnNob3VsZEJsb2NrJiZlLnRvZ2dsZUJsb2NrZXIoITApLGUuX3NldFN3aXBpbmcoITApLFEuaW9zUHJldmVudFNjcm9sbChlLl9nZXN0dXJlRGV0ZWN0b3IpfTtpPG98fGk+dGhpcy50YXJnZXRTaXplLW8/c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIWUuX2lnbm9yZURyYWcmJnIoKX0pOnIoKX19fX0se2tleTpcIm9uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3QuZ2VzdHVyZSYmIXRoaXMuX2lnbm9yZURyYWcmJnRoaXMuX3N0YXJ0ZWQmJih0aGlzLl9jb250aW51ZWQ9ITAsdC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9zY3JvbGxUbyh0aGlzLl9zY3JvbGwtdGhpcy5fZ2V0RGVsdGEodCkse3Rocm90dGxlOiEwfSkpfX0se2tleTpcIm9uRHJhZ0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3N0YXJ0ZWQ9ITEsdC5nZXN0dXJlJiYhdGhpcy5faWdub3JlRHJhZyYmdGhpcy5fY29udGludWVkKXt0aGlzLl9jb250aW51ZWQ9ITEsdC5zdG9wUHJvcGFnYXRpb24oKTt2YXIgZT10aGlzLl9zY3JvbGwtdGhpcy5fZ2V0RGVsdGEodCksbj10aGlzLl9ub3JtYWxpemVTY3JvbGwoZSk7ZT09PW4/dGhpcy5fc3RhcnRNb21lbnR1bVNjcm9sbChlLHQpOnRoaXMuX2tpbGxPdmVyU2Nyb2xsKG4pLHRoaXMuc2hvdWxkQmxvY2smJnRoaXMudG9nZ2xlQmxvY2tlcighMSl9ZWxzZSB0aGlzLl9pZ25vcmVEcmFnPSEwfX0se2tleTpcIl9zdGFydE1vbWVudHVtU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLl9nZXRWZWxvY2l0eShlKSxpPWUuZ2VzdHVyZS5pbnRlcmltRGlyZWN0aW9uPT09dGhpcy5kTS5kaXJbdGhpcy5fZ2V0RGVsdGEoZSk8MD8wOjFdLG89dGhpcy5fZ2V0QXV0b1Njcm9sbCh0LG4saSkscj1NYXRoLmFicyhvLXQpLyhuKy4wMSkvMWUzO3I9TWF0aC5taW4oLjI1LE1hdGgubWF4KC4xLHIpKSx0aGlzLl9jaGFuZ2VUbyhvLHtzd2lwZTohMCxhbmltYXRpb25PcHRpb25zOntkdXJhdGlvbjpyLHRpbWluZzpcImN1YmljLWJlemllciguNCwgLjcsIC41LCAxKVwifX0pfX0se2tleTpcIl9raWxsT3ZlclNjcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fc2Nyb2xsPXQ7dmFyIG49dGhpcy5kTS5kaXJbTnVtYmVyKHQ+MCldLGk9ZnVuY3Rpb24oKXtyZXR1cm4gZS5fY2hhbmdlVG8odCx7YW5pbWF0aW9uT3B0aW9uczp7ZHVyYXRpb246LjQsdGltaW5nOlwiY3ViaWMtYmV6aWVyKC4xLCAuNCwgLjEsIDEpXCJ9fSl9O3RoaXMub3ZlclNjcm9sbEhvb2soe2RpcmVjdGlvbjpuLGtpbGxPdmVyU2Nyb2xsOml9KXx8aSgpfX0se2tleTpcIl9jaGFuZ2VUb1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT17YWN0aXZlSW5kZXg6dGhpcy5nZXRBY3RpdmVJbmRleCh0KSxsYXN0QWN0aXZlSW5kZXg6dGhpcy5fbGFzdEFjdGl2ZUluZGV4LHN3aXBlOm4uc3dpcGV8fCExfSxvPWkuYWN0aXZlSW5kZXghPT1pLmxhc3RBY3RpdmVJbmRleCxyPSEhbyYmdGhpcy5wcmVDaGFuZ2VIb29rKGkpO3JldHVybiB0aGlzLl9zY3JvbGw9cj90aGlzLl9vZmZzZXQraS5sYXN0QWN0aXZlSW5kZXgqdGhpcy5pdGVtTnVtU2l6ZTp0LHRoaXMuX2xhc3RBY3RpdmVJbmRleD1yP2kubGFzdEFjdGl2ZUluZGV4OmkuYWN0aXZlSW5kZXgsdGhpcy5fc2Nyb2xsVG8odGhpcy5fc2Nyb2xsLG4pLnRoZW4oZnVuY3Rpb24oKXtpZih0IT09ZS5fc2Nyb2xsfHxyKXtpZihuLnJlamVjdClyZXR1cm4gZS5fc2V0U3dpcGluZyghMSksUHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZFwiKX1lbHNlIGUuX3NldFN3aXBpbmcoITEpLG8mJmUucG9zdENoYW5nZUhvb2soaSl9KX19LHtrZXk6XCJfc2Nyb2xsVG9cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKG4udGhyb3R0bGUpe2lmKHQ8MCl0PXRoaXMuaXNPdmVyU2Nyb2xsYWJsZSgpP01hdGgucm91bmQoLjM1KnQpOjA7ZWxzZXt2YXIgaT10aGlzLm1heFNjcm9sbDtpPHQmJih0PXRoaXMuaXNPdmVyU2Nyb2xsYWJsZSgpP2krTWF0aC5yb3VuZCguMzUqKHQtaSkpOmkpfX12YXIgbz1cIm5vbmVcIj09PW4uYW5pbWF0aW9uP3t9Om4uYW5pbWF0aW9uT3B0aW9ucztyZXR1cm4gdGhpcy5zY3JvbGxIb29rJiZ0aGlzLml0ZW1OdW1TaXplPjAmJnRoaXMuc2Nyb2xsSG9vaygodC90aGlzLml0ZW1OdW1TaXplKS50b0ZpeGVkKDIpLG4uYW5pbWF0aW9uT3B0aW9uc3x8e30pLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3JldHVybiBudChlLnRhcmdldCkucXVldWUoe3RyYW5zZm9ybTplLl9nZXRUcmFuc2Zvcm0odCl9LG8pLnBsYXkobil9KX19LHtrZXk6XCJfZ2V0QXV0b1Njcm9sbFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzLm1heFNjcm9sbCxvPXRoaXMuX29mZnNldCxyPXRoaXMuaXRlbU51bVNpemU7aWYoIXRoaXMuaXNBdXRvU2Nyb2xsYWJsZSgpKXJldHVybiBNYXRoLm1heCgwLE1hdGgubWluKGksdCkpO2Zvcih2YXIgYT1bXSxzPW87czxpO3MrPXIpYS5wdXNoKHMpO2EucHVzaChpKTt2YXIgbD0oYT1hLnNvcnQoZnVuY3Rpb24oZSxuKXtyZXR1cm4gTWF0aC5hYnMoZS10KS1NYXRoLmFicyhuLXQpfSkuZmlsdGVyKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIWV8fHQhPT1hW2UtMV19KSlbMF0sdT10aGlzLl9sYXN0QWN0aXZlSW5kZXgqcitvLGM9TWF0aC5hYnModC11KS9yO3JldHVybiBjPD10aGlzLmdldEF1dG9TY3JvbGxSYXRpbyhuLGUscik/bD11OmM8MSYmYVswXT09PXUmJmEubGVuZ3RoPjEmJihsPWFbMV0pLE1hdGgubWF4KDAsTWF0aC5taW4oaSxsKSl9fSx7a2V5OlwiX3Jlc2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl90YXJnZXRTaXplPXRoaXMuX2l0ZW1OdW1TaXplPXZvaWQgMH19LHtrZXk6XCJfbm9ybWFsaXplU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgubWF4KE1hdGgubWluKHQsdGhpcy5tYXhTY3JvbGwpLDApfX0se2tleTpcInJlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuX3Jlc2V0KCksdGhpcy5fdXBkYXRlTGF5b3V0KCksUS5pc0ludGVnZXIodGhpcy5fc2Nyb2xsKSl7dmFyIHQ9dGhpcy5fbm9ybWFsaXplU2Nyb2xsKHRoaXMuX3Njcm9sbCk7dCE9PXRoaXMuX3Njcm9sbD90aGlzLl9raWxsT3ZlclNjcm9sbCh0KTp0aGlzLl9jaGFuZ2VUbyh0KX1lbHNlIHRoaXMuX3NldHVwSW5pdGlhbEluZGV4KCk7dGhpcy5yZWZyZXNoSG9vaygpfX0se2tleTpcIl9nZXREZWx0YVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Lmdlc3R1cmVbXCJkZWx0YVwiK3RoaXMuZE0uYXhpc119fSx7a2V5OlwiX2dldFZlbG9jaXR5XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHQuZ2VzdHVyZVtcInZlbG9jaXR5XCIrdGhpcy5kTS5heGlzXX19LHtrZXk6XCJfZ2V0VHJhbnNmb3JtXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIit0aGlzLmRNLnQzZFswXSstdCt0aGlzLmRNLnQzZFsxXStcIilcIn19LHtrZXk6XCJfdXBkYXRlTGF5b3V0XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmRNPW9vW3RoaXMuaXNWZXJ0aWNhbCgpP1widmVydGljYWxcIjpcImhvcml6b250YWxcIl0sdGhpcy50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcIm9ucy1zd2lwZXItdGFyZ2V0LS12ZXJ0aWNhbFwiLHRoaXMuaXNWZXJ0aWNhbCgpKTtmb3IodmFyIHQ9dGhpcy50YXJnZXQuY2hpbGRyZW5bMF07dDt0PXQubmV4dEVsZW1lbnRTaWJsaW5nKXQuc3R5bGVbdGhpcy5kTS5zaXplLnRvTG93ZXJDYXNlKCldPXRoaXMuaXRlbVNpemU7dGhpcy5pc0NlbnRlcmVkKCkmJih0aGlzLl9vZmZzZXQ9KHRoaXMudGFyZ2V0U2l6ZS10aGlzLml0ZW1OdW1TaXplKS8tMnx8MCl9fSx7a2V5OlwiaXRlbUNvdW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGFyZ2V0LmNoaWxkcmVuLmxlbmd0aH19LHtrZXk6XCJpdGVtTnVtU2l6ZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiB0aGlzLl9pdGVtTnVtU2l6ZSYmdGhpcy5faXRlbU51bVNpemU9PXRoaXMuX2l0ZW1OdW1TaXplfHwodGhpcy5faXRlbU51bVNpemU9dGhpcy5fY2FsY3VsYXRlSXRlbVNpemUoKSksdGhpcy5faXRlbU51bVNpemV9fSx7a2V5OlwibWF4U2Nyb2xsXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5pdGVtQ291bnQqdGhpcy5pdGVtTnVtU2l6ZS10aGlzLnRhcmdldFNpemU7cmV0dXJuIE1hdGguY2VpbCh0PDA/MDp0KX19LHtrZXk6XCJ0YXJnZXRTaXplXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldFNpemV8fCh0aGlzLl90YXJnZXRTaXplPXRoaXMudGFyZ2V0W1wib2Zmc2V0XCIrdGhpcy5kTS5zaXplXSksdGhpcy5fdGFyZ2V0U2l6ZX19XSksdH0oKSxhbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmNoaWxkcmVuWzBdJiZcIk9OUy1DQVJPVVNFTC1JVEVNXCIhPT10aGlzLmNoaWxkcmVuWzBdLnRhZ05hbWUmJnRoaXMuY2hpbGRyZW5bMF18fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoIXQucGFyZW50Tm9kZSl7Zm9yKDt0aGlzLmZpcnN0Q2hpbGQ7KXQuYXBwZW5kQ2hpbGQodGhpcy5maXJzdENoaWxkKTt0aGlzLmFwcGVuZENoaWxkKHQpfSF0aGlzLmNoaWxkcmVuWzFdJiZ0aGlzLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLHRoaXMuYXBwZW5kQ2hpbGQ9dGhpcy5hcHBlbmRDaGlsZC5iaW5kKHQpLHRoaXMuaW5zZXJ0QmVmb3JlPXRoaXMuaW5zZXJ0QmVmb3JlLmJpbmQodCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc3dpcGVyfHwodGhpcy5fc3dpcGVyPW5ldyBybyh7Z2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0fSxnZXRJbml0aWFsSW5kZXg6ZnVuY3Rpb24oKXtyZXR1cm4gdC5nZXRBdHRyaWJ1dGUoXCJpbml0aWFsLWluZGV4XCIpfSxnZXRBdXRvU2Nyb2xsUmF0aW86ZnVuY3Rpb24oKXtyZXR1cm4gdC5hdXRvU2Nyb2xsUmF0aW99LGlzVmVydGljYWw6ZnVuY3Rpb24oKXtyZXR1cm4gdC52ZXJ0aWNhbH0saXNPdmVyU2Nyb2xsYWJsZTpmdW5jdGlvbigpe3JldHVybiB0Lm92ZXJzY3JvbGxhYmxlfSxpc0NlbnRlcmVkOmZ1bmN0aW9uKCl7cmV0dXJuIHQuY2VudGVyZWR9LGlzQXV0b1Njcm9sbGFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gdC5hdXRvU2Nyb2xsfSxpdGVtU2l6ZTp0aGlzLml0ZW1TaXplLG92ZXJTY3JvbGxIb29rOnRoaXMuX29uT3ZlclNjcm9sbC5iaW5kKHRoaXMpLHByZUNoYW5nZUhvb2s6dGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzLFwicHJlY2hhbmdlXCIpLHBvc3RDaGFuZ2VIb29rOnRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcyxcInBvc3RjaGFuZ2VcIikscmVmcmVzaEhvb2s6dGhpcy5fb25SZWZyZXNoLmJpbmQodGhpcyksc2Nyb2xsSG9vazpmdW5jdGlvbigpe3JldHVybiB0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlLmFwcGx5KHQsYXJndW1lbnRzKX19KSxuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gdC5fc3dpcGVyLmluaXQoe3N3aXBlYWJsZTp0Lmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKSxhdXRvUmVmcmVzaDp0Lmhhc0F0dHJpYnV0ZShcImF1dG8tcmVmcmVzaFwiKX0pfSkpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZXImJnRoaXMuX3N3aXBlci5pbml0aWFsaXplZCYmKHRoaXMuX3N3aXBlci5kaXNwb3NlKCksdGhpcy5fc3dpcGVyPW51bGwpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZih0aGlzLl9zd2lwZXIpc3dpdGNoKHQpe2Nhc2VcInN3aXBlYWJsZVwiOnRoaXMuX3N3aXBlci51cGRhdGVTd2lwZWFibGUodGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIikpO2JyZWFrO2Nhc2VcImF1dG8tcmVmcmVzaFwiOnRoaXMuX3N3aXBlci51cGRhdGVBdXRvUmVmcmVzaCh0aGlzLmhhc0F0dHJpYnV0ZShcImF1dG8tcmVmcmVzaFwiKSk7YnJlYWs7Y2FzZVwiaXRlbS1oZWlnaHRcIjp0aGlzLnZlcnRpY2FsJiZ0aGlzLl9zd2lwZXIudXBkYXRlSXRlbVNpemUodGhpcy5pdGVtU2l6ZSk7YnJlYWs7Y2FzZVwiaXRlbS13aWR0aFwiOnRoaXMudmVydGljYWx8fHRoaXMuX3N3aXBlci51cGRhdGVJdGVtU2l6ZSh0aGlzLml0ZW1TaXplKTticmVhaztjYXNlXCJkaXJlY3Rpb25cIjp0aGlzLl9zd2lwZXIucmVmcmVzaCgpfX19LHtrZXk6XCJfc2hvd1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyLnNob3coKX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyLmhpZGUoKX19LHtrZXk6XCJfb25PdmVyU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dC5kaXJlY3Rpb24sbj10LmtpbGxPdmVyU2Nyb2xsLGk9ITE7cmV0dXJuIFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwib3ZlcnNjcm9sbFwiLHtjYXJvdXNlbDp0aGlzLGFjdGl2ZUluZGV4OnRoaXMuZ2V0QWN0aXZlSW5kZXgoKSxkaXJlY3Rpb246ZSx3YWl0VG9SZXR1cm46ZnVuY3Rpb24odCl7aT0hMCx0LnRoZW4obil9fSksaX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWUuYWN0aXZlSW5kZXgsaT1lLmxhc3RBY3RpdmVJbmRleDtRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyx0LHtjYXJvdXNlbDp0aGlzLGFjdGl2ZUluZGV4Om4sbGFzdEFjdGl2ZUluZGV4Oml9KX19LHtrZXk6XCJfb25SZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInJlZnJlc2hcIix7Y2Fyb3VzZWw6dGhpc30pfX0se2tleTpcInNldEFjdGl2ZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm4gbj1fKHthbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIiksYW5pbWF0aW9uT3B0aW9uczp0aGlzLmhhc0F0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpP1EuYW5pbWF0aW9uT3B0aW9uc1BhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpOntkdXJhdGlvbjouMyx0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjQsIC43LCAuNSwgMSlcIn19LG4pLHRoaXMuX3N3aXBlci5zZXRBY3RpdmVJbmRleCh0LG4pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZuLmNhbGxiYWNrKGUpLFByb21pc2UucmVzb2x2ZShlKX0pfX0se2tleTpcImdldEFjdGl2ZUluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3dpcGVyLmdldEFjdGl2ZUluZGV4KCl9fSx7a2V5OlwibmV4dFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldEFjdGl2ZUluZGV4KHRoaXMuZ2V0QWN0aXZlSW5kZXgoKSsxLHQpfX0se2tleTpcInByZXZcIix2YWx1ZTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5zZXRBY3RpdmVJbmRleCh0aGlzLmdldEFjdGl2ZUluZGV4KCktMSx0KX19LHtrZXk6XCJmaXJzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldEFjdGl2ZUluZGV4KDAsdCl9fSx7a2V5OlwibGFzdFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuc2V0QWN0aXZlSW5kZXgoTWF0aC5tYXgodGhpcy5pdGVtQ291bnQtMSwwKSx0KX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zd2lwZXIucmVmcmVzaCgpfX0se2tleTpcIml0ZW1Db3VudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zd2lwZXIuaXRlbUNvdW50fX0se2tleTpcInN3aXBlYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwic3dpcGVhYmxlXCIsdCl9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX0se2tleTpcImF1dG9TY3JvbGxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJhdXRvLXNjcm9sbFwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiYXV0by1zY3JvbGxcIix0KX19LHtrZXk6XCJ2ZXJ0aWNhbFwiLGdldDpmdW5jdGlvbigpe3JldHVyblwidmVydGljYWxcIj09PXRoaXMuZ2V0QXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpfX0se2tleTpcIml0ZW1TaXplXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9KHRoaXMuZ2V0QXR0cmlidXRlKFwiaXRlbS1cIisodGhpcy52ZXJ0aWNhbD9cImhlaWdodFwiOlwid2lkdGhcIikpfHxcIlwiKS50cmltKCk7cmV0dXJuIHQubWF0Y2goL15cXGQrKHB4fCUpJC8pP3Q6XCIxMDAlXCJ9fSx7a2V5OlwiYXV0b1Njcm9sbFJhdGlvXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlRmxvYXQodGhpcy5nZXRBdHRyaWJ1dGUoXCJhdXRvLXNjcm9sbC1yYXRpb1wiKSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLnNldEF0dHJpYnV0ZShcImF1dG8tc2Nyb2xsLXJhdGlvXCIsdCl9fSx7a2V5OlwiZGlzYWJsZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX19LHtrZXk6XCJvdmVyc2Nyb2xsYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcIm92ZXJzY3JvbGxhYmxlXCIpfSxzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJvdmVyc2Nyb2xsYWJsZVwiLHQpfX0se2tleTpcImNlbnRlcmVkXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiY2VudGVyZWRcIil9LHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImNlbnRlcmVkXCIsdCl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJzd2lwZWFibGVcIixcImF1dG8tcmVmcmVzaFwiLFwiZGlyZWN0aW9uXCIsXCJpdGVtLWhlaWdodFwiLFwiaXRlbS13aWR0aFwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwb3N0Y2hhbmdlXCIsXCJyZWZyZXNoXCIsXCJvdmVyc2Nyb2xsXCJdfX1dKSxlfSgpO2MuQ2Fyb3VzZWw9YW8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWNhcm91c2VsXCIsYW8pO3ZhciBzbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikmJnQuX3VwZGF0ZVdpZHRoKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7XCJ3aWR0aFwiPT09dCYmdGhpcy5fdXBkYXRlV2lkdGgoKX19LHtrZXk6XCJfdXBkYXRlV2lkdGhcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwid2lkdGhcIik7dD8odD10LnRyaW0oKS5tYXRjaCgvXlxcZCskLyk/dCtcIiVcIjp0LGQodGhpcyx7ZmxleDpcIjAgMCBcIit0LG1heFdpZHRoOnR9KSk6ZC5jbGVhcih0aGlzLFwiZmxleCBtYXhXaWR0aFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIndpZHRoXCJdfX1dKSxlfSgpO2MuQ29sPXNvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1jb2xcIixzbyk7dmFyIGxvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJsaW5lYXJcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19XSksZX0oKSx1bz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZS1pbi1vdXRcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjM6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxsbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTYwJSwgMClcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIixvcGFjaXR5OjF9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNjAlLCAwKVwiLG9wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fV0pLGV9KCksY289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2UtaW4tb3V0XCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYm9keUhlaWdodD1kb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxsfXJldHVybiBiKGUsbG8pLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50LnJ1bkFsbChudCh0Ll9tYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KSxudCh0Ll9kaWFsb2csdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKyh0aGlzLmJvZHlIZWlnaHQvMi0xKStcInB4LCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgLTUwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKC01MCUsIFwiKyh0aGlzLmJvZHlIZWlnaHQvMi0xKStcInB4LCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19XSksZX0oKSxobz17XCIuZGlhbG9nXCI6XCJkaWFsb2ctLSpcIixcIi5kaWFsb2ctY29udGFpbmVyXCI6XCJkaWFsb2ctY29udGFpbmVyLS0qXCIsXCIuZGlhbG9nLW1hc2tcIjpcImRpYWxvZy1tYXNrLS0qXCJ9LGZvPXtkZWZhdWx0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/dW86Y299LHNsaWRlOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5ib2R5SGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LGx9cmV0dXJuIGIoZSxsbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQucnVuQWxsKG50KHQuX21hc2ssdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHQuX2RpYWxvZyx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgXCIrKC10aGlzLmJvZHlIZWlnaHQvMisxLXQuX2RpYWxvZy5jbGllbnRIZWlnaHQpK1wicHgsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudC5ydW5BbGwobnQodC5fbWFzayx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eToxfSx7b3BhY2l0eTowfSksbnQodC5fZGlhbG9nLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNTAlLCAtNTAlLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTUwJSwgXCIrKC10aGlzLmJvZHlIZWlnaHQvMisxLXQuX2RpYWxvZy5jbGllbnRIZWlnaHQpK1wicHgsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkpfX1dKSxlfSgpLG5vbmU6bG99LHBvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxOaSksZyhlLFt7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPKHthbmltYXRvcnM6Zm8sYmFzZUNsYXNzOmxvLGJhc2VDbGFzc05hbWU6XCJEaWFsb2dBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xMDAwMSwhdGhpcy5fZGlhbG9nKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NMaXN0LmFkZChcImRpYWxvZ1wiKTt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2ZvcihlLmNsYXNzTGlzdC5hZGQoXCJkaWFsb2ctY29udGFpbmVyXCIpO3RoaXMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO3QuYXBwZW5kQ2hpbGQoZSksdGhpcy5hcHBlbmRDaGlsZCh0KX1pZighdGhpcy5fbWFzayl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmNsYXNzTGlzdC5hZGQoXCJkaWFsb2ctbWFza1wiKSx0aGlzLmluc2VydEJlZm9yZShuLHRoaXMuZmlyc3RDaGlsZCl9dGhpcy5fZGlhbG9nLnN0eWxlLnpJbmRleD0yMDAwMSx0aGlzLl9tYXNrLnN0eWxlLnpJbmRleD0yZTQsdGhpcy5zZXRBdHRyaWJ1dGUoXCJzdGF0dXMtYmFyLWZpbGxcIixcIlwiKSxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBob319LHtrZXk6XCJfbWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLmRpYWxvZy1tYXNrXCIpfX0se2tleTpcIl9kaWFsb2dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5kaWFsb2dcIil9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIGxvfHxRLnRocm93QW5pbWF0b3IoXCJEaWFsb2dcIiksZm9bdF09ZX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gZm99fSx7a2V5OlwiRGlhbG9nQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbG99fV0pLGV9KCk7Yy5EaWFsb2c9cG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWRpYWxvZ1wiLHBvKTt2YXIgZ289XCJmYWJcIixtbz17XCJcIjpcImZhYi0tKlwiLFwiLmZhYl9faWNvblwiOlwiZmFiLS0qX19pY29uXCJ9LF9vPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5oaWRlKCksdC5jbGFzc0xpc3QuYWRkKGdvKSxuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZihOLnByZXBhcmUodGhpcyksIVEuZmluZENoaWxkKHRoaXMsXCIuZmFiX19pY29uXCIpKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTt0LmNsYXNzTGlzdC5hZGQoXCJmYWJfX2ljb25cIiksUS5hcnJheUZyb20odGhpcy5jaGlsZE5vZGVzKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UudGFnTmFtZSYmXCJvbnMtcmlwcGxlXCI9PT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8dC5hcHBlbmRDaGlsZChlKX0pLHRoaXMuYXBwZW5kQ2hpbGQodCl9dGhpcy5fdXBkYXRlUmlwcGxlKCksQi5pbml0TW9kaWZpZXIodGhpcyxtbyksdGhpcy5fdXBkYXRlUG9zaXRpb24oKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5zaG93KCl9KX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxnbyxtbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLG1vKTticmVhaztjYXNlXCJyaXBwbGVcIjp0aGlzLl91cGRhdGVSaXBwbGUoKTticmVhaztjYXNlXCJwb3NpdGlvblwiOnRoaXMuX3VwZGF0ZVBvc2l0aW9uKCl9fX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNob3coKX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5oaWRlKCl9KX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnVwZGF0ZVJpcHBsZSh0aGlzKX19LHtrZXk6XCJfdXBkYXRlUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7c3dpdGNoKHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImZhYi0tdG9wX19sZWZ0XCIsXCJmYWItLWJvdHRvbV9fcmlnaHRcIixcImZhYi0tYm90dG9tX19sZWZ0XCIsXCJmYWItLXRvcF9fcmlnaHRcIixcImZhYi0tdG9wX19jZW50ZXJcIixcImZhYi0tYm90dG9tX19jZW50ZXJcIiksdCl7Y2FzZVwidG9wIHJpZ2h0XCI6Y2FzZVwicmlnaHQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcInRvcCBsZWZ0XCI6Y2FzZVwibGVmdCB0b3BcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLXRvcF9fbGVmdFwiKTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpjYXNlXCJyaWdodCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fcmlnaHRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIGxlZnRcIjpjYXNlXCJsZWZ0IGJvdHRvbVwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19sZWZ0XCIpO2JyZWFrO2Nhc2VcImNlbnRlciB0b3BcIjpjYXNlXCJ0b3AgY2VudGVyXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2NlbnRlclwiKTticmVhaztjYXNlXCJjZW50ZXIgYm90dG9tXCI6Y2FzZVwiYm90dG9tIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19jZW50ZXJcIil9fX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudG9nZ2xlKCEwKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnRvZ2dsZSghMSl9fSx7a2V5OlwidG9nZ2xlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06IXRoaXMudmlzaWJsZSxlPSh0aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpfHxcIlwiKS5pbmRleE9mKFwiYm90dG9tXCIpPj0wP1widHJhbnNsYXRlM2QoMHB4LCAtXCIrKFEuZ2xvYmFscy5mYWJPZmZzZXR8fDApK1wicHgsIDBweClcIjpcIlwiO2QodGhpcyx7dHJhbnNmb3JtOmUrXCIgc2NhbGUoXCIrTnVtYmVyKHQpK1wiKVwifSl9fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19LHtrZXk6XCJ2aXNpYmxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuLTE9PT10aGlzLnN0eWxlLnRyYW5zZm9ybS5pbmRleE9mKFwic2NhbGUoMClcIikmJlwibm9uZVwiIT09dGhpcy5zdHlsZS5kaXNwbGF5fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInJpcHBsZVwiLFwicG9zaXRpb25cIixcImNsYXNzXCJdfX1dKSxlfSgpO2MuRmFiPV9vLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1mYWJcIixfbyk7dmFyIHZvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZ2VzdHVyZURldGVjdG9yPW5ldyBzdCh0LHtwYXNzaXZlOiEwfSksdH1yZXR1cm4gYihlLFBpKSxlfSgpO2MuR2VzdHVyZURldGVjdG9yPXZvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1nZXN0dXJlLWRldGVjdG9yXCIsdm8pO3ZhciBibz1cImZhXCIseW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9jb21waWxlKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7dGhpcy5fY2xlYW5DbGFzc0F0dHJpYnV0ZShcImljb25cIj09PXQ/ZTp0aGlzLmdldEF0dHJpYnV0ZShcImljb25cIiksXCJtb2RpZmllclwiPT09dD9lOnZvaWQgMCksdGhpcy5fdXBkYXRlKCl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLl91cGRhdGUoKX19LHtrZXk6XCJfdXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fYnVpbGRDbGFzc0FuZFN0eWxlKHRoaXMuX3BhcnNlQXR0cihcImljb25cIiksdGhpcy5fcGFyc2VBdHRyKFwic2l6ZVwiKSksbj1lLmNsYXNzTGlzdCxpPWUuc3R5bGU7US5leHRlbmQodGhpcy5zdHlsZSxpKSxuLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuY2xhc3NMaXN0LmFkZChlKX0pfX0se2tleTpcIl9wYXJzZUF0dHJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06dGhpcy5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKXx8XCJcIixuPSh0aGlzLmdldEF0dHJpYnV0ZSh0KXx8dHx8XCJcIikuc3BsaXQoL1xccyosXFxzKi8pLGk9blswXSxvPW5bMV07cmV0dXJuIG89KG98fFwiXCIpLnNwbGl0KC9cXHMqOlxccyovKSwoZSYmUmVnRXhwKFwiKF58XFxcXHMrKVwiK29bMF0rXCIoJHxcXFxccyspXCIsXCJpXCIpLnRlc3QoZSk/b1sxXTppKXx8XCJcIn19LHtrZXk6XCJfY2xlYW5DbGFzc0F0dHJpYnV0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPXRoaXMuX3ByZWZpeEljb24odGhpcy5fcGFyc2VBdHRyKHQsZSkpLG89aS5jbGFzc05hbWUscj1pLnByZWZpeCxhPW8hPT1yP1wifFwiK3IrXCIkfFwiK3IrXCItXCI6XCJ8XCIrbytcIiRcInx8XCJcIixzPW5ldyBSZWdFeHAoXCJeKGZhJHxmYS18aW9uLXx6bWRpJHx6bWRpLXxvbnMtaWNvbi0tXCIrYStcIilcIik7US5hcnJheUZyb20odGhpcy5jbGFzc0xpc3QpLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gcy50ZXN0KHQpfSkuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gbi5jbGFzc0xpc3QucmVtb3ZlKHQpfSl9fSx7a2V5OlwiX3ByZWZpeEljb25cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1ibysoYm8/XCItXCI6XCJcIikrdDtyZXR1cm57Y2xhc3NOYW1lOmUscHJlZml4OmUuc3BsaXQoXCItXCIpWzBdfX19LHtrZXk6XCJfYnVpbGRDbGFzc0FuZFN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt2YXIgbj1bXCJvbnMtaWNvblwiXSxpPXt9O2lmKDA9PT10LmluZGV4T2YoXCJpb24tXCIpKW4ucHVzaCh0KSxuLnB1c2goXCJvbnMtaWNvbi0taW9uXCIpO2Vsc2UgaWYoMD09PXQuaW5kZXhPZihcImZhLVwiKSluLnB1c2godCksbi5wdXNoKFwiZmFcIik7ZWxzZSBpZigwPT09dC5pbmRleE9mKFwibWQtXCIpKW4ucHVzaChcInptZGlcIiksbi5wdXNoKFwiem1kaS1cIit0LnNwbGl0KC8tKC4rKT8vKVsxXSk7ZWxzZXt2YXIgbz10aGlzLl9wcmVmaXhJY29uKHQpLHI9by5jbGFzc05hbWUsYT1vLnByZWZpeDthJiZuLnB1c2goYSksciYmbi5wdXNoKHIpfXJldHVybiBlLm1hdGNoKC9eWzEtNV14fGxnJC8pPyhuLnB1c2goXCJvbnMtaWNvbi0tXCIrZSksdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImZvbnQtc2l6ZVwiKSk6aS5mb250U2l6ZT1lLHtjbGFzc0xpc3Q6bixzdHlsZTppfX19XSxbe2tleTpcInNldEF1dG9QcmVmaXhcIix2YWx1ZTpmdW5jdGlvbih0KXtibz10P1wic3RyaW5nXCI9PXR5cGVvZiB0JiZ0fHxcImZhXCI6XCJcIn19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJpY29uXCIsXCJzaXplXCIsXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5JY29uPXlvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1pY29uXCIseW8pO3ZhciBrbz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7cCh0aGlzLHQpLFwib2JqZWN0XCI9PT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmYoZSkpJiZudWxsIT09ZXx8US50aHJvdygnXCJkZWxlZ2F0ZVwiIHBhcmFtZXRlciBtdXN0IGJlIGFuIG9iamVjdCcpLHRoaXMuX3VzZXJEZWxlZ2F0ZT1lLG4gaW5zdGFuY2VvZiBFbGVtZW50fHxudWxsPT09bnx8US50aHJvdygnXCJ0ZW1wbGF0ZUVsZW1lbnRcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBFbGVtZW50IG9yIG51bGwnKSx0aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9bn1yZXR1cm4gZyh0LFt7a2V5OlwiaGFzUmVuZGVyRnVuY3Rpb25cIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl91c2VyRGVsZWdhdGUuX3JlbmRlciBpbnN0YW5jZW9mIEZ1bmN0aW9ufX0se2tleTpcIl9yZW5kZXJcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3VzZXJEZWxlZ2F0ZS5fcmVuZGVyLmFwcGx5KHRoaXMuX3VzZXJEZWxlZ2F0ZSxhcmd1bWVudHMpfX0se2tleTpcImxvYWRJdGVtRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fdXNlckRlbGVnYXRlLmxvYWRJdGVtRWxlbWVudCBpbnN0YW5jZW9mIEZ1bmN0aW9uKXRoaXMuX3VzZXJEZWxlZ2F0ZS5sb2FkSXRlbUVsZW1lbnQodCxlKTtlbHNle3ZhciBuPXRoaXMuX3VzZXJEZWxlZ2F0ZS5jcmVhdGVJdGVtQ29udGVudCh0LHRoaXMuX3RlbXBsYXRlRWxlbWVudCk7biBpbnN0YW5jZW9mIEVsZW1lbnR8fFEudGhyb3coJ1wiY3JlYXRlSXRlbUNvbnRlbnRcIiBtdXN0IHJldHVybiBhbiBpbnN0YW5jZSBvZiBFbGVtZW50JyksZSh7ZWxlbWVudDpufSl9fX0se2tleTpcImNvdW50SXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3VzZXJEZWxlZ2F0ZS5jb3VudEl0ZW1zKCk7cmV0dXJuXCJudW1iZXJcIiE9dHlwZW9mIHQmJlEudGhyb3coJ1wiY291bnRJdGVtc1wiIG11c3QgcmV0dXJuIGEgbnVtYmVyJyksdH19LHtrZXk6XCJ1cGRhdGVJdGVtXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl91c2VyRGVsZWdhdGUudXBkYXRlSXRlbUNvbnRlbnQgaW5zdGFuY2VvZiBGdW5jdGlvbiYmdGhpcy5fdXNlckRlbGVnYXRlLnVwZGF0ZUl0ZW1Db250ZW50KHQsZSl9fSx7a2V5OlwiY2FsY3VsYXRlSXRlbUhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX3VzZXJEZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0IGluc3RhbmNlb2YgRnVuY3Rpb24pe3ZhciBlPXRoaXMuX3VzZXJEZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0KHQpO3JldHVyblwibnVtYmVyXCIhPXR5cGVvZiBlJiZRLnRocm93KCdcImNhbGN1bGF0ZUl0ZW1IZWlnaHRcIiBtdXN0IHJldHVybiBhIG51bWJlcicpLGV9cmV0dXJuIDB9fSx7a2V5OlwiZGVzdHJveUl0ZW1cIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3VzZXJEZWxlZ2F0ZS5kZXN0cm95SXRlbSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZ0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveUl0ZW0odCxlKX19LHtrZXk6XCJkZXN0cm95XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZ0aGlzLl91c2VyRGVsZWdhdGUuZGVzdHJveSgpLHRoaXMuX3VzZXJEZWxlZ2F0ZT10aGlzLl90ZW1wbGF0ZUVsZW1lbnQ9bnVsbH19LHtrZXk6XCJpdGVtSGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3VzZXJEZWxlZ2F0ZS5pdGVtSGVpZ2h0fX1dKSx0fSgpLHdvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSxuIGluc3RhbmNlb2Yga298fFEudGhyb3coJ1wiZGVsZWdhdGVcIiBwYXJhbWV0ZXIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBMYXp5UmVwZWF0RGVsZWdhdGUnKSx0aGlzLl93cmFwcGVyRWxlbWVudD1lLHRoaXMuX2RlbGVnYXRlPW4sdGhpcy5faW5zZXJ0SW5kZXg9dGhpcy5fd3JhcHBlckVsZW1lbnQuY2hpbGRyZW5bMF0mJlwiT05TLUxBWlktUkVQRUFUXCI9PT10aGlzLl93cmFwcGVyRWxlbWVudC5jaGlsZHJlblswXS50YWdOYW1lPzE6MCxcIm9ucy1saXN0XCI9PT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmZS5jbGFzc0xpc3QuYWRkKFwibGF6eS1saXN0XCIpLHRoaXMuX3BhZ2VDb250ZW50PXRoaXMuX2ZpbmRQYWdlQ29udGVudEVsZW1lbnQoZSksdGhpcy5fcGFnZUNvbnRlbnR8fFEudGhyb3coXCJMYXp5UmVwZWF0IG11c3QgYmUgZGVzY2VuZGFudCBvZiBhIFBhZ2UgZWxlbWVudFwiKSx0aGlzLmxhc3RTY3JvbGxUb3A9dGhpcy5fcGFnZUNvbnRlbnQuc2Nyb2xsVG9wLHRoaXMucGFkZGluZz0wLHRoaXMuX3RvcFBvc2l0aW9ucz1bMF0sdGhpcy5fcmVuZGVyZWRJdGVtcz17fSx0aGlzLl9kZWxlZ2F0ZS5pdGVtSGVpZ2h0fHx0aGlzLl9kZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0KDApfHwodGhpcy5fdW5rbm93bkl0ZW1IZWlnaHQ9ITApLHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCksdGhpcy5fb25DaGFuZ2UoKX1yZXR1cm4gZyh0LFt7a2V5OlwiX2ZpbmRQYWdlQ29udGVudEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1RLmZpbmRQYXJlbnQodCxcIi5wYWdlX19jb250ZW50XCIpO2lmKGUpcmV0dXJuIGU7dmFyIG49US5maW5kUGFyZW50KHQsXCJvbnMtcGFnZVwiKTtpZihuKXt2YXIgaT1RLmZpbmRDaGlsZChuLFwiLmNvbnRlbnRcIik7aWYoaSlyZXR1cm4gaX1yZXR1cm4gbnVsbH19LHtrZXk6XCJfY2hlY2tJdGVtSGVpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9kZWxlZ2F0ZS5sb2FkSXRlbUVsZW1lbnQoMCxmdW5jdGlvbihuKXtlLl91bmtub3duSXRlbUhlaWdodHx8US50aHJvdyhcIkludmFsaWQgc3RhdGVcIiksZS5fd3JhcHBlckVsZW1lbnQuYXBwZW5kQ2hpbGQobi5lbGVtZW50KTt2YXIgaT1mdW5jdGlvbigpe2UuX2RlbGVnYXRlLmRlc3Ryb3lJdGVtKDAsbiksbi5lbGVtZW50JiZuLmVsZW1lbnQucmVtb3ZlKCksZGVsZXRlIGUuX3Vua25vd25JdGVtSGVpZ2h0LHQoKX07ZS5faXRlbUhlaWdodD1uLmVsZW1lbnQub2Zmc2V0SGVpZ2h0LGUuX2l0ZW1IZWlnaHQ+MD9pKCk6KGUuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIixuLmVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe2UuX2l0ZW1IZWlnaHQ9bi5lbGVtZW50Lm9mZnNldEhlaWdodCwwPT1lLl9pdGVtSGVpZ2h0JiZRLnRocm93KCdJbnZhbGlkIHN0YXRlOiBcIml0ZW1IZWlnaHRcIiBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJyksZS5fd3JhcHBlckVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1cIlwiLGkoKX0pKX0pfX0se2tleTpcIl9jb3VudEl0ZW1zXCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVsZWdhdGUuY291bnRJdGVtcygpfX0se2tleTpcIl9nZXRJdGVtSGVpZ2h0XCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3JlbmRlcmVkSXRlbXMuaGFzT3duUHJvcGVydHkodCk/KHRoaXMuX3JlbmRlcmVkSXRlbXNbdF0uaGFzT3duUHJvcGVydHkoXCJoZWlnaHRcIil8fCh0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmhlaWdodD10aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmVsZW1lbnQub2Zmc2V0SGVpZ2h0KSx0aGlzLl9yZW5kZXJlZEl0ZW1zW3RdLmhlaWdodCk6dGhpcy5fdG9wUG9zaXRpb25zW3QrMV0mJnRoaXMuX3RvcFBvc2l0aW9uc1t0XT90aGlzLl90b3BQb3NpdGlvbnNbdCsxXS10aGlzLl90b3BQb3NpdGlvbnNbdF06dGhpcy5zdGF0aWNJdGVtSGVpZ2h0fHx0aGlzLl9kZWxlZ2F0ZS5jYWxjdWxhdGVJdGVtSGVpZ2h0KHQpfX0se2tleTpcIl9jYWxjdWxhdGVSZW5kZXJlZEhlaWdodFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykucmVkdWNlKGZ1bmN0aW9uKGUsbil7cmV0dXJuIGUrdC5fZ2V0SXRlbUhlaWdodCgrbil9LDApfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKCl9fSx7a2V5OlwiX2xhc3RJdGVtUmVuZGVyZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heC5hcHBseShNYXRoLHcoT2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykpKX19LHtrZXk6XCJfZmlyc3RJdGVtUmVuZGVyZWRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1pbi5hcHBseShNYXRoLHcoT2JqZWN0LmtleXModGhpcy5fcmVuZGVyZWRJdGVtcykpKX19LHtrZXk6XCJyZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD17Zm9yY2VTY3JvbGxEb3duOiEwfSxlPU1hdGgubWluKHRoaXMuX2xhc3RJdGVtUmVuZGVyZWQoKSx0aGlzLl9jb3VudEl0ZW1zKCktMSksbj10aGlzLl9maXJzdEl0ZW1SZW5kZXJlZCgpO1EuaXNJbnRlZ2VyKGUpJiYodC5mb3JjZUxhc3RJbmRleD1lKSxRLmlzSW50ZWdlcihuKSYmKHRoaXMuX3dyYXBwZXJFbGVtZW50LnN0eWxlLmhlaWdodD10aGlzLl90b3BQb3NpdGlvbnNbbl0rdGhpcy5fY2FsY3VsYXRlUmVuZGVyZWRIZWlnaHQoKStcInB4XCIsdGhpcy5wYWRkaW5nPXRoaXMuX3RvcFBvc2l0aW9uc1tuXSx0LmZvcmNlRmlyc3RJbmRleD1uKSx0aGlzLl9yZW1vdmVBbGxFbGVtZW50cygpLHRoaXMuX3JlbmRlcih0KSx0aGlzLl93cmFwcGVyRWxlbWVudC5zdHlsZS5oZWlnaHQ9XCJpbmhlcml0XCJ9fSx7a2V5OlwiX3JlbmRlclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWUuZm9yY2VTY3JvbGxEb3duLGk9dm9pZCAwIT09biYmbixvPWUuZm9yY2VGaXJzdEluZGV4LHI9ZS5mb3JjZUxhc3RJbmRleDtpZih0aGlzLl91bmtub3duSXRlbUhlaWdodClyZXR1cm4gdGhpcy5fY2hlY2tJdGVtSGVpZ2h0KHRoaXMuX3JlbmRlci5iaW5kKHRoaXMsYXJndW1lbnRzWzBdKSk7dmFyIGE9IWkmJnRoaXMubGFzdFNjcm9sbFRvcD50aGlzLl9wYWdlQ29udGVudC5zY3JvbGxUb3A7dGhpcy5sYXN0U2Nyb2xsVG9wPXRoaXMuX3BhZ2VDb250ZW50LnNjcm9sbFRvcDtmb3IodmFyIHM9e30sbD10aGlzLl93cmFwcGVyRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsdT00KndpbmRvdy5pbm5lckhlaWdodC1sLGM9dGhpcy5fY291bnRJdGVtcygpLGg9b3x8TWF0aC5tYXgoMCx0aGlzLl9jYWxjdWxhdGVTdGFydEluZGV4KGwpLTMwKSxkPWgsZj10aGlzLl90b3BQb3NpdGlvbnNbZF07ZDxjJiZmPHU7ZCsrKWQ+PXRoaXMuX3RvcFBvc2l0aW9ucy5sZW5ndGgmJih0aGlzLl90b3BQb3NpdGlvbnMubGVuZ3RoKz0xMDApLHRoaXMuX3RvcFBvc2l0aW9uc1tkXT1mLGYrPXRoaXMuX2dldEl0ZW1IZWlnaHQoZCk7aWYodGhpcy5fZGVsZWdhdGUuaGFzUmVuZGVyRnVuY3Rpb24mJnRoaXMuX2RlbGVnYXRlLmhhc1JlbmRlckZ1bmN0aW9uKCkpcmV0dXJuIHRoaXMuX2RlbGVnYXRlLl9yZW5kZXIoaCxkLGZ1bmN0aW9uKCl7dC5wYWRkaW5nPXQuX3RvcFBvc2l0aW9uc1toXX0pO2lmKGEpZm9yKHZhciBwPWQtMTtwPj1oO3AtLSlzW3BdPSEwLHRoaXMuX3JlbmRlckVsZW1lbnQocCxhKTtlbHNlIGZvcih2YXIgZz1yfHxNYXRoLm1heC5hcHBseShNYXRoLFtkLTFdLmNvbmNhdCh3KE9iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpKSkpLG09aDttPD1nO20rKylzW21dPSEwLHRoaXMuX3JlbmRlckVsZW1lbnQobSxhKTtPYmplY3Qua2V5cyh0aGlzLl9yZW5kZXJlZEl0ZW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBzW2VdfHx0Ll9yZW1vdmVFbGVtZW50KGUsYSl9KX19LHtrZXk6XCJfcmVuZGVyRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcyxpPXRoaXMuX3JlbmRlcmVkSXRlbXNbdF07aT90aGlzLl9kZWxlZ2F0ZS51cGRhdGVJdGVtKHQsaSk6dGhpcy5fZGVsZWdhdGUubG9hZEl0ZW1FbGVtZW50KHQsZnVuY3Rpb24oaSl7ZT8obi5fd3JhcHBlckVsZW1lbnQuaW5zZXJ0QmVmb3JlKGkuZWxlbWVudCxuLl93cmFwcGVyRWxlbWVudC5jaGlsZHJlbltuLl9pbnNlcnRJbmRleF0pLG4ucGFkZGluZz1uLl90b3BQb3NpdGlvbnNbdF0saS5oZWlnaHQ9bi5fdG9wUG9zaXRpb25zW3QrMV0tbi5fdG9wUG9zaXRpb25zW3RdKTpuLl93cmFwcGVyRWxlbWVudC5hcHBlbmRDaGlsZChpLmVsZW1lbnQpLG4uX3JlbmRlcmVkSXRlbXNbdF09aX0pfX0se2tleTpcIl9yZW1vdmVFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9IShhcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXSl8fGFyZ3VtZW50c1sxXTt0PSt0O3ZhciBuPXRoaXMuX3JlbmRlcmVkSXRlbXNbdF07dGhpcy5fZGVsZWdhdGUuZGVzdHJveUl0ZW0odCxuKSxlP3RoaXMuX3RvcFBvc2l0aW9uc1t0KzFdPXZvaWQgMDp0aGlzLnBhZGRpbmc9dGhpcy5wYWRkaW5nK3RoaXMuX2dldEl0ZW1IZWlnaHQodCksbi5lbGVtZW50LnBhcmVudEVsZW1lbnQmJm4uZWxlbWVudC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKG4uZWxlbWVudCksZGVsZXRlIHRoaXMuX3JlbmRlcmVkSXRlbXNbdF19fSx7a2V5OlwiX3JlbW92ZUFsbEVsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO09iamVjdC5rZXlzKHRoaXMuX3JlbmRlcmVkSXRlbXMpLmZvckVhY2goZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlbW92ZUVsZW1lbnQoZSl9KX19LHtrZXk6XCJfcmVjYWxjdWxhdGVUb3BQb3NpdGlvbnNcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2Zvcih2YXIgbj10O248PWU7bisrKXRoaXMuX3RvcFBvc2l0aW9uc1tuKzFdPXRoaXMuX3RvcFBvc2l0aW9uc1tuXSt0aGlzLl9nZXRJdGVtSGVpZ2h0KG4pfX0se2tleTpcIl9jYWxjdWxhdGVTdGFydEluZGV4XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZmlyc3RJdGVtUmVuZGVyZWQoKSxuPXRoaXMuX2xhc3RJdGVtUmVuZGVyZWQoKTt0aGlzLl9yZWNhbGN1bGF0ZVRvcFBvc2l0aW9ucyhlLG4pO2Zvcih2YXIgaT0wLG89dGhpcy5fY291bnRJdGVtcygpLTE7Oyl7dmFyIHI9TWF0aC5mbG9vcigoaStvKS8yKSxhPXQrdGhpcy5fdG9wUG9zaXRpb25zW3JdO2lmKG88aSlyZXR1cm4gMDtpZihhPD0wJiZhK3RoaXMuX2dldEl0ZW1IZWlnaHQocik+MClyZXR1cm4gcjtpc05hTihhKXx8YT49MD9vPXItMTppPXIrMX19fSx7a2V5OlwiX2RlYm91bmNlXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpPXZvaWQgMDtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgbz10aGlzLHI9YXJndW1lbnRzLGE9biYmIWk7Y2xlYXJUaW1lb3V0KGkpLGE/dC5hcHBseSh0aGlzLGFyZ3VtZW50cyk6aT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aT1udWxsLHQuYXBwbHkobyxyKX0sZSl9fX0se2tleTpcIl9kb3VibGVGaXJlT25Ub3VjaGVuZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyKCksdGhpcy5fZGVib3VuY2UodGhpcy5fcmVuZGVyLmJpbmQodGhpcyksMTAwKX19LHtrZXk6XCJfYWRkRXZlbnRMaXN0ZW5lcnNcIix2YWx1ZTpmdW5jdGlvbigpe1EuYmluZExpc3RlbmVycyh0aGlzLFtcIl9vbkNoYW5nZVwiLFwiX2RvdWJsZUZpcmVPblRvdWNoZW5kXCJdKSxDLmlzSU9TKCkmJih0aGlzLl9ib3VuZE9uQ2hhbmdlPXRoaXMuX2RlYm91bmNlKHRoaXMuX2JvdW5kT25DaGFuZ2UsMzApKSx0aGlzLl9wYWdlQ29udGVudC5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCksQy5pc0lPUygpJiYoUS5hZGRFdmVudExpc3RlbmVyKHRoaXMuX3BhZ2VDb250ZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fYm91bmRPbkNoYW5nZSx7Y2FwdHVyZTohMCxwYXNzaXZlOiEwfSksdGhpcy5fcGFnZUNvbnRlbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5fYm91bmREb3VibGVGaXJlT25Ub3VjaGVuZCwhMCkpLHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCl9fSx7a2V5OlwiX3JlbW92ZUV2ZW50TGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9wYWdlQ29udGVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCksQy5pc0lPUygpJiYoUS5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX3BhZ2VDb250ZW50LFwidG91Y2htb3ZlXCIsdGhpcy5fYm91bmRPbkNoYW5nZSx7Y2FwdHVyZTohMCxwYXNzaXZlOiEwfSksdGhpcy5fcGFnZUNvbnRlbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5fYm91bmREb3VibGVGaXJlT25Ub3VjaGVuZCwhMCkpLHdpbmRvdy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5fYm91bmRPbkNoYW5nZSwhMCl9fSx7a2V5OlwiZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlQWxsRWxlbWVudHMoKSx0aGlzLl9kZWxlZ2F0ZS5kZXN0cm95KCksdGhpcy5fcGFyZW50RWxlbWVudD10aGlzLl9kZWxlZ2F0ZT10aGlzLl9yZW5kZXJlZEl0ZW1zPW51bGwsdGhpcy5fcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKX19LHtrZXk6XCJwYWRkaW5nXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuX3dyYXBwZXJFbGVtZW50LnN0eWxlLnBhZGRpbmdUb3AsMTApfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fd3JhcHBlckVsZW1lbnQuc3R5bGUucGFkZGluZ1RvcD10K1wicHhcIn19LHtrZXk6XCJzdGF0aWNJdGVtSGVpZ2h0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbGVnYXRlLml0ZW1IZWlnaHR8fHRoaXMuX2l0ZW1IZWlnaHR9fV0pLHR9KCksRW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmhhc0F0dHJpYnV0ZShcImRlbGVnYXRlXCIpJiYodGhpcy5kZWxlZ2F0ZT13aW5kb3dbdGhpcy5nZXRBdHRyaWJ1dGUoXCJkZWxlZ2F0ZVwiKV0pfX0se2tleTpcInJlZnJlc2hcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2xhenlSZXBlYXRQcm92aWRlciYmdGhpcy5fbGF6eVJlcGVhdFByb3ZpZGVyLnJlZnJlc2goKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXImJih0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXIuZGVzdHJveSgpLHRoaXMuX2xhenlSZXBlYXRQcm92aWRlcj1udWxsKX19LHtrZXk6XCJkZWxlZ2F0ZVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLl9sYXp5UmVwZWF0UHJvdmlkZXImJnRoaXMuX2xhenlSZXBlYXRQcm92aWRlci5kZXN0cm95KCksIXRoaXMuX3RlbXBsYXRlRWxlbWVudCYmdGhpcy5jaGlsZHJlblswXSYmKHRoaXMuX3RlbXBsYXRlRWxlbWVudD10aGlzLnJlbW92ZUNoaWxkKHRoaXMuY2hpbGRyZW5bMF0pKTt2YXIgZT1uZXcga28odCx0aGlzLl90ZW1wbGF0ZUVsZW1lbnR8fG51bGwpO3RoaXMuX2xhenlSZXBlYXRQcm92aWRlcj1uZXcgd28odGhpcy5wYXJlbnRFbGVtZW50LGUpfSxnZXQ6ZnVuY3Rpb24oKXtRLnRocm93KFwiTm8gZGVsZWdhdGUgZ2V0dGVyXCIpfX1dKSxlfSgpO1AuTGF6eVJlcGVhdERlbGVnYXRlPWtvLFAuTGF6eVJlcGVhdFByb3ZpZGVyPXdvLGMuTGF6eVJlcGVhdD1FbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbGF6eS1yZXBlYXRcIixFbyk7dmFyIENvPXtcIlwiOlwibGlzdC1oZWFkZXItLSpcIn0sQW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9jb21waWxlKCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcImxpc3QtaGVhZGVyXCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsQ28pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdC1oZWFkZXJcIixDbyk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLENvKX19fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5MaXN0SGVhZGVyPUFvLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1saXN0LWhlYWRlclwiLEFvKTt2YXIgU289e1wiXCI6XCJsaXN0LXRpdGxlLS0qXCJ9LFBvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LXRpdGxlXCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsU28pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdC10aXRsZVwiLFNvKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsU28pfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkxpc3RUaXRsZT1QbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbGlzdC10aXRsZVwiLFBvKTt2YXIgT289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMjphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFRpKSxnKGUsW3trZXk6XCJzaG93RXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fSx7a2V5OlwiaGlkZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX1dKSxlfSgpLHhvPXtcIi5saXN0LWl0ZW1cIjpcImxpc3QtaXRlbS0tKlwiLFwiLmxpc3QtaXRlbV9fbGVmdFwiOlwibGlzdC1pdGVtLS0qX19sZWZ0XCIsXCIubGlzdC1pdGVtX19jZW50ZXJcIjpcImxpc3QtaXRlbS0tKl9fY2VudGVyXCIsXCIubGlzdC1pdGVtX19yaWdodFwiOlwibGlzdC1pdGVtLS0qX19yaWdodFwiLFwiLmxpc3QtaXRlbV9fbGFiZWxcIjpcImxpc3QtaXRlbS0tKl9fbGFiZWxcIixcIi5saXN0LWl0ZW1fX3RpdGxlXCI6XCJsaXN0LWl0ZW0tLSpfX3RpdGxlXCIsXCIubGlzdC1pdGVtX19zdWJ0aXRsZVwiOlwibGlzdC1pdGVtLS0qX19zdWJ0aXRsZVwiLFwiLmxpc3QtaXRlbV9fdGh1bWJuYWlsXCI6XCJsaXN0LWl0ZW0tLSpfX3RodW1ibmFpbFwiLFwiLmxpc3QtaXRlbV9faWNvblwiOlwibGlzdC1pdGVtLS0qX19pY29uXCJ9LFRvPXtkZWZhdWx0OmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLE9vKSxnKGUsW3trZXk6XCJzaG93RXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9hbmltYXRlRXhwYW5zaW9uKHQsITAsZSl9fSx7a2V5OlwiaGlkZUV4cGFuc2lvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUV4cGFuc2lvbih0LCExLGUpfX0se2tleTpcIl9hbmltYXRlRXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3ZhciBpLG89dC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQscj10LmV4cGFuZGFibGVDb250ZW50LnN0eWxlLmRpc3BsYXk7dC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQ9XCJhdXRvXCIsdC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjt2YXIgYT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0LmV4cGFuZGFibGVDb250ZW50KSxzPVt7aGVpZ2h0OjAscGFkZGluZ1RvcDowLHBhZGRpbmdCb3R0b206MH0se2hlaWdodDphLmhlaWdodCxwYWRkaW5nVG9wOmEucGFkZGluZ1RvcCxwYWRkaW5nQm90dG9tOmEucGFkZGluZ0JvdHRvbX1dLGw9W3t0cmFuc2Zvcm06XCJyb3RhdGUoNDVkZWcpXCJ9LHt0cmFuc2Zvcm06XCJyb3RhdGUoMjI1ZGVnKVwifV07aWYodC5leHBhbmRhYmxlQ29udGVudC5zdHlsZS5oZWlnaHQ9bywoaT1udCh0LmV4cGFuZGFibGVDb250ZW50LHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHByb3BlcnR5OlwiaGVpZ2h0IHBhZGRpbmctdG9wIHBhZGRpbmctYm90dG9tXCJ9KSkuZGVmYXVsdC5hcHBseShpLHcoZT9zOnMucmV2ZXJzZSgpKSkucGxheShmdW5jdGlvbigpe3QuZXhwYW5kYWJsZUNvbnRlbnQuc3R5bGUuZGlzcGxheT1yLG4mJm4oKX0pLHQuZXhwYW5kQ2hldnJvbil7dmFyIHU7KHU9bnQodC5leHBhbmRDaGV2cm9uLHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHByb3BlcnR5OlwidHJhbnNmb3JtXCJ9KSkuZGVmYXVsdC5hcHBseSh1LHcoZT9sOmwucmV2ZXJzZSgpKSkucGxheSgpfX19XSksZX0oKSxub25lOk9vfSxMbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7dC5fYW5pbWF0b3JGYWN0b3J5PXQuX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeSgpLHQudG9nZ2xlRXhwYW5zaW9uPXQudG9nZ2xlRXhwYW5zaW9uLmJpbmQodCk7dmFyIGk9L15vbnMtKD8hY29sJHxyb3ckfGlmJCkvaTtyZXR1cm4gdC5fc2hvdWxkSWdub3JlVGFwPWZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcInByZXZlbnQtdGFwXCIpfHxpLnRlc3QodC50YWdOYW1lKX0sdC5zaG93PXQuc2hvd0V4cGFuc2lvbix0LmhpZGU9dC5oaWRlRXhwYW5zaW9uLG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1cIiksdGhpcy5oYXNBdHRyaWJ1dGUoXCJleHBhbmRhYmxlXCIpJiZ0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW0tLWV4cGFuZGFibGVcIik7Zm9yKHZhciB0PXZvaWQgMCxlPXZvaWQgMCxuPXZvaWQgMCxpPXZvaWQgMCxvPXZvaWQgMCxyPVEuZ2V0QWxsQ2hpbGROb2Rlcyh0aGlzKSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBzPXJbYV07cy5jbGFzc0xpc3QuY29udGFpbnMoXCJsZWZ0XCIpPyhzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1fX2xlZnRcIiksdD1zKTpzLmNsYXNzTGlzdC5jb250YWlucyhcImNlbnRlclwiKT9lPXM6cy5jbGFzc0xpc3QuY29udGFpbnMoXCJyaWdodFwiKT8ocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19yaWdodFwiKSxuPXMpOnMuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9wXCIpPyhzLmNsYXNzTGlzdC5hZGQoXCJsaXN0LWl0ZW1fX3RvcFwiKSxpPXMpOnMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXhwYW5kYWJsZS1jb250ZW50XCIpJiYocy5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19leHBhbmRhYmxlLWNvbnRlbnRcIiksbz1zKX1pZighbiYmdGhpcy5oYXNBdHRyaWJ1dGUoXCJleHBhbmRhYmxlXCIpKXsobj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19yaWdodFwiLFwicmlnaHRcIik7dmFyIGw9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7bC5jbGFzc0xpc3QuYWRkKFwibGlzdC1pdGVtX19leHBhbmQtY2hldnJvblwiKSxuLmFwcGVuZENoaWxkKGwpfWlmKCFlKXtpZihlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdHx8bnx8bylmb3IodmFyIHU9dGhpcy5jaGlsZE5vZGVzLmxlbmd0aC0xO3U+PTA7dS0tKXt2YXIgYz10aGlzLmNoaWxkTm9kZXNbdV07YyE9PXQmJmMhPT1uJiZjIT09byYmXCJPTlMtUklQUExFXCIhPT1jLnRhZ05hbWUmJmUuaW5zZXJ0QmVmb3JlKGMsZS5maXJzdENoaWxkKX1lbHNlIGZvcig7dGhpcy5jaGlsZE5vZGVzWzBdOyllLmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7b3x8dGhpcy5pbnNlcnRCZWZvcmUoZSxufHxudWxsKX1lLmNsYXNzTGlzdC5hZGQoXCJjZW50ZXJcIixcImxpc3QtaXRlbV9fY2VudGVyXCIpLG8mJih0aGlzLl90b3A9aXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLl90b3AuY2xhc3NMaXN0LmFkZChcInRvcFwiLFwibGlzdC1pdGVtX190b3BcIiksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl90b3ApLHRoaXMuX3RvcC5hcHBlbmRDaGlsZChlKSx0JiZ0aGlzLl90b3AuYXBwZW5kQ2hpbGQodCksbiYmdGhpcy5fdG9wLmFwcGVuZENoaWxkKG4pKSxRLnVwZGF0ZVJpcHBsZSh0aGlzKSxCLmluaXRNb2RpZmllcih0aGlzLHhvKX19LHtrZXk6XCJzaG93RXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMuaGFzQXR0cmlidXRlKFwiZXhwYW5kYWJsZVwiKSYmIXRoaXMuX2V4cGFuZGluZyl7dGhpcy5leHBhbmRlZD0hMCx0aGlzLl9leHBhbmRpbmc9ITA7dGhpcy5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKCkuc2hvd0V4cGFuc2lvbih0aGlzLGZ1bmN0aW9uKCl7dC5jbGFzc0xpc3QuYWRkKFwiZXhwYW5kZWRcIiksdC5fZXhwYW5kaW5nPSExfSl9fX0se2tleTpcImhpZGVFeHBhbnNpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJleHBhbmRhYmxlXCIpJiYhdGhpcy5fZXhwYW5kaW5nKXt0aGlzLmV4cGFuZGVkPSExLHRoaXMuX2V4cGFuZGluZz0hMDt0aGlzLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3IoKS5oaWRlRXhwYW5zaW9uKHRoaXMsZnVuY3Rpb24oKXt0LmNsYXNzTGlzdC5yZW1vdmUoXCJleHBhbmRlZFwiKSx0Ll9leHBhbmRpbmc9ITF9KX19fSx7a2V5OlwidG9nZ2xlRXhwYW5zaW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImV4cGFuZGVkXCIpP3RoaXMuaGlkZUV4cGFuc2lvbigpOnRoaXMuc2hvd0V4cGFuc2lvbigpfX0se2tleTpcIl91cGRhdGVBbmltYXRvckZhY3RvcnlcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBuZXcgTyh7YW5pbWF0b3JzOlRvLGJhc2VDbGFzczpPbyxiYXNlQ2xhc3NOYW1lOlwiTGlzdEl0ZW1BbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil8fFwiZGVmYXVsdFwifSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJsaXN0LWl0ZW1cIix4byk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLHhvKTticmVhaztjYXNlXCJyaXBwbGVcIjpRLnVwZGF0ZVJpcHBsZSh0aGlzKTticmVhaztjYXNlXCJhbmltYXRpb25cIjp0aGlzLl9hbmltYXRvckZhY3Rvcnk9dGhpcy5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX3NldHVwTGlzdGVuZXJzKCEwKSx0Ll9vcmlnaW5hbEJhY2tncm91bmRDb2xvcj10LnN0eWxlLmJhY2tncm91bmRDb2xvcix0LnRhcHBlZD0hMX0pfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zZXR1cExpc3RlbmVycyghMSl9fSx7a2V5OlwiX3NldHVwTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9KHQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkV2ZW50TGlzdGVuZXJcIjtRW2VdKHRoaXMsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaCx7cGFzc2l2ZTohMH0pLFFbZV0odGhpcyxcInRvdWNobW92ZVwiLHRoaXMuX29uUmVsZWFzZSx7cGFzc2l2ZTohMH0pLHRoaXNbZV0oXCJ0b3VjaGNhbmNlbFwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcInRvdWNoZW5kXCIsdGhpcy5fb25SZWxlYXNlKSx0aGlzW2VdKFwidG91Y2hsZWF2ZVwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcImRyYWdcIix0aGlzLl9vbkRyYWcpLHRoaXNbZV0oXCJtb3VzZWRvd25cIix0aGlzLl9vblRvdWNoKSx0aGlzW2VdKFwibW91c2V1cFwiLHRoaXMuX29uUmVsZWFzZSksdGhpc1tlXShcIm1vdXNlb3V0XCIsdGhpcy5fb25SZWxlYXNlKSx0aGlzLl90b3AmJnRoaXMuX3RvcFtlXShcImNsaWNrXCIsdGhpcy50b2dnbGVFeHBhbnNpb24pfX0se2tleTpcIl9vbkRyYWdcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10Lmdlc3R1cmU7dGhpcy5oYXNBdHRyaWJ1dGUoXCJsb2NrLW9uLWRyYWdcIikmJltcImxlZnRcIixcInJpZ2h0XCJdLmluZGV4T2YoZS5kaXJlY3Rpb24pPi0xJiZlLnByZXZlbnREZWZhdWx0KCl9fSx7a2V5OlwiX29uVG91Y2hcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO2lmKCEodGhpcy50YXBwZWR8fHRoaXMhPT10LnRhcmdldCYmKHRoaXMuX3Nob3VsZElnbm9yZVRhcCh0LnRhcmdldCl8fFEuZmluZFBhcmVudCh0LnRhcmdldCx0aGlzLl9zaG91bGRJZ25vcmVUYXAsZnVuY3Rpb24odCl7cmV0dXJuIHQ9PT1lfSkpKSl7dGhpcy50YXBwZWQ9ITA7dmFyIG49e3RyYW5zaXRpb246XCJiYWNrZ3JvdW5kLWNvbG9yIDAuMHMgbGluZWFyIDAuMDJzLCBib3gtc2hhZG93IDAuMHMgbGluZWFyIDAuMDJzXCJ9O3RoaXMuaGFzQXR0cmlidXRlKFwidGFwcGFibGVcIikmJih0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvciYmKHRoaXMuX29yaWdpbmFsQmFja2dyb3VuZENvbG9yPXRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yKSxuLmJhY2tncm91bmRDb2xvcj10aGlzLmdldEF0dHJpYnV0ZShcInRhcC1iYWNrZ3JvdW5kLWNvbG9yXCIpfHxcIiNkOWQ5ZDlcIixuLmJveFNoYWRvdz1cIjBweCAtMXB4IDBweCAwcHggXCIrbi5iYWNrZ3JvdW5kQ29sb3IpLGQodGhpcyxuKX19fSx7a2V5OlwiX29uUmVsZWFzZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50YXBwZWQ9ITEsdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9dGhpcy5fb3JpZ2luYWxCYWNrZ3JvdW5kQ29sb3J8fFwiXCIsZC5jbGVhcih0aGlzLFwidHJhbnNpdGlvbiBib3hTaGFkb3dcIil9fSx7a2V5OlwiZXhwYW5kYWJsZUNvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtaXRlbV9fZXhwYW5kYWJsZS1jb250ZW50XCIpfX0se2tleTpcImV4cGFuZENoZXZyb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLmxpc3QtaXRlbV9fZXhwYW5kLWNoZXZyb25cIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIixcInJpcHBsZVwiLFwiYW5pbWF0aW9uXCJdfX1dKSxlfSgpO2MuTGlzdEl0ZW09TG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxpc3QtaXRlbVwiLExvKTt2YXIgTW89e1wiXCI6XCJsaXN0LS0qXCJ9LERvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJsaXN0XCIpLEIuaW5pdE1vZGlmaWVyKHRoaXMsTW8pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwibGlzdFwiLE1vKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsTW8pfX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLkxpc3Q9RG8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWxpc3RcIixEbyk7dmFyIElvPVtcImF1dG9jYXBpdGFsaXplXCIsXCJhdXRvY29tcGxldGVcIixcImF1dG9jb3JyZWN0XCIsXCJhdXRvZm9jdXNcIixcImRpc2FibGVkXCIsXCJpbnB1dG1vZGVcIixcIm1heFwiLFwibWF4bGVuZ3RoXCIsXCJtaW5cIixcIm1pbmxlbmd0aFwiLFwibmFtZVwiLFwicGF0dGVyblwiLFwicGxhY2Vob2xkZXJcIixcInJlYWRvbmx5XCIsXCJyZXF1aXJlZFwiLFwic2l6ZVwiLFwic3RlcFwiLFwidmFsaWRhdG9yXCIsXCJ2YWx1ZVwiXSxObz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuY29uc3RydWN0b3I9PT1lJiZRLnRocm93QWJzdHJhY3QoKSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdC5fYm91bmREZWxlZ2F0ZUV2ZW50PXQuX2RlbGVnYXRlRXZlbnQuYmluZCh0KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl91cGRhdGVcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX0se2tleTpcIl90ZW1wbGF0ZVwiLGdldDpmdW5jdGlvbigpe1EudGhyb3dNZW1iZXIoKX19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7US50aHJvd01lbWJlcigpfX1dKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUmJnRoaXMuY2xhc3NMaXN0LmFkZCh0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKSwwPT09dGhpcy5jaGlsZHJlbi5sZW5ndGgmJih0aGlzLmFwcGVuZENoaWxkKFEuY3JlYXRlRnJhZ21lbnQodGhpcy5fdGVtcGxhdGUpKSx0aGlzLl9zZXRJbnB1dElkKCksdGhpcy5fdXBkYXRlQm91bmRBdHRyaWJ1dGVzKCksQi5pbml0TW9kaWZpZXIodGhpcyx0aGlzLl9zY2hlbWUpKX19LHtrZXk6XCJfdXBkYXRlQm91bmRBdHRyaWJ1dGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO0lvLmZvckVhY2goZnVuY3Rpb24oZSl7dC5oYXNBdHRyaWJ1dGUoZSk/dC5faW5wdXQuc2V0QXR0cmlidXRlKGUsdC5nZXRBdHRyaWJ1dGUoZSkpOnQuX2lucHV0LnJlbW92ZUF0dHJpYnV0ZShlKX0pLHRoaXMuX3VwZGF0ZSgpfX0se2tleTpcIl9kZWxlZ2F0ZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEN1c3RvbUV2ZW50KHQudHlwZSx7YnViYmxlczohMSxjYW5jZWxhYmxlOiEwfSk7cmV0dXJuIHRoaXMuZGlzcGF0Y2hFdmVudChlKX19LHtrZXk6XCJfc2V0SW5wdXRJZFwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNBdHRyaWJ1dGUoXCJpbnB1dC1pZFwiKSYmKHRoaXMuX2lucHV0LmlkPXRoaXMuZ2V0QXR0cmlidXRlKFwiaW5wdXQtaWRcIikpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO24odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHQuX2JvdW5kRGVsZWdhdGVFdmVudCksdC5faW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0Ll9ib3VuZERlbGVnYXRlRXZlbnQpfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdC5fYm91bmREZWxlZ2F0ZUV2ZW50KSx0Ll9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiYmx1clwiLHQuX2JvdW5kRGVsZWdhdGVFdmVudCl9KX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG89dGhpcztzd2l0Y2godCl7Y2FzZVwibW9kaWZpZXJcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gQi5vbk1vZGlmaWVyQ2hhbmdlZChlLGksbyxvLl9zY2hlbWUpfSk7YnJlYWs7Y2FzZVwiaW5wdXQtaWRcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fc2V0SW5wdXRJZCgpfSk7YnJlYWs7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLHRoaXMuX2RlZmF1bHRDbGFzc05hbWUsdGhpcy5fc2NoZW1lKX1Jby5pbmRleE9mKHQpPj0wJiZuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlQm91bmRBdHRyaWJ1dGVzKCl9KX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiXCJ9fSx7a2V5OlwiX2lucHV0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcImlucHV0XCIpfX0se2tleTpcInZhbHVlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9pbnB1dD90aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpOnRoaXMuX2lucHV0LnZhbHVlfSxzZXQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0IGluc3RhbmNlb2YgRGF0ZSYmKHQ9dC50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLDEwKSksZS5faW5wdXQudmFsdWU9dCxlLl91cGRhdGUoKX0pfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiaW5wdXQtaWRcIixcImNsYXNzXCJdLmNvbmNhdChJbyl9fV0pLGV9KCksQm89e1wiLnRleHQtaW5wdXRcIjpcInRleHQtaW5wdXQtLSpcIixcIi50ZXh0LWlucHV0X19sYWJlbFwiOlwidGV4dC1pbnB1dC0tKl9fbGFiZWxcIn0sam89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9ib3VuZE9uSW5wdXQ9dC5fdXBkYXRlLmJpbmQodCksdC5fYm91bmRPbkZvY3VzaW49dC5fdXBkYXRlLmJpbmQodCksdH1yZXR1cm4gYihlLE5vKSxnKGUsW3trZXk6XCJfdXBkYXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVMYWJlbCgpLHRoaXMuX3VwZGF0ZUxhYmVsQ2xhc3MoKX19LHtrZXk6XCJfdXBkYXRlTGFiZWxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIil8fFwiXCI7dm9pZCAwIT09dGhpcy5faGVscGVyLnRleHRDb250ZW50P3RoaXMuX2hlbHBlci50ZXh0Q29udGVudD10OnRoaXMuX2hlbHBlci5pbm5lclRleHQ9dH19LHtrZXk6XCJfdXBkYXRlTGFiZWxDbGFzc1wiLHZhbHVlOmZ1bmN0aW9uKCl7XCJcIj09PXRoaXMudmFsdWU/dGhpcy5faGVscGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJ0ZXh0LWlucHV0LS1tYXRlcmlhbF9fbGFiZWwtLWFjdGl2ZVwiKTp0aGlzLl9oZWxwZXIuY2xhc3NMaXN0LmFkZChcInRleHQtaW5wdXQtLW1hdGVyaWFsX19sYWJlbC0tYWN0aXZlXCIpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpLG4odGhpcyxmdW5jdGlvbigpe3QuX2lucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLHQuX2JvdW5kT25JbnB1dCksdC5faW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzaW5cIix0Ll9ib3VuZE9uRm9jdXNpbil9KTt2YXIgaT10aGlzLmdldEF0dHJpYnV0ZShcInR5cGVcIik7W1wiY2hlY2tib3hcIixcInJhZGlvXCJdLmluZGV4T2YoaSk+PTAmJlEud2FybignV2FybjogPG9ucy1pbnB1dCB0eXBlPVwiJytpKydcIj4gaXMgZGVwcmVjYXRlZCBzaW5jZSB2Mi40LjAuIFVzZSA8b25zLScraStcIj4gaW5zdGVhZC5cIil9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyksbih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsdC5fYm91bmRPbklucHV0KSx0Ll9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLHQuX2JvdW5kT25Gb2N1c2luKX0pfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsaSxvKXt2YXIgcj10aGlzO3N3aXRjaCh0KXtjYXNlXCJ0eXBlXCI6bih0aGlzLGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2lucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIixyLnR5cGUpfSk7YnJlYWs7ZGVmYXVsdDp2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyx0LGksbyl9fX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQm99fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwidGV4dC1pbnB1dFwiPlxcbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dC1pbnB1dF9fbGFiZWxcIj48L3NwYW4+XFxuICAgICd9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwidHlwZVwiKTtyZXR1cm5bXCJjaGVja2JveFwiLFwicmFkaW9cIl0uaW5kZXhPZih0KTwwJiZ0fHxcInRleHRcIn19LHtrZXk6XCJfaGVscGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcInNwYW5cIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1widHlwZVwiXSl9fV0pLGV9KCk7Yy5JbnB1dD1qbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtaW5wdXRcIixqbyk7dmFyIEhvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5jb25zdHJ1Y3Rvcj09PWUmJnV0aWwudGhyb3dBYnN0cmFjdCgpLG4odCxmdW5jdGlvbigpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwiY2hlY2tlZFwiLG51bGwsdC5nZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIpKX0pLHR9cmV0dXJuIGIoZSxObyksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3N3aXRjaCh0KXtjYXNlXCJjaGVja2VkXCI6dGhpcy5jaGVja2VkPW51bGwhPT1pO2JyZWFrO2RlZmF1bHQ6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4nXFxuICAgICAgPGlucHV0IHR5cGU9XCInK3RoaXMudHlwZSsnXCIgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faW5wdXRcIj5cXG4gICAgICA8c3BhbiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX19jaGVja21hcmtcIj48L3NwYW4+XFxuICAgICd9fSx7a2V5OlwiX2hlbHBlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzcGFuXCIpfX0se2tleTpcImNoZWNrZWRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5wdXQuY2hlY2tlZH0sc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7ZS5faW5wdXQuY2hlY2tlZD10fSl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wiY2hlY2tlZFwiXSl9fV0pLGV9KCksUm89e1wiLmNoZWNrYm94XCI6XCJjaGVja2JveC0tKlwiLFwiLmNoZWNrYm94X19pbnB1dFwiOlwiY2hlY2tib3gtLSpfX2lucHV0XCIsXCIuY2hlY2tib3hfX2NoZWNrbWFya1wiOlwiY2hlY2tib3gtLSpfX2NoZWNrbWFya1wifSxGbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxIbyksZyhlLFt7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBSb319LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIn19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwifX1dKSxlfSgpO2MuQ2hlY2tib3g9Rm8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLWNoZWNrYm94XCIsRm8pO3ZhciBxbz17XCIucmFkaW8tYnV0dG9uXCI6XCJyYWRpby1idXR0b24tLSpcIixcIi5yYWRpby1idXR0b25fX2lucHV0XCI6XCJyYWRpby1idXR0b24tLSpfX2lucHV0XCIsXCIucmFkaW8tYnV0dG9uX19jaGVja21hcmtcIjpcInJhZGlvLWJ1dHRvbi0tKl9fY2hlY2ttYXJrXCJ9LHpvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLEhvKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHFvfX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyYWRpby1idXR0b25cIn19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyYWRpb1wifX1dKSxlfSgpO2MuUmFkaW89em8sY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXJhZGlvXCIsem8pO3ZhciBWbz17XCIuc2VhcmNoLWlucHV0XCI6XCJzZWFyY2gtaW5wdXQtLSpcIn0sV289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsTm8pLGcoZSxbe2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVm99fSx7a2V5OlwiX3RlbXBsYXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuJ1xcbiAgICAgIDxpbnB1dCB0eXBlPVwiJyt0aGlzLnR5cGUrJ1wiIGNsYXNzPVwic2VhcmNoLWlucHV0XCI+XFxuICAgICd9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwic2VhcmNoXCJ9fV0pLGV9KCk7Yy5TZWFyY2hJbnB1dD1XbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc2VhcmNoLWlucHV0XCIsV28pO3ZhciBVbz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCksWG89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLFVvKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KS5wbGF5KCl9fV0pLGV9KCksWW89ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllciggLjEsIC43LCAuMSwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxVbyksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZT1lfHxmdW5jdGlvbigpe30sbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMTAwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAxMDAlLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7ZSgpLHQoKX0pLnBsYXkoKX19XSksZX0oKSxHbz17XCJcIjpcIm1vZGFsLS0qXCIsbW9kYWxfX2NvbnRlbnQ6XCJtb2RhbC0tKl9fY29udGVudFwifSwkbz17ZGVmYXVsdDpVbyxmYWRlOlhvLGxpZnQ6WW8sbm9uZTpVb30sS289ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9kZWZhdWx0REJCPWZ1bmN0aW9uKCl7fSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczokbyxiYXNlQ2xhc3M6VW8sYmFzZUNsYXNzTmFtZTpcIk1vZGFsQW5pbWF0b3JcIixkZWZhdWx0QW5pbWF0aW9uOnRoaXMuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKHRoaXMuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnN0eWxlLnpJbmRleD0xMDAwMSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJtb2RhbFwiKSwhUS5maW5kQ2hpbGQodGhpcyxcIi5tb2RhbF9fY29udGVudFwiKSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfX2NvbnRlbnRcIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl7dmFyIGU9dGhpcy5jaGlsZE5vZGVzWzBdO3RoaXMucmVtb3ZlQ2hpbGQoZSksdC5pbnNlcnRCZWZvcmUoZSxudWxsKX10aGlzLmFwcGVuZENoaWxkKHQpfUIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfdG9nZ2xlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLnN0eWxlLmRpc3BsYXk9dD9cInRhYmxlXCI6XCJub25lXCJ9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiY29ubmVjdGVkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7XCJjbGFzc1wiPT09dD9RLnJlc3RvcmVDbGFzcyh0aGlzLFwibW9kYWxcIixHbyk6dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gR299fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIFVvfHxRLnRocm93QW5pbWF0b3IoXCJNb2RhbFwiKSwkb1t0XT1lfX0se2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdLmNvbmNhdCh3KHYoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSxcIm9ic2VydmVkQXR0cmlidXRlc1wiLHRoaXMpKSxbXCJjbGFzc1wiXSl9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuICRvfX0se2tleTpcIk1vZGFsQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVW99fV0pLGV9KCk7Yy5Nb2RhbD1LbyxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbW9kYWxcIixLbyk7dmFyIFFvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2YXIgbj10aGlzO3AodGhpcyx0KSxcImVsZW1lbnQgaWdub3JlU3dpcGUgaXNJbml0aWFsU3RhdGUgb25EcmFnQ2FsbGJhY2sgc3dpcGVNYXggc3dpcGVNaW4gc3dpcGVNaWRcIi5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG5bdF09ZVt0XX0pLHRoaXMuZWxlbWVudEhhbmRsZXI9ZS5lbGVtZW50SGFuZGxlcnx8ZS5lbGVtZW50LHRoaXMuZ2V0VGhyZXNob2xkPWUuZ2V0VGhyZXNob2xkfHxmdW5jdGlvbigpe3JldHVybi41fSx0aGlzLmdldFNpZGU9ZS5nZXRTaWRlfHxmdW5jdGlvbigpe3JldHVyblwibGVmdFwifSx0aGlzLmhhbmRsZUdlc3R1cmU9dGhpcy5oYW5kbGVHZXN0dXJlLmJpbmQodGhpcyksdGhpcy5fc2hvdWxkRml4U2Nyb2xsPVwiaW9zXCI9PT1RLmdsb2JhbHMuYWN0dWFsTW9iaWxlT1N9cmV0dXJuIGcodCxbe2tleTpcInVwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIik7dGhpcy5nZXN0dXJlRGV0ZWN0b3J8fCh0aGlzLmdlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcy5lbGVtZW50SGFuZGxlcix7ZHJhZ01pbkRpc3RhbmNlOjEscGFzc2l2ZTohdGhpcy5fc2hvdWxkRml4U2Nyb2xsfSkpO3ZhciBlPXQ/XCJvblwiOlwib2ZmXCI7dGhpcy5nZXN0dXJlRGV0ZWN0b3JbZV0oXCJkcmFnIGRyYWdzdGFydCBkcmFnZW5kXCIsdGhpcy5oYW5kbGVHZXN0dXJlKX19LHtrZXk6XCJoYW5kbGVHZXN0dXJlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5nZXN0dXJlJiYoXCJkcmFnc3RhcnRcIj09PXQudHlwZT90aGlzLm9uRHJhZ1N0YXJ0KHQpOnRoaXMuX2lnbm9yZURyYWd8fChcImRyYWdlbmRcIj09PXQudHlwZT90aGlzLm9uRHJhZ0VuZCh0KTp0aGlzLm9uRHJhZyh0KSkpfX0se2tleTpcIm9uRHJhZ1N0YXJ0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9pZ25vcmVEcmFnPXQuY29uc3VtZWR8fCFRLmlzVmFsaWRHZXN0dXJlKHQpfHx0aGlzLmlnbm9yZVN3aXBlKHQsXCJsZWZ0XCI9PT1lLmdldFNpZGUoKT90Lmdlc3R1cmUuY2VudGVyLmNsaWVudFg6d2luZG93LmlubmVyV2lkdGgtdC5nZXN0dXJlLmNlbnRlci5jbGllbnRYKSx0aGlzLl9pZ25vcmVEcmFnfHwodC5jb25zdW1lJiZ0LmNvbnN1bWUoKSx0LmNvbnN1bWVkPSEwLHRoaXMuX3dpZHRoPWZ1bmN0aW9uKHQpe3ZhciBlPVtwYXJzZUludCh0LDEwKSwvcHgvLnRlc3QodCldLG49ZVswXTtyZXR1cm4gZVsxXT9uOk1hdGgucm91bmQoZG9jdW1lbnQuYm9keS5vZmZzZXRXaWR0aCpuLzEwMCl9KHRoaXMuZWxlbWVudC5zdHlsZS53aWR0aHx8XCIxMDAlXCIpLHRoaXMuX3N0YXJ0RGlzdGFuY2U9dGhpcy5fZGlzdGFuY2U9dGhpcy5pc0luaXRpYWxTdGF0ZSBpbnN0YW5jZW9mIEZ1bmN0aW9uJiYhdGhpcy5pc0luaXRpYWxTdGF0ZSgpP3RoaXMuX3dpZHRoOjAsUS5pb3NQcmV2ZW50U2Nyb2xsKHRoaXMuZ2VzdHVyZURldGVjdG9yKSl9fSx7a2V5Olwib25EcmFnXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKTt2YXIgZT1cImxlZnRcIj09PXRoaXMuZ2V0U2lkZSgpP3QuZ2VzdHVyZS5kZWx0YVg6LXQuZ2VzdHVyZS5kZWx0YVgsbj1NYXRoLm1heCgwLE1hdGgubWluKHRoaXMuX3dpZHRoLHRoaXMuX3N0YXJ0RGlzdGFuY2UrZSkpO24hPT10aGlzLl9kaXN0YW5jZSYmKHRoaXMuX2Rpc3RhbmNlPW4sdGhpcy5zd2lwZU1pZCh0aGlzLl9kaXN0YW5jZSx0aGlzLl93aWR0aCkpfX0se2tleTpcIm9uRHJhZ0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCk7dmFyIGU9dC5nZXN0dXJlLmludGVyaW1EaXJlY3Rpb247dGhpcy5nZXRTaWRlKCkhPT1lJiZ0aGlzLl9kaXN0YW5jZT50aGlzLl93aWR0aCp0aGlzLmdldFRocmVzaG9sZCgpP3RoaXMuc3dpcGVNYXgoKTp0aGlzLnN3aXBlTWluKCl9fSx7a2V5OlwiZGlzcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5nZXN0dXJlRGV0ZWN0b3ImJnRoaXMuZ2VzdHVyZURldGVjdG9yLmRpc3Bvc2UoKSx0aGlzLmdlc3R1cmVEZXRlY3Rvcj10aGlzLmVsZW1lbnQ9dGhpcy5lbGVtZW50SGFuZGxlcj1udWxsfX1dKSx0fSgpLEpvPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHAodGhpcyxlKSx0PVEuZXh0ZW5kKHt0aW1pbmc6XCJsaW5lYXJcIixkdXJhdGlvbjpcIjAuNFwiLGRlbGF5OlwiMFwifSx0fHx7fSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsdCkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7bigpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtuKCl9fSx7a2V5OlwiYmxvY2tcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1RLmNyZWF0ZUVsZW1lbnQoJ1xcbiAgICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyB6LWluZGV4OiAxMDAwMDBcIj48L2Rpdj5cXG4gICAgJyk7cmV0dXJuIHQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlKSxmdW5jdGlvbigpe3JldHVybiBlLnJlbW92ZSgpfX19XSksZX0oKSxabz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC5kdXJhdGlvblJlc3RvcmUsaT12b2lkIDA9PT1uPy4xOm4sbz10LmR1cmF0aW9uU3dpcGUscj12b2lkIDA9PT1vPy4xNTpvLGE9dC50aW1pbmdTd2lwZSxzPXZvaWQgMD09PWE/XCJsaW5lYXJcIjphLGw9eSh0LFtcImR1cmF0aW9uUmVzdG9yZVwiLFwiZHVyYXRpb25Td2lwZVwiLFwidGltaW5nU3dpcGVcIl0pO3AodGhpcyxlKTt2YXIgdT1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyxfKHt9LGwpKSk7cmV0dXJuIHUuY29uc3RydWN0b3I9PT1lJiZRLnRocm93QWJzdHJhY3QoKSx1LmR1cmF0aW9uUmVzdG9yZT1pLHUuZHVyYXRpb25Td2lwZT1yLHUudGltaW5nU3dpcGU9cyx1Lm9wdFN3aXBlPXt0aW1pbmc6cyxkdXJhdGlvbjpyfSx1Lm9wdFJlc3RvcmU9e3RpbWluZzpzLGR1cmF0aW9uOml9LHUuc3dpcGVTaGFkb3c9US5jcmVhdGVFbGVtZW50KCc8ZGl2IHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyBoZWlnaHQ6IDEwMCU7IHdpZHRoOiAxMnB4OyByaWdodDogMTAwJTsgdG9wOiAwOyBib3R0b206IDA7IHotaW5kZXg6IC0xO2JhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgdHJhbnNwYXJlbnQgMCwgcmdiYSgwLDAsMCwuMDQpIDQwJSwgcmdiYSgwLDAsMCwuMTIpIDgwJSwgcmdiYSgwLDAsMCwuMTYpIDEwMCUpO1wiPjwvZGl2PicpLHUuaXNEcmFnU3RhcnQ9ITAsdX1yZXR1cm4gYihlLEpvKSxnKGUsbnVsbCxbe2tleTpcInN3aXBlYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiEwfX1dKSxnKGUsW3trZXk6XCJfZGVjb21wb3NlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX3Nob3VsZEFuaW1hdGVUb29sYmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX2NhbGN1bGF0ZURlbHRhXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRocm93TWVtYmVyKCl9fSx7a2V5OlwiX2RyYWdTdGFydFNldHVwXCIsdmFsdWU6ZnVuY3Rpb24odCxuKXt0aGlzLmlzRHJhZ1N0YXJ0PSExLHRoaXMudW5ibG9jaz12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLG4pLHQucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayx0KSx0aGlzLnRhcmdldD17ZW50ZXI6US5maW5kVG9vbGJhclBhZ2UodCl8fHQsbGVhdmU6US5maW5kVG9vbGJhclBhZ2Uobil8fG59LHRoaXMuZGVjb21wPXtlbnRlcjp0aGlzLl9kZWNvbXBvc2UodGhpcy50YXJnZXQuZW50ZXIpLGxlYXZlOnRoaXMuX2RlY29tcG9zZSh0aGlzLnRhcmdldC5sZWF2ZSl9LHRoaXMuZGVsdGE9dGhpcy5fY2FsY3VsYXRlRGVsdGEobix0aGlzLmRlY29tcC5sZWF2ZSksdGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj10aGlzLl9zaG91bGRBbmltYXRlVG9vbGJhcih0aGlzLnRhcmdldC5lbnRlcix0aGlzLnRhcmdldC5sZWF2ZSksdGhpcy5zaG91bGRBbmltYXRlVG9vbGJhcj8odGhpcy5zd2lwZVNoYWRvdy5zdHlsZS50b3A9dGhpcy5kZWNvbXAubGVhdmUudG9vbGJhci5vZmZzZXRIZWlnaHQrXCJweFwiLHRoaXMudGFyZ2V0LmxlYXZlLmFwcGVuZENoaWxkKHRoaXMuc3dpcGVTaGFkb3cpLHRoaXMuX3NhdmVTdHlsZSh0aGlzLnRhcmdldC5lbnRlcix0aGlzLnRhcmdldC5sZWF2ZSkpOihuLmFwcGVuZENoaWxkKHRoaXMuc3dpcGVTaGFkb3cpLHRoaXMuX3NhdmVTdHlsZSh0LG4pKSxuLmNsYXNzTGlzdC5hZGQoXCJvdmVyZmxvdy12aXNpYmxlXCIpLHRoaXMub3ZlcmZsb3dFbGVtZW50PW4sdGhpcy5kZWNvbXAubGVhdmUuY29udGVudC5jbGFzc0xpc3QuYWRkKFwiY29udGVudC1zd2lwaW5nXCIpfX0se2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuLGkpe3RoaXMuaXNTd2lwaW5nPSEwLFwibm9uZVwiPT09bi5zdHlsZS5kaXNwbGF5JiYobi5zdHlsZS5kaXNwbGF5PVwiXCIpLHRoaXMuaXNEcmFnU3RhcnQmJih0aGlzLm1heFdpZHRoPWUsdGhpcy5fZHJhZ1N0YXJ0U2V0dXAobixpKSk7dmFyIG89KHQtZSkvZTt0aGlzLnNob3VsZEFuaW1hdGVUb29sYmFyP250LnJ1bkFsbChudChbdGhpcy5kZWNvbXAuZW50ZXIuY29udGVudCx0aGlzLmRlY29tcC5lbnRlci5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmVudGVyLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrMjUqbytcIiUsIDAsIDApXCIsb3BhY2l0eToxKzEwKm8vMTAwfSksbnQodGhpcy5kZWNvbXAuZW50ZXIudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMuZGVsdGEudGl0bGUqbytcInB4LCAwLCAwKVwiLG9wYWNpdHk6MStvfSksbnQodGhpcy5kZWNvbXAuZW50ZXIuYmFja0J1dHRvbkxhYmVsKS5xdWV1ZSh7b3BhY2l0eToxKzEwKm8vMTAwLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMuZGVsdGEubGFiZWwqbytcInB4LCAwLCAwKVwifSksbnQodGhpcy5kZWNvbXAuZW50ZXIub3RoZXIpLnF1ZXVlKHtvcGFjaXR5OjErb30pLG50KFt0aGlzLmRlY29tcC5sZWF2ZS5jb250ZW50LHRoaXMuZGVjb21wLmxlYXZlLmJvdHRvbVRvb2xiYXIsdGhpcy5kZWNvbXAubGVhdmUuYmFja2dyb3VuZCx0aGlzLnN3aXBlU2hhZG93XSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3QrXCJweCwgMCwgMClcIn0pLG50KHRoaXMuZGVjb21wLmxlYXZlLnRvb2xiYXIpLnF1ZXVlKHtvcGFjaXR5Oi0xKm99KSxudCh0aGlzLmRlY29tcC5sZWF2ZS50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrMTI1KigxK28pK1wiJSwgMCwgMClcIn0pLG50KHRoaXMuZGVjb21wLmxlYXZlLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe29wYWNpdHk6LTEqbyx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLnRpdGxlKigxK28pK1wicHgsIDAsIDApXCJ9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTotMSpvfSkpOm50LnJ1bkFsbChudChpKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrdCtcInB4LCAwLCAwKVwifSksbnQobikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKzI1Km8rXCIlLCAwLCAwKVwiLG9wYWNpdHk6MSsxMCpvLzEwMH0pLG50KHRoaXMuc3dpcGVTaGFkb3cpLnF1ZXVlKHtvcGFjaXR5Oi0xKm99KSl9fSx7a2V5OlwicmVzdG9yZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3RoaXMuaXNEcmFnU3RhcnR8fCh0aGlzLnNob3VsZEFuaW1hdGVUb29sYmFyP250LnJ1bkFsbChudChbdGhpcy5kZWNvbXAuZW50ZXIuY29udGVudCx0aGlzLmRlY29tcC5lbnRlci5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmVudGVyLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTI1JSwgMCwgMClcIixvcGFjaXR5Oi45fSx0aGlzLm9wdFJlc3RvcmUpLG50KHRoaXMuZGVjb21wLmVudGVyLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtXCIrdGhpcy5kZWx0YS50aXRsZStcInB4LCAwLCAwKVwiLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb25SZXN0b3JlK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uUmVzdG9yZStcInMgXCIrdGhpcy50aW1pbmdTd2lwZSxvcGFjaXR5OjB9KSxudCh0aGlzLmRlY29tcC5lbnRlci5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtXCIrdGhpcy5kZWx0YS5sYWJlbCtcInB4LCAwLCAwKVwifSx0aGlzLm9wdFJlc3RvcmUpLG50KHRoaXMuZGVjb21wLmVudGVyLm90aGVyKS5xdWV1ZSh7b3BhY2l0eTowfSx0aGlzLm9wdFJlc3RvcmUpLG50KFt0aGlzLmRlY29tcC5sZWF2ZS5jb250ZW50LHRoaXMuZGVjb21wLmxlYXZlLmJvdHRvbVRvb2xiYXIsdGhpcy5kZWNvbXAubGVhdmUuYmFja2dyb3VuZCx0aGlzLnN3aXBlU2hhZG93XSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMub3B0UmVzdG9yZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhcikucXVldWUoe29wYWNpdHk6MX0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5sZWF2ZS50b29sYmFyQ2VudGVyKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0sdGhpcy5vcHRSZXN0b3JlKSxudCh0aGlzLmRlY29tcC5sZWF2ZS5iYWNrQnV0dG9uTGFiZWwpLnF1ZXVlKHtvcGFjaXR5OjEsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIix0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uUmVzdG9yZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblJlc3RvcmUrXCJzIFwiK3RoaXMudGltaW5nU3dpcGV9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTowfSx0aGlzLm9wdFJlc3RvcmUpLnF1ZXVlKGZ1bmN0aW9uKGUpe2kuX3Jlc2V0KGkudGFyZ2V0LmVudGVyLGkudGFyZ2V0LmxlYXZlKSx0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbiYmbigpLGUoKX0pKTpudC5ydW5BbGwobnQodCkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKC0yNSUsIDAsIDApXCIsb3BhY2l0eTouOX0sdGhpcy5vcHRSZXN0b3JlKSxudChlKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMCwgMClcIn0sdGhpcy5vcHRSZXN0b3JlKS5xdWV1ZShmdW5jdGlvbihvKXtpLl9yZXNldCh0LGUpLHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixuJiZuKCksbygpfSkpKX19LHtrZXk6XCJwb3BTd2lwZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3RoaXMuaXNEcmFnU3RhcnR8fCh0aGlzLnNob3VsZEFuaW1hdGVUb29sYmFyP250LnJ1bkFsbChudChbdGhpcy5kZWNvbXAuZW50ZXIuY29udGVudCx0aGlzLmRlY29tcC5lbnRlci5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmVudGVyLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmVudGVyLnRvb2xiYXJDZW50ZXIpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb25Td2lwZStcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrdGhpcy5kdXJhdGlvblN3aXBlK1wicyBcIit0aGlzLnRpbWluZ1N3aXBlLG9wYWNpdHk6MX0pLG50KHRoaXMuZGVjb21wLmVudGVyLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmVudGVyLm90aGVyKS5xdWV1ZSh7b3BhY2l0eToxfSx0aGlzLm9wdFN3aXBlKSxudChbdGhpcy5kZWNvbXAubGVhdmUuY29udGVudCx0aGlzLmRlY29tcC5sZWF2ZS5ib3R0b21Ub29sYmFyLHRoaXMuZGVjb21wLmxlYXZlLmJhY2tncm91bmRdKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMTAwJSwgMCwgMClcIn0sdGhpcy5vcHRTd2lwZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhcikucXVldWUoe29wYWNpdHk6MH0sdGhpcy5vcHRTd2lwZSksbnQodGhpcy5kZWNvbXAubGVhdmUudG9vbGJhckNlbnRlcikucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDEyNSUsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLG50KHRoaXMuZGVjb21wLmxlYXZlLmJhY2tCdXR0b25MYWJlbCkucXVldWUoe29wYWNpdHk6MCx0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIit0aGlzLmRlbHRhLnRpdGxlK1wicHgsIDAsIDApXCIsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrdGhpcy5kdXJhdGlvblN3aXBlK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uU3dpcGUrXCJzIFwiK3RoaXMudGltaW5nU3dpcGV9KSxudCh0aGlzLnN3aXBlU2hhZG93KS5xdWV1ZSh7b3BhY2l0eTowLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMubWF4V2lkdGgrXCJweCwgMCwgMClcIn0sdGhpcy5vcHRTd2lwZSkucXVldWUoZnVuY3Rpb24odCl7aS5fcmVzZXQoaS50YXJnZXQuZW50ZXIsaS50YXJnZXQubGVhdmUpLG4mJm4oKSx0KCl9KSk6bnQucnVuQWxsKG50KHQpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0sdGhpcy5vcHRTd2lwZSksbnQoZSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDEwMCUsIDAsIDApXCJ9LHRoaXMub3B0U3dpcGUpLnF1ZXVlKGZ1bmN0aW9uKG8pe2kuX3Jlc2V0KHQsZSksbiYmbigpLG8oKX0pKSl9fSx7a2V5OlwiX3NhdmVTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLl9zYXZlZFN0eWxlPW5ldyBXZWFrTWFwO2Zvcih2YXIgZT1mdW5jdGlvbihlKXtyZXR1cm4gdC5fc2F2ZWRTdHlsZS5zZXQoZSxlLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKX0sbj1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkobiksbz0wO288bjtvKyspaVtvXT1hcmd1bWVudHNbb107aS5mb3JFYWNoKGUpLE9iamVjdC5rZXlzKHRoaXMuZGVjb21wKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdC5rZXlzKHQuZGVjb21wW25dKS5mb3JFYWNoKGZ1bmN0aW9uKGkpeyh0LmRlY29tcFtuXVtpXWluc3RhbmNlb2YgQXJyYXk/dC5kZWNvbXBbbl1baV06W3QuZGVjb21wW25dW2ldXSkuZm9yRWFjaChlKX0pfSl9fSx7a2V5OlwiX3Jlc3RvcmVTdHlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMsZT1mdW5jdGlvbihlKXtudWxsPT09dC5fc2F2ZWRTdHlsZS5nZXQoZSk/ZS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTplLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsdC5fc2F2ZWRTdHlsZS5nZXQoZSkpLHQuX3NhdmVkU3R5bGUuZGVsZXRlKGUpfSxuPWFyZ3VtZW50cy5sZW5ndGgsaT1BcnJheShuKSxvPTA7bzxuO28rKylpW29dPWFyZ3VtZW50c1tvXTtpLmZvckVhY2goZSksT2JqZWN0LmtleXModGhpcy5kZWNvbXApLmZvckVhY2goZnVuY3Rpb24obil7T2JqZWN0LmtleXModC5kZWNvbXBbbl0pLmZvckVhY2goZnVuY3Rpb24oaSl7KHQuZGVjb21wW25dW2ldaW5zdGFuY2VvZiBBcnJheT90LmRlY29tcFtuXVtpXTpbdC5kZWNvbXBbbl1baV1dKS5mb3JFYWNoKGUpfSl9KX19LHtrZXk6XCJfcmVzZXRcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuaXNTd2lwaW5nPSExLHRoaXMuX3NhdmVkU3R5bGUmJnRoaXMuX3Jlc3RvcmVTdHlsZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy51bmJsb2NrJiZ0aGlzLnVuYmxvY2soKSx0aGlzLnN3aXBlU2hhZG93LnJlbW92ZSgpLHRoaXMuYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdGhpcy5vdmVyZmxvd0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm92ZXJmbG93LXZpc2libGVcIiksdGhpcy5kZWNvbXAubGVhdmUuY29udGVudC5jbGFzc0xpc3QucmVtb3ZlKFwiY29udGVudC1zd2lwaW5nXCIpLHRoaXMuZGVjb21wPXRoaXMudGFyZ2V0PXRoaXMub3ZlcmZsb3dFbGVtZW50PXRoaXMuX3NhdmVkU3R5bGU9bnVsbCx0aGlzLmlzRHJhZ1N0YXJ0PSEwfX1dKSxlfSgpLHRyPWZ1bmN0aW9uKCl7cmV0dXJuXCJ0cmFuc2xhdGUzZChcIisoYXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOjApK1wiLCBcIisoYXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjApK1wiLCBcIisoYXJndW1lbnRzLmxlbmd0aD4yJiZ2b2lkIDAhPT1hcmd1bWVudHNbMl0/YXJndW1lbnRzWzJdOjApK1wiKVwifSxlcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKDAuMywgLjQsIDAsIC45KVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphLGw9eSh0LFtcInRpbWluZ1wiLFwiZGVsYXlcIixcImR1cmF0aW9uXCJdKTtwKHRoaXMsZSk7dmFyIHU9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMsXyh7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSxsKSkpO3JldHVybiB1LmJhY2tncm91bmRNYXNrPVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgei1pbmRleDogMlwiPjwvZGl2PicpLHV9cmV0dXJuIGIoZSxabyksZyhlLFt7a2V5OlwiX2RlY29tcG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX2dldFRvb2xiYXJFbGVtZW50KCksbj1lLl9nZXRUb29sYmFyTGVmdEl0ZW1zRWxlbWVudCgpLGk9ZS5fZ2V0VG9vbGJhclJpZ2h0SXRlbXNFbGVtZW50KCksbz1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10sbj0wO248dC5sZW5ndGg7bisrKVwib25zLWJhY2stYnV0dG9uXCIhPT10W25dLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJmUucHVzaCh0W25dKTtyZXR1cm4gZX0scj1bXS5jb25jYXQoMD09PW4uY2hpbGRyZW4ubGVuZ3RoP246byhuLmNoaWxkcmVuKSkuY29uY2F0KDA9PT1pLmNoaWxkcmVuLmxlbmd0aD9pOm8oaS5jaGlsZHJlbikpO3JldHVybnt0b29sYmFyQ2VudGVyOmUuX2dldFRvb2xiYXJDZW50ZXJJdGVtc0VsZW1lbnQoKSxiYWNrQnV0dG9uSWNvbjplLl9nZXRUb29sYmFyQmFja0J1dHRvbkljb25FbGVtZW50KCksYmFja0J1dHRvbkxhYmVsOmUuX2dldFRvb2xiYXJCYWNrQnV0dG9uTGFiZWxFbGVtZW50KCksb3RoZXI6cixjb250ZW50OnQuX2dldENvbnRlbnRFbGVtZW50KCksYmFja2dyb3VuZDp0Ll9nZXRCYWNrZ3JvdW5kRWxlbWVudCgpLHRvb2xiYXI6ZSxib3R0b21Ub29sYmFyOnQuX2dldEJvdHRvbVRvb2xiYXJFbGVtZW50KCl9fX0se2tleTpcIl9zaG91bGRBbmltYXRlVG9vbGJhclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5fY2FuQW5pbWF0ZVRvb2xiYXIoKSYmZS5fY2FuQW5pbWF0ZVRvb2xiYXIoKSxpPXQuX2dldFRvb2xiYXJFbGVtZW50KCksbz1lLl9nZXRUb29sYmFyRWxlbWVudCgpLHI9aS5oYXNBdHRyaWJ1dGUoXCJzdGF0aWNcIil8fG8uaGFzQXR0cmlidXRlKFwic3RhdGljXCIpLGE9US5oYXNNb2RpZmllcihpLFwibWF0ZXJpYWxcIil8fFEuaGFzTW9kaWZpZXIobyxcIm1hdGVyaWFsXCIpLHM9US5oYXNNb2RpZmllcihpLFwidHJhbnNwYXJlbnRcIil8fFEuaGFzTW9kaWZpZXIobyxcInRyYW5zcGFyZW50XCIpO3JldHVybiBuJiYhciYmIWEmJiFzfX0se2tleTpcIl9jYWxjdWxhdGVEZWx0YVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwLGk9dm9pZCAwLG89dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZihlLmJhY2tCdXR0b25MYWJlbC5jbGFzc0xpc3QuY29udGFpbnMoXCJiYWNrLWJ1dHRvbl9fbGFiZWxcIikpe3ZhciByPWUuYmFja0J1dHRvbkxhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO249TWF0aC5yb3VuZChvLndpZHRoLzItci53aWR0aC8yLXIubGVmdCl9ZWxzZSBuPU1hdGgucm91bmQoby53aWR0aC8yKi42KTtyZXR1cm4gZS5iYWNrQnV0dG9uSWNvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJiYWNrLWJ1dHRvbl9faWNvblwiKSYmKGk9ZS5iYWNrQnV0dG9uSWNvbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodC0yKSx7dGl0bGU6bixsYWJlbDppfX19LHtrZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxpLG8pe3ZhciByPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssaSk7dmFyIGE9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtuKHQsZnVuY3Rpb24oKXt2YXIgZT1RLmZpbmRUb29sYmFyUGFnZSh0KXx8dCxuPVEuZmluZFRvb2xiYXJQYWdlKGkpfHxpLHM9ci5fZGVjb21wb3NlKGUpLGw9ci5fZGVjb21wb3NlKG4pLHU9ci5fY2FsY3VsYXRlRGVsdGEoaSxzKTtyLl9zaG91bGRBbmltYXRlVG9vbGJhcihlLG4pP250LnJ1bkFsbChudChbcy5jb250ZW50LHMuYm90dG9tVG9vbGJhcixzLmJhY2tncm91bmRdLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCIxMDAlXCIpfSx7dHJhbnNmb3JtOnRyKCl9KSxudChzLnRvb2xiYXIsci5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pLG50KHMudG9vbGJhckNlbnRlcixyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiMTI1JVwiKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9KSxudChzLmJhY2tCdXR0b25MYWJlbCxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKHUudGl0bGUrXCJweFwiKSxvcGFjaXR5OjB9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjEsdHJhbnNpdGlvbjpcIm9wYWNpdHkgXCIrci5kdXJhdGlvbitcInMgbGluZWFyLCB0cmFuc2Zvcm0gXCIrci5kdXJhdGlvbitcInMgXCIrci50aW1pbmd9KSxudChzLm90aGVyLHIuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtjc3M6e29wYWNpdHk6MX0sdGltaW5nOlwibGluZWFyXCJ9KSxudChbbC5jb250ZW50LGwuYm90dG9tVG9vbGJhcixsLmJhY2tncm91bmRdLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoXCItMjUlXCIpLG9wYWNpdHk6Ljl9KS5xdWV1ZShmdW5jdGlvbih0KXtyLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLGEoKSxvKCksdCgpfSksbnQobC50b29sYmFyQ2VudGVyLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoXCItXCIrdS50aXRsZStcInB4XCIpLG9wYWNpdHk6MCx0cmFuc2l0aW9uOlwib3BhY2l0eSBcIityLmR1cmF0aW9uK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIityLmR1cmF0aW9uK1wicyBcIityLnRpbWluZ30pLG50KGwuYmFja0J1dHRvbkxhYmVsLHIuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9LHt0cmFuc2Zvcm06dHIoXCItXCIrdS5sYWJlbCtcInB4XCIpLG9wYWNpdHk6MH0pLG50KGwub3RoZXIsci5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se2Nzczp7b3BhY2l0eTowfSx0aW1pbmc6XCJsaW5lYXJcIn0pKTpudC5ydW5BbGwobnQodCxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiMTAwJVwiKX0se3RyYW5zZm9ybTp0cigpfSksbnQoaSxyLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSx7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSkucXVldWUoZnVuY3Rpb24odCl7ci5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxhKCksbygpLHQoKX0pKX0pfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz10aGlzO2lmKHRoaXMuaXNTd2lwaW5nKXJldHVybiB0aGlzLnBvcFN3aXBlKHQsbixpKTt0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayx0KTt2YXIgcj12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpLGE9US5maW5kVG9vbGJhclBhZ2UodCl8fHQscz1RLmZpbmRUb29sYmFyUGFnZShuKXx8bixsPXRoaXMuX2RlY29tcG9zZShhKSx1PXRoaXMuX2RlY29tcG9zZShzKSxjPXRoaXMuX2NhbGN1bGF0ZURlbHRhKG4sdSk7dGhpcy5fc2hvdWxkQW5pbWF0ZVRvb2xiYXIoYSxzKT9udC5ydW5BbGwobnQoW2wuY29udGVudCxsLmJvdHRvbVRvb2xiYXIsbC5iYWNrZ3JvdW5kXSx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKFwiLTI1JVwiKSxvcGFjaXR5Oi45fSx7dHJhbnNmb3JtOnRyKCksb3BhY2l0eToxfSksbnQobC50b29sYmFyQ2VudGVyLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCItXCIrYy50aXRsZStcInB4XCIpLG9wYWNpdHk6MH0se3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MSx0cmFuc2l0aW9uOlwib3BhY2l0eSBcIit0aGlzLmR1cmF0aW9uK1wicyBsaW5lYXIsIHRyYW5zZm9ybSBcIit0aGlzLmR1cmF0aW9uK1wicyBcIit0aGlzLnRpbWluZ30pLG50KGwuYmFja0J1dHRvbkxhYmVsLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCItXCIrYy5sYWJlbCtcInB4XCIpfSx7dHJhbnNmb3JtOnRyKCl9KSxudChsLm90aGVyLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtjc3M6e29wYWNpdHk6MX0sdGltaW5nOlwibGluZWFyXCJ9KSxudChbdS5jb250ZW50LHUuYm90dG9tVG9vbGJhcix1LmJhY2tncm91bmRdLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKX0se3RyYW5zZm9ybTp0cihcIjEwMCVcIil9KS53YWl0KDApLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCkscigpLGkoKSx0KCl9KSxudCh1LnRvb2xiYXIsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLG50KHUudG9vbGJhckNlbnRlcix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOnRyKCl9LHt0cmFuc2Zvcm06dHIoXCIxMjUlXCIpfSksbnQodS5iYWNrQnV0dG9uTGFiZWwsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTp0cigpLG9wYWNpdHk6MX0se3RyYW5zZm9ybTp0cihjLnRpdGxlK1wicHhcIiksb3BhY2l0eTowLHRyYW5zaXRpb246XCJvcGFjaXR5IFwiK3RoaXMuZHVyYXRpb24rXCJzIGxpbmVhciwgdHJhbnNmb3JtIFwiK3RoaXMuZHVyYXRpb24rXCJzIFwiK3RoaXMudGltaW5nfSkpOm50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoXCItMjUlXCIpLG9wYWNpdHk6Ljl9LHt0cmFuc2Zvcm06dHIoKSxvcGFjaXR5OjF9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06dHIoKX0se3RyYW5zZm9ybTp0cihcIjEwMCVcIil9KS5xdWV1ZShmdW5jdGlvbih0KXtvLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLHIoKSxpKCksdCgpfSkpfX1dKSxlfSgpLG5yPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuMSwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjQ6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5iYWNrZ3JvdW5kTWFzaz1RLmNyZWF0ZUVsZW1lbnQoJzxkaXYgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7YmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KGJsYWNrLCB3aGl0ZSk7XCI+PC9kaXY+JyksbH1yZXR1cm4gYihlLEpvKSxnKGUsW3trZXk6XCJwdXNoXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxuLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssbik7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMTAwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCJ9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIC0xMCUsIDApXCIsb3BhY2l0eTouOX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCkscigpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgLTQzcHgsIDApXCIsb3BhY2l0eTouOX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCIsb3BhY2l0eToxfSkucXVldWUoZnVuY3Rpb24odCl7by5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSxyKCksaSgpLHQoKX0pLG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNEKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAxMDAlLCAwKVwifSkpfX1dKSxlfSgpLGlyPVwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy40OmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOmlyLG9wYWNpdHk6MH0se3RyYW5zZm9ybTppcixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19LHtrZXk6XCJwb3BcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOmlyLG9wYWNpdHk6MX0se3RyYW5zZm9ybTppcixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbih0KXtvKCksaSgpLHQoKX0pKX19XSksZX0oKSxycj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjQsIDEpXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zOmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwuYmxhY2tNYXNrT3BhY2l0eT0uNCxsLmJhY2tncm91bmRNYXNrPVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgei1pbmRleDogMjtiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgb3BhY2l0eTogMDtcIj48L2Rpdj4nKSxsfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpczt0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLG4ucGFyZW50RWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayxuLm5leHRTaWJsaW5nKTt2YXIgcj12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpO250LnJ1bkFsbChudCh0aGlzLmJhY2tncm91bmRNYXNrLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MH0se29wYWNpdHk6dGhpcy5ibGFja01hc2tPcGFjaXR5fSkucXVldWUoZnVuY3Rpb24odCl7by5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0KCl9KSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgxMDAlLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0pLG50KG4sdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgtNDUlLCAwLCAwKVwifSkucXVldWUoZnVuY3Rpb24odCl7cigpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdC5uZXh0U2libGluZyk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodGhpcy5iYWNrZ3JvdW5kTWFzayx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OnRoaXMuYmxhY2tNYXNrT3BhY2l0eX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSksbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoLTQ1JSwgMCwgMClcIixvcGFjaXR5Oi45fSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMTAwJSwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSkpfX1dKSxlfSgpLGFyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuMSwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/LjA1Om8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uNDphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBsLmJhY2tncm91bmRNYXNrPVEuY3JlYXRlRWxlbWVudCgnPGRpdiBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcIj48L2Rpdj4nKSxsfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dGhpczt0aGlzLmJhY2tncm91bmRNYXNrLnJlbW92ZSgpLG4ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5iYWNrZ3JvdW5kTWFzayxuKTt2YXIgcj12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpLGE9bnQodGhpcy5iYWNrZ3JvdW5kTWFzaykud2FpdCh0aGlzLmRlbGF5K3RoaXMuZHVyYXRpb24pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSk7bnQucnVuQWxsKGEsbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMTAwJSwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9KSxudChuLHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjF9LHtvcGFjaXR5Oi40fSkucXVldWUoZnVuY3Rpb24odCl7cigpLGkoKSx0KCl9KSl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXM7dGhpcy5iYWNrZ3JvdW5kTWFzay5yZW1vdmUoKSx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuYmFja2dyb3VuZE1hc2ssdCk7dmFyIHI9dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodGhpcy5iYWNrZ3JvdW5kTWFzaykud2FpdCh0aGlzLmRlbGF5K3RoaXMuZHVyYXRpb24pLnF1ZXVlKGZ1bmN0aW9uKHQpe28uYmFja2dyb3VuZE1hc2sucmVtb3ZlKCksdCgpfSksbnQodCx0aGlzLmRlZikuZGVmYXVsdCh7b3BhY2l0eTouNH0se29wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe3IoKSxpKCksdCgpfSksbnQobix0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDEwMCUsIDApXCJ9KSl9fV0pLGV9KCksc3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImN1YmljLWJlemllcigwLjQsIDAsIDAuMiwgMSlcIjpuLG89dC50aW1pbmdQb3Ascj12b2lkIDA9PT1vP1wiY3ViaWMtYmV6aWVyKDAuNCwgMCwgMSwgMSlcIjpvLGE9dC5kZWxheSxzPXZvaWQgMD09PWE/MDphLGw9dC5kdXJhdGlvbix1PXZvaWQgMD09PWw/LjI6bDtwKHRoaXMsZSk7dmFyIGM9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnMsZHVyYXRpb246dX0pKTtyZXR1cm4gYy50aW1pbmdQb3A9cixjfXJldHVybiBiKGUsSm8pLGcoZSxbe2tleTpcInB1c2hcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG89dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJibG9ja1wiLHRoaXMpLmNhbGwodGhpcyx0KTtudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgNDJweCwgMClcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28oKSxpKCksdCgpfSkpfX0se2tleTpcInBvcFwiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXt2YXIgbz12KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImJsb2NrXCIsdGhpcykuY2FsbCh0aGlzLHQpO250LnJ1bkFsbChudChuLHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzRCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se2Nzczp7dHJhbnNmb3JtOlwidHJhbnNsYXRlM0QoMCwgMzhweCwgMClcIixvcGFjaXR5OjB9LHRpbWluZzp0aGlzLnRpbWluZ1BvcH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe28oKSxpKCksdCgpfSkpfX1dKSxlfSgpLGxyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUodCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx0KSl9cmV0dXJuIGIoZSxKbyksZyhlLFt7a2V5OlwicHVzaFwiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtuKCl9fSx7a2V5OlwicG9wXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe24oKX19XSksZX0oKSx1cj17ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3NyOmVyfSxzbGlkZTpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3JyOmVyfSxsaWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXNBbmRyb2lkKCk/YXI6bnJ9LGZhZGU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pc0FuZHJvaWQoKT9zcjpvcn0sXCJzbGlkZS1pb3NcIjplcixcInNsaWRlLW1kXCI6cnIsXCJsaWZ0LWlvc1wiOm5yLFwibGlmdC1tZFwiOmFyLFwiZmFkZS1pb3NcIjpvcixcImZhZGUtbWRcIjpzcixub25lOmxyfSxjcj17cmVhZHk6ZnVuY3Rpb24odCxlKXtlKCl9fSxocj1mdW5jdGlvbih0KXtyZXR1cm5cIk9OUy1QQUdFXCIhPT10Lm5vZGVOYW1lJiZRLnRocm93KFwiT25seSBwYWdlIGVsZW1lbnRzIGNhbiBiZSBjaGlsZHJlbiBvZiBuYXZpZ2F0b3JcIil9LGRyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5faXNSdW5uaW5nPSExLHQuX2luaXRpYWxpemVkPSExLHQuX3BhZ2VMb2FkZXI9anQsdC5fcGFnZU1hcD1uZXcgV2Vha01hcCx0Ll91cGRhdGVBbmltYXRvckZhY3RvcnkoKSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImFuaW1hdG9yRmFjdG9yeVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbmltYXRvckZhY3Rvcnl9fV0pLGcoZSxbe2tleTpcIl9nZXRQYWdlVGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFnZXx8dGhpcy5nZXRBdHRyaWJ1dGUoXCJwYWdlXCIpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO2lmKHRoaXMub25EZXZpY2VCYWNrQnV0dG9uPXRoaXMuX29uRGV2aWNlQmFja0J1dHRvbi5iaW5kKHRoaXMpLCFDLmlzQW5kcm9pZCgpfHxcImZvcmNlXCI9PT10aGlzLmdldEF0dHJpYnV0ZShcInN3aXBlYWJsZVwiKSl7dmFyIGU9dm9pZCAwO3RoaXMuX3N3aXBlPW5ldyBRbyh7ZWxlbWVudDp0aGlzLGdldFRocmVzaG9sZDpmdW5jdGlvbigpe3JldHVybiBNYXRoLm1heCguMixwYXJzZUZsb2F0KHQuZ2V0QXR0cmlidXRlKFwic3dpcGUtdGhyZXNob2xkXCIpKXx8MCl9LHN3aXBlTWF4OmZ1bmN0aW9uKCl7dC5fb25Td2lwZSYmdC5fb25Td2lwZSgxLHtkdXJhdGlvbjplLmR1cmF0aW9uU3dpcGUsdGltaW5nOmUudGltaW5nU3dpcGV9KSx0W3Quc3dpcGVNYXg/XCJzd2lwZU1heFwiOlwicG9wUGFnZVwiXSh7YW5pbWF0b3I6ZX0pLGU9bnVsbH0sc3dpcGVNaWQ6ZnVuY3Rpb24obixpKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKG4vaSksZS50cmFuc2xhdGUobixpLHQudG9wUGFnZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLHQudG9wUGFnZSl9LHN3aXBlTWluOmZ1bmN0aW9uKCl7dC5fb25Td2lwZSYmdC5fb25Td2lwZSgwLHtkdXJhdGlvbjplLmR1cmF0aW9uUmVzdG9yZSx0aW1pbmc6ZS50aW1pbmdTd2lwZX0pLGUucmVzdG9yZSh0LnRvcFBhZ2UucHJldmlvdXNFbGVtZW50U2libGluZyx0LnRvcFBhZ2UpLGU9bnVsbH0saWdub3JlU3dpcGU6ZnVuY3Rpb24obixpKXtpZighdC5faXNSdW5uaW5nJiZ0LmNoaWxkcmVuLmxlbmd0aD4xKXt2YXIgbz1wYXJzZUludCh0LmdldEF0dHJpYnV0ZShcInN3aXBlLXRhcmdldC13aWR0aFwiKXx8MjUsMTApO2lmKFwicmlnaHRcIj09PW4uZ2VzdHVyZS5kaXJlY3Rpb24mJm8+aSl7dmFyIHI9ZnVuY3Rpb24odCl7cmV0dXJuL29ucy1iYWNrLWJ1dHRvbi9pLnRlc3QodC50YWdOYW1lKX07aWYoIXIobi50YXJnZXQpJiYhUS5maW5kUGFyZW50KG4udGFyZ2V0LHIsZnVuY3Rpb24odCl7cmV0dXJuL29ucy1wYWdlL2kudGVzdCh0LnRhZ05hbWUpfSkpe3ZhciBhPSh0LnRvcFBhZ2UucHVzaGVkT3B0aW9uc3x8e30pLmFuaW1hdGlvbnx8dC5hbmltYXRvckZhY3RvcnkuX2FuaW1hdGlvbixzPXVyW2FdaW5zdGFuY2VvZiBGdW5jdGlvbj91clthXS5jYWxsKCk6dXJbYV07aWYodm9pZCAwIT09cyYmcy5zd2lwZWFibGUpcmV0dXJuIGU9bmV3IHMsITF9fX1yZXR1cm4hMH19KSx0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcInN3aXBlYWJsZVwiKX1pZighdGhpcy5faW5pdGlhbGl6ZWQpe3RoaXMuX2luaXRpYWxpemVkPSEwO3ZhciBpPVEuZGVmZXIoKTt0aGlzLmxvYWRlZD1pLnByb21pc2UsY3IucmVhZHkodGhpcyxmdW5jdGlvbigpe3ZhciBlPSFRLmhhc0FueUNvbXBvbmVudEFzUGFyZW50KHQpLG89e2FuaW1hdGlvbjpcIm5vbmVcIixzaG93OmV9O2lmKDA9PT10LnBhZ2VzLmxlbmd0aCYmdC5fZ2V0UGFnZVRhcmdldCgpKXQucHVzaFBhZ2UodC5fZ2V0UGFnZVRhcmdldCgpLG8pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gaS5yZXNvbHZlKCl9KTtlbHNlIGlmKHQucGFnZXMubGVuZ3RoPjApe2Zvcih2YXIgcj0wO3I8dC5wYWdlcy5sZW5ndGg7cisrKWhyKHQucGFnZXNbcl0pO3QudG9wUGFnZSYmbih0LnRvcFBhZ2UsZnVuY3Rpb24oKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe2kucmVzb2x2ZSgpLGUmJnQudG9wUGFnZS5fc2hvdygpLHQuX3VwZGF0ZUxhc3RQYWdlQmFja0J1dHRvbigpfSwwKX0pfWVsc2Ugbih0LGZ1bmN0aW9uKCl7MD09PXQucGFnZXMubGVuZ3RoJiZ0Ll9nZXRQYWdlVGFyZ2V0KCk/dC5wdXNoUGFnZSh0Ll9nZXRQYWdlVGFyZ2V0KCksbykudGhlbihmdW5jdGlvbigpe3JldHVybiBpLnJlc29sdmUoKX0pOmkucmVzb2x2ZSgpfSl9KX19fSx7a2V5OlwiX3VwZGF0ZUFuaW1hdG9yRmFjdG9yeVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0b3JGYWN0b3J5PW5ldyBPKHthbmltYXRvcnM6dXIsYmFzZUNsYXNzOkpvLGJhc2VDbGFzc05hbWU6XCJOYXZpZ2F0b3JBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXIuZGVzdHJveSgpLHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyPW51bGwsdGhpcy5fc3dpcGUmJnRoaXMuX3N3aXBlLmRpc3Bvc2UoKSx0aGlzLl9zd2lwZT1udWxsfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiYW5pbWF0aW9uXCI6dGhpcy5fdXBkYXRlQW5pbWF0b3JGYWN0b3J5KCk7YnJlYWs7Y2FzZVwic3dpcGVhYmxlXCI6dGhpcy5fc3dpcGUmJnRoaXMuX3N3aXBlLnVwZGF0ZSgpfX19LHtrZXk6XCJwb3BQYWdlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9O2U9dGhpcy5fcHJlcGFyZVBhZ2VBbmRPcHRpb25zKG51bGwsZSkub3B0aW9ucyxRLmlzSW50ZWdlcihlLnRpbWVzKSYmZS50aW1lcz4xJiZ0aGlzLl9yZW1vdmVQYWdlcyhlLnRpbWVzKTtyZXR1cm4gdGhpcy5fcG9wUGFnZShlLGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3QuX3BhZ2VMb2FkZXIudW5sb2FkKHQucGFnZXNbdC5wYWdlcy5sZW5ndGgtMV0pLGUoKX0pfSl9fSx7a2V5OlwiX3BvcFBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOmZ1bmN0aW9uKCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZSgpfTtpZih0aGlzLl9pc1J1bm5pbmcpcmV0dXJuIFByb21pc2UucmVqZWN0KFwicG9wUGFnZSBpcyBhbHJlYWR5IHJ1bm5pbmcuXCIpO2lmKHRoaXMucGFnZXMubGVuZ3RoPD0xKXJldHVybiBQcm9taXNlLnJlamVjdChcIm9ucy1uYXZpZ2F0b3IncyBwYWdlIHN0YWNrIGlzIGVtcHR5LlwiKTtpZih0aGlzLl9lbWl0UHJlUG9wRXZlbnQoKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZCBpbiBwcmVwb3AgZXZlbnQuXCIpO3ZhciBpPXRoaXMucGFnZXMubGVuZ3RoO3JldHVybiB0aGlzLl9pc1J1bm5pbmc9ITAsdGhpcy5wYWdlc1tpLTJdLnVwZGF0ZUJhY2tCdXR0b24oaS0yPjApLG5ldyBQcm9taXNlKGZ1bmN0aW9uKG8pe3ZhciByPWUucGFnZXNbaS0xXSxhPWUucGFnZXNbaS0yXTsodD1RLmV4dGVuZCh7fSxlLm9wdGlvbnN8fHt9LHIucHVzaGVkT3B0aW9uc3x8e30sdCkpLmRhdGEmJihhLmRhdGE9US5leHRlbmQoe30sYS5kYXRhfHx7fSx0LmRhdGF8fHt9KSk7ci5faGlkZSgpLGEuc3R5bGUuZGlzcGxheT1cIlwiOyh0LmFuaW1hdG9yfHxlLl9hbmltYXRvckZhY3RvcnkubmV3QW5pbWF0b3IodCkpLnBvcChlLnBhZ2VzW2ktMl0sZS5wYWdlc1tpLTFdLGZ1bmN0aW9uKCl7bigpLnRoZW4oZnVuY3Rpb24oKXtlLl9pc1J1bm5pbmc9ITEsYS5fc2hvdygpLFEudHJpZ2dlckVsZW1lbnRFdmVudChlLFwicG9zdHBvcFwiLHtsZWF2ZVBhZ2U6cixlbnRlclBhZ2U6YSxuYXZpZ2F0b3I6ZX0pLHQuY2FsbGJhY2smJnQuY2FsbGJhY2soYSksbyhhKX0pfSl9KS5jYXRjaChmdW5jdGlvbigpe3JldHVybiBlLl9pc1J1bm5pbmc9ITF9KX19LHtrZXk6XCJwdXNoUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnModCxuKTt0PWkucGFnZTt2YXIgbz1mdW5jdGlvbihpKXtocihpKSxlLl9wYWdlTWFwLnNldChpLHQpLChpPVEuZXh0ZW5kKGkse2RhdGE6bi5kYXRhfSkpLnN0eWxlLnZpc2liaWxpdHk9XCJoaWRkZW5cIn07cmV0dXJuKG49aS5vcHRpb25zKS5wYWdlSFRNTD90aGlzLl9wdXNoUGFnZShuLGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe0h0LmxvYWQoe3BhZ2U6bi5wYWdlSFRNTCxwYXJlbnQ6ZSxwYXJhbXM6bi5kYXRhfSxmdW5jdGlvbihlKXtvKGUpLHQoKX0pfSl9KTp0aGlzLl9wdXNoUGFnZShuLGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGkpe2UuX3BhZ2VMb2FkZXIubG9hZCh7cGFnZTp0LHBhcmVudDplLHBhcmFtczpuLmRhdGF9LGZ1bmN0aW9uKHQpe28odCksaSgpfSl9KX0pfX0se2tleTpcIl9wdXNoUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTpmdW5jdGlvbigpe3JldHVybiBQcm9taXNlLnJlc29sdmUoKX07aWYodGhpcy5faXNSdW5uaW5nKXJldHVybiBQcm9taXNlLnJlamVjdChcInB1c2hQYWdlIGlzIGFscmVhZHkgcnVubmluZy5cIik7aWYodGhpcy5fZW1pdFByZVB1c2hFdmVudCgpKXJldHVybiBQcm9taXNlLnJlamVjdChcIkNhbmNlbGVkIGluIHByZXB1c2ggZXZlbnQuXCIpO3RoaXMuX2lzUnVubmluZz0hMDt2YXIgaT1PLnBhcnNlQW5pbWF0aW9uT3B0aW9uc1N0cmluZyh0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpKTtlPVEuZXh0ZW5kKHt9LHRoaXMub3B0aW9uc3x8e30se2FuaW1hdGlvbk9wdGlvbnM6aX0sZSk7dmFyIG89dGhpcy5fYW5pbWF0b3JGYWN0b3J5Lm5ld0FuaW1hdG9yKGUpO3JldHVybiBuKCkudGhlbihmdW5jdGlvbigpe3ZhciBuPXQucGFnZXMubGVuZ3RoLGk9dC5wYWdlc1tuLTFdLHI9ZS5sZWF2ZVBhZ2V8fHQucGFnZXNbbi0yXTtyZXR1cm4gaHIoaSksaS51cGRhdGVCYWNrQnV0dG9uKG4+KGUuX3JlcGxhY2VQYWdlPzI6MSkpLGkucHVzaGVkT3B0aW9ucz1RLmV4dGVuZCh7fSxpLnB1c2hlZE9wdGlvbnN8fHt9LGV8fHt9KSxpLmRhdGE9US5leHRlbmQoe30saS5kYXRhfHx7fSxlLmRhdGF8fHt9KSxpLnVubG9hZD1pLnVubG9hZHx8ZS51bmxvYWQsbmV3IFByb21pc2UoZnVuY3Rpb24obil7dmFyIGE9ZnVuY3Rpb24oKXt0Ll9pc1J1bm5pbmc9ITEsITEhPT1lLnNob3cmJnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBpLl9zaG93KCl9KSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodCxcInBvc3RwdXNoXCIse2xlYXZlUGFnZTpyLGVudGVyUGFnZTppLG5hdmlnYXRvcjp0fSksciYmKHIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIiksZS5jYWxsYmFjayYmZS5jYWxsYmFjayhpKSxuKGkpfTtpLnN0eWxlLnZpc2liaWxpdHk9XCJcIixyPyhyLl9oaWRlKCksby5wdXNoKGkscixhKSk6YSgpfSl9KS5jYXRjaChmdW5jdGlvbihlKXt0aHJvdyB0Ll9pc1J1bm5pbmc9ITEsZX0pfX0se2tleTpcInJlcGxhY2VQYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm4gdGhpcy5wdXNoUGFnZSh0LG4pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUucGFnZXMubGVuZ3RoPjEmJmUuX3BhZ2VMb2FkZXIudW5sb2FkKGUucGFnZXNbZS5wYWdlcy5sZW5ndGgtMl0pLGUuX3VwZGF0ZUxhc3RQYWdlQmFja0J1dHRvbigpLFByb21pc2UucmVzb2x2ZSh0KX0pfX0se2tleTpcImluc2VydFBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXMsaT1hcmd1bWVudHMubGVuZ3RoPjImJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06e30sbz10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnMoZSxpKTtpZihlPW8ucGFnZSxpPW8ub3B0aW9ucywodD10aGlzLl9ub3JtYWxpemVJbmRleCh0KSk+PXRoaXMucGFnZXMubGVuZ3RoKXJldHVybiB0aGlzLnB1c2hQYWdlKGUsaSk7ZT1cInN0cmluZ1wiPT10eXBlb2YgaS5wYWdlSFRNTD9pLnBhZ2VIVE1MOmU7dmFyIHI9XCJzdHJpbmdcIj09dHlwZW9mIGkucGFnZUhUTUw/SHQ6dGhpcy5fcGFnZUxvYWRlcjtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obyl7ci5sb2FkKHtwYWdlOmUscGFyZW50Om59LGZ1bmN0aW9uKHIpe2hyKHIpLG4uX3BhZ2VNYXAuc2V0KHIsZSkscj1RLmV4dGVuZChyLHtkYXRhOmkuZGF0YSxwdXNoZWRPcHRpb25zOml9KSxpLmFuaW1hdGlvbk9wdGlvbnM9US5leHRlbmQoe30sTy5wYXJzZUFuaW1hdGlvbk9wdGlvbnNTdHJpbmcobi5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKSksaS5hbmltYXRpb25PcHRpb25zfHx7fSksci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLG4uaW5zZXJ0QmVmb3JlKHIsbi5wYWdlc1t0XSksbi50b3BQYWdlLnVwZGF0ZUJhY2tCdXR0b24oITApLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtyPW51bGwsbyhuLnBhZ2VzW3RdKX0sMWUzLzYwKX0pfSl9fSx7a2V5OlwicmVtb3ZlUGFnZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuKHQ9dGhpcy5fbm9ybWFsaXplSW5kZXgodCkpPHRoaXMucGFnZXMubGVuZ3RoLTE/bmV3IFByb21pc2UoZnVuY3Rpb24obil7dmFyIGk9ZS5wYWdlc1t0XSxvPWUudG9wUGFnZTtlLl9wYWdlTWFwLmRlbGV0ZShpKSxlLl9wYWdlTG9hZGVyLnVubG9hZChpKSwxPT09ZS5wYWdlcy5sZW5ndGgmJmUudG9wUGFnZS51cGRhdGVCYWNrQnV0dG9uKCExKSxuKG8pfSk6dGhpcy5wb3BQYWdlKG4pfX0se2tleTpcInJlc2V0VG9QYWdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxpPXRoaXMuX3ByZXBhcmVQYWdlQW5kT3B0aW9ucyh0LG4pO2lmKHQ9aS5wYWdlLChuPWkub3B0aW9ucykuYW5pbWF0b3J8fG4uYW5pbWF0aW9ufHxuLnBvcHx8KG4uYW5pbWF0aW9uPVwibm9uZVwiKSxuLnBhZ2V8fG4ucGFnZUhUTUx8fCF0aGlzLl9nZXRQYWdlVGFyZ2V0KCl8fCh0PW4ucGFnZT10aGlzLl9nZXRQYWdlVGFyZ2V0KCkpLG4ucG9wKXJldHVybiB0aGlzLl9yZW1vdmVQYWdlcygpLHRoaXMuaW5zZXJ0UGFnZSgwLHQse2RhdGE6bi5kYXRhfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLnBvcFBhZ2Uobil9KTt2YXIgbz1uLmNhbGxiYWNrO3JldHVybiBuLmNhbGxiYWNrPWZ1bmN0aW9uKHQpe2UuX3JlbW92ZVBhZ2VzKCksdC51cGRhdGVCYWNrQnV0dG9uKCExKSxvJiZvKHQpfSx0aGlzLnB1c2hQYWdlKHQsbil9fSx7a2V5OlwiYnJpbmdQYWdlVG9wXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9Oy0xPT09W1wibnVtYmVyXCIsXCJzdHJpbmdcIl0uaW5kZXhPZih2b2lkIDA9PT10P1widW5kZWZpbmVkXCI6Zih0KSkmJlEudGhyb3coXCJGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcGFnZSBuYW1lIG9yIHRoZSBpbmRleCBvZiBhbiBleGlzdGluZyBwYWdlLiBZb3Ugc3VwcGxpZWQgXCIrdCk7dmFyIG49XCJudW1iZXJcIj09dHlwZW9mIHQ/dGhpcy5fbm9ybWFsaXplSW5kZXgodCk6dGhpcy5fbGFzdEluZGV4T2ZQYWdlKHQpLGk9dGhpcy5wYWdlc1tuXTtpZihuPDApcmV0dXJuIHRoaXMucHVzaFBhZ2UodCxlKTtyZXR1cm4gZT10aGlzLl9wcmVwYXJlUGFnZUFuZE9wdGlvbnMoaSxlKS5vcHRpb25zLG49PT10aGlzLnBhZ2VzLmxlbmd0aC0xP1Byb21pc2UucmVzb2x2ZShpKTooaXx8US50aHJvdyhcIkZhaWxlZCB0byBmaW5kIGl0ZW0gXCIrdCksdGhpcy5faXNSdW5uaW5nP1Byb21pc2UucmVqZWN0KFwicHVzaFBhZ2UgaXMgYWxyZWFkeSBydW5uaW5nLlwiKTp0aGlzLl9lbWl0UHJlUHVzaEV2ZW50KCk/UHJvbWlzZS5yZWplY3QoXCJDYW5jZWxlZCBpbiBwcmVwdXNoIGV2ZW50LlwiKTooaS5zdHlsZS5kaXNwbGF5PVwiXCIsaS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCIsaS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGkpLHRoaXMuX3B1c2hQYWdlKGUpKSl9fSx7a2V5OlwiX3ByZXBhcmVQYWdlQW5kT3B0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtyZXR1cm5cIm9iamVjdFwiIT0odm9pZCAwPT09ZT9cInVuZGVmaW5lZFwiOmYoZSkpJiZRLnRocm93KFwib3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4gWW91IHN1cHBsaWVkIFwiK2UpLG51bGwhPT10JiZ2b2lkIDAhPT10fHwhZS5wYWdlfHwodD1lLnBhZ2UpLGU9US5leHRlbmQoe30sdGhpcy5vcHRpb25zfHx7fSxlLHtwYWdlOnR9KSx7cGFnZTp0LG9wdGlvbnM6ZX19fSx7a2V5OlwiX3JlbW92ZVBhZ2VzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wYWdlcyxuPXZvaWQgMD09PXQ/MDplLmxlbmd0aC10O249bjwwPzE6bjtmb3IodmFyIGk9ZS5sZW5ndGgtMjtpPj1uO2ktLSl0aGlzLl9wYWdlTWFwLmRlbGV0ZShlW2ldKSx0aGlzLl9wYWdlTG9hZGVyLnVubG9hZChlW2ldKX19LHtrZXk6XCJfdXBkYXRlTGFzdFBhZ2VCYWNrQnV0dG9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnBhZ2VzLmxlbmd0aC0xO3Q+PTAmJnRoaXMucGFnZXNbdF0udXBkYXRlQmFja0J1dHRvbih0PjApfX0se2tleTpcIl9ub3JtYWxpemVJbmRleFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0Pj0wP3Q6TWF0aC5hYnModGhpcy5wYWdlcy5sZW5ndGgrdCkldGhpcy5wYWdlcy5sZW5ndGh9fSx7a2V5OlwiX29uRGV2aWNlQmFja0J1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMucGFnZXMubGVuZ3RoPjE/dGhpcy5wb3BQYWdlKCk6dC5jYWxsUGFyZW50SGFuZGxlcigpfX0se2tleTpcIl9sYXN0SW5kZXhPZlBhZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT12b2lkIDA7Zm9yKGU9dGhpcy5wYWdlcy5sZW5ndGgtMTtlPj0wJiYodGhpcy5fcGFnZU1hcC5oYXModGhpcy5wYWdlc1tlXSl8fFEudGhyb3coXCJJbmNvcnJlY3Qgc3RhdGUgb2YgcGFnZU1hcFwiKSx0IT09dGhpcy5fcGFnZU1hcC5nZXQodGhpcy5wYWdlc1tlXSkpO2UtLSk7cmV0dXJuIGV9fSx7a2V5OlwiX2VtaXRQcmVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fSxuPSExO3JldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInByZVwiK3QsUS5leHRlbmQoe25hdmlnYXRvcjp0aGlzLGN1cnJlbnRQYWdlOnRoaXMucGFnZXNbdGhpcy5wYWdlcy5sZW5ndGgtMV0sY2FuY2VsOmZ1bmN0aW9uKCl7cmV0dXJuIG49ITB9fSxlKSksbn19LHtrZXk6XCJfZW1pdFByZVB1c2hFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VtaXRQcmVFdmVudChcInB1c2hcIil9fSx7a2V5OlwiX2VtaXRQcmVQb3BFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5wYWdlcy5sZW5ndGg7cmV0dXJuIHRoaXMuX2VtaXRQcmVFdmVudChcInBvcFwiLHtsZWF2ZVBhZ2U6dGhpcy5wYWdlc1t0LTFdLGVudGVyUGFnZTp0aGlzLnBhZ2VzW3QtMl19KX19LHtrZXk6XCJfY3JlYXRlUGFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1RLmNyZWF0ZUVsZW1lbnQoUC5ub3JtYWxpemVQYWdlSFRNTCh0KSk7cmV0dXJuIGhyKGUpLGV9fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5sb2FkZWQudGhlbihmdW5jdGlvbigpe3JldHVybiB0LnRvcFBhZ2UmJnQudG9wUGFnZS5fc2hvdygpfSl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMudG9wUGFnZSYmdGhpcy50b3BQYWdlLl9oaWRlKCl9fSx7a2V5OlwiX2Rlc3Ryb3lcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD10aGlzLnBhZ2VzLmxlbmd0aC0xO3Q+PTA7dC0tKXRoaXMuX3BhZ2VMb2FkZXIudW5sb2FkKHRoaXMucGFnZXNbdF0pO3RoaXMucmVtb3ZlKCl9fSx7a2V5OlwicGFnZUxvYWRlclwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlTG9hZGVyfSxzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH19LHtrZXk6XCJwYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlPXR9fSx7a2V5Olwib25EZXZpY2VCYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXImJnRoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1SLmNyZWF0ZUhhbmRsZXIodGhpcyx0KX19LHtrZXk6XCJ0b3BQYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMubGFzdEVsZW1lbnRDaGlsZDt0JiZcIk9OUy1QQUdFXCIhPT10LnRhZ05hbWU7KXQ9dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO3JldHVybiB0fX0se2tleTpcInBhZ2VzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuYXJyYXlGcm9tKHRoaXMuY2hpbGRyZW4pLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm5cIk9OUy1QQUdFXCI9PT10LnRhZ05hbWV9KX19LHtrZXk6XCJvblN3aXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU3dpcGV9LHNldDpmdW5jdGlvbih0KXshdHx8dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxRLnRocm93KCdcIm9uU3dpcGVcIiBtdXN0IGJlIGEgZnVuY3Rpb24nKSx0aGlzLl9vblN3aXBlPXR9fSx7a2V5Olwib3B0aW9uc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fb3B0aW9ucz10fX0se2tleTpcIl9pc1J1bm5pbmdcIixzZXQ6ZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJfaXMtcnVubmluZ1wiLHQ/XCJ0cnVlXCI6XCJmYWxzZVwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUoXCJfaXMtcnVubmluZ1wiKSl9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlLnByb3RvdHlwZSBpbnN0YW5jZW9mIEpvfHxRLnRocm93QW5pbWF0b3IoXCJOYXZpZ2F0b3JcIiksdXJbdF09ZX19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJhbmltYXRpb25cIixcInN3aXBlYWJsZVwiXX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdXJ9fSx7a2V5OlwiTmF2aWdhdG9yQW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gSm99fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wicHJlcHVzaFwiLFwicG9zdHB1c2hcIixcInByZXBvcFwiLFwicG9zdHBvcFwiXX19LHtrZXk6XCJyZXdyaXRhYmxlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBjcn19XSksZX0oKTtjLk5hdmlnYXRvcj1kcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtbmF2aWdhdG9yXCIsZHIpO3ZhciBmcj17XCJcIjpcInRvb2xiYXItLSpcIixcIi50b29sYmFyX19sZWZ0XCI6XCJ0b29sYmFyLS0qX19sZWZ0XCIsXCIudG9vbGJhcl9fY2VudGVyXCI6XCJ0b29sYmFyLS0qX19jZW50ZXJcIixcIi50b29sYmFyX19yaWdodFwiOlwidG9vbGJhci0tKl9fcmlnaHRcIn0scHI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwidG9vbGJhclwiLGZyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsZnIpfX19LHtrZXk6XCJfZ2V0VG9vbGJhckxlZnRJdGVtc0VsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCIubGVmdFwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckNlbnRlckl0ZW1zRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5jZW50ZXJcIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2dldFRvb2xiYXJSaWdodEl0ZW1zRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5yaWdodFwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckJhY2tCdXR0b25MYWJlbEVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJvbnMtYmFjay1idXR0b24gLmJhY2stYnV0dG9uX19sYWJlbFwiKXx8UC5udWxsRWxlbWVudH19LHtrZXk6XCJfZ2V0VG9vbGJhckJhY2tCdXR0b25JY29uRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIm9ucy1iYWNrLWJ1dHRvbiAuYmFjay1idXR0b25fX2ljb25cIil8fFAubnVsbEVsZW1lbnR9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe04ucHJlcGFyZSh0aGlzKSx0aGlzLmNsYXNzTGlzdC5hZGQoXCJ0b29sYmFyXCIpLHRoaXMuX2Vuc3VyZVRvb2xiYXJJdGVtRWxlbWVudHMoKSxCLmluaXRNb2RpZmllcih0aGlzLGZyKX19LHtrZXk6XCJfZW5zdXJlVG9vbGJhckl0ZW1FbGVtZW50c1wiLHZhbHVlOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuY2hpbGROb2Rlcy5sZW5ndGgtMTt0Pj0wO3QtLSkxIT10aGlzLmNoaWxkTm9kZXNbdF0ubm9kZVR5cGUmJnRoaXMucmVtb3ZlQ2hpbGQodGhpcy5jaGlsZE5vZGVzW3RdKTt2YXIgZT10aGlzLl9lbnN1cmVUb29sYmFyRWxlbWVudChcImNlbnRlclwiKTtpZihlLmNsYXNzTGlzdC5hZGQoXCJ0b29sYmFyX190aXRsZVwiKSwxIT09dGhpcy5jaGlsZHJlbi5sZW5ndGh8fCF0aGlzLmNoaWxkcmVuWzBdLmNsYXNzTGlzdC5jb250YWlucyhcImNlbnRlclwiKSl7dmFyIG49dGhpcy5fZW5zdXJlVG9vbGJhckVsZW1lbnQoXCJsZWZ0XCIpLGk9dGhpcy5fZW5zdXJlVG9vbGJhckVsZW1lbnQoXCJyaWdodFwiKTt0aGlzLmNoaWxkcmVuWzBdPT09biYmdGhpcy5jaGlsZHJlblsxXT09PWUmJnRoaXMuY2hpbGRyZW5bMl09PT1pfHwodGhpcy5hcHBlbmRDaGlsZChuKSx0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXMuYXBwZW5kQ2hpbGQoaSkpfX19LHtrZXk6XCJfZW5zdXJlVG9vbGJhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0KXtpZihRLmZpbmRDaGlsZCh0aGlzLFwiLnRvb2xiYXJfX1wiK3QpKXt2YXIgZT1RLmZpbmRDaGlsZCh0aGlzLFwiLnRvb2xiYXJfX1wiK3QpO3JldHVybiBlLmNsYXNzTGlzdC5hZGQodCksZX12YXIgbj1RLmZpbmRDaGlsZCh0aGlzLFwiLlwiK3QpfHxRLmNyZWF0ZShcIi5cIit0KTtyZXR1cm4gbi5jbGFzc0xpc3QuYWRkKFwidG9vbGJhcl9fXCIrdCksbn19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLlRvb2xiYXI9cHIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXRvb2xiYXJcIixwcik7dmFyIGdyPVwicGFnZVwiLG1yPXtcIlwiOlwicGFnZS0tKlwiLFwiLnBhZ2VfX2NvbnRlbnRcIjpcInBhZ2UtLSpfX2NvbnRlbnRcIixcIi5wYWdlX19iYWNrZ3JvdW5kXCI6XCJwYWdlLS0qX19iYWNrZ3JvdW5kXCJ9LF9yPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZGVyaXZlSG9va3MoKSx0Ll9kZWZhdWx0Q2xhc3NOYW1lPWdyLHQuY2xhc3NMaXN0LmFkZChnciksdC5faW5pdGlhbGl6ZWQ9ITEsbih0LGZ1bmN0aW9uKCl7dC5fY29tcGlsZSgpLHQuX2lzU2hvd249ITEsdC5fY29udGVudEVsZW1lbnQ9dC5fZ2V0Q29udGVudEVsZW1lbnQoKSx0Ll9iYWNrZ3JvdW5kRWxlbWVudD10Ll9nZXRCYWNrZ3JvdW5kRWxlbWVudCgpfSksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztOLnByZXBhcmUodGhpcyk7dmFyIGU9US5maW5kQ2hpbGQodGhpcyxcIm9ucy10b29sYmFyXCIpLG49US5maW5kQ2hpbGQodGhpcyxcIi5wYWdlX19iYWNrZ3JvdW5kXCIpfHxRLmZpbmRDaGlsZCh0aGlzLFwiLmJhY2tncm91bmRcIil8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc0xpc3QuYWRkKFwicGFnZV9fYmFja2dyb3VuZFwiKSx0aGlzLmluc2VydEJlZm9yZShuLCFlJiZ0aGlzLmZpcnN0Q2hpbGR8fGUmJmUubmV4dFNpYmxpbmcpO3ZhciBpPVEuZmluZENoaWxkKHRoaXMsXCIucGFnZV9fY29udGVudFwiKXx8US5maW5kQ2hpbGQodGhpcyxcIi5jb250ZW50XCIpfHxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NMaXN0LmFkZChcInBhZ2VfX2NvbnRlbnRcIiksaS5wYXJlbnRFbGVtZW50fHxRLmFycmF5RnJvbSh0aGlzLmNoaWxkTm9kZXMpLmZvckVhY2goZnVuY3Rpb24oZSl7KDEhPT1lLm5vZGVUeXBlfHx0Ll9lbGVtZW50U2hvdWxkQmVNb3ZlZChlKSkmJmkuYXBwZW5kQ2hpbGQoZSl9KSx0aGlzLl90cnlUb0ZpbGxTdGF0dXNCYXIoaSksdGhpcy5pbnNlcnRCZWZvcmUoaSxuLm5leHRTaWJsaW5nKSxlJiZRLmhhc01vZGlmaWVyKGUsXCJ0cmFuc3BhcmVudFwiKXx8MSE9PWkuY2hpbGRyZW4ubGVuZ3RofHwhUS5pc1BhZ2VDb250cm9sKGkuY2hpbGRyZW5bMF0pfHwodGhpcy5fZGVmYXVsdENsYXNzTmFtZSs9XCIgcGFnZS0td3JhcHBlclwiLHRoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwiY2xhc3NcIikpLEIuaW5pdE1vZGlmaWVyKHRoaXMsbXIpfX0se2tleTpcIl9lbGVtZW50U2hvdWxkQmVNb3ZlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicGFnZV9fYmFja2dyb3VuZFwiKSlyZXR1cm4hMTt2YXIgZT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtpZihcIm9ucy1mYWJcIj09PWUpcmV0dXJuIXQuaGFzQXR0cmlidXRlKFwicG9zaXRpb25cIik7cmV0dXJuIHQuaGFzQXR0cmlidXRlKFwiaW5saW5lXCIpfHwtMT09PVtcInNjcmlwdFwiLFwib25zLXRvb2xiYXJcIixcIm9ucy1ib3R0b20tdG9vbGJhclwiLFwib25zLW1vZGFsXCIsXCJvbnMtc3BlZWQtZGlhbFwiLFwib25zLWRpYWxvZ1wiLFwib25zLWFsZXJ0LWRpYWxvZ1wiLFwib25zLXBvcG92ZXJcIixcIm9ucy1hY3Rpb24tc2hlZXRcIl0uaW5kZXhPZihlKX19LHtrZXk6XCJfdHJ5VG9GaWxsU3RhdHVzQmFyXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuX2NvbnRlbnRFbGVtZW50O1AuYXV0b1N0YXR1c0JhckZpbGwoZnVuY3Rpb24oKXtRLnRvZ2dsZUF0dHJpYnV0ZSh0LFwic3RhdHVzLWJhci1maWxsXCIsIVEuZmluZFBhcmVudCh0LGZ1bmN0aW9uKHQpe3JldHVybiB0Lmhhc0F0dHJpYnV0ZShcInN0YXR1cy1iYXItZmlsbFwiKX0pJiYodC5fY2FuQW5pbWF0ZVRvb2xiYXIoZSl8fCFRLmZpbmRDaGlsZChlLFEuaXNQYWdlQ29udHJvbCkpKX0pfX0se2tleTpcIl9jYW5BbmltYXRlVG9vbGJhclwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuX2NvbnRlbnRFbGVtZW50O3JldHVybiEhUS5maW5kQ2hpbGQodGhpcyxcIm9ucy10b29sYmFyXCIpfHwhIVEuZmluZENoaWxkKHQsZnVuY3Rpb24odCl7cmV0dXJuIFEubWF0Y2godCxcIm9ucy10b29sYmFyXCIpJiYhdC5oYXNBdHRyaWJ1dGUoXCJpbmxpbmVcIil9KX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztRLmlzQXR0YWNoZWQodGhpcykmJm4odGhpcyxmdW5jdGlvbigpe3QuX3RyeVRvRmlsbFN0YXR1c0JhcigpLHQuaGFzQXR0cmlidXRlKFwib24taW5maW5pdGUtc2Nyb2xsXCIpJiZ0LmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhcIm9uLWluZmluaXRlLXNjcm9sbFwiLG51bGwsdC5nZXRBdHRyaWJ1dGUoXCJvbi1pbmZpbml0ZS1zY3JvbGxcIikpLHQuX2luaXRpYWxpemVkfHwodC5faW5pdGlhbGl6ZWQ9ITAsc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5vbkluaXQmJnQub25Jbml0KCksUS50cmlnZ2VyRWxlbWVudEV2ZW50KHQsXCJpbml0XCIpfSksUS5oYXNBbnlDb21wb25lbnRBc1BhcmVudCh0KXx8c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3Nob3coKX0pKX0pfX0se2tleTpcInVwZGF0ZUJhY2tCdXR0b25cIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmJhY2tCdXR0b24mJih0P3RoaXMuYmFja0J1dHRvbi5zaG93KCk6dGhpcy5iYWNrQnV0dG9uLmhpZGUoKSl9fSx7a2V5OlwiX29uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fY29udGVudEVsZW1lbnQsbj0oZS5zY3JvbGxUb3ArZS5jbGllbnRIZWlnaHQpL2Uuc2Nyb2xsSGVpZ2h0Pj10aGlzLl9pbmZpbml0ZVNjcm9sbExpbWl0O3RoaXMuX29uSW5maW5pdGVTY3JvbGwmJiF0aGlzLl9sb2FkaW5nQ29udGVudCYmbiYmKHRoaXMuX2xvYWRpbmdDb250ZW50PSEwLHRoaXMuX29uSW5maW5pdGVTY3JvbGwoZnVuY3Rpb24oKXtyZXR1cm4gdC5fbG9hZGluZ0NvbnRlbnQ9ITF9KSl9fSx7a2V5OlwiX2dldENvbnRlbnRFbGVtZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1RLmZpbmRDaGlsZCh0aGlzLFwiLnBhZ2VfX2NvbnRlbnRcIik7aWYodClyZXR1cm4gdDtRLnRocm93KCdGYWlsIHRvIGdldCBcIi5wYWdlX19jb250ZW50XCIgZWxlbWVudCcpfX0se2tleTpcIl9nZXRCYWNrZ3JvdW5kRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi5wYWdlX19iYWNrZ3JvdW5kXCIpO2lmKHQpcmV0dXJuIHQ7US50aHJvdygnRmFpbCB0byBnZXQgXCIucGFnZV9fYmFja2dyb3VuZFwiIGVsZW1lbnQnKX19LHtrZXk6XCJfZ2V0Qm90dG9tVG9vbGJhckVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLWJvdHRvbS10b29sYmFyXCIpfHxQLm51bGxFbGVtZW50fX0se2tleTpcIl9nZXRUb29sYmFyRWxlbWVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJvbnMtdG9vbGJhclwiKXx8ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9ucy10b29sYmFyXCIpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsdGhpcy5fZGVmYXVsdENsYXNzTmFtZSxtcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLG1yKTticmVhaztjYXNlXCJvbi1pbmZpbml0ZS1zY3JvbGxcIjp0aGlzLm9uSW5maW5pdGVTY3JvbGw9bnVsbD09PW4/bnVsbDpmdW5jdGlvbih0KXt2YXIgZT1RLmZpbmRGcm9tUGF0aChuKTtpLm9uSW5maW5pdGVTY3JvbGw9ZSxlKHQpfX19fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpeyF0aGlzLl9pc1Nob3duJiZRLmlzQXR0YWNoZWQodGhpcykmJih0aGlzLl9pc1Nob3duPSEwLHRoaXMuc2V0QXR0cmlidXRlKFwic2hvd25cIixcIlwiKSx0aGlzLm9uU2hvdyYmdGhpcy5vblNob3coKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInNob3dcIiksUS5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9zaG93XCIpKX19LHtrZXk6XCJfaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNTaG93biYmKHRoaXMuX2lzU2hvd249ITEsdGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJzaG93blwiKSx0aGlzLm9uSGlkZSYmdGhpcy5vbkhpZGUoKSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImhpZGVcIiksUS5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9oaWRlXCIpKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faGlkZSgpLHRoaXMub25EZXN0cm95JiZ0aGlzLm9uRGVzdHJveSgpLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwiZGVzdHJveVwiKSx0aGlzLm9uRGV2aWNlQmFja0J1dHRvbiYmdGhpcy5vbkRldmljZUJhY2tCdXR0b24uZGVzdHJveSgpLFEucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfZGVzdHJveVwiKSx0aGlzLnJlbW92ZSgpfX0se2tleTpcIl9kZXJpdmVIb29rc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmNvbnN0cnVjdG9yLmV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPVwib25cIitlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbix7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRbXCJfXCIrbl19LHNldDpmdW5jdGlvbihlKXtlIGluc3RhbmNlb2YgRnVuY3Rpb258fFEudGhyb3coJ1wiJytuKydcIiBob29rIG11c3QgYmUgYSBmdW5jdGlvbicpLHRbXCJfXCIrbl09ZS5iaW5kKHQpfX0pfSl9fSx7a2V5OlwibmFtZVwiLHNldDpmdW5jdGlvbih0KXt0aGlzLnNldEF0dHJpYnV0ZShcIm5hbWVcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwibmFtZVwiKX19LHtrZXk6XCJiYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIm9ucy1iYWNrLWJ1dHRvblwiKX19LHtrZXk6XCJvbkluZmluaXRlU2Nyb2xsXCIsc2V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvbkluZmluaXRlU2Nyb2xsXCIgbXVzdCBiZSBmdW5jdGlvbiBvciBudWxsJyksbih0aGlzLGZ1bmN0aW9uKCl7dD9lLl9vbkluZmluaXRlU2Nyb2xsfHwoZS5faW5maW5pdGVTY3JvbGxMaW1pdD0uOSxlLl9ib3VuZE9uU2Nyb2xsPWUuX29uU2Nyb2xsLmJpbmQoZSksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NvbnRlbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIixlLl9ib3VuZE9uU2Nyb2xsKX0pKTplLl9jb250ZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsZS5fYm91bmRPblNjcm9sbCksZS5fb25JbmZpbml0ZVNjcm9sbD10fSl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkluZmluaXRlU2Nyb2xsfX0se2tleTpcIm9uRGV2aWNlQmFja0J1dHRvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2JhY2tCdXR0b25IYW5kbGVyJiZ0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9Ui5jcmVhdGVIYW5kbGVyKHRoaXMsdCl9fSx7a2V5Olwic2Nyb2xsVG9wXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnRFbGVtZW50LnNjcm9sbFRvcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbnRlbnRFbGVtZW50LnNjcm9sbFRvcD10fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcIm9uLWluZmluaXRlLXNjcm9sbFwiLFwiY2xhc3NcIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiaW5pdFwiLFwic2hvd1wiLFwiaGlkZVwiLFwiZGVzdHJveVwiXX19XSksZX0oKTtjLlBhZ2U9X3IsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXBhZ2VcIixfcik7dmFyIHZyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuNCwgMSlcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI6YTtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSl9cmV0dXJuIGIoZSxUaSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJfYW5pbWF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49ZS5mcm9tLGk9ZS50byxvPWUub3B0aW9ucyxyPWUuY2FsbGJhY2ssYT1lLnJlc3RvcmUscz12b2lkIDAhPT1hJiZhLGw9ZS5hbmltYXRpb247cmV0dXJuIG89US5leHRlbmQoe30sdGhpcy5vcHRpb25zLG8pLGwmJihuPWwuZnJvbSxpPWwudG8pLGw9bnQodCkscyYmKGw9bC5zYXZlU3R5bGUoKSksbD1sLnF1ZXVlKG4pLndhaXQodGhpcy5kZWxheSkucXVldWUoe2NzczppLGR1cmF0aW9uOnRoaXMuZHVyYXRpb24sdGltaW5nOnRoaXMudGltaW5nfSkscyYmKGw9bC5yZXN0b3JlU3R5bGUoKSksciYmKGw9bC5xdWV1ZShmdW5jdGlvbih0KXtyKCksdCgpfSkpLGx9fSx7a2V5OlwiX2FuaW1hdGVBbGxcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7T2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihpKXtyZXR1cm4gbi5fYW5pbWF0ZSh0W2ldLGVbaV0pLnBsYXkoKX0pfX1dKSxlfSgpLGJyPXtvdXQ6e2Zyb206e29wYWNpdHk6MX0sdG86e29wYWNpdHk6MH19LGluOntmcm9tOntvcGFjaXR5OjB9LHRvOntvcGFjaXR5OjF9fX0seXI9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsdnIpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3RoaXMuX2FuaW1hdGVBbGwodCx7X21hc2s6YnIuaW4sX3BvcG92ZXI6e2FuaW1hdGlvbjpici5pbixyZXN0b3JlOiEwLGNhbGxiYWNrOmV9fSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dGhpcy5fYW5pbWF0ZUFsbCh0LHtfbWFzazpici5vdXQsX3BvcG92ZXI6e2FuaW1hdGlvbjpici5vdXQscmVzdG9yZTohMCxjYWxsYmFjazplfX0pfX1dKSxlfSgpLGtyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLHlyKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0aGlzLl9hbmltYXRlQWxsKHQse19tYXNrOmJyLmluLF9wb3BvdmVyOntmcm9tOnt0cmFuc2Zvcm06XCJzY2FsZTNkKDEuMywgMS4zLCAxLjApXCIsb3BhY2l0eTowfSx0bzp7dHJhbnNmb3JtOlwic2NhbGUzZCgxLjAsIDEuMCwgIDEuMClcIixvcGFjaXR5OjF9LHJlc3RvcmU6ITAsY2FsbGJhY2s6ZX19KX19XSksZX0oKSx3cj17XCIucG9wb3ZlclwiOlwicG9wb3Zlci0tKlwiLFwiLnBvcG92ZXItbWFza1wiOlwicG9wb3Zlci1tYXNrLS0qXCIsXCIucG9wb3Zlcl9fY29udGVudFwiOlwicG9wb3Zlci0tKl9fY29udGVudFwiLFwiLnBvcG92ZXJfX2Fycm93XCI6XCJwb3BvdmVyLS0qX19hcnJvd1wifSxFcj17ZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiBDLmlzQW5kcm9pZCgpP3lyOmtyfSxub25lOnZyLFwiZmFkZS1pb3NcIjprcixcImZhZGUtbWRcIjp5cn0sQ3I9e3VwOlwiYm90dG9tXCIsbGVmdDpcInJpZ2h0XCIsZG93bjpcInRvcFwiLHJpZ2h0OlwibGVmdFwifSxBcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX2JvdW5kT25DaGFuZ2U9dC5fb25DaGFuZ2UuYmluZCh0KSxuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCksdC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE8oe2FuaW1hdG9yczpFcixiYXNlQ2xhc3M6dnIsYmFzZUNsYXNzTmFtZTpcIlBvcG92ZXJBbmltYXRvclwiLGRlZmF1bHRBbmltYXRpb246dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb25cIil8fFwiZGVmYXVsdFwifSl9fSx7a2V5OlwiX3RvZ2dsZVN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3Q/KHRoaXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdGhpcy5fY3VycmVudFRhcmdldD1lLnRhcmdldCx0aGlzLl9wb3NpdGlvblBvcG92ZXIoZS50YXJnZXQpKToodGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuX2NsZWFyU3R5bGVzKCkpfX0se2tleTpcIl9wb3NpdGlvblBvcG92ZXJcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9yYWRpdXMsbj10aGlzLl9jb250ZW50LGk9dGhpcy5fbWFyZ2luLG89TGkuZ2V0U2FmZUFyZWFMZW5ndGhzKCkscj1MaS5nZXRTYWZlQXJlYURPTVJlY3QoKSxhPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz1RLmhhc01vZGlmaWVyKHRoaXMsXCJtYXRlcmlhbFwiKSxsPXMmJnRoaXMuaGFzQXR0cmlidXRlKFwiY292ZXItdGFyZ2V0XCIpLHU9KFEuZmluZFBhcmVudCh0aGlzLFwib25zLXBhZ2VcIil8fGRvY3VtZW50LmJvZHkpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGM9e3RvcDpNYXRoLm1heCh1LnRvcCxyLnRvcCksbGVmdDpNYXRoLm1heCh1LmxlZnQsci5sZWZ0KSxib3R0b206TWF0aC5taW4odS5ib3R0b20sci5ib3R0b20pLHJpZ2h0Ok1hdGgubWluKHUucmlnaHQsci5yaWdodCl9LGg9e3RvcDphLnRvcC0oYy50b3AraSksbGVmdDphLmxlZnQtKGMubGVmdCtpKSxib3R0b206Yy5ib3R0b20taS1hLmJvdHRvbSxyaWdodDpjLnJpZ2h0LWktYS5yaWdodH0sZD17dG9wOmEudG9wK01hdGgucm91bmQoYS5oZWlnaHQvMiktKGMudG9wK2kpLGxlZnQ6YS5sZWZ0K01hdGgucm91bmQoYS53aWR0aC8yKS0oYy5sZWZ0K2kpLGJvdHRvbTpjLmJvdHRvbS1pLWEuYm90dG9tK01hdGgucm91bmQoYS5oZWlnaHQvMikscmlnaHQ6Yy5yaWdodC1pLWEucmlnaHQrTWF0aC5yb3VuZChhLndpZHRoLzIpfSxmPXRoaXMuX2NhbGN1bGF0ZURpcmVjdGlvbnMoaCkscD1mLnZlcnRpY2FsLGc9Zi5wcmltYXJ5LG09Zi5zZWNvbmRhcnk7dGhpcy5fY3VycmVudERpcmVjdGlvbj1nLFEuYWRkTW9kaWZpZXIodGhpcyxnKTt2YXIgXz1wP1wid2lkdGhcIjpcImhlaWdodFwiLHY9ZnVuY3Rpb24odCl7cmV0dXJue3dpZHRoOnBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZShcIndpZHRoXCIpLDEwKSxoZWlnaHQ6cGFyc2VJbnQodC5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpLDEwKX19KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKG4pKSxiPWw/MDoocD9hLmhlaWdodDphLndpZHRoKSsocz8wOjE0KSx5PU1hdGgubWF4KG9bZ10raSxvW2ddK2kraFtnXStiKSxrPU1hdGgubWF4KG9bbV0raSxvW21dK2krZFttXS12W19dLzIpO3RoaXMuX3BvcG92ZXIuc3R5bGVbZ109eStcInB4XCIsdGhpcy5fcG9wb3Zlci5zdHlsZVttXT1rK1wicHhcIix0aGlzLl9hcnJvdy5zdHlsZVttXT1NYXRoLm1heChlLG9bbV0raStkW21dLWspK1wicHhcIn19LHtrZXk6XCJfY2FsY3VsYXRlRGlyZWN0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPSh0aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKXx8XCJ1cCBkb3duIGxlZnQgcmlnaHRcIikuc3BsaXQoL1xccysvKS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIENyW3RdfSkuc29ydChmdW5jdGlvbihlLG4pe3JldHVybiB0W2VdLXRbbl19KVswXSxuPVwidG9wXCI9PWV8fFwiYm90dG9tXCI9PWUsaT12b2lkIDA7cmV0dXJuIGk9bj90LmxlZnQ8dC5yaWdodD9cImxlZnRcIjpcInJpZ2h0XCI6dC50b3A8dC5ib3R0b20/XCJ0b3BcIjpcImJvdHRvbVwiLHt2ZXJ0aWNhbDpuLHByaW1hcnk6ZSxzZWNvbmRhcnk6aX19fSx7a2V5OlwiX2NsZWFyU3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX2N1cnJlbnREaXJlY3Rpb249bnVsbCxbXCJ0b3BcIixcImJvdHRvbVwiLFwibGVmdFwiLFwicmlnaHRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt0Ll9hcnJvdy5zdHlsZVtlXT10Ll9jb250ZW50LnN0eWxlW2VdPXQuX3BvcG92ZXIuc3R5bGVbZV09XCJcIixRLnJlbW92ZU1vZGlmaWVyKHQsZSl9KX19LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5fY3VycmVudFRhcmdldCYmdC5fcG9zaXRpb25Qb3BvdmVyKHQuX2N1cnJlbnRUYXJnZXQpfSl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe2lmKE4ucHJlcGFyZSh0aGlzKSwhdGhpcy5fcG9wb3Zlcnx8IXRoaXMuX21hc2spe2lmKHRoaXMuX3BvcG92ZXImJnRoaXMuX2NvbnRlbnQpe2lmKCF0aGlzLl9tYXNrKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NMaXN0LmFkZChcInBvcG92ZXItbWFza1wiKSx0aGlzLmluc2VydEJlZm9yZSh0LHRoaXMuZmlyc3RDaGlsZCl9aWYoIXRoaXMuX2Fycm93KXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NMaXN0LmFkZChcInBvcG92ZXJfX2Fycm93XCIpLHRoaXMuX3BvcG92ZXIuYXBwZW5kQ2hpbGQoZSl9fWVsc2V7Zm9yKHZhciBuPVEuY3JlYXRlRnJhZ21lbnQoJ1xcbiAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXItbWFza1wiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXJcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXJfX2NvbnRlbnRcIj48L2Rpdj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXJfX2Fycm93XCI+PC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAnKSxpPW4ucXVlcnlTZWxlY3RvcihcIi5wb3BvdmVyX19jb250ZW50XCIpO3RoaXMuY2hpbGROb2Rlc1swXTspaS5hcHBlbmRDaGlsZCh0aGlzLmNoaWxkTm9kZXNbMF0pO3RoaXMuYXBwZW5kQ2hpbGQobil9dGhpcy5oYXNBdHRyaWJ1dGUoXCJzdHlsZVwiKSYmKHRoaXMuX3BvcG92ZXIuc2V0QXR0cmlidXRlKFwic3R5bGVcIix0aGlzLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpKSx0aGlzLnJlbW92ZUF0dHJpYnV0ZShcInN0eWxlXCIpKSxCLmluaXRNb2RpZmllcih0aGlzLHRoaXMuX3NjaGVtZSl9fX0se2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mKG49IXR8fFwib2JqZWN0XCIhPT0odm9pZCAwPT09dD9cInVuZGVmaW5lZFwiOmYodCkpfHx0IGluc3RhbmNlb2YgRXZlbnR8fHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9fKHt9LG4se3RhcmdldDp0fSk6Xyh7fSx0KSkudGFyZ2V0P24udGFyZ2V0PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iobi50YXJnZXQpOm4udGFyZ2V0IGluc3RhbmNlb2YgRXZlbnQmJihuLnRhcmdldD1uLnRhcmdldC50YXJnZXQpLG4udGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnR8fFEudGhyb3coXCJJbnZhbGlkIHRhcmdldCB0eXBlIG9yIHVuZGVmaW5lZFwiKSx2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcInNob3dcIix0aGlzKS5jYWxsKHRoaXMsbil9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9ib3VuZE9uQ2hhbmdlLCExKSx0aGlzLl9tYXJnaW49dGhpcy5fbWFyZ2lufHxwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzKS5nZXRQcm9wZXJ0eVZhbHVlKFwidG9wXCIpKSx0aGlzLl9tYXJnaW49dGhpcy5fbWFyZ2lufHw2LG4odGhpcyxmdW5jdGlvbigpe3QuX3JhZGl1cz1wYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0Ll9jb250ZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwiYm9yZGVyLXRvcC1sZWZ0LXJhZGl1c1wiKSl9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHRoaXMpLmNhbGwodGhpcyksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLl9ib3VuZE9uQ2hhbmdlLCExKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7aWYoXCJkaXJlY3Rpb25cIj09PXQpcmV0dXJuIHRoaXMuX2JvdW5kT25DaGFuZ2UoKTtcIm1vZGlmaWVyXCI9PT10JiZ0aGlzLl9jdXJyZW50RGlyZWN0aW9uJiZRLmFkZE1vZGlmaWVyKHRoaXMsdGhpcy5fY3VycmVudERpcmVjdGlvbiksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl9zY2hlbWVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gd3J9fSx7a2V5OlwiX21hc2tcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5wb3BvdmVyLW1hc2tcIil9fSx7a2V5OlwiX3BvcG92ZXJcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi5wb3BvdmVyXCIpfX0se2tleTpcIl9jb250ZW50XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMuX3BvcG92ZXIsXCIucG9wb3Zlcl9fY29udGVudFwiKX19LHtrZXk6XCJfYXJyb3dcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcy5fcG9wb3ZlcixcIi5wb3BvdmVyX19hcnJvd1wiKX19XSxbe2tleTpcInJlZ2lzdGVyQW5pbWF0b3JcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UucHJvdG90eXBlIGluc3RhbmNlb2YgdnJ8fFEudGhyb3dBbmltYXRvcihcIlBvcG92ZXJcIiksRXJbdF09ZX19LHtrZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wiZGlyZWN0aW9uXCJdKX19LHtrZXk6XCJhbmltYXRvcnNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gRXJ9fSx7a2V5OlwiUG9wb3ZlckFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHZyfX1dKSxlfSgpO2MuUG9wb3Zlcj1BcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcG9wb3ZlclwiLEFyKTt2YXIgU3I9e1wiLnByb2dyZXNzLWJhclwiOlwicHJvZ3Jlc3MtYmFyLS0qXCIsXCIucHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCI6XCJwcm9ncmVzcy1iYXItLSpfX3ByaW1hcnlcIixcIi5wcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiOlwicHJvZ3Jlc3MtYmFyLS0qX19zZWNvbmRhcnlcIn0sUHI9US5jcmVhdGVFbGVtZW50KCdcXG4gIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIj5cXG4gICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhcl9fc2Vjb25kYXJ5XCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJfX3ByaW1hcnlcIj48L2Rpdj5cXG4gIDwvZGl2PlxcbicpLE9yPVwiaW5kZXRlcm1pbmF0ZVwiLHhyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2lzQ29tcGlsZWQoKT90aGlzLl90ZW1wbGF0ZT1RLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWJhclwiKTp0aGlzLl90ZW1wbGF0ZT1Qci5jbG9uZU5vZGUoITApLHRoaXMuX3ByaW1hcnk9US5maW5kQ2hpbGQodGhpcy5fdGVtcGxhdGUsXCIucHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCIpLHRoaXMuX3NlY29uZGFyeT1RLmZpbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSxcIi5wcm9ncmVzcy1iYXJfX3NlY29uZGFyeVwiKSx0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpLHRoaXMuX3VwZGF0ZVZhbHVlKCksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSksTi5wcmVwYXJlKHRoaXMpLEIuaW5pdE1vZGlmaWVyKHRoaXMsU3IpfX0se2tleTpcIl9pc0NvbXBpbGVkXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZighUS5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1iYXJcIikpcmV0dXJuITE7dmFyIHQ9US5maW5kQ2hpbGQodGhpcyxcIi5wcm9ncmVzcy1iYXJcIik7cmV0dXJuISFRLmZpbmRDaGlsZCh0LFwiLnByb2dyZXNzLWJhcl9fc2Vjb25kYXJ5XCIpJiYhIVEuZmluZENoaWxkKHQsXCIucHJvZ3Jlc3MtYmFyX19wcmltYXJ5XCIpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtcIm1vZGlmaWVyXCI9PT10PyhCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFNyKSx0aGlzLmhhc0F0dHJpYnV0ZShPcikmJnRoaXMuX3VwZGF0ZURldGVybWluYXRlKCkpOlwidmFsdWVcIj09PXR8fFwic2Vjb25kYXJ5LXZhbHVlXCI9PT10P3RoaXMuX3VwZGF0ZVZhbHVlKCk6dD09PU9yJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpfX0se2tleTpcIl91cGRhdGVEZXRlcm1pbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gUS50b2dnbGVNb2RpZmllcih0LE9yLHtmb3JjZTp0Lmhhc0F0dHJpYnV0ZShPcil9KX0pfX0se2tleTpcIl91cGRhdGVWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9wcmltYXJ5LnN0eWxlLndpZHRoPXQuaGFzQXR0cmlidXRlKFwidmFsdWVcIik/dC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKStcIiVcIjpcIjAlXCIsdC5fc2Vjb25kYXJ5LnN0eWxlLndpZHRoPXQuaGFzQXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpP3QuZ2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpK1wiJVwiOlwiMCVcIn0pfX0se2tleTpcInZhbHVlXCIsc2V0OmZ1bmN0aW9uKHQpeyhcIm51bWJlclwiIT10eXBlb2YgdHx8dDwwfHx0PjEwMCkmJlEudGhyb3coXCJJbnZhbGlkIHZhbHVlXCIpLHRoaXMuc2V0QXR0cmlidXRlKFwidmFsdWVcIixNYXRoLmZsb29yKHQpKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil8fFwiMFwiKX19LHtrZXk6XCJzZWNvbmRhcnlWYWx1ZVwiLHNldDpmdW5jdGlvbih0KXsoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xMDApJiZRLnRocm93KFwiSW52YWxpZCB2YWx1ZVwiKSx0aGlzLnNldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiLE1hdGguZmxvb3IodCkpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIil8fFwiMFwiKX19LHtrZXk6XCJpbmRldGVybWluYXRlXCIsc2V0OmZ1bmN0aW9uKHQpe3Q/dGhpcy5zZXRBdHRyaWJ1dGUoT3IsXCJcIik6dGhpcy5yZW1vdmVBdHRyaWJ1dGUoT3IpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoT3IpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInZhbHVlXCIsXCJzZWNvbmRhcnktdmFsdWVcIixPcl19fV0pLGV9KCk7Yy5Qcm9ncmVzc0Jhcj14cixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcHJvZ3Jlc3MtYmFyXCIseHIpO3ZhciBUcj17XCIucHJvZ3Jlc3MtY2lyY3VsYXJcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qXCIsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX2JhY2tncm91bmRcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qX19iYWNrZ3JvdW5kXCIsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3ByaW1hcnlcIjpcInByb2dyZXNzLWNpcmN1bGFyLS0qX19wcmltYXJ5XCIsXCIucHJvZ3Jlc3MtY2lyY3VsYXJfX3NlY29uZGFyeVwiOlwicHJvZ3Jlc3MtY2lyY3VsYXItLSpfX3NlY29uZGFyeVwifSxMcj1RLmNyZWF0ZUVsZW1lbnQoJ1xcbiAgPHN2ZyBjbGFzcz1cInByb2dyZXNzLWNpcmN1bGFyXCI+XFxuICAgIDxjaXJjbGUgY2xhc3M9XCJwcm9ncmVzcy1jaXJjdWxhcl9fYmFja2dyb3VuZFwiIC8+XFxuICAgIDxjaXJjbGUgY2xhc3M9XCJwcm9ncmVzcy1jaXJjdWxhcl9fc2Vjb25kYXJ5XCIgY3g9XCI1MCVcIiBjeT1cIjUwJVwiIHI9XCI0MCVcIiAvPlxcbiAgICA8Y2lyY2xlIGNsYXNzPVwicHJvZ3Jlc3MtY2lyY3VsYXJfX3ByaW1hcnlcIiBjeD1cIjUwJVwiIGN5PVwiNTAlXCIgcj1cIjQwJVwiIC8+XFxuICA8L3N2Zz5cXG4nKSxNcj1cImluZGV0ZXJtaW5hdGVcIixEcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtcIm1vZGlmaWVyXCI9PT10PyhCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFRyKSx0aGlzLmhhc0F0dHJpYnV0ZShNcikmJnRoaXMuX3VwZGF0ZURldGVybWluYXRlKCkpOlwidmFsdWVcIj09PXR8fFwic2Vjb25kYXJ5LXZhbHVlXCI9PT10P3RoaXMuX3VwZGF0ZVZhbHVlKCk6dD09PU1yJiZ0aGlzLl91cGRhdGVEZXRlcm1pbmF0ZSgpfX0se2tleTpcIl91cGRhdGVEZXRlcm1pbmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gUS50b2dnbGVNb2RpZmllcih0LE1yLHtmb3JjZTp0Lmhhc0F0dHJpYnV0ZShNcil9KX0pfX0se2tleTpcIl91cGRhdGVWYWx1ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpJiZuKHRoaXMsZnVuY3Rpb24oKXt2YXIgZT1NYXRoLmNlaWwoMjUxLjMyKnQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIikqLjAxKTt0Ll9wcmltYXJ5LnN0eWxlW1wic3Ryb2tlLWRhc2hhcnJheVwiXT1lK1wiJSwgMjUxLjMyJVwifSksdGhpcy5oYXNBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIik/bih0aGlzLGZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5jZWlsKDI1MS4zMip0LmdldEF0dHJpYnV0ZShcInNlY29uZGFyeS12YWx1ZVwiKSouMDEpO3QuX3NlY29uZGFyeS5zdHlsZS5kaXNwbGF5PW51bGwsdC5fc2Vjb25kYXJ5LnN0eWxlW1wic3Ryb2tlLWRhc2hhcnJheVwiXT1lK1wiJSwgMjUxLjMyJVwifSk6bih0aGlzLGZ1bmN0aW9uKCl7dC5fc2Vjb25kYXJ5LnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5faXNDb21waWxlZCgpP3RoaXMuX3RlbXBsYXRlPVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtY2lyY3VsYXJcIik6dGhpcy5fdGVtcGxhdGU9THIuY2xvbmVOb2RlKCEwKSx0aGlzLl9wcmltYXJ5PVEuZmluZENoaWxkKHRoaXMuX3RlbXBsYXRlLFwiLnByb2dyZXNzLWNpcmN1bGFyX19wcmltYXJ5XCIpLHRoaXMuX3NlY29uZGFyeT1RLmZpbmRDaGlsZCh0aGlzLl90ZW1wbGF0ZSxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fc2Vjb25kYXJ5XCIpLHRoaXMuX3VwZGF0ZURldGVybWluYXRlKCksdGhpcy5fdXBkYXRlVmFsdWUoKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMuX3RlbXBsYXRlKSxOLnByZXBhcmUodGhpcyksQi5pbml0TW9kaWZpZXIodGhpcyxUcil9fSx7a2V5OlwiX2lzQ29tcGlsZWRcIix2YWx1ZTpmdW5jdGlvbigpe2lmKCFRLmZpbmRDaGlsZCh0aGlzLFwiLnByb2dyZXNzLWNpcmN1bGFyXCIpKXJldHVybiExO3ZhciB0PVEuZmluZENoaWxkKHRoaXMsXCIucHJvZ3Jlc3MtY2lyY3VsYXJcIik7cmV0dXJuISFRLmZpbmRDaGlsZCh0LFwiLnByb2dyZXNzLWNpcmN1bGFyX19zZWNvbmRhcnlcIikmJiEhUS5maW5kQ2hpbGQodCxcIi5wcm9ncmVzcy1jaXJjdWxhcl9fcHJpbWFyeVwiKX19LHtrZXk6XCJ2YWx1ZVwiLHNldDpmdW5jdGlvbih0KXsoXCJudW1iZXJcIiE9dHlwZW9mIHR8fHQ8MHx8dD4xMDApJiZRLnRocm93KFwiSW52YWxpZCB2YWx1ZVwiKSx0aGlzLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsTWF0aC5mbG9vcih0KSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBwYXJzZUludCh0aGlzLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfHxcIjBcIil9fSx7a2V5Olwic2Vjb25kYXJ5VmFsdWVcIixzZXQ6ZnVuY3Rpb24odCl7KFwibnVtYmVyXCIhPXR5cGVvZiB0fHx0PDB8fHQ+MTAwKSYmUS50aHJvdyhcIkludmFsaWQgdmFsdWVcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJzZWNvbmRhcnktdmFsdWVcIixNYXRoLmZsb29yKHQpKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwic2Vjb25kYXJ5LXZhbHVlXCIpfHxcIjBcIil9fSx7a2V5OlwiaW5kZXRlcm1pbmF0ZVwiLHNldDpmdW5jdGlvbih0KXt0P3RoaXMuc2V0QXR0cmlidXRlKE1yLFwiXCIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKE1yKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKE1yKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcIm1vZGlmaWVyXCIsXCJ2YWx1ZVwiLFwic2Vjb25kYXJ5LXZhbHVlXCIsTXJdfX1dKSxlfSgpO2MuUHJvZ3Jlc3NDaXJjdWxhcj1EcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtcHJvZ3Jlc3MtY2lyY3VsYXJcIixEcik7dmFyIElyPVwiaW5pdGlhbFwiLE5yPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIFEudGhyb3coJ1wiJyt0KydcIiBtdXN0IGJlICcrZSl9LEJyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fc2hvdWxkRml4U2Nyb2xsPVEuZ2xvYmFscy5pc1VJV2ViVmlldyx0Ll9vbkRyYWc9dC5fb25EcmFnLmJpbmQodCksdC5fb25EcmFnU3RhcnQ9dC5fb25EcmFnU3RhcnQuYmluZCh0KSx0Ll9vbkRyYWdFbmQ9dC5fb25EcmFnRW5kLmJpbmQodCksdC5fb25TY3JvbGw9dC5fb25TY3JvbGwuYmluZCh0KSx0Ll9zZXRTdGF0ZShJciwhMCksdC5faGlkZSgpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX3NldFN0eWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmhlaWdodCtcInB4XCI7ZCh0aGlzLHtoZWlnaHQ6dCxsaW5lSGVpZ2h0OnR9KSxcIlwiPT09dGhpcy5zdHlsZS5kaXNwbGF5JiZ0aGlzLl9zaG93KCl9fSx7a2V5OlwiX29uU2Nyb2xsXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fcGFnZUVsZW1lbnQ7ZS5zY3JvbGxUb3A8MCYmKGUuc2Nyb2xsVG9wPTApfX0se2tleTpcIl9jYW5Db25zdW1lR2VzdHVyZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVyblwidXBcIj09PXQuZGlyZWN0aW9ufHxcImRvd25cIj09PXQuZGlyZWN0aW9ufX0se2tleTpcIl9vbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5nZXN0dXJlJiYhdGhpcy5kaXNhYmxlZCl7dmFyIG49dC5nZXN0dXJlLmNlbnRlci5jbGllbnRZK3RoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcCxpPXdpbmRvdy5pbm5lckhlaWdodCxvPXRoaXMuX3Nob3VsZEZpeFNjcm9sbD8uODoxO2lmKHRoaXMuX2lnbm9yZURyYWc9dC5jb25zdW1lZHx8bj5pKm8sIXRoaXMuX2lnbm9yZURyYWcpe3ZhciByPXQuY29uc3VtZTt0LmNvbnN1bWU9ZnVuY3Rpb24oKXtyJiZyKCksZS5faWdub3JlRHJhZz0hMCxlLl9oaWRlKCl9LHRoaXMuX2NhbkNvbnN1bWVHZXN0dXJlKHQuZ2VzdHVyZSkmJihyJiZyKCksdC5jb25zdW1lZD0hMCx0aGlzLl9zaG93KCkpfXRoaXMuX3N0YXJ0U2Nyb2xsPXRoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcH19fSx7a2V5OlwiX29uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7aWYodC5nZXN0dXJlJiYhdGhpcy5kaXNhYmxlZCYmIXRoaXMuX2lnbm9yZURyYWcmJnRoaXMuX2NhbkNvbnN1bWVHZXN0dXJlKHQuZ2VzdHVyZSkpe1wibm9uZVwiPT09dGhpcy5zdHlsZS5kaXNwbGF5JiZ0aGlzLl9zaG93KCksdC5zdG9wUHJvcGFnYXRpb24oKTt2YXIgbj10Lmdlc3R1cmUuY2VudGVyLmNsaWVudFkrdGhpcy5fcGFnZUVsZW1lbnQuc2Nyb2xsVG9wLGk9d2luZG93LmlubmVySGVpZ2h0O3RoaXMuX3Nob3VsZEZpeFNjcm9sbCYmKHRoaXMuX3BhZ2VFbGVtZW50LnNjcm9sbFRvcD10aGlzLl9zdGFydFNjcm9sbC10Lmdlc3R1cmUuZGVsdGFZLChcInVwXCIhPT10Lmdlc3R1cmUuaW50ZXJpbURpcmVjdGlvbnx8bjw9LjUqaSkmJnQuZ2VzdHVyZS5wcmV2ZW50RGVmYXVsdCgpKTt2YXIgbz1NYXRoLm1heCh0Lmdlc3R1cmUuZGVsdGFZLXRoaXMuX3N0YXJ0U2Nyb2xsLDApO2lmKG8hPT10aGlzLl9jdXJyZW50VHJhbnNsYXRpb24pe3ZhciByPXRoaXMudGhyZXNob2xkSGVpZ2h0O3I+MCYmbz49cj8odC5nZXN0dXJlLnN0b3BEZXRlY3QoKSxzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gZS5fZmluaXNoKCl9KSk6bz49dGhpcy5oZWlnaHQ/dGhpcy5fc2V0U3RhdGUoXCJwcmVhY3Rpb25cIik6dGhpcy5fc2V0U3RhdGUoSXIpLHRoaXMuX3RyYW5zbGF0ZVRvKG8pfX19fSx7a2V5OlwiX29uRHJhZ0VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQuZ2VzdHVyZSYmIXRoaXMuZGlzYWJsZWQmJiF0aGlzLl9pZ25vcmVEcmFnJiYodC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9jdXJyZW50VHJhbnNsYXRpb24+MCkpe3RoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbj50aGlzLmhlaWdodD90aGlzLl9maW5pc2goKTp0aGlzLl90cmFuc2xhdGVUbygwLHthbmltYXRlOiEwfSl9fX0se2tleTpcIl9maW5pc2hcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc2V0U3RhdGUoXCJhY3Rpb25cIiksdGhpcy5fdHJhbnNsYXRlVG8odGhpcy5oZWlnaHQse2FuaW1hdGU6ITB9KTsodGhpcy5vbkFjdGlvbnx8ZnVuY3Rpb24odCl7cmV0dXJuIHQoKX0pKGZ1bmN0aW9uKCl7dC5fdHJhbnNsYXRlVG8oMCx7YW5pbWF0ZTohMH0pLHQuX3NldFN0YXRlKElyKX0pfX0se2tleTpcIl9zZXRTdGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5zdGF0ZTt0aGlzLnNldEF0dHJpYnV0ZShcInN0YXRlXCIsdCksZXx8bj09PXRoaXMuc3RhdGV8fFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwiY2hhbmdlc3RhdGVcIix7cHVsbEhvb2s6dGhpcyxzdGF0ZTp0LGxhc3RTdGF0ZTpufSl9fSx7a2V5OlwiX3Nob3dcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dC5zdHlsZS5kaXNwbGF5PVwiXCIsdC5fcGFnZUVsZW1lbnQmJih0Ll9wYWdlRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3A9XCItXCIrdC5oZWlnaHQrXCJweFwiKX0pfX0se2tleTpcIl9oaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5fcGFnZUVsZW1lbnQmJih0aGlzLl9wYWdlRWxlbWVudC5zdHlsZS5tYXJnaW5Ub3A9XCJcIil9fSx7a2V5OlwiX3RyYW5zbGF0ZVRvXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O2lmKDAhPXRoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbnx8MCE9dCl7dGhpcy5fY3VycmVudFRyYW5zbGF0aW9uPXQ7dmFyIG49ZS5hbmltYXRlP3tkdXJhdGlvbjouMyx0aW1pbmc6XCJjdWJpYy1iZXppZXIoLjEsIC43LCAuMSwgMSlcIn06e307dGhpcy5fb25QdWxsJiZ0aGlzLl9vblB1bGwoKHQvdGhpcy5oZWlnaHQpLnRvRml4ZWQoMiksbik7dmFyIGk9dGhpcy5oYXNBdHRyaWJ1dGUoXCJmaXhlZC1jb250ZW50XCIpP3RoaXM6dGhpcy5fcGFnZUVsZW1lbnQ7bnQoaSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDBweCwgXCIrdCtcInB4LCAwcHgpXCJ9LG4pLnBsYXkoZnVuY3Rpb24oKXswPT09dCYmZC5jbGVhcihpLFwidHJhbnNpdGlvbiB0cmFuc2Zvcm1cIiksZS5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmNhbGxiYWNrKCl9KX19fSx7a2V5OlwiX2Rpc2FibGVEcmFnTG9ja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ0xvY2tEaXNhYmxlZD0hMCx0aGlzLl9zZXR1cExpc3RlbmVycyghMCl9fSx7a2V5OlwiX3NldHVwTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWZ1bmN0aW9uKHQpe3JldHVybiBlLl9wYWdlRWxlbWVudFt0K1wiRXZlbnRMaXN0ZW5lclwiXShcInNjcm9sbFwiLGUuX29uU2Nyb2xsLCExKX0saT1mdW5jdGlvbih0KXt2YXIgbj17cGFzc2l2ZTohMH07ZS5fZ2VzdHVyZURldGVjdG9yW3RdKFwiZHJhZ1wiLGUuX29uRHJhZyxuKSxlLl9nZXN0dXJlRGV0ZWN0b3JbdF0oXCJkcmFnc3RhcnRcIixlLl9vbkRyYWdTdGFydCxuKSxlLl9nZXN0dXJlRGV0ZWN0b3JbdF0oXCJkcmFnZW5kXCIsZS5fb25EcmFnRW5kLG4pfTt0aGlzLl9nZXN0dXJlRGV0ZWN0b3ImJihpKFwib2ZmXCIpLHRoaXMuX2dlc3R1cmVEZXRlY3Rvci5kaXNwb3NlKCksdGhpcy5fZ2VzdHVyZURldGVjdG9yPW51bGwpLG4oXCJyZW1vdmVcIiksdCYmKHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcy5fcGFnZUVsZW1lbnQse2RyYWdNaW5EaXN0YW5jZToxLGRyYWdEaXN0YW5jZUNvcnJlY3Rpb246ITEsZHJhZ0xvY2tUb0F4aXM6IXRoaXMuX2RyYWdMb2NrRGlzYWJsZWQscGFzc2l2ZTohdGhpcy5fc2hvdWxkRml4U2Nyb2xsfSksaShcIm9uXCIpLG4oXCJhZGRcIikpfX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jdXJyZW50VHJhbnNsYXRpb249MCx0aGlzLl9wYWdlRWxlbWVudD10aGlzLnBhcmVudE5vZGUsdGhpcy5fc2V0dXBMaXN0ZW5lcnMoITApLHRoaXMuX3NldFN0eWxlKCl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2hpZGUoKSx0aGlzLl9zZXR1cExpc3RlbmVycyghMSl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe1wiaGVpZ2h0XCI9PT10JiZ0aGlzLl9wYWdlRWxlbWVudCYmdGhpcy5fc2V0U3R5bGUoKX19LHtrZXk6XCJvbkFjdGlvblwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkFjdGlvbn0sc2V0OmZ1bmN0aW9uKHQpeyF0fHx0IGluc3RhbmNlb2YgRnVuY3Rpb258fE5yKFwib25BY3Rpb25cIixcImZ1bmN0aW9uIG9yIG51bGxcIiksdGhpcy5fb25BY3Rpb249dH19LHtrZXk6XCJvblB1bGxcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25QdWxsfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8TnIoXCJvblB1bGxcIixcImZ1bmN0aW9uIG9yIG51bGxcIiksdGhpcy5fb25QdWxsPXR9fSx7a2V5OlwiaGVpZ2h0XCIsc2V0OmZ1bmN0aW9uKHQpe1EuaXNJbnRlZ2VyKHQpfHxOcihcImhlaWdodFwiLFwiaW50ZWdlclwiKSx0aGlzLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLHQrXCJweFwiKX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMuZ2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIpfHxcIjY0XCIsMTApfX0se2tleTpcInRocmVzaG9sZEhlaWdodFwiLHNldDpmdW5jdGlvbih0KXtRLmlzSW50ZWdlcih0KXx8TnIoXCJ0aHJlc2hvbGRIZWlnaHRcIixcImludGVnZXJcIiksdGhpcy5zZXRBdHRyaWJ1dGUoXCJ0aHJlc2hvbGQtaGVpZ2h0XCIsdCtcInB4XCIpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJ0aHJlc2hvbGQtaGVpZ2h0XCIpfHxcIjk2XCIsMTApfX0se2tleTpcInN0YXRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKFwic3RhdGVcIil9fSx7a2V5OlwicHVsbERpc3RhbmNlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRUcmFuc2xhdGlvbn19LHtrZXk6XCJkaXNhYmxlZFwiLHNldDpmdW5jdGlvbih0KXtyZXR1cm4gUS50b2dnbGVBdHRyaWJ1dGUodGhpcyxcImRpc2FibGVkXCIsdCl9LGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiaGVpZ2h0XCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImNoYW5nZXN0YXRlXCJdfX1dKSxlfSgpO2MuUHVsbEhvb2s9QnIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXB1bGwtaG9va1wiLEJyKTt2YXIganI9e1wiXCI6XCJyYW5nZS0tKlwiLFwiLnJhbmdlX19pbnB1dFwiOlwicmFuZ2UtLSpfX2lucHV0XCIsXCIucmFuZ2VfX2ZvY3VzLXJpbmdcIjpcInJhbmdlLS0qX19mb2N1cy1yaW5nXCJ9LEhyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fb25Nb3VzZURvd249dC5fb25Nb3VzZURvd24uYmluZCh0KSx0Ll9vbk1vdXNlVXA9dC5fb25Nb3VzZVVwLmJpbmQodCksdC5fb25Ub3VjaFN0YXJ0PXQuX29uVG91Y2hTdGFydC5iaW5kKHQpLHQuX29uVG91Y2hFbmQ9dC5fb25Ub3VjaEVuZC5iaW5kKHQpLHQuX29uSW5wdXQ9dC5fdXBkYXRlLmJpbmQodCksdC5fb25EcmFnc3RhcnQ9dC5fb25EcmFnc3RhcnQuYmluZCh0KSx0Ll9vbkRyYWdlbmQ9dC5fb25EcmFnZW5kLmJpbmQodCksdH1yZXR1cm4gYihlLE5vKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJfY29tcGlsZVwiLHRoaXMpLmNhbGwodGhpcyksdGhpcy5fdXBkYXRlRGlzYWJsZWQodGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl9fSx7a2V5OlwiX3VwZGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faW5wdXQsZT10aGlzLl9mb2N1c1Jpbmc7dC5zdHlsZS5iYWNrZ3JvdW5kU2l6ZT0xMDAqdGhpcy5fcmF0aW8rXCIlIDJweFwiLGUudmFsdWU9dGhpcy52YWx1ZSxcIlwiPT09dC5taW4mJlwiMFwiPT09dC52YWx1ZXx8dC5taW49PT10LnZhbHVlP3Quc2V0QXR0cmlidXRlKFwiX3plcm9cIixcIlwiKTp0LnJlbW92ZUF0dHJpYnV0ZShcIl96ZXJvXCIpLFtcIm1pblwiLFwibWF4XCJdLmZvckVhY2goZnVuY3Rpb24obil7cmV0dXJuIGVbbl09dFtuXX0pfX0se2tleTpcIl9vbk1vdXNlRG93blwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5faW5wdXQuY2xhc3NMaXN0LmFkZChcInJhbmdlX19pbnB1dC0tYWN0aXZlXCIpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9pbnB1dC5mb2N1cygpfSl9fSx7a2V5OlwiX29uVG91Y2hTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX29uTW91c2VEb3duKCl9fSx7a2V5OlwiX29uTW91c2VVcFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJyYW5nZV9faW5wdXQtLWFjdGl2ZVwiKX19LHtrZXk6XCJfb25Ub3VjaEVuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX29uTW91c2VVcCh0KX19LHtrZXk6XCJfb25EcmFnc3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0LmNvbnN1bWVkPSEwLHQuZ2VzdHVyZS5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl9pbnB1dC5jbGFzc0xpc3QuYWRkKFwicmFuZ2VfX2lucHV0LS1hY3RpdmVcIiksdGhpcy5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ1wiLHRoaXMuX29uRHJhZyl9fSx7a2V5OlwiX29uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9fSx7a2V5OlwiX29uRHJhZ2VuZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX2lucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJyYW5nZV9faW5wdXQtLWFjdGl2ZVwiKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsdGhpcy5fb25EcmFnKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LG4saSl7XCJkaXNhYmxlZFwiPT09dCYmdGhpcy5fdXBkYXRlRGlzYWJsZWQoaSksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix0aGlzKS5jYWxsKHRoaXMsdCxuLGkpfX0se2tleTpcIl91cGRhdGVEaXNhYmxlZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3Q/dGhpcy5jbGFzc0xpc3QuYWRkKFwicmFuZ2UtLWRpc2FibGVkXCIpOnRoaXMuY2xhc3NMaXN0LnJlbW92ZShcInJhbmdlLS1kaXNhYmxlZFwiKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2V0dXBMaXN0ZW5lcnMoITApfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9zZXR1cExpc3RlbmVycyghMSl9fSx7a2V5OlwiX3NldHVwTGlzdGVuZXJzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9KHQ/XCJhZGRcIjpcInJlbW92ZVwiKStcIkV2ZW50TGlzdGVuZXJcIjtRW2VdKHRoaXMsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaFN0YXJ0LHtwYXNzaXZlOiEwfSksdGhpc1tlXShcIm1vdXNlZG93blwiLHRoaXMuX29uTW91c2VEb3duKSx0aGlzW2VdKFwibW91c2V1cFwiLHRoaXMuX29uTW91c2VVcCksdGhpc1tlXShcInRvdWNoZW5kXCIsdGhpcy5fb25Ub3VjaEVuZCksdGhpc1tlXShcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ3N0YXJ0KSx0aGlzW2VdKFwiZHJhZ2VuZFwiLHRoaXMuX29uRHJhZ2VuZCksdGhpc1tlXShcImlucHV0XCIsdGhpcy5fb25JbnB1dCl9fSx7a2V5OlwiX3NjaGVtZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiBqcn19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4nXFxuICAgICAgPGlucHV0IHR5cGU9XCInK3RoaXMudHlwZSsnXCIgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faW5wdXRcIj5cXG4gICAgICA8aW5wdXQgdHlwZT1cInJhbmdlXCIgY2xhc3M9XCJyYW5nZV9fZm9jdXMtcmluZ1wiIHRhYkluZGV4PVwiLTFcIj5cXG4gICAgJ319LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwicmFuZ2VcIn19LHtrZXk6XCJ0eXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyYW5nZVwifX0se2tleTpcIl9mb2N1c1JpbmdcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblsxXX19LHtrZXk6XCJfcmF0aW9cIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD1cIlwiPT09dGhpcy5faW5wdXQubWluPzA6cGFyc2VJbnQodGhpcy5faW5wdXQubWluKSxlPVwiXCI9PT10aGlzLl9pbnB1dC5tYXg/MTAwOnBhcnNlSW50KHRoaXMuX2lucHV0Lm1heCk7cmV0dXJuKHRoaXMudmFsdWUtdCkvKGUtdCl9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJkaXNhYmxlZFwiXS5jb25jYXQodyhOby5vYnNlcnZlZEF0dHJpYnV0ZXMpKX19XSksZX0oKTtjLlJhbmdlPUhyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yYW5nZVwiLEhyKTt2YXIgUnI9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7cCh0aGlzLHQpLHRoaXMuX3F1ZXVlPVtdLHRoaXMuX2luZGV4PTB9cmV0dXJuIGcodCxbe2tleTpcImFuaW1hdGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg+MiYmdm9pZCAwIT09YXJndW1lbnRzWzJdP2FyZ3VtZW50c1syXToyMDAsaT0obmV3IERhdGUpLmdldFRpbWUoKSxvPXt9LHI9ITEsYT0hMSxzPSExLGw9T2JqZWN0LmtleXMoZSksdT17c3RvcDpmdW5jdGlvbigpe3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtzJiZjbGVhclRpbWVvdXQocyk7dmFyIGg9TWF0aC5taW4oMSwoKG5ldyBEYXRlKS5nZXRUaW1lKCktaSkvbik7cmV0dXJuIGwuZm9yRWFjaChmdW5jdGlvbihuKXt0LnN0eWxlW25dPSgxLWgpKm9bbl0raCplW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSx0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj1cIjBzXCIsYy5zdG9wTmV4dD9hPSExOnJ8fChyPSEwLGEmJmEoKSksdX0sdGhlbjpmdW5jdGlvbih0KXtyZXR1cm4gYT10LHImJmEmJmEoKSx1fSxzcGVlZDpmdW5jdGlvbihhKXtpZihQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQmJihhPTApLCFyKXtzJiZjbGVhclRpbWVvdXQocyk7dmFyIGM9KChuZXcgRGF0ZSkuZ2V0VGltZSgpLWkpL24saD1hKigxLWMpO2wuZm9yRWFjaChmdW5jdGlvbihuKXt0LnN0eWxlW25dPSgxLWMpKm9bbl0rYyplW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSxmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHQpO2wuZm9yRWFjaChlLmdldFByb3BlcnR5VmFsdWUuYmluZChlKSksZT10Lm9mZnNldEhlaWdodH0oKSxpPXQuc3BlZWRVcFRpbWUsbj1oLHQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uPW4vMWUzK1wic1wiLGwuZm9yRWFjaChmdW5jdGlvbihuKXt0LnN0eWxlW25dPWVbbl0rKFwib3BhY2l0eVwiPT1uP1wiXCI6XCJweFwiKX0pLHM9c2V0VGltZW91dCh1LnN0b3AsaCl9cmV0dXJuIHV9LGZpbmlzaDpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTo1MCxlPSgobmV3IERhdGUpLmdldFRpbWUoKS1pKS9uO3JldHVybiB1LnNwZWVkKHQvKDEtZSkpLHV9fTtpZih0Lmhhc0F0dHJpYnV0ZShcImRpc2FibGVkXCIpfHxyfHxQLmNvbmZpZy5hbmltYXRpb25zRGlzYWJsZWQpcmV0dXJuIHU7dmFyIGM9d2luZG93LmdldENvbXB1dGVkU3R5bGUodCk7cmV0dXJuIGwuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgZT1wYXJzZUZsb2F0KGMuZ2V0UHJvcGVydHlWYWx1ZSh0KSk7b1t0XT1pc05hTihlKT8wOmV9KSxyfHwodC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHk9bC5qb2luKFwiLFwiKSx0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbj1uLzFlMytcInNcIixsLmZvckVhY2goZnVuY3Rpb24obil7dC5zdHlsZVtuXT1lW25dKyhcIm9wYWNpdHlcIj09bj9cIlwiOlwicHhcIil9KSkscz1zZXRUaW1lb3V0KHUuc3RvcCxuKSx0aGlzLl9vblN0b3BBbmltYXRpb25zKHQsdS5zdG9wKSx1fX1dKSxnKHQsW3trZXk6XCJfb25TdG9wQW5pbWF0aW9uc1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5fcXVldWUsaT10aGlzLl9pbmRleCsrO25bdF09blt0XXx8W10sblt0XVtpXT1mdW5jdGlvbihvKXtyZXR1cm4gZGVsZXRlIG5bdF1baV0sblt0XSYmMD09blt0XS5sZW5ndGgmJmRlbGV0ZSBuW3RdLGUobyl9fX0se2tleTpcInN0b3BBbmltYXRpb25zXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcyxuPWFyZ3VtZW50cy5sZW5ndGg+MSYmdm9pZCAwIT09YXJndW1lbnRzWzFdP2FyZ3VtZW50c1sxXTp7fTtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiB0LmZvckVhY2goZnVuY3Rpb24odCl7ZS5zdG9wQW5pbWF0aW9ucyh0LG4pfSk7KHRoaXMuX3F1ZXVlW3RdfHxbXSkuZm9yRWFjaChmdW5jdGlvbih0KXt0KG58fHt9KX0pfX0se2tleTpcInN0b3BBbGxcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLnN0b3BBbmltYXRpb25zKE9iamVjdC5rZXlzKHRoaXMuX3F1ZXVlKSx0KX19LHtrZXk6XCJmYWRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjIwMDtyZXR1cm4gdGhpcy5hbmltYXRlKHQse29wYWNpdHk6MH0sZSl9fV0pLHR9KCksRnI9e1wiXCI6XCJyaXBwbGUtLSpcIixcIi5yaXBwbGVfX3dhdmVcIjpcInJpcHBsZS0tKl9fd2F2ZVwiLFwiLnJpcHBsZV9fYmFja2dyb3VuZFwiOlwicmlwcGxlLS0qX19iYWNrZ3JvdW5kXCJ9LHFyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fb25UYXA9dC5fb25UYXAuYmluZCh0KSx0Ll9vbkhvbGQ9dC5fb25Ib2xkLmJpbmQodCksdC5fb25EcmFnU3RhcnQ9dC5fb25EcmFnU3RhcnQuYmluZCh0KSx0Ll9vblJlbGVhc2U9dC5fb25SZWxlYXNlLmJpbmQodCksbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX2FuaW1hdG9yPW5ldyBScixbXCJjb2xvclwiLFwiY2VudGVyXCIsXCJzdGFydC1yYWRpdXNcIixcImJhY2tncm91bmRcIixcIm1vZGlmaWVyXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soZSxudWxsLHQuZ2V0QXR0cmlidXRlKGUpKX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xhc3NMaXN0LmFkZChcInJpcHBsZVwiKSx0aGlzLl93YXZlPXRoaXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZV9fd2F2ZVwiKVswXSx0aGlzLl9iYWNrZ3JvdW5kPXRoaXMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcInJpcHBsZV9fYmFja2dyb3VuZFwiKVswXSx0aGlzLl9iYWNrZ3JvdW5kJiZ0aGlzLl93YXZlfHwodGhpcy5fd2F2ZT1RLmNyZWF0ZShcIi5yaXBwbGVfX3dhdmVcIiksdGhpcy5fYmFja2dyb3VuZD1RLmNyZWF0ZShcIi5yaXBwbGVfX2JhY2tncm91bmRcIiksdGhpcy5hcHBlbmRDaGlsZCh0aGlzLl93YXZlKSx0aGlzLmFwcGVuZENoaWxkKHRoaXMuX2JhY2tncm91bmQpKSxCLmluaXRNb2RpZmllcih0aGlzLEZyKX19LHtrZXk6XCJfZ2V0RWZmZWN0U2l6ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYodGhpcy5oYXNBdHRyaWJ1dGUoXCJzaXplXCIpKXt2YXIgdD10aGlzLmdldEF0dHJpYnV0ZShcInNpemVcIik7aWYoLTEhPT1bXCJjb3ZlclwiLFwiY29udGFpblwiXS5pbmRleE9mKHQpKXJldHVybiB0fXJldHVyblwiY292ZXJcIn19LHtrZXk6XCJfY2FsY3VsYXRlQ29vcmRzXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dm9pZCAwLG49dm9pZCAwLGk9dm9pZCAwLG89dm9pZCAwLHI9dm9pZCAwLGE9dGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxzPXRoaXMuX2dldEVmZmVjdFNpemUoKSxsPWZ1bmN0aW9uKCl7cmV0dXJuIFEudGhyb3coXCJSaXBwbGUgaW52YWxpZCBzdGF0ZVwiKX07cmV0dXJuIHRoaXMuX2NlbnRlcj8oZT1hLndpZHRoLzIsbj1hLmhlaWdodC8yLFwiY292ZXJcIj09PXM/cj1NYXRoLnNxcnQoZSplK24qbik6XCJjb250YWluXCI9PT1zP3I9TWF0aC5taW4oZSxuKTpsKCkpOihlPShcIm51bWJlclwiPT10eXBlb2YgdC5jbGllbnRYP3QuY2xpZW50WDp0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFgpLWEubGVmdCxuPShcIm51bWJlclwiPT10eXBlb2YgdC5jbGllbnRZP3QuY2xpZW50WTp0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFkpLWEudG9wLGk9TWF0aC5tYXgobixhLmhlaWdodC1uKSxvPU1hdGgubWF4KGUsYS53aWR0aC1lKSxcImNvdmVyXCI9PT1zP3I9TWF0aC5zcXJ0KGkqaStvKm8pOlwiY29udGFpblwiPT09cz9yPU1hdGgubWluKE1hdGgucm91bmQoaS8yKSxNYXRoLnJvdW5kKG8vMikpOmwoKSkse3g6ZSx5Om4scjpyfX19LHtrZXk6XCJfcmlwcGxlQW5pbWF0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjMwMCxuPXRoaXMuX2FuaW1hdG9yLGk9dGhpcy5fd2F2ZSxvPXRoaXMuX2JhY2tncm91bmQscj10aGlzLl9taW5SLGE9dGhpcy5fY2FsY3VsYXRlQ29vcmRzKHQpLHM9YS54LGw9YS55LHU9YS5yO3JldHVybiBuLnN0b3BBbGwoe3N0b3BOZXh0OjF9KSxuLmFuaW1hdGUobyx7b3BhY2l0eToxfSxlKSxRLmV4dGVuZChpLnN0eWxlLHtvcGFjaXR5OjEsdG9wOmwtcitcInB4XCIsbGVmdDpzLXIrXCJweFwiLHdpZHRoOjIqcitcInB4XCIsaGVpZ2h0OjIqcitcInB4XCJ9KSxuLmFuaW1hdGUoaSx7dG9wOmwtdSxsZWZ0OnMtdSxoZWlnaHQ6Mip1LHdpZHRoOjIqdX0sZSl9fSx7a2V5OlwiX3VwZGF0ZVBhcmVudFwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3BhcmVudFVwZGF0ZWQmJnRoaXMucGFyZW50Tm9kZSl7XCJzdGF0aWNcIj09PXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMucGFyZW50Tm9kZSkuZ2V0UHJvcGVydHlWYWx1ZShcInBvc2l0aW9uXCIpJiYodGhpcy5wYXJlbnROb2RlLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIiksdGhpcy5fcGFyZW50VXBkYXRlZD0hMH19fSx7a2V5OlwiX29uVGFwXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLmRpc2FibGVkfHx0LnJpcHBsZXx8KHQucmlwcGxlPSEwLHRoaXMuX3VwZGF0ZVBhcmVudCgpLHRoaXMuX3JpcHBsZUFuaW1hdGlvbih0Lmdlc3R1cmUuc3JjRXZlbnQpLnRoZW4oZnVuY3Rpb24oKXtlLl9hbmltYXRvci5mYWRlKGUuX3dhdmUpLGUuX2FuaW1hdG9yLmZhZGUoZS5fYmFja2dyb3VuZCl9KSl9fSx7a2V5OlwiX29uSG9sZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzYWJsZWR8fHQucmlwcGxlfHwodC5yaXBwbGU9ITAsdGhpcy5fdXBkYXRlUGFyZW50KCksdGhpcy5faG9sZGluZz10aGlzLl9yaXBwbGVBbmltYXRpb24odC5nZXN0dXJlLnNyY0V2ZW50LDJlMyksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpKX19LHtrZXk6XCJfb25SZWxlYXNlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0aGlzLl9ob2xkaW5nJiYhdC5yaXBwbGUmJih0LnJpcHBsZT0hMCx0aGlzLl9ob2xkaW5nLnNwZWVkKDMwMCkudGhlbihmdW5jdGlvbigpe2UuX2FuaW1hdG9yLnN0b3BBbGwoe3N0b3BOZXh0OiEwfSksZS5fYW5pbWF0b3IuZmFkZShlLl93YXZlKSxlLl9hbmltYXRvci5mYWRlKGUuX2JhY2tncm91bmQpfSksdGhpcy5faG9sZGluZz0hMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpfX0se2tleTpcIl9vbkRyYWdTdGFydFwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX2hvbGRpbmcpcmV0dXJuIHRoaXMuX29uUmVsZWFzZSh0KTstMSE9W1wibGVmdFwiLFwicmlnaHRcIl0uaW5kZXhPZih0Lmdlc3R1cmUuZGlyZWN0aW9uKSYmdGhpcy5fb25UYXAodCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3BhcmVudE5vZGU9dGhpcy5wYXJlbnROb2RlLFAuY29uZmlnLmFuaW1hdGlvbnNEaXNhYmxlZD90aGlzLmRpc2FibGVkPSEwOih0aGlzLl9wYXJlbnROb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLl9vblRhcCksdGhpcy5fcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiaG9sZFwiLHRoaXMuX29uSG9sZCksdGhpcy5fcGFyZW50Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcGFyZW50Tm9kZXx8dGhpcy5wYXJlbnROb2RlO3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRhcFwiLHRoaXMuX29uVGFwKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJob2xkXCIsdGhpcy5fb25Ib2xkKSx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIix0aGlzLl9vbkRyYWdTdGFydCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInJpcHBsZVwiLEZyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxpLHRoaXMsRnIpO2JyZWFrO2Nhc2VcInN0YXJ0LXJhZGl1c1wiOnRoaXMuX21pblI9TWF0aC5tYXgoMCxwYXJzZUZsb2F0KGkpfHwwKTticmVhaztjYXNlXCJjb2xvclwiOmkmJm4odGhpcyxmdW5jdGlvbigpe28uX3dhdmUuc3R5bGUuYmFja2dyb3VuZD1pLG8uaGFzQXR0cmlidXRlKFwiYmFja2dyb3VuZFwiKXx8KG8uX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZD1pKX0pO2JyZWFrO2Nhc2VcImJhY2tncm91bmRcIjooaXx8ZSkmJihcIm5vbmVcIj09PWk/bih0aGlzLGZ1bmN0aW9uKCl7by5fYmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLFwiZGlzYWJsZWRcIiksby5fYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kPVwidHJhbnNwYXJlbnRcIn0pOm4odGhpcyxmdW5jdGlvbigpe28uX2JhY2tncm91bmQuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIikmJm8uX2JhY2tncm91bmQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiksby5fYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kPWl9KSk7YnJlYWs7Y2FzZVwiY2VudGVyXCI6XCJjZW50ZXJcIj09PXQmJih0aGlzLl9jZW50ZXI9bnVsbCE9aSYmXCJmYWxzZVwiIT1pKX19fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcInN0YXJ0LXJhZGl1c1wiLFwiY29sb3JcIixcImJhY2tncm91bmRcIixcImNlbnRlclwiLFwiY2xhc3NcIixcIm1vZGlmaWVyXCJdfX1dKSxlfSgpO2MuUmlwcGxlPXFyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yaXBwbGVcIixxcik7dmFyIHpyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLFBpKSxlfSgpO2MuUm93PXpyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1yb3dcIix6cik7dmFyIFZyPXtcIlwiOlwic2VnbWVudC0tKlwiLFwiLnNlZ21lbnRfX2l0ZW1cIjpcInNlZ21lbnQtLSpfX2l0ZW1cIixcIi5zZWdtZW50X19pbnB1dFwiOlwic2VnbWVudC0tKl9faW5wdXRcIixcIi5zZWdtZW50X19idXR0b25cIjpcInNlZ21lbnQtLSpfX2J1dHRvblwifSxXcj1mdW5jdGlvbigpe3ZhciB0PTA7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuXCJvbnMtc2VnbWVudC1nZW4tXCIrdCsrfX0oKSxVcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3NlZ21lbnRJZD1XcigpLHQuX3RhYmJhcj1udWxsLHQuX29uQ2hhbmdlPXQuX29uQ2hhbmdlLmJpbmQodCksdC5fb25UYWJiYXJQcmVDaGFuZ2U9dC5fb25UYWJiYXJQcmVDaGFuZ2UuYmluZCh0KSxuKHQsZnVuY3Rpb24oKXt0Ll9jb21waWxlKCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2xhc3RBY3RpdmVJbmRleD10Ll90YWJiYXI/dC5fdGFiYmFyLmdldEFjdGl2ZVRhYkluZGV4KCk6dC5nZXRBY3RpdmVCdXR0b25JbmRleCgpfSl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5jbGFzc0xpc3QuYWRkKFwic2VnbWVudFwiKTtmb3IodmFyIHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGgtMTt0Pj0wO3QtLSl7dmFyIGU9dGhpcy5jaGlsZHJlblt0XTtlLmNsYXNzTGlzdC5hZGQoXCJzZWdtZW50X19pdGVtXCIpO3ZhciBuPVEuZmluZENoaWxkKGUsXCIuc2VnbWVudF9faW5wdXRcIil8fFEuY3JlYXRlKFwiaW5wdXQuc2VnbWVudF9faW5wdXRcIik7bi50eXBlPVwicmFkaW9cIixuLnZhbHVlPXQsbi5uYW1lPW4ubmFtZXx8dGhpcy5fc2VnbWVudElkLG4uY2hlY2tlZD0hdGhpcy5oYXNBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikmJnQ9PT0ocGFyc2VJbnQodGhpcy5nZXRBdHRyaWJ1dGUoXCJhY3RpdmUtaW5kZXhcIikpfHwwKTt2YXIgaT1RLmZpbmRDaGlsZChlLFwiLnNlZ21lbnRfX2J1dHRvblwiKXx8US5jcmVhdGUoXCIuc2VnbWVudF9fYnV0dG9uXCIpO2lmKGkucGFyZW50RWxlbWVudCE9PWUpZm9yKDtlLmZpcnN0Q2hpbGQ7KWkuYXBwZW5kQ2hpbGQoZS5maXJzdENoaWxkKTtlLmFwcGVuZENoaWxkKG4pLGUuYXBwZW5kQ2hpbGQoaSl9Qi5pbml0TW9kaWZpZXIodGhpcyxWcil9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5oYXNBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikmJm4odGhpcyxmdW5jdGlvbigpe3ZhciBlPVEuZmluZFBhcmVudCh0LFwib25zLXBhZ2VcIik7dC5fdGFiYmFyPWUmJmUucXVlcnlTZWxlY3RvcihcIiNcIit0LmdldEF0dHJpYnV0ZShcInRhYmJhci1pZFwiKSksdC5fdGFiYmFyJiZcIk9OUy1UQUJCQVJcIj09PXQuX3RhYmJhci50YWdOYW1lfHxRLnRocm93KFwiTm8gdGFiYmFyIHdpdGggaWQgXCIrdC5nZXRBdHRyaWJ1dGUoXCJ0YWJiYXItaWRcIikrXCIgd2FzIGZvdW5kLlwiKSx0Ll90YWJiYXIuc2V0QXR0cmlidXRlKFwiaGlkZS10YWJzXCIsXCJcIiksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3NldENoZWNrZWQodC5fdGFiYmFyLmdldEFjdGl2ZVRhYkluZGV4KCkpfSksdC5fdGFiYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJwcmVjaGFuZ2VcIix0Ll9vblRhYmJhclByZUNoYW5nZSl9KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLl9vbkNoYW5nZSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5fdGFiYmFyJiYodC5fdGFiYmFyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwcmVjaGFuZ2VcIix0Ll9vblRhYmJhclByZUNoYW5nZSksdC5fdGFiYmFyPW51bGwpfSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5fb25DaGFuZ2UpfX0se2tleTpcIl9zZXRDaGVja2VkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5jaGlsZHJlblt0XS5maXJzdEVsZW1lbnRDaGlsZC5jaGVja2VkPSEwfX0se2tleTpcInNldEFjdGl2ZUJ1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3RhYmJhcj90aGlzLl90YWJiYXIuc2V0QWN0aXZlVGFiKHQsZSk6KHRoaXMuX3NldENoZWNrZWQodCksdGhpcy5fcG9zdENoYW5nZSh0KSxQcm9taXNlLnJlc29sdmUodCkpfX0se2tleTpcImdldEFjdGl2ZUJ1dHRvbkluZGV4XCIsdmFsdWU6ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5jaGlsZHJlbi5sZW5ndGgtMTt0Pj0wO3QtLSlpZih0aGlzLmNoaWxkcmVuW3RdLmZpcnN0RWxlbWVudENoaWxkLmNoZWNrZWQpcmV0dXJuIHQ7cmV0dXJuLTF9fSx7a2V5OlwiX29uQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dC5zdG9wUHJvcGFnYXRpb24oKSx0aGlzLl90YWJiYXI/dGhpcy5fdGFiYmFyLnNldEFjdGl2ZVRhYih0aGlzLmdldEFjdGl2ZUJ1dHRvbkluZGV4KCkse3JlamVjdDohMX0pOnRoaXMuX3Bvc3RDaGFuZ2UodGhpcy5nZXRBY3RpdmVCdXR0b25JbmRleCgpKX19LHtrZXk6XCJfb25UYWJiYXJQcmVDaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO3NldEltbWVkaWF0ZShmdW5jdGlvbigpe3QuZGV0YWlsLmNhbmNlbGVkfHwoZS5fc2V0Q2hlY2tlZCh0LmluZGV4KSxlLl9wb3N0Q2hhbmdlKHQuaW5kZXgpKX0pfX0se2tleTpcIl9wb3N0Q2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7US50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwb3N0Y2hhbmdlXCIse2luZGV4OnQsYWN0aXZlSW5kZXg6dCxsYXN0QWN0aXZlSW5kZXg6dGhpcy5fbGFzdEFjdGl2ZUluZGV4LHNlZ21lbnRJdGVtOnRoaXMuY2hpbGRyZW5bdF19KSx0aGlzLl9sYXN0QWN0aXZlSW5kZXg9dH19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInNlZ21lbnRcIixWcik7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLFZyKX19fSx7a2V5OlwiZGlzYWJsZWRcIixzZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIFEudG9nZ2xlQXR0cmlidXRlKHRoaXMsXCJkaXNhYmxlZFwiLHQpfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImNsYXNzXCIsXCJtb2RpZmllclwiXX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwb3N0Y2hhbmdlXCJdfX1dKSxlfSgpO2MuU2VnbWVudD1VcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc2VnbWVudFwiLFVyKTt2YXIgWHI9e1wiXCI6XCJzZWxlY3QtKiBzZWxlY3QtLSpcIixcIi5zZWxlY3QtaW5wdXRcIjpcInNlbGVjdC1pbnB1dC0tKlwifSxZcj1bXCJhdXRvZm9jdXNcIixcImRpc2FibGVkXCIsXCJmb3JtXCIsXCJtdWx0aXBsZVwiLFwibmFtZVwiLFwicmVxdWlyZWRcIixcInNpemVcIl0sR3I9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiBuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdC5fZGVyaXZlR2V0dGVycygpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLGkpe3ZhciBvPXRoaXM7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcInNlbGVjdFwiLFhyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxpLHRoaXMsWHIpfVlyLmluZGV4T2YodCk+PTAmJm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVCb3VuZEF0dHJpYnV0ZXMoKX0pfX0se2tleTpcIl91cGRhdGVCb3VuZEF0dHJpYnV0ZXNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7WXIuZm9yRWFjaChmdW5jdGlvbihlKXt0Lmhhc0F0dHJpYnV0ZShlKT90Ll9zZWxlY3Quc2V0QXR0cmlidXRlKGUsdC5nZXRBdHRyaWJ1dGUoZSkpOnQuX3NlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoZSl9KX19LHtrZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7Ti5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcInNlbGVjdFwiKTt2YXIgdD10aGlzLl9zZWxlY3R8fGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7IXQuaWQmJnRoaXMuaGFzQXR0cmlidXRlKFwic2VsZWN0LWlkXCIpJiYodC5pZD10aGlzLmdldEF0dHJpYnV0ZShcInNlbGVjdC1pZFwiKSksdC5jbGFzc0xpc3QuYWRkKFwic2VsZWN0LWlucHV0XCIpLHRoaXMuX3NlbGVjdHx8KFEuYXJyYXlGcm9tKHRoaXMuY2hpbGROb2RlcykuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBlbmRDaGlsZChlKX0pLHRoaXMuYXBwZW5kQ2hpbGQodCkpLEIuaW5pdE1vZGlmaWVyKHRoaXMsWHIpfX0se2tleTpcIl9kZXJpdmVHZXR0ZXJzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO1tcImRpc2FibGVkXCIsXCJsZW5ndGhcIixcIm11bHRpcGxlXCIsXCJuYW1lXCIsXCJvcHRpb25zXCIsXCJzZWxlY3RlZEluZGV4XCIsXCJzaXplXCIsXCJ2YWx1ZVwiLFwiZm9ybVwiLFwidHlwZVwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUse2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpmdW5jdGlvbigpe3JldHVybiB0Ll9zZWxlY3RbZV19LHNldDotMT09PVtcImZvcm1cIixcInR5cGVcIl0uaW5kZXhPZihlKT9mdW5jdGlvbihpKXtyZXR1cm4gbih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3NlbGVjdFtlXT1pfSl9OnZvaWQgMH0pfSl9fSx7a2V5OlwiYWRkXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOm51bGw7dGhpcy5fc2VsZWN0LmFkZCh0LGUpfX0se2tleTpcInJlbW92ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NlbGVjdC5yZW1vdmUodCl9fSx7a2V5OlwiX3NlbGVjdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3IoXCJzZWxlY3RcIil9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJtb2RpZmllclwiLFwiY2xhc3NcIl0uY29uY2F0KFlyKX19XSksZX0oKTtjLlNlbGVjdD1HcixjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtc2VsZWN0XCIsR3IpO3ZhciAkcj17XCJcIjpcImZhYi0tKiBzcGVlZC1kaWFsX19pdGVtLS0qXCJ9LEtyPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fY29tcGlsZSgpLHQuX2JvdW5kT25DbGljaz10Ll9vbkNsaWNrLmJpbmQodCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7c3dpdGNoKHQpe2Nhc2VcImNsYXNzXCI6US5yZXN0b3JlQ2xhc3ModGhpcyxcImZhYiBmYWItLW1pbmkgc3BlZWQtZGlhbF9faXRlbVwiLCRyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxuLHRoaXMsJHIpLFEuYWRkTW9kaWZpZXIodGhpcyxcIm1pbmlcIik7YnJlYWs7Y2FzZVwicmlwcGxlXCI6dGhpcy5fdXBkYXRlUmlwcGxlKCl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrLCExKX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnVwZGF0ZVJpcHBsZSh0aGlzKX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCl9fSx7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7Ti5wcmVwYXJlKHRoaXMpLFwiZmFiIGZhYi0tbWluaSBzcGVlZC1kaWFsX19pdGVtXCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmNsYXNzTGlzdC5hZGQoZSl9KSxRLmFkZE1vZGlmaWVyKHRoaXMsXCJtaW5pXCIpLHRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsJHIpfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInJpcHBsZVwiLFwiY2xhc3NcIl19fV0pLGV9KCk7Yy5TcGVlZERpYWxJdGVtPUtyLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGVlZC1kaWFsLWl0ZW1cIixLcik7dmFyIFFyPXtcIlwiOlwic3BlZWQtZGlhbC0tKlwifSxKcj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuX2NvbXBpbGUoKX0pLHQuX2l0ZW1TaG93bj0hMSx0Ll9ib3VuZE9uQ2xpY2s9dC5fb25DbGljay5iaW5kKHQpLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiX2NvbXBpbGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuY2xhc3NMaXN0LmFkZChcInNwZWVkLWRpYWxcIiksTi5wcmVwYXJlKHRoaXMpLHRoaXMuX3VwZGF0ZVJpcHBsZSgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsUXIpLHRoaXMuaGFzQXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpP3RoaXMuX3VwZGF0ZURpcmVjdGlvbih0aGlzLmdldEF0dHJpYnV0ZShcImRpcmVjdGlvblwiKSk6dGhpcy5fdXBkYXRlRGlyZWN0aW9uKFwidXBcIiksdGhpcy5fdXBkYXRlUG9zaXRpb24oKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsaSl7dmFyIG89dGhpcztzd2l0Y2godCl7Y2FzZVwiY2xhc3NcIjpRLnJlc3RvcmVDbGFzcyh0aGlzLFwic3BlZWQtZGlhbFwiLFFyKTticmVhaztjYXNlXCJtb2RpZmllclwiOkIub25Nb2RpZmllckNoYW5nZWQoZSxpLHRoaXMsUXIpO2JyZWFrO2Nhc2VcInJpcHBsZVwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVSaXBwbGUoKX0pO2JyZWFrO2Nhc2VcImRpcmVjdGlvblwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVEaXJlY3Rpb24oaSl9KTticmVhaztjYXNlXCJwb3NpdGlvblwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVQb3NpdGlvbigpfSl9fX0se2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX2JvdW5kT25DbGljaywhMSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fYm91bmRPbkNsaWNrLCExKX19LHtrZXk6XCJfb25DbGlja1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9uQ2xpY2s/KHRoaXMub25DbGljay5hcHBseSh0aGlzKSxQcm9taXNlLnJlc29sdmUoKSk6IXRoaXMuZGlzYWJsZWQmJnRoaXMudmlzaWJsZT90aGlzLnRvZ2dsZUl0ZW1zKCk6dm9pZCAwfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbmxpbmU/UHJvbWlzZS5yZXNvbHZlKCk6dGhpcy5zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3QuaW5saW5lP2UoKTpzZXRJbW1lZGlhdGUoZnVuY3Rpb24oKXtyZXR1cm4gdC5oaWRlKCkudGhlbihlKX0pfSl9fSx7a2V5OlwiX3VwZGF0ZVJpcHBsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fZmFiJiYodGhpcy5oYXNBdHRyaWJ1dGUoXCJyaXBwbGVcIik/dGhpcy5fZmFiLnNldEF0dHJpYnV0ZShcInJpcHBsZVwiLFwiXCIpOnRoaXMuX2ZhYi5yZW1vdmVBdHRyaWJ1dGUoXCJyaXBwbGVcIikpfX0se2tleTpcIl91cGRhdGVEaXJlY3Rpb25cIix2YWx1ZTpmdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5pdGVtcyxuPTA7bjxlLmxlbmd0aDtuKyspZChlW25dLHt0cmFuc2l0aW9uRGVsYXk6MjUqbitcIm1zXCIsYm90dG9tOlwiYXV0b1wiLHJpZ2h0OlwiYXV0b1wiLHRvcDpcImF1dG9cIixsZWZ0OlwiYXV0b1wifSk7c3dpdGNoKHQpe2Nhc2VcInVwXCI6Zm9yKHZhciBpPTA7aTxlLmxlbmd0aDtpKyspZVtpXS5zdHlsZS5ib3R0b209NzIrNTYqaStcInB4XCIsZVtpXS5zdHlsZS5yaWdodD1cIjhweFwiO2JyZWFrO2Nhc2VcImRvd25cIjpmb3IodmFyIG89MDtvPGUubGVuZ3RoO28rKyllW29dLnN0eWxlLnRvcD03Mis1NipvK1wicHhcIixlW29dLnN0eWxlLmxlZnQ9XCI4cHhcIjticmVhaztjYXNlXCJsZWZ0XCI6Zm9yKHZhciByPTA7cjxlLmxlbmd0aDtyKyspZVtyXS5zdHlsZS50b3A9XCI4cHhcIixlW3JdLnN0eWxlLnJpZ2h0PTcyKzU2KnIrXCJweFwiO2JyZWFrO2Nhc2VcInJpZ2h0XCI6Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspZVthXS5zdHlsZS50b3A9XCI4cHhcIixlW2FdLnN0eWxlLmxlZnQ9NzIrNTYqYStcInB4XCI7YnJlYWs7ZGVmYXVsdDpRLnRocm93KFwiQXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdXAsIGRvd24sIGxlZnQgb3IgcmlnaHQuXCIpfX19LHtrZXk6XCJfdXBkYXRlUG9zaXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIik7c3dpdGNoKHRoaXMuY2xhc3NMaXN0LnJlbW92ZShcImZhYi0tdG9wX19sZWZ0XCIsXCJmYWItLWJvdHRvbV9fcmlnaHRcIixcImZhYi0tYm90dG9tX19sZWZ0XCIsXCJmYWItLXRvcF9fcmlnaHRcIixcImZhYi0tdG9wX19jZW50ZXJcIixcImZhYi0tYm90dG9tX19jZW50ZXJcIiksdCl7Y2FzZVwidG9wIHJpZ2h0XCI6Y2FzZVwicmlnaHQgdG9wXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX3JpZ2h0XCIpO2JyZWFrO2Nhc2VcInRvcCBsZWZ0XCI6Y2FzZVwibGVmdCB0b3BcIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLXRvcF9fbGVmdFwiKTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpjYXNlXCJyaWdodCBib3R0b21cIjp0aGlzLmNsYXNzTGlzdC5hZGQoXCJmYWItLWJvdHRvbV9fcmlnaHRcIik7YnJlYWs7Y2FzZVwiYm90dG9tIGxlZnRcIjpjYXNlXCJsZWZ0IGJvdHRvbVwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19sZWZ0XCIpO2JyZWFrO2Nhc2VcImNlbnRlciB0b3BcIjpjYXNlXCJ0b3AgY2VudGVyXCI6dGhpcy5jbGFzc0xpc3QuYWRkKFwiZmFiLS10b3BfX2NlbnRlclwiKTticmVhaztjYXNlXCJjZW50ZXIgYm90dG9tXCI6Y2FzZVwiYm90dG9tIGNlbnRlclwiOnRoaXMuY2xhc3NMaXN0LmFkZChcImZhYi0tYm90dG9tX19jZW50ZXJcIil9fX0se2tleTpcIl9nZXRUcmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybih0aGlzLmdldEF0dHJpYnV0ZShcInBvc2l0aW9uXCIpfHxcIlwiKS5pbmRleE9mKFwiYm90dG9tXCIpPj0wP1widHJhbnNsYXRlM2QoMHB4LCAtXCIrKFEuZ2xvYmFscy5mYWJPZmZzZXR8fDApK1wicHgsIDBweCkgXCI6XCJcIn19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmFiLnNob3coKSxkKHRoaXMse3RyYW5zZm9ybTp0aGlzLl9nZXRUcmFuc2xhdGV9KSxQcm9taXNlLnJlc29sdmUoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLmhpZGVJdGVtcygpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gdC5fZmFiLmhpZGUoKX0pfX0se2tleTpcInNob3dJdGVtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5oYXNBdHRyaWJ1dGUoXCJkaXJlY3Rpb25cIik/dGhpcy5fdXBkYXRlRGlyZWN0aW9uKHRoaXMuZ2V0QXR0cmlidXRlKFwiZGlyZWN0aW9uXCIpKTp0aGlzLl91cGRhdGVEaXJlY3Rpb24oXCJ1cFwiKTt2YXIgdD0wO2lmKCF0aGlzLl9pdGVtU2hvd24pe2Zvcih2YXIgZT10aGlzLml0ZW1zLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9MjUqbjt0Kz1pLGQoZVtuXSx7dHJhbnNmb3JtOlwic2NhbGUoMSlcIix0cmFuc2l0aW9uRGVsYXk6aStcIm1zXCJ9KX10Kz01MCx0aGlzLl9pdGVtU2hvd249ITAsUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJvcGVuXCIpfXZhciBvPVEuZGVmZXIoKTtyZXR1cm4gc2V0VGltZW91dChvLnJlc29sdmUsdCksby5wcm9taXNlfX0se2tleTpcImhpZGVJdGVtc1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9MDtpZih0aGlzLl9pdGVtU2hvd24pe2Zvcih2YXIgZT10aGlzLml0ZW1zLG49MDtuPGUubGVuZ3RoO24rKyl7dmFyIGk9MjUqKGUubGVuZ3RoLW4pO3QrPWksZChlW25dLHt0cmFuc2Zvcm06XCJzY2FsZSgwKVwiLHRyYW5zaXRpb25EZWxheTppK1wibXNcIn0pfXQrPTUwLHRoaXMuX2l0ZW1TaG93bj0hMSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImNsb3NlXCIpfXZhciBvPVEuZGVmZXIoKTtyZXR1cm4gc2V0VGltZW91dChvLnJlc29sdmUsdCksby5wcm9taXNlfX0se2tleTpcImlzT3BlblwiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2l0ZW1TaG93bn19LHtrZXk6XCJ0b2dnbGVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpc2libGU/dGhpcy5oaWRlKCk6dGhpcy5zaG93KCl9fSx7a2V5OlwidG9nZ2xlSXRlbXNcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzT3BlbigpP3RoaXMuaGlkZUl0ZW1zKCk6dGhpcy5zaG93SXRlbXMoKX19LHtrZXk6XCJpdGVtc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbSh0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCJvbnMtc3BlZWQtZGlhbC1pdGVtXCIpKX19LHtrZXk6XCJfZmFiXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJvbnMtZmFiXCIpfX0se2tleTpcImRpc2FibGVkXCIsc2V0OmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0aGlzLmhpZGVJdGVtcygpLFEuYXJyYXlGcm9tKHRoaXMuY2hpbGRyZW4pLmZvckVhY2goZnVuY3Rpb24oZSl7US5tYXRjaChlLFwiLmZhYlwiKSYmUS50b2dnbGVBdHRyaWJ1dGUoZSxcImRpc2FibGVkXCIsdCl9KSxRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiZGlzYWJsZWRcIix0KX0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiZGlzYWJsZWRcIil9fSx7a2V5OlwiaW5saW5lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGFzQXR0cmlidXRlKFwiaW5saW5lXCIpfX0se2tleTpcInZpc2libGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZmFiLnZpc2libGUmJlwibm9uZVwiIT09dGhpcy5zdHlsZS5kaXNwbGF5fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wiY2xhc3NcIixcIm1vZGlmaWVyXCIsXCJyaXBwbGVcIixcImRpcmVjdGlvblwiLFwicG9zaXRpb25cIl19fSx7a2V5OlwiZXZlbnRzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wib3BlblwiLFwiY2xvc2VcIl19fV0pLGV9KCk7Yy5TcGVlZERpYWw9SnIsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNwZWVkLWRpYWxcIixKcik7dmFyIFpyPXtyZWFkeTpmdW5jdGlvbih0LGUpe3NldEltbWVkaWF0ZShlKX19LHRhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fcGFnZT1udWxsLHQuX3BhZ2VMb2FkZXI9anQsbih0LGZ1bmN0aW9uKCl7WnIucmVhZHkodCxmdW5jdGlvbigpe3ZhciBlPXQuX2dldFBhZ2VUYXJnZXQoKTtlJiZ0LmxvYWQoZSl9KX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe1EubWF0Y2godGhpcy5wYXJlbnROb2RlLFwib25zLXNwbGl0dGVyXCIpfHxRLnRocm93KCdcIm9ucy1zcGxpdHRlci1jb250ZW50XCIgbXVzdCBoYXZlIFwib25zLXNwbGl0dGVyXCIgYXMgcGFyZW50Jyl9fSx7a2V5OlwiX2dldFBhZ2VUYXJnZXRcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWdlfHx0aGlzLmdldEF0dHJpYnV0ZShcInBhZ2VcIil9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe319LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RoaXMuX3BhZ2U9dDt2YXIgaT1uLmNhbGxiYWNrfHxmdW5jdGlvbigpe307cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBvPWUuX2NvbnRlbnR8fG51bGw7ZS5fcGFnZUxvYWRlci5sb2FkKHtwYWdlOnQscGFyZW50OmV9LGZ1bmN0aW9uKHQpe28mJihlLl9wYWdlTG9hZGVyLnVubG9hZChvKSxvPW51bGwpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9zaG93KCl9KSxpKHQpLG4odCl9KX0pfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX2NvbnRlbnQuX2hpZGUoKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fcGFnZUxvYWRlci51bmxvYWQodGhpcy5fY29udGVudCksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJwYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlPXR9fSx7a2V5OlwiX2NvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblswXX19LHtrZXk6XCJwYWdlTG9hZGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2VMb2FkZXJ9LHNldDpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQnR8fFEudGhyb3dQYWdlTG9hZGVyKCksdGhpcy5fcGFnZUxvYWRlcj10fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW119fSx7a2V5OlwicmV3cml0YWJsZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gWnJ9fV0pLGV9KCk7Yy5TcGxpdHRlckNvbnRlbnQ9dGEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNwbGl0dGVyLWNvbnRlbnRcIix0YSk7dmFyIGVhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fYm91bmRPbkNsaWNrPXQuX29uQ2xpY2suYmluZCh0KSxuKHQsZnVuY3Rpb24oKXt0LnBhcmVudE5vZGUuX3NpZGVzLmV2ZXJ5KGZ1bmN0aW9uKHQpe3JldHVyblwic3BsaXRcIj09PXQubW9kZX0pJiZ0LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJkaXNwbGF5OiBub25lICFpbXBvcnRhbnRcIil9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5vbkNsaWNrIGluc3RhbmNlb2YgRnVuY3Rpb24/dGhpcy5vbkNsaWNrKCk6US5tYXRjaCh0aGlzLnBhcmVudE5vZGUsXCJvbnMtc3BsaXR0ZXJcIikmJnRoaXMucGFyZW50Tm9kZS5fc2lkZXMuZm9yRWFjaChmdW5jdGlvbih0KXtyZXR1cm4gdC5jbG9zZShcImxlZnRcIikuY2F0Y2goZnVuY3Rpb24oKXt9KX0pLHQuc3RvcFByb3BhZ2F0aW9uKCl9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe319LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2spLFEuaW9zTWFza1Njcm9sbEZpeCh0aGlzLCEwKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9ib3VuZE9uQ2xpY2spLFEuaW9zTWFza1Njcm9sbEZpeCh0aGlzLCExKX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltdfX1dKSxlfSgpO2MuU3BsaXR0ZXJNYXNrPWVhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlci1tYXNrXCIsZWEpO3ZhciBuYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiY3ViaWMtYmV6aWVyKC4xLCAuNywgLjEsIDEpXCI6bixvPXQuZHVyYXRpb24scj12b2lkIDA9PT1vPy4zOm8sYT10LmRlbGF5LHM9dm9pZCAwPT09YT8wOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZHVyYXRpb246cixkZWxheTpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInVwZGF0ZU9wdGlvbnNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTtRLmV4dGVuZCh0aGlzLHt0aW1pbmc6dGhpcy50aW1pbmcsZHVyYXRpb246dGhpcy5kdXJhdGlvbixkZWxheTp0aGlzLmRlbGF5fSx0KX19LHtrZXk6XCJhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT10LnBhcmVudE5vZGU7bihpLGZ1bmN0aW9uKCl7ZS5fc2lkZT10LGUuX29wcG9zaXRlU2lkZT1pLnJpZ2h0IT09dCYmaS5yaWdodHx8aS5sZWZ0IT09dCYmaS5sZWZ0LGUuX2NvbnRlbnQ9aS5jb250ZW50LGUuX21hc2s9aS5tYXNrfSl9fSx7a2V5OlwiZGVhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5jbGVhclRyYW5zaXRpb24oKSx0aGlzLl9tYXNrJiZ0aGlzLmNsZWFyTWFzaygpLHRoaXMuX2NvbnRlbnQ9dGhpcy5fc2lkZT10aGlzLl9vcHBvc2l0ZVNpZGU9dGhpcy5fbWFzaz1udWxsfX0se2tleTpcImNsZWFyVHJhbnNpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztcInNpZGUgbWFzayBjb250ZW50XCIuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiB0W1wiX1wiK2VdJiZkLmNsZWFyKHRbXCJfXCIrZV0sXCJ0cmFuc2Zvcm0gdHJhbnNpdGlvblwiKX0pfX0se2tleTpcImNsZWFyTWFza1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCIhPT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZSYmdGhpcy5fb3Bwb3NpdGVTaWRlLmlzT3Blbnx8KHRoaXMuX21hc2suc3R5bGUub3BhY2l0eT1cIlwiLHRoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9fSx7a2V5OlwidHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7fX0se2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt0KCl9fSx7a2V5OlwiY2xvc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0KCl9fSx7a2V5OlwibWludXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cInJpZ2h0XCI9PT10aGlzLl9zaWRlLnNpZGU/XCItXCI6XCJcIn19XSksZX0oKSxpYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9cmV0dXJuIGIoZSxuYSksZyhlLFt7a2V5OlwidHJhbnNsYXRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5fbWFzay5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixudCh0aGlzLl9zaWRlKS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXMrdCkrXCJweCwgMCwgMClcIn0pLnBsYXkoKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7bnQucnVuQWxsKG50KHRoaXMuX3NpZGUpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK3RoaXMubWludXMrXCIxMDAlLCAwLCAwKVwifSx0aGlzLmRlZikucXVldWUoZnVuY3Rpb24oZSl7ZSgpLHQmJnQoKX0pLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJibG9ja1wifSkucXVldWUoe29wYWNpdHk6XCIxXCJ9LHtkdXJhdGlvbjp0aGlzLmR1cmF0aW9uLHRpbWluZzpcImxpbmVhclwifSkpfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24odCl7bnQucnVuQWxsKG50KHRoaXMuX3NpZGUpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMuZGVmKS5xdWV1ZShmdW5jdGlvbihlKXt0JiZ0KCksZSgpfSksbnQodGhpcy5fbWFzaykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7b3BhY2l0eTpcIjBcIn0se2R1cmF0aW9uOnRoaXMuZHVyYXRpb24sdGltaW5nOlwibGluZWFyXCJ9KS5xdWV1ZSh7ZGlzcGxheTpcIm5vbmVcIn0pKX19XSksZX0oKSxvYT17ZGVmYXVsdDppYSxvdmVybGF5OmlhLHB1c2g6ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfXJldHVybiBiKGUsbmEpLGcoZSxbe2tleTpcIl9nZXRTbGlkaW5nRWxlbWVudHNcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVt0aGlzLl9zaWRlLHRoaXMuX2NvbnRlbnRdO3JldHVybiB0aGlzLl9vcHBvc2l0ZVNpZGUmJlwic3BsaXRcIj09PXRoaXMuX29wcG9zaXRlU2lkZS5tb2RlJiZ0LnB1c2godGhpcy5fb3Bwb3NpdGVTaWRlKSx0fX0se2tleTpcInRyYW5zbGF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NsaWRpbmdFbGVtZW50c3x8KHRoaXMuX3NsaWRpbmdFbGVtZW50cz10aGlzLl9nZXRTbGlkaW5nRWxlbWVudHMoKSksdGhpcy5fbWFzay5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIixudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisodGhpcy5taW51cyt0KStcInB4LCAwLCAwKVwifSkucGxheSgpfX0se2tleTpcIm9wZW5cIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49dGhpcy5fc2lkZS5vZmZzZXRXaWR0aDt0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCksbnQucnVuQWxsKG50KHRoaXMuX3NsaWRpbmdFbGVtZW50cykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXMrbikrXCJweCwgMCwgMClcIn0sdGhpcy5kZWYpLnF1ZXVlKGZ1bmN0aW9uKG4pe2UuX3NsaWRpbmdFbGVtZW50cz1udWxsLG4oKSx0JiZ0KCl9KSxudCh0aGlzLl9tYXNrKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHtkaXNwbGF5OlwiYmxvY2tcIn0pKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBuPXRoaXM7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLG50LnJ1bkFsbChudCh0aGlzLl9zbGlkaW5nRWxlbWVudHMpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCJ9LHRoaXMuZGVmKS5xdWV1ZShmdW5jdGlvbihpKXtuLl9zbGlkaW5nRWxlbWVudHM9bnVsbCx2KGUucHJvdG90eXBlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUucHJvdG90eXBlKSxcImNsZWFyVHJhbnNpdGlvblwiLG4pLmNhbGwobiksdCYmdCgpLGkoKX0pLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJub25lXCJ9KSl9fV0pLGV9KCkscmV2ZWFsOmZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLG5hKSxnKGUsW3trZXk6XCJfZ2V0U2xpZGluZ0VsZW1lbnRzXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1bdGhpcy5fY29udGVudCx0aGlzLl9tYXNrXTtyZXR1cm4gdGhpcy5fb3Bwb3NpdGVTaWRlJiZcInNwbGl0XCI9PT10aGlzLl9vcHBvc2l0ZVNpZGUubW9kZSYmdC5wdXNoKHRoaXMuX29wcG9zaXRlU2lkZSksdH19LHtrZXk6XCJhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3YoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYWN0aXZhdGVcIix0aGlzKS5jYWxsKHRoaXMsdCksXCJjb2xsYXBzZVwiPT09dC5tb2RlJiZ0aGlzLl9zZXRTdHlsZXModCl9fSx7a2V5OlwiZGVhY3RpdmF0ZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc2lkZSYmdGhpcy5fdW5zZXRTdHlsZXModGhpcy5fc2lkZSksdihlLnByb3RvdHlwZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlLnByb3RvdHlwZSksXCJkZWFjdGl2YXRlXCIsdGhpcykuY2FsbCh0aGlzKX19LHtrZXk6XCJfc2V0U3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7ZCh0LHtsZWZ0OlwicmlnaHRcIj09PXQuc2lkZT9cImF1dG9cIjowLHJpZ2h0OlwicmlnaHRcIj09PXQuc2lkZT8wOlwiYXV0b1wiLHpJbmRleDowLGJhY2tncm91bmRDb2xvcjpcImJsYWNrXCIsdHJhbnNmb3JtOnRoaXMuX2dlbmVyYXRlQmVoaW5kUGFnZVN0eWxlKDApLmNvbnRhaW5lci50cmFuc2Zvcm0sZGlzcGxheTpcIm5vbmVcIn0pO3ZhciBlPXQucGFyZW50RWxlbWVudDtuKGUsZnVuY3Rpb24oKXtyZXR1cm4gZS5jb250ZW50JiZkKGUuY29udGVudCx7Ym94U2hhZG93OlwiMCAwIDEycHggMCByZ2JhKDAsIDAsIDAsIDAuMilcIn0pfSl9fSx7a2V5OlwiX3Vuc2V0U3R5bGVzXCIsdmFsdWU6ZnVuY3Rpb24odCl7ZC5jbGVhcih0LFwibGVmdCByaWdodCB6SW5kZXggYmFja2dyb3VuZENvbG9yIGRpc3BsYXlcIiksdC5fY29udGVudCYmKHQuX2NvbnRlbnQuc3R5bGUub3BhY2l0eT1cIlwiKSx0aGlzLl9vcHBvc2l0ZVNpZGUmJlwic3BsaXRcIiE9PXRoaXMuX29wcG9zaXRlU2lkZS5tb2RlfHx0LnBhcmVudEVsZW1lbnQuY29udGVudCYmZC5jbGVhcih0LnBhcmVudEVsZW1lbnQuY29udGVudCxcImJveFNoYWRvd1wiKX19LHtrZXk6XCJfZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGVcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLm1heFdpZHRoLG49KHQtZSkvZSoxMDtyZXR1cm57Y29udGVudDp7b3BhY2l0eToxKyhuPWlzTmFOKG4pPzA6TWF0aC5tYXgoTWF0aC5taW4obiwwKSwtMTApKS8xMDB9LGNvbnRhaW5lcjp7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrKHRoaXMubWludXM/LTE6MSkqbitcIiUsIDAsIDApXCJ9fX19LHtrZXk6XCJ0cmFuc2xhdGVcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9zaWRlLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLl9zaWRlLnN0eWxlLnpJbmRleD0xLHRoaXMubWF4V2lkdGg9dGhpcy5tYXhXaWR0aHx8dGhpcy5fZ2V0TWF4V2lkdGgoKTt2YXIgZT10aGlzLl9nZW5lcmF0ZUJlaGluZFBhZ2VTdHlsZShNYXRoLm1pbih0LHRoaXMubWF4V2lkdGgpKTt0aGlzLl9zbGlkaW5nRWxlbWVudHN8fCh0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCkpLHRoaXMuX21hc2suc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsbnQucnVuQWxsKG50KHRoaXMuX3NsaWRpbmdFbGVtZW50cykucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiKyh0aGlzLm1pbnVzK3QpK1wicHgsIDAsIDApXCJ9KSxudCh0aGlzLl9zaWRlLl9jb250ZW50KS5xdWV1ZShlLmNvbnRlbnQpLG50KHRoaXMuX3NpZGUpLnF1ZXVlKGUuY29udGFpbmVyKSl9fSx7a2V5Olwib3BlblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7dGhpcy5fc2lkZS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fc2lkZS5zdHlsZS56SW5kZXg9MSx0aGlzLm1heFdpZHRoPXRoaXMubWF4V2lkdGh8fHRoaXMuX2dldE1heFdpZHRoKCk7dmFyIG49dGhpcy5fZ2VuZXJhdGVCZWhpbmRQYWdlU3R5bGUodGhpcy5tYXhXaWR0aCk7dGhpcy5fc2xpZGluZ0VsZW1lbnRzPXRoaXMuX2dldFNsaWRpbmdFbGVtZW50cygpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtudC5ydW5BbGwobnQoZS5fc2xpZGluZ0VsZW1lbnRzKS53YWl0KGUuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZChcIisoZS5taW51cytlLm1heFdpZHRoKStcInB4LCAwLCAwKVwifSxlLmRlZiksbnQoZS5fbWFzaykud2FpdChlLmRlbGF5KS5xdWV1ZSh7ZGlzcGxheTpcImJsb2NrXCJ9KSxudChlLl9zaWRlLl9jb250ZW50KS53YWl0KGUuZGVsYXkpLnF1ZXVlKG4uY29udGVudCxlLmRlZiksbnQoZS5fc2lkZSkud2FpdChlLmRlbGF5KS5xdWV1ZShuLmNvbnRhaW5lcixlLmRlZikucXVldWUoZnVuY3Rpb24obil7ZS5fc2xpZGluZ0VsZW1lbnRzPW51bGwsbigpLHQmJnQoKX0pKX0sMWUzLzYwKX19LHtrZXk6XCJjbG9zZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj10aGlzLl9nZW5lcmF0ZUJlaGluZFBhZ2VTdHlsZSgwKTt0aGlzLl9zbGlkaW5nRWxlbWVudHM9dGhpcy5fZ2V0U2xpZGluZ0VsZW1lbnRzKCksbnQucnVuQWxsKG50KHRoaXMuX3NsaWRpbmdFbGVtZW50cykud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZSh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0sdGhpcy5kZWYpLG50KHRoaXMuX21hc2spLndhaXQodGhpcy5kZWxheSkucXVldWUoe2Rpc3BsYXk6XCJub25lXCJ9KSxudCh0aGlzLl9zaWRlLl9jb250ZW50KS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKG4uY29udGVudCx0aGlzLmRlZiksbnQodGhpcy5fc2lkZSkud2FpdCh0aGlzLmRlbGF5KS5xdWV1ZShuLmNvbnRhaW5lcix0aGlzLmRlZikucXVldWUoZnVuY3Rpb24obil7ZS5fc2xpZGluZ0VsZW1lbnRzPW51bGwsZS5fc2lkZS5zdHlsZS56SW5kZXg9MCxlLl9zaWRlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsZS5fc2lkZS5fY29udGVudC5zdHlsZS5vcGFjaXR5PVwiXCIsdCYmdCgpLG4oKX0pKX19LHtrZXk6XCJfZ2V0TWF4V2lkdGhcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zaWRlLm9mZnNldFdpZHRofX1dKSxlfSgpfSxyYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX29uTW9kZUNoYW5nZT10Ll9vbk1vZGVDaGFuZ2UuYmluZCh0KSxuKHQsZnVuY3Rpb24oKXshdC5tYXNrJiZ0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvbnMtc3BsaXR0ZXItbWFza1wiKSksdC5fbGF5b3V0KCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcIl9nZXRTaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsZnVuY3Rpb24oZSl7cmV0dXJuIFEubWF0Y2goZSxcIm9ucy1zcGxpdHRlci1zaWRlXCIpJiZlLmdldEF0dHJpYnV0ZShcInNpZGVcIik9PT10fSl9fSx7a2V5OlwiX29uRGV2aWNlQmFja0J1dHRvblwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuX3NpZGVzLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuISF0LmlzT3BlbiYmdC5jbG9zZSgpfSl8fHQuY2FsbFBhcmVudEhhbmRsZXIoKX19LHtrZXk6XCJfb25Nb2RlQ2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0LnRhcmdldC5wYXJlbnROb2RlJiZuKHRoaXMsZnVuY3Rpb24oKXtlLl9sYXlvdXQoKX0pfX0se2tleTpcIl9sYXlvdXRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5fc2lkZXMuZm9yRWFjaChmdW5jdGlvbihlKXt0LmNvbnRlbnQmJih0LmNvbnRlbnQuc3R5bGVbZS5zaWRlXT1cInNwbGl0XCI9PT1lLm1vZGU/ZS5zdHlsZS53aWR0aDowKX0pfX0se2tleTpcImxlZnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2lkZShcImxlZnRcIil9fSx7a2V5OlwicmlnaHRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZ2V0U2lkZShcInJpZ2h0XCIpfX0se2tleTpcInNpZGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIm9ucy1zcGxpdHRlci1zaWRlXCIpfX0se2tleTpcIl9zaWRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVyblt0aGlzLmxlZnQsdGhpcy5yaWdodF0uZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0fSl9fSx7a2V5OlwiY29udGVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLXNwbGl0dGVyLWNvbnRlbnRcIil9fSx7a2V5OlwidG9wUGFnZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQuX2NvbnRlbnR9fSx7a2V5OlwibWFza1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwib25zLXNwbGl0dGVyLW1hc2tcIil9fSx7a2V5Olwib25EZXZpY2VCYWNrQnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JhY2tCdXR0b25IYW5kbGVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYmFja0J1dHRvbkhhbmRsZXImJnRoaXMuX2JhY2tCdXR0b25IYW5kbGVyLmRlc3Ryb3koKSx0aGlzLl9iYWNrQnV0dG9uSGFuZGxlcj1SLmNyZWF0ZUhhbmRsZXIodGhpcyx0KX19XSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub25EZXZpY2VCYWNrQnV0dG9uPXRoaXMuX29uRGV2aWNlQmFja0J1dHRvbi5iaW5kKHRoaXMpLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vZGVjaGFuZ2VcIix0aGlzLl9vbk1vZGVDaGFuZ2UsITEpfX0se2tleTpcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9iYWNrQnV0dG9uSGFuZGxlci5kZXN0cm95KCksdGhpcy5fYmFja0J1dHRvbkhhbmRsZXI9bnVsbCx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb2RlY2hhbmdlXCIsdGhpcy5fb25Nb2RlQ2hhbmdlLCExKX19LHtrZXk6XCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbih0LGUsbil7fX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnByb3BhZ2F0ZUFjdGlvbih0aGlzLFwiX3Nob3dcIil9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe1EucHJvcGFnYXRlQWN0aW9uKHRoaXMsXCJfaGlkZVwiKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7US5wcm9wYWdhdGVBY3Rpb24odGhpcyxcIl9kZXN0cm95XCIpLHRoaXMucmVtb3ZlKCl9fV0sW3trZXk6XCJyZWdpc3RlckFuaW1hdG9yXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlIGluc3RhbmNlb2YgU3BsaXR0ZXJBbmltYXRvcnx8US50aHJvd0FuaW1hdG9yKFwiU3BsaXR0ZXJcIiksb2FbdF09ZX19LHtrZXk6XCJTcGxpdHRlckFuaW1hdG9yXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFNwbGl0dGVyQW5pbWF0b3J9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG9hfX1dKSxlfSgpO2MuU3BsaXR0ZXI9cmEsY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwib25zLXNwbGl0dGVyXCIscmEpO3ZhciBhYT1cImNsb3NlZFwiLHNhPXtyZWFkeTpmdW5jdGlvbih0LGUpe3NldEltbWVkaWF0ZShlKX19LGxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlLG4pe3AodGhpcyx0KSx0aGlzLl9lbGVtZW50PWUsdGhpcy5fb25DaGFuZ2U9dGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSxuJiZ0aGlzLmNoYW5nZVRhcmdldChuKX1yZXR1cm4gZyh0LFt7a2V5OlwiY2hhbmdlVGFyZ2V0XCIsdmFsdWU6ZnVuY3Rpb24odCl7dGhpcy5kaXNhYmxlKCksdGhpcy5fdGFyZ2V0PXQsdCYmKHRoaXMuX29yaWVudGF0aW9uPS0xIT09W1wicG9ydHJhaXRcIixcImxhbmRzY2FwZVwiXS5pbmRleE9mKHQpLHRoaXMuYWN0aXZhdGUoKSl9fSx7a2V5OlwiX21hdGNoXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX29yaWVudGF0aW9uP3RoaXMuX3RhcmdldD09PSh0LmlzUG9ydHJhaXQ/XCJwb3J0cmFpdFwiOlwibGFuZHNjYXBlXCIpOnQubWF0Y2hlc319LHtrZXk6XCJfb25DaGFuZ2VcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLl9lbGVtZW50Ll91cGRhdGVNb2RlKHRoaXMuX21hdGNoKHQpP1wiY29sbGFwc2VcIjpcInNwbGl0XCIpfX0se2tleTpcImFjdGl2YXRlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9vcmllbnRhdGlvbj8oT3Qub24oXCJjaGFuZ2VcIix0aGlzLl9vbkNoYW5nZSksdGhpcy5fb25DaGFuZ2Uoe2lzUG9ydHJhaXQ6T3QuaXNQb3J0cmFpdCgpfSkpOih0aGlzLl9xdWVyeVJlc3VsdD13aW5kb3cubWF0Y2hNZWRpYSh0aGlzLl90YXJnZXQpLHRoaXMuX3F1ZXJ5UmVzdWx0LmFkZExpc3RlbmVyKHRoaXMuX29uQ2hhbmdlKSx0aGlzLl9vbkNoYW5nZSh0aGlzLl9xdWVyeVJlc3VsdCkpfX0se2tleTpcImRpc2FibGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX29yaWVudGF0aW9uP090Lm9mZihcImNoYW5nZVwiLHRoaXMuX29uQ2hhbmdlKTp0aGlzLl9xdWVyeVJlc3VsdCYmKHRoaXMuX3F1ZXJ5UmVzdWx0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX29uQ2hhbmdlKSx0aGlzLl9xdWVyeVJlc3VsdD1udWxsKX19XSksdH0oKSx1YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIHQuX3BhZ2U9bnVsbCx0Ll9zdGF0ZT1hYSx0Ll9sb2NrPW5ldyBOdCx0Ll9wYWdlTG9hZGVyPWp0LHQuX2NvbGxhcHNlRGV0ZWN0aW9uPW5ldyBsYSh0KSx0Ll9hbmltYXRvckZhY3Rvcnk9bmV3IE8oe2FuaW1hdG9yczpyYS5hbmltYXRvcnMsYmFzZUNsYXNzOm5hLGJhc2VDbGFzc05hbWU6XCJTcGxpdHRlckFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0LmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pLG4odCxmdW5jdGlvbigpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwid2lkdGhcIiksdC5oYXNBdHRyaWJ1dGUoXCJzaWRlXCIpfHx0LnNldEF0dHJpYnV0ZShcInNpZGVcIixcImxlZnRcIiksc2EucmVhZHkodCxmdW5jdGlvbigpe3ZhciBlPXQuX3BhZ2V8fHQuZ2V0QXR0cmlidXRlKFwicGFnZVwiKTtlJiZ0LmxvYWQoZSl9KX0pLHR9cmV0dXJuIGIoZSxQaSksZyhlLFt7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7US5tYXRjaCh0aGlzLnBhcmVudE5vZGUsXCJvbnMtc3BsaXR0ZXJcIil8fFEudGhyb3coXCJQYXJlbnQgbXVzdCBiZSBhbiBvbnMtc3BsaXR0ZXIgZWxlbWVudFwiKSx0aGlzLl9zd2lwZT1uZXcgUW8oe2VsZW1lbnQ6dGhpcyxlbGVtZW50SGFuZGxlcjp0aGlzLnBhcmVudEVsZW1lbnQsc3dpcGVNYXg6ZnVuY3Rpb24oKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKDEsdC5fYW5pbWF0aW9uT3B0KSx0Lm9wZW4oKX0sc3dpcGVNaWQ6ZnVuY3Rpb24oZSxuKXt0Ll9vblN3aXBlJiZ0Ll9vblN3aXBlKGUvbiksdC5fYW5pbWF0b3IudHJhbnNsYXRlKGUpfSxzd2lwZU1pbjpmdW5jdGlvbigpe3QuX29uU3dpcGUmJnQuX29uU3dpcGUoMCx0Ll9hbmltYXRpb25PcHQpLHQuY2xvc2UoKX0sZ2V0VGhyZXNob2xkOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4oMSxwYXJzZUZsb2F0KHQuZ2V0QXR0cmlidXRlKFwib3Blbi10aHJlc2hvbGRcIikpfHwuMykpfSxnZXRTaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHQuc2lkZX0saXNJbml0aWFsU3RhdGU6ZnVuY3Rpb24oKXt2YXIgZT10Ll9zdGF0ZT09PWFhO3JldHVybiB0Ll9zdGF0ZT1cImNoYW5naW5nXCIsZX0saWdub3JlU3dpcGU6ZnVuY3Rpb24oZSxuKXt2YXIgaT10LmlzT3BlbixvPU1hdGgubWF4KDAscGFyc2VJbnQodC5nZXRBdHRyaWJ1dGUoXCJzd2lwZS10YXJnZXQtd2lkdGhcIiksMTApfHwwKTtyZXR1cm5cInNwbGl0XCI9PT10Ll9tb2RlfHx0Ll9sb2NrLmlzTG9ja2VkKCl8fHQuX2lzT3RoZXJTaWRlT3BlbigpfHwhZnVuY3Rpb24oZSl7cmV0dXJuXCJsZWZ0XCI9PT10LnNpZGU/XCJsZWZ0XCI9PT1lJiZpfHxcInJpZ2h0XCI9PT1lJiYhaTpcImxlZnRcIj09PWUmJiFpfHxcInJpZ2h0XCI9PT1lJiZpfShlLmdlc3R1cmUuZGlyZWN0aW9uKXx8IWkmJjAhPT1vJiZuPm99fSksdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXCJzd2lwZWFibGVcIiksbih0aGlzLGZ1bmN0aW9uKCl7dC5jb25zdHJ1Y3Rvci5vYnNlcnZlZEF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihlKXtyZXR1cm4gdC5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soZSxudWxsLHQuZ2V0QXR0cmlidXRlKGUpKX0pfSl9fSx7a2V5OlwiZGlzY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlJiZ0aGlzLl9zd2lwZS5kaXNwb3NlKCksdGhpcy5fYW5pbWF0b3I9dGhpcy5fYW5pbWF0aW9uT3B0PXRoaXMuX3N3aXBlPW51bGx9fSx7a2V5OlwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24odCxlLG4pe3N3aXRjaCh0KXtjYXNlXCJzd2lwZWFibGVcIjp0aGlzLl9zd2lwZSYmdGhpcy5fc3dpcGUudXBkYXRlKCk7YnJlYWs7Y2FzZVwid2lkdGhcIjpuPXRoaXMuZ2V0QXR0cmlidXRlKFwid2lkdGhcIiksdGhpcy5zdHlsZS53aWR0aD0vXlxcZCsocHh8JSkkLy50ZXN0KG4pP246XCI4MCVcIjticmVhaztkZWZhdWx0OnRoaXNbUS5jYW1lbGl6ZShcIl91cGRhdGUtXCIrdCldKG4pfX19LHtrZXk6XCJfZW1pdEV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24odCl7aWYoXCJwcmVcIiE9PXQuc2xpY2UoMCwzKSlyZXR1cm4gUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsdCx7c2lkZTp0aGlzfSk7dmFyIGU9ITE7cmV0dXJuIFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLHQse3NpZGU6dGhpcyxjYW5jZWw6ZnVuY3Rpb24oKXtyZXR1cm4gZT0hMH19KSxlfX0se2tleTpcIl9pc090aGVyU2lkZU9wZW5cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJuISFRLmZpbmRDaGlsZCh0aGlzLnBhcmVudEVsZW1lbnQsZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0LmNvbnN0cnVjdG9yJiZlIT09dCYmXCJjb2xsYXBzZVwiPT09ZS5fbW9kZSYmZS5pc09wZW59KX19LHtrZXk6XCJfdXBkYXRlQ29sbGFwc2VcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldEF0dHJpYnV0ZShcImNvbGxhcHNlXCIpO3JldHVybiBudWxsPT09dHx8XCJzcGxpdFwiPT09dD8odGhpcy5fY29sbGFwc2VEZXRlY3Rpb24uZGlzYWJsZSgpLHRoaXMuX3VwZGF0ZU1vZGUoXCJzcGxpdFwiKSk6XCJcIj09PXR8fFwiY29sbGFwc2VcIj09PXQ/KHRoaXMuX2NvbGxhcHNlRGV0ZWN0aW9uLmRpc2FibGUoKSx0aGlzLl91cGRhdGVNb2RlKFwiY29sbGFwc2VcIikpOnZvaWQgdGhpcy5fY29sbGFwc2VEZXRlY3Rpb24uY2hhbmdlVGFyZ2V0KHQpfX0se2tleTpcIl91cGRhdGVNb2RlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dCE9PXRoaXMuX21vZGUmJih0aGlzLl9tb2RlPXQsdGhpcy5zZXRBdHRyaWJ1dGUoXCJtb2RlXCIsdCksXCJzcGxpdFwiPT09dD8odGhpcy5fYW5pbWF0b3ImJnRoaXMuX2FuaW1hdG9yLmRlYWN0aXZhdGUoKSx0aGlzLl9zdGF0ZT1hYSk6KHRoaXMuX2FuaW1hdG9yJiZ0aGlzLl9hbmltYXRvci5hY3RpdmF0ZSh0aGlzKSxcIm9wZW5cIj09PXRoaXMuX3N0YXRlJiZ0aGlzLl9hbmltYXRvci5vcGVuKCkpLFEudHJpZ2dlckVsZW1lbnRFdmVudCh0aGlzLFwibW9kZWNoYW5nZVwiLHtzaWRlOnRoaXMsbW9kZTp0fSkpfX0se2tleTpcIl91cGRhdGVBbmltYXRpb25cIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKTt0aGlzLnBhcmVudE5vZGUmJih0aGlzLl9hbmltYXRvciYmdGhpcy5fYW5pbWF0b3IuZGVhY3RpdmF0ZSgpLHRoaXMuX2FuaW1hdG9yPXRoaXMuX2FuaW1hdG9yRmFjdG9yeS5uZXdBbmltYXRvcih7YW5pbWF0aW9uOnR9KSx0aGlzLl9hbmltYXRvci5hY3RpdmF0ZSh0aGlzKSx0aGlzLl9hbmltYXRpb25PcHQ9e3RpbWluZzp0aGlzLl9hbmltYXRvci5kdXJhdGlvbixkdXJhdGlvbjp0aGlzLl9hbmltYXRvci5kdXJhdGlvbn0pfX0se2tleTpcIl91cGRhdGVBbmltYXRpb25PcHRpb25zXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy5nZXRBdHRyaWJ1dGUoXCJhbmltYXRpb24tb3B0aW9uc1wiKTt0aGlzLl9hbmltYXRvci51cGRhdGVPcHRpb25zKE8ucGFyc2VBbmltYXRpb25PcHRpb25zU3RyaW5nKHQpKX19LHtrZXk6XCJvcGVuXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9nZ2xlKHQsITApfX0se2tleTpcImNsb3NlXCIsdmFsdWU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMudG9nZ2xlKHQsITEpfX0se2tleTpcInRvZ2dsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPWFyZ3VtZW50c1sxXSxpPVwiYm9vbGVhblwiPT10eXBlb2Ygbj9uOiF0aGlzLmlzT3BlbixvPWk/XCJvcGVuXCI6XCJjbG9zZVwiLHI9aT9cIm9wZW5cIjphYTtpZihcInNwbGl0XCI9PT10aGlzLl9tb2RlKXJldHVybiBQcm9taXNlLnJlc29sdmUoITEpO2lmKHRoaXMuX3N0YXRlPT09cilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMpO2lmKHRoaXMuX2xvY2suaXNMb2NrZWQoKSlyZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJBbm90aGVyIHNwbGl0dGVyLXNpZGUgYWN0aW9uIGlzIGFscmVhZHkgcnVubmluZy5cIik7aWYoaSYmdGhpcy5faXNPdGhlclNpZGVPcGVuKCkpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQW5vdGhlciBtZW51IGlzIGFscmVhZHkgb3Blbi5cIik7aWYodGhpcy5fZW1pdEV2ZW50KFwicHJlXCIrbykpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiQ2FuY2VsZWQgaW4gcHJlXCIrbytcIiBldmVudC5cIik7dmFyIGE9dGhpcy5fbG9jay5sb2NrKCk7cmV0dXJuIHRoaXMuX3N0YXRlPVwiY2hhbmdpbmdcIixuZXcgUHJvbWlzZShmdW5jdGlvbihuKXt0Ll9hbmltYXRvcltvXShmdW5jdGlvbigpe1EuaW9zUGFnZVNjcm9sbEZpeChpKSx0Ll9zdGF0ZT1yLGEoKSx0Ll9lbWl0RXZlbnQoXCJwb3N0XCIrbyksZS5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZlLmNhbGxiYWNrKHQpLG4odCl9KX0pfX0se2tleTpcImxvYWRcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLG49YXJndW1lbnRzLmxlbmd0aD4xJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOnt9O3RoaXMuX3BhZ2U9dDt2YXIgaT1uLmNhbGxiYWNrfHxmdW5jdGlvbigpe307cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4pe3ZhciBvPWUuX2NvbnRlbnR8fG51bGw7ZS5fcGFnZUxvYWRlci5sb2FkKHtwYWdlOnQscGFyZW50OmV9LGZ1bmN0aW9uKHQpe28mJihlLl9wYWdlTG9hZGVyLnVubG9hZChvKSxvPW51bGwpLHNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiBlLl9zaG93KCl9KSxpKHQpLG4odCl9KX0pfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9jb250ZW50JiZ0aGlzLl9jb250ZW50Ll9zaG93KCl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX2NvbnRlbnQmJnRoaXMuX2NvbnRlbnQuX2hpZGUoKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fY29udGVudCYmdGhpcy5fcGFnZUxvYWRlci51bmxvYWQodGhpcy5fY29udGVudCksdGhpcy5yZW1vdmUoKX19LHtrZXk6XCJzaWRlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJyaWdodFwiPT09dGhpcy5nZXRBdHRyaWJ1dGUoXCJzaWRlXCIpP1wicmlnaHRcIjpcImxlZnRcIn19LHtrZXk6XCJwYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2V9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9wYWdlPXR9fSx7a2V5OlwiX2NvbnRlbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jaGlsZHJlblswXX19LHtrZXk6XCJwYWdlTG9hZGVyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2VMb2FkZXJ9LHNldDpmdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgQnR8fFEudGhyb3dQYWdlTG9hZGVyKCksdGhpcy5fcGFnZUxvYWRlcj10fX0se2tleTpcIm1vZGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZX19LHtrZXk6XCJvblN3aXBlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU3dpcGV9LHNldDpmdW5jdGlvbih0KXshdHx8dCBpbnN0YW5jZW9mIEZ1bmN0aW9ufHxRLnRocm93KCdcIm9uU3dpcGVcIiBtdXN0IGJlIGEgZnVuY3Rpb24nKSx0aGlzLl9vblN3aXBlPXR9fSx7a2V5OlwiaXNPcGVuXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJjb2xsYXBzZVwiPT09dGhpcy5fbW9kZSYmdGhpcy5fc3RhdGUhPT1hYX19XSxbe2tleTpcIm9ic2VydmVkQXR0cmlidXRlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcImFuaW1hdGlvblwiLFwid2lkdGhcIixcImNvbGxhcHNlXCIsXCJzd2lwZWFibGVcIixcImFuaW1hdGlvbi1vcHRpb25zXCJdfX0se2tleTpcImV2ZW50c1wiLGdldDpmdW5jdGlvbigpe3JldHVybltcInByZW9wZW5cIixcInBvc3RvcGVuXCIsXCJwcmVjbG9zZVwiLFwicG9zdGNsb3NlXCIsXCJtb2RlY2hhbmdlXCJdfX0se2tleTpcInJld3JpdGFibGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHNhfX1dKSxlfSgpO2MuU3BsaXR0ZXJTaWRlPXVhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zcGxpdHRlci1zaWRlXCIsdWEpO3ZhciBjYT17XCJcIjpcInN3aXRjaC0tKlwiLFwiLnN3aXRjaF9faW5wdXRcIjpcInN3aXRjaC0tKl9faW5wdXRcIixcIi5zd2l0Y2hfX2hhbmRsZVwiOlwic3dpdGNoLS0qX19oYW5kbGVcIixcIi5zd2l0Y2hfX3RvZ2dsZVwiOlwic3dpdGNoLS0qX190b2dnbGVcIn0saGE9e2lvczpbMSwyMV0sbWF0ZXJpYWw6WzAsMTZdfSxkYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7cCh0aGlzLGUpO3ZhciB0PWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzKSk7cmV0dXJuIG4odCxmdW5jdGlvbigpe3QuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwibW9kaWZpZXJcIixudWxsLHQuZ2V0QXR0cmlidXRlKFwibW9kaWZpZXJcIikpfSksdC5fb25DaGFuZ2U9dC5fb25DaGFuZ2UuYmluZCh0KSx0Ll9vblJlbGVhc2U9dC5fb25SZWxlYXNlLmJpbmQodCksdC5fbGFzdFRpbWVTdGFtcD0wLHR9cmV0dXJuIGIoZSxIbyksZyhlLFt7a2V5OlwiX2dldFBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbG9jYXRpb25zO3JldHVybiBNYXRoLm1pbihlWzFdLE1hdGgubWF4KGVbMF0sdGhpcy5fc3RhcnRYK3QuZ2VzdHVyZS5kZWx0YVgpKX19LHtrZXk6XCJfZW1pdENoYW5nZUV2ZW50XCIsdmFsdWU6ZnVuY3Rpb24oKXtRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcImNoYW5nZVwiLHt2YWx1ZTp0aGlzLmNoZWNrZWQsc3dpdGNoOnRoaXMsaXNJbnRlcmFjdGl2ZTohMH0pfX0se2tleTpcIl9vbkNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe3QmJnQuc3RvcFByb3BhZ2F0aW9uJiZ0LnN0b3BQcm9wYWdhdGlvbigpLHRoaXMuX2VtaXRDaGFuZ2VFdmVudCgpfX0se2tleTpcIl9vbkNsaWNrXCIsdmFsdWU6ZnVuY3Rpb24odCl7KHQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyh0aGlzLmRlZmF1bHRFbGVtZW50Q2xhc3MrXCJfX3RvdWNoXCIpfHx0LnRpbWVTdGFtcC10aGlzLl9sYXN0VGltZVN0YW1wPDUwKSYmdC5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2xhc3RUaW1lU3RhbXA9dC50aW1lU3RhbXB9fSx7a2V5OlwiX29uSG9sZFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3RoaXMuZGlzYWJsZWR8fChCLmFkZE1vZGlmaWVyKHRoaXMsXCJhY3RpdmVcIiksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlbGVhc2VcIix0aGlzLl9vblJlbGVhc2UpKX19LHtrZXk6XCJfb25EcmFnU3RhcnRcIix2YWx1ZTpmdW5jdGlvbih0KXt0aGlzLmRpc2FibGVkfHwtMT09PVtcImxlZnRcIixcInJpZ2h0XCJdLmluZGV4T2YodC5nZXN0dXJlLmRpcmVjdGlvbik/Qi5yZW1vdmVNb2RpZmllcih0aGlzLFwiYWN0aXZlXCIpOih0LmNvbnN1bWVkPSEwLEIuYWRkTW9kaWZpZXIodGhpcyxcImFjdGl2ZVwiKSx0aGlzLl9zdGFydFg9dGhpcy5fbG9jYXRpb25zW3RoaXMuY2hlY2tlZD8xOjBdLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdcIix0aGlzLl9vbkRyYWcpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZWxlYXNlXCIsdGhpcy5fb25SZWxlYXNlKSl9fSx7a2V5OlwiX29uRHJhZ1wiLHZhbHVlOmZ1bmN0aW9uKHQpe3Quc3RvcFByb3BhZ2F0aW9uKCksdGhpcy5faGFuZGxlLnN0eWxlLmxlZnQ9dGhpcy5fZ2V0UG9zaXRpb24odCkrXCJweFwifX0se2tleTpcIl9vblJlbGVhc2VcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9sb2NhdGlvbnMsbj10aGlzLl9nZXRQb3NpdGlvbih0KSxpPXRoaXMuY2hlY2tlZDt0aGlzLmNoZWNrZWQ9bj49KGVbMF0rZVsxXSkvMix0aGlzLmNoZWNrZWQhPT1pJiZ0aGlzLl9lbWl0Q2hhbmdlRXZlbnQoKSx0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnXCIsdGhpcy5fb25EcmFnKSxkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVsZWFzZVwiLHRoaXMuX29uUmVsZWFzZSksdGhpcy5faGFuZGxlLnN0eWxlLmxlZnQ9XCJcIixCLnJlbW92ZU1vZGlmaWVyKHRoaXMsXCJhY3RpdmVcIil9fSx7a2V5OlwiY2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fTt0aGlzLmRpc2FibGVkfHwodGhpcy5jaGVja2VkPSF0aGlzLmNoZWNrZWQsdGhpcy5fZW1pdENoYW5nZUV2ZW50KCksdGhpcy5fbGFzdFRpbWVTdGFtcD10LnRpbWVTdGFtcHx8MCl9fSx7a2V5OlwiY29ubmVjdGVkQ2FsbGJhY2tcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXM7bih0aGlzLGZ1bmN0aW9uKCl7dC5faW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLHQuX29uQ2hhbmdlKX0pLHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLHRoaXMuX29uRHJhZ1N0YXJ0KSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJob2xkXCIsdGhpcy5fb25Ib2xkKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0YXBcIix0aGlzLmNsaWNrKSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2spLHRoaXMuX2dlc3R1cmVEZXRlY3Rvcj1uZXcgc3QodGhpcyx7ZHJhZ01pbkRpc3RhbmNlOjEsaG9sZFRpbWVvdXQ6MjUxLHBhc3NpdmU6ITB9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztuKHRoaXMsZnVuY3Rpb24oKXt0Ll9pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdC5fb25DaGFuZ2UpfSksdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsdGhpcy5fb25EcmFnU3RhcnQpLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImhvbGRcIix0aGlzLl9vbkhvbGQpLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRhcFwiLHRoaXMuY2xpY2spLHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5fb25DbGljayksdGhpcy5fZ2VzdHVyZURldGVjdG9yJiZ0aGlzLl9nZXN0dXJlRGV0ZWN0b3IuZGlzcG9zZSgpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsbixpKXtpZihcIm1vZGlmaWVyXCI9PT10KXt2YXIgbz0tMSE9PShpfHxcIlwiKS5pbmRleE9mKFwibWF0ZXJpYWxcIik7dGhpcy5fbG9jYXRpb25zPWhhW28/XCJtYXRlcmlhbFwiOlwiaW9zXCJdfXYoZS5wcm90b3R5cGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZS5wcm90b3R5cGUpLFwiYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrXCIsdGhpcykuY2FsbCh0aGlzLHQsbixpKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGNhfX0se2tleTpcIl9kZWZhdWx0Q2xhc3NOYW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuXCJzd2l0Y2hcIn19LHtrZXk6XCJfdGVtcGxhdGVcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4nXFxuICAgICAgPGlucHV0IHR5cGU9XCInK3RoaXMudHlwZSsnXCIgY2xhc3M9XCInK3RoaXMuX2RlZmF1bHRDbGFzc05hbWUrJ19faW5wdXRcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVwiJyt0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lKydfX3RvZ2dsZVwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX19oYW5kbGVcIj5cXG4gICAgICAgICAgPGRpdiBjbGFzcz1cIicrdGhpcy5fZGVmYXVsdENsYXNzTmFtZSsnX190b3VjaFwiPjwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgPC9kaXY+XFxuICAgICd9fSx7a2V5OlwidHlwZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwiY2hlY2tib3hcIn19LHtrZXk6XCJfaGFuZGxlXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVlcnlTZWxlY3RvcihcIi5cIit0aGlzLl9kZWZhdWx0Q2xhc3NOYW1lK1wiX19oYW5kbGVcIil9fSx7a2V5OlwiY2hlY2tib3hcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5wdXR9fV0sW3trZXk6XCJvYnNlcnZlZEF0dHJpYnV0ZXNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXS5jb25jYXQodyh2KGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksXCJvYnNlcnZlZEF0dHJpYnV0ZXNcIix0aGlzKSksW1wibW9kaWZpZXJcIl0pfX1dKSxlfSgpO2MuU3dpdGNoPWRhLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy1zd2l0Y2hcIixkYSk7dmFyIGZhPXtcIi50YWJiYXJfX2NvbnRlbnRcIjpcInRhYmJhci0tKl9fY29udGVudFwiLFwiLnRhYmJhcl9fYm9yZGVyXCI6XCJ0YWJiYXItLSpfX2JvcmRlclwiLFwiLnRhYmJhclwiOlwidGFiYmFyLS0qXCJ9LHBhPXtyZWFkeTpmdW5jdGlvbih0LGUpe2UoKX19LGdhPWZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4oMS1uKSp0K24qZX0sbWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3AodGhpcyxlKTt2YXIgdD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcykpO3JldHVybiB0Ll9sb2FkSW5hY3RpdmU9US5kZWZlcigpLG4odCxmdW5jdGlvbigpe3JldHVybiB0Ll9jb21waWxlKCl9KSx0fXJldHVybiBiKGUsUGkpLGcoZSxbe2tleTpcImNvbm5lY3RlZENhbGxiYWNrXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3N3aXBlcnx8KHRoaXMuX3N3aXBlcj1uZXcgcm8oe2dldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29udGVudEVsZW1lbnR9LGdldEluaXRpYWxJbmRleDpmdW5jdGlvbigpe3JldHVybiB0LmdldEF0dHJpYnV0ZShcImFjdGl2ZUluZGV4XCIpfHx0LmdldEF0dHJpYnV0ZShcImFjdGl2ZS1pbmRleFwiKX0sZ2V0QXV0b1Njcm9sbFJhdGlvOnRoaXMuX2dldEF1dG9TY3JvbGxSYXRpby5iaW5kKHRoaXMpLGdldEJ1YmJsZVdpZHRoOmZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHQuZ2V0QXR0cmlidXRlKFwiaWdub3JlLWVkZ2Utd2lkdGhcIil8fDI1LDEwKX0saXNBdXRvU2Nyb2xsYWJsZTpmdW5jdGlvbigpe3JldHVybiEwfSxwcmVDaGFuZ2VIb29rOnRoaXMuX29uUHJlQ2hhbmdlLmJpbmQodGhpcykscG9zdENoYW5nZUhvb2s6dGhpcy5fb25Qb3N0Q2hhbmdlLmJpbmQodGhpcykscmVmcmVzaEhvb2s6dGhpcy5fb25SZWZyZXNoLmJpbmQodGhpcyksc2Nyb2xsSG9vazp0aGlzLl9vblNjcm9sbC5iaW5kKHRoaXMpfSksbih0aGlzLGZ1bmN0aW9uKCl7dC5fdGFiYmFyQm9yZGVyPVEuZmluZENoaWxkKHQuX3RhYmJhckVsZW1lbnQsXCIudGFiYmFyX19ib3JkZXJcIiksdC5fc3dpcGVyLmluaXQoe3N3aXBlYWJsZTp0Lmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKX0pfSkpLG4odGhpcyxmdW5jdGlvbigpe3QuX3VwZGF0ZVBvc2l0aW9uKCksUS5maW5kUGFyZW50KHQsXCJvbnMtcGFnZVwiLGZ1bmN0aW9uKHQpe3JldHVybiB0PT09ZG9jdW1lbnQuYm9keX0pfHx0Ll9zaG93KCl9KX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5fc3dpcGVyJiZ0aGlzLl9zd2lwZXIuaW5pdGlhbGl6ZWQmJih0aGlzLl9zd2lwZXIuZGlzcG9zZSgpLHRoaXMuX3N3aXBlcj1udWxsLHRoaXMuX3RhYmJhckJvcmRlcj1udWxsLHRoaXMuX3RhYnNSZWN0PW51bGwpfX0se2tleTpcIl9ub3JtYWxpemVFdmVudFwiLHZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybiBfKHt9LHQse2luZGV4OnQuYWN0aXZlSW5kZXgsdGFiSXRlbTp0aGlzLnRhYnNbdC5hY3RpdmVJbmRleF19KX19LHtrZXk6XCJfb25Qb3N0Q2hhbmdlXCIsdmFsdWU6ZnVuY3Rpb24odCl7dD10aGlzLl9ub3JtYWxpemVFdmVudCh0KSxRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInBvc3RjaGFuZ2VcIix0KTt2YXIgZT10LnRhYkl0ZW0ucGFnZUVsZW1lbnQ7ZSYmZS5fc2hvdygpfX0se2tleTpcIl9vblByZUNoYW5nZVwiLHZhbHVlOmZ1bmN0aW9uKHQpe2lmKHQ9dGhpcy5fbm9ybWFsaXplRXZlbnQodCksdC5jYW5jZWw9ZnVuY3Rpb24oKXtyZXR1cm4gdC5jYW5jZWxlZD0hMH0sUS50cmlnZ2VyRWxlbWVudEV2ZW50KHRoaXMsXCJwcmVjaGFuZ2VcIix0KSwhdC5jYW5jZWxlZCl7dmFyIGU9dCxuPWUuYWN0aXZlSW5kZXgsaT1lLmxhc3RBY3RpdmVJbmRleCxvPXRoaXMudGFicztpZihvW25dLnNldEFjdGl2ZSghMCksaT49MCl7dmFyIHI9b1tpXTtyLnNldEFjdGl2ZSghMSksci5wYWdlRWxlbWVudCYmci5wYWdlRWxlbWVudC5faGlkZSgpfX1yZXR1cm4gdC5jYW5jZWxlZH19LHtrZXk6XCJfb25TY3JvbGxcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e307aWYodGhpcy5fdGFiYmFyQm9yZGVyKWlmKHRoaXMuX3RhYmJhckJvcmRlci5zdHlsZS50cmFuc2l0aW9uPVwiYWxsIFwiKyhlLmR1cmF0aW9ufHwwKStcInMgXCIrKGUudGltaW5nfHxcIlwiKSx0aGlzLl9hdXRvZ3JvdyYmdGhpcy5fdGFic1JlY3QubGVuZ3RoPjApe3ZhciBuPU1hdGguZmxvb3IodCksaT1NYXRoLmNlaWwodCksbz10JTE7dGhpcy5fdGFiYmFyQm9yZGVyLnN0eWxlLndpZHRoPWdhKHRoaXMuX3RhYnNSZWN0W25dLndpZHRoLHRoaXMuX3RhYnNSZWN0W2ldLndpZHRoLG8pK1wicHhcIix0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUudHJhbnNmb3JtPVwidHJhbnNsYXRlM2QoXCIrZ2EodGhpcy5fdGFic1JlY3Rbbl0ubGVmdCx0aGlzLl90YWJzUmVjdFtpXS5sZWZ0LG8pK1wicHgsIDAsIDApXCJ9ZWxzZSB0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUudHJhbnNmb3JtPVwidHJhbnNsYXRlM2QoXCIrMTAwKnQrXCIlLCAwLCAwKVwiO3RoaXMuX29uU3dpcGUmJnRoaXMuX29uU3dpcGUodCxlKX19LHtrZXk6XCJfb25SZWZyZXNoXCIsdmFsdWU6ZnVuY3Rpb24oKXtpZih0aGlzLl9hdXRvZ3Jvdz1RLmhhc01vZGlmaWVyKHRoaXMsXCJhdXRvZ3Jvd1wiKSx0aGlzLl90YWJzUmVjdD10aGlzLnRhYnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpfSksdGhpcy5fdGFiYmFyQm9yZGVyKXt0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUuZGlzcGxheT10aGlzLmhhc0F0dHJpYnV0ZShcInRhYi1ib3JkZXJcIil8fFEuaGFzTW9kaWZpZXIodGhpcyxcIm1hdGVyaWFsXCIpP1wiYmxvY2tcIjpcIm5vbmVcIjt2YXIgdD10aGlzLmdldEFjdGl2ZVRhYkluZGV4KCk7dGhpcy5fdGFic1JlY3QubGVuZ3RoPjAmJnQ+PTAmJih0aGlzLl90YWJiYXJCb3JkZXIuc3R5bGUud2lkdGg9dGhpcy5fdGFic1JlY3RbdF0ud2lkdGgrXCJweFwiKX19fSx7a2V5OlwiX2dldEF1dG9TY3JvbGxSYXRpb1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXt2YXIgaT1uLzMwMCoodD8tMToxKTtyZXR1cm4gTWF0aC5taW4oMSxNYXRoLm1heCgwLC42K2UqaSkpfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyk7dmFyIHQ9dGhpcy5fY29udGVudEVsZW1lbnR8fFEuY3JlYXRlKFwiLnRhYmJhcl9fY29udGVudFwiKTt0LmNsYXNzTGlzdC5hZGQoXCJvbnMtdGFiYmFyX19jb250ZW50XCIpO3ZhciBlPXRoaXMuX3RhYmJhckVsZW1lbnR8fFEuY3JlYXRlKFwiLnRhYmJhclwiKTtpZihlLmNsYXNzTGlzdC5hZGQoXCJvbnMtdGFiYmFyX19mb290ZXJcIiksIWUucGFyZW50Tm9kZSlmb3IoO3RoaXMuZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO3ZhciBuPU51bWJlcih0aGlzLmdldEF0dHJpYnV0ZShcImFjdGl2ZUluZGV4XCIpKTtlLmNoaWxkcmVuLmxlbmd0aD5uJiYhUS5maW5kQ2hpbGQoZSxcIlthY3RpdmVdXCIpJiZlLmNoaWxkcmVuW25dLnNldEF0dHJpYnV0ZShcImFjdGl2ZVwiLFwiXCIpLHRoaXMuX3RhYmJhckJvcmRlcj1RLmZpbmRDaGlsZChlLFwiLnRhYmJhcl9fYm9yZGVyXCIpfHxRLmNyZWF0ZShcIi50YWJiYXJfX2JvcmRlclwiKSxlLmFwcGVuZENoaWxkKHRoaXMuX3RhYmJhckJvcmRlciksZS5jbGFzc0xpc3QuYWRkKFwib25zLXN3aXBlci10YWJiYXJcIiksIXQuY2hpbGRyZW5bMF0mJnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksIXQuY2hpbGRyZW5bMV0mJnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSksdC5hcHBlbmRDaGlsZD10LmFwcGVuZENoaWxkLmJpbmQodC5jaGlsZHJlblswXSksdC5pbnNlcnRCZWZvcmU9dC5pbnNlcnRCZWZvcmUuYmluZCh0LmNoaWxkcmVuWzBdKSx0aGlzLmFwcGVuZENoaWxkKHQpLHRoaXMuYXBwZW5kQ2hpbGQoZSksQi5pbml0TW9kaWZpZXIodGhpcyxmYSl9fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnRoaXMuZ2V0QXR0cmlidXRlKFwicG9zaXRpb25cIiksaT10aGlzLl90b3A9XCJ0b3BcIj09PWV8fFwiYXV0b1wiPT09ZSYmUS5oYXNNb2RpZmllcih0aGlzLFwibWF0ZXJpYWxcIiksbz1pP1EuYWRkTW9kaWZpZXI6US5yZW1vdmVNb2RpZmllcjtvKHRoaXMsXCJ0b3BcIik7dmFyIHI9US5maW5kUGFyZW50KHRoaXMsXCJvbnMtcGFnZVwiKTtyJiZuKHIsZnVuY3Rpb24oKXt2YXIgZT0wO3IuY2hpbGRyZW5bMF0mJlEubWF0Y2goci5jaGlsZHJlblswXSxcIm9ucy10b29sYmFyXCIpJiYobyhyLmNoaWxkcmVuWzBdLFwibm9zaGFkb3dcIiksZT0xKTt2YXIgbj1yLl9nZXRDb250ZW50RWxlbWVudCgpLGE9d2luZG93LmdldENvbXB1dGVkU3R5bGUoci5fZ2V0Q29udGVudEVsZW1lbnQoKSxudWxsKTt0LnN0eWxlLnRvcD1pP3BhcnNlSW50KGEuZ2V0UHJvcGVydHlWYWx1ZShcInBhZGRpbmctdG9wXCIpLDEwKS1lK1wicHhcIjpcIlwiLG4uc3R5bGUudG9wPWEudG9wLG4uc3R5bGUudG9wPVwiXCJ9KSxQLmF1dG9TdGF0dXNCYXJGaWxsKGZ1bmN0aW9uKCl7dmFyIGU9US5maW5kUGFyZW50KHQsZnVuY3Rpb24odCl7cmV0dXJuIHQuaGFzQXR0cmlidXRlKFwic3RhdHVzLWJhci1maWxsXCIpfSk7US50b2dnbGVBdHRyaWJ1dGUodCxcInN0YXR1cy1iYXItZmlsbFwiLGkmJiFlKX0pfX0se2tleTpcInNldEFjdGl2ZVRhYlwiLHZhbHVlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsbj1hcmd1bWVudHMubGVuZ3RoPjEmJnZvaWQgMCE9PWFyZ3VtZW50c1sxXT9hcmd1bWVudHNbMV06e30saT10aGlzLmdldEFjdGl2ZVRhYkluZGV4KCksbz10aGlzLnRhYnNbaV0scj10aGlzLnRhYnNbdF07aWYoIXIpcmV0dXJuIFByb21pc2UucmVqZWN0KFwiU3BlY2lmaWVkIGluZGV4IGRvZXMgbm90IG1hdGNoIGFueSB0YWIuXCIpO2lmKHQ9PT1pKXJldHVybiBRLnRyaWdnZXJFbGVtZW50RXZlbnQodGhpcyxcInJlYWN0aXZlXCIse2luZGV4OnQsYWN0aXZlSW5kZXg6dCx0YWJJdGVtOnJ9KSxQcm9taXNlLnJlc29sdmUoci5wYWdlRWxlbWVudCk7dmFyIGE9ci5wYWdlRWxlbWVudDtyZXR1cm4oYT9Qcm9taXNlLnJlc29sdmUoYSk6ci5sb2FkZWQpLnRoZW4oZnVuY3Rpb24oaSl7cmV0dXJuIGUuX3N3aXBlci5zZXRBY3RpdmVJbmRleCh0LF8oe3JlamVjdDohMH0sbix7YW5pbWF0aW9uOm8mJmk/bi5hbmltYXRpb258fGUuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uXCIpOlwibm9uZVwiLGFuaW1hdGlvbk9wdGlvbnM6US5leHRlbmQoe2R1cmF0aW9uOi4zLHRpbWluZzpcImN1YmljLWJlemllciguNCwgLjcsIC41LCAxKVwifSxlLmhhc0F0dHJpYnV0ZShcImFuaW1hdGlvbi1vcHRpb25zXCIpP1EuYW5pbWF0aW9uT3B0aW9uc1BhcnNlKGUuZ2V0QXR0cmlidXRlKFwiYW5pbWF0aW9uLW9wdGlvbnNcIikpOnt9LG4uYW5pbWF0aW9uT3B0aW9uc3x8e30pfSkpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gbi5jYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uJiZuLmNhbGxiYWNrKGkpLGl9KX0pfX0se2tleTpcInNldFRhYmJhclZpc2liaWxpdHlcIix2YWx1ZTpmdW5jdGlvbih0KXt2YXIgZT10aGlzO24odGhpcyxmdW5jdGlvbigpe2UuX2NvbnRlbnRFbGVtZW50LnN0eWxlW2UuX3RvcD9cInRvcFwiOlwiYm90dG9tXCJdPXQ/XCJcIjpcIjBweFwiLGUuX3RhYmJhckVsZW1lbnQuc3R5bGUuZGlzcGxheT10P1wiXCI6XCJub25lXCIsdCYmZS5fb25SZWZyZXNoKCl9KX19LHtrZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLnNldFRhYmJhclZpc2liaWxpdHkoITApfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuc2V0VGFiYmFyVmlzaWJpbGl0eSghMSl9fSx7a2V5OlwiZ2V0QWN0aXZlVGFiSW5kZXhcIix2YWx1ZTpmdW5jdGlvbigpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06dGhpcy50YWJzLGU9MDtlPHQubGVuZ3RoO2UrKylpZih0W2VdJiZcIk9OUy1UQUJcIj09PXRbZV0udGFnTmFtZSYmdFtlXS5pc0FjdGl2ZSgpKXJldHVybiBlO3JldHVybi0xfX0se2tleTpcIl9zaG93XCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzO3RoaXMuX3N3aXBlci5zaG93KCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7dmFyIGU9dC50YWJzLG49dC5nZXRBY3RpdmVUYWJJbmRleChlKTt0Ll9sb2FkSW5hY3RpdmUucmVzb2x2ZSgpLGUubGVuZ3RoPjAmJm4+PTAmJmVbbl0ubG9hZGVkLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIHQmJnNldEltbWVkaWF0ZShmdW5jdGlvbigpe3JldHVybiB0Ll9zaG93KCl9KX0pfSl9fSx7a2V5OlwiX2hpZGVcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMuX3N3aXBlci5oaWRlKCk7dmFyIHQ9dGhpcy50b3BQYWdlO3QmJnQuX2hpZGUoKX19LHtrZXk6XCJfZGVzdHJveVwiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy50YWJzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQucmVtb3ZlKCl9KSx0aGlzLnJlbW92ZSgpfX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxuKXtpZihcIm1vZGlmaWVyXCI9PT10KXtCLm9uTW9kaWZpZXJDaGFuZ2VkKGUsbix0aGlzLGZhKTt2YXIgaT1mdW5jdGlvbih0KXtyZXR1cm4vKF58XFxzKyl0b3AoJHxcXHMrKS9pLnRlc3QodCl9O2koZSkhPT1pKG4pJiZ0aGlzLl91cGRhdGVQb3NpdGlvbigpfWVsc2VcInBvc2l0aW9uXCI9PT10P1EuaXNBdHRhY2hlZCh0aGlzKSYmdGhpcy5fdXBkYXRlUG9zaXRpb24oKTpcInN3aXBlYWJsZVwiPT09dD90aGlzLl9zd2lwZXImJnRoaXMuX3N3aXBlci51cGRhdGVTd2lwZWFibGUodGhpcy5oYXNBdHRyaWJ1dGUoXCJzd2lwZWFibGVcIikpOlwiaGlkZS10YWJzXCI9PT10JiZ0aGlzLnNldFRhYmJhclZpc2liaWxpdHkoIXRoaXMuaGFzQXR0cmlidXRlKFwiaGlkZS10YWJzXCIpfHxcImZhbHNlXCI9PT1uKX19LHtrZXk6XCJfdGFiYmFyRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLnRhYmJhclwiKX19LHtrZXk6XCJfY29udGVudEVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gUS5maW5kQ2hpbGQodGhpcyxcIi50YWJiYXJfX2NvbnRlbnRcIil9fSx7a2V5OlwiX3RhcmdldEVsZW1lbnRcIixnZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9jb250ZW50RWxlbWVudDtyZXR1cm4gdCYmdC5jaGlsZHJlblswXXx8bnVsbH19LHtrZXk6XCJ0b3BQYWdlXCIsZ2V0OmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy50YWJzLGU9dGhpcy5nZXRBY3RpdmVUYWJJbmRleCgpO3JldHVybiB0W2VdP3RbZV0ucGFnZUVsZW1lbnR8fHRoaXMucGFnZXNbMF18fG51bGw6bnVsbH19LHtrZXk6XCJwYWdlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmFycmF5RnJvbSh0aGlzLl90YXJnZXRFbGVtZW50LmNoaWxkcmVuKX19LHtrZXk6XCJ0YWJzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0aGlzLl90YWJiYXJFbGVtZW50LmNoaWxkcmVuLGZ1bmN0aW9uKHQpe3JldHVyblwiT05TLVRBQlwiPT09dC50YWdOYW1lfSl9fSx7a2V5OlwidmlzaWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwibm9uZVwiIT09dGhpcy5fdGFiYmFyRWxlbWVudC5zdHlsZS5kaXNwbGF5fX0se2tleTpcInN3aXBlYWJsZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcInN3aXBlYWJsZVwiKX0sc2V0OmZ1bmN0aW9uKHQpe3JldHVybiBRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwic3dpcGVhYmxlXCIsdCl9fSx7a2V5Olwib25Td2lwZVwiLGdldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblN3aXBlfSxzZXQ6ZnVuY3Rpb24odCl7IXR8fHQgaW5zdGFuY2VvZiBGdW5jdGlvbnx8US50aHJvdygnXCJvblN3aXBlXCIgbXVzdCBiZSBhIGZ1bmN0aW9uJyksdGhpcy5fb25Td2lwZT10fX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInBvc2l0aW9uXCIsXCJzd2lwZWFibGVcIixcInRhYi1ib3JkZXJcIixcImhpZGUtdGFic1wiXX19LHtrZXk6XCJyZXdyaXRhYmxlc1wiLGdldDpmdW5jdGlvbigpe3JldHVybiBwYX19LHtrZXk6XCJldmVudHNcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5bXCJwcmVjaGFuZ2VcIixcInBvc3RjaGFuZ2VcIixcInJlYWN0aXZlXCJdfX1dKSxlfSgpO2MuVGFiYmFyPW1hLGN1c3RvbUVsZW1lbnRzLmRlZmluZShcIm9ucy10YWJiYXJcIixtYSk7dmFyIF9hPXtcIlwiOlwidGFiYmFyLS0qX19pdGVtXCIsXCIudGFiYmFyX19idXR0b25cIjpcInRhYmJhci0tKl9fYnV0dG9uXCJ9LHZhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm5bXCJsYWJlbFwiLFwiaWNvblwiLFwiYmFkZ2VcIl0uc29tZSh0Lmhhc0F0dHJpYnV0ZS5iaW5kKHQpKT90Ll9jb21waWxlKCk6bih0LGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2NvbXBpbGUoKX0pLHQuX3BhZ2VMb2FkZXI9anQsdC5fb25DbGljaz10Ll9vbkNsaWNrLmJpbmQodCksdH1yZXR1cm4gYihlLFBpKSxnKGUsW3trZXk6XCJfY29tcGlsZVwiLHZhbHVlOmZ1bmN0aW9uKCl7aWYoTi5wcmVwYXJlKHRoaXMpLHRoaXMuY2xhc3NMaXN0LmFkZChcInRhYmJhcl9faXRlbVwiKSwhdGhpcy5fYnV0dG9uKXtmb3IodmFyIHQ9US5jcmVhdGUoXCJidXR0b24udGFiYmFyX19idXR0b25cIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl0LmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7dmFyIGU9US5jcmVhdGUoXCJpbnB1dFwiLHtkaXNwbGF5Olwibm9uZVwifSk7ZS50eXBlPVwicmFkaW9cIix0aGlzLmFwcGVuZENoaWxkKGUpLHRoaXMuYXBwZW5kQ2hpbGQodCksdGhpcy5fdXBkYXRlQnV0dG9uQ29udGVudCgpLEIuaW5pdE1vZGlmaWVyKHRoaXMsX2EpLHRoaXMuX3VwZGF0ZVJpcHBsZSgpfX19LHtrZXk6XCJfdXBkYXRlUmlwcGxlXCIsdmFsdWU6ZnVuY3Rpb24oKXt0aGlzLl9idXR0b24mJlEudXBkYXRlUmlwcGxlKHRoaXMuX2J1dHRvbix0aGlzLmhhc0F0dHJpYnV0ZShcInJpcHBsZVwiKSl9fSx7a2V5OlwiX3VwZGF0ZUJ1dHRvbkNvbnRlbnRcIix2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMsZT10aGlzLl9idXR0b24sbj10aGlzLl9pY29uO2lmKHRoaXMuaGFzQXR0cmlidXRlKFwiaWNvblwiKSl7dmFyIGk9KG49bnx8US5jcmVhdGVFbGVtZW50KCc8ZGl2IGNsYXNzPVwidGFiYmFyX19pY29uXCI+PG9ucy1pY29uPjwvb25zLWljb24+PC9kaXY+JykpLmNoaWxkcmVuWzBdLG89ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGkuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKFwiaWNvblwiLGUsdC5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpKX19KGkuZ2V0QXR0cmlidXRlKFwiaWNvblwiKSk7aS5zZXRBdHRyaWJ1dGUoXCJpY29uXCIsdGhpcy5nZXRBdHRyaWJ1dGUoXCJpY29uXCIpKSxuLnBhcmVudEVsZW1lbnQhPT1lJiZlLmluc2VydEJlZm9yZShuLGUuZmlyc3RDaGlsZCksaS5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbj9vKCk6c2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGkuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrIGluc3RhbmNlb2YgRnVuY3Rpb24mJm8oKX0pfWVsc2UgbiYmbi5yZW1vdmUoKTtbXCJsYWJlbFwiLFwiYmFkZ2VcIl0uZm9yRWFjaChmdW5jdGlvbihuLGkpe3ZhciBvPXQucXVlcnlTZWxlY3RvcihcIi50YWJiYXJfX1wiK24pO3QuaGFzQXR0cmlidXRlKG4pPygobz1vfHxRLmNyZWF0ZShcIi50YWJiYXJfX1wiK24rKFwiYmFkZ2VcIj09PW4/XCIgbm90aWZpY2F0aW9uXCI6XCJcIikpKS50ZXh0Q29udGVudD10LmdldEF0dHJpYnV0ZShuKSxvLnBhcmVudEVsZW1lbnQhPT1lJiZlLmFwcGVuZENoaWxkKG8pKTpvJiZvLnJlbW92ZSgpfSl9fSx7a2V5OlwiX29uQ2xpY2tcIix2YWx1ZTpmdW5jdGlvbigpe3RoaXMub25DbGljayBpbnN0YW5jZW9mIEZ1bmN0aW9uP3RoaXMub25DbGljaygpOnRoaXMuX3RhYmJhci5zZXRBY3RpdmVUYWIodGhpcy5pbmRleCx7cmVqZWN0OiExfSl9fSx7a2V5Olwic2V0QWN0aXZlXCIsdmFsdWU6ZnVuY3Rpb24oKXt2YXIgdD0hKGFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdKXx8YXJndW1lbnRzWzBdO3RoaXMuX2lucHV0LmNoZWNrZWQ9dCx0aGlzLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIix0KSxRLnRvZ2dsZUF0dHJpYnV0ZSh0aGlzLFwiYWN0aXZlXCIsdCksdGhpcy5oYXNBdHRyaWJ1dGUoXCJpY29uXCIpJiZ0aGlzLmhhc0F0dHJpYnV0ZShcImFjdGl2ZS1pY29uXCIpJiZ0aGlzLl9pY29uLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZShcImljb25cIix0aGlzLmdldEF0dHJpYnV0ZSh0P1wiYWN0aXZlLWljb25cIjpcImljb25cIikpfX0se2tleTpcIl9sb2FkUGFnZUVsZW1lbnRcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3ZhciBuPXRoaXM7cmV0dXJuIHRoaXMuX2hhc0xvYWRlZD0hMCxuZXcgUHJvbWlzZShmdW5jdGlvbihpKXtuLl9wYWdlTG9hZGVyLmxvYWQoe3BhcmVudDp0LHBhZ2U6ZX0sZnVuY3Rpb24oZSl7dC5yZXBsYWNlQ2hpbGQoZSx0LmNoaWxkcmVuW24uaW5kZXhdKSxuLl9sb2FkZWRQYWdlPWUsaShlKX0pfSl9fSx7a2V5OlwiaXNBY3RpdmVcIix2YWx1ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsYXNzTGlzdC5jb250YWlucyhcImFjdGl2ZVwiKX19LHtrZXk6XCJkaXNjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLl9vbkNsaWNrLCExKSx0aGlzLl9sb2FkZWRQYWdlJiYodGhpcy5fcGFnZUxvYWRlci51bmxvYWQodGhpcy5fbG9hZGVkUGFnZSksdGhpcy5fbG9hZGVkUGFnZT1udWxsLHRoaXMuX2hhc0xvYWRlZD0hMSx0aGlzLmxvYWRlZD1udWxsKX19LHtrZXk6XCJjb25uZWN0ZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztpZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuX29uQ2xpY2ssITEpLFEuaXNBdHRhY2hlZCh0aGlzKSYmIXRoaXMubG9hZGVkKXt2YXIgZT1RLmRlZmVyKCk7dGhpcy5sb2FkZWQ9ZS5wcm9taXNlLG4odGhpcyxmdW5jdGlvbigpe3ZhciBuPXQuaW5kZXgsaT10Ll90YWJiYXI7aXx8US50aHJvdyhcIlRhYiBlbGVtZW50cyBtdXN0IGJlIGNoaWxkcmVuIG9mIFRhYmJhclwiKSxpLmhhc0F0dHJpYnV0ZShcIm1vZGlmaWVyXCIpJiZRLmFkZE1vZGlmaWVyKHQsaS5nZXRBdHRyaWJ1dGUoXCJtb2RpZmllclwiKSksdC5faGFzTG9hZGVkfHwodC5oYXNBdHRyaWJ1dGUoXCJhY3RpdmVcIikmJih0LnNldEFjdGl2ZSghMCksaS5zZXRBdHRyaWJ1dGUoXCJhY3RpdmVJbmRleFwiLG4pKSxuPT09aS50YWJzLmxlbmd0aC0xJiYoaS5fb25SZWZyZXNoKCksc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX29uUmVmcmVzaCgpfSkpLG1hLnJld3JpdGFibGVzLnJlYWR5KGksZnVuY3Rpb24oKXt2YXIgbz10LnBhZ2V8fHQuZ2V0QXR0cmlidXRlKFwicGFnZVwiKTtpZighdC5wYWdlRWxlbWVudCYmbyl7dmFyIHI9aS5fdGFyZ2V0RWxlbWVudCxhPVEuY3JlYXRlKFwiZGl2XCIse2hlaWdodDpcIjEwMCVcIix3aWR0aDpcIjEwMCVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9KTtyLmluc2VydEJlZm9yZShhLHIuY2hpbGRyZW5bbl0pO3ZhciBzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuX2xvYWRQYWdlRWxlbWVudChyLG8pLnRoZW4oZS5yZXNvbHZlKX07cmV0dXJuIHQuaXNBY3RpdmUoKT9zKCk6aS5fbG9hZEluYWN0aXZlLnByb21pc2UudGhlbihzKX1yZXR1cm4gZS5yZXNvbHZlKHQucGFnZUVsZW1lbnQpfSkpfSl9fX0se2tleTpcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbz10aGlzO3N3aXRjaCh0KXtjYXNlXCJjbGFzc1wiOlEucmVzdG9yZUNsYXNzKHRoaXMsXCJ0YWJiYXJfX2l0ZW1cIixfYSk7YnJlYWs7Y2FzZVwibW9kaWZpZXJcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gQi5vbk1vZGlmaWVyQ2hhbmdlZChlLGksbyxfYSl9KTticmVhaztjYXNlXCJyaXBwbGVcIjpuKHRoaXMsZnVuY3Rpb24oKXtyZXR1cm4gby5fdXBkYXRlUmlwcGxlKCl9KTticmVhaztjYXNlXCJpY29uXCI6Y2FzZVwibGFiZWxcIjpjYXNlXCJiYWRnZVwiOm4odGhpcyxmdW5jdGlvbigpe3JldHVybiBvLl91cGRhdGVCdXR0b25Db250ZW50KCl9KTticmVhaztjYXNlXCJwYWdlXCI6dGhpcy5wYWdlPWl8fFwiXCJ9fX0se2tleTpcInBhZ2VMb2FkZXJcIixzZXQ6ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJ0fHxRLnRocm93UGFnZUxvYWRlcigpLHRoaXMuX3BhZ2VMb2FkZXI9dH0sZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhZ2VMb2FkZXJ9fSx7a2V5OlwiX2lucHV0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCJpbnB1dFwiKX19LHtrZXk6XCJfYnV0dG9uXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZENoaWxkKHRoaXMsXCIudGFiYmFyX19idXR0b25cIil9fSx7a2V5OlwiX2ljb25cIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yKFwiLnRhYmJhcl9faWNvblwiKX19LHtrZXk6XCJfdGFiYmFyXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFEuZmluZFBhcmVudCh0aGlzLFwib25zLXRhYmJhclwiKX19LHtrZXk6XCJpbmRleFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMucGFyZW50RWxlbWVudC5jaGlsZHJlbix0aGlzKX19LHtrZXk6XCJwYWdlRWxlbWVudFwiLGdldDpmdW5jdGlvbigpe2lmKHRoaXMuX2xvYWRlZFBhZ2UpcmV0dXJuIHRoaXMuX2xvYWRlZFBhZ2U7dmFyIHQ9dGhpcy5fdGFiYmFyO3JldHVybiB0LnBhZ2VzLmxlbmd0aD09PXQudGFicy5sZW5ndGg/dC5wYWdlc1t0aGlzLmluZGV4XTpudWxsfX1dLFt7a2V5Olwib2JzZXJ2ZWRBdHRyaWJ1dGVzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW1wibW9kaWZpZXJcIixcInJpcHBsZVwiLFwiaWNvblwiLFwibGFiZWxcIixcInBhZ2VcIixcImJhZGdlXCIsXCJjbGFzc1wiXX19XSksZX0oKTtjLlRhYj12YSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdGFiXCIsdmEpO3ZhciBiYT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wibGluZWFyXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4yOmE7cmV0dXJuIHAodGhpcyxlKSxrKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpfXJldHVybiBiKGUsVGkpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2UoKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlKCl9fV0pLGV9KCkseWE9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImxpbmVhclwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzphO3JldHVybiBwKHRoaXMsZSksayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKX1yZXR1cm4gYihlLGJhKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXtlPWV8fGZ1bmN0aW9uKCl7fSxudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHtvcGFjaXR5OjB9LHtvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlKCksdCgpfSkucGxheSgpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe2U9ZXx8ZnVuY3Rpb24oKXt9LG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UoKSx0KCl9KS5wbGF5KCl9fV0pLGV9KCksa2E9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciB0PWFyZ3VtZW50cy5sZW5ndGg+MCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXTp7fSxuPXQudGltaW5nLGk9dm9pZCAwPT09bj9cImVhc2VcIjpuLG89dC5kZWxheSxyPXZvaWQgMD09PW8/MDpvLGE9dC5kdXJhdGlvbixzPXZvaWQgMD09PWE/LjI1OmE7cCh0aGlzLGUpO3ZhciBsPWsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuY2FsbCh0aGlzLHt0aW1pbmc6aSxkZWxheTpyLGR1cmF0aW9uOnN9KSk7cmV0dXJuIGwubWVzc2FnZURlbGF5PS40KmwuZHVyYXRpb24rbC5kZWxheSxDLmlzQW5kcm9pZCgpP2wuYXNjZW5zaW9uPTQ4OkxpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9sLmFzY2Vuc2lvbj05ODpMaS5pc0lQaG9uZVhMYW5kc2NhcGVQYXRjaEFjdGl2ZSgpP2wuYXNjZW5zaW9uPTg1OmwuYXNjZW5zaW9uPTY0LGx9cmV0dXJuIGIoZSxiYSksZyhlLFt7a2V5Olwic2hvd1wiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dD10Ll90b2FzdCxRLmdsb2JhbHMuZmFiT2Zmc2V0PXRoaXMuYXNjZW5zaW9uLG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmFzY2Vuc2lvbitcInB4LCAwKVwifSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSxudCh0aGlzLl9nZXRGYWJzKCkpLndhaXQodGhpcy5kZWxheSkucXVldWUoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIC1cIit0aGlzLmFzY2Vuc2lvbitcInB4LCAwKSBzY2FsZSgxKVwifSx0aGlzLmRlZiksbnQoUS5hcnJheUZyb20odC5jaGlsZHJlbiksdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MH0se29wYWNpdHk6MX0pKX19LHtrZXk6XCJoaWRlXCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LFEuZ2xvYmFscy5mYWJPZmZzZXQ9MCxudC5ydW5BbGwobnQodCx0aGlzLmRlZikuZGVmYXVsdCh7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIn0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMuYXNjZW5zaW9uK1wicHgsIDApXCJ9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSksbnQodGhpcy5fZ2V0RmFicygpLHRoaXMuZGVmKS53YWl0KHRoaXMuZGVsYXkpLnF1ZXVlKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKSBzY2FsZSgxKVwifSx0aGlzLmRlZiksbnQoUS5hcnJheUZyb20odC5jaGlsZHJlbiksdGhpcy5kZWYpLmRlZmF1bHQoe29wYWNpdHk6MX0se29wYWNpdHk6MH0pKX19LHtrZXk6XCJfZ2V0RmFic1wiLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIFEuYXJyYXlGcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJvbnMtZmFiW3Bvc2l0aW9ufj1ib3R0b21dLCBvbnMtc3BlZWQtZGlhbFtwb3NpdGlvbn49Ym90dG9tXVwiKSkuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnZpc2libGV9KX19XSksZX0oKSx3YT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIHQ9YXJndW1lbnRzLmxlbmd0aD4wJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOnt9LG49dC50aW1pbmcsaT12b2lkIDA9PT1uP1wiZWFzZVwiOm4sbz10LmRlbGF5LHI9dm9pZCAwPT09bz8wOm8sYT10LmR1cmF0aW9uLHM9dm9pZCAwPT09YT8uMzU6YTtwKHRoaXMsZSk7dmFyIGw9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMse3RpbWluZzppLGRlbGF5OnIsZHVyYXRpb246c30pKTtyZXR1cm4gbC5ib2R5SGVpZ2h0PWRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LExpLmlzSVBob25lWFBvcnRyYWl0UGF0Y2hBY3RpdmUoKT9sLmxpZnRBbW91bnQ9XCJjYWxjKDEwMCUgKyAzNHB4KVwiOkxpLmlzSVBob25lWExhbmRzY2FwZVBhdGNoQWN0aXZlKCk/bC5saWZ0QW1vdW50PVwiY2FsYygxMDAlICsgMjFweClcIjpsLmxpZnRBbW91bnQ9XCIxMDAlXCIsbH1yZXR1cm4gYihlLGJhKSxnKGUsW3trZXk6XCJzaG93XCIsdmFsdWU6ZnVuY3Rpb24odCxlKXt0PXQuX3RvYXN0LG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCBcIit0aGlzLmxpZnRBbW91bnQrXCIsIDApXCIsb3BhY2l0eTowfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgMCwgMClcIixvcGFjaXR5OjF9KS5xdWV1ZShmdW5jdGlvbih0KXtlJiZlKCksdCgpfSkpfX0se2tleTpcImhpZGVcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9dC5fdG9hc3QsbnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIDAsIDApXCIsb3BhY2l0eToxfSx7dHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoMCwgXCIrdGhpcy5saWZ0QW1vdW50K1wiLCAwKVwiLG9wYWNpdHk6MH0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fSx7a2V5OlwiX3VwZGF0ZVBvc2l0aW9uXCIsdmFsdWU6ZnVuY3Rpb24odCl7MD09PXBhcnNlSW50KHQuc3R5bGUudG9wLDEwKSYmKHQuc3R5bGUudG9wPXQuc3R5bGUuYm90dG9tPVwiXCIpfX1dKSxlfSgpLEVhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgdD1hcmd1bWVudHMubGVuZ3RoPjAmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06e30sbj10LnRpbWluZyxpPXZvaWQgMD09PW4/XCJlYXNlXCI6bixvPXQuZGVsYXkscj12b2lkIDA9PT1vPzA6byxhPXQuZHVyYXRpb24scz12b2lkIDA9PT1hPy4zNTphO3AodGhpcyxlKTt2YXIgbD1rKHRoaXMsKGUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkpLmNhbGwodGhpcyx7dGltaW5nOmksZGVsYXk6cixkdXJhdGlvbjpzfSkpO3JldHVybiBMaS5pc0lQaG9uZVhQb3J0cmFpdFBhdGNoQWN0aXZlKCk/bC5mYWxsQW1vdW50PVwiY2FsYygtMTAwJSAtIDQ0cHgpXCI6bC5mYWxsQW1vdW50PVwiLTEwMCVcIixsfXJldHVybiBiKGUsYmEpLGcoZSxbe2tleTpcInNob3dcIix2YWx1ZTpmdW5jdGlvbih0LGUpe3Q9dC5fdG9hc3QsdGhpcy5fdXBkYXRlUG9zaXRpb24odCksbnQucnVuQWxsKG50KHQsdGhpcy5kZWYpLmRlZmF1bHQoe3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMuZmFsbEFtb3VudCtcIiwgMClcIixvcGFjaXR5OjB9LHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0pLnF1ZXVlKGZ1bmN0aW9uKHQpe2UmJmUoKSx0KCl9KSl9fSx7a2V5OlwiaGlkZVwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpczt0PXQuX3RvYXN0LHRoaXMuX3VwZGF0ZVBvc2l0aW9uKHQpLG50LnJ1bkFsbChudCh0LHRoaXMuZGVmKS5kZWZhdWx0KHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVwiLG9wYWNpdHk6MX0se3RyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKDAsIFwiK3RoaXMuZmFsbEFtb3VudCtcIiwgMClcIixvcGFjaXR5OjB9KS5xdWV1ZShmdW5jdGlvbihpKXtuLl91cGRhdGVQb3NpdGlvbih0LCEwKSxlJiZlKCksaSgpfSkpfX0se2tleTpcIl91cGRhdGVQb3NpdGlvblwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dm9pZCAwO249TGkuaXNJUGhvbmVYUG9ydHJhaXRQYXRjaEFjdGl2ZSgpP1wiNDRweFwiOlwiMFwiLHQuc3R5bGUudG9wIT09biYmKHQuc3R5bGUudG9wPW4sdC5zdHlsZS5ib3R0b209XCJpbml0aWFsXCIpfX1dKSxlfSgpLENhPXtcIi50b2FzdFwiOlwidG9hc3QtLSpcIixcIi50b2FzdF9fbWVzc2FnZVwiOlwidG9hc3QtLSpfX21lc3NhZ2VcIixcIi50b2FzdF9fYnV0dG9uXCI6XCJ0b2FzdC0tKl9fYnV0dG9uXCJ9LEFhPXtkZWZhdWx0OkMuaXNBbmRyb2lkKCk/a2E6d2EsZmFkZTp5YSxhc2NlbmQ6a2EsbGlmdDp3YSxmYWxsOkVhLG5vbmU6YmF9LFNhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtwKHRoaXMsZSk7dmFyIHQ9ayh0aGlzLChlLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpKS5jYWxsKHRoaXMpKTtyZXR1cm4gdC5fZGVmYXVsdERCQj1mdW5jdGlvbih0KXtyZXR1cm4gdC5jYWxsUGFyZW50SGFuZGxlcigpfSxuKHQsZnVuY3Rpb24oKXtyZXR1cm4gdC5fY29tcGlsZSgpfSksdH1yZXR1cm4gYihlLE5pKSxnKGUsW3trZXk6XCJfdXBkYXRlQW5pbWF0b3JGYWN0b3J5XCIsdmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdG9hc3QmJih0aGlzLl90b2FzdC5zdHlsZS50b3A9dGhpcy5fdG9hc3Quc3R5bGUuYm90dG9tPVwiXCIpLG5ldyBPKHthbmltYXRvcnM6QWEsYmFzZUNsYXNzOmJhLGJhc2VDbGFzc05hbWU6XCJUb2FzdEFuaW1hdG9yXCIsZGVmYXVsdEFuaW1hdGlvbjp0aGlzLmdldEF0dHJpYnV0ZShcImFuaW1hdGlvblwiKX0pfX0se2tleTpcIl9jb21waWxlXCIsdmFsdWU6ZnVuY3Rpb24oKXtOLnByZXBhcmUodGhpcyksdGhpcy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuc3R5bGUuekluZGV4PTFlNDt2YXIgdD1RLmZpbmRDaGlsZCh0aGlzLFwiLnRvYXN0XCIpO2lmKCF0KWZvcigodD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKS5jbGFzc0xpc3QuYWRkKFwidG9hc3RcIik7dGhpcy5jaGlsZE5vZGVzWzBdOyl0LmFwcGVuZENoaWxkKHRoaXMuY2hpbGROb2Rlc1swXSk7dmFyIGU9US5maW5kQ2hpbGQodCxcIi50b2FzdF9fYnV0dG9uXCIpO2lmKGV8fChlPVEuZmluZENoaWxkKHQsZnVuY3Rpb24odCl7cmV0dXJuIFEubWF0Y2godCxcIi5idXR0b25cIil8fFEubWF0Y2godCxcImJ1dHRvblwiKX0pKSYmKGUuY2xhc3NMaXN0LnJlbW92ZShcImJ1dHRvblwiKSxlLmNsYXNzTGlzdC5hZGQoXCJ0b2FzdF9fYnV0dG9uXCIpLHQuYXBwZW5kQ2hpbGQoZSkpLCFRLmZpbmRDaGlsZCh0LFwiLnRvYXN0X19tZXNzYWdlXCIpKXt2YXIgbj1RLmZpbmRDaGlsZCh0LFwiLm1lc3NhZ2VcIik7aWYoIW4pe249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtmb3IodmFyIGk9dC5jaGlsZE5vZGVzLmxlbmd0aC0xO2k+PTA7aS0tKXQuY2hpbGROb2Rlc1tpXSE9PWUmJm4uaW5zZXJ0QmVmb3JlKHQuY2hpbGROb2Rlc1tpXSxuLmZpcnN0Q2hpbGQpfW4uY2xhc3NMaXN0LmFkZChcInRvYXN0X19tZXNzYWdlXCIpLHQuaW5zZXJ0QmVmb3JlKG4sdC5maXJzdENoaWxkKX10LnBhcmVudE5vZGUhPT10aGlzJiZ0aGlzLmFwcGVuZENoaWxkKHQpLEIuaW5pdE1vZGlmaWVyKHRoaXMsdGhpcy5fc2NoZW1lKX19LHtrZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIENhfX0se2tleTpcIl90b2FzdFwiLGdldDpmdW5jdGlvbigpe3JldHVybiBRLmZpbmRDaGlsZCh0aGlzLFwiLnRvYXN0XCIpfX1dLFt7a2V5OlwicmVnaXN0ZXJBbmltYXRvclwiLHZhbHVlOmZ1bmN0aW9uKHQsZSl7ZS5wcm90b3R5cGUgaW5zdGFuY2VvZiBiYXx8US50aHJvdygnXCJBbmltYXRvclwiIHBhcmFtIG11c3QgaW5oZXJpdCBPbnNUb2FzdEVsZW1lbnQuVG9hc3RBbmltYXRvcicpLEFhW3RdPWV9fSx7a2V5OlwiYW5pbWF0b3JzXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuIEFhfX0se2tleTpcIlRvYXN0QW5pbWF0b3JcIixnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYmF9fV0pLGV9KCk7Yy5Ub2FzdD1TYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdG9hc3RcIixTYSk7dmFyIFBhPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gcCh0aGlzLGUpLGsodGhpcywoZS5fX3Byb3RvX198fE9iamVjdC5nZXRQcm90b3R5cGVPZihlKSkuYXBwbHkodGhpcyxhcmd1bWVudHMpKX1yZXR1cm4gYihlLFJpKSxnKGUsW3trZXk6XCJfc2NoZW1lXCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue1wiXCI6XCJ0b29sYmFyLWJ1dHRvbi0tKlwifX19LHtrZXk6XCJfZGVmYXVsdENsYXNzTmFtZVwiLGdldDpmdW5jdGlvbigpe3JldHVyblwidG9vbGJhci1idXR0b25cIn19LHtrZXk6XCJfcmlwcGxlT3B0XCIsZ2V0OmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMsdm9pZCAwLHtjZW50ZXI6XCJcIixzaXplOlwiY29udGFpblwiLGJhY2tncm91bmQ6XCJ0cmFuc3BhcmVudFwifV19fV0pLGV9KCk7cmV0dXJuIGMuVG9vbGJhckJ1dHRvbj1QYSxjdXN0b21FbGVtZW50cy5kZWZpbmUoXCJvbnMtdG9vbGJhci1idXR0b25cIixQYSksZnVuY3Rpb24odCl7d2luZG93Ll9vbnNMb2FkZWQmJnQuX3V0aWwud2FybihcIk9uc2VuIFVJIGlzIGxvYWRlZCBtb3JlIHRoYW4gb25jZS5cIiksd2luZG93Ll9vbnNMb2FkZWQ9ITAsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXt0LmZhc3RDbGljaz16dC5hdHRhY2goZG9jdW1lbnQuYm9keSk7dmFyIGU9XCJ0b3VjaC1hY3Rpb25cImluIGRvY3VtZW50LmJvZHkuc3R5bGU7dC5wbGF0Zm9ybS5fcnVuT25BY3R1YWxQbGF0Zm9ybShmdW5jdGlvbigpe3QucGxhdGZvcm0uaXNBbmRyb2lkKCk/dC5mYXN0Q2xpY2suZGVzdHJveSgpOnQucGxhdGZvcm0uaXNJT1MoKSYmZSYmKHQucGxhdGZvcm0uaXNJT1NTYWZhcmkoKXx8dC5wbGF0Zm9ybS5pc1dLV2ViVmlldygpKSYmdC5mYXN0Q2xpY2suZGVzdHJveSgpfSl9LCExKSx0LnJlYWR5KGZ1bmN0aW9uKCl7dC5lbmFibGVEZXZpY2VCYWNrQnV0dG9uSGFuZGxlcigpLHQuX2RlZmF1bHREZXZpY2VCYWNrQnV0dG9uSGFuZGxlcj10Ll9pbnRlcm5hbC5kYmJEaXNwYXRjaGVyLmNyZWF0ZUhhbmRsZXIod2luZG93LmRvY3VtZW50LmJvZHksZnVuY3Rpb24oKXtPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChuYXZpZ2F0b3IsXCJhcHBcIik/bmF2aWdhdG9yLmFwcC5leGl0QXBwKCk6Y29uc29sZS53YXJuKFwiQ291bGQgbm90IGNsb3NlIHRoZSBhcHAuIElzICdjb3Jkb3ZhLmpzJyBpbmNsdWRlZD9cXG5FcnJvcjogJ3dpbmRvdy5uYXZpZ2F0b3IuYXBwJyBpcyB1bmRlZmluZWQuXCIpfSksZG9jdW1lbnQuYm9keS5fZ2VzdHVyZURldGVjdG9yPW5ldyB0Lkdlc3R1cmVEZXRlY3Rvcihkb2N1bWVudC5ib2R5LHtwYXNzaXZlOiEwfSksdC5wbGF0Zm9ybS5pc1dlYlZpZXcoKXx8ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLGZ1bmN0aW9uKGUpezI3PT09ZS5rZXlDb2RlJiZ0LmZpcmVEZXZpY2VCYWNrQnV0dG9uRXZlbnQoKX0pLHQuX3NldHVwTG9hZGluZ1BsYWNlSG9sZGVycygpfSksVmlld3BvcnQuc2V0dXAoKX0oUnQpLHdpbmRvdy5fc3VwZXJTZWNyZXRPbnM9UnQsUnR9KTsiLCIvKlxyXG4gTGVhZmxldCAxLjAuMywgYSBKUyBsaWJyYXJ5IGZvciBpbnRlcmFjdGl2ZSBtYXBzLiBodHRwOi8vbGVhZmxldGpzLmNvbVxyXG4gKGMpIDIwMTAtMjAxNiBWbGFkaW1pciBBZ2Fmb25raW4sIChjKSAyMDEwLTIwMTEgQ2xvdWRNYWRlXHJcbiovXHJcbiFmdW5jdGlvbih0LGUsaSl7ZnVuY3Rpb24gbigpe3ZhciBlPXQuTDtvLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdC5MPWUsdGhpc30sdC5MPW99dmFyIG89e3ZlcnNpb246XCIxLjAuM1wifTtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9bzpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShvKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgdCYmbigpLG8uVXRpbD17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlLGksbixvO2ZvcihpPTEsbj1hcmd1bWVudHMubGVuZ3RoO2k8bjtpKyspe289YXJndW1lbnRzW2ldO2ZvcihlIGluIG8pdFtlXT1vW2VdfXJldHVybiB0fSxjcmVhdGU6T2JqZWN0LmNyZWF0ZXx8ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5wcm90b3R5cGU9ZSxuZXcgdH19KCksYmluZDpmdW5jdGlvbih0LGUpe3ZhciBpPUFycmF5LnByb3RvdHlwZS5zbGljZTtpZih0LmJpbmQpcmV0dXJuIHQuYmluZC5hcHBseSh0LGkuY2FsbChhcmd1bWVudHMsMSkpO3ZhciBuPWkuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHQuYXBwbHkoZSxuLmxlbmd0aD9uLmNvbmNhdChpLmNhbGwoYXJndW1lbnRzKSk6YXJndW1lbnRzKX19LHN0YW1wOmZ1bmN0aW9uKHQpe3JldHVybiB0Ll9sZWFmbGV0X2lkPXQuX2xlYWZsZXRfaWR8fCsrby5VdGlsLmxhc3RJZCx0Ll9sZWFmbGV0X2lkfSxsYXN0SWQ6MCx0aHJvdHRsZTpmdW5jdGlvbih0LGUsaSl7dmFyIG4sbyxzLHI7cmV0dXJuIHI9ZnVuY3Rpb24oKXtuPSExLG8mJihzLmFwcGx5KGksbyksbz0hMSl9LHM9ZnVuY3Rpb24oKXtuP289YXJndW1lbnRzOih0LmFwcGx5KGksYXJndW1lbnRzKSxzZXRUaW1lb3V0KHIsZSksbj0hMCl9fSx3cmFwTnVtOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lWzFdLG89ZVswXSxzPW4tbztyZXR1cm4gdD09PW4mJmk/dDooKHQtbyklcytzKSVzK299LGZhbHNlRm46ZnVuY3Rpb24oKXtyZXR1cm4hMX0sZm9ybWF0TnVtOmZ1bmN0aW9uKHQsZSl7dmFyIGk9TWF0aC5wb3coMTAsZXx8NSk7cmV0dXJuIE1hdGgucm91bmQodCppKS9pfSx0cmltOmZ1bmN0aW9uKHQpe3JldHVybiB0LnRyaW0/dC50cmltKCk6dC5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLFwiXCIpfSxzcGxpdFdvcmRzOmZ1bmN0aW9uKHQpe3JldHVybiBvLlV0aWwudHJpbSh0KS5zcGxpdCgvXFxzKy8pfSxzZXRPcHRpb25zOmZ1bmN0aW9uKHQsZSl7dC5oYXNPd25Qcm9wZXJ0eShcIm9wdGlvbnNcIil8fCh0Lm9wdGlvbnM9dC5vcHRpb25zP28uVXRpbC5jcmVhdGUodC5vcHRpb25zKTp7fSk7Zm9yKHZhciBpIGluIGUpdC5vcHRpb25zW2ldPWVbaV07cmV0dXJuIHQub3B0aW9uc30sZ2V0UGFyYW1TdHJpbmc6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPVtdO2Zvcih2YXIgbyBpbiB0KW4ucHVzaChlbmNvZGVVUklDb21wb25lbnQoaT9vLnRvVXBwZXJDYXNlKCk6bykrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KHRbb10pKTtyZXR1cm4oZSYmZS5pbmRleE9mKFwiP1wiKSE9PS0xP1wiJlwiOlwiP1wiKStuLmpvaW4oXCImXCIpfSx0ZW1wbGF0ZTpmdW5jdGlvbih0LGUpe3JldHVybiB0LnJlcGxhY2Uoby5VdGlsLnRlbXBsYXRlUmUsZnVuY3Rpb24odCxuKXt2YXIgbz1lW25dO2lmKG89PT1pKXRocm93IG5ldyBFcnJvcihcIk5vIHZhbHVlIHByb3ZpZGVkIGZvciB2YXJpYWJsZSBcIit0KTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBvJiYobz1vKGUpKSxvfSl9LHRlbXBsYXRlUmU6L1xceyAqKFtcXHdfXFwtXSspICpcXH0vZyxpc0FycmF5OkFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKHQpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KX0saW5kZXhPZjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKWlmKHRbaV09PT1lKXJldHVybiBpO3JldHVybi0xfSxlbXB0eUltYWdlVXJsOlwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBRC9BQ3dBQUFBQUFRQUJBQUFDQURzPVwifSxmdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7cmV0dXJuIHRbXCJ3ZWJraXRcIitlXXx8dFtcIm1velwiK2VdfHx0W1wibXNcIitlXX1mdW5jdGlvbiBpKGUpe3ZhciBpPStuZXcgRGF0ZSxvPU1hdGgubWF4KDAsMTYtKGktbikpO3JldHVybiBuPWkrbyx0LnNldFRpbWVvdXQoZSxvKX12YXIgbj0wLHM9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGUoXCJSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIil8fGkscj10LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHxlKFwiQ2FuY2VsQW5pbWF0aW9uRnJhbWVcIil8fGUoXCJDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIil8fGZ1bmN0aW9uKGUpe3QuY2xlYXJUaW1lb3V0KGUpfTtvLlV0aWwucmVxdWVzdEFuaW1GcmFtZT1mdW5jdGlvbihlLG4scil7cmV0dXJuIHImJnM9PT1pP3ZvaWQgZS5jYWxsKG4pOnMuY2FsbCh0LG8uYmluZChlLG4pKX0sby5VdGlsLmNhbmNlbEFuaW1GcmFtZT1mdW5jdGlvbihlKXtlJiZyLmNhbGwodCxlKX19KCksby5leHRlbmQ9by5VdGlsLmV4dGVuZCxvLmJpbmQ9by5VdGlsLmJpbmQsby5zdGFtcD1vLlV0aWwuc3RhbXAsby5zZXRPcHRpb25zPW8uVXRpbC5zZXRPcHRpb25zLG8uQ2xhc3M9ZnVuY3Rpb24oKXt9LG8uQ2xhc3MuZXh0ZW5kPWZ1bmN0aW9uKHQpe3ZhciBlPWZ1bmN0aW9uKCl7dGhpcy5pbml0aWFsaXplJiZ0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuY2FsbEluaXRIb29rcygpfSxpPWUuX19zdXBlcl9fPXRoaXMucHJvdG90eXBlLG49by5VdGlsLmNyZWF0ZShpKTtuLmNvbnN0cnVjdG9yPWUsZS5wcm90b3R5cGU9bjtmb3IodmFyIHMgaW4gdGhpcyl0aGlzLmhhc093blByb3BlcnR5KHMpJiZcInByb3RvdHlwZVwiIT09cyYmKGVbc109dGhpc1tzXSk7cmV0dXJuIHQuc3RhdGljcyYmKG8uZXh0ZW5kKGUsdC5zdGF0aWNzKSxkZWxldGUgdC5zdGF0aWNzKSx0LmluY2x1ZGVzJiYoby5VdGlsLmV4dGVuZC5hcHBseShudWxsLFtuXS5jb25jYXQodC5pbmNsdWRlcykpLGRlbGV0ZSB0LmluY2x1ZGVzKSxuLm9wdGlvbnMmJih0Lm9wdGlvbnM9by5VdGlsLmV4dGVuZChvLlV0aWwuY3JlYXRlKG4ub3B0aW9ucyksdC5vcHRpb25zKSksby5leHRlbmQobix0KSxuLl9pbml0SG9va3M9W10sbi5jYWxsSW5pdEhvb2tzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2luaXRIb29rc0NhbGxlZCl7aS5jYWxsSW5pdEhvb2tzJiZpLmNhbGxJbml0SG9va3MuY2FsbCh0aGlzKSx0aGlzLl9pbml0SG9va3NDYWxsZWQ9ITA7Zm9yKHZhciB0PTAsZT1uLl9pbml0SG9va3MubGVuZ3RoO3Q8ZTt0Kyspbi5faW5pdEhvb2tzW3RdLmNhbGwodGhpcyl9fSxlfSxvLkNsYXNzLmluY2x1ZGU9ZnVuY3Rpb24odCl7cmV0dXJuIG8uZXh0ZW5kKHRoaXMucHJvdG90eXBlLHQpLHRoaXN9LG8uQ2xhc3MubWVyZ2VPcHRpb25zPWZ1bmN0aW9uKHQpe3JldHVybiBvLmV4dGVuZCh0aGlzLnByb3RvdHlwZS5vcHRpb25zLHQpLHRoaXN9LG8uQ2xhc3MuYWRkSW5pdEhvb2s9ZnVuY3Rpb24odCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGk9XCJmdW5jdGlvblwiPT10eXBlb2YgdD90OmZ1bmN0aW9uKCl7dGhpc1t0XS5hcHBseSh0aGlzLGUpfTtyZXR1cm4gdGhpcy5wcm90b3R5cGUuX2luaXRIb29rcz10aGlzLnByb3RvdHlwZS5faW5pdEhvb2tzfHxbXSx0aGlzLnByb3RvdHlwZS5faW5pdEhvb2tzLnB1c2goaSksdGhpc30sby5FdmVudGVkPW8uQ2xhc3MuZXh0ZW5kKHtvbjpmdW5jdGlvbih0LGUsaSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpdGhpcy5fb24obix0W25dLGUpO2Vsc2V7dD1vLlV0aWwuc3BsaXRXb3Jkcyh0KTtmb3IodmFyIHM9MCxyPXQubGVuZ3RoO3M8cjtzKyspdGhpcy5fb24odFtzXSxlLGkpfXJldHVybiB0aGlzfSxvZmY6ZnVuY3Rpb24odCxlLGkpe2lmKHQpaWYoXCJvYmplY3RcIj09dHlwZW9mIHQpZm9yKHZhciBuIGluIHQpdGhpcy5fb2ZmKG4sdFtuXSxlKTtlbHNle3Q9by5VdGlsLnNwbGl0V29yZHModCk7Zm9yKHZhciBzPTAscj10Lmxlbmd0aDtzPHI7cysrKXRoaXMuX29mZih0W3NdLGUsaSl9ZWxzZSBkZWxldGUgdGhpcy5fZXZlbnRzO3JldHVybiB0aGlzfSxfb246ZnVuY3Rpb24odCxlLG4pe3RoaXMuX2V2ZW50cz10aGlzLl9ldmVudHN8fHt9O3ZhciBvPXRoaXMuX2V2ZW50c1t0XTtvfHwobz1bXSx0aGlzLl9ldmVudHNbdF09byksbj09PXRoaXMmJihuPWkpO2Zvcih2YXIgcz17Zm46ZSxjdHg6bn0scj1vLGE9MCxoPXIubGVuZ3RoO2E8aDthKyspaWYoclthXS5mbj09PWUmJnJbYV0uY3R4PT09bilyZXR1cm47ci5wdXNoKHMpfSxfb2ZmOmZ1bmN0aW9uKHQsZSxuKXt2YXIgcyxyLGE7aWYodGhpcy5fZXZlbnRzJiYocz10aGlzLl9ldmVudHNbdF0pKXtpZighZSl7Zm9yKHI9MCxhPXMubGVuZ3RoO3I8YTtyKyspc1tyXS5mbj1vLlV0aWwuZmFsc2VGbjtyZXR1cm4gdm9pZCBkZWxldGUgdGhpcy5fZXZlbnRzW3RdfWlmKG49PT10aGlzJiYobj1pKSxzKWZvcihyPTAsYT1zLmxlbmd0aDtyPGE7cisrKXt2YXIgaD1zW3JdO2lmKGguY3R4PT09biYmaC5mbj09PWUpcmV0dXJuIGguZm49by5VdGlsLmZhbHNlRm4sdGhpcy5fZmlyaW5nQ291bnQmJih0aGlzLl9ldmVudHNbdF09cz1zLnNsaWNlKCkpLHZvaWQgcy5zcGxpY2UociwxKX19fSxmaXJlOmZ1bmN0aW9uKHQsZSxpKXtpZighdGhpcy5saXN0ZW5zKHQsaSkpcmV0dXJuIHRoaXM7dmFyIG49by5VdGlsLmV4dGVuZCh7fSxlLHt0eXBlOnQsdGFyZ2V0OnRoaXN9KTtpZih0aGlzLl9ldmVudHMpe3ZhciBzPXRoaXMuX2V2ZW50c1t0XTtpZihzKXt0aGlzLl9maXJpbmdDb3VudD10aGlzLl9maXJpbmdDb3VudCsxfHwxO2Zvcih2YXIgcj0wLGE9cy5sZW5ndGg7cjxhO3IrKyl7dmFyIGg9c1tyXTtoLmZuLmNhbGwoaC5jdHh8fHRoaXMsbil9dGhpcy5fZmlyaW5nQ291bnQtLX19cmV0dXJuIGkmJnRoaXMuX3Byb3BhZ2F0ZUV2ZW50KG4pLHRoaXN9LGxpc3RlbnM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9ldmVudHMmJnRoaXMuX2V2ZW50c1t0XTtpZihpJiZpLmxlbmd0aClyZXR1cm4hMDtpZihlKWZvcih2YXIgbiBpbiB0aGlzLl9ldmVudFBhcmVudHMpaWYodGhpcy5fZXZlbnRQYXJlbnRzW25dLmxpc3RlbnModCxlKSlyZXR1cm4hMDtyZXR1cm4hMX0sb25jZTpmdW5jdGlvbih0LGUsaSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIHQpe2Zvcih2YXIgbiBpbiB0KXRoaXMub25jZShuLHRbbl0sZSk7cmV0dXJuIHRoaXN9dmFyIHM9by5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5vZmYodCxlLGkpLm9mZih0LHMsaSl9LHRoaXMpO3JldHVybiB0aGlzLm9uKHQsZSxpKS5vbih0LHMsaSl9LGFkZEV2ZW50UGFyZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9ldmVudFBhcmVudHM9dGhpcy5fZXZlbnRQYXJlbnRzfHx7fSx0aGlzLl9ldmVudFBhcmVudHNbby5zdGFtcCh0KV09dCx0aGlzfSxyZW1vdmVFdmVudFBhcmVudDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZXZlbnRQYXJlbnRzJiZkZWxldGUgdGhpcy5fZXZlbnRQYXJlbnRzW28uc3RhbXAodCldLHRoaXN9LF9wcm9wYWdhdGVFdmVudDpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fZXZlbnRQYXJlbnRzKXRoaXMuX2V2ZW50UGFyZW50c1tlXS5maXJlKHQudHlwZSxvLmV4dGVuZCh7bGF5ZXI6dC50YXJnZXR9LHQpLCEwKX19KTt2YXIgcz1vLkV2ZW50ZWQucHJvdG90eXBlO3MuYWRkRXZlbnRMaXN0ZW5lcj1zLm9uLHMucmVtb3ZlRXZlbnRMaXN0ZW5lcj1zLmNsZWFyQWxsRXZlbnRMaXN0ZW5lcnM9cy5vZmYscy5hZGRPbmVUaW1lRXZlbnRMaXN0ZW5lcj1zLm9uY2Uscy5maXJlRXZlbnQ9cy5maXJlLHMuaGFzRXZlbnRMaXN0ZW5lcnM9cy5saXN0ZW5zLG8uTWl4aW49e0V2ZW50czpzfSxmdW5jdGlvbigpe3ZhciBpPW5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSxuPWUuZG9jdW1lbnRFbGVtZW50LHM9XCJBY3RpdmVYT2JqZWN0XCJpbiB0LHI9aS5pbmRleE9mKFwid2Via2l0XCIpIT09LTEsYT1pLmluZGV4T2YoXCJwaGFudG9tXCIpIT09LTEsaD1pLnNlYXJjaChcImFuZHJvaWQgWzIzXVwiKSE9PS0xLGw9aS5pbmRleE9mKFwiY2hyb21lXCIpIT09LTEsdT1pLmluZGV4T2YoXCJnZWNrb1wiKSE9PS0xJiYhciYmIXQub3BlcmEmJiFzLGM9MD09PW5hdmlnYXRvci5wbGF0Zm9ybS5pbmRleE9mKFwiV2luXCIpLGQ9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG9yaWVudGF0aW9ufHxpLmluZGV4T2YoXCJtb2JpbGVcIikhPT0tMSxfPSF0LlBvaW50ZXJFdmVudCYmdC5NU1BvaW50ZXJFdmVudCxtPXQuUG9pbnRlckV2ZW50fHxfLHA9cyYmXCJ0cmFuc2l0aW9uXCJpbiBuLnN0eWxlLGY9XCJXZWJLaXRDU1NNYXRyaXhcImluIHQmJlwibTExXCJpbiBuZXcgdC5XZWJLaXRDU1NNYXRyaXgmJiFoLGc9XCJNb3pQZXJzcGVjdGl2ZVwiaW4gbi5zdHlsZSx2PVwiT1RyYW5zaXRpb25cImluIG4uc3R5bGUseT0hdC5MX05PX1RPVUNIJiYobXx8XCJvbnRvdWNoc3RhcnRcImluIHR8fHQuRG9jdW1lbnRUb3VjaCYmZSBpbnN0YW5jZW9mIHQuRG9jdW1lbnRUb3VjaCk7by5Ccm93c2VyPXtpZTpzLGllbHQ5OnMmJiFlLmFkZEV2ZW50TGlzdGVuZXIsZWRnZTpcIm1zTGF1bmNoVXJpXCJpbiBuYXZpZ2F0b3ImJiEoXCJkb2N1bWVudE1vZGVcImluIGUpLHdlYmtpdDpyLGdlY2tvOnUsYW5kcm9pZDppLmluZGV4T2YoXCJhbmRyb2lkXCIpIT09LTEsYW5kcm9pZDIzOmgsY2hyb21lOmwsc2FmYXJpOiFsJiZpLmluZGV4T2YoXCJzYWZhcmlcIikhPT0tMSx3aW46YyxpZTNkOnAsd2Via2l0M2Q6ZixnZWNrbzNkOmcsb3BlcmExMjp2LGFueTNkOiF0LkxfRElTQUJMRV8zRCYmKHB8fGZ8fGcpJiYhdiYmIWEsbW9iaWxlOmQsbW9iaWxlV2Via2l0OmQmJnIsbW9iaWxlV2Via2l0M2Q6ZCYmZixtb2JpbGVPcGVyYTpkJiZ0Lm9wZXJhLG1vYmlsZUdlY2tvOmQmJnUsdG91Y2g6ISF5LG1zUG9pbnRlcjohIV8scG9pbnRlcjohIW0scmV0aW5hOih0LmRldmljZVBpeGVsUmF0aW98fHQuc2NyZWVuLmRldmljZVhEUEkvdC5zY3JlZW4ubG9naWNhbFhEUEkpPjF9fSgpLG8uUG9pbnQ9ZnVuY3Rpb24odCxlLGkpe3RoaXMueD1pP01hdGgucm91bmQodCk6dCx0aGlzLnk9aT9NYXRoLnJvdW5kKGUpOmV9LG8uUG9pbnQucHJvdG90eXBlPXtjbG9uZTpmdW5jdGlvbigpe3JldHVybiBuZXcgby5Qb2ludCh0aGlzLngsdGhpcy55KX0sYWRkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX2FkZChvLnBvaW50KHQpKX0sX2FkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Kz10LngsdGhpcy55Kz10LnksdGhpc30sc3VidHJhY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fc3VidHJhY3Qoby5wb2ludCh0KSl9LF9zdWJ0cmFjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54LT10LngsdGhpcy55LT10LnksdGhpc30sZGl2aWRlQnk6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fZGl2aWRlQnkodCl9LF9kaXZpZGVCeTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54Lz10LHRoaXMueS89dCx0aGlzfSxtdWx0aXBseUJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNsb25lKCkuX211bHRpcGx5QnkodCl9LF9tdWx0aXBseUJ5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqPXQsdGhpcy55Kj10LHRoaXN9LHNjYWxlQnk6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLlBvaW50KHRoaXMueCp0LngsdGhpcy55KnQueSl9LHVuc2NhbGVCeTpmdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uUG9pbnQodGhpcy54L3QueCx0aGlzLnkvdC55KX0scm91bmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3VuZCgpfSxfcm91bmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy54PU1hdGgucm91bmQodGhpcy54KSx0aGlzLnk9TWF0aC5yb3VuZCh0aGlzLnkpLHRoaXN9LGZsb29yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fZmxvb3IoKX0sX2Zsb29yOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueD1NYXRoLmZsb29yKHRoaXMueCksdGhpcy55PU1hdGguZmxvb3IodGhpcy55KSx0aGlzfSxjZWlsOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5fY2VpbCgpfSxfY2VpbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLng9TWF0aC5jZWlsKHRoaXMueCksdGhpcy55PU1hdGguY2VpbCh0aGlzLnkpLHRoaXN9LGRpc3RhbmNlVG86ZnVuY3Rpb24odCl7dD1vLnBvaW50KHQpO3ZhciBlPXQueC10aGlzLngsaT10LnktdGhpcy55O3JldHVybiBNYXRoLnNxcnQoZSplK2kqaSl9LGVxdWFsczpmdW5jdGlvbih0KXtyZXR1cm4gdD1vLnBvaW50KHQpLHQueD09PXRoaXMueCYmdC55PT09dGhpcy55fSxjb250YWluczpmdW5jdGlvbih0KXtyZXR1cm4gdD1vLnBvaW50KHQpLE1hdGguYWJzKHQueCk8PU1hdGguYWJzKHRoaXMueCkmJk1hdGguYWJzKHQueSk8PU1hdGguYWJzKHRoaXMueSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuXCJQb2ludChcIitvLlV0aWwuZm9ybWF0TnVtKHRoaXMueCkrXCIsIFwiK28uVXRpbC5mb3JtYXROdW0odGhpcy55KStcIilcIn19LG8ucG9pbnQ9ZnVuY3Rpb24odCxlLG4pe3JldHVybiB0IGluc3RhbmNlb2Ygby5Qb2ludD90Om8uVXRpbC5pc0FycmF5KHQpP25ldyBvLlBvaW50KHRbMF0sdFsxXSk6dD09PWl8fG51bGw9PT10P3Q6XCJvYmplY3RcIj09dHlwZW9mIHQmJlwieFwiaW4gdCYmXCJ5XCJpbiB0P25ldyBvLlBvaW50KHQueCx0LnkpOm5ldyBvLlBvaW50KHQsZSxuKX0sby5Cb3VuZHM9ZnVuY3Rpb24odCxlKXtpZih0KWZvcih2YXIgaT1lP1t0LGVdOnQsbj0wLG89aS5sZW5ndGg7bjxvO24rKyl0aGlzLmV4dGVuZChpW25dKX0sby5Cb3VuZHMucHJvdG90eXBlPXtleHRlbmQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9by5wb2ludCh0KSx0aGlzLm1pbnx8dGhpcy5tYXg/KHRoaXMubWluLng9TWF0aC5taW4odC54LHRoaXMubWluLngpLHRoaXMubWF4Lng9TWF0aC5tYXgodC54LHRoaXMubWF4LngpLHRoaXMubWluLnk9TWF0aC5taW4odC55LHRoaXMubWluLnkpLHRoaXMubWF4Lnk9TWF0aC5tYXgodC55LHRoaXMubWF4LnkpKToodGhpcy5taW49dC5jbG9uZSgpLHRoaXMubWF4PXQuY2xvbmUoKSksdGhpc30sZ2V0Q2VudGVyOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5Qb2ludCgodGhpcy5taW4ueCt0aGlzLm1heC54KS8yLCh0aGlzLm1pbi55K3RoaXMubWF4LnkpLzIsdCl9LGdldEJvdHRvbUxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uUG9pbnQodGhpcy5taW4ueCx0aGlzLm1heC55KX0sZ2V0VG9wUmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uUG9pbnQodGhpcy5tYXgueCx0aGlzLm1pbi55KX0sZ2V0U2l6ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1heC5zdWJ0cmFjdCh0aGlzLm1pbil9LGNvbnRhaW5zOmZ1bmN0aW9uKHQpe3ZhciBlLGk7cmV0dXJuIHQ9XCJudW1iZXJcIj09dHlwZW9mIHRbMF18fHQgaW5zdGFuY2VvZiBvLlBvaW50P28ucG9pbnQodCk6by5ib3VuZHModCksdCBpbnN0YW5jZW9mIG8uQm91bmRzPyhlPXQubWluLGk9dC5tYXgpOmU9aT10LGUueD49dGhpcy5taW4ueCYmaS54PD10aGlzLm1heC54JiZlLnk+PXRoaXMubWluLnkmJmkueTw9dGhpcy5tYXgueX0saW50ZXJzZWN0czpmdW5jdGlvbih0KXt0PW8uYm91bmRzKHQpO3ZhciBlPXRoaXMubWluLGk9dGhpcy5tYXgsbj10Lm1pbixzPXQubWF4LHI9cy54Pj1lLngmJm4ueDw9aS54LGE9cy55Pj1lLnkmJm4ueTw9aS55O3JldHVybiByJiZhfSxvdmVybGFwczpmdW5jdGlvbih0KXt0PW8uYm91bmRzKHQpO3ZhciBlPXRoaXMubWluLGk9dGhpcy5tYXgsbj10Lm1pbixzPXQubWF4LHI9cy54PmUueCYmbi54PGkueCxhPXMueT5lLnkmJm4ueTxpLnk7cmV0dXJuIHImJmF9LGlzVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4hKCF0aGlzLm1pbnx8IXRoaXMubWF4KX19LG8uYm91bmRzPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIXR8fHQgaW5zdGFuY2VvZiBvLkJvdW5kcz90Om5ldyBvLkJvdW5kcyh0LGUpfSxvLlRyYW5zZm9ybWF0aW9uPWZ1bmN0aW9uKHQsZSxpLG4pe3RoaXMuX2E9dCx0aGlzLl9iPWUsdGhpcy5fYz1pLHRoaXMuX2Q9bn0sby5UcmFuc2Zvcm1hdGlvbi5wcm90b3R5cGU9e3RyYW5zZm9ybTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl90cmFuc2Zvcm0odC5jbG9uZSgpLGUpfSxfdHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8MSx0Lng9ZSoodGhpcy5fYSp0LngrdGhpcy5fYiksdC55PWUqKHRoaXMuX2MqdC55K3RoaXMuX2QpLHR9LHVudHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9ZXx8MSxuZXcgby5Qb2ludCgodC54L2UtdGhpcy5fYikvdGhpcy5fYSwodC55L2UtdGhpcy5fZCkvdGhpcy5fYyl9fSxvLkRvbVV0aWw9e2dldDpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD9lLmdldEVsZW1lbnRCeUlkKHQpOnR9LGdldFN0eWxlOmZ1bmN0aW9uKHQsaSl7dmFyIG49dC5zdHlsZVtpXXx8dC5jdXJyZW50U3R5bGUmJnQuY3VycmVudFN0eWxlW2ldO2lmKCghbnx8XCJhdXRvXCI9PT1uKSYmZS5kZWZhdWx0Vmlldyl7dmFyIG89ZS5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHQsbnVsbCk7bj1vP29baV06bnVsbH1yZXR1cm5cImF1dG9cIj09PW4/bnVsbDpufSxjcmVhdGU6ZnVuY3Rpb24odCxpLG4pe3ZhciBvPWUuY3JlYXRlRWxlbWVudCh0KTtyZXR1cm4gby5jbGFzc05hbWU9aXx8XCJcIixuJiZuLmFwcGVuZENoaWxkKG8pLG99LHJlbW92ZTpmdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudE5vZGU7ZSYmZS5yZW1vdmVDaGlsZCh0KX0sZW1wdHk6ZnVuY3Rpb24odCl7Zm9yKDt0LmZpcnN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQodC5maXJzdENoaWxkKX0sdG9Gcm9udDpmdW5jdGlvbih0KXt0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodCl9LHRvQmFjazpmdW5jdGlvbih0KXt2YXIgZT10LnBhcmVudE5vZGU7ZS5pbnNlcnRCZWZvcmUodCxlLmZpcnN0Q2hpbGQpfSxoYXNDbGFzczpmdW5jdGlvbih0LGUpe2lmKHQuY2xhc3NMaXN0IT09aSlyZXR1cm4gdC5jbGFzc0xpc3QuY29udGFpbnMoZSk7dmFyIG49by5Eb21VdGlsLmdldENsYXNzKHQpO3JldHVybiBuLmxlbmd0aD4wJiZuZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrZStcIihcXFxcc3wkKVwiKS50ZXN0KG4pfSxhZGRDbGFzczpmdW5jdGlvbih0LGUpe2lmKHQuY2xhc3NMaXN0IT09aSlmb3IodmFyIG49by5VdGlsLnNwbGl0V29yZHMoZSkscz0wLHI9bi5sZW5ndGg7czxyO3MrKyl0LmNsYXNzTGlzdC5hZGQobltzXSk7ZWxzZSBpZighby5Eb21VdGlsLmhhc0NsYXNzKHQsZSkpe3ZhciBhPW8uRG9tVXRpbC5nZXRDbGFzcyh0KTtvLkRvbVV0aWwuc2V0Q2xhc3ModCwoYT9hK1wiIFwiOlwiXCIpK2UpfX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24odCxlKXt0LmNsYXNzTGlzdCE9PWk/dC5jbGFzc0xpc3QucmVtb3ZlKGUpOm8uRG9tVXRpbC5zZXRDbGFzcyh0LG8uVXRpbC50cmltKChcIiBcIitvLkRvbVV0aWwuZ2V0Q2xhc3ModCkrXCIgXCIpLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIikpKX0sc2V0Q2xhc3M6ZnVuY3Rpb24odCxlKXt0LmNsYXNzTmFtZS5iYXNlVmFsPT09aT90LmNsYXNzTmFtZT1lOnQuY2xhc3NOYW1lLmJhc2VWYWw9ZX0sZ2V0Q2xhc3M6ZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xhc3NOYW1lLmJhc2VWYWw9PT1pP3QuY2xhc3NOYW1lOnQuY2xhc3NOYW1lLmJhc2VWYWx9LHNldE9wYWNpdHk6ZnVuY3Rpb24odCxlKXtcIm9wYWNpdHlcImluIHQuc3R5bGU/dC5zdHlsZS5vcGFjaXR5PWU6XCJmaWx0ZXJcImluIHQuc3R5bGUmJm8uRG9tVXRpbC5fc2V0T3BhY2l0eUlFKHQsZSl9LF9zZXRPcGFjaXR5SUU6ZnVuY3Rpb24odCxlKXt2YXIgaT0hMSxuPVwiRFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuQWxwaGFcIjt0cnl7aT10LmZpbHRlcnMuaXRlbShuKX1jYXRjaCh0KXtpZigxPT09ZSlyZXR1cm59ZT1NYXRoLnJvdW5kKDEwMCplKSxpPyhpLkVuYWJsZWQ9MTAwIT09ZSxpLk9wYWNpdHk9ZSk6dC5zdHlsZS5maWx0ZXIrPVwiIHByb2dpZDpcIituK1wiKG9wYWNpdHk9XCIrZStcIilcIn0sdGVzdFByb3A6ZnVuY3Rpb24odCl7Zm9yKHZhciBpPWUuZG9jdW1lbnRFbGVtZW50LnN0eWxlLG49MDtuPHQubGVuZ3RoO24rKylpZih0W25daW4gaSlyZXR1cm4gdFtuXTtyZXR1cm4hMX0sc2V0VHJhbnNmb3JtOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj1lfHxuZXcgby5Qb2ludCgwLDApO3Quc3R5bGVbby5Eb21VdGlsLlRSQU5TRk9STV09KG8uQnJvd3Nlci5pZTNkP1widHJhbnNsYXRlKFwiK24ueCtcInB4LFwiK24ueStcInB4KVwiOlwidHJhbnNsYXRlM2QoXCIrbi54K1wicHgsXCIrbi55K1wicHgsMClcIikrKGk/XCIgc2NhbGUoXCIraStcIilcIjpcIlwiKX0sc2V0UG9zaXRpb246ZnVuY3Rpb24odCxlKXt0Ll9sZWFmbGV0X3Bvcz1lLG8uQnJvd3Nlci5hbnkzZD9vLkRvbVV0aWwuc2V0VHJhbnNmb3JtKHQsZSk6KHQuc3R5bGUubGVmdD1lLngrXCJweFwiLHQuc3R5bGUudG9wPWUueStcInB4XCIpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdC5fbGVhZmxldF9wb3N8fG5ldyBvLlBvaW50KDAsMCl9fSxmdW5jdGlvbigpe28uRG9tVXRpbC5UUkFOU0ZPUk09by5Eb21VdGlsLnRlc3RQcm9wKFtcInRyYW5zZm9ybVwiLFwiV2Via2l0VHJhbnNmb3JtXCIsXCJPVHJhbnNmb3JtXCIsXCJNb3pUcmFuc2Zvcm1cIixcIm1zVHJhbnNmb3JtXCJdKTt2YXIgaT1vLkRvbVV0aWwuVFJBTlNJVElPTj1vLkRvbVV0aWwudGVzdFByb3AoW1wid2Via2l0VHJhbnNpdGlvblwiLFwidHJhbnNpdGlvblwiLFwiT1RyYW5zaXRpb25cIixcIk1velRyYW5zaXRpb25cIixcIm1zVHJhbnNpdGlvblwiXSk7aWYoby5Eb21VdGlsLlRSQU5TSVRJT05fRU5EPVwid2Via2l0VHJhbnNpdGlvblwiPT09aXx8XCJPVHJhbnNpdGlvblwiPT09aT9pK1wiRW5kXCI6XCJ0cmFuc2l0aW9uZW5kXCIsXCJvbnNlbGVjdHN0YXJ0XCJpbiBlKW8uRG9tVXRpbC5kaXNhYmxlVGV4dFNlbGVjdGlvbj1mdW5jdGlvbigpe28uRG9tRXZlbnQub24odCxcInNlbGVjdHN0YXJ0XCIsby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCl9LG8uRG9tVXRpbC5lbmFibGVUZXh0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7by5Eb21FdmVudC5vZmYodCxcInNlbGVjdHN0YXJ0XCIsby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCl9O2Vsc2V7dmFyIG49by5Eb21VdGlsLnRlc3RQcm9wKFtcInVzZXJTZWxlY3RcIixcIldlYmtpdFVzZXJTZWxlY3RcIixcIk9Vc2VyU2VsZWN0XCIsXCJNb3pVc2VyU2VsZWN0XCIsXCJtc1VzZXJTZWxlY3RcIl0pO28uRG9tVXRpbC5kaXNhYmxlVGV4dFNlbGVjdGlvbj1mdW5jdGlvbigpe2lmKG4pe3ZhciB0PWUuZG9jdW1lbnRFbGVtZW50LnN0eWxlO3RoaXMuX3VzZXJTZWxlY3Q9dFtuXSx0W25dPVwibm9uZVwifX0sby5Eb21VdGlsLmVuYWJsZVRleHRTZWxlY3Rpb249ZnVuY3Rpb24oKXtuJiYoZS5kb2N1bWVudEVsZW1lbnQuc3R5bGVbbl09dGhpcy5fdXNlclNlbGVjdCxkZWxldGUgdGhpcy5fdXNlclNlbGVjdCl9fW8uRG9tVXRpbC5kaXNhYmxlSW1hZ2VEcmFnPWZ1bmN0aW9uKCl7by5Eb21FdmVudC5vbih0LFwiZHJhZ3N0YXJ0XCIsby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCl9LG8uRG9tVXRpbC5lbmFibGVJbWFnZURyYWc9ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9mZih0LFwiZHJhZ3N0YXJ0XCIsby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCl9LG8uRG9tVXRpbC5wcmV2ZW50T3V0bGluZT1mdW5jdGlvbihlKXtmb3IoO2UudGFiSW5kZXg9PT0tMTspZT1lLnBhcmVudE5vZGU7ZSYmZS5zdHlsZSYmKG8uRG9tVXRpbC5yZXN0b3JlT3V0bGluZSgpLHRoaXMuX291dGxpbmVFbGVtZW50PWUsdGhpcy5fb3V0bGluZVN0eWxlPWUuc3R5bGUub3V0bGluZSxlLnN0eWxlLm91dGxpbmU9XCJub25lXCIsby5Eb21FdmVudC5vbih0LFwia2V5ZG93blwiLG8uRG9tVXRpbC5yZXN0b3JlT3V0bGluZSx0aGlzKSl9LG8uRG9tVXRpbC5yZXN0b3JlT3V0bGluZT1mdW5jdGlvbigpe3RoaXMuX291dGxpbmVFbGVtZW50JiYodGhpcy5fb3V0bGluZUVsZW1lbnQuc3R5bGUub3V0bGluZT10aGlzLl9vdXRsaW5lU3R5bGUsZGVsZXRlIHRoaXMuX291dGxpbmVFbGVtZW50LGRlbGV0ZSB0aGlzLl9vdXRsaW5lU3R5bGUsby5Eb21FdmVudC5vZmYodCxcImtleWRvd25cIixvLkRvbVV0aWwucmVzdG9yZU91dGxpbmUsdGhpcykpfX0oKSxvLkxhdExuZz1mdW5jdGlvbih0LGUsbil7aWYoaXNOYU4odCl8fGlzTmFOKGUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgTGF0TG5nIG9iamVjdDogKFwiK3QrXCIsIFwiK2UrXCIpXCIpO3RoaXMubGF0PSt0LHRoaXMubG5nPStlLG4hPT1pJiYodGhpcy5hbHQ9K24pfSxvLkxhdExuZy5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbih0LGUpe2lmKCF0KXJldHVybiExO3Q9by5sYXRMbmcodCk7dmFyIG49TWF0aC5tYXgoTWF0aC5hYnModGhpcy5sYXQtdC5sYXQpLE1hdGguYWJzKHRoaXMubG5nLXQubG5nKSk7cmV0dXJuIG48PShlPT09aT8xZS05OmUpfSx0b1N0cmluZzpmdW5jdGlvbih0KXtyZXR1cm5cIkxhdExuZyhcIitvLlV0aWwuZm9ybWF0TnVtKHRoaXMubGF0LHQpK1wiLCBcIitvLlV0aWwuZm9ybWF0TnVtKHRoaXMubG5nLHQpK1wiKVwifSxkaXN0YW5jZVRvOmZ1bmN0aW9uKHQpe3JldHVybiBvLkNSUy5FYXJ0aC5kaXN0YW5jZSh0aGlzLG8ubGF0TG5nKHQpKX0sd3JhcDpmdW5jdGlvbigpe3JldHVybiBvLkNSUy5FYXJ0aC53cmFwTGF0TG5nKHRoaXMpfSx0b0JvdW5kczpmdW5jdGlvbih0KXt2YXIgZT0xODAqdC80MDA3NTAxNyxpPWUvTWF0aC5jb3MoTWF0aC5QSS8xODAqdGhpcy5sYXQpO3JldHVybiBvLmxhdExuZ0JvdW5kcyhbdGhpcy5sYXQtZSx0aGlzLmxuZy1pXSxbdGhpcy5sYXQrZSx0aGlzLmxuZytpXSl9LGNsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLkxhdExuZyh0aGlzLmxhdCx0aGlzLmxuZyx0aGlzLmFsdCl9fSxvLmxhdExuZz1mdW5jdGlvbih0LGUsbil7cmV0dXJuIHQgaW5zdGFuY2VvZiBvLkxhdExuZz90Om8uVXRpbC5pc0FycmF5KHQpJiZcIm9iamVjdFwiIT10eXBlb2YgdFswXT8zPT09dC5sZW5ndGg/bmV3IG8uTGF0TG5nKHRbMF0sdFsxXSx0WzJdKToyPT09dC5sZW5ndGg/bmV3IG8uTGF0TG5nKHRbMF0sdFsxXSk6bnVsbDp0PT09aXx8bnVsbD09PXQ/dDpcIm9iamVjdFwiPT10eXBlb2YgdCYmXCJsYXRcImluIHQ/bmV3IG8uTGF0TG5nKHQubGF0LFwibG5nXCJpbiB0P3QubG5nOnQubG9uLHQuYWx0KTplPT09aT9udWxsOm5ldyBvLkxhdExuZyh0LGUsbil9LG8uTGF0TG5nQm91bmRzPWZ1bmN0aW9uKHQsZSl7aWYodClmb3IodmFyIGk9ZT9bdCxlXTp0LG49MCxvPWkubGVuZ3RoO248bztuKyspdGhpcy5leHRlbmQoaVtuXSl9LG8uTGF0TG5nQm91bmRzLnByb3RvdHlwZT17ZXh0ZW5kOmZ1bmN0aW9uKHQpe3ZhciBlLGksbj10aGlzLl9zb3V0aFdlc3Qscz10aGlzLl9ub3J0aEVhc3Q7aWYodCBpbnN0YW5jZW9mIG8uTGF0TG5nKWU9dCxpPXQ7ZWxzZXtpZighKHQgaW5zdGFuY2VvZiBvLkxhdExuZ0JvdW5kcykpcmV0dXJuIHQ/dGhpcy5leHRlbmQoby5sYXRMbmcodCl8fG8ubGF0TG5nQm91bmRzKHQpKTp0aGlzO2lmKGU9dC5fc291dGhXZXN0LGk9dC5fbm9ydGhFYXN0LCFlfHwhaSlyZXR1cm4gdGhpc31yZXR1cm4gbnx8cz8obi5sYXQ9TWF0aC5taW4oZS5sYXQsbi5sYXQpLG4ubG5nPU1hdGgubWluKGUubG5nLG4ubG5nKSxzLmxhdD1NYXRoLm1heChpLmxhdCxzLmxhdCkscy5sbmc9TWF0aC5tYXgoaS5sbmcscy5sbmcpKToodGhpcy5fc291dGhXZXN0PW5ldyBvLkxhdExuZyhlLmxhdCxlLmxuZyksdGhpcy5fbm9ydGhFYXN0PW5ldyBvLkxhdExuZyhpLmxhdCxpLmxuZykpLHRoaXN9LHBhZDpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9zb3V0aFdlc3QsaT10aGlzLl9ub3J0aEVhc3Qsbj1NYXRoLmFicyhlLmxhdC1pLmxhdCkqdCxzPU1hdGguYWJzKGUubG5nLWkubG5nKSp0O3JldHVybiBuZXcgby5MYXRMbmdCb3VuZHMobmV3IG8uTGF0TG5nKGUubGF0LW4sZS5sbmctcyksbmV3IG8uTGF0TG5nKGkubGF0K24saS5sbmcrcykpfSxnZXRDZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG8uTGF0TG5nKCh0aGlzLl9zb3V0aFdlc3QubGF0K3RoaXMuX25vcnRoRWFzdC5sYXQpLzIsKHRoaXMuX3NvdXRoV2VzdC5sbmcrdGhpcy5fbm9ydGhFYXN0LmxuZykvMil9LGdldFNvdXRoV2VzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zb3V0aFdlc3R9LGdldE5vcnRoRWFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3J0aEVhc3R9LGdldE5vcnRoV2VzdDpmdW5jdGlvbigpe3JldHVybiBuZXcgby5MYXRMbmcodGhpcy5nZXROb3J0aCgpLHRoaXMuZ2V0V2VzdCgpKX0sZ2V0U291dGhFYXN0OmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBvLkxhdExuZyh0aGlzLmdldFNvdXRoKCksdGhpcy5nZXRFYXN0KCkpfSxnZXRXZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXRoV2VzdC5sbmd9LGdldFNvdXRoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NvdXRoV2VzdC5sYXR9LGdldEVhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9ydGhFYXN0LmxuZ30sZ2V0Tm9ydGg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9ydGhFYXN0LmxhdH0sY29udGFpbnM6ZnVuY3Rpb24odCl7dD1cIm51bWJlclwiPT10eXBlb2YgdFswXXx8dCBpbnN0YW5jZW9mIG8uTGF0TG5nfHxcImxhdFwiaW4gdD9vLmxhdExuZyh0KTpvLmxhdExuZ0JvdW5kcyh0KTt2YXIgZSxpLG49dGhpcy5fc291dGhXZXN0LHM9dGhpcy5fbm9ydGhFYXN0O3JldHVybiB0IGluc3RhbmNlb2Ygby5MYXRMbmdCb3VuZHM/KGU9dC5nZXRTb3V0aFdlc3QoKSxpPXQuZ2V0Tm9ydGhFYXN0KCkpOmU9aT10LGUubGF0Pj1uLmxhdCYmaS5sYXQ8PXMubGF0JiZlLmxuZz49bi5sbmcmJmkubG5nPD1zLmxuZ30saW50ZXJzZWN0czpmdW5jdGlvbih0KXt0PW8ubGF0TG5nQm91bmRzKHQpO3ZhciBlPXRoaXMuX3NvdXRoV2VzdCxpPXRoaXMuX25vcnRoRWFzdCxuPXQuZ2V0U291dGhXZXN0KCkscz10LmdldE5vcnRoRWFzdCgpLHI9cy5sYXQ+PWUubGF0JiZuLmxhdDw9aS5sYXQsYT1zLmxuZz49ZS5sbmcmJm4ubG5nPD1pLmxuZztyZXR1cm4gciYmYX0sb3ZlcmxhcHM6ZnVuY3Rpb24odCl7dD1vLmxhdExuZ0JvdW5kcyh0KTt2YXIgZT10aGlzLl9zb3V0aFdlc3QsaT10aGlzLl9ub3J0aEVhc3Qsbj10LmdldFNvdXRoV2VzdCgpLHM9dC5nZXROb3J0aEVhc3QoKSxyPXMubGF0PmUubGF0JiZuLmxhdDxpLmxhdCxhPXMubG5nPmUubG5nJiZuLmxuZzxpLmxuZztyZXR1cm4gciYmYX0sdG9CQm94U3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZ2V0V2VzdCgpLHRoaXMuZ2V0U291dGgoKSx0aGlzLmdldEVhc3QoKSx0aGlzLmdldE5vcnRoKCldLmpvaW4oXCIsXCIpfSxlcXVhbHM6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiYodD1vLmxhdExuZ0JvdW5kcyh0KSx0aGlzLl9zb3V0aFdlc3QuZXF1YWxzKHQuZ2V0U291dGhXZXN0KCkpJiZ0aGlzLl9ub3J0aEVhc3QuZXF1YWxzKHQuZ2V0Tm9ydGhFYXN0KCkpKX0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiEoIXRoaXMuX3NvdXRoV2VzdHx8IXRoaXMuX25vcnRoRWFzdCl9fSxvLmxhdExuZ0JvdW5kcz1mdW5jdGlvbih0LGUpe3JldHVybiB0IGluc3RhbmNlb2Ygby5MYXRMbmdCb3VuZHM/dDpuZXcgby5MYXRMbmdCb3VuZHModCxlKX0sby5Qcm9qZWN0aW9uPXt9LG8uUHJvamVjdGlvbi5Mb25MYXQ9e3Byb2plY3Q6ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLlBvaW50KHQubG5nLHQubGF0KX0sdW5wcm9qZWN0OmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5MYXRMbmcodC55LHQueCl9LGJvdW5kczpvLmJvdW5kcyhbLTE4MCwtOTBdLFsxODAsOTBdKX0sby5Qcm9qZWN0aW9uLlNwaGVyaWNhbE1lcmNhdG9yPXtSOjYzNzgxMzcsTUFYX0xBVElUVURFOjg1LjA1MTEyODc3OTgscHJvamVjdDpmdW5jdGlvbih0KXt2YXIgZT1NYXRoLlBJLzE4MCxpPXRoaXMuTUFYX0xBVElUVURFLG49TWF0aC5tYXgoTWF0aC5taW4oaSx0LmxhdCksLWkpLHM9TWF0aC5zaW4obiplKTtyZXR1cm4gbmV3IG8uUG9pbnQodGhpcy5SKnQubG5nKmUsdGhpcy5SKk1hdGgubG9nKCgxK3MpLygxLXMpKS8yKX0sdW5wcm9qZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPTE4MC9NYXRoLlBJO3JldHVybiBuZXcgby5MYXRMbmcoKDIqTWF0aC5hdGFuKE1hdGguZXhwKHQueS90aGlzLlIpKS1NYXRoLlBJLzIpKmUsdC54KmUvdGhpcy5SKX0sYm91bmRzOmZ1bmN0aW9uKCl7dmFyIHQ9NjM3ODEzNypNYXRoLlBJO3JldHVybiBvLmJvdW5kcyhbLXQsLXRdLFt0LHRdKX0oKX0sby5DUlM9e2xhdExuZ1RvUG9pbnQ6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLnByb2plY3Rpb24ucHJvamVjdCh0KSxuPXRoaXMuc2NhbGUoZSk7cmV0dXJuIHRoaXMudHJhbnNmb3JtYXRpb24uX3RyYW5zZm9ybShpLG4pfSxwb2ludFRvTGF0TG5nOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5zY2FsZShlKSxuPXRoaXMudHJhbnNmb3JtYXRpb24udW50cmFuc2Zvcm0odCxpKTtyZXR1cm4gdGhpcy5wcm9qZWN0aW9uLnVucHJvamVjdChuKX0scHJvamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9qZWN0aW9uLnByb2plY3QodCl9LHVucHJvamVjdDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wcm9qZWN0aW9uLnVucHJvamVjdCh0KX0sc2NhbGU6ZnVuY3Rpb24odCl7cmV0dXJuIDI1NipNYXRoLnBvdygyLHQpfSx6b29tOmZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLmxvZyh0LzI1NikvTWF0aC5MTjJ9LGdldFByb2plY3RlZEJvdW5kczpmdW5jdGlvbih0KXtpZih0aGlzLmluZmluaXRlKXJldHVybiBudWxsO3ZhciBlPXRoaXMucHJvamVjdGlvbi5ib3VuZHMsaT10aGlzLnNjYWxlKHQpLG49dGhpcy50cmFuc2Zvcm1hdGlvbi50cmFuc2Zvcm0oZS5taW4saSkscz10aGlzLnRyYW5zZm9ybWF0aW9uLnRyYW5zZm9ybShlLm1heCxpKTtyZXR1cm4gby5ib3VuZHMobixzKX0saW5maW5pdGU6ITEsd3JhcExhdExuZzpmdW5jdGlvbih0KXt2YXIgZT10aGlzLndyYXBMbmc/by5VdGlsLndyYXBOdW0odC5sbmcsdGhpcy53cmFwTG5nLCEwKTp0LmxuZyxpPXRoaXMud3JhcExhdD9vLlV0aWwud3JhcE51bSh0LmxhdCx0aGlzLndyYXBMYXQsITApOnQubGF0LG49dC5hbHQ7cmV0dXJuIG8ubGF0TG5nKGksZSxuKX0sd3JhcExhdExuZ0JvdW5kczpmdW5jdGlvbih0KXt2YXIgZT10LmdldENlbnRlcigpLGk9dGhpcy53cmFwTGF0TG5nKGUpLG49ZS5sYXQtaS5sYXQscz1lLmxuZy1pLmxuZztpZigwPT09biYmMD09PXMpcmV0dXJuIHQ7dmFyIHI9dC5nZXRTb3V0aFdlc3QoKSxhPXQuZ2V0Tm9ydGhFYXN0KCksaD1vLmxhdExuZyh7bGF0OnIubGF0LW4sbG5nOnIubG5nLXN9KSxsPW8ubGF0TG5nKHtsYXQ6YS5sYXQtbixsbmc6YS5sbmctc30pO3JldHVybiBuZXcgby5MYXRMbmdCb3VuZHMoaCxsKX19LG8uQ1JTLlNpbXBsZT1vLmV4dGVuZCh7fSxvLkNSUyx7cHJvamVjdGlvbjpvLlByb2plY3Rpb24uTG9uTGF0LHRyYW5zZm9ybWF0aW9uOm5ldyBvLlRyYW5zZm9ybWF0aW9uKDEsMCwtMSwwKSxzY2FsZTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5wb3coMix0KX0sem9vbTpmdW5jdGlvbih0KXtyZXR1cm4gTWF0aC5sb2codCkvTWF0aC5MTjJ9LGRpc3RhbmNlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5sbmctdC5sbmcsbj1lLmxhdC10LmxhdDtyZXR1cm4gTWF0aC5zcXJ0KGkqaStuKm4pfSxpbmZpbml0ZTohMH0pLG8uQ1JTLkVhcnRoPW8uZXh0ZW5kKHt9LG8uQ1JTLHt3cmFwTG5nOlstMTgwLDE4MF0sUjo2MzcxZTMsZGlzdGFuY2U6ZnVuY3Rpb24odCxlKXt2YXIgaT1NYXRoLlBJLzE4MCxuPXQubGF0Kmksbz1lLmxhdCppLHM9TWF0aC5zaW4obikqTWF0aC5zaW4obykrTWF0aC5jb3MobikqTWF0aC5jb3MobykqTWF0aC5jb3MoKGUubG5nLXQubG5nKSppKTtyZXR1cm4gdGhpcy5SKk1hdGguYWNvcyhNYXRoLm1pbihzLDEpKX19KSxvLkNSUy5FUFNHMzg1Nz1vLmV4dGVuZCh7fSxvLkNSUy5FYXJ0aCx7Y29kZTpcIkVQU0c6Mzg1N1wiLHByb2plY3Rpb246by5Qcm9qZWN0aW9uLlNwaGVyaWNhbE1lcmNhdG9yLHRyYW5zZm9ybWF0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9LjUvKE1hdGguUEkqby5Qcm9qZWN0aW9uLlNwaGVyaWNhbE1lcmNhdG9yLlIpO3JldHVybiBuZXcgby5UcmFuc2Zvcm1hdGlvbih0LC41LC10LC41KX0oKX0pLG8uQ1JTLkVQU0c5MDA5MTM9by5leHRlbmQoe30sby5DUlMuRVBTRzM4NTcse2NvZGU6XCJFUFNHOjkwMDkxM1wifSksby5DUlMuRVBTRzQzMjY9by5leHRlbmQoe30sby5DUlMuRWFydGgse2NvZGU6XCJFUFNHOjQzMjZcIixwcm9qZWN0aW9uOm8uUHJvamVjdGlvbi5Mb25MYXQsdHJhbnNmb3JtYXRpb246bmV3IG8uVHJhbnNmb3JtYXRpb24oMS8xODAsMSwtMS8xODAsLjUpfSksby5NYXA9by5FdmVudGVkLmV4dGVuZCh7b3B0aW9uczp7Y3JzOm8uQ1JTLkVQU0czODU3LGNlbnRlcjppLHpvb206aSxtaW5ab29tOmksbWF4Wm9vbTppLGxheWVyczpbXSxtYXhCb3VuZHM6aSxyZW5kZXJlcjppLHpvb21BbmltYXRpb246ITAsem9vbUFuaW1hdGlvblRocmVzaG9sZDo0LGZhZGVBbmltYXRpb246ITAsbWFya2VyWm9vbUFuaW1hdGlvbjohMCx0cmFuc2Zvcm0zRExpbWl0OjgzODg2MDgsem9vbVNuYXA6MSx6b29tRGVsdGE6MSx0cmFja1Jlc2l6ZTohMH0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe2U9by5zZXRPcHRpb25zKHRoaXMsZSksdGhpcy5faW5pdENvbnRhaW5lcih0KSx0aGlzLl9pbml0TGF5b3V0KCksdGhpcy5fb25SZXNpemU9by5iaW5kKHRoaXMuX29uUmVzaXplLHRoaXMpLHRoaXMuX2luaXRFdmVudHMoKSxlLm1heEJvdW5kcyYmdGhpcy5zZXRNYXhCb3VuZHMoZS5tYXhCb3VuZHMpLGUuem9vbSE9PWkmJih0aGlzLl96b29tPXRoaXMuX2xpbWl0Wm9vbShlLnpvb20pKSxlLmNlbnRlciYmZS56b29tIT09aSYmdGhpcy5zZXRWaWV3KG8ubGF0TG5nKGUuY2VudGVyKSxlLnpvb20se3Jlc2V0OiEwfSksdGhpcy5faGFuZGxlcnM9W10sdGhpcy5fbGF5ZXJzPXt9LHRoaXMuX3pvb21Cb3VuZExheWVycz17fSx0aGlzLl9zaXplQ2hhbmdlZD0hMCx0aGlzLmNhbGxJbml0SG9va3MoKSx0aGlzLl96b29tQW5pbWF0ZWQ9by5Eb21VdGlsLlRSQU5TSVRJT04mJm8uQnJvd3Nlci5hbnkzZCYmIW8uQnJvd3Nlci5tb2JpbGVPcGVyYSYmdGhpcy5vcHRpb25zLnpvb21BbmltYXRpb24sdGhpcy5fem9vbUFuaW1hdGVkJiYodGhpcy5fY3JlYXRlQW5pbVByb3h5KCksby5Eb21FdmVudC5vbih0aGlzLl9wcm94eSxvLkRvbVV0aWwuVFJBTlNJVElPTl9FTkQsdGhpcy5fY2F0Y2hUcmFuc2l0aW9uRW5kLHRoaXMpKSx0aGlzLl9hZGRMYXllcnModGhpcy5vcHRpb25zLmxheWVycyl9LHNldFZpZXc6ZnVuY3Rpb24odCxlLG4pe2lmKGU9ZT09PWk/dGhpcy5fem9vbTp0aGlzLl9saW1pdFpvb20oZSksdD10aGlzLl9saW1pdENlbnRlcihvLmxhdExuZyh0KSxlLHRoaXMub3B0aW9ucy5tYXhCb3VuZHMpLG49bnx8e30sdGhpcy5fc3RvcCgpLHRoaXMuX2xvYWRlZCYmIW4ucmVzZXQmJm4hPT0hMCl7bi5hbmltYXRlIT09aSYmKG4uem9vbT1vLmV4dGVuZCh7YW5pbWF0ZTpuLmFuaW1hdGV9LG4uem9vbSksbi5wYW49by5leHRlbmQoe2FuaW1hdGU6bi5hbmltYXRlLGR1cmF0aW9uOm4uZHVyYXRpb259LG4ucGFuKSk7dmFyIHM9dGhpcy5fem9vbSE9PWU/dGhpcy5fdHJ5QW5pbWF0ZWRab29tJiZ0aGlzLl90cnlBbmltYXRlZFpvb20odCxlLG4uem9vbSk6dGhpcy5fdHJ5QW5pbWF0ZWRQYW4odCxuLnBhbik7aWYocylyZXR1cm4gY2xlYXJUaW1lb3V0KHRoaXMuX3NpemVUaW1lciksdGhpc31yZXR1cm4gdGhpcy5fcmVzZXRWaWV3KHQsZSksdGhpc30sc2V0Wm9vbTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9sb2FkZWQ/dGhpcy5zZXRWaWV3KHRoaXMuZ2V0Q2VudGVyKCksdCx7em9vbTplfSk6KHRoaXMuX3pvb209dCx0aGlzKX0sem9vbUluOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ9dHx8KG8uQnJvd3Nlci5hbnkzZD90aGlzLm9wdGlvbnMuem9vbURlbHRhOjEpLHRoaXMuc2V0Wm9vbSh0aGlzLl96b29tK3QsZSl9LHpvb21PdXQ6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD10fHwoby5Ccm93c2VyLmFueTNkP3RoaXMub3B0aW9ucy56b29tRGVsdGE6MSksdGhpcy5zZXRab29tKHRoaXMuX3pvb20tdCxlKX0sc2V0Wm9vbUFyb3VuZDpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5nZXRab29tU2NhbGUoZSkscz10aGlzLmdldFNpemUoKS5kaXZpZGVCeSgyKSxyPXQgaW5zdGFuY2VvZiBvLlBvaW50P3Q6dGhpcy5sYXRMbmdUb0NvbnRhaW5lclBvaW50KHQpLGE9ci5zdWJ0cmFjdChzKS5tdWx0aXBseUJ5KDEtMS9uKSxoPXRoaXMuY29udGFpbmVyUG9pbnRUb0xhdExuZyhzLmFkZChhKSk7cmV0dXJuIHRoaXMuc2V0VmlldyhoLGUse3pvb206aX0pfSxfZ2V0Qm91bmRzQ2VudGVyWm9vbTpmdW5jdGlvbih0LGUpe2U9ZXx8e30sdD10LmdldEJvdW5kcz90LmdldEJvdW5kcygpOm8ubGF0TG5nQm91bmRzKHQpO3ZhciBpPW8ucG9pbnQoZS5wYWRkaW5nVG9wTGVmdHx8ZS5wYWRkaW5nfHxbMCwwXSksbj1vLnBvaW50KGUucGFkZGluZ0JvdHRvbVJpZ2h0fHxlLnBhZGRpbmd8fFswLDBdKSxzPXRoaXMuZ2V0Qm91bmRzWm9vbSh0LCExLGkuYWRkKG4pKTtzPVwibnVtYmVyXCI9PXR5cGVvZiBlLm1heFpvb20/TWF0aC5taW4oZS5tYXhab29tLHMpOnM7dmFyIHI9bi5zdWJ0cmFjdChpKS5kaXZpZGVCeSgyKSxhPXRoaXMucHJvamVjdCh0LmdldFNvdXRoV2VzdCgpLHMpLGg9dGhpcy5wcm9qZWN0KHQuZ2V0Tm9ydGhFYXN0KCkscyksbD10aGlzLnVucHJvamVjdChhLmFkZChoKS5kaXZpZGVCeSgyKS5hZGQocikscyk7cmV0dXJue2NlbnRlcjpsLHpvb206c319LGZpdEJvdW5kczpmdW5jdGlvbih0LGUpe2lmKHQ9by5sYXRMbmdCb3VuZHModCksIXQuaXNWYWxpZCgpKXRocm93IG5ldyBFcnJvcihcIkJvdW5kcyBhcmUgbm90IHZhbGlkLlwiKTt2YXIgaT10aGlzLl9nZXRCb3VuZHNDZW50ZXJab29tKHQsZSk7cmV0dXJuIHRoaXMuc2V0VmlldyhpLmNlbnRlcixpLnpvb20sZSl9LGZpdFdvcmxkOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmZpdEJvdW5kcyhbWy05MCwtMTgwXSxbOTAsMTgwXV0sdCl9LHBhblRvOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuc2V0Vmlldyh0LHRoaXMuX3pvb20se3BhbjplfSl9LHBhbkJ5OmZ1bmN0aW9uKHQsZSl7aWYodD1vLnBvaW50KHQpLnJvdW5kKCksZT1lfHx7fSwhdC54JiYhdC55KXJldHVybiB0aGlzLmZpcmUoXCJtb3ZlZW5kXCIpO2lmKGUuYW5pbWF0ZSE9PSEwJiYhdGhpcy5nZXRTaXplKCkuY29udGFpbnModCkpcmV0dXJuIHRoaXMuX3Jlc2V0Vmlldyh0aGlzLnVucHJvamVjdCh0aGlzLnByb2plY3QodGhpcy5nZXRDZW50ZXIoKSkuYWRkKHQpKSx0aGlzLmdldFpvb20oKSksdGhpcztpZih0aGlzLl9wYW5BbmltfHwodGhpcy5fcGFuQW5pbT1uZXcgby5Qb3NBbmltYXRpb24sdGhpcy5fcGFuQW5pbS5vbih7c3RlcDp0aGlzLl9vblBhblRyYW5zaXRpb25TdGVwLGVuZDp0aGlzLl9vblBhblRyYW5zaXRpb25FbmR9LHRoaXMpKSxlLm5vTW92ZVN0YXJ0fHx0aGlzLmZpcmUoXCJtb3Zlc3RhcnRcIiksZS5hbmltYXRlIT09ITEpe28uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9tYXBQYW5lLFwibGVhZmxldC1wYW4tYW5pbVwiKTt2YXIgaT10aGlzLl9nZXRNYXBQYW5lUG9zKCkuc3VidHJhY3QodCkucm91bmQoKTt0aGlzLl9wYW5BbmltLnJ1bih0aGlzLl9tYXBQYW5lLGksZS5kdXJhdGlvbnx8LjI1LGUuZWFzZUxpbmVhcml0eSl9ZWxzZSB0aGlzLl9yYXdQYW5CeSh0KSx0aGlzLmZpcmUoXCJtb3ZlXCIpLmZpcmUoXCJtb3ZlZW5kXCIpO3JldHVybiB0aGlzfSxmbHlUbzpmdW5jdGlvbih0LGUsbil7ZnVuY3Rpb24gcyh0KXt2YXIgZT10Py0xOjEsaT10P3Y6ZyxuPXYqdi1nKmcrZSpMKkwqeSp5LG89MippKkwqeSxzPW4vbyxyPU1hdGguc3FydChzKnMrMSktcyxhPXI8MWUtOT8tMTg6TWF0aC5sb2cocik7cmV0dXJuIGF9ZnVuY3Rpb24gcih0KXtyZXR1cm4oTWF0aC5leHAodCktTWF0aC5leHAoLXQpKS8yfWZ1bmN0aW9uIGEodCl7cmV0dXJuKE1hdGguZXhwKHQpK01hdGguZXhwKC10KSkvMn1mdW5jdGlvbiBoKHQpe3JldHVybiByKHQpL2EodCl9ZnVuY3Rpb24gbCh0KXtyZXR1cm4gZyooYSh4KS9hKHgrUCp0KSl9ZnVuY3Rpb24gdSh0KXtyZXR1cm4gZyooYSh4KSpoKHgrUCp0KS1yKHgpKS9MfWZ1bmN0aW9uIGModCl7cmV0dXJuIDEtTWF0aC5wb3coMS10LDEuNSl9ZnVuY3Rpb24gZCgpe3ZhciBpPShEYXRlLm5vdygpLXcpL1Qsbj1jKGkpKmI7aTw9MT8odGhpcy5fZmx5VG9GcmFtZT1vLlV0aWwucmVxdWVzdEFuaW1GcmFtZShkLHRoaXMpLHRoaXMuX21vdmUodGhpcy51bnByb2plY3QoXy5hZGQobS5zdWJ0cmFjdChfKS5tdWx0aXBseUJ5KHUobikveSkpLGYpLHRoaXMuZ2V0U2NhbGVab29tKGcvbChuKSxmKSx7Zmx5VG86ITB9KSk6dGhpcy5fbW92ZSh0LGUpLl9tb3ZlRW5kKCEwKX1pZihuPW58fHt9LG4uYW5pbWF0ZT09PSExfHwhby5Ccm93c2VyLmFueTNkKXJldHVybiB0aGlzLnNldFZpZXcodCxlLG4pO3RoaXMuX3N0b3AoKTt2YXIgXz10aGlzLnByb2plY3QodGhpcy5nZXRDZW50ZXIoKSksbT10aGlzLnByb2plY3QodCkscD10aGlzLmdldFNpemUoKSxmPXRoaXMuX3pvb207dD1vLmxhdExuZyh0KSxlPWU9PT1pP2Y6ZTt2YXIgZz1NYXRoLm1heChwLngscC55KSx2PWcqdGhpcy5nZXRab29tU2NhbGUoZixlKSx5PW0uZGlzdGFuY2VUbyhfKXx8MSxQPTEuNDIsTD1QKlAseD1zKDApLHc9RGF0ZS5ub3coKSxiPShzKDEpLXgpL1AsVD1uLmR1cmF0aW9uPzFlMypuLmR1cmF0aW9uOjFlMypiKi44O3JldHVybiB0aGlzLl9tb3ZlU3RhcnQoITApLGQuY2FsbCh0aGlzKSx0aGlzfSxmbHlUb0JvdW5kczpmdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuX2dldEJvdW5kc0NlbnRlclpvb20odCxlKTtyZXR1cm4gdGhpcy5mbHlUbyhpLmNlbnRlcixpLnpvb20sZSl9LHNldE1heEJvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdD1vLmxhdExuZ0JvdW5kcyh0KSx0LmlzVmFsaWQoKT8odGhpcy5vcHRpb25zLm1heEJvdW5kcyYmdGhpcy5vZmYoXCJtb3ZlZW5kXCIsdGhpcy5fcGFuSW5zaWRlTWF4Qm91bmRzKSx0aGlzLm9wdGlvbnMubWF4Qm91bmRzPXQsdGhpcy5fbG9hZGVkJiZ0aGlzLl9wYW5JbnNpZGVNYXhCb3VuZHMoKSx0aGlzLm9uKFwibW92ZWVuZFwiLHRoaXMuX3Bhbkluc2lkZU1heEJvdW5kcykpOih0aGlzLm9wdGlvbnMubWF4Qm91bmRzPW51bGwsdGhpcy5vZmYoXCJtb3ZlZW5kXCIsdGhpcy5fcGFuSW5zaWRlTWF4Qm91bmRzKSl9LHNldE1pblpvb206ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5taW5ab29tPXQsdGhpcy5fbG9hZGVkJiZ0aGlzLmdldFpvb20oKTx0aGlzLm9wdGlvbnMubWluWm9vbT90aGlzLnNldFpvb20odCk6dGhpc30sc2V0TWF4Wm9vbTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLm1heFpvb209dCx0aGlzLl9sb2FkZWQmJnRoaXMuZ2V0Wm9vbSgpPnRoaXMub3B0aW9ucy5tYXhab29tP3RoaXMuc2V0Wm9vbSh0KTp0aGlzfSxwYW5JbnNpZGVCb3VuZHM6ZnVuY3Rpb24odCxlKXt0aGlzLl9lbmZvcmNpbmdCb3VuZHM9ITA7dmFyIGk9dGhpcy5nZXRDZW50ZXIoKSxuPXRoaXMuX2xpbWl0Q2VudGVyKGksdGhpcy5fem9vbSxvLmxhdExuZ0JvdW5kcyh0KSk7cmV0dXJuIGkuZXF1YWxzKG4pfHx0aGlzLnBhblRvKG4sZSksdGhpcy5fZW5mb3JjaW5nQm91bmRzPSExLHRoaXN9LGludmFsaWRhdGVTaXplOmZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9sb2FkZWQpcmV0dXJuIHRoaXM7dD1vLmV4dGVuZCh7YW5pbWF0ZTohMSxwYW46ITB9LHQ9PT0hMD97YW5pbWF0ZTohMH06dCk7dmFyIGU9dGhpcy5nZXRTaXplKCk7dGhpcy5fc2l6ZUNoYW5nZWQ9ITAsdGhpcy5fbGFzdENlbnRlcj1udWxsO3ZhciBpPXRoaXMuZ2V0U2l6ZSgpLG49ZS5kaXZpZGVCeSgyKS5yb3VuZCgpLHM9aS5kaXZpZGVCeSgyKS5yb3VuZCgpLHI9bi5zdWJ0cmFjdChzKTtyZXR1cm4gci54fHxyLnk/KHQuYW5pbWF0ZSYmdC5wYW4/dGhpcy5wYW5CeShyKToodC5wYW4mJnRoaXMuX3Jhd1BhbkJ5KHIpLHRoaXMuZmlyZShcIm1vdmVcIiksdC5kZWJvdW5jZU1vdmVlbmQ/KGNsZWFyVGltZW91dCh0aGlzLl9zaXplVGltZXIpLHRoaXMuX3NpemVUaW1lcj1zZXRUaW1lb3V0KG8uYmluZCh0aGlzLmZpcmUsdGhpcyxcIm1vdmVlbmRcIiksMjAwKSk6dGhpcy5maXJlKFwibW92ZWVuZFwiKSksdGhpcy5maXJlKFwicmVzaXplXCIse29sZFNpemU6ZSxuZXdTaXplOml9KSk6dGhpc30sc3RvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNldFpvb20odGhpcy5fbGltaXRab29tKHRoaXMuX3pvb20pKSx0aGlzLm9wdGlvbnMuem9vbVNuYXB8fHRoaXMuZmlyZShcInZpZXdyZXNldFwiKSx0aGlzLl9zdG9wKCl9LGxvY2F0ZTpmdW5jdGlvbih0KXtpZih0PXRoaXMuX2xvY2F0ZU9wdGlvbnM9by5leHRlbmQoe3RpbWVvdXQ6MWU0LHdhdGNoOiExfSx0KSwhKFwiZ2VvbG9jYXRpb25cImluIG5hdmlnYXRvcikpcmV0dXJuIHRoaXMuX2hhbmRsZUdlb2xvY2F0aW9uRXJyb3Ioe2NvZGU6MCxtZXNzYWdlOlwiR2VvbG9jYXRpb24gbm90IHN1cHBvcnRlZC5cIn0pLHRoaXM7dmFyIGU9by5iaW5kKHRoaXMuX2hhbmRsZUdlb2xvY2F0aW9uUmVzcG9uc2UsdGhpcyksaT1vLmJpbmQodGhpcy5faGFuZGxlR2VvbG9jYXRpb25FcnJvcix0aGlzKTtyZXR1cm4gdC53YXRjaD90aGlzLl9sb2NhdGlvbldhdGNoSWQ9bmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24oZSxpLHQpOm5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZSxpLHQpLHRoaXN9LHN0b3BMb2NhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLmdlb2xvY2F0aW9uJiZuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uY2xlYXJXYXRjaCYmbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy5fbG9jYXRpb25XYXRjaElkKSx0aGlzLl9sb2NhdGVPcHRpb25zJiYodGhpcy5fbG9jYXRlT3B0aW9ucy5zZXRWaWV3PSExKSx0aGlzfSxfaGFuZGxlR2VvbG9jYXRpb25FcnJvcjpmdW5jdGlvbih0KXt2YXIgZT10LmNvZGUsaT10Lm1lc3NhZ2V8fCgxPT09ZT9cInBlcm1pc3Npb24gZGVuaWVkXCI6Mj09PWU/XCJwb3NpdGlvbiB1bmF2YWlsYWJsZVwiOlwidGltZW91dFwiKTt0aGlzLl9sb2NhdGVPcHRpb25zLnNldFZpZXcmJiF0aGlzLl9sb2FkZWQmJnRoaXMuZml0V29ybGQoKSx0aGlzLmZpcmUoXCJsb2NhdGlvbmVycm9yXCIse2NvZGU6ZSxtZXNzYWdlOlwiR2VvbG9jYXRpb24gZXJyb3I6IFwiK2krXCIuXCJ9KX0sX2hhbmRsZUdlb2xvY2F0aW9uUmVzcG9uc2U6ZnVuY3Rpb24odCl7dmFyIGU9dC5jb29yZHMubGF0aXR1ZGUsaT10LmNvb3Jkcy5sb25naXR1ZGUsbj1uZXcgby5MYXRMbmcoZSxpKSxzPW4udG9Cb3VuZHModC5jb29yZHMuYWNjdXJhY3kpLHI9dGhpcy5fbG9jYXRlT3B0aW9ucztpZihyLnNldFZpZXcpe3ZhciBhPXRoaXMuZ2V0Qm91bmRzWm9vbShzKTt0aGlzLnNldFZpZXcobixyLm1heFpvb20/TWF0aC5taW4oYSxyLm1heFpvb20pOmEpfXZhciBoPXtsYXRsbmc6bixib3VuZHM6cyx0aW1lc3RhbXA6dC50aW1lc3RhbXB9O2Zvcih2YXIgbCBpbiB0LmNvb3JkcylcIm51bWJlclwiPT10eXBlb2YgdC5jb29yZHNbbF0mJihoW2xdPXQuY29vcmRzW2xdKTt0aGlzLmZpcmUoXCJsb2NhdGlvbmZvdW5kXCIsaCl9LGFkZEhhbmRsZXI6ZnVuY3Rpb24odCxlKXtpZighZSlyZXR1cm4gdGhpczt2YXIgaT10aGlzW3RdPW5ldyBlKHRoaXMpO3JldHVybiB0aGlzLl9oYW5kbGVycy5wdXNoKGkpLHRoaXMub3B0aW9uc1t0XSYmaS5lbmFibGUoKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtpZih0aGlzLl9pbml0RXZlbnRzKCEwKSx0aGlzLl9jb250YWluZXJJZCE9PXRoaXMuX2NvbnRhaW5lci5fbGVhZmxldF9pZCl0aHJvdyBuZXcgRXJyb3IoXCJNYXAgY29udGFpbmVyIGlzIGJlaW5nIHJldXNlZCBieSBhbm90aGVyIGluc3RhbmNlXCIpO3RyeXtkZWxldGUgdGhpcy5fY29udGFpbmVyLl9sZWFmbGV0X2lkLGRlbGV0ZSB0aGlzLl9jb250YWluZXJJZH1jYXRjaCh0KXt0aGlzLl9jb250YWluZXIuX2xlYWZsZXRfaWQ9aSx0aGlzLl9jb250YWluZXJJZD1pfW8uRG9tVXRpbC5yZW1vdmUodGhpcy5fbWFwUGFuZSksdGhpcy5fY2xlYXJDb250cm9sUG9zJiZ0aGlzLl9jbGVhckNvbnRyb2xQb3MoKSx0aGlzLl9jbGVhckhhbmRsZXJzKCksdGhpcy5fbG9hZGVkJiZ0aGlzLmZpcmUoXCJ1bmxvYWRcIik7Zm9yKHZhciB0IGluIHRoaXMuX2xheWVycyl0aGlzLl9sYXllcnNbdF0ucmVtb3ZlKCk7cmV0dXJuIHRoaXN9LGNyZWF0ZVBhbmU6ZnVuY3Rpb24odCxlKXt2YXIgaT1cImxlYWZsZXQtcGFuZVwiKyh0P1wiIGxlYWZsZXQtXCIrdC5yZXBsYWNlKFwiUGFuZVwiLFwiXCIpK1wiLXBhbmVcIjpcIlwiKSxuPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixpLGV8fHRoaXMuX21hcFBhbmUpO3JldHVybiB0JiYodGhpcy5fcGFuZXNbdF09biksbn0sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrSWZMb2FkZWQoKSx0aGlzLl9sYXN0Q2VudGVyJiYhdGhpcy5fbW92ZWQoKT90aGlzLl9sYXN0Q2VudGVyOnRoaXMubGF5ZXJQb2ludFRvTGF0TG5nKHRoaXMuX2dldENlbnRlckxheWVyUG9pbnQoKSl9LGdldFpvb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9vbX0sZ2V0Qm91bmRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5nZXRQaXhlbEJvdW5kcygpLGU9dGhpcy51bnByb2plY3QodC5nZXRCb3R0b21MZWZ0KCkpLGk9dGhpcy51bnByb2plY3QodC5nZXRUb3BSaWdodCgpKTtyZXR1cm4gbmV3IG8uTGF0TG5nQm91bmRzKGUsaSl9LGdldE1pblpvb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLm1pblpvb209PT1pP3RoaXMuX2xheWVyc01pblpvb218fDA6dGhpcy5vcHRpb25zLm1pblpvb219LGdldE1heFpvb206ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLm1heFpvb209PT1pP3RoaXMuX2xheWVyc01heFpvb209PT1pPzEvMDp0aGlzLl9sYXllcnNNYXhab29tOnRoaXMub3B0aW9ucy5tYXhab29tfSxnZXRCb3VuZHNab29tOmZ1bmN0aW9uKHQsZSxpKXt0PW8ubGF0TG5nQm91bmRzKHQpLGk9by5wb2ludChpfHxbMCwwXSk7dmFyIG49dGhpcy5nZXRab29tKCl8fDAscz10aGlzLmdldE1pblpvb20oKSxyPXRoaXMuZ2V0TWF4Wm9vbSgpLGE9dC5nZXROb3J0aFdlc3QoKSxoPXQuZ2V0U291dGhFYXN0KCksbD10aGlzLmdldFNpemUoKS5zdWJ0cmFjdChpKSx1PW8uYm91bmRzKHRoaXMucHJvamVjdChoLG4pLHRoaXMucHJvamVjdChhLG4pKS5nZXRTaXplKCksYz1vLkJyb3dzZXIuYW55M2Q/dGhpcy5vcHRpb25zLnpvb21TbmFwOjEsZD1NYXRoLm1pbihsLngvdS54LGwueS91LnkpO3JldHVybiBuPXRoaXMuZ2V0U2NhbGVab29tKGQsbiksYyYmKG49TWF0aC5yb3VuZChuLyhjLzEwMCkpKihjLzEwMCksbj1lP01hdGguY2VpbChuL2MpKmM6TWF0aC5mbG9vcihuL2MpKmMpLE1hdGgubWF4KHMsTWF0aC5taW4ocixuKSl9LGdldFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2l6ZSYmIXRoaXMuX3NpemVDaGFuZ2VkfHwodGhpcy5fc2l6ZT1uZXcgby5Qb2ludCh0aGlzLl9jb250YWluZXIuY2xpZW50V2lkdGh8fDAsdGhpcy5fY29udGFpbmVyLmNsaWVudEhlaWdodHx8MCksdGhpcy5fc2l6ZUNoYW5nZWQ9ITEpLHRoaXMuX3NpemUuY2xvbmUoKX0sZ2V0UGl4ZWxCb3VuZHM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRUb3BMZWZ0UG9pbnQodCxlKTtyZXR1cm4gbmV3IG8uQm91bmRzKGksaS5hZGQodGhpcy5nZXRTaXplKCkpKX0sZ2V0UGl4ZWxPcmlnaW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tJZkxvYWRlZCgpLHRoaXMuX3BpeGVsT3JpZ2lufSxnZXRQaXhlbFdvcmxkQm91bmRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMuY3JzLmdldFByb2plY3RlZEJvdW5kcyh0PT09aT90aGlzLmdldFpvb20oKTp0KX0sZ2V0UGFuZTpmdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD90aGlzLl9wYW5lc1t0XTp0fSxnZXRQYW5lczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYW5lc30sZ2V0Q29udGFpbmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRhaW5lcn0sZ2V0Wm9vbVNjYWxlOmZ1bmN0aW9uKHQsZSl7dmFyIG49dGhpcy5vcHRpb25zLmNycztyZXR1cm4gZT1lPT09aT90aGlzLl96b29tOmUsbi5zY2FsZSh0KS9uLnNjYWxlKGUpfSxnZXRTY2FsZVpvb206ZnVuY3Rpb24odCxlKXt2YXIgbj10aGlzLm9wdGlvbnMuY3JzO2U9ZT09PWk/dGhpcy5fem9vbTplO3ZhciBvPW4uem9vbSh0Km4uc2NhbGUoZSkpO3JldHVybiBpc05hTihvKT8xLzA6b30scHJvamVjdDpmdW5jdGlvbih0LGUpe3JldHVybiBlPWU9PT1pP3RoaXMuX3pvb206ZSx0aGlzLm9wdGlvbnMuY3JzLmxhdExuZ1RvUG9pbnQoby5sYXRMbmcodCksZSl9LHVucHJvamVjdDpmdW5jdGlvbih0LGUpe3JldHVybiBlPWU9PT1pP3RoaXMuX3pvb206ZSx0aGlzLm9wdGlvbnMuY3JzLnBvaW50VG9MYXRMbmcoby5wb2ludCh0KSxlKX0sbGF5ZXJQb2ludFRvTGF0TG5nOmZ1bmN0aW9uKHQpe3ZhciBlPW8ucG9pbnQodCkuYWRkKHRoaXMuZ2V0UGl4ZWxPcmlnaW4oKSk7cmV0dXJuIHRoaXMudW5wcm9qZWN0KGUpfSxsYXRMbmdUb0xheWVyUG9pbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5wcm9qZWN0KG8ubGF0TG5nKHQpKS5fcm91bmQoKTtyZXR1cm4gZS5fc3VidHJhY3QodGhpcy5nZXRQaXhlbE9yaWdpbigpKX0sd3JhcExhdExuZzpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmNycy53cmFwTGF0TG5nKG8ubGF0TG5nKHQpKX0sd3JhcExhdExuZ0JvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLmNycy53cmFwTGF0TG5nQm91bmRzKG8ubGF0TG5nQm91bmRzKHQpKX0sZGlzdGFuY2U6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5vcHRpb25zLmNycy5kaXN0YW5jZShvLmxhdExuZyh0KSxvLmxhdExuZyhlKSl9LGNvbnRhaW5lclBvaW50VG9MYXllclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiBvLnBvaW50KHQpLnN1YnRyYWN0KHRoaXMuX2dldE1hcFBhbmVQb3MoKSl9LGxheWVyUG9pbnRUb0NvbnRhaW5lclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiBvLnBvaW50KHQpLmFkZCh0aGlzLl9nZXRNYXBQYW5lUG9zKCkpfSxjb250YWluZXJQb2ludFRvTGF0TG5nOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY29udGFpbmVyUG9pbnRUb0xheWVyUG9pbnQoby5wb2ludCh0KSk7cmV0dXJuIHRoaXMubGF5ZXJQb2ludFRvTGF0TG5nKGUpfSxsYXRMbmdUb0NvbnRhaW5lclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmxheWVyUG9pbnRUb0NvbnRhaW5lclBvaW50KHRoaXMubGF0TG5nVG9MYXllclBvaW50KG8ubGF0TG5nKHQpKSl9LG1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiBvLkRvbUV2ZW50LmdldE1vdXNlUG9zaXRpb24odCx0aGlzLl9jb250YWluZXIpfSxtb3VzZUV2ZW50VG9MYXllclBvaW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KHRoaXMubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodCkpfSxtb3VzZUV2ZW50VG9MYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMubGF5ZXJQb2ludFRvTGF0TG5nKHRoaXMubW91c2VFdmVudFRvTGF5ZXJQb2ludCh0KSl9LF9pbml0Q29udGFpbmVyOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2NvbnRhaW5lcj1vLkRvbVV0aWwuZ2V0KHQpO2lmKCFlKXRocm93IG5ldyBFcnJvcihcIk1hcCBjb250YWluZXIgbm90IGZvdW5kLlwiKTtpZihlLl9sZWFmbGV0X2lkKXRocm93IG5ldyBFcnJvcihcIk1hcCBjb250YWluZXIgaXMgYWxyZWFkeSBpbml0aWFsaXplZC5cIik7by5Eb21FdmVudC5hZGRMaXN0ZW5lcihlLFwic2Nyb2xsXCIsdGhpcy5fb25TY3JvbGwsdGhpcyksdGhpcy5fY29udGFpbmVySWQ9by5VdGlsLnN0YW1wKGUpfSxfaW5pdExheW91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcjt0aGlzLl9mYWRlQW5pbWF0ZWQ9dGhpcy5vcHRpb25zLmZhZGVBbmltYXRpb24mJm8uQnJvd3Nlci5hbnkzZCxvLkRvbVV0aWwuYWRkQ2xhc3ModCxcImxlYWZsZXQtY29udGFpbmVyXCIrKG8uQnJvd3Nlci50b3VjaD9cIiBsZWFmbGV0LXRvdWNoXCI6XCJcIikrKG8uQnJvd3Nlci5yZXRpbmE/XCIgbGVhZmxldC1yZXRpbmFcIjpcIlwiKSsoby5Ccm93c2VyLmllbHQ5P1wiIGxlYWZsZXQtb2xkaWVcIjpcIlwiKSsoby5Ccm93c2VyLnNhZmFyaT9cIiBsZWFmbGV0LXNhZmFyaVwiOlwiXCIpKyh0aGlzLl9mYWRlQW5pbWF0ZWQ/XCIgbGVhZmxldC1mYWRlLWFuaW1cIjpcIlwiKSk7XHJcbnZhciBlPW8uRG9tVXRpbC5nZXRTdHlsZSh0LFwicG9zaXRpb25cIik7XCJhYnNvbHV0ZVwiIT09ZSYmXCJyZWxhdGl2ZVwiIT09ZSYmXCJmaXhlZFwiIT09ZSYmKHQuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSx0aGlzLl9pbml0UGFuZXMoKSx0aGlzLl9pbml0Q29udHJvbFBvcyYmdGhpcy5faW5pdENvbnRyb2xQb3MoKX0sX2luaXRQYW5lczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3BhbmVzPXt9O3RoaXMuX3BhbmVSZW5kZXJlcnM9e30sdGhpcy5fbWFwUGFuZT10aGlzLmNyZWF0ZVBhbmUoXCJtYXBQYW5lXCIsdGhpcy5fY29udGFpbmVyKSxvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fbWFwUGFuZSxuZXcgby5Qb2ludCgwLDApKSx0aGlzLmNyZWF0ZVBhbmUoXCJ0aWxlUGFuZVwiKSx0aGlzLmNyZWF0ZVBhbmUoXCJzaGFkb3dQYW5lXCIpLHRoaXMuY3JlYXRlUGFuZShcIm92ZXJsYXlQYW5lXCIpLHRoaXMuY3JlYXRlUGFuZShcIm1hcmtlclBhbmVcIiksdGhpcy5jcmVhdGVQYW5lKFwidG9vbHRpcFBhbmVcIiksdGhpcy5jcmVhdGVQYW5lKFwicG9wdXBQYW5lXCIpLHRoaXMub3B0aW9ucy5tYXJrZXJab29tQW5pbWF0aW9ufHwoby5Eb21VdGlsLmFkZENsYXNzKHQubWFya2VyUGFuZSxcImxlYWZsZXQtem9vbS1oaWRlXCIpLG8uRG9tVXRpbC5hZGRDbGFzcyh0LnNoYWRvd1BhbmUsXCJsZWFmbGV0LXpvb20taGlkZVwiKSl9LF9yZXNldFZpZXc6ZnVuY3Rpb24odCxlKXtvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fbWFwUGFuZSxuZXcgby5Qb2ludCgwLDApKTt2YXIgaT0hdGhpcy5fbG9hZGVkO3RoaXMuX2xvYWRlZD0hMCxlPXRoaXMuX2xpbWl0Wm9vbShlKSx0aGlzLmZpcmUoXCJ2aWV3cHJlcmVzZXRcIik7dmFyIG49dGhpcy5fem9vbSE9PWU7dGhpcy5fbW92ZVN0YXJ0KG4pLl9tb3ZlKHQsZSkuX21vdmVFbmQobiksdGhpcy5maXJlKFwidmlld3Jlc2V0XCIpLGkmJnRoaXMuZmlyZShcImxvYWRcIil9LF9tb3ZlU3RhcnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMuZmlyZShcInpvb21zdGFydFwiKSx0aGlzLmZpcmUoXCJtb3Zlc3RhcnRcIil9LF9tb3ZlOmZ1bmN0aW9uKHQsZSxuKXtlPT09aSYmKGU9dGhpcy5fem9vbSk7dmFyIG89dGhpcy5fem9vbSE9PWU7cmV0dXJuIHRoaXMuX3pvb209ZSx0aGlzLl9sYXN0Q2VudGVyPXQsdGhpcy5fcGl4ZWxPcmlnaW49dGhpcy5fZ2V0TmV3UGl4ZWxPcmlnaW4odCksKG98fG4mJm4ucGluY2gpJiZ0aGlzLmZpcmUoXCJ6b29tXCIsbiksdGhpcy5maXJlKFwibW92ZVwiLG4pfSxfbW92ZUVuZDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdGhpcy5maXJlKFwiem9vbWVuZFwiKSx0aGlzLmZpcmUoXCJtb3ZlZW5kXCIpfSxfc3RvcDpmdW5jdGlvbigpe3JldHVybiBvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2ZseVRvRnJhbWUpLHRoaXMuX3BhbkFuaW0mJnRoaXMuX3BhbkFuaW0uc3RvcCgpLHRoaXN9LF9yYXdQYW5CeTpmdW5jdGlvbih0KXtvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fbWFwUGFuZSx0aGlzLl9nZXRNYXBQYW5lUG9zKCkuc3VidHJhY3QodCkpfSxfZ2V0Wm9vbVNwYW46ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNYXhab29tKCktdGhpcy5nZXRNaW5ab29tKCl9LF9wYW5JbnNpZGVNYXhCb3VuZHM6ZnVuY3Rpb24oKXt0aGlzLl9lbmZvcmNpbmdCb3VuZHN8fHRoaXMucGFuSW5zaWRlQm91bmRzKHRoaXMub3B0aW9ucy5tYXhCb3VuZHMpfSxfY2hlY2tJZkxvYWRlZDpmdW5jdGlvbigpe2lmKCF0aGlzLl9sb2FkZWQpdGhyb3cgbmV3IEVycm9yKFwiU2V0IG1hcCBjZW50ZXIgYW5kIHpvb20gZmlyc3QuXCIpfSxfaW5pdEV2ZW50czpmdW5jdGlvbihlKXtpZihvLkRvbUV2ZW50KXt0aGlzLl90YXJnZXRzPXt9LHRoaXMuX3RhcmdldHNbby5zdGFtcCh0aGlzLl9jb250YWluZXIpXT10aGlzO3ZhciBpPWU/XCJvZmZcIjpcIm9uXCI7by5Eb21FdmVudFtpXSh0aGlzLl9jb250YWluZXIsXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2Vtb3ZlIGNvbnRleHRtZW51IGtleXByZXNzXCIsdGhpcy5faGFuZGxlRE9NRXZlbnQsdGhpcyksdGhpcy5vcHRpb25zLnRyYWNrUmVzaXplJiZvLkRvbUV2ZW50W2ldKHQsXCJyZXNpemVcIix0aGlzLl9vblJlc2l6ZSx0aGlzKSxvLkJyb3dzZXIuYW55M2QmJnRoaXMub3B0aW9ucy50cmFuc2Zvcm0zRExpbWl0JiZ0aGlzW2ldKFwibW92ZWVuZFwiLHRoaXMuX29uTW92ZUVuZCl9fSxfb25SZXNpemU6ZnVuY3Rpb24oKXtvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX3Jlc2l6ZVJlcXVlc3QpLHRoaXMuX3Jlc2l6ZVJlcXVlc3Q9by5VdGlsLnJlcXVlc3RBbmltRnJhbWUoZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaXplKHtkZWJvdW5jZU1vdmVlbmQ6ITB9KX0sdGhpcyl9LF9vblNjcm9sbDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5zY3JvbGxUb3A9MCx0aGlzLl9jb250YWluZXIuc2Nyb2xsTGVmdD0wfSxfb25Nb3ZlRW5kOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0TWFwUGFuZVBvcygpO01hdGgubWF4KE1hdGguYWJzKHQueCksTWF0aC5hYnModC55KSk+PXRoaXMub3B0aW9ucy50cmFuc2Zvcm0zRExpbWl0JiZ0aGlzLl9yZXNldFZpZXcodGhpcy5nZXRDZW50ZXIoKSx0aGlzLmdldFpvb20oKSl9LF9maW5kRXZlbnRUYXJnZXRzOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLG49W10scz1cIm1vdXNlb3V0XCI9PT1lfHxcIm1vdXNlb3ZlclwiPT09ZSxyPXQudGFyZ2V0fHx0LnNyY0VsZW1lbnQsYT0hMTtyOyl7aWYoaT10aGlzLl90YXJnZXRzW28uc3RhbXAocildLGkmJihcImNsaWNrXCI9PT1lfHxcInByZWNsaWNrXCI9PT1lKSYmIXQuX3NpbXVsYXRlZCYmdGhpcy5fZHJhZ2dhYmxlTW92ZWQoaSkpe2E9ITA7YnJlYWt9aWYoaSYmaS5saXN0ZW5zKGUsITApKXtpZihzJiYhby5Eb21FdmVudC5faXNFeHRlcm5hbFRhcmdldChyLHQpKWJyZWFrO2lmKG4ucHVzaChpKSxzKWJyZWFrfWlmKHI9PT10aGlzLl9jb250YWluZXIpYnJlYWs7cj1yLnBhcmVudE5vZGV9cmV0dXJuIG4ubGVuZ3RofHxhfHxzfHwhby5Eb21FdmVudC5faXNFeHRlcm5hbFRhcmdldChyLHQpfHwobj1bdGhpc10pLG59LF9oYW5kbGVET01FdmVudDpmdW5jdGlvbih0KXtpZih0aGlzLl9sb2FkZWQmJiFvLkRvbUV2ZW50Ll9za2lwcGVkKHQpKXt2YXIgZT1cImtleXByZXNzXCI9PT10LnR5cGUmJjEzPT09dC5rZXlDb2RlP1wiY2xpY2tcIjp0LnR5cGU7XCJtb3VzZWRvd25cIj09PWUmJm8uRG9tVXRpbC5wcmV2ZW50T3V0bGluZSh0LnRhcmdldHx8dC5zcmNFbGVtZW50KSx0aGlzLl9maXJlRE9NRXZlbnQodCxlKX19LF9maXJlRE9NRXZlbnQ6ZnVuY3Rpb24odCxlLGkpe2lmKFwiY2xpY2tcIj09PXQudHlwZSl7dmFyIG49by5VdGlsLmV4dGVuZCh7fSx0KTtuLnR5cGU9XCJwcmVjbGlja1wiLHRoaXMuX2ZpcmVET01FdmVudChuLG4udHlwZSxpKX1pZighdC5fc3RvcHBlZCYmKGk9KGl8fFtdKS5jb25jYXQodGhpcy5fZmluZEV2ZW50VGFyZ2V0cyh0LGUpKSxpLmxlbmd0aCkpe3ZhciBzPWlbMF07XCJjb250ZXh0bWVudVwiPT09ZSYmcy5saXN0ZW5zKGUsITApJiZvLkRvbUV2ZW50LnByZXZlbnREZWZhdWx0KHQpO3ZhciByPXtvcmlnaW5hbEV2ZW50OnR9O2lmKFwia2V5cHJlc3NcIiE9PXQudHlwZSl7dmFyIGE9cyBpbnN0YW5jZW9mIG8uTWFya2VyO3IuY29udGFpbmVyUG9pbnQ9YT90aGlzLmxhdExuZ1RvQ29udGFpbmVyUG9pbnQocy5nZXRMYXRMbmcoKSk6dGhpcy5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KSxyLmxheWVyUG9pbnQ9dGhpcy5jb250YWluZXJQb2ludFRvTGF5ZXJQb2ludChyLmNvbnRhaW5lclBvaW50KSxyLmxhdGxuZz1hP3MuZ2V0TGF0TG5nKCk6dGhpcy5sYXllclBvaW50VG9MYXRMbmcoci5sYXllclBvaW50KX1mb3IodmFyIGg9MDtoPGkubGVuZ3RoO2grKylpZihpW2hdLmZpcmUoZSxyLCEwKSxyLm9yaWdpbmFsRXZlbnQuX3N0b3BwZWR8fGlbaF0ub3B0aW9ucy5ub25CdWJibGluZ0V2ZW50cyYmby5VdGlsLmluZGV4T2YoaVtoXS5vcHRpb25zLm5vbkJ1YmJsaW5nRXZlbnRzLGUpIT09LTEpcmV0dXJufX0sX2RyYWdnYWJsZU1vdmVkOmZ1bmN0aW9uKHQpe3JldHVybiB0PXQuZHJhZ2dpbmcmJnQuZHJhZ2dpbmcuZW5hYmxlZCgpP3Q6dGhpcyx0LmRyYWdnaW5nJiZ0LmRyYWdnaW5nLm1vdmVkKCl8fHRoaXMuYm94Wm9vbSYmdGhpcy5ib3hab29tLm1vdmVkKCl9LF9jbGVhckhhbmRsZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9oYW5kbGVycy5sZW5ndGg7dDxlO3QrKyl0aGlzLl9oYW5kbGVyc1t0XS5kaXNhYmxlKCl9LHdoZW5SZWFkeTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9sb2FkZWQ/dC5jYWxsKGV8fHRoaXMse3RhcmdldDp0aGlzfSk6dGhpcy5vbihcImxvYWRcIix0LGUpLHRoaXN9LF9nZXRNYXBQYW5lUG9zOmZ1bmN0aW9uKCl7cmV0dXJuIG8uRG9tVXRpbC5nZXRQb3NpdGlvbih0aGlzLl9tYXBQYW5lKXx8bmV3IG8uUG9pbnQoMCwwKX0sX21vdmVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0TWFwUGFuZVBvcygpO3JldHVybiB0JiYhdC5lcXVhbHMoWzAsMF0pfSxfZ2V0VG9wTGVmdFBvaW50OmZ1bmN0aW9uKHQsZSl7dmFyIG49dCYmZSE9PWk/dGhpcy5fZ2V0TmV3UGl4ZWxPcmlnaW4odCxlKTp0aGlzLmdldFBpeGVsT3JpZ2luKCk7cmV0dXJuIG4uc3VidHJhY3QodGhpcy5fZ2V0TWFwUGFuZVBvcygpKX0sX2dldE5ld1BpeGVsT3JpZ2luOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5nZXRTaXplKCkuX2RpdmlkZUJ5KDIpO3JldHVybiB0aGlzLnByb2plY3QodCxlKS5fc3VidHJhY3QoaSkuX2FkZCh0aGlzLl9nZXRNYXBQYW5lUG9zKCkpLl9yb3VuZCgpfSxfbGF0TG5nVG9OZXdMYXllclBvaW50OmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLl9nZXROZXdQaXhlbE9yaWdpbihpLGUpO3JldHVybiB0aGlzLnByb2plY3QodCxlKS5fc3VidHJhY3Qobil9LF9sYXRMbmdCb3VuZHNUb05ld0xheWVyQm91bmRzOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLl9nZXROZXdQaXhlbE9yaWdpbihpLGUpO3JldHVybiBvLmJvdW5kcyhbdGhpcy5wcm9qZWN0KHQuZ2V0U291dGhXZXN0KCksZSkuX3N1YnRyYWN0KG4pLHRoaXMucHJvamVjdCh0LmdldE5vcnRoV2VzdCgpLGUpLl9zdWJ0cmFjdChuKSx0aGlzLnByb2plY3QodC5nZXRTb3V0aEVhc3QoKSxlKS5fc3VidHJhY3QobiksdGhpcy5wcm9qZWN0KHQuZ2V0Tm9ydGhFYXN0KCksZSkuX3N1YnRyYWN0KG4pXSl9LF9nZXRDZW50ZXJMYXllclBvaW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGFpbmVyUG9pbnRUb0xheWVyUG9pbnQodGhpcy5nZXRTaXplKCkuX2RpdmlkZUJ5KDIpKX0sX2dldENlbnRlck9mZnNldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5sYXRMbmdUb0xheWVyUG9pbnQodCkuc3VidHJhY3QodGhpcy5fZ2V0Q2VudGVyTGF5ZXJQb2ludCgpKX0sX2xpbWl0Q2VudGVyOmZ1bmN0aW9uKHQsZSxpKXtpZighaSlyZXR1cm4gdDt2YXIgbj10aGlzLnByb2plY3QodCxlKSxzPXRoaXMuZ2V0U2l6ZSgpLmRpdmlkZUJ5KDIpLHI9bmV3IG8uQm91bmRzKG4uc3VidHJhY3Qocyksbi5hZGQocykpLGE9dGhpcy5fZ2V0Qm91bmRzT2Zmc2V0KHIsaSxlKTtyZXR1cm4gYS5yb3VuZCgpLmVxdWFscyhbMCwwXSk/dDp0aGlzLnVucHJvamVjdChuLmFkZChhKSxlKX0sX2xpbWl0T2Zmc2V0OmZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIHQ7dmFyIGk9dGhpcy5nZXRQaXhlbEJvdW5kcygpLG49bmV3IG8uQm91bmRzKGkubWluLmFkZCh0KSxpLm1heC5hZGQodCkpO3JldHVybiB0LmFkZCh0aGlzLl9nZXRCb3VuZHNPZmZzZXQobixlKSl9LF9nZXRCb3VuZHNPZmZzZXQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPW8uYm91bmRzKHRoaXMucHJvamVjdChlLmdldE5vcnRoRWFzdCgpLGkpLHRoaXMucHJvamVjdChlLmdldFNvdXRoV2VzdCgpLGkpKSxzPW4ubWluLnN1YnRyYWN0KHQubWluKSxyPW4ubWF4LnN1YnRyYWN0KHQubWF4KSxhPXRoaXMuX3JlYm91bmQocy54LC1yLngpLGg9dGhpcy5fcmVib3VuZChzLnksLXIueSk7cmV0dXJuIG5ldyBvLlBvaW50KGEsaCl9LF9yZWJvdW5kOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQrZT4wP01hdGgucm91bmQodC1lKS8yOk1hdGgubWF4KDAsTWF0aC5jZWlsKHQpKS1NYXRoLm1heCgwLE1hdGguZmxvb3IoZSkpfSxfbGltaXRab29tOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0TWluWm9vbSgpLGk9dGhpcy5nZXRNYXhab29tKCksbj1vLkJyb3dzZXIuYW55M2Q/dGhpcy5vcHRpb25zLnpvb21TbmFwOjE7cmV0dXJuIG4mJih0PU1hdGgucm91bmQodC9uKSpuKSxNYXRoLm1heChlLE1hdGgubWluKGksdCkpfSxfb25QYW5UcmFuc2l0aW9uU3RlcDpmdW5jdGlvbigpe3RoaXMuZmlyZShcIm1vdmVcIil9LF9vblBhblRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fbWFwUGFuZSxcImxlYWZsZXQtcGFuLWFuaW1cIiksdGhpcy5maXJlKFwibW92ZWVuZFwiKX0sX3RyeUFuaW1hdGVkUGFuOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fZ2V0Q2VudGVyT2Zmc2V0KHQpLl9mbG9vcigpO3JldHVybiEoKGUmJmUuYW5pbWF0ZSkhPT0hMCYmIXRoaXMuZ2V0U2l6ZSgpLmNvbnRhaW5zKGkpKSYmKHRoaXMucGFuQnkoaSxlKSwhMCl9LF9jcmVhdGVBbmltUHJveHk6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9wcm94eT1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsXCJsZWFmbGV0LXByb3h5IGxlYWZsZXQtem9vbS1hbmltYXRlZFwiKTt0aGlzLl9wYW5lcy5tYXBQYW5lLmFwcGVuZENoaWxkKHQpLHRoaXMub24oXCJ6b29tYW5pbVwiLGZ1bmN0aW9uKGUpe3ZhciBpPW8uRG9tVXRpbC5UUkFOU0ZPUk0sbj10LnN0eWxlW2ldO28uRG9tVXRpbC5zZXRUcmFuc2Zvcm0odCx0aGlzLnByb2plY3QoZS5jZW50ZXIsZS56b29tKSx0aGlzLmdldFpvb21TY2FsZShlLnpvb20sMSkpLG49PT10LnN0eWxlW2ldJiZ0aGlzLl9hbmltYXRpbmdab29tJiZ0aGlzLl9vblpvb21UcmFuc2l0aW9uRW5kKCl9LHRoaXMpLHRoaXMub24oXCJsb2FkIG1vdmVlbmRcIixmdW5jdGlvbigpe3ZhciBlPXRoaXMuZ2V0Q2VudGVyKCksaT10aGlzLmdldFpvb20oKTtvLkRvbVV0aWwuc2V0VHJhbnNmb3JtKHQsdGhpcy5wcm9qZWN0KGUsaSksdGhpcy5nZXRab29tU2NhbGUoaSwxKSl9LHRoaXMpfSxfY2F0Y2hUcmFuc2l0aW9uRW5kOmZ1bmN0aW9uKHQpe3RoaXMuX2FuaW1hdGluZ1pvb20mJnQucHJvcGVydHlOYW1lLmluZGV4T2YoXCJ0cmFuc2Zvcm1cIik+PTAmJnRoaXMuX29uWm9vbVRyYW5zaXRpb25FbmQoKX0sX25vdGhpbmdUb0FuaW1hdGU6ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5fY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIikubGVuZ3RofSxfdHJ5QW5pbWF0ZWRab29tOmZ1bmN0aW9uKHQsZSxpKXtpZih0aGlzLl9hbmltYXRpbmdab29tKXJldHVybiEwO2lmKGk9aXx8e30sIXRoaXMuX3pvb21BbmltYXRlZHx8aS5hbmltYXRlPT09ITF8fHRoaXMuX25vdGhpbmdUb0FuaW1hdGUoKXx8TWF0aC5hYnMoZS10aGlzLl96b29tKT50aGlzLm9wdGlvbnMuem9vbUFuaW1hdGlvblRocmVzaG9sZClyZXR1cm4hMTt2YXIgbj10aGlzLmdldFpvb21TY2FsZShlKSxzPXRoaXMuX2dldENlbnRlck9mZnNldCh0KS5fZGl2aWRlQnkoMS0xL24pO3JldHVybiEoaS5hbmltYXRlIT09ITAmJiF0aGlzLmdldFNpemUoKS5jb250YWlucyhzKSkmJihvLlV0aWwucmVxdWVzdEFuaW1GcmFtZShmdW5jdGlvbigpe3RoaXMuX21vdmVTdGFydCghMCkuX2FuaW1hdGVab29tKHQsZSwhMCl9LHRoaXMpLCEwKX0sX2FuaW1hdGVab29tOmZ1bmN0aW9uKHQsZSxpLG4pe2kmJih0aGlzLl9hbmltYXRpbmdab29tPSEwLHRoaXMuX2FuaW1hdGVUb0NlbnRlcj10LHRoaXMuX2FuaW1hdGVUb1pvb209ZSxvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fbWFwUGFuZSxcImxlYWZsZXQtem9vbS1hbmltXCIpKSx0aGlzLmZpcmUoXCJ6b29tYW5pbVwiLHtjZW50ZXI6dCx6b29tOmUsbm9VcGRhdGU6bn0pLHNldFRpbWVvdXQoby5iaW5kKHRoaXMuX29uWm9vbVRyYW5zaXRpb25FbmQsdGhpcyksMjUwKX0sX29uWm9vbVRyYW5zaXRpb25FbmQ6ZnVuY3Rpb24oKXt0aGlzLl9hbmltYXRpbmdab29tJiYoby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX21hcFBhbmUsXCJsZWFmbGV0LXpvb20tYW5pbVwiKSx0aGlzLl9hbmltYXRpbmdab29tPSExLHRoaXMuX21vdmUodGhpcy5fYW5pbWF0ZVRvQ2VudGVyLHRoaXMuX2FuaW1hdGVUb1pvb20pLG8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKGZ1bmN0aW9uKCl7dGhpcy5fbW92ZUVuZCghMCl9LHRoaXMpKX19KSxvLm1hcD1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5NYXAodCxlKX0sby5MYXllcj1vLkV2ZW50ZWQuZXh0ZW5kKHtvcHRpb25zOntwYW5lOlwib3ZlcmxheVBhbmVcIixub25CdWJibGluZ0V2ZW50czpbXSxhdHRyaWJ1dGlvbjpudWxsfSxhZGRUbzpmdW5jdGlvbih0KXtyZXR1cm4gdC5hZGRMYXllcih0aGlzKSx0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZW1vdmVGcm9tKHRoaXMuX21hcHx8dGhpcy5fbWFwVG9BZGQpfSxyZW1vdmVGcm9tOmZ1bmN0aW9uKHQpe3JldHVybiB0JiZ0LnJlbW92ZUxheWVyKHRoaXMpLHRoaXN9LGdldFBhbmU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21hcC5nZXRQYW5lKHQ/dGhpcy5vcHRpb25zW3RdfHx0OnRoaXMub3B0aW9ucy5wYW5lKX0sYWRkSW50ZXJhY3RpdmVUYXJnZXQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX21hcC5fdGFyZ2V0c1tvLnN0YW1wKHQpXT10aGlzLHRoaXN9LHJlbW92ZUludGVyYWN0aXZlVGFyZ2V0OmZ1bmN0aW9uKHQpe3JldHVybiBkZWxldGUgdGhpcy5fbWFwLl90YXJnZXRzW28uc3RhbXAodCldLHRoaXN9LGdldEF0dHJpYnV0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5hdHRyaWJ1dGlvbn0sX2xheWVyQWRkOmZ1bmN0aW9uKHQpe3ZhciBlPXQudGFyZ2V0O2lmKGUuaGFzTGF5ZXIodGhpcykpe2lmKHRoaXMuX21hcD1lLHRoaXMuX3pvb21BbmltYXRlZD1lLl96b29tQW5pbWF0ZWQsdGhpcy5nZXRFdmVudHMpe3ZhciBpPXRoaXMuZ2V0RXZlbnRzKCk7ZS5vbihpLHRoaXMpLHRoaXMub25jZShcInJlbW92ZVwiLGZ1bmN0aW9uKCl7ZS5vZmYoaSx0aGlzKX0sdGhpcyl9dGhpcy5vbkFkZChlKSx0aGlzLmdldEF0dHJpYnV0aW9uJiZlLmF0dHJpYnV0aW9uQ29udHJvbCYmZS5hdHRyaWJ1dGlvbkNvbnRyb2wuYWRkQXR0cmlidXRpb24odGhpcy5nZXRBdHRyaWJ1dGlvbigpKSx0aGlzLmZpcmUoXCJhZGRcIiksZS5maXJlKFwibGF5ZXJhZGRcIix7bGF5ZXI6dGhpc30pfX19KSxvLk1hcC5pbmNsdWRlKHthZGRMYXllcjpmdW5jdGlvbih0KXt2YXIgZT1vLnN0YW1wKHQpO3JldHVybiB0aGlzLl9sYXllcnNbZV0/dGhpczoodGhpcy5fbGF5ZXJzW2VdPXQsdC5fbWFwVG9BZGQ9dGhpcyx0LmJlZm9yZUFkZCYmdC5iZWZvcmVBZGQodGhpcyksdGhpcy53aGVuUmVhZHkodC5fbGF5ZXJBZGQsdCksdGhpcyl9LHJlbW92ZUxheWVyOmZ1bmN0aW9uKHQpe3ZhciBlPW8uc3RhbXAodCk7cmV0dXJuIHRoaXMuX2xheWVyc1tlXT8odGhpcy5fbG9hZGVkJiZ0Lm9uUmVtb3ZlKHRoaXMpLHQuZ2V0QXR0cmlidXRpb24mJnRoaXMuYXR0cmlidXRpb25Db250cm9sJiZ0aGlzLmF0dHJpYnV0aW9uQ29udHJvbC5yZW1vdmVBdHRyaWJ1dGlvbih0LmdldEF0dHJpYnV0aW9uKCkpLGRlbGV0ZSB0aGlzLl9sYXllcnNbZV0sdGhpcy5fbG9hZGVkJiYodGhpcy5maXJlKFwibGF5ZXJyZW1vdmVcIix7bGF5ZXI6dH0pLHQuZmlyZShcInJlbW92ZVwiKSksdC5fbWFwPXQuX21hcFRvQWRkPW51bGwsdGhpcyk6dGhpc30saGFzTGF5ZXI6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiZvLnN0YW1wKHQpaW4gdGhpcy5fbGF5ZXJzfSxlYWNoTGF5ZXI6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gdGhpcy5fbGF5ZXJzKXQuY2FsbChlLHRoaXMuX2xheWVyc1tpXSk7cmV0dXJuIHRoaXN9LF9hZGRMYXllcnM6ZnVuY3Rpb24odCl7dD10P28uVXRpbC5pc0FycmF5KHQpP3Q6W3RdOltdO2Zvcih2YXIgZT0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl0aGlzLmFkZExheWVyKHRbZV0pfSxfYWRkWm9vbUxpbWl0OmZ1bmN0aW9uKHQpeyFpc05hTih0Lm9wdGlvbnMubWF4Wm9vbSkmJmlzTmFOKHQub3B0aW9ucy5taW5ab29tKXx8KHRoaXMuX3pvb21Cb3VuZExheWVyc1tvLnN0YW1wKHQpXT10LHRoaXMuX3VwZGF0ZVpvb21MZXZlbHMoKSl9LF9yZW1vdmVab29tTGltaXQ6ZnVuY3Rpb24odCl7dmFyIGU9by5zdGFtcCh0KTt0aGlzLl96b29tQm91bmRMYXllcnNbZV0mJihkZWxldGUgdGhpcy5fem9vbUJvdW5kTGF5ZXJzW2VdLHRoaXMuX3VwZGF0ZVpvb21MZXZlbHMoKSl9LF91cGRhdGVab29tTGV2ZWxzOmZ1bmN0aW9uKCl7dmFyIHQ9MS8wLGU9LSgxLzApLG49dGhpcy5fZ2V0Wm9vbVNwYW4oKTtmb3IodmFyIG8gaW4gdGhpcy5fem9vbUJvdW5kTGF5ZXJzKXt2YXIgcz10aGlzLl96b29tQm91bmRMYXllcnNbb10ub3B0aW9uczt0PXMubWluWm9vbT09PWk/dDpNYXRoLm1pbih0LHMubWluWm9vbSksZT1zLm1heFpvb209PT1pP2U6TWF0aC5tYXgoZSxzLm1heFpvb20pfXRoaXMuX2xheWVyc01heFpvb209ZT09PS0oMS8wKT9pOmUsdGhpcy5fbGF5ZXJzTWluWm9vbT10PT09MS8wP2k6dCxuIT09dGhpcy5fZ2V0Wm9vbVNwYW4oKSYmdGhpcy5maXJlKFwiem9vbWxldmVsc2NoYW5nZVwiKSx0aGlzLm9wdGlvbnMubWF4Wm9vbT09PWkmJnRoaXMuX2xheWVyc01heFpvb20mJnRoaXMuZ2V0Wm9vbSgpPnRoaXMuX2xheWVyc01heFpvb20mJnRoaXMuc2V0Wm9vbSh0aGlzLl9sYXllcnNNYXhab29tKSx0aGlzLm9wdGlvbnMubWluWm9vbT09PWkmJnRoaXMuX2xheWVyc01pblpvb20mJnRoaXMuZ2V0Wm9vbSgpPHRoaXMuX2xheWVyc01pblpvb20mJnRoaXMuc2V0Wm9vbSh0aGlzLl9sYXllcnNNaW5ab29tKX19KTt2YXIgcj1cIl9sZWFmbGV0X2V2ZW50c1wiO28uRG9tRXZlbnQ9e29uOmZ1bmN0aW9uKHQsZSxpLG4pe2lmKFwib2JqZWN0XCI9PXR5cGVvZiBlKWZvcih2YXIgcyBpbiBlKXRoaXMuX29uKHQscyxlW3NdLGkpO2Vsc2V7ZT1vLlV0aWwuc3BsaXRXb3JkcyhlKTtmb3IodmFyIHI9MCxhPWUubGVuZ3RoO3I8YTtyKyspdGhpcy5fb24odCxlW3JdLGksbil9cmV0dXJuIHRoaXN9LG9mZjpmdW5jdGlvbih0LGUsaSxuKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZSlmb3IodmFyIHMgaW4gZSl0aGlzLl9vZmYodCxzLGVbc10saSk7ZWxzZXtlPW8uVXRpbC5zcGxpdFdvcmRzKGUpO2Zvcih2YXIgcj0wLGE9ZS5sZW5ndGg7cjxhO3IrKyl0aGlzLl9vZmYodCxlW3JdLGksbil9cmV0dXJuIHRoaXN9LF9vbjpmdW5jdGlvbihlLGksbixzKXt2YXIgYT1pK28uc3RhbXAobikrKHM/XCJfXCIrby5zdGFtcChzKTpcIlwiKTtpZihlW3JdJiZlW3JdW2FdKXJldHVybiB0aGlzO3ZhciBoPWZ1bmN0aW9uKGkpe3JldHVybiBuLmNhbGwoc3x8ZSxpfHx0LmV2ZW50KX0sbD1oO3JldHVybiBvLkJyb3dzZXIucG9pbnRlciYmMD09PWkuaW5kZXhPZihcInRvdWNoXCIpP3RoaXMuYWRkUG9pbnRlckxpc3RlbmVyKGUsaSxoLGEpOiFvLkJyb3dzZXIudG91Y2h8fFwiZGJsY2xpY2tcIiE9PWl8fCF0aGlzLmFkZERvdWJsZVRhcExpc3RlbmVyfHxvLkJyb3dzZXIucG9pbnRlciYmby5Ccm93c2VyLmNocm9tZT9cImFkZEV2ZW50TGlzdGVuZXJcImluIGU/XCJtb3VzZXdoZWVsXCI9PT1pP2UuYWRkRXZlbnRMaXN0ZW5lcihcIm9ud2hlZWxcImluIGU/XCJ3aGVlbFwiOlwibW91c2V3aGVlbFwiLGgsITEpOlwibW91c2VlbnRlclwiPT09aXx8XCJtb3VzZWxlYXZlXCI9PT1pPyhoPWZ1bmN0aW9uKGkpe2k9aXx8dC5ldmVudCxvLkRvbUV2ZW50Ll9pc0V4dGVybmFsVGFyZ2V0KGUsaSkmJmwoaSl9LGUuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIj09PWk/XCJtb3VzZW92ZXJcIjpcIm1vdXNlb3V0XCIsaCwhMSkpOihcImNsaWNrXCI9PT1pJiZvLkJyb3dzZXIuYW5kcm9pZCYmKGg9ZnVuY3Rpb24odCl7cmV0dXJuIG8uRG9tRXZlbnQuX2ZpbHRlckNsaWNrKHQsbCl9KSxlLmFkZEV2ZW50TGlzdGVuZXIoaSxoLCExKSk6XCJhdHRhY2hFdmVudFwiaW4gZSYmZS5hdHRhY2hFdmVudChcIm9uXCIraSxoKTp0aGlzLmFkZERvdWJsZVRhcExpc3RlbmVyKGUsaCxhKSxlW3JdPWVbcl18fHt9LGVbcl1bYV09aCx0aGlzfSxfb2ZmOmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBzPWUrby5zdGFtcChpKSsobj9cIl9cIitvLnN0YW1wKG4pOlwiXCIpLGE9dFtyXSYmdFtyXVtzXTtyZXR1cm4gYT8oby5Ccm93c2VyLnBvaW50ZXImJjA9PT1lLmluZGV4T2YoXCJ0b3VjaFwiKT90aGlzLnJlbW92ZVBvaW50ZXJMaXN0ZW5lcih0LGUscyk6by5Ccm93c2VyLnRvdWNoJiZcImRibGNsaWNrXCI9PT1lJiZ0aGlzLnJlbW92ZURvdWJsZVRhcExpc3RlbmVyP3RoaXMucmVtb3ZlRG91YmxlVGFwTGlzdGVuZXIodCxzKTpcInJlbW92ZUV2ZW50TGlzdGVuZXJcImluIHQ/XCJtb3VzZXdoZWVsXCI9PT1lP3QucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ud2hlZWxcImluIHQ/XCJ3aGVlbFwiOlwibW91c2V3aGVlbFwiLGEsITEpOnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIj09PWU/XCJtb3VzZW92ZXJcIjpcIm1vdXNlbGVhdmVcIj09PWU/XCJtb3VzZW91dFwiOmUsYSwhMSk6XCJkZXRhY2hFdmVudFwiaW4gdCYmdC5kZXRhY2hFdmVudChcIm9uXCIrZSxhKSx0W3JdW3NdPW51bGwsdGhpcyk6dGhpc30sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKHQpe3JldHVybiB0LnN0b3BQcm9wYWdhdGlvbj90LnN0b3BQcm9wYWdhdGlvbigpOnQub3JpZ2luYWxFdmVudD90Lm9yaWdpbmFsRXZlbnQuX3N0b3BwZWQ9ITA6dC5jYW5jZWxCdWJibGU9ITAsby5Eb21FdmVudC5fc2tpcHBlZCh0KSx0aGlzfSxkaXNhYmxlU2Nyb2xsUHJvcGFnYXRpb246ZnVuY3Rpb24odCl7cmV0dXJuIG8uRG9tRXZlbnQub24odCxcIm1vdXNld2hlZWxcIixvLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbil9LGRpc2FibGVDbGlja1Byb3BhZ2F0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPW8uRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uO3JldHVybiBvLkRvbUV2ZW50Lm9uKHQsby5EcmFnZ2FibGUuU1RBUlQuam9pbihcIiBcIiksZSksby5Eb21FdmVudC5vbih0LHtjbGljazpvLkRvbUV2ZW50Ll9mYWtlU3RvcCxkYmxjbGljazplfSl9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKHQpe3JldHVybiB0LnByZXZlbnREZWZhdWx0P3QucHJldmVudERlZmF1bHQoKTp0LnJldHVyblZhbHVlPSExLHRoaXN9LHN0b3A6ZnVuY3Rpb24odCl7cmV0dXJuIG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQodCkuc3RvcFByb3BhZ2F0aW9uKHQpfSxnZXRNb3VzZVBvc2l0aW9uOmZ1bmN0aW9uKHQsZSl7aWYoIWUpcmV0dXJuIG5ldyBvLlBvaW50KHQuY2xpZW50WCx0LmNsaWVudFkpO3ZhciBpPWUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIG5ldyBvLlBvaW50KHQuY2xpZW50WC1pLmxlZnQtZS5jbGllbnRMZWZ0LHQuY2xpZW50WS1pLnRvcC1lLmNsaWVudFRvcCl9LF93aGVlbFB4RmFjdG9yOm8uQnJvd3Nlci53aW4mJm8uQnJvd3Nlci5jaHJvbWU/MjpvLkJyb3dzZXIuZ2Vja28/dC5kZXZpY2VQaXhlbFJhdGlvOjEsZ2V0V2hlZWxEZWx0YTpmdW5jdGlvbih0KXtyZXR1cm4gby5Ccm93c2VyLmVkZ2U/dC53aGVlbERlbHRhWS8yOnQuZGVsdGFZJiYwPT09dC5kZWx0YU1vZGU/LXQuZGVsdGFZL28uRG9tRXZlbnQuX3doZWVsUHhGYWN0b3I6dC5kZWx0YVkmJjE9PT10LmRlbHRhTW9kZT8yMCotdC5kZWx0YVk6dC5kZWx0YVkmJjI9PT10LmRlbHRhTW9kZT82MCotdC5kZWx0YVk6dC5kZWx0YVh8fHQuZGVsdGFaPzA6dC53aGVlbERlbHRhPyh0LndoZWVsRGVsdGFZfHx0LndoZWVsRGVsdGEpLzI6dC5kZXRhaWwmJk1hdGguYWJzKHQuZGV0YWlsKTwzMjc2NT8yMCotdC5kZXRhaWw6dC5kZXRhaWw/dC5kZXRhaWwvLTMyNzY1KjYwOjB9LF9za2lwRXZlbnRzOnt9LF9mYWtlU3RvcDpmdW5jdGlvbih0KXtvLkRvbUV2ZW50Ll9za2lwRXZlbnRzW3QudHlwZV09ITB9LF9za2lwcGVkOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3NraXBFdmVudHNbdC50eXBlXTtyZXR1cm4gdGhpcy5fc2tpcEV2ZW50c1t0LnR5cGVdPSExLGV9LF9pc0V4dGVybmFsVGFyZ2V0OmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5yZWxhdGVkVGFyZ2V0O2lmKCFpKXJldHVybiEwO3RyeXtmb3IoO2kmJmkhPT10OylpPWkucGFyZW50Tm9kZX1jYXRjaCh0KXtyZXR1cm4hMX1yZXR1cm4gaSE9PXR9LF9maWx0ZXJDbGljazpmdW5jdGlvbih0LGUpe3ZhciBpPXQudGltZVN0YW1wfHx0Lm9yaWdpbmFsRXZlbnQmJnQub3JpZ2luYWxFdmVudC50aW1lU3RhbXAsbj1vLkRvbUV2ZW50Ll9sYXN0Q2xpY2smJmktby5Eb21FdmVudC5fbGFzdENsaWNrO3JldHVybiBuJiZuPjEwMCYmbjw1MDB8fHQudGFyZ2V0Ll9zaW11bGF0ZWRDbGljayYmIXQuX3NpbXVsYXRlZD92b2lkIG8uRG9tRXZlbnQuc3RvcCh0KTooby5Eb21FdmVudC5fbGFzdENsaWNrPWksdm9pZCBlKHQpKX19LG8uRG9tRXZlbnQuYWRkTGlzdGVuZXI9by5Eb21FdmVudC5vbixvLkRvbUV2ZW50LnJlbW92ZUxpc3RlbmVyPW8uRG9tRXZlbnQub2ZmLG8uUG9zQW5pbWF0aW9uPW8uRXZlbnRlZC5leHRlbmQoe3J1bjpmdW5jdGlvbih0LGUsaSxuKXt0aGlzLnN0b3AoKSx0aGlzLl9lbD10LHRoaXMuX2luUHJvZ3Jlc3M9ITAsdGhpcy5fZHVyYXRpb249aXx8LjI1LHRoaXMuX2Vhc2VPdXRQb3dlcj0xL01hdGgubWF4KG58fC41LC4yKSx0aGlzLl9zdGFydFBvcz1vLkRvbVV0aWwuZ2V0UG9zaXRpb24odCksdGhpcy5fb2Zmc2V0PWUuc3VidHJhY3QodGhpcy5fc3RhcnRQb3MpLHRoaXMuX3N0YXJ0VGltZT0rbmV3IERhdGUsdGhpcy5maXJlKFwic3RhcnRcIiksdGhpcy5fYW5pbWF0ZSgpfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5faW5Qcm9ncmVzcyYmKHRoaXMuX3N0ZXAoITApLHRoaXMuX2NvbXBsZXRlKCkpfSxfYW5pbWF0ZTpmdW5jdGlvbigpe3RoaXMuX2FuaW1JZD1vLlV0aWwucmVxdWVzdEFuaW1GcmFtZSh0aGlzLl9hbmltYXRlLHRoaXMpLHRoaXMuX3N0ZXAoKX0sX3N0ZXA6ZnVuY3Rpb24odCl7dmFyIGU9K25ldyBEYXRlLXRoaXMuX3N0YXJ0VGltZSxpPTFlMyp0aGlzLl9kdXJhdGlvbjtlPGk/dGhpcy5fcnVuRnJhbWUodGhpcy5fZWFzZU91dChlL2kpLHQpOih0aGlzLl9ydW5GcmFtZSgxKSx0aGlzLl9jb21wbGV0ZSgpKX0sX3J1bkZyYW1lOmZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpcy5fc3RhcnRQb3MuYWRkKHRoaXMuX29mZnNldC5tdWx0aXBseUJ5KHQpKTtlJiZpLl9yb3VuZCgpLG8uRG9tVXRpbC5zZXRQb3NpdGlvbih0aGlzLl9lbCxpKSx0aGlzLmZpcmUoXCJzdGVwXCIpfSxfY29tcGxldGU6ZnVuY3Rpb24oKXtvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2FuaW1JZCksdGhpcy5faW5Qcm9ncmVzcz0hMSx0aGlzLmZpcmUoXCJlbmRcIil9LF9lYXNlT3V0OmZ1bmN0aW9uKHQpe3JldHVybiAxLU1hdGgucG93KDEtdCx0aGlzLl9lYXNlT3V0UG93ZXIpfX0pLG8uUHJvamVjdGlvbi5NZXJjYXRvcj17Ujo2Mzc4MTM3LFJfTUlOT1I6NjM1Njc1Mi4zMTQyNDUxNzksYm91bmRzOm8uYm91bmRzKFstMjAwMzc1MDguMzQyNzksLTE1NDk2NTcwLjczOTcyXSxbMjAwMzc1MDguMzQyNzksMTg3NjQ2NTYuMjMxMzhdKSxwcm9qZWN0OmZ1bmN0aW9uKHQpe3ZhciBlPU1hdGguUEkvMTgwLGk9dGhpcy5SLG49dC5sYXQqZSxzPXRoaXMuUl9NSU5PUi9pLHI9TWF0aC5zcXJ0KDEtcypzKSxhPXIqTWF0aC5zaW4obiksaD1NYXRoLnRhbihNYXRoLlBJLzQtbi8yKS9NYXRoLnBvdygoMS1hKS8oMSthKSxyLzIpO3JldHVybiBuPS1pKk1hdGgubG9nKE1hdGgubWF4KGgsMWUtMTApKSxuZXcgby5Qb2ludCh0LmxuZyplKmksbil9LHVucHJvamVjdDpmdW5jdGlvbih0KXtmb3IodmFyIGUsaT0xODAvTWF0aC5QSSxuPXRoaXMuUixzPXRoaXMuUl9NSU5PUi9uLHI9TWF0aC5zcXJ0KDEtcypzKSxhPU1hdGguZXhwKC10LnkvbiksaD1NYXRoLlBJLzItMipNYXRoLmF0YW4oYSksbD0wLHU9LjE7bDwxNSYmTWF0aC5hYnModSk+MWUtNztsKyspZT1yKk1hdGguc2luKGgpLGU9TWF0aC5wb3coKDEtZSkvKDErZSksci8yKSx1PU1hdGguUEkvMi0yKk1hdGguYXRhbihhKmUpLWgsaCs9dTtyZXR1cm4gbmV3IG8uTGF0TG5nKGgqaSx0LngqaS9uKX19LG8uQ1JTLkVQU0czMzk1PW8uZXh0ZW5kKHt9LG8uQ1JTLkVhcnRoLHtjb2RlOlwiRVBTRzozMzk1XCIscHJvamVjdGlvbjpvLlByb2plY3Rpb24uTWVyY2F0b3IsdHJhbnNmb3JtYXRpb246ZnVuY3Rpb24oKXt2YXIgdD0uNS8oTWF0aC5QSSpvLlByb2plY3Rpb24uTWVyY2F0b3IuUik7cmV0dXJuIG5ldyBvLlRyYW5zZm9ybWF0aW9uKHQsLjUsLXQsLjUpfSgpfSksby5HcmlkTGF5ZXI9by5MYXllci5leHRlbmQoe29wdGlvbnM6e3RpbGVTaXplOjI1NixvcGFjaXR5OjEsdXBkYXRlV2hlbklkbGU6by5Ccm93c2VyLm1vYmlsZSx1cGRhdGVXaGVuWm9vbWluZzohMCx1cGRhdGVJbnRlcnZhbDoyMDAsekluZGV4OjEsYm91bmRzOm51bGwsbWluWm9vbTowLG1heFpvb206aSxub1dyYXA6ITEscGFuZTpcInRpbGVQYW5lXCIsY2xhc3NOYW1lOlwiXCIsa2VlcEJ1ZmZlcjoyfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe28uc2V0T3B0aW9ucyh0aGlzLHQpfSxvbkFkZDpmdW5jdGlvbigpe3RoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl9sZXZlbHM9e30sdGhpcy5fdGlsZXM9e30sdGhpcy5fcmVzZXRWaWV3KCksdGhpcy5fdXBkYXRlKCl9LGJlZm9yZUFkZDpmdW5jdGlvbih0KXt0Ll9hZGRab29tTGltaXQodGhpcyl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuX3JlbW92ZUFsbFRpbGVzKCksby5Eb21VdGlsLnJlbW92ZSh0aGlzLl9jb250YWluZXIpLHQuX3JlbW92ZVpvb21MaW1pdCh0aGlzKSx0aGlzLl9jb250YWluZXI9bnVsbCx0aGlzLl90aWxlWm9vbT1udWxsfSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwJiYoby5Eb21VdGlsLnRvRnJvbnQodGhpcy5fY29udGFpbmVyKSx0aGlzLl9zZXRBdXRvWkluZGV4KE1hdGgubWF4KSksdGhpc30sYnJpbmdUb0JhY2s6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwJiYoby5Eb21VdGlsLnRvQmFjayh0aGlzLl9jb250YWluZXIpLHRoaXMuX3NldEF1dG9aSW5kZXgoTWF0aC5taW4pKSx0aGlzfSxnZXRDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMub3BhY2l0eT10LHRoaXMuX3VwZGF0ZU9wYWNpdHkoKSx0aGlzfSxzZXRaSW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy56SW5kZXg9dCx0aGlzLl91cGRhdGVaSW5kZXgoKSx0aGlzfSxpc0xvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9hZGluZ30scmVkcmF3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmKHRoaXMuX3JlbW92ZUFsbFRpbGVzKCksdGhpcy5fdXBkYXRlKCkpLHRoaXN9LGdldEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PXt2aWV3cHJlcmVzZXQ6dGhpcy5faW52YWxpZGF0ZUFsbCx2aWV3cmVzZXQ6dGhpcy5fcmVzZXRWaWV3LHpvb206dGhpcy5fcmVzZXRWaWV3LG1vdmVlbmQ6dGhpcy5fb25Nb3ZlRW5kfTtyZXR1cm4gdGhpcy5vcHRpb25zLnVwZGF0ZVdoZW5JZGxlfHwodGhpcy5fb25Nb3ZlfHwodGhpcy5fb25Nb3ZlPW8uVXRpbC50aHJvdHRsZSh0aGlzLl9vbk1vdmVFbmQsdGhpcy5vcHRpb25zLnVwZGF0ZUludGVydmFsLHRoaXMpKSx0Lm1vdmU9dGhpcy5fb25Nb3ZlKSx0aGlzLl96b29tQW5pbWF0ZWQmJih0Lnpvb21hbmltPXRoaXMuX2FuaW1hdGVab29tKSx0fSxjcmVhdGVUaWxlOmZ1bmN0aW9uKCl7cmV0dXJuIGUuY3JlYXRlRWxlbWVudChcImRpdlwiKX0sZ2V0VGlsZVNpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLm9wdGlvbnMudGlsZVNpemU7cmV0dXJuIHQgaW5zdGFuY2VvZiBvLlBvaW50P3Q6bmV3IG8uUG9pbnQodCx0KX0sX3VwZGF0ZVpJbmRleDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lciYmdGhpcy5vcHRpb25zLnpJbmRleCE9PWkmJm51bGwhPT10aGlzLm9wdGlvbnMuekluZGV4JiYodGhpcy5fY29udGFpbmVyLnN0eWxlLnpJbmRleD10aGlzLm9wdGlvbnMuekluZGV4KX0sX3NldEF1dG9aSW5kZXg6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGk9dGhpcy5nZXRQYW5lKCkuY2hpbGRyZW4sbj0tdCgtKDEvMCksMS8wKSxvPTAscz1pLmxlbmd0aDtvPHM7bysrKWU9aVtvXS5zdHlsZS56SW5kZXgsaVtvXSE9PXRoaXMuX2NvbnRhaW5lciYmZSYmKG49dChuLCtlKSk7aXNGaW5pdGUobikmJih0aGlzLm9wdGlvbnMuekluZGV4PW4rdCgtMSwxKSx0aGlzLl91cGRhdGVaSW5kZXgoKSl9LF91cGRhdGVPcGFjaXR5OmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwJiYhby5Ccm93c2VyLmllbHQ5KXtvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9jb250YWluZXIsdGhpcy5vcHRpb25zLm9wYWNpdHkpO3ZhciB0PStuZXcgRGF0ZSxlPSExLGk9ITE7Zm9yKHZhciBuIGluIHRoaXMuX3RpbGVzKXt2YXIgcz10aGlzLl90aWxlc1tuXTtpZihzLmN1cnJlbnQmJnMubG9hZGVkKXt2YXIgcj1NYXRoLm1pbigxLCh0LXMubG9hZGVkKS8yMDApO28uRG9tVXRpbC5zZXRPcGFjaXR5KHMuZWwscikscjwxP2U9ITA6KHMuYWN0aXZlJiYoaT0hMCkscy5hY3RpdmU9ITApfX1pJiYhdGhpcy5fbm9QcnVuZSYmdGhpcy5fcHJ1bmVUaWxlcygpLGUmJihvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2ZhZGVGcmFtZSksdGhpcy5fZmFkZUZyYW1lPW8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKHRoaXMuX3VwZGF0ZU9wYWNpdHksdGhpcykpfX0sX2luaXRDb250YWluZXI6ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXJ8fCh0aGlzLl9jb250YWluZXI9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLFwibGVhZmxldC1sYXllciBcIisodGhpcy5vcHRpb25zLmNsYXNzTmFtZXx8XCJcIikpLHRoaXMuX3VwZGF0ZVpJbmRleCgpLHRoaXMub3B0aW9ucy5vcGFjaXR5PDEmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSx0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9jb250YWluZXIpKX0sX3VwZGF0ZUxldmVsczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX3RpbGVab29tLGU9dGhpcy5vcHRpb25zLm1heFpvb207aWYodD09PWkpcmV0dXJuIGk7Zm9yKHZhciBuIGluIHRoaXMuX2xldmVscyl0aGlzLl9sZXZlbHNbbl0uZWwuY2hpbGRyZW4ubGVuZ3RofHxuPT09dD90aGlzLl9sZXZlbHNbbl0uZWwuc3R5bGUuekluZGV4PWUtTWF0aC5hYnModC1uKTooby5Eb21VdGlsLnJlbW92ZSh0aGlzLl9sZXZlbHNbbl0uZWwpLHRoaXMuX3JlbW92ZVRpbGVzQXRab29tKG4pLGRlbGV0ZSB0aGlzLl9sZXZlbHNbbl0pO3ZhciBzPXRoaXMuX2xldmVsc1t0XSxyPXRoaXMuX21hcDtyZXR1cm4gc3x8KHM9dGhpcy5fbGV2ZWxzW3RdPXt9LHMuZWw9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLFwibGVhZmxldC10aWxlLWNvbnRhaW5lciBsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIix0aGlzLl9jb250YWluZXIpLHMuZWwuc3R5bGUuekluZGV4PWUscy5vcmlnaW49ci5wcm9qZWN0KHIudW5wcm9qZWN0KHIuZ2V0UGl4ZWxPcmlnaW4oKSksdCkucm91bmQoKSxzLnpvb209dCx0aGlzLl9zZXRab29tVHJhbnNmb3JtKHMsci5nZXRDZW50ZXIoKSxyLmdldFpvb20oKSksby5VdGlsLmZhbHNlRm4ocy5lbC5vZmZzZXRXaWR0aCkpLHRoaXMuX2xldmVsPXMsc30sX3BydW5lVGlsZXM6ZnVuY3Rpb24oKXtpZih0aGlzLl9tYXApe3ZhciB0LGUsaT10aGlzLl9tYXAuZ2V0Wm9vbSgpO2lmKGk+dGhpcy5vcHRpb25zLm1heFpvb218fGk8dGhpcy5vcHRpb25zLm1pblpvb20pcmV0dXJuIHZvaWQgdGhpcy5fcmVtb3ZlQWxsVGlsZXMoKTtmb3IodCBpbiB0aGlzLl90aWxlcyllPXRoaXMuX3RpbGVzW3RdLGUucmV0YWluPWUuY3VycmVudDtmb3IodCBpbiB0aGlzLl90aWxlcylpZihlPXRoaXMuX3RpbGVzW3RdLGUuY3VycmVudCYmIWUuYWN0aXZlKXt2YXIgbj1lLmNvb3Jkczt0aGlzLl9yZXRhaW5QYXJlbnQobi54LG4ueSxuLnosbi56LTUpfHx0aGlzLl9yZXRhaW5DaGlsZHJlbihuLngsbi55LG4ueixuLnorMil9Zm9yKHQgaW4gdGhpcy5fdGlsZXMpdGhpcy5fdGlsZXNbdF0ucmV0YWlufHx0aGlzLl9yZW1vdmVUaWxlKHQpfX0sX3JlbW92ZVRpbGVzQXRab29tOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLl90aWxlcyl0aGlzLl90aWxlc1tlXS5jb29yZHMuej09PXQmJnRoaXMuX3JlbW92ZVRpbGUoZSl9LF9yZW1vdmVBbGxUaWxlczpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl90aWxlcyl0aGlzLl9yZW1vdmVUaWxlKHQpfSxfaW52YWxpZGF0ZUFsbDpmdW5jdGlvbigpe2Zvcih2YXIgdCBpbiB0aGlzLl9sZXZlbHMpby5Eb21VdGlsLnJlbW92ZSh0aGlzLl9sZXZlbHNbdF0uZWwpLGRlbGV0ZSB0aGlzLl9sZXZlbHNbdF07dGhpcy5fcmVtb3ZlQWxsVGlsZXMoKSx0aGlzLl90aWxlWm9vbT1udWxsfSxfcmV0YWluUGFyZW50OmZ1bmN0aW9uKHQsZSxpLG4pe3ZhciBzPU1hdGguZmxvb3IodC8yKSxyPU1hdGguZmxvb3IoZS8yKSxhPWktMSxoPW5ldyBvLlBvaW50KCtzLCtyKTtoLno9K2E7dmFyIGw9dGhpcy5fdGlsZUNvb3Jkc1RvS2V5KGgpLHU9dGhpcy5fdGlsZXNbbF07cmV0dXJuIHUmJnUuYWN0aXZlPyh1LnJldGFpbj0hMCwhMCk6KHUmJnUubG9hZGVkJiYodS5yZXRhaW49ITApLGE+biYmdGhpcy5fcmV0YWluUGFyZW50KHMscixhLG4pKX0sX3JldGFpbkNoaWxkcmVuOmZ1bmN0aW9uKHQsZSxpLG4pe2Zvcih2YXIgcz0yKnQ7czwyKnQrMjtzKyspZm9yKHZhciByPTIqZTtyPDIqZSsyO3IrKyl7dmFyIGE9bmV3IG8uUG9pbnQocyxyKTthLno9aSsxO3ZhciBoPXRoaXMuX3RpbGVDb29yZHNUb0tleShhKSxsPXRoaXMuX3RpbGVzW2hdO2wmJmwuYWN0aXZlP2wucmV0YWluPSEwOihsJiZsLmxvYWRlZCYmKGwucmV0YWluPSEwKSxpKzE8biYmdGhpcy5fcmV0YWluQ2hpbGRyZW4ocyxyLGkrMSxuKSl9fSxfcmVzZXRWaWV3OmZ1bmN0aW9uKHQpe3ZhciBlPXQmJih0LnBpbmNofHx0LmZseVRvKTt0aGlzLl9zZXRWaWV3KHRoaXMuX21hcC5nZXRDZW50ZXIoKSx0aGlzLl9tYXAuZ2V0Wm9vbSgpLGUsZSl9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt0aGlzLl9zZXRWaWV3KHQuY2VudGVyLHQuem9vbSwhMCx0Lm5vVXBkYXRlKX0sX3NldFZpZXc6ZnVuY3Rpb24odCxlLG4sbyl7dmFyIHM9TWF0aC5yb3VuZChlKTsodGhpcy5vcHRpb25zLm1heFpvb20hPT1pJiZzPnRoaXMub3B0aW9ucy5tYXhab29tfHx0aGlzLm9wdGlvbnMubWluWm9vbSE9PWkmJnM8dGhpcy5vcHRpb25zLm1pblpvb20pJiYocz1pKTt2YXIgcj10aGlzLm9wdGlvbnMudXBkYXRlV2hlblpvb21pbmcmJnMhPT10aGlzLl90aWxlWm9vbTtvJiYhcnx8KHRoaXMuX3RpbGVab29tPXMsdGhpcy5fYWJvcnRMb2FkaW5nJiZ0aGlzLl9hYm9ydExvYWRpbmcoKSx0aGlzLl91cGRhdGVMZXZlbHMoKSx0aGlzLl9yZXNldEdyaWQoKSxzIT09aSYmdGhpcy5fdXBkYXRlKHQpLG58fHRoaXMuX3BydW5lVGlsZXMoKSx0aGlzLl9ub1BydW5lPSEhbiksdGhpcy5fc2V0Wm9vbVRyYW5zZm9ybXModCxlKX0sX3NldFpvb21UcmFuc2Zvcm1zOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIHRoaXMuX2xldmVscyl0aGlzLl9zZXRab29tVHJhbnNmb3JtKHRoaXMuX2xldmVsc1tpXSx0LGUpfSxfc2V0Wm9vbVRyYW5zZm9ybTpmdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcy5fbWFwLmdldFpvb21TY2FsZShpLHQuem9vbSkscz10Lm9yaWdpbi5tdWx0aXBseUJ5KG4pLnN1YnRyYWN0KHRoaXMuX21hcC5fZ2V0TmV3UGl4ZWxPcmlnaW4oZSxpKSkucm91bmQoKTtvLkJyb3dzZXIuYW55M2Q/by5Eb21VdGlsLnNldFRyYW5zZm9ybSh0LmVsLHMsbik6by5Eb21VdGlsLnNldFBvc2l0aW9uKHQuZWwscyl9LF9yZXNldEdyaWQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXAsZT10Lm9wdGlvbnMuY3JzLGk9dGhpcy5fdGlsZVNpemU9dGhpcy5nZXRUaWxlU2l6ZSgpLG49dGhpcy5fdGlsZVpvb20sbz10aGlzLl9tYXAuZ2V0UGl4ZWxXb3JsZEJvdW5kcyh0aGlzLl90aWxlWm9vbSk7byYmKHRoaXMuX2dsb2JhbFRpbGVSYW5nZT10aGlzLl9weEJvdW5kc1RvVGlsZVJhbmdlKG8pKSx0aGlzLl93cmFwWD1lLndyYXBMbmcmJiF0aGlzLm9wdGlvbnMubm9XcmFwJiZbTWF0aC5mbG9vcih0LnByb2plY3QoWzAsZS53cmFwTG5nWzBdXSxuKS54L2kueCksTWF0aC5jZWlsKHQucHJvamVjdChbMCxlLndyYXBMbmdbMV1dLG4pLngvaS55KV0sdGhpcy5fd3JhcFk9ZS53cmFwTGF0JiYhdGhpcy5vcHRpb25zLm5vV3JhcCYmW01hdGguZmxvb3IodC5wcm9qZWN0KFtlLndyYXBMYXRbMF0sMF0sbikueS9pLngpLE1hdGguY2VpbCh0LnByb2plY3QoW2Uud3JhcExhdFsxXSwwXSxuKS55L2kueSldfSxfb25Nb3ZlRW5kOmZ1bmN0aW9uKCl7dGhpcy5fbWFwJiYhdGhpcy5fbWFwLl9hbmltYXRpbmdab29tJiZ0aGlzLl91cGRhdGUoKX0sX2dldFRpbGVkUGl4ZWxCb3VuZHM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLGk9ZS5fYW5pbWF0aW5nWm9vbT9NYXRoLm1heChlLl9hbmltYXRlVG9ab29tLGUuZ2V0Wm9vbSgpKTplLmdldFpvb20oKSxuPWUuZ2V0Wm9vbVNjYWxlKGksdGhpcy5fdGlsZVpvb20pLHM9ZS5wcm9qZWN0KHQsdGhpcy5fdGlsZVpvb20pLmZsb29yKCkscj1lLmdldFNpemUoKS5kaXZpZGVCeSgyKm4pO3JldHVybiBuZXcgby5Cb3VuZHMocy5zdWJ0cmFjdChyKSxzLmFkZChyKSl9LF91cGRhdGU6ZnVuY3Rpb24odCl7dmFyIG49dGhpcy5fbWFwO2lmKG4pe3ZhciBzPW4uZ2V0Wm9vbSgpO2lmKHQ9PT1pJiYodD1uLmdldENlbnRlcigpKSx0aGlzLl90aWxlWm9vbSE9PWkpe3ZhciByPXRoaXMuX2dldFRpbGVkUGl4ZWxCb3VuZHModCksYT10aGlzLl9weEJvdW5kc1RvVGlsZVJhbmdlKHIpLGg9YS5nZXRDZW50ZXIoKSxsPVtdLHU9dGhpcy5vcHRpb25zLmtlZXBCdWZmZXIsYz1uZXcgby5Cb3VuZHMoYS5nZXRCb3R0b21MZWZ0KCkuc3VidHJhY3QoW3UsLXVdKSxhLmdldFRvcFJpZ2h0KCkuYWRkKFt1LC11XSkpO2Zvcih2YXIgZCBpbiB0aGlzLl90aWxlcyl7dmFyIF89dGhpcy5fdGlsZXNbZF0uY29vcmRzO18uej09PXRoaXMuX3RpbGVab29tJiZjLmNvbnRhaW5zKG8ucG9pbnQoXy54LF8ueSkpfHwodGhpcy5fdGlsZXNbZF0uY3VycmVudD0hMSl9aWYoTWF0aC5hYnMocy10aGlzLl90aWxlWm9vbSk+MSlyZXR1cm4gdm9pZCB0aGlzLl9zZXRWaWV3KHQscyk7Zm9yKHZhciBtPWEubWluLnk7bTw9YS5tYXgueTttKyspZm9yKHZhciBwPWEubWluLng7cDw9YS5tYXgueDtwKyspe3ZhciBmPW5ldyBvLlBvaW50KHAsbSk7aWYoZi56PXRoaXMuX3RpbGVab29tLHRoaXMuX2lzVmFsaWRUaWxlKGYpKXt2YXIgZz10aGlzLl90aWxlc1t0aGlzLl90aWxlQ29vcmRzVG9LZXkoZildO2c/Zy5jdXJyZW50PSEwOmwucHVzaChmKX19aWYobC5zb3J0KGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuZGlzdGFuY2VUbyhoKS1lLmRpc3RhbmNlVG8oaCl9KSwwIT09bC5sZW5ndGgpe3RoaXMuX2xvYWRpbmd8fCh0aGlzLl9sb2FkaW5nPSEwLHRoaXMuZmlyZShcImxvYWRpbmdcIikpO3ZhciB2PWUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2ZvcihwPTA7cDxsLmxlbmd0aDtwKyspdGhpcy5fYWRkVGlsZShsW3BdLHYpO3RoaXMuX2xldmVsLmVsLmFwcGVuZENoaWxkKHYpfX19fSxfaXNWYWxpZFRpbGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLm9wdGlvbnMuY3JzO2lmKCFlLmluZmluaXRlKXt2YXIgaT10aGlzLl9nbG9iYWxUaWxlUmFuZ2U7aWYoIWUud3JhcExuZyYmKHQueDxpLm1pbi54fHx0Lng+aS5tYXgueCl8fCFlLndyYXBMYXQmJih0Lnk8aS5taW4ueXx8dC55PmkubWF4LnkpKXJldHVybiExfWlmKCF0aGlzLm9wdGlvbnMuYm91bmRzKXJldHVybiEwO3ZhciBuPXRoaXMuX3RpbGVDb29yZHNUb0JvdW5kcyh0KTtyZXR1cm4gby5sYXRMbmdCb3VuZHModGhpcy5vcHRpb25zLmJvdW5kcykub3ZlcmxhcHMobil9LF9rZXlUb0JvdW5kczpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGlsZUNvb3Jkc1RvQm91bmRzKHRoaXMuX2tleVRvVGlsZUNvb3Jkcyh0KSl9LF90aWxlQ29vcmRzVG9Cb3VuZHM6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLGk9dGhpcy5nZXRUaWxlU2l6ZSgpLG49dC5zY2FsZUJ5KGkpLHM9bi5hZGQoaSkscj1lLnVucHJvamVjdChuLHQueiksYT1lLnVucHJvamVjdChzLHQueiksaD1uZXcgby5MYXRMbmdCb3VuZHMocixhKTtyZXR1cm4gdGhpcy5vcHRpb25zLm5vV3JhcHx8ZS53cmFwTGF0TG5nQm91bmRzKGgpLGh9LF90aWxlQ29vcmRzVG9LZXk6ZnVuY3Rpb24odCl7cmV0dXJuIHQueCtcIjpcIit0LnkrXCI6XCIrdC56fSxfa2V5VG9UaWxlQ29vcmRzOmZ1bmN0aW9uKHQpe3ZhciBlPXQuc3BsaXQoXCI6XCIpLGk9bmV3IG8uUG9pbnQoK2VbMF0sK2VbMV0pO3JldHVybiBpLno9K2VbMl0saX0sX3JlbW92ZVRpbGU6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGlsZXNbdF07ZSYmKG8uRG9tVXRpbC5yZW1vdmUoZS5lbCksZGVsZXRlIHRoaXMuX3RpbGVzW3RdLHRoaXMuZmlyZShcInRpbGV1bmxvYWRcIix7dGlsZTplLmVsLGNvb3Jkczp0aGlzLl9rZXlUb1RpbGVDb29yZHModCl9KSl9LF9pbml0VGlsZTpmdW5jdGlvbih0KXtvLkRvbVV0aWwuYWRkQ2xhc3ModCxcImxlYWZsZXQtdGlsZVwiKTt2YXIgZT10aGlzLmdldFRpbGVTaXplKCk7dC5zdHlsZS53aWR0aD1lLngrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PWUueStcInB4XCIsdC5vbnNlbGVjdHN0YXJ0PW8uVXRpbC5mYWxzZUZuLHQub25tb3VzZW1vdmU9by5VdGlsLmZhbHNlRm4sby5Ccm93c2VyLmllbHQ5JiZ0aGlzLm9wdGlvbnMub3BhY2l0eTwxJiZvLkRvbVV0aWwuc2V0T3BhY2l0eSh0LHRoaXMub3B0aW9ucy5vcGFjaXR5KSxvLkJyb3dzZXIuYW5kcm9pZCYmIW8uQnJvd3Nlci5hbmRyb2lkMjMmJih0LnN0eWxlLldlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eT1cImhpZGRlblwiKX0sX2FkZFRpbGU6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRUaWxlUG9zKHQpLG49dGhpcy5fdGlsZUNvb3Jkc1RvS2V5KHQpLHM9dGhpcy5jcmVhdGVUaWxlKHRoaXMuX3dyYXBDb29yZHModCksby5iaW5kKHRoaXMuX3RpbGVSZWFkeSx0aGlzLHQpKTt0aGlzLl9pbml0VGlsZShzKSx0aGlzLmNyZWF0ZVRpbGUubGVuZ3RoPDImJm8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKG8uYmluZCh0aGlzLl90aWxlUmVhZHksdGhpcyx0LG51bGwscykpLG8uRG9tVXRpbC5zZXRQb3NpdGlvbihzLGkpLHRoaXMuX3RpbGVzW25dPXtlbDpzLGNvb3Jkczp0LGN1cnJlbnQ6ITB9LGUuYXBwZW5kQ2hpbGQocyksdGhpcy5maXJlKFwidGlsZWxvYWRzdGFydFwiLHt0aWxlOnMsY29vcmRzOnR9KX0sX3RpbGVSZWFkeTpmdW5jdGlvbih0LGUsaSl7aWYodGhpcy5fbWFwKXtlJiZ0aGlzLmZpcmUoXCJ0aWxlZXJyb3JcIix7ZXJyb3I6ZSx0aWxlOmksY29vcmRzOnR9KTt2YXIgbj10aGlzLl90aWxlQ29vcmRzVG9LZXkodCk7aT10aGlzLl90aWxlc1tuXSxpJiYoaS5sb2FkZWQ9K25ldyBEYXRlLHRoaXMuX21hcC5fZmFkZUFuaW1hdGVkPyhvLkRvbVV0aWwuc2V0T3BhY2l0eShpLmVsLDApLG8uVXRpbC5jYW5jZWxBbmltRnJhbWUodGhpcy5fZmFkZUZyYW1lKSx0aGlzLl9mYWRlRnJhbWU9by5VdGlsLnJlcXVlc3RBbmltRnJhbWUodGhpcy5fdXBkYXRlT3BhY2l0eSx0aGlzKSk6KGkuYWN0aXZlPSEwLHRoaXMuX3BydW5lVGlsZXMoKSksZXx8KG8uRG9tVXRpbC5hZGRDbGFzcyhpLmVsLFwibGVhZmxldC10aWxlLWxvYWRlZFwiKSx0aGlzLmZpcmUoXCJ0aWxlbG9hZFwiLHt0aWxlOmkuZWwsY29vcmRzOnR9KSksdGhpcy5fbm9UaWxlc1RvTG9hZCgpJiYodGhpcy5fbG9hZGluZz0hMSx0aGlzLmZpcmUoXCJsb2FkXCIpLG8uQnJvd3Nlci5pZWx0OXx8IXRoaXMuX21hcC5fZmFkZUFuaW1hdGVkP28uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKHRoaXMuX3BydW5lVGlsZXMsdGhpcyk6c2V0VGltZW91dChvLmJpbmQodGhpcy5fcHJ1bmVUaWxlcyx0aGlzKSwyNTApKSl9fSxfZ2V0VGlsZVBvczpmdW5jdGlvbih0KXtyZXR1cm4gdC5zY2FsZUJ5KHRoaXMuZ2V0VGlsZVNpemUoKSkuc3VidHJhY3QodGhpcy5fbGV2ZWwub3JpZ2luKX0sX3dyYXBDb29yZHM6ZnVuY3Rpb24odCl7dmFyIGU9bmV3IG8uUG9pbnQodGhpcy5fd3JhcFg/by5VdGlsLndyYXBOdW0odC54LHRoaXMuX3dyYXBYKTp0LngsdGhpcy5fd3JhcFk/by5VdGlsLndyYXBOdW0odC55LHRoaXMuX3dyYXBZKTp0LnkpO3JldHVybiBlLno9dC56LGV9LF9weEJvdW5kc1RvVGlsZVJhbmdlOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0VGlsZVNpemUoKTtyZXR1cm4gbmV3IG8uQm91bmRzKHQubWluLnVuc2NhbGVCeShlKS5mbG9vcigpLHQubWF4LnVuc2NhbGVCeShlKS5jZWlsKCkuc3VidHJhY3QoWzEsMV0pKX0sX25vVGlsZXNUb0xvYWQ6ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5fdGlsZXMpaWYoIXRoaXMuX3RpbGVzW3RdLmxvYWRlZClyZXR1cm4hMTtyZXR1cm4hMH19KSxvLmdyaWRMYXllcj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uR3JpZExheWVyKHQpfSxvLlRpbGVMYXllcj1vLkdyaWRMYXllci5leHRlbmQoe29wdGlvbnM6e21pblpvb206MCxtYXhab29tOjE4LG1heE5hdGl2ZVpvb206bnVsbCxtaW5OYXRpdmVab29tOm51bGwsc3ViZG9tYWluczpcImFiY1wiLGVycm9yVGlsZVVybDpcIlwiLHpvb21PZmZzZXQ6MCx0bXM6ITEsem9vbVJldmVyc2U6ITEsZGV0ZWN0UmV0aW5hOiExLGNyb3NzT3JpZ2luOiExfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7dGhpcy5fdXJsPXQsZT1vLnNldE9wdGlvbnModGhpcyxlKSxlLmRldGVjdFJldGluYSYmby5Ccm93c2VyLnJldGluYSYmZS5tYXhab29tPjAmJihlLnRpbGVTaXplPU1hdGguZmxvb3IoZS50aWxlU2l6ZS8yKSxlLnpvb21SZXZlcnNlPyhlLnpvb21PZmZzZXQtLSxlLm1pblpvb20rKyk6KGUuem9vbU9mZnNldCsrLGUubWF4Wm9vbS0tKSxlLm1pblpvb209TWF0aC5tYXgoMCxlLm1pblpvb20pKSxcInN0cmluZ1wiPT10eXBlb2YgZS5zdWJkb21haW5zJiYoZS5zdWJkb21haW5zPWUuc3ViZG9tYWlucy5zcGxpdChcIlwiKSksby5Ccm93c2VyLmFuZHJvaWR8fHRoaXMub24oXCJ0aWxldW5sb2FkXCIsdGhpcy5fb25UaWxlUmVtb3ZlKX0sc2V0VXJsOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuX3VybD10LGV8fHRoaXMucmVkcmF3KCksdGhpc30sY3JlYXRlVGlsZTpmdW5jdGlvbih0LGkpe3ZhciBuPWUuY3JlYXRlRWxlbWVudChcImltZ1wiKTtyZXR1cm4gby5Eb21FdmVudC5vbihuLFwibG9hZFwiLG8uYmluZCh0aGlzLl90aWxlT25Mb2FkLHRoaXMsaSxuKSksby5Eb21FdmVudC5vbihuLFwiZXJyb3JcIixvLmJpbmQodGhpcy5fdGlsZU9uRXJyb3IsdGhpcyxpLG4pKSx0aGlzLm9wdGlvbnMuY3Jvc3NPcmlnaW4mJihuLmNyb3NzT3JpZ2luPVwiXCIpLG4uYWx0PVwiXCIsbi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksbi5zcmM9dGhpcy5nZXRUaWxlVXJsKHQpLG59LGdldFRpbGVVcmw6ZnVuY3Rpb24odCl7dmFyIGU9e3I6by5Ccm93c2VyLnJldGluYT9cIkAyeFwiOlwiXCIsczp0aGlzLl9nZXRTdWJkb21haW4odCkseDp0LngseTp0Lnksejp0aGlzLl9nZXRab29tRm9yVXJsKCl9O2lmKHRoaXMuX21hcCYmIXRoaXMuX21hcC5vcHRpb25zLmNycy5pbmZpbml0ZSl7dmFyIGk9dGhpcy5fZ2xvYmFsVGlsZVJhbmdlLm1heC55LXQueTt0aGlzLm9wdGlvbnMudG1zJiYoZS55PWkpLGVbXCIteVwiXT1pfXJldHVybiBvLlV0aWwudGVtcGxhdGUodGhpcy5fdXJsLG8uZXh0ZW5kKGUsdGhpcy5vcHRpb25zKSl9LF90aWxlT25Mb2FkOmZ1bmN0aW9uKHQsZSl7by5Ccm93c2VyLmllbHQ5P3NldFRpbWVvdXQoby5iaW5kKHQsdGhpcyxudWxsLGUpLDApOnQobnVsbCxlKX0sX3RpbGVPbkVycm9yOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzLm9wdGlvbnMuZXJyb3JUaWxlVXJsO24mJmUuc3JjIT09biYmKGUuc3JjPW4pLHQoaSxlKX0sZ2V0VGlsZVNpemU6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXAsZT1vLkdyaWRMYXllci5wcm90b3R5cGUuZ2V0VGlsZVNpemUuY2FsbCh0aGlzKSxpPXRoaXMuX3RpbGVab29tK3RoaXMub3B0aW9ucy56b29tT2Zmc2V0LG49dGhpcy5vcHRpb25zLm1pbk5hdGl2ZVpvb20scz10aGlzLm9wdGlvbnMubWF4TmF0aXZlWm9vbTtyZXR1cm4gbnVsbCE9PW4mJmk8bj9lLmRpdmlkZUJ5KHQuZ2V0Wm9vbVNjYWxlKG4saSkpLnJvdW5kKCk6bnVsbCE9PXMmJmk+cz9lLmRpdmlkZUJ5KHQuZ2V0Wm9vbVNjYWxlKHMsaSkpLnJvdW5kKCk6ZX0sX29uVGlsZVJlbW92ZTpmdW5jdGlvbih0KXt0LnRpbGUub25sb2FkPW51bGx9LF9nZXRab29tRm9yVXJsOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fdGlsZVpvb20sZT10aGlzLm9wdGlvbnMubWF4Wm9vbSxpPXRoaXMub3B0aW9ucy56b29tUmV2ZXJzZSxuPXRoaXMub3B0aW9ucy56b29tT2Zmc2V0LG89dGhpcy5vcHRpb25zLm1pbk5hdGl2ZVpvb20scz10aGlzLm9wdGlvbnMubWF4TmF0aXZlWm9vbTtyZXR1cm4gaSYmKHQ9ZS10KSx0Kz1uLG51bGwhPT1vJiZ0PG8/bzpudWxsIT09cyYmdD5zP3M6dH0sX2dldFN1YmRvbWFpbjpmdW5jdGlvbih0KXt2YXIgZT1NYXRoLmFicyh0LngrdC55KSV0aGlzLm9wdGlvbnMuc3ViZG9tYWlucy5sZW5ndGg7cmV0dXJuIHRoaXMub3B0aW9ucy5zdWJkb21haW5zW2VdfSxfYWJvcnRMb2FkaW5nOmZ1bmN0aW9uKCl7dmFyIHQsZTtmb3IodCBpbiB0aGlzLl90aWxlcyl0aGlzLl90aWxlc1t0XS5jb29yZHMueiE9PXRoaXMuX3RpbGVab29tJiYoZT10aGlzLl90aWxlc1t0XS5lbCxlLm9ubG9hZD1vLlV0aWwuZmFsc2VGbixlLm9uZXJyb3I9by5VdGlsLmZhbHNlRm4sZS5jb21wbGV0ZXx8KGUuc3JjPW8uVXRpbC5lbXB0eUltYWdlVXJsLG8uRG9tVXRpbC5yZW1vdmUoZSkpKX19KSxvLnRpbGVMYXllcj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5UaWxlTGF5ZXIodCxlKX0sby5UaWxlTGF5ZXIuV01TPW8uVGlsZUxheWVyLmV4dGVuZCh7ZGVmYXVsdFdtc1BhcmFtczp7c2VydmljZTpcIldNU1wiLHJlcXVlc3Q6XCJHZXRNYXBcIixsYXllcnM6XCJcIixzdHlsZXM6XCJcIixmb3JtYXQ6XCJpbWFnZS9qcGVnXCIsdHJhbnNwYXJlbnQ6ITEsdmVyc2lvbjpcIjEuMS4xXCJ9LG9wdGlvbnM6e2NyczpudWxsLHVwcGVyY2FzZTohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe3RoaXMuX3VybD10O3ZhciBpPW8uZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdFdtc1BhcmFtcyk7Zm9yKHZhciBuIGluIGUpbiBpbiB0aGlzLm9wdGlvbnN8fChpW25dPWVbbl0pO2U9by5zZXRPcHRpb25zKHRoaXMsZSksaS53aWR0aD1pLmhlaWdodD1lLnRpbGVTaXplKihlLmRldGVjdFJldGluYSYmby5Ccm93c2VyLnJldGluYT8yOjEpLHRoaXMud21zUGFyYW1zPWl9LG9uQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX2Nycz10aGlzLm9wdGlvbnMuY3JzfHx0Lm9wdGlvbnMuY3JzLHRoaXMuX3dtc1ZlcnNpb249cGFyc2VGbG9hdCh0aGlzLndtc1BhcmFtcy52ZXJzaW9uKTt2YXIgZT10aGlzLl93bXNWZXJzaW9uPj0xLjM/XCJjcnNcIjpcInNyc1wiO3RoaXMud21zUGFyYW1zW2VdPXRoaXMuX2Nycy5jb2RlLG8uVGlsZUxheWVyLnByb3RvdHlwZS5vbkFkZC5jYWxsKHRoaXMsdCl9LGdldFRpbGVVcmw6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fdGlsZUNvb3Jkc1RvQm91bmRzKHQpLGk9dGhpcy5fY3JzLnByb2plY3QoZS5nZXROb3J0aFdlc3QoKSksbj10aGlzLl9jcnMucHJvamVjdChlLmdldFNvdXRoRWFzdCgpKSxzPSh0aGlzLl93bXNWZXJzaW9uPj0xLjMmJnRoaXMuX2Nycz09PW8uQ1JTLkVQU0c0MzI2P1tuLnksaS54LGkueSxuLnhdOltpLngsbi55LG4ueCxpLnldKS5qb2luKFwiLFwiKSxyPW8uVGlsZUxheWVyLnByb3RvdHlwZS5nZXRUaWxlVXJsLmNhbGwodGhpcyx0KTtyZXR1cm4gcitvLlV0aWwuZ2V0UGFyYW1TdHJpbmcodGhpcy53bXNQYXJhbXMscix0aGlzLm9wdGlvbnMudXBwZXJjYXNlKSsodGhpcy5vcHRpb25zLnVwcGVyY2FzZT9cIiZCQk9YPVwiOlwiJmJib3g9XCIpK3N9LHNldFBhcmFtczpmdW5jdGlvbih0LGUpe3JldHVybiBvLmV4dGVuZCh0aGlzLndtc1BhcmFtcyx0KSxlfHx0aGlzLnJlZHJhdygpLHRoaXN9fSksby50aWxlTGF5ZXIud21zPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLlRpbGVMYXllci5XTVModCxlKX0sby5JbWFnZU92ZXJsYXk9by5MYXllci5leHRlbmQoe29wdGlvbnM6e29wYWNpdHk6MSxhbHQ6XCJcIixpbnRlcmFjdGl2ZTohMSxjcm9zc09yaWdpbjohMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5fdXJsPXQsdGhpcy5fYm91bmRzPW8ubGF0TG5nQm91bmRzKGUpLG8uc2V0T3B0aW9ucyh0aGlzLGkpfSxvbkFkZDpmdW5jdGlvbigpe3RoaXMuX2ltYWdlfHwodGhpcy5faW5pdEltYWdlKCksdGhpcy5vcHRpb25zLm9wYWNpdHk8MSYmdGhpcy5fdXBkYXRlT3BhY2l0eSgpKSx0aGlzLm9wdGlvbnMuaW50ZXJhY3RpdmUmJihvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5faW1hZ2UsXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuYWRkSW50ZXJhY3RpdmVUYXJnZXQodGhpcy5faW1hZ2UpKSx0aGlzLmdldFBhbmUoKS5hcHBlbmRDaGlsZCh0aGlzLl9pbWFnZSksdGhpcy5fcmVzZXQoKX0sb25SZW1vdmU6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlKHRoaXMuX2ltYWdlKSx0aGlzLm9wdGlvbnMuaW50ZXJhY3RpdmUmJnRoaXMucmVtb3ZlSW50ZXJhY3RpdmVUYXJnZXQodGhpcy5faW1hZ2UpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMub3BhY2l0eT10LHRoaXMuX2ltYWdlJiZ0aGlzLl91cGRhdGVPcGFjaXR5KCksdGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHQub3BhY2l0eSYmdGhpcy5zZXRPcGFjaXR5KHQub3BhY2l0eSksdGhpc30sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmby5Eb21VdGlsLnRvRnJvbnQodGhpcy5faW1hZ2UpLHRoaXN9LGJyaW5nVG9CYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmby5Eb21VdGlsLnRvQmFjayh0aGlzLl9pbWFnZSksdGhpc30sc2V0VXJsOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl91cmw9dCx0aGlzLl9pbWFnZSYmKHRoaXMuX2ltYWdlLnNyYz10KSx0aGlzfSxzZXRCb3VuZHM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2JvdW5kcz10LHRoaXMuX21hcCYmdGhpcy5fcmVzZXQoKSx0aGlzfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD17em9vbTp0aGlzLl9yZXNldCx2aWV3cmVzZXQ6dGhpcy5fcmVzZXR9O3JldHVybiB0aGlzLl96b29tQW5pbWF0ZWQmJih0Lnpvb21hbmltPXRoaXMuX2FuaW1hdGVab29tKSx0fSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm91bmRzfSxnZXRFbGVtZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltYWdlfSxfaW5pdEltYWdlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5faW1hZ2U9by5Eb21VdGlsLmNyZWF0ZShcImltZ1wiLFwibGVhZmxldC1pbWFnZS1sYXllciBcIisodGhpcy5fem9vbUFuaW1hdGVkP1wibGVhZmxldC16b29tLWFuaW1hdGVkXCI6XCJcIikpO3Qub25zZWxlY3RzdGFydD1vLlV0aWwuZmFsc2VGbix0Lm9ubW91c2Vtb3ZlPW8uVXRpbC5mYWxzZUZuLHQub25sb2FkPW8uYmluZCh0aGlzLmZpcmUsdGhpcyxcImxvYWRcIiksdGhpcy5vcHRpb25zLmNyb3NzT3JpZ2luJiYodC5jcm9zc09yaWdpbj1cIlwiKSx0LnNyYz10aGlzLl91cmwsdC5hbHQ9dGhpcy5vcHRpb25zLmFsdH0sX2FuaW1hdGVab29tOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcC5nZXRab29tU2NhbGUodC56b29tKSxpPXRoaXMuX21hcC5fbGF0TG5nQm91bmRzVG9OZXdMYXllckJvdW5kcyh0aGlzLl9ib3VuZHMsdC56b29tLHQuY2VudGVyKS5taW47by5Eb21VdGlsLnNldFRyYW5zZm9ybSh0aGlzLl9pbWFnZSxpLGUpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9pbWFnZSxlPW5ldyBvLkJvdW5kcyh0aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2JvdW5kcy5nZXROb3J0aFdlc3QoKSksdGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9ib3VuZHMuZ2V0U291dGhFYXN0KCkpKSxpPWUuZ2V0U2l6ZSgpO1xyXG5vLkRvbVV0aWwuc2V0UG9zaXRpb24odCxlLm1pbiksdC5zdHlsZS53aWR0aD1pLngrXCJweFwiLHQuc3R5bGUuaGVpZ2h0PWkueStcInB4XCJ9LF91cGRhdGVPcGFjaXR5OmZ1bmN0aW9uKCl7by5Eb21VdGlsLnNldE9wYWNpdHkodGhpcy5faW1hZ2UsdGhpcy5vcHRpb25zLm9wYWNpdHkpfX0pLG8uaW1hZ2VPdmVybGF5PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbmV3IG8uSW1hZ2VPdmVybGF5KHQsZSxpKX0sby5JY29uPW8uQ2xhc3MuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe28uc2V0T3B0aW9ucyh0aGlzLHQpfSxjcmVhdGVJY29uOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jcmVhdGVJY29uKFwiaWNvblwiLHQpfSxjcmVhdGVTaGFkb3c6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NyZWF0ZUljb24oXCJzaGFkb3dcIix0KX0sX2NyZWF0ZUljb246ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nZXRJY29uVXJsKHQpO2lmKCFpKXtpZihcImljb25cIj09PXQpdGhyb3cgbmV3IEVycm9yKFwiaWNvblVybCBub3Qgc2V0IGluIEljb24gb3B0aW9ucyAoc2VlIHRoZSBkb2NzKS5cIik7cmV0dXJuIG51bGx9dmFyIG49dGhpcy5fY3JlYXRlSW1nKGksZSYmXCJJTUdcIj09PWUudGFnTmFtZT9lOm51bGwpO3JldHVybiB0aGlzLl9zZXRJY29uU3R5bGVzKG4sdCksbn0sX3NldEljb25TdHlsZXM6ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLm9wdGlvbnMsbj1pW2UrXCJTaXplXCJdO1wibnVtYmVyXCI9PXR5cGVvZiBuJiYobj1bbixuXSk7dmFyIHM9by5wb2ludChuKSxyPW8ucG9pbnQoXCJzaGFkb3dcIj09PWUmJmkuc2hhZG93QW5jaG9yfHxpLmljb25BbmNob3J8fHMmJnMuZGl2aWRlQnkoMiwhMCkpO3QuY2xhc3NOYW1lPVwibGVhZmxldC1tYXJrZXItXCIrZStcIiBcIisoaS5jbGFzc05hbWV8fFwiXCIpLHImJih0LnN0eWxlLm1hcmdpbkxlZnQ9LXIueCtcInB4XCIsdC5zdHlsZS5tYXJnaW5Ub3A9LXIueStcInB4XCIpLHMmJih0LnN0eWxlLndpZHRoPXMueCtcInB4XCIsdC5zdHlsZS5oZWlnaHQ9cy55K1wicHhcIil9LF9jcmVhdGVJbWc6ZnVuY3Rpb24odCxpKXtyZXR1cm4gaT1pfHxlLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiksaS5zcmM9dCxpfSxfZ2V0SWNvblVybDpmdW5jdGlvbih0KXtyZXR1cm4gby5Ccm93c2VyLnJldGluYSYmdGhpcy5vcHRpb25zW3QrXCJSZXRpbmFVcmxcIl18fHRoaXMub3B0aW9uc1t0K1wiVXJsXCJdfX0pLG8uaWNvbj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uSWNvbih0KX0sby5JY29uLkRlZmF1bHQ9by5JY29uLmV4dGVuZCh7b3B0aW9uczp7aWNvblVybDpcIm1hcmtlci1pY29uLnBuZ1wiLGljb25SZXRpbmFVcmw6XCJtYXJrZXItaWNvbi0yeC5wbmdcIixzaGFkb3dVcmw6XCJtYXJrZXItc2hhZG93LnBuZ1wiLGljb25TaXplOlsyNSw0MV0saWNvbkFuY2hvcjpbMTIsNDFdLHBvcHVwQW5jaG9yOlsxLC0zNF0sdG9vbHRpcEFuY2hvcjpbMTYsLTI4XSxzaGFkb3dTaXplOls0MSw0MV19LF9nZXRJY29uVXJsOmZ1bmN0aW9uKHQpe3JldHVybiBvLkljb24uRGVmYXVsdC5pbWFnZVBhdGh8fChvLkljb24uRGVmYXVsdC5pbWFnZVBhdGg9dGhpcy5fZGV0ZWN0SWNvblBhdGgoKSksKHRoaXMub3B0aW9ucy5pbWFnZVBhdGh8fG8uSWNvbi5EZWZhdWx0LmltYWdlUGF0aCkrby5JY29uLnByb3RvdHlwZS5fZ2V0SWNvblVybC5jYWxsKHRoaXMsdCl9LF9kZXRlY3RJY29uUGF0aDpmdW5jdGlvbigpe3ZhciB0PW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixcImxlYWZsZXQtZGVmYXVsdC1pY29uLXBhdGhcIixlLmJvZHkpLGk9by5Eb21VdGlsLmdldFN0eWxlKHQsXCJiYWNrZ3JvdW5kLWltYWdlXCIpfHxvLkRvbVV0aWwuZ2V0U3R5bGUodCxcImJhY2tncm91bmRJbWFnZVwiKTtyZXR1cm4gZS5ib2R5LnJlbW92ZUNoaWxkKHQpLDA9PT1pLmluZGV4T2YoXCJ1cmxcIik/aS5yZXBsYWNlKC9edXJsXFwoW1xcXCJcXCddPy8sXCJcIikucmVwbGFjZSgvbWFya2VyLWljb25cXC5wbmdbXFxcIlxcJ10/XFwpJC8sXCJcIik6XCJcIn19KSxvLk1hcmtlcj1vLkxheWVyLmV4dGVuZCh7b3B0aW9uczp7aWNvbjpuZXcgby5JY29uLkRlZmF1bHQsaW50ZXJhY3RpdmU6ITAsZHJhZ2dhYmxlOiExLGtleWJvYXJkOiEwLHRpdGxlOlwiXCIsYWx0OlwiXCIsekluZGV4T2Zmc2V0OjAsb3BhY2l0eToxLHJpc2VPbkhvdmVyOiExLHJpc2VPZmZzZXQ6MjUwLHBhbmU6XCJtYXJrZXJQYW5lXCIsbm9uQnViYmxpbmdFdmVudHM6W1wiY2xpY2tcIixcImRibGNsaWNrXCIsXCJtb3VzZW92ZXJcIixcIm1vdXNlb3V0XCIsXCJjb250ZXh0bWVudVwiXX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe28uc2V0T3B0aW9ucyh0aGlzLGUpLHRoaXMuX2xhdGxuZz1vLmxhdExuZyh0KX0sb25BZGQ6ZnVuY3Rpb24odCl7dGhpcy5fem9vbUFuaW1hdGVkPXRoaXMuX3pvb21BbmltYXRlZCYmdC5vcHRpb25zLm1hcmtlclpvb21BbmltYXRpb24sdGhpcy5fem9vbUFuaW1hdGVkJiZ0Lm9uKFwiem9vbWFuaW1cIix0aGlzLl9hbmltYXRlWm9vbSx0aGlzKSx0aGlzLl9pbml0SWNvbigpLHRoaXMudXBkYXRlKCl9LG9uUmVtb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuZHJhZ2dpbmcmJnRoaXMuZHJhZ2dpbmcuZW5hYmxlZCgpJiYodGhpcy5vcHRpb25zLmRyYWdnYWJsZT0hMCx0aGlzLmRyYWdnaW5nLnJlbW92ZUhvb2tzKCkpLHRoaXMuX3pvb21BbmltYXRlZCYmdC5vZmYoXCJ6b29tYW5pbVwiLHRoaXMuX2FuaW1hdGVab29tLHRoaXMpLHRoaXMuX3JlbW92ZUljb24oKSx0aGlzLl9yZW1vdmVTaGFkb3coKX0sZ2V0RXZlbnRzOmZ1bmN0aW9uKCl7cmV0dXJue3pvb206dGhpcy51cGRhdGUsdmlld3Jlc2V0OnRoaXMudXBkYXRlfX0sZ2V0TGF0TG5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ30sc2V0TGF0TG5nOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2xhdGxuZztyZXR1cm4gdGhpcy5fbGF0bG5nPW8ubGF0TG5nKHQpLHRoaXMudXBkYXRlKCksdGhpcy5maXJlKFwibW92ZVwiLHtvbGRMYXRMbmc6ZSxsYXRsbmc6dGhpcy5fbGF0bG5nfSl9LHNldFpJbmRleE9mZnNldDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLnpJbmRleE9mZnNldD10LHRoaXMudXBkYXRlKCl9LHNldEljb246ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5pY29uPXQsdGhpcy5fbWFwJiYodGhpcy5faW5pdEljb24oKSx0aGlzLnVwZGF0ZSgpKSx0aGlzLl9wb3B1cCYmdGhpcy5iaW5kUG9wdXAodGhpcy5fcG9wdXAsdGhpcy5fcG9wdXAub3B0aW9ucyksdGhpc30sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pY29ufSx1cGRhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9pY29uKXt2YXIgdD10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZykucm91bmQoKTt0aGlzLl9zZXRQb3ModCl9cmV0dXJuIHRoaXN9LF9pbml0SWNvbjpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucyxlPVwibGVhZmxldC16b29tLVwiKyh0aGlzLl96b29tQW5pbWF0ZWQ/XCJhbmltYXRlZFwiOlwiaGlkZVwiKSxpPXQuaWNvbi5jcmVhdGVJY29uKHRoaXMuX2ljb24pLG49ITE7aSE9PXRoaXMuX2ljb24mJih0aGlzLl9pY29uJiZ0aGlzLl9yZW1vdmVJY29uKCksbj0hMCx0LnRpdGxlJiYoaS50aXRsZT10LnRpdGxlKSx0LmFsdCYmKGkuYWx0PXQuYWx0KSksby5Eb21VdGlsLmFkZENsYXNzKGksZSksdC5rZXlib2FyZCYmKGkudGFiSW5kZXg9XCIwXCIpLHRoaXMuX2ljb249aSx0LnJpc2VPbkhvdmVyJiZ0aGlzLm9uKHttb3VzZW92ZXI6dGhpcy5fYnJpbmdUb0Zyb250LG1vdXNlb3V0OnRoaXMuX3Jlc2V0WkluZGV4fSk7dmFyIHM9dC5pY29uLmNyZWF0ZVNoYWRvdyh0aGlzLl9zaGFkb3cpLHI9ITE7cyE9PXRoaXMuX3NoYWRvdyYmKHRoaXMuX3JlbW92ZVNoYWRvdygpLHI9ITApLHMmJihvLkRvbVV0aWwuYWRkQ2xhc3MocyxlKSxzLmFsdD1cIlwiKSx0aGlzLl9zaGFkb3c9cyx0Lm9wYWNpdHk8MSYmdGhpcy5fdXBkYXRlT3BhY2l0eSgpLG4mJnRoaXMuZ2V0UGFuZSgpLmFwcGVuZENoaWxkKHRoaXMuX2ljb24pLHRoaXMuX2luaXRJbnRlcmFjdGlvbigpLHMmJnImJnRoaXMuZ2V0UGFuZShcInNoYWRvd1BhbmVcIikuYXBwZW5kQ2hpbGQodGhpcy5fc2hhZG93KX0sX3JlbW92ZUljb246ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMucmlzZU9uSG92ZXImJnRoaXMub2ZmKHttb3VzZW92ZXI6dGhpcy5fYnJpbmdUb0Zyb250LG1vdXNlb3V0OnRoaXMuX3Jlc2V0WkluZGV4fSksby5Eb21VdGlsLnJlbW92ZSh0aGlzLl9pY29uKSx0aGlzLnJlbW92ZUludGVyYWN0aXZlVGFyZ2V0KHRoaXMuX2ljb24pLHRoaXMuX2ljb249bnVsbH0sX3JlbW92ZVNoYWRvdzpmdW5jdGlvbigpe3RoaXMuX3NoYWRvdyYmby5Eb21VdGlsLnJlbW92ZSh0aGlzLl9zaGFkb3cpLHRoaXMuX3NoYWRvdz1udWxsfSxfc2V0UG9zOmZ1bmN0aW9uKHQpe28uRG9tVXRpbC5zZXRQb3NpdGlvbih0aGlzLl9pY29uLHQpLHRoaXMuX3NoYWRvdyYmby5Eb21VdGlsLnNldFBvc2l0aW9uKHRoaXMuX3NoYWRvdyx0KSx0aGlzLl96SW5kZXg9dC55K3RoaXMub3B0aW9ucy56SW5kZXhPZmZzZXQsdGhpcy5fcmVzZXRaSW5kZXgoKX0sX3VwZGF0ZVpJbmRleDpmdW5jdGlvbih0KXt0aGlzLl9pY29uLnN0eWxlLnpJbmRleD10aGlzLl96SW5kZXgrdH0sX2FuaW1hdGVab29tOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcC5fbGF0TG5nVG9OZXdMYXllclBvaW50KHRoaXMuX2xhdGxuZyx0Lnpvb20sdC5jZW50ZXIpLnJvdW5kKCk7dGhpcy5fc2V0UG9zKGUpfSxfaW5pdEludGVyYWN0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5vcHRpb25zLmludGVyYWN0aXZlJiYoby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX2ljb24sXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuYWRkSW50ZXJhY3RpdmVUYXJnZXQodGhpcy5faWNvbiksby5IYW5kbGVyLk1hcmtlckRyYWcpKXt2YXIgdD10aGlzLm9wdGlvbnMuZHJhZ2dhYmxlO3RoaXMuZHJhZ2dpbmcmJih0PXRoaXMuZHJhZ2dpbmcuZW5hYmxlZCgpLHRoaXMuZHJhZ2dpbmcuZGlzYWJsZSgpKSx0aGlzLmRyYWdnaW5nPW5ldyBvLkhhbmRsZXIuTWFya2VyRHJhZyh0aGlzKSx0JiZ0aGlzLmRyYWdnaW5nLmVuYWJsZSgpfX0sc2V0T3BhY2l0eTpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5vcHRpb25zLm9wYWNpdHk9dCx0aGlzLl9tYXAmJnRoaXMuX3VwZGF0ZU9wYWNpdHkoKSx0aGlzfSxfdXBkYXRlT3BhY2l0eTpmdW5jdGlvbigpe3ZhciB0PXRoaXMub3B0aW9ucy5vcGFjaXR5O28uRG9tVXRpbC5zZXRPcGFjaXR5KHRoaXMuX2ljb24sdCksdGhpcy5fc2hhZG93JiZvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9zaGFkb3csdCl9LF9icmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVaSW5kZXgodGhpcy5vcHRpb25zLnJpc2VPZmZzZXQpfSxfcmVzZXRaSW5kZXg6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVaSW5kZXgoMCl9LF9nZXRQb3B1cEFuY2hvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMuaWNvbi5vcHRpb25zLnBvcHVwQW5jaG9yfHxbMCwwXX0sX2dldFRvb2x0aXBBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zLmljb24ub3B0aW9ucy50b29sdGlwQW5jaG9yfHxbMCwwXX19KSxvLm1hcmtlcj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5NYXJrZXIodCxlKX0sby5EaXZJY29uPW8uSWNvbi5leHRlbmQoe29wdGlvbnM6e2ljb25TaXplOlsxMiwxMl0saHRtbDohMSxiZ1BvczpudWxsLGNsYXNzTmFtZTpcImxlYWZsZXQtZGl2LWljb25cIn0sY3JlYXRlSWNvbjpmdW5jdGlvbih0KXt2YXIgaT10JiZcIkRJVlwiPT09dC50YWdOYW1lP3Q6ZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG49dGhpcy5vcHRpb25zO2lmKGkuaW5uZXJIVE1MPW4uaHRtbCE9PSExP24uaHRtbDpcIlwiLG4uYmdQb3Mpe3ZhciBzPW8ucG9pbnQobi5iZ1Bvcyk7aS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb249LXMueCtcInB4IFwiKy1zLnkrXCJweFwifXJldHVybiB0aGlzLl9zZXRJY29uU3R5bGVzKGksXCJpY29uXCIpLGl9LGNyZWF0ZVNoYWRvdzpmdW5jdGlvbigpe3JldHVybiBudWxsfX0pLG8uZGl2SWNvbj1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uRGl2SWNvbih0KX0sby5EaXZPdmVybGF5PW8uTGF5ZXIuZXh0ZW5kKHtvcHRpb25zOntvZmZzZXQ6WzAsN10sY2xhc3NOYW1lOlwiXCIscGFuZTpcInBvcHVwUGFuZVwifSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7by5zZXRPcHRpb25zKHRoaXMsdCksdGhpcy5fc291cmNlPWV9LG9uQWRkOmZ1bmN0aW9uKHQpe3RoaXMuX3pvb21BbmltYXRlZD10Ll96b29tQW5pbWF0ZWQsdGhpcy5fY29udGFpbmVyfHx0aGlzLl9pbml0TGF5b3V0KCksdC5fZmFkZUFuaW1hdGVkJiZvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9jb250YWluZXIsMCksY2xlYXJUaW1lb3V0KHRoaXMuX3JlbW92ZVRpbWVvdXQpLHRoaXMuZ2V0UGFuZSgpLmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lciksdGhpcy51cGRhdGUoKSx0Ll9mYWRlQW5pbWF0ZWQmJm8uRG9tVXRpbC5zZXRPcGFjaXR5KHRoaXMuX2NvbnRhaW5lciwxKSx0aGlzLmJyaW5nVG9Gcm9udCgpfSxvblJlbW92ZTpmdW5jdGlvbih0KXt0Ll9mYWRlQW5pbWF0ZWQ/KG8uRG9tVXRpbC5zZXRPcGFjaXR5KHRoaXMuX2NvbnRhaW5lciwwKSx0aGlzLl9yZW1vdmVUaW1lb3V0PXNldFRpbWVvdXQoby5iaW5kKG8uRG9tVXRpbC5yZW1vdmUsby5Eb21VdGlsLHRoaXMuX2NvbnRhaW5lciksMjAwKSk6by5Eb21VdGlsLnJlbW92ZSh0aGlzLl9jb250YWluZXIpfSxnZXRMYXRMbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF0bG5nfSxzZXRMYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xhdGxuZz1vLmxhdExuZyh0KSx0aGlzLl9tYXAmJih0aGlzLl91cGRhdGVQb3NpdGlvbigpLHRoaXMuX2FkanVzdFBhbigpKSx0aGlzfSxnZXRDb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvbnRlbnR9LHNldENvbnRlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2NvbnRlbnQ9dCx0aGlzLnVwZGF0ZSgpLHRoaXN9LGdldEVsZW1lbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfSx1cGRhdGU6ZnVuY3Rpb24oKXt0aGlzLl9tYXAmJih0aGlzLl9jb250YWluZXIuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiLHRoaXMuX3VwZGF0ZUNvbnRlbnQoKSx0aGlzLl91cGRhdGVMYXlvdXQoKSx0aGlzLl91cGRhdGVQb3NpdGlvbigpLHRoaXMuX2NvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5PVwiXCIsdGhpcy5fYWRqdXN0UGFuKCkpfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD17em9vbTp0aGlzLl91cGRhdGVQb3NpdGlvbix2aWV3cmVzZXQ6dGhpcy5fdXBkYXRlUG9zaXRpb259O3JldHVybiB0aGlzLl96b29tQW5pbWF0ZWQmJih0Lnpvb21hbmltPXRoaXMuX2FuaW1hdGVab29tKSx0fSxpc09wZW46ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX21hcCYmdGhpcy5fbWFwLmhhc0xheWVyKHRoaXMpfSxicmluZ1RvRnJvbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWFwJiZvLkRvbVV0aWwudG9Gcm9udCh0aGlzLl9jb250YWluZXIpLHRoaXN9LGJyaW5nVG9CYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmby5Eb21VdGlsLnRvQmFjayh0aGlzLl9jb250YWluZXIpLHRoaXN9LF91cGRhdGVDb250ZW50OmZ1bmN0aW9uKCl7aWYodGhpcy5fY29udGVudCl7dmFyIHQ9dGhpcy5fY29udGVudE5vZGUsZT1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLl9jb250ZW50P3RoaXMuX2NvbnRlbnQodGhpcy5fc291cmNlfHx0aGlzKTp0aGlzLl9jb250ZW50O2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXQuaW5uZXJIVE1MPWU7ZWxzZXtmb3IoO3QuaGFzQ2hpbGROb2RlcygpOyl0LnJlbW92ZUNoaWxkKHQuZmlyc3RDaGlsZCk7dC5hcHBlbmRDaGlsZChlKX10aGlzLmZpcmUoXCJjb250ZW50dXBkYXRlXCIpfX0sX3VwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpcy5fbWFwKXt2YXIgdD10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZyksZT1vLnBvaW50KHRoaXMub3B0aW9ucy5vZmZzZXQpLGk9dGhpcy5fZ2V0QW5jaG9yKCk7dGhpcy5fem9vbUFuaW1hdGVkP28uRG9tVXRpbC5zZXRQb3NpdGlvbih0aGlzLl9jb250YWluZXIsdC5hZGQoaSkpOmU9ZS5hZGQodCkuYWRkKGkpO3ZhciBuPXRoaXMuX2NvbnRhaW5lckJvdHRvbT0tZS55LHM9dGhpcy5fY29udGFpbmVyTGVmdD0tTWF0aC5yb3VuZCh0aGlzLl9jb250YWluZXJXaWR0aC8yKStlLng7dGhpcy5fY29udGFpbmVyLnN0eWxlLmJvdHRvbT1uK1wicHhcIix0aGlzLl9jb250YWluZXIuc3R5bGUubGVmdD1zK1wicHhcIn19LF9nZXRBbmNob3I6ZnVuY3Rpb24oKXtyZXR1cm5bMCwwXX19KSxvLlBvcHVwPW8uRGl2T3ZlcmxheS5leHRlbmQoe29wdGlvbnM6e21heFdpZHRoOjMwMCxtaW5XaWR0aDo1MCxtYXhIZWlnaHQ6bnVsbCxhdXRvUGFuOiEwLGF1dG9QYW5QYWRkaW5nVG9wTGVmdDpudWxsLGF1dG9QYW5QYWRkaW5nQm90dG9tUmlnaHQ6bnVsbCxhdXRvUGFuUGFkZGluZzpbNSw1XSxrZWVwSW5WaWV3OiExLGNsb3NlQnV0dG9uOiEwLGF1dG9DbG9zZTohMCxjbGFzc05hbWU6XCJcIn0sb3Blbk9uOmZ1bmN0aW9uKHQpe3JldHVybiB0Lm9wZW5Qb3B1cCh0aGlzKSx0aGlzfSxvbkFkZDpmdW5jdGlvbih0KXtvLkRpdk92ZXJsYXkucHJvdG90eXBlLm9uQWRkLmNhbGwodGhpcyx0KSx0LmZpcmUoXCJwb3B1cG9wZW5cIix7cG9wdXA6dGhpc30pLHRoaXMuX3NvdXJjZSYmKHRoaXMuX3NvdXJjZS5maXJlKFwicG9wdXBvcGVuXCIse3BvcHVwOnRoaXN9LCEwKSx0aGlzLl9zb3VyY2UgaW5zdGFuY2VvZiBvLlBhdGh8fHRoaXMuX3NvdXJjZS5vbihcInByZWNsaWNrXCIsby5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24pKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7by5EaXZPdmVybGF5LnByb3RvdHlwZS5vblJlbW92ZS5jYWxsKHRoaXMsdCksdC5maXJlKFwicG9wdXBjbG9zZVwiLHtwb3B1cDp0aGlzfSksdGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlLmZpcmUoXCJwb3B1cGNsb3NlXCIse3BvcHVwOnRoaXN9LCEwKSx0aGlzLl9zb3VyY2UgaW5zdGFuY2VvZiBvLlBhdGh8fHRoaXMuX3NvdXJjZS5vZmYoXCJwcmVjbGlja1wiLG8uRG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKSl9LGdldEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PW8uRGl2T3ZlcmxheS5wcm90b3R5cGUuZ2V0RXZlbnRzLmNhbGwodGhpcyk7cmV0dXJuKFwiY2xvc2VPbkNsaWNrXCJpbiB0aGlzLm9wdGlvbnM/dGhpcy5vcHRpb25zLmNsb3NlT25DbGljazp0aGlzLl9tYXAub3B0aW9ucy5jbG9zZVBvcHVwT25DbGljaykmJih0LnByZWNsaWNrPXRoaXMuX2Nsb3NlKSx0aGlzLm9wdGlvbnMua2VlcEluVmlldyYmKHQubW92ZWVuZD10aGlzLl9hZGp1c3RQYW4pLHR9LF9jbG9zZTpmdW5jdGlvbigpe3RoaXMuX21hcCYmdGhpcy5fbWFwLmNsb3NlUG9wdXAodGhpcyl9LF9pbml0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJsZWFmbGV0LXBvcHVwXCIsZT10aGlzLl9jb250YWluZXI9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCIgXCIrKHRoaXMub3B0aW9ucy5jbGFzc05hbWV8fFwiXCIpK1wiIGxlYWZsZXQtem9vbS1hbmltYXRlZFwiKTtpZih0aGlzLm9wdGlvbnMuY2xvc2VCdXR0b24pe3ZhciBpPXRoaXMuX2Nsb3NlQnV0dG9uPW8uRG9tVXRpbC5jcmVhdGUoXCJhXCIsdCtcIi1jbG9zZS1idXR0b25cIixlKTtpLmhyZWY9XCIjY2xvc2VcIixpLmlubmVySFRNTD1cIiYjMjE1O1wiLG8uRG9tRXZlbnQub24oaSxcImNsaWNrXCIsdGhpcy5fb25DbG9zZUJ1dHRvbkNsaWNrLHRoaXMpfXZhciBuPXRoaXMuX3dyYXBwZXI9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCItY29udGVudC13cmFwcGVyXCIsZSk7dGhpcy5fY29udGVudE5vZGU9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCItY29udGVudFwiLG4pLG8uRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24obikuZGlzYWJsZVNjcm9sbFByb3BhZ2F0aW9uKHRoaXMuX2NvbnRlbnROb2RlKS5vbihuLFwiY29udGV4dG1lbnVcIixvLkRvbUV2ZW50LnN0b3BQcm9wYWdhdGlvbiksdGhpcy5fdGlwQ29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIix0K1wiLXRpcC1jb250YWluZXJcIixlKSx0aGlzLl90aXA9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCItdGlwXCIsdGhpcy5fdGlwQ29udGFpbmVyKX0sX3VwZGF0ZUxheW91dDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRlbnROb2RlLGU9dC5zdHlsZTtlLndpZHRoPVwiXCIsZS53aGl0ZVNwYWNlPVwibm93cmFwXCI7dmFyIGk9dC5vZmZzZXRXaWR0aDtpPU1hdGgubWluKGksdGhpcy5vcHRpb25zLm1heFdpZHRoKSxpPU1hdGgubWF4KGksdGhpcy5vcHRpb25zLm1pbldpZHRoKSxlLndpZHRoPWkrMStcInB4XCIsZS53aGl0ZVNwYWNlPVwiXCIsZS5oZWlnaHQ9XCJcIjt2YXIgbj10Lm9mZnNldEhlaWdodCxzPXRoaXMub3B0aW9ucy5tYXhIZWlnaHQscj1cImxlYWZsZXQtcG9wdXAtc2Nyb2xsZWRcIjtzJiZuPnM/KGUuaGVpZ2h0PXMrXCJweFwiLG8uRG9tVXRpbC5hZGRDbGFzcyh0LHIpKTpvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModCxyKSx0aGlzLl9jb250YWluZXJXaWR0aD10aGlzLl9jb250YWluZXIub2Zmc2V0V2lkdGh9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAuX2xhdExuZ1RvTmV3TGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcsdC56b29tLHQuY2VudGVyKSxpPXRoaXMuX2dldEFuY2hvcigpO28uRG9tVXRpbC5zZXRQb3NpdGlvbih0aGlzLl9jb250YWluZXIsZS5hZGQoaSkpfSxfYWRqdXN0UGFuOmZ1bmN0aW9uKCl7aWYoISghdGhpcy5vcHRpb25zLmF1dG9QYW58fHRoaXMuX21hcC5fcGFuQW5pbSYmdGhpcy5fbWFwLl9wYW5BbmltLl9pblByb2dyZXNzKSl7dmFyIHQ9dGhpcy5fbWFwLGU9cGFyc2VJbnQoby5Eb21VdGlsLmdldFN0eWxlKHRoaXMuX2NvbnRhaW5lcixcIm1hcmdpbkJvdHRvbVwiKSwxMCl8fDAsaT10aGlzLl9jb250YWluZXIub2Zmc2V0SGVpZ2h0K2Usbj10aGlzLl9jb250YWluZXJXaWR0aCxzPW5ldyBvLlBvaW50KHRoaXMuX2NvbnRhaW5lckxlZnQsLWktdGhpcy5fY29udGFpbmVyQm90dG9tKTtzLl9hZGQoby5Eb21VdGlsLmdldFBvc2l0aW9uKHRoaXMuX2NvbnRhaW5lcikpO3ZhciByPXQubGF5ZXJQb2ludFRvQ29udGFpbmVyUG9pbnQocyksYT1vLnBvaW50KHRoaXMub3B0aW9ucy5hdXRvUGFuUGFkZGluZyksaD1vLnBvaW50KHRoaXMub3B0aW9ucy5hdXRvUGFuUGFkZGluZ1RvcExlZnR8fGEpLGw9by5wb2ludCh0aGlzLm9wdGlvbnMuYXV0b1BhblBhZGRpbmdCb3R0b21SaWdodHx8YSksdT10LmdldFNpemUoKSxjPTAsZD0wO3IueCtuK2wueD51LngmJihjPXIueCtuLXUueCtsLngpLHIueC1jLWgueDwwJiYoYz1yLngtaC54KSxyLnkraStsLnk+dS55JiYoZD1yLnkraS11LnkrbC55KSxyLnktZC1oLnk8MCYmKGQ9ci55LWgueSksKGN8fGQpJiZ0LmZpcmUoXCJhdXRvcGFuc3RhcnRcIikucGFuQnkoW2MsZF0pfX0sX29uQ2xvc2VCdXR0b25DbGljazpmdW5jdGlvbih0KXt0aGlzLl9jbG9zZSgpLG8uRG9tRXZlbnQuc3RvcCh0KX0sX2dldEFuY2hvcjpmdW5jdGlvbigpe3JldHVybiBvLnBvaW50KHRoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLl9nZXRQb3B1cEFuY2hvcj90aGlzLl9zb3VyY2UuX2dldFBvcHVwQW5jaG9yKCk6WzAsMF0pfX0pLG8ucG9wdXA9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uUG9wdXAodCxlKX0sby5NYXAubWVyZ2VPcHRpb25zKHtjbG9zZVBvcHVwT25DbGljazohMH0pLG8uTWFwLmluY2x1ZGUoe29wZW5Qb3B1cDpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBvLlBvcHVwfHwodD1uZXcgby5Qb3B1cChpKS5zZXRDb250ZW50KHQpKSxlJiZ0LnNldExhdExuZyhlKSx0aGlzLmhhc0xheWVyKHQpP3RoaXM6KHRoaXMuX3BvcHVwJiZ0aGlzLl9wb3B1cC5vcHRpb25zLmF1dG9DbG9zZSYmdGhpcy5jbG9zZVBvcHVwKCksdGhpcy5fcG9wdXA9dCx0aGlzLmFkZExheWVyKHQpKX0sY2xvc2VQb3B1cDpmdW5jdGlvbih0KXtyZXR1cm4gdCYmdCE9PXRoaXMuX3BvcHVwfHwodD10aGlzLl9wb3B1cCx0aGlzLl9wb3B1cD1udWxsKSx0JiZ0aGlzLnJlbW92ZUxheWVyKHQpLHRoaXN9fSksby5MYXllci5pbmNsdWRlKHtiaW5kUG9wdXA6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdCBpbnN0YW5jZW9mIG8uUG9wdXA/KG8uc2V0T3B0aW9ucyh0LGUpLHRoaXMuX3BvcHVwPXQsdC5fc291cmNlPXRoaXMpOih0aGlzLl9wb3B1cCYmIWV8fCh0aGlzLl9wb3B1cD1uZXcgby5Qb3B1cChlLHRoaXMpKSx0aGlzLl9wb3B1cC5zZXRDb250ZW50KHQpKSx0aGlzLl9wb3B1cEhhbmRsZXJzQWRkZWR8fCh0aGlzLm9uKHtjbGljazp0aGlzLl9vcGVuUG9wdXAscmVtb3ZlOnRoaXMuY2xvc2VQb3B1cCxtb3ZlOnRoaXMuX21vdmVQb3B1cH0pLHRoaXMuX3BvcHVwSGFuZGxlcnNBZGRlZD0hMCksdGhpc30sdW5iaW5kUG9wdXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcG9wdXAmJih0aGlzLm9mZih7Y2xpY2s6dGhpcy5fb3BlblBvcHVwLHJlbW92ZTp0aGlzLmNsb3NlUG9wdXAsbW92ZTp0aGlzLl9tb3ZlUG9wdXB9KSx0aGlzLl9wb3B1cEhhbmRsZXJzQWRkZWQ9ITEsdGhpcy5fcG9wdXA9bnVsbCksdGhpc30sb3BlblBvcHVwOmZ1bmN0aW9uKHQsZSl7aWYodCBpbnN0YW5jZW9mIG8uTGF5ZXJ8fChlPXQsdD10aGlzKSx0IGluc3RhbmNlb2Ygby5GZWF0dXJlR3JvdXApZm9yKHZhciBpIGluIHRoaXMuX2xheWVycyl7dD10aGlzLl9sYXllcnNbaV07YnJlYWt9cmV0dXJuIGV8fChlPXQuZ2V0Q2VudGVyP3QuZ2V0Q2VudGVyKCk6dC5nZXRMYXRMbmcoKSksdGhpcy5fcG9wdXAmJnRoaXMuX21hcCYmKHRoaXMuX3BvcHVwLl9zb3VyY2U9dCx0aGlzLl9wb3B1cC51cGRhdGUoKSx0aGlzLl9tYXAub3BlblBvcHVwKHRoaXMuX3BvcHVwLGUpKSx0aGlzfSxjbG9zZVBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVwJiZ0aGlzLl9wb3B1cC5fY2xvc2UoKSx0aGlzfSx0b2dnbGVQb3B1cDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fcG9wdXAmJih0aGlzLl9wb3B1cC5fbWFwP3RoaXMuY2xvc2VQb3B1cCgpOnRoaXMub3BlblBvcHVwKHQpKSx0aGlzfSxpc1BvcHVwT3BlbjpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fcG9wdXAmJnRoaXMuX3BvcHVwLmlzT3BlbigpfSxzZXRQb3B1cENvbnRlbnQ6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BvcHVwJiZ0aGlzLl9wb3B1cC5zZXRDb250ZW50KHQpLHRoaXN9LGdldFBvcHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvcHVwfSxfb3BlblBvcHVwOmZ1bmN0aW9uKHQpe3ZhciBlPXQubGF5ZXJ8fHQudGFyZ2V0O2lmKHRoaXMuX3BvcHVwJiZ0aGlzLl9tYXApcmV0dXJuIG8uRG9tRXZlbnQuc3RvcCh0KSxlIGluc3RhbmNlb2Ygby5QYXRoP3ZvaWQgdGhpcy5vcGVuUG9wdXAodC5sYXllcnx8dC50YXJnZXQsdC5sYXRsbmcpOnZvaWQodGhpcy5fbWFwLmhhc0xheWVyKHRoaXMuX3BvcHVwKSYmdGhpcy5fcG9wdXAuX3NvdXJjZT09PWU/dGhpcy5jbG9zZVBvcHVwKCk6dGhpcy5vcGVuUG9wdXAoZSx0LmxhdGxuZykpfSxfbW92ZVBvcHVwOmZ1bmN0aW9uKHQpe3RoaXMuX3BvcHVwLnNldExhdExuZyh0LmxhdGxuZyl9fSksby5Ub29sdGlwPW8uRGl2T3ZlcmxheS5leHRlbmQoe29wdGlvbnM6e3BhbmU6XCJ0b29sdGlwUGFuZVwiLG9mZnNldDpbMCwwXSxkaXJlY3Rpb246XCJhdXRvXCIscGVybWFuZW50OiExLHN0aWNreTohMSxpbnRlcmFjdGl2ZTohMSxvcGFjaXR5Oi45fSxvbkFkZDpmdW5jdGlvbih0KXtvLkRpdk92ZXJsYXkucHJvdG90eXBlLm9uQWRkLmNhbGwodGhpcyx0KSx0aGlzLnNldE9wYWNpdHkodGhpcy5vcHRpb25zLm9wYWNpdHkpLHQuZmlyZShcInRvb2x0aXBvcGVuXCIse3Rvb2x0aXA6dGhpc30pLHRoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLmZpcmUoXCJ0b29sdGlwb3BlblwiLHt0b29sdGlwOnRoaXN9LCEwKX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7by5EaXZPdmVybGF5LnByb3RvdHlwZS5vblJlbW92ZS5jYWxsKHRoaXMsdCksdC5maXJlKFwidG9vbHRpcGNsb3NlXCIse3Rvb2x0aXA6dGhpc30pLHRoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLmZpcmUoXCJ0b29sdGlwY2xvc2VcIix7dG9vbHRpcDp0aGlzfSwhMCl9LGdldEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PW8uRGl2T3ZlcmxheS5wcm90b3R5cGUuZ2V0RXZlbnRzLmNhbGwodGhpcyk7cmV0dXJuIG8uQnJvd3Nlci50b3VjaCYmIXRoaXMub3B0aW9ucy5wZXJtYW5lbnQmJih0LnByZWNsaWNrPXRoaXMuX2Nsb3NlKSx0fSxfY2xvc2U6ZnVuY3Rpb24oKXt0aGlzLl9tYXAmJnRoaXMuX21hcC5jbG9zZVRvb2x0aXAodGhpcyl9LF9pbml0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJsZWFmbGV0LXRvb2x0aXBcIixlPXQrXCIgXCIrKHRoaXMub3B0aW9ucy5jbGFzc05hbWV8fFwiXCIpK1wiIGxlYWZsZXQtem9vbS1cIisodGhpcy5fem9vbUFuaW1hdGVkP1wiYW5pbWF0ZWRcIjpcImhpZGVcIik7dGhpcy5fY29udGVudE5vZGU9dGhpcy5fY29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixlKX0sX3VwZGF0ZUxheW91dDpmdW5jdGlvbigpe30sX2FkanVzdFBhbjpmdW5jdGlvbigpe30sX3NldFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcCxpPXRoaXMuX2NvbnRhaW5lcixuPWUubGF0TG5nVG9Db250YWluZXJQb2ludChlLmdldENlbnRlcigpKSxzPWUubGF5ZXJQb2ludFRvQ29udGFpbmVyUG9pbnQodCkscj10aGlzLm9wdGlvbnMuZGlyZWN0aW9uLGE9aS5vZmZzZXRXaWR0aCxoPWkub2Zmc2V0SGVpZ2h0LGw9by5wb2ludCh0aGlzLm9wdGlvbnMub2Zmc2V0KSx1PXRoaXMuX2dldEFuY2hvcigpO1widG9wXCI9PT1yP3Q9dC5hZGQoby5wb2ludCgtYS8yK2wueCwtaCtsLnkrdS55LCEwKSk6XCJib3R0b21cIj09PXI/dD10LnN1YnRyYWN0KG8ucG9pbnQoYS8yLWwueCwtbC55LCEwKSk6XCJjZW50ZXJcIj09PXI/dD10LnN1YnRyYWN0KG8ucG9pbnQoYS8yK2wueCxoLzItdS55K2wueSwhMCkpOlwicmlnaHRcIj09PXJ8fFwiYXV0b1wiPT09ciYmcy54PG4ueD8ocj1cInJpZ2h0XCIsdD10LmFkZChvLnBvaW50KGwueCt1LngsdS55LWgvMitsLnksITApKSk6KHI9XCJsZWZ0XCIsdD10LnN1YnRyYWN0KG8ucG9pbnQoYSt1LngtbC54LGgvMi11LnktbC55LCEwKSkpLG8uRG9tVXRpbC5yZW1vdmVDbGFzcyhpLFwibGVhZmxldC10b29sdGlwLXJpZ2h0XCIpLG8uRG9tVXRpbC5yZW1vdmVDbGFzcyhpLFwibGVhZmxldC10b29sdGlwLWxlZnRcIiksby5Eb21VdGlsLnJlbW92ZUNsYXNzKGksXCJsZWFmbGV0LXRvb2x0aXAtdG9wXCIpLG8uRG9tVXRpbC5yZW1vdmVDbGFzcyhpLFwibGVhZmxldC10b29sdGlwLWJvdHRvbVwiKSxvLkRvbVV0aWwuYWRkQ2xhc3MoaSxcImxlYWZsZXQtdG9vbHRpcC1cIityKSxvLkRvbVV0aWwuc2V0UG9zaXRpb24oaSx0KX0sX3VwZGF0ZVBvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLmxhdExuZ1RvTGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcpO3RoaXMuX3NldFBvc2l0aW9uKHQpfSxzZXRPcGFjaXR5OmZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucy5vcGFjaXR5PXQsdGhpcy5fY29udGFpbmVyJiZvLkRvbVV0aWwuc2V0T3BhY2l0eSh0aGlzLl9jb250YWluZXIsdCl9LF9hbmltYXRlWm9vbTpmdW5jdGlvbih0KXt2YXIgZT10aGlzLl9tYXAuX2xhdExuZ1RvTmV3TGF5ZXJQb2ludCh0aGlzLl9sYXRsbmcsdC56b29tLHQuY2VudGVyKTt0aGlzLl9zZXRQb3NpdGlvbihlKX0sX2dldEFuY2hvcjpmdW5jdGlvbigpe3JldHVybiBvLnBvaW50KHRoaXMuX3NvdXJjZSYmdGhpcy5fc291cmNlLl9nZXRUb29sdGlwQW5jaG9yJiYhdGhpcy5vcHRpb25zLnN0aWNreT90aGlzLl9zb3VyY2UuX2dldFRvb2x0aXBBbmNob3IoKTpbMCwwXSl9fSksby50b29sdGlwPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLlRvb2x0aXAodCxlKX0sby5NYXAuaW5jbHVkZSh7b3BlblRvb2x0aXA6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0IGluc3RhbmNlb2Ygby5Ub29sdGlwfHwodD1uZXcgby5Ub29sdGlwKGkpLnNldENvbnRlbnQodCkpLGUmJnQuc2V0TGF0TG5nKGUpLHRoaXMuaGFzTGF5ZXIodCk/dGhpczp0aGlzLmFkZExheWVyKHQpfSxjbG9zZVRvb2x0aXA6ZnVuY3Rpb24odCl7cmV0dXJuIHQmJnRoaXMucmVtb3ZlTGF5ZXIodCksdGhpc319KSxvLkxheWVyLmluY2x1ZGUoe2JpbmRUb29sdGlwOmZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQgaW5zdGFuY2VvZiBvLlRvb2x0aXA/KG8uc2V0T3B0aW9ucyh0LGUpLHRoaXMuX3Rvb2x0aXA9dCx0Ll9zb3VyY2U9dGhpcyk6KHRoaXMuX3Rvb2x0aXAmJiFlfHwodGhpcy5fdG9vbHRpcD1vLnRvb2x0aXAoZSx0aGlzKSksdGhpcy5fdG9vbHRpcC5zZXRDb250ZW50KHQpKSx0aGlzLl9pbml0VG9vbHRpcEludGVyYWN0aW9ucygpLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5wZXJtYW5lbnQmJnRoaXMuX21hcCYmdGhpcy5fbWFwLmhhc0xheWVyKHRoaXMpJiZ0aGlzLm9wZW5Ub29sdGlwKCksdGhpc30sdW5iaW5kVG9vbHRpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sdGlwJiYodGhpcy5faW5pdFRvb2x0aXBJbnRlcmFjdGlvbnMoITApLHRoaXMuY2xvc2VUb29sdGlwKCksdGhpcy5fdG9vbHRpcD1udWxsKSx0aGlzfSxfaW5pdFRvb2x0aXBJbnRlcmFjdGlvbnM6ZnVuY3Rpb24odCl7aWYodHx8IXRoaXMuX3Rvb2x0aXBIYW5kbGVyc0FkZGVkKXt2YXIgZT10P1wib2ZmXCI6XCJvblwiLGk9e3JlbW92ZTp0aGlzLmNsb3NlVG9vbHRpcCxtb3ZlOnRoaXMuX21vdmVUb29sdGlwfTt0aGlzLl90b29sdGlwLm9wdGlvbnMucGVybWFuZW50P2kuYWRkPXRoaXMuX29wZW5Ub29sdGlwOihpLm1vdXNlb3Zlcj10aGlzLl9vcGVuVG9vbHRpcCxpLm1vdXNlb3V0PXRoaXMuY2xvc2VUb29sdGlwLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5zdGlja3kmJihpLm1vdXNlbW92ZT10aGlzLl9tb3ZlVG9vbHRpcCksby5Ccm93c2VyLnRvdWNoJiYoaS5jbGljaz10aGlzLl9vcGVuVG9vbHRpcCkpLHRoaXNbZV0oaSksdGhpcy5fdG9vbHRpcEhhbmRsZXJzQWRkZWQ9IXR9fSxvcGVuVG9vbHRpcDpmdW5jdGlvbih0LGUpe2lmKHQgaW5zdGFuY2VvZiBvLkxheWVyfHwoZT10LHQ9dGhpcyksdCBpbnN0YW5jZW9mIG8uRmVhdHVyZUdyb3VwKWZvcih2YXIgaSBpbiB0aGlzLl9sYXllcnMpe3Q9dGhpcy5fbGF5ZXJzW2ldO2JyZWFrfXJldHVybiBlfHwoZT10LmdldENlbnRlcj90LmdldENlbnRlcigpOnQuZ2V0TGF0TG5nKCkpLHRoaXMuX3Rvb2x0aXAmJnRoaXMuX21hcCYmKHRoaXMuX3Rvb2x0aXAuX3NvdXJjZT10LHRoaXMuX3Rvb2x0aXAudXBkYXRlKCksdGhpcy5fbWFwLm9wZW5Ub29sdGlwKHRoaXMuX3Rvb2x0aXAsZSksdGhpcy5fdG9vbHRpcC5vcHRpb25zLmludGVyYWN0aXZlJiZ0aGlzLl90b29sdGlwLl9jb250YWluZXImJihvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fdG9vbHRpcC5fY29udGFpbmVyLFwibGVhZmxldC1jbGlja2FibGVcIiksdGhpcy5hZGRJbnRlcmFjdGl2ZVRhcmdldCh0aGlzLl90b29sdGlwLl9jb250YWluZXIpKSksdGhpc30sY2xvc2VUb29sdGlwOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Rvb2x0aXAmJih0aGlzLl90b29sdGlwLl9jbG9zZSgpLHRoaXMuX3Rvb2x0aXAub3B0aW9ucy5pbnRlcmFjdGl2ZSYmdGhpcy5fdG9vbHRpcC5fY29udGFpbmVyJiYoby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX3Rvb2x0aXAuX2NvbnRhaW5lcixcImxlYWZsZXQtY2xpY2thYmxlXCIpLHRoaXMucmVtb3ZlSW50ZXJhY3RpdmVUYXJnZXQodGhpcy5fdG9vbHRpcC5fY29udGFpbmVyKSkpLHRoaXN9LHRvZ2dsZVRvb2x0aXA6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3Rvb2x0aXAmJih0aGlzLl90b29sdGlwLl9tYXA/dGhpcy5jbG9zZVRvb2x0aXAoKTp0aGlzLm9wZW5Ub29sdGlwKHQpKSx0aGlzfSxpc1Rvb2x0aXBPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Rvb2x0aXAuaXNPcGVuKCl9LHNldFRvb2x0aXBDb250ZW50OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl90b29sdGlwJiZ0aGlzLl90b29sdGlwLnNldENvbnRlbnQodCksdGhpc30sZ2V0VG9vbHRpcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90b29sdGlwfSxfb3BlblRvb2x0aXA6ZnVuY3Rpb24odCl7dmFyIGU9dC5sYXllcnx8dC50YXJnZXQ7dGhpcy5fdG9vbHRpcCYmdGhpcy5fbWFwJiZ0aGlzLm9wZW5Ub29sdGlwKGUsdGhpcy5fdG9vbHRpcC5vcHRpb25zLnN0aWNreT90LmxhdGxuZzppKX0sX21vdmVUb29sdGlwOmZ1bmN0aW9uKHQpe3ZhciBlLGksbj10LmxhdGxuZzt0aGlzLl90b29sdGlwLm9wdGlvbnMuc3RpY2t5JiZ0Lm9yaWdpbmFsRXZlbnQmJihlPXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0Lm9yaWdpbmFsRXZlbnQpLGk9dGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KGUpLG49dGhpcy5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhpKSksdGhpcy5fdG9vbHRpcC5zZXRMYXRMbmcobil9fSksby5MYXllckdyb3VwPW8uTGF5ZXIuZXh0ZW5kKHtpbml0aWFsaXplOmZ1bmN0aW9uKHQpe3RoaXMuX2xheWVycz17fTt2YXIgZSxpO2lmKHQpZm9yKGU9MCxpPXQubGVuZ3RoO2U8aTtlKyspdGhpcy5hZGRMYXllcih0W2VdKX0sYWRkTGF5ZXI6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRMYXllcklkKHQpO3JldHVybiB0aGlzLl9sYXllcnNbZV09dCx0aGlzLl9tYXAmJnRoaXMuX21hcC5hZGRMYXllcih0KSx0aGlzfSxyZW1vdmVMYXllcjpmdW5jdGlvbih0KXt2YXIgZT10IGluIHRoaXMuX2xheWVycz90OnRoaXMuZ2V0TGF5ZXJJZCh0KTtyZXR1cm4gdGhpcy5fbWFwJiZ0aGlzLl9sYXllcnNbZV0mJnRoaXMuX21hcC5yZW1vdmVMYXllcih0aGlzLl9sYXllcnNbZV0pLGRlbGV0ZSB0aGlzLl9sYXllcnNbZV0sdGhpc30saGFzTGF5ZXI6ZnVuY3Rpb24odCl7cmV0dXJuISF0JiYodCBpbiB0aGlzLl9sYXllcnN8fHRoaXMuZ2V0TGF5ZXJJZCh0KWluIHRoaXMuX2xheWVycyl9LGNsZWFyTGF5ZXJzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2xheWVycyl0aGlzLnJlbW92ZUxheWVyKHRoaXMuX2xheWVyc1t0XSk7cmV0dXJuIHRoaXN9LGludm9rZTpmdW5jdGlvbih0KXt2YXIgZSxpLG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2ZvcihlIGluIHRoaXMuX2xheWVycylpPXRoaXMuX2xheWVyc1tlXSxpW3RdJiZpW3RdLmFwcGx5KGksbik7cmV0dXJuIHRoaXN9LG9uQWRkOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLl9sYXllcnMpdC5hZGRMYXllcih0aGlzLl9sYXllcnNbZV0pfSxvblJlbW92ZTpmdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5fbGF5ZXJzKXQucmVtb3ZlTGF5ZXIodGhpcy5fbGF5ZXJzW2VdKX0sZWFjaExheWVyOmZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIHRoaXMuX2xheWVycyl0LmNhbGwoZSx0aGlzLl9sYXllcnNbaV0pO3JldHVybiB0aGlzfSxnZXRMYXllcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fbGF5ZXJzW3RdfSxnZXRMYXllcnM6ZnVuY3Rpb24oKXt2YXIgdD1bXTtmb3IodmFyIGUgaW4gdGhpcy5fbGF5ZXJzKXQucHVzaCh0aGlzLl9sYXllcnNbZV0pO3JldHVybiB0fSxzZXRaSW5kZXg6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW52b2tlKFwic2V0WkluZGV4XCIsdCl9LGdldExheWVySWQ6ZnVuY3Rpb24odCl7cmV0dXJuIG8uc3RhbXAodCl9fSksby5sYXllckdyb3VwPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5MYXllckdyb3VwKHQpfSxvLkZlYXR1cmVHcm91cD1vLkxheWVyR3JvdXAuZXh0ZW5kKHthZGRMYXllcjpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5oYXNMYXllcih0KT90aGlzOih0LmFkZEV2ZW50UGFyZW50KHRoaXMpLG8uTGF5ZXJHcm91cC5wcm90b3R5cGUuYWRkTGF5ZXIuY2FsbCh0aGlzLHQpLHRoaXMuZmlyZShcImxheWVyYWRkXCIse2xheWVyOnR9KSl9LHJlbW92ZUxheWVyOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmhhc0xheWVyKHQpPyh0IGluIHRoaXMuX2xheWVycyYmKHQ9dGhpcy5fbGF5ZXJzW3RdKSx0LnJlbW92ZUV2ZW50UGFyZW50KHRoaXMpLG8uTGF5ZXJHcm91cC5wcm90b3R5cGUucmVtb3ZlTGF5ZXIuY2FsbCh0aGlzLHQpLHRoaXMuZmlyZShcImxheWVycmVtb3ZlXCIse2xheWVyOnR9KSk6dGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuaW52b2tlKFwic2V0U3R5bGVcIix0KX0sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW52b2tlKFwiYnJpbmdUb0Zyb250XCIpfSxicmluZ1RvQmFjazpmdW5jdGlvbigpe3JldHVybiB0aGlzLmludm9rZShcImJyaW5nVG9CYWNrXCIpfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgby5MYXRMbmdCb3VuZHM7Zm9yKHZhciBlIGluIHRoaXMuX2xheWVycyl7dmFyIGk9dGhpcy5fbGF5ZXJzW2VdO3QuZXh0ZW5kKGkuZ2V0Qm91bmRzP2kuZ2V0Qm91bmRzKCk6aS5nZXRMYXRMbmcoKSl9cmV0dXJuIHR9fSksby5mZWF0dXJlR3JvdXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLkZlYXR1cmVHcm91cCh0KX0sby5SZW5kZXJlcj1vLkxheWVyLmV4dGVuZCh7b3B0aW9uczp7cGFkZGluZzouMX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXtvLnNldE9wdGlvbnModGhpcyx0KSxvLnN0YW1wKHRoaXMpLHRoaXMuX2xheWVycz10aGlzLl9sYXllcnN8fHt9fSxvbkFkZDpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcnx8KHRoaXMuX2luaXRDb250YWluZXIoKSx0aGlzLl96b29tQW5pbWF0ZWQmJm8uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9jb250YWluZXIsXCJsZWFmbGV0LXpvb20tYW5pbWF0ZWRcIikpLHRoaXMuZ2V0UGFuZSgpLmFwcGVuZENoaWxkKHRoaXMuX2NvbnRhaW5lciksdGhpcy5fdXBkYXRlKCksdGhpcy5vbihcInVwZGF0ZVwiLHRoaXMuX3VwZGF0ZVBhdGhzLHRoaXMpfSxvblJlbW92ZTpmdW5jdGlvbigpe28uRG9tVXRpbC5yZW1vdmUodGhpcy5fY29udGFpbmVyKSx0aGlzLm9mZihcInVwZGF0ZVwiLHRoaXMuX3VwZGF0ZVBhdGhzLHRoaXMpfSxnZXRFdmVudHM6ZnVuY3Rpb24oKXt2YXIgdD17dmlld3Jlc2V0OnRoaXMuX3Jlc2V0LHpvb206dGhpcy5fb25ab29tLG1vdmVlbmQ6dGhpcy5fdXBkYXRlLHpvb21lbmQ6dGhpcy5fb25ab29tRW5kfTtyZXR1cm4gdGhpcy5fem9vbUFuaW1hdGVkJiYodC56b29tYW5pbT10aGlzLl9vbkFuaW1ab29tKSx0fSxfb25BbmltWm9vbTpmdW5jdGlvbih0KXt0aGlzLl91cGRhdGVUcmFuc2Zvcm0odC5jZW50ZXIsdC56b29tKX0sX29uWm9vbTpmdW5jdGlvbigpe3RoaXMuX3VwZGF0ZVRyYW5zZm9ybSh0aGlzLl9tYXAuZ2V0Q2VudGVyKCksdGhpcy5fbWFwLmdldFpvb20oKSl9LF91cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9tYXAuZ2V0Wm9vbVNjYWxlKGUsdGhpcy5fem9vbSksbj1vLkRvbVV0aWwuZ2V0UG9zaXRpb24odGhpcy5fY29udGFpbmVyKSxzPXRoaXMuX21hcC5nZXRTaXplKCkubXVsdGlwbHlCeSguNSt0aGlzLm9wdGlvbnMucGFkZGluZykscj10aGlzLl9tYXAucHJvamVjdCh0aGlzLl9jZW50ZXIsZSksYT10aGlzLl9tYXAucHJvamVjdCh0LGUpLGg9YS5zdWJ0cmFjdChyKSxsPXMubXVsdGlwbHlCeSgtaSkuYWRkKG4pLmFkZChzKS5zdWJ0cmFjdChoKTtvLkJyb3dzZXIuYW55M2Q/by5Eb21VdGlsLnNldFRyYW5zZm9ybSh0aGlzLl9jb250YWluZXIsbCxpKTpvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fY29udGFpbmVyLGwpfSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGUoKSx0aGlzLl91cGRhdGVUcmFuc2Zvcm0odGhpcy5fY2VudGVyLHRoaXMuX3pvb20pO2Zvcih2YXIgdCBpbiB0aGlzLl9sYXllcnMpdGhpcy5fbGF5ZXJzW3RdLl9yZXNldCgpfSxfb25ab29tRW5kOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2xheWVycyl0aGlzLl9sYXllcnNbdF0uX3Byb2plY3QoKX0sX3VwZGF0ZVBhdGhzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0IGluIHRoaXMuX2xheWVycyl0aGlzLl9sYXllcnNbdF0uX3VwZGF0ZSgpfSxfdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5vcHRpb25zLnBhZGRpbmcsZT10aGlzLl9tYXAuZ2V0U2l6ZSgpLGk9dGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXllclBvaW50KGUubXVsdGlwbHlCeSgtdCkpLnJvdW5kKCk7dGhpcy5fYm91bmRzPW5ldyBvLkJvdW5kcyhpLGkuYWRkKGUubXVsdGlwbHlCeSgxKzIqdCkpLnJvdW5kKCkpLHRoaXMuX2NlbnRlcj10aGlzLl9tYXAuZ2V0Q2VudGVyKCksdGhpcy5fem9vbT10aGlzLl9tYXAuZ2V0Wm9vbSgpfX0pLG8uTWFwLmluY2x1ZGUoe2dldFJlbmRlcmVyOmZ1bmN0aW9uKHQpe3ZhciBlPXQub3B0aW9ucy5yZW5kZXJlcnx8dGhpcy5fZ2V0UGFuZVJlbmRlcmVyKHQub3B0aW9ucy5wYW5lKXx8dGhpcy5vcHRpb25zLnJlbmRlcmVyfHx0aGlzLl9yZW5kZXJlcjtyZXR1cm4gZXx8KGU9dGhpcy5fcmVuZGVyZXI9dGhpcy5vcHRpb25zLnByZWZlckNhbnZhcyYmby5jYW52YXMoKXx8by5zdmcoKSksdGhpcy5oYXNMYXllcihlKXx8dGhpcy5hZGRMYXllcihlKSxlfSxfZ2V0UGFuZVJlbmRlcmVyOmZ1bmN0aW9uKHQpe2lmKFwib3ZlcmxheVBhbmVcIj09PXR8fHQ9PT1pKXJldHVybiExO3ZhciBlPXRoaXMuX3BhbmVSZW5kZXJlcnNbdF07cmV0dXJuIGU9PT1pJiYoZT1vLlNWRyYmby5zdmcoe3BhbmU6dH0pfHxvLkNhbnZhcyYmby5jYW52YXMoe3BhbmU6dH0pLHRoaXMuX3BhbmVSZW5kZXJlcnNbdF09ZSksZX19KSxvLlBhdGg9by5MYXllci5leHRlbmQoe29wdGlvbnM6e3N0cm9rZTohMCxjb2xvcjpcIiMzMzg4ZmZcIix3ZWlnaHQ6MyxvcGFjaXR5OjEsbGluZUNhcDpcInJvdW5kXCIsbGluZUpvaW46XCJyb3VuZFwiLGRhc2hBcnJheTpudWxsLGRhc2hPZmZzZXQ6bnVsbCxmaWxsOiExLGZpbGxDb2xvcjpudWxsLGZpbGxPcGFjaXR5Oi4yLGZpbGxSdWxlOlwiZXZlbm9kZFwiLGludGVyYWN0aXZlOiEwfSxiZWZvcmVBZGQ6ZnVuY3Rpb24odCl7dGhpcy5fcmVuZGVyZXI9dC5nZXRSZW5kZXJlcih0aGlzKX0sb25BZGQ6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5faW5pdFBhdGgodGhpcyksdGhpcy5fcmVzZXQoKSx0aGlzLl9yZW5kZXJlci5fYWRkUGF0aCh0aGlzKX0sb25SZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5fcmVtb3ZlUGF0aCh0aGlzKX0scmVkcmF3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21hcCYmdGhpcy5fcmVuZGVyZXIuX3VwZGF0ZVBhdGgodGhpcyksdGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIG8uc2V0T3B0aW9ucyh0aGlzLHQpLHRoaXMuX3JlbmRlcmVyJiZ0aGlzLl9yZW5kZXJlci5fdXBkYXRlU3R5bGUodGhpcyksdGhpc30sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlcmVyJiZ0aGlzLl9yZW5kZXJlci5fYnJpbmdUb0Zyb250KHRoaXMpLHRoaXN9LGJyaW5nVG9CYWNrOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlcmVyJiZ0aGlzLl9yZW5kZXJlci5fYnJpbmdUb0JhY2sodGhpcyksdGhpc30sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXRofSxfcmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9wcm9qZWN0KCksdGhpcy5fdXBkYXRlKCl9LF9jbGlja1RvbGVyYW5jZTpmdW5jdGlvbigpe3JldHVybih0aGlzLm9wdGlvbnMuc3Ryb2tlP3RoaXMub3B0aW9ucy53ZWlnaHQvMjowKSsoby5Ccm93c2VyLnRvdWNoPzEwOjApfX0pLG8uTGluZVV0aWw9e3NpbXBsaWZ5OmZ1bmN0aW9uKHQsZSl7aWYoIWV8fCF0Lmxlbmd0aClyZXR1cm4gdC5zbGljZSgpO3ZhciBpPWUqZTtyZXR1cm4gdD10aGlzLl9yZWR1Y2VQb2ludHModCxpKSx0PXRoaXMuX3NpbXBsaWZ5RFAodCxpKX0scG9pbnRUb1NlZ21lbnREaXN0YW5jZTpmdW5jdGlvbih0LGUsaSl7cmV0dXJuIE1hdGguc3FydCh0aGlzLl9zcUNsb3Nlc3RQb2ludE9uU2VnbWVudCh0LGUsaSwhMCkpfSxjbG9zZXN0UG9pbnRPblNlZ21lbnQ6ZnVuY3Rpb24odCxlLGkpe3JldHVybiB0aGlzLl9zcUNsb3Nlc3RQb2ludE9uU2VnbWVudCh0LGUsaSl9LF9zaW1wbGlmeURQOmZ1bmN0aW9uKHQsZSl7dmFyIG49dC5sZW5ndGgsbz10eXBlb2YgVWludDhBcnJheSE9aStcIlwiP1VpbnQ4QXJyYXk6QXJyYXkscz1uZXcgbyhuKTtzWzBdPXNbbi0xXT0xLHRoaXMuX3NpbXBsaWZ5RFBTdGVwKHQscyxlLDAsbi0xKTt2YXIgcixhPVtdO2ZvcihyPTA7cjxuO3IrKylzW3JdJiZhLnB1c2godFtyXSk7cmV0dXJuIGF9LF9zaW1wbGlmeURQU3RlcDpmdW5jdGlvbih0LGUsaSxuLG8pe3ZhciBzLHIsYSxoPTA7Zm9yKHI9bisxO3I8PW8tMTtyKyspYT10aGlzLl9zcUNsb3Nlc3RQb2ludE9uU2VnbWVudCh0W3JdLHRbbl0sdFtvXSwhMCksYT5oJiYocz1yLGg9YSk7aD5pJiYoZVtzXT0xLHRoaXMuX3NpbXBsaWZ5RFBTdGVwKHQsZSxpLG4scyksdGhpcy5fc2ltcGxpZnlEUFN0ZXAodCxlLGkscyxvKSl9LF9yZWR1Y2VQb2ludHM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9W3RbMF1dLG49MSxvPTAscz10Lmxlbmd0aDtuPHM7bisrKXRoaXMuX3NxRGlzdCh0W25dLHRbb10pPmUmJihpLnB1c2godFtuXSksbz1uKTtyZXR1cm4gbzxzLTEmJmkucHVzaCh0W3MtMV0pLGl9LGNsaXBTZWdtZW50OmZ1bmN0aW9uKHQsZSxpLG4sbyl7dmFyIHMscixhLGg9bj90aGlzLl9sYXN0Q29kZTp0aGlzLl9nZXRCaXRDb2RlKHQsaSksbD10aGlzLl9nZXRCaXRDb2RlKGUsaSk7Zm9yKHRoaXMuX2xhc3RDb2RlPWw7Oyl7aWYoIShofGwpKXJldHVyblt0LGVdO2lmKGgmbClyZXR1cm4hMTtzPWh8fGwscj10aGlzLl9nZXRFZGdlSW50ZXJzZWN0aW9uKHQsZSxzLGksbyksYT10aGlzLl9nZXRCaXRDb2RlKHIsaSkscz09PWg/KHQ9cixoPWEpOihlPXIsbD1hKX19LF9nZXRFZGdlSW50ZXJzZWN0aW9uOmZ1bmN0aW9uKHQsZSxpLG4scyl7dmFyIHIsYSxoPWUueC10LngsbD1lLnktdC55LHU9bi5taW4sYz1uLm1heDtyZXR1cm4gOCZpPyhyPXQueCtoKihjLnktdC55KS9sLGE9Yy55KTo0Jmk/KHI9dC54K2gqKHUueS10LnkpL2wsYT11LnkpOjImaT8ocj1jLngsYT10LnkrbCooYy54LXQueCkvaCk6MSZpJiYocj11LngsYT10LnkrbCoodS54LXQueCkvaCksbmV3IG8uUG9pbnQocixhLHMpfSxfZ2V0Qml0Q29kZTpmdW5jdGlvbih0LGUpe3ZhciBpPTA7cmV0dXJuIHQueDxlLm1pbi54P2l8PTE6dC54PmUubWF4LngmJihpfD0yKSx0Lnk8ZS5taW4ueT9pfD00OnQueT5lLm1heC55JiYoaXw9OCksaX0sX3NxRGlzdDpmdW5jdGlvbih0LGUpe3ZhciBpPWUueC10Lngsbj1lLnktdC55O3JldHVybiBpKmkrbipufSxfc3FDbG9zZXN0UG9pbnRPblNlZ21lbnQ6ZnVuY3Rpb24odCxlLGksbil7dmFyIHMscj1lLngsYT1lLnksaD1pLngtcixsPWkueS1hLHU9aCpoK2wqbDtyZXR1cm4gdT4wJiYocz0oKHQueC1yKSpoKyh0LnktYSkqbCkvdSxzPjE/KHI9aS54LGE9aS55KTpzPjAmJihyKz1oKnMsYSs9bCpzKSksaD10LngtcixsPXQueS1hLG4/aCpoK2wqbDpuZXcgby5Qb2ludChyLGEpfX0sby5Qb2x5bGluZT1vLlBhdGguZXh0ZW5kKHtvcHRpb25zOntzbW9vdGhGYWN0b3I6MSxub0NsaXA6ITF9LGluaXRpYWxpemU6ZnVuY3Rpb24odCxlKXtvLnNldE9wdGlvbnModGhpcyxlKSx0aGlzLl9zZXRMYXRMbmdzKHQpfSxnZXRMYXRMbmdzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xhdGxuZ3N9LHNldExhdExuZ3M6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3NldExhdExuZ3ModCksdGhpcy5yZWRyYXcoKX0saXNFbXB0eTpmdW5jdGlvbigpe3JldHVybiF0aGlzLl9sYXRsbmdzLmxlbmd0aH0sY2xvc2VzdExheWVyUG9pbnQ6ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGksbj0xLzAscz1udWxsLHI9by5MaW5lVXRpbC5fc3FDbG9zZXN0UG9pbnRPblNlZ21lbnQsYT0wLGg9dGhpcy5fcGFydHMubGVuZ3RoO2E8aDthKyspZm9yKHZhciBsPXRoaXMuX3BhcnRzW2FdLHU9MSxjPWwubGVuZ3RoO3U8Yzt1Kyspe2U9bFt1LTFdLGk9bFt1XTt2YXIgZD1yKHQsZSxpLCEwKTtkPG4mJihuPWQscz1yKHQsZSxpKSl9cmV0dXJuIHMmJihzLmRpc3RhbmNlPU1hdGguc3FydChuKSksc30sZ2V0Q2VudGVyOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX21hcCl0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IGFkZCBsYXllciB0byBtYXAgYmVmb3JlIHVzaW5nIGdldENlbnRlcigpXCIpO3ZhciB0LGUsaSxuLG8scyxyLGE9dGhpcy5fcmluZ3NbMF0saD1hLmxlbmd0aDtpZighaClyZXR1cm4gbnVsbDtmb3IodD0wLGU9MDt0PGgtMTt0KyspZSs9YVt0XS5kaXN0YW5jZVRvKGFbdCsxXSkvMjtpZigwPT09ZSlyZXR1cm4gdGhpcy5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhhWzBdKTtmb3IodD0wLG49MDt0PGgtMTt0KyspaWYobz1hW3RdLHM9YVt0KzFdLGk9by5kaXN0YW5jZVRvKHMpLG4rPWksbj5lKXJldHVybiByPShuLWUpL2ksdGhpcy5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhbcy54LXIqKHMueC1vLngpLHMueS1yKihzLnktby55KV0pfSxnZXRCb3VuZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYm91bmRzfSxhZGRMYXRMbmc6ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT1lfHx0aGlzLl9kZWZhdWx0U2hhcGUoKSx0PW8ubGF0TG5nKHQpLGUucHVzaCh0KSx0aGlzLl9ib3VuZHMuZXh0ZW5kKHQpLHRoaXMucmVkcmF3KCl9LF9zZXRMYXRMbmdzOmZ1bmN0aW9uKHQpe3RoaXMuX2JvdW5kcz1uZXcgby5MYXRMbmdCb3VuZHMsdGhpcy5fbGF0bG5ncz10aGlzLl9jb252ZXJ0TGF0TG5ncyh0KX0sX2RlZmF1bHRTaGFwZTpmdW5jdGlvbigpe3JldHVybiBvLlBvbHlsaW5lLl9mbGF0KHRoaXMuX2xhdGxuZ3MpP3RoaXMuX2xhdGxuZ3M6dGhpcy5fbGF0bG5nc1swXX0sX2NvbnZlcnRMYXRMbmdzOmZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxpPW8uUG9seWxpbmUuX2ZsYXQodCksbj0wLHM9dC5sZW5ndGg7bjxzO24rKylpPyhlW25dPW8ubGF0TG5nKHRbbl0pLHRoaXMuX2JvdW5kcy5leHRlbmQoZVtuXSkpOmVbbl09dGhpcy5fY29udmVydExhdExuZ3ModFtuXSk7cmV0dXJuIGV9LF9wcm9qZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9bmV3IG8uQm91bmRzO3RoaXMuX3JpbmdzPVtdLHRoaXMuX3Byb2plY3RMYXRsbmdzKHRoaXMuX2xhdGxuZ3MsdGhpcy5fcmluZ3MsdCk7dmFyIGU9dGhpcy5fY2xpY2tUb2xlcmFuY2UoKSxpPW5ldyBvLlBvaW50KGUsZSk7dGhpcy5fYm91bmRzLmlzVmFsaWQoKSYmdC5pc1ZhbGlkKCkmJih0Lm1pbi5fc3VidHJhY3QoaSksdC5tYXguX2FkZChpKSx0aGlzLl9weEJvdW5kcz10KX0sX3Byb2plY3RMYXRsbmdzOmZ1bmN0aW9uKHQsZSxpKXt2YXIgbixzLHI9dFswXWluc3RhbmNlb2Ygby5MYXRMbmcsYT10Lmxlbmd0aDtpZihyKXtmb3Iocz1bXSxuPTA7bjxhO24rKylzW25dPXRoaXMuX21hcC5sYXRMbmdUb0xheWVyUG9pbnQodFtuXSksaS5leHRlbmQoc1tuXSk7ZS5wdXNoKHMpfWVsc2UgZm9yKG49MDtuPGE7bisrKXRoaXMuX3Byb2plY3RMYXRsbmdzKHRbbl0sZSxpKX0sX2NsaXBQb2ludHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yZW5kZXJlci5fYm91bmRzO2lmKHRoaXMuX3BhcnRzPVtdLHRoaXMuX3B4Qm91bmRzJiZ0aGlzLl9weEJvdW5kcy5pbnRlcnNlY3RzKHQpKXtpZih0aGlzLm9wdGlvbnMubm9DbGlwKXJldHVybiB2b2lkKHRoaXMuX3BhcnRzPXRoaXMuX3JpbmdzKTt2YXIgZSxpLG4scyxyLGEsaCxsPXRoaXMuX3BhcnRzO2ZvcihlPTAsbj0wLHM9dGhpcy5fcmluZ3MubGVuZ3RoO2U8cztlKyspZm9yKGg9dGhpcy5fcmluZ3NbZV0saT0wLHI9aC5sZW5ndGg7aTxyLTE7aSsrKWE9by5MaW5lVXRpbC5jbGlwU2VnbWVudChoW2ldLGhbaSsxXSx0LGksITApLGEmJihsW25dPWxbbl18fFtdLGxbbl0ucHVzaChhWzBdKSxhWzFdPT09aFtpKzFdJiZpIT09ci0yfHwobFtuXS5wdXNoKGFbMV0pLG4rKykpfX0sX3NpbXBsaWZ5UG9pbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuX3BhcnRzLGU9dGhpcy5vcHRpb25zLnNtb290aEZhY3RvcixpPTAsbj10Lmxlbmd0aDtpPG47aSsrKXRbaV09by5MaW5lVXRpbC5zaW1wbGlmeSh0W2ldLGUpfSxfdXBkYXRlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwJiYodGhpcy5fY2xpcFBvaW50cygpLHRoaXMuX3NpbXBsaWZ5UG9pbnRzKCksdGhpcy5fdXBkYXRlUGF0aCgpKX0sX3VwZGF0ZVBhdGg6ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5fdXBkYXRlUG9seSh0aGlzKX19KSxvLnBvbHlsaW5lPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLlBvbHlsaW5lKHQsZSl9LG8uUG9seWxpbmUuX2ZsYXQ9ZnVuY3Rpb24odCl7cmV0dXJuIW8uVXRpbC5pc0FycmF5KHRbMF0pfHxcIm9iamVjdFwiIT10eXBlb2YgdFswXVswXSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHRbMF1bMF19LG8uUG9seVV0aWw9e30sby5Qb2x5VXRpbC5jbGlwUG9seWdvbj1mdW5jdGlvbih0LGUsaSl7dmFyIG4scyxyLGEsaCxsLHUsYyxkLF89WzEsNCwyLDhdLG09by5MaW5lVXRpbDtmb3Iocz0wLHU9dC5sZW5ndGg7czx1O3MrKyl0W3NdLl9jb2RlPW0uX2dldEJpdENvZGUodFtzXSxlKTtmb3IoYT0wO2E8NDthKyspe2ZvcihjPV9bYV0sbj1bXSxzPTAsdT10Lmxlbmd0aCxyPXUtMTtzPHU7cj1zKyspaD10W3NdLGw9dFtyXSxoLl9jb2RlJmM/bC5fY29kZSZjfHwoZD1tLl9nZXRFZGdlSW50ZXJzZWN0aW9uKGwsaCxjLGUsaSksZC5fY29kZT1tLl9nZXRCaXRDb2RlKGQsZSksbi5wdXNoKGQpKToobC5fY29kZSZjJiYoZD1tLl9nZXRFZGdlSW50ZXJzZWN0aW9uKGwsaCxjLGUsaSksZC5fY29kZT1tLl9nZXRCaXRDb2RlKGQsZSksbi5wdXNoKGQpKSxuLnB1c2goaCkpO3Q9bn1yZXR1cm4gdH0sby5Qb2x5Z29uPW8uUG9seWxpbmUuZXh0ZW5kKHtvcHRpb25zOntmaWxsOiEwfSxpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX2xhdGxuZ3MubGVuZ3RofHwhdGhpcy5fbGF0bG5nc1swXS5sZW5ndGh9LGdldENlbnRlcjpmdW5jdGlvbigpe2lmKCF0aGlzLl9tYXApdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBhZGQgbGF5ZXIgdG8gbWFwIGJlZm9yZSB1c2luZyBnZXRDZW50ZXIoKVwiKTt2YXIgdCxlLGksbixvLHMscixhLGgsbD10aGlzLl9yaW5nc1swXSx1PWwubGVuZ3RoO2lmKCF1KXJldHVybiBudWxsO2ZvcihzPXI9YT0wLHQ9MCxlPXUtMTt0PHU7ZT10KyspaT1sW3RdLG49bFtlXSxvPWkueSpuLngtbi55KmkueCxyKz0oaS54K24ueCkqbyxhKz0oaS55K24ueSkqbyxzKz0zKm87cmV0dXJuIGg9MD09PXM/bFswXTpbci9zLGEvc10sdGhpcy5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhoKX0sX2NvbnZlcnRMYXRMbmdzOmZ1bmN0aW9uKHQpe3ZhciBlPW8uUG9seWxpbmUucHJvdG90eXBlLl9jb252ZXJ0TGF0TG5ncy5jYWxsKHRoaXMsdCksaT1lLmxlbmd0aDtyZXR1cm4gaT49MiYmZVswXWluc3RhbmNlb2Ygby5MYXRMbmcmJmVbMF0uZXF1YWxzKGVbaS0xXSkmJmUucG9wKCksZX0sX3NldExhdExuZ3M6ZnVuY3Rpb24odCl7by5Qb2x5bGluZS5wcm90b3R5cGUuX3NldExhdExuZ3MuY2FsbCh0aGlzLHQpLG8uUG9seWxpbmUuX2ZsYXQodGhpcy5fbGF0bG5ncykmJih0aGlzLl9sYXRsbmdzPVt0aGlzLl9sYXRsbmdzXSl9LF9kZWZhdWx0U2hhcGU6ZnVuY3Rpb24oKXtyZXR1cm4gby5Qb2x5bGluZS5fZmxhdCh0aGlzLl9sYXRsbmdzWzBdKT90aGlzLl9sYXRsbmdzWzBdOnRoaXMuX2xhdGxuZ3NbMF1bMF19LF9jbGlwUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVuZGVyZXIuX2JvdW5kcyxlPXRoaXMub3B0aW9ucy53ZWlnaHQsaT1uZXcgby5Qb2ludChlLGUpO2lmKHQ9bmV3IG8uQm91bmRzKHQubWluLnN1YnRyYWN0KGkpLHQubWF4LmFkZChpKSksdGhpcy5fcGFydHM9W10sdGhpcy5fcHhCb3VuZHMmJnRoaXMuX3B4Qm91bmRzLmludGVyc2VjdHModCkpe2lmKHRoaXMub3B0aW9ucy5ub0NsaXApcmV0dXJuIHZvaWQodGhpcy5fcGFydHM9dGhpcy5fcmluZ3MpO2Zvcih2YXIgbixzPTAscj10aGlzLl9yaW5ncy5sZW5ndGg7czxyO3MrKyluPW8uUG9seVV0aWwuY2xpcFBvbHlnb24odGhpcy5fcmluZ3Nbc10sdCwhMCksbi5sZW5ndGgmJnRoaXMuX3BhcnRzLnB1c2gobil9fSxfdXBkYXRlUGF0aDpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLl91cGRhdGVQb2x5KHRoaXMsITApfX0pLG8ucG9seWdvbj1mdW5jdGlvbih0LGUpe3JldHVybiBuZXcgby5Qb2x5Z29uKHQsZSl9LG8uUmVjdGFuZ2xlPW8uUG9seWdvbi5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCxlKXtvLlBvbHlnb24ucHJvdG90eXBlLmluaXRpYWxpemUuY2FsbCh0aGlzLHRoaXMuX2JvdW5kc1RvTGF0TG5ncyh0KSxlKX0sc2V0Qm91bmRzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNldExhdExuZ3ModGhpcy5fYm91bmRzVG9MYXRMbmdzKHQpKX0sX2JvdW5kc1RvTGF0TG5nczpmdW5jdGlvbih0KXtyZXR1cm4gdD1vLmxhdExuZ0JvdW5kcyh0KSxbdC5nZXRTb3V0aFdlc3QoKSx0LmdldE5vcnRoV2VzdCgpLHQuZ2V0Tm9ydGhFYXN0KCksdC5nZXRTb3V0aEVhc3QoKV19fSksby5yZWN0YW5nbGU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uUmVjdGFuZ2xlKHQsZSl9LG8uQ2lyY2xlTWFya2VyPW8uUGF0aC5leHRlbmQoe29wdGlvbnM6e2ZpbGw6ITAscmFkaXVzOjEwfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQsZSl7by5zZXRPcHRpb25zKHRoaXMsZSksdGhpcy5fbGF0bG5nPW8ubGF0TG5nKHQpLHRoaXMuX3JhZGl1cz10aGlzLm9wdGlvbnMucmFkaXVzfSxzZXRMYXRMbmc6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2xhdGxuZz1vLmxhdExuZyh0KSx0aGlzLnJlZHJhdygpLHRoaXMuZmlyZShcIm1vdmVcIix7bGF0bG5nOnRoaXMuX2xhdGxuZ30pfSxnZXRMYXRMbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGF0bG5nfSxzZXRSYWRpdXM6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3B0aW9ucy5yYWRpdXM9dGhpcy5fcmFkaXVzPXQsdGhpcy5yZWRyYXcoKX0sZ2V0UmFkaXVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JhZGl1c30sc2V0U3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5yYWRpdXN8fHRoaXMuX3JhZGl1cztyZXR1cm4gby5QYXRoLnByb3RvdHlwZS5zZXRTdHlsZS5jYWxsKHRoaXMsdCksdGhpcy5zZXRSYWRpdXMoZSksdGhpc30sX3Byb2plY3Q6ZnVuY3Rpb24oKXt0aGlzLl9wb2ludD10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KHRoaXMuX2xhdGxuZyksdGhpcy5fdXBkYXRlQm91bmRzKCl9LF91cGRhdGVCb3VuZHM6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yYWRpdXMsZT10aGlzLl9yYWRpdXNZfHx0LGk9dGhpcy5fY2xpY2tUb2xlcmFuY2UoKSxuPVt0K2ksZStpXTt0aGlzLl9weEJvdW5kcz1uZXcgby5Cb3VuZHModGhpcy5fcG9pbnQuc3VidHJhY3QobiksdGhpcy5fcG9pbnQuYWRkKG4pKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX21hcCYmdGhpcy5fdXBkYXRlUGF0aCgpfSxfdXBkYXRlUGF0aDpmdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLl91cGRhdGVDaXJjbGUodGhpcyl9LF9lbXB0eTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yYWRpdXMmJiF0aGlzLl9yZW5kZXJlci5fYm91bmRzLmludGVyc2VjdHModGhpcy5fcHhCb3VuZHMpfX0pLG8uY2lyY2xlTWFya2VyPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG5ldyBvLkNpcmNsZU1hcmtlcih0LGUpfSxvLkNpcmNsZT1vLkNpcmNsZU1hcmtlci5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCxlLGkpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYoZT1vLmV4dGVuZCh7fSxpLHtyYWRpdXM6ZX0pKSxvLnNldE9wdGlvbnModGhpcyxlKSx0aGlzLl9sYXRsbmc9by5sYXRMbmcodCksaXNOYU4odGhpcy5vcHRpb25zLnJhZGl1cykpdGhyb3cgbmV3IEVycm9yKFwiQ2lyY2xlIHJhZGl1cyBjYW5ub3QgYmUgTmFOXCIpO3RoaXMuX21SYWRpdXM9dGhpcy5vcHRpb25zLnJhZGl1c30sc2V0UmFkaXVzOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9tUmFkaXVzPXQsdGhpcy5yZWRyYXcoKX0sZ2V0UmFkaXVzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21SYWRpdXN9LGdldEJvdW5kczpmdW5jdGlvbigpe3ZhciB0PVt0aGlzLl9yYWRpdXMsdGhpcy5fcmFkaXVzWXx8dGhpcy5fcmFkaXVzXTtyZXR1cm4gbmV3IG8uTGF0TG5nQm91bmRzKHRoaXMuX21hcC5sYXllclBvaW50VG9MYXRMbmcodGhpcy5fcG9pbnQuc3VidHJhY3QodCkpLHRoaXMuX21hcC5sYXllclBvaW50VG9MYXRMbmcodGhpcy5fcG9pbnQuYWRkKHQpKSk7XHJcbn0sc2V0U3R5bGU6by5QYXRoLnByb3RvdHlwZS5zZXRTdHlsZSxfcHJvamVjdDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2xhdGxuZy5sbmcsZT10aGlzLl9sYXRsbmcubGF0LGk9dGhpcy5fbWFwLG49aS5vcHRpb25zLmNycztpZihuLmRpc3RhbmNlPT09by5DUlMuRWFydGguZGlzdGFuY2Upe3ZhciBzPU1hdGguUEkvMTgwLHI9dGhpcy5fbVJhZGl1cy9vLkNSUy5FYXJ0aC5SL3MsYT1pLnByb2plY3QoW2Urcix0XSksaD1pLnByb2plY3QoW2Utcix0XSksbD1hLmFkZChoKS5kaXZpZGVCeSgyKSx1PWkudW5wcm9qZWN0KGwpLmxhdCxjPU1hdGguYWNvcygoTWF0aC5jb3MocipzKS1NYXRoLnNpbihlKnMpKk1hdGguc2luKHUqcykpLyhNYXRoLmNvcyhlKnMpKk1hdGguY29zKHUqcykpKS9zOyhpc05hTihjKXx8MD09PWMpJiYoYz1yL01hdGguY29zKE1hdGguUEkvMTgwKmUpKSx0aGlzLl9wb2ludD1sLnN1YnRyYWN0KGkuZ2V0UGl4ZWxPcmlnaW4oKSksdGhpcy5fcmFkaXVzPWlzTmFOKGMpPzA6TWF0aC5tYXgoTWF0aC5yb3VuZChsLngtaS5wcm9qZWN0KFt1LHQtY10pLngpLDEpLHRoaXMuX3JhZGl1c1k9TWF0aC5tYXgoTWF0aC5yb3VuZChsLnktYS55KSwxKX1lbHNle3ZhciBkPW4udW5wcm9qZWN0KG4ucHJvamVjdCh0aGlzLl9sYXRsbmcpLnN1YnRyYWN0KFt0aGlzLl9tUmFkaXVzLDBdKSk7dGhpcy5fcG9pbnQ9aS5sYXRMbmdUb0xheWVyUG9pbnQodGhpcy5fbGF0bG5nKSx0aGlzLl9yYWRpdXM9dGhpcy5fcG9pbnQueC1pLmxhdExuZ1RvTGF5ZXJQb2ludChkKS54fXRoaXMuX3VwZGF0ZUJvdW5kcygpfX0pLG8uY2lyY2xlPWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gbmV3IG8uQ2lyY2xlKHQsZSxpKX0sby5TVkc9by5SZW5kZXJlci5leHRlbmQoe2dldEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PW8uUmVuZGVyZXIucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybiB0Lnpvb21zdGFydD10aGlzLl9vblpvb21TdGFydCx0fSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lcj1vLlNWRy5jcmVhdGUoXCJzdmdcIiksdGhpcy5fY29udGFpbmVyLnNldEF0dHJpYnV0ZShcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpLHRoaXMuX3Jvb3RHcm91cD1vLlNWRy5jcmVhdGUoXCJnXCIpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb290R3JvdXApfSxfb25ab29tU3RhcnQ6ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGUoKX0sX3VwZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLl9tYXAuX2FuaW1hdGluZ1pvb218fCF0aGlzLl9ib3VuZHMpe28uUmVuZGVyZXIucHJvdG90eXBlLl91cGRhdGUuY2FsbCh0aGlzKTt2YXIgdD10aGlzLl9ib3VuZHMsZT10LmdldFNpemUoKSxpPXRoaXMuX2NvbnRhaW5lcjt0aGlzLl9zdmdTaXplJiZ0aGlzLl9zdmdTaXplLmVxdWFscyhlKXx8KHRoaXMuX3N2Z1NpemU9ZSxpLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsZS54KSxpLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGUueSkpLG8uRG9tVXRpbC5zZXRQb3NpdGlvbihpLHQubWluKSxpLnNldEF0dHJpYnV0ZShcInZpZXdCb3hcIixbdC5taW4ueCx0Lm1pbi55LGUueCxlLnldLmpvaW4oXCIgXCIpKSx0aGlzLmZpcmUoXCJ1cGRhdGVcIil9fSxfaW5pdFBhdGg6ZnVuY3Rpb24odCl7dmFyIGU9dC5fcGF0aD1vLlNWRy5jcmVhdGUoXCJwYXRoXCIpO3Qub3B0aW9ucy5jbGFzc05hbWUmJm8uRG9tVXRpbC5hZGRDbGFzcyhlLHQub3B0aW9ucy5jbGFzc05hbWUpLHQub3B0aW9ucy5pbnRlcmFjdGl2ZSYmby5Eb21VdGlsLmFkZENsYXNzKGUsXCJsZWFmbGV0LWludGVyYWN0aXZlXCIpLHRoaXMuX3VwZGF0ZVN0eWxlKHQpLHRoaXMuX2xheWVyc1tvLnN0YW1wKHQpXT10fSxfYWRkUGF0aDpmdW5jdGlvbih0KXt0aGlzLl9yb290R3JvdXAuYXBwZW5kQ2hpbGQodC5fcGF0aCksdC5hZGRJbnRlcmFjdGl2ZVRhcmdldCh0Ll9wYXRoKX0sX3JlbW92ZVBhdGg6ZnVuY3Rpb24odCl7by5Eb21VdGlsLnJlbW92ZSh0Ll9wYXRoKSx0LnJlbW92ZUludGVyYWN0aXZlVGFyZ2V0KHQuX3BhdGgpLGRlbGV0ZSB0aGlzLl9sYXllcnNbby5zdGFtcCh0KV19LF91cGRhdGVQYXRoOmZ1bmN0aW9uKHQpe3QuX3Byb2plY3QoKSx0Ll91cGRhdGUoKX0sX3VwZGF0ZVN0eWxlOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX3BhdGgsaT10Lm9wdGlvbnM7ZSYmKGkuc3Ryb2tlPyhlLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLGkuY29sb3IpLGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLW9wYWNpdHlcIixpLm9wYWNpdHkpLGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsaS53ZWlnaHQpLGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIixpLmxpbmVDYXApLGUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVqb2luXCIsaS5saW5lSm9pbiksaS5kYXNoQXJyYXk/ZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaGFycmF5XCIsaS5kYXNoQXJyYXkpOmUucmVtb3ZlQXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiKSxpLmRhc2hPZmZzZXQ/ZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaG9mZnNldFwiLGkuZGFzaE9mZnNldCk6ZS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaG9mZnNldFwiKSk6ZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIixcIm5vbmVcIiksaS5maWxsPyhlLnNldEF0dHJpYnV0ZShcImZpbGxcIixpLmZpbGxDb2xvcnx8aS5jb2xvciksZS5zZXRBdHRyaWJ1dGUoXCJmaWxsLW9wYWNpdHlcIixpLmZpbGxPcGFjaXR5KSxlLnNldEF0dHJpYnV0ZShcImZpbGwtcnVsZVwiLGkuZmlsbFJ1bGV8fFwiZXZlbm9kZFwiKSk6ZS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsXCJub25lXCIpKX0sX3VwZGF0ZVBvbHk6ZnVuY3Rpb24odCxlKXt0aGlzLl9zZXRQYXRoKHQsby5TVkcucG9pbnRzVG9QYXRoKHQuX3BhcnRzLGUpKX0sX3VwZGF0ZUNpcmNsZTpmdW5jdGlvbih0KXt2YXIgZT10Ll9wb2ludCxpPXQuX3JhZGl1cyxuPXQuX3JhZGl1c1l8fGksbz1cImFcIitpK1wiLFwiK24rXCIgMCAxLDAgXCIscz10Ll9lbXB0eSgpP1wiTTAgMFwiOlwiTVwiKyhlLngtaSkrXCIsXCIrZS55K28rMippK1wiLDAgXCIrbysyKi1pK1wiLDAgXCI7dGhpcy5fc2V0UGF0aCh0LHMpfSxfc2V0UGF0aDpmdW5jdGlvbih0LGUpe3QuX3BhdGguc2V0QXR0cmlidXRlKFwiZFwiLGUpfSxfYnJpbmdUb0Zyb250OmZ1bmN0aW9uKHQpe28uRG9tVXRpbC50b0Zyb250KHQuX3BhdGgpfSxfYnJpbmdUb0JhY2s6ZnVuY3Rpb24odCl7by5Eb21VdGlsLnRvQmFjayh0Ll9wYXRoKX19KSxvLmV4dGVuZChvLlNWRyx7Y3JlYXRlOmZ1bmN0aW9uKHQpe3JldHVybiBlLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsdCl9LHBvaW50c1RvUGF0aDpmdW5jdGlvbih0LGUpe3ZhciBpLG4scyxyLGEsaCxsPVwiXCI7Zm9yKGk9MCxzPXQubGVuZ3RoO2k8cztpKyspe2ZvcihhPXRbaV0sbj0wLHI9YS5sZW5ndGg7bjxyO24rKyloPWFbbl0sbCs9KG4/XCJMXCI6XCJNXCIpK2gueCtcIiBcIitoLnk7bCs9ZT9vLkJyb3dzZXIuc3ZnP1wielwiOlwieFwiOlwiXCJ9cmV0dXJuIGx8fFwiTTAgMFwifX0pLG8uQnJvd3Nlci5zdmc9ISghZS5jcmVhdGVFbGVtZW50TlN8fCFvLlNWRy5jcmVhdGUoXCJzdmdcIikuY3JlYXRlU1ZHUmVjdCksby5zdmc9ZnVuY3Rpb24odCl7cmV0dXJuIG8uQnJvd3Nlci5zdmd8fG8uQnJvd3Nlci52bWw/bmV3IG8uU1ZHKHQpOm51bGx9LG8uQnJvd3Nlci52bWw9IW8uQnJvd3Nlci5zdmcmJmZ1bmN0aW9uKCl7dHJ5e3ZhciB0PWUuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmlubmVySFRNTD0nPHY6c2hhcGUgYWRqPVwiMVwiLz4nO3ZhciBpPXQuZmlyc3RDaGlsZDtyZXR1cm4gaS5zdHlsZS5iZWhhdmlvcj1cInVybCgjZGVmYXVsdCNWTUwpXCIsaSYmXCJvYmplY3RcIj09dHlwZW9mIGkuYWRqfWNhdGNoKHQpe3JldHVybiExfX0oKSxvLlNWRy5pbmNsdWRlKG8uQnJvd3Nlci52bWw/e19pbml0Q29udGFpbmVyOmZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixcImxlYWZsZXQtdm1sLWNvbnRhaW5lclwiKX0sX3VwZGF0ZTpmdW5jdGlvbigpe3RoaXMuX21hcC5fYW5pbWF0aW5nWm9vbXx8KG8uUmVuZGVyZXIucHJvdG90eXBlLl91cGRhdGUuY2FsbCh0aGlzKSx0aGlzLmZpcmUoXCJ1cGRhdGVcIikpfSxfaW5pdFBhdGg6ZnVuY3Rpb24odCl7dmFyIGU9dC5fY29udGFpbmVyPW8uU1ZHLmNyZWF0ZShcInNoYXBlXCIpO28uRG9tVXRpbC5hZGRDbGFzcyhlLFwibGVhZmxldC12bWwtc2hhcGUgXCIrKHRoaXMub3B0aW9ucy5jbGFzc05hbWV8fFwiXCIpKSxlLmNvb3Jkc2l6ZT1cIjEgMVwiLHQuX3BhdGg9by5TVkcuY3JlYXRlKFwicGF0aFwiKSxlLmFwcGVuZENoaWxkKHQuX3BhdGgpLHRoaXMuX3VwZGF0ZVN0eWxlKHQpLHRoaXMuX2xheWVyc1tvLnN0YW1wKHQpXT10fSxfYWRkUGF0aDpmdW5jdGlvbih0KXt2YXIgZT10Ll9jb250YWluZXI7dGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGUpLHQub3B0aW9ucy5pbnRlcmFjdGl2ZSYmdC5hZGRJbnRlcmFjdGl2ZVRhcmdldChlKX0sX3JlbW92ZVBhdGg6ZnVuY3Rpb24odCl7dmFyIGU9dC5fY29udGFpbmVyO28uRG9tVXRpbC5yZW1vdmUoZSksdC5yZW1vdmVJbnRlcmFjdGl2ZVRhcmdldChlKSxkZWxldGUgdGhpcy5fbGF5ZXJzW28uc3RhbXAodCldfSxfdXBkYXRlU3R5bGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5fc3Ryb2tlLGk9dC5fZmlsbCxuPXQub3B0aW9ucyxzPXQuX2NvbnRhaW5lcjtzLnN0cm9rZWQ9ISFuLnN0cm9rZSxzLmZpbGxlZD0hIW4uZmlsbCxuLnN0cm9rZT8oZXx8KGU9dC5fc3Ryb2tlPW8uU1ZHLmNyZWF0ZShcInN0cm9rZVwiKSkscy5hcHBlbmRDaGlsZChlKSxlLndlaWdodD1uLndlaWdodCtcInB4XCIsZS5jb2xvcj1uLmNvbG9yLGUub3BhY2l0eT1uLm9wYWNpdHksbi5kYXNoQXJyYXk/ZS5kYXNoU3R5bGU9by5VdGlsLmlzQXJyYXkobi5kYXNoQXJyYXkpP24uZGFzaEFycmF5LmpvaW4oXCIgXCIpOm4uZGFzaEFycmF5LnJlcGxhY2UoLyggKiwgKikvZyxcIiBcIik6ZS5kYXNoU3R5bGU9XCJcIixlLmVuZGNhcD1uLmxpbmVDYXAucmVwbGFjZShcImJ1dHRcIixcImZsYXRcIiksZS5qb2luc3R5bGU9bi5saW5lSm9pbik6ZSYmKHMucmVtb3ZlQ2hpbGQoZSksdC5fc3Ryb2tlPW51bGwpLG4uZmlsbD8oaXx8KGk9dC5fZmlsbD1vLlNWRy5jcmVhdGUoXCJmaWxsXCIpKSxzLmFwcGVuZENoaWxkKGkpLGkuY29sb3I9bi5maWxsQ29sb3J8fG4uY29sb3IsaS5vcGFjaXR5PW4uZmlsbE9wYWNpdHkpOmkmJihzLnJlbW92ZUNoaWxkKGkpLHQuX2ZpbGw9bnVsbCl9LF91cGRhdGVDaXJjbGU6ZnVuY3Rpb24odCl7dmFyIGU9dC5fcG9pbnQucm91bmQoKSxpPU1hdGgucm91bmQodC5fcmFkaXVzKSxuPU1hdGgucm91bmQodC5fcmFkaXVzWXx8aSk7dGhpcy5fc2V0UGF0aCh0LHQuX2VtcHR5KCk/XCJNMCAwXCI6XCJBTCBcIitlLngrXCIsXCIrZS55K1wiIFwiK2krXCIsXCIrbitcIiAwLDIzNTkyNjAwXCIpfSxfc2V0UGF0aDpmdW5jdGlvbih0LGUpe3QuX3BhdGgudj1lfSxfYnJpbmdUb0Zyb250OmZ1bmN0aW9uKHQpe28uRG9tVXRpbC50b0Zyb250KHQuX2NvbnRhaW5lcil9LF9icmluZ1RvQmFjazpmdW5jdGlvbih0KXtvLkRvbVV0aWwudG9CYWNrKHQuX2NvbnRhaW5lcil9fTp7fSksby5Ccm93c2VyLnZtbCYmKG8uU1ZHLmNyZWF0ZT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gZS5uYW1lc3BhY2VzLmFkZChcImx2bWxcIixcInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sXCIpLGZ1bmN0aW9uKHQpe3JldHVybiBlLmNyZWF0ZUVsZW1lbnQoXCI8bHZtbDpcIit0KycgY2xhc3M9XCJsdm1sXCI+Jyl9fWNhdGNoKHQpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5jcmVhdGVFbGVtZW50KFwiPFwiK3QrJyB4bWxucz1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC5jb206dm1sXCIgY2xhc3M9XCJsdm1sXCI+Jyl9fX0oKSksby5DYW52YXM9by5SZW5kZXJlci5leHRlbmQoe2dldEV2ZW50czpmdW5jdGlvbigpe3ZhciB0PW8uUmVuZGVyZXIucHJvdG90eXBlLmdldEV2ZW50cy5jYWxsKHRoaXMpO3JldHVybiB0LnZpZXdwcmVyZXNldD10aGlzLl9vblZpZXdQcmVSZXNldCx0fSxfb25WaWV3UHJlUmVzZXQ6ZnVuY3Rpb24oKXt0aGlzLl9wb3N0cG9uZVVwZGF0ZVBhdGhzPSEwfSxvbkFkZDpmdW5jdGlvbigpe28uUmVuZGVyZXIucHJvdG90eXBlLm9uQWRkLmNhbGwodGhpcyksdGhpcy5fZHJhdygpfSxfaW5pdENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX2NvbnRhaW5lcj1lLmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7by5Eb21FdmVudC5vbih0LFwibW91c2Vtb3ZlXCIsby5VdGlsLnRocm90dGxlKHRoaXMuX29uTW91c2VNb3ZlLDMyLHRoaXMpLHRoaXMpLm9uKHQsXCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2V1cCBjb250ZXh0bWVudVwiLHRoaXMuX29uQ2xpY2ssdGhpcykub24odCxcIm1vdXNlb3V0XCIsdGhpcy5faGFuZGxlTW91c2VPdXQsdGhpcyksdGhpcy5fY3R4PXQuZ2V0Q29udGV4dChcIjJkXCIpfSxfdXBkYXRlUGF0aHM6ZnVuY3Rpb24oKXtpZighdGhpcy5fcG9zdHBvbmVVcGRhdGVQYXRocyl7dmFyIHQ7dGhpcy5fcmVkcmF3Qm91bmRzPW51bGw7Zm9yKHZhciBlIGluIHRoaXMuX2xheWVycyl0PXRoaXMuX2xheWVyc1tlXSx0Ll91cGRhdGUoKTt0aGlzLl9yZWRyYXcoKX19LF91cGRhdGU6ZnVuY3Rpb24oKXtpZighdGhpcy5fbWFwLl9hbmltYXRpbmdab29tfHwhdGhpcy5fYm91bmRzKXt0aGlzLl9kcmF3bkxheWVycz17fSxvLlJlbmRlcmVyLnByb3RvdHlwZS5fdXBkYXRlLmNhbGwodGhpcyk7dmFyIHQ9dGhpcy5fYm91bmRzLGU9dGhpcy5fY29udGFpbmVyLGk9dC5nZXRTaXplKCksbj1vLkJyb3dzZXIucmV0aW5hPzI6MTtvLkRvbVV0aWwuc2V0UG9zaXRpb24oZSx0Lm1pbiksZS53aWR0aD1uKmkueCxlLmhlaWdodD1uKmkueSxlLnN0eWxlLndpZHRoPWkueCtcInB4XCIsZS5zdHlsZS5oZWlnaHQ9aS55K1wicHhcIixvLkJyb3dzZXIucmV0aW5hJiZ0aGlzLl9jdHguc2NhbGUoMiwyKSx0aGlzLl9jdHgudHJhbnNsYXRlKC10Lm1pbi54LC10Lm1pbi55KSx0aGlzLmZpcmUoXCJ1cGRhdGVcIil9fSxfcmVzZXQ6ZnVuY3Rpb24oKXtvLlJlbmRlcmVyLnByb3RvdHlwZS5fcmVzZXQuY2FsbCh0aGlzKSx0aGlzLl9wb3N0cG9uZVVwZGF0ZVBhdGhzJiYodGhpcy5fcG9zdHBvbmVVcGRhdGVQYXRocz0hMSx0aGlzLl91cGRhdGVQYXRocygpKX0sX2luaXRQYXRoOmZ1bmN0aW9uKHQpe3RoaXMuX3VwZGF0ZURhc2hBcnJheSh0KSx0aGlzLl9sYXllcnNbby5zdGFtcCh0KV09dDt2YXIgZT10Ll9vcmRlcj17bGF5ZXI6dCxwcmV2OnRoaXMuX2RyYXdMYXN0LG5leHQ6bnVsbH07dGhpcy5fZHJhd0xhc3QmJih0aGlzLl9kcmF3TGFzdC5uZXh0PWUpLHRoaXMuX2RyYXdMYXN0PWUsdGhpcy5fZHJhd0ZpcnN0PXRoaXMuX2RyYXdGaXJzdHx8dGhpcy5fZHJhd0xhc3R9LF9hZGRQYXRoOmZ1bmN0aW9uKHQpe3RoaXMuX3JlcXVlc3RSZWRyYXcodCl9LF9yZW1vdmVQYXRoOmZ1bmN0aW9uKHQpe3ZhciBlPXQuX29yZGVyLGk9ZS5uZXh0LG49ZS5wcmV2O2k/aS5wcmV2PW46dGhpcy5fZHJhd0xhc3Q9bixuP24ubmV4dD1pOnRoaXMuX2RyYXdGaXJzdD1pLGRlbGV0ZSB0Ll9vcmRlcixkZWxldGUgdGhpcy5fbGF5ZXJzW28uc3RhbXAodCldLHRoaXMuX3JlcXVlc3RSZWRyYXcodCl9LF91cGRhdGVQYXRoOmZ1bmN0aW9uKHQpe3RoaXMuX2V4dGVuZFJlZHJhd0JvdW5kcyh0KSx0Ll9wcm9qZWN0KCksdC5fdXBkYXRlKCksdGhpcy5fcmVxdWVzdFJlZHJhdyh0KX0sX3VwZGF0ZVN0eWxlOmZ1bmN0aW9uKHQpe3RoaXMuX3VwZGF0ZURhc2hBcnJheSh0KSx0aGlzLl9yZXF1ZXN0UmVkcmF3KHQpfSxfdXBkYXRlRGFzaEFycmF5OmZ1bmN0aW9uKHQpe2lmKHQub3B0aW9ucy5kYXNoQXJyYXkpe3ZhciBlLGk9dC5vcHRpb25zLmRhc2hBcnJheS5zcGxpdChcIixcIiksbj1bXTtmb3IoZT0wO2U8aS5sZW5ndGg7ZSsrKW4ucHVzaChOdW1iZXIoaVtlXSkpO3Qub3B0aW9ucy5fZGFzaEFycmF5PW59fSxfcmVxdWVzdFJlZHJhdzpmdW5jdGlvbih0KXt0aGlzLl9tYXAmJih0aGlzLl9leHRlbmRSZWRyYXdCb3VuZHModCksdGhpcy5fcmVkcmF3UmVxdWVzdD10aGlzLl9yZWRyYXdSZXF1ZXN0fHxvLlV0aWwucmVxdWVzdEFuaW1GcmFtZSh0aGlzLl9yZWRyYXcsdGhpcykpfSxfZXh0ZW5kUmVkcmF3Qm91bmRzOmZ1bmN0aW9uKHQpe3ZhciBlPSh0Lm9wdGlvbnMud2VpZ2h0fHwwKSsxO3RoaXMuX3JlZHJhd0JvdW5kcz10aGlzLl9yZWRyYXdCb3VuZHN8fG5ldyBvLkJvdW5kcyx0aGlzLl9yZWRyYXdCb3VuZHMuZXh0ZW5kKHQuX3B4Qm91bmRzLm1pbi5zdWJ0cmFjdChbZSxlXSkpLHRoaXMuX3JlZHJhd0JvdW5kcy5leHRlbmQodC5fcHhCb3VuZHMubWF4LmFkZChbZSxlXSkpfSxfcmVkcmF3OmZ1bmN0aW9uKCl7dGhpcy5fcmVkcmF3UmVxdWVzdD1udWxsLHRoaXMuX3JlZHJhd0JvdW5kcyYmKHRoaXMuX3JlZHJhd0JvdW5kcy5taW4uX2Zsb29yKCksdGhpcy5fcmVkcmF3Qm91bmRzLm1heC5fY2VpbCgpKSx0aGlzLl9jbGVhcigpLHRoaXMuX2RyYXcoKSx0aGlzLl9yZWRyYXdCb3VuZHM9bnVsbH0sX2NsZWFyOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmVkcmF3Qm91bmRzO2lmKHQpe3ZhciBlPXQuZ2V0U2l6ZSgpO3RoaXMuX2N0eC5jbGVhclJlY3QodC5taW4ueCx0Lm1pbi55LGUueCxlLnkpfWVsc2UgdGhpcy5fY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5fY29udGFpbmVyLndpZHRoLHRoaXMuX2NvbnRhaW5lci5oZWlnaHQpfSxfZHJhdzpmdW5jdGlvbigpe3ZhciB0LGU9dGhpcy5fcmVkcmF3Qm91bmRzO2lmKHRoaXMuX2N0eC5zYXZlKCksZSl7dmFyIGk9ZS5nZXRTaXplKCk7dGhpcy5fY3R4LmJlZ2luUGF0aCgpLHRoaXMuX2N0eC5yZWN0KGUubWluLngsZS5taW4ueSxpLngsaS55KSx0aGlzLl9jdHguY2xpcCgpfXRoaXMuX2RyYXdpbmc9ITA7Zm9yKHZhciBuPXRoaXMuX2RyYXdGaXJzdDtuO249bi5uZXh0KXQ9bi5sYXllciwoIWV8fHQuX3B4Qm91bmRzJiZ0Ll9weEJvdW5kcy5pbnRlcnNlY3RzKGUpKSYmdC5fdXBkYXRlUGF0aCgpO3RoaXMuX2RyYXdpbmc9ITEsdGhpcy5fY3R4LnJlc3RvcmUoKX0sX3VwZGF0ZVBvbHk6ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9kcmF3aW5nKXt2YXIgaSxuLG8scyxyPXQuX3BhcnRzLGE9ci5sZW5ndGgsaD10aGlzLl9jdHg7aWYoYSl7Zm9yKHRoaXMuX2RyYXduTGF5ZXJzW3QuX2xlYWZsZXRfaWRdPXQsaC5iZWdpblBhdGgoKSxoLnNldExpbmVEYXNoJiZoLnNldExpbmVEYXNoKHQub3B0aW9ucyYmdC5vcHRpb25zLl9kYXNoQXJyYXl8fFtdKSxpPTA7aTxhO2krKyl7Zm9yKG49MCxvPXJbaV0ubGVuZ3RoO248bztuKyspcz1yW2ldW25dLGhbbj9cImxpbmVUb1wiOlwibW92ZVRvXCJdKHMueCxzLnkpO2UmJmguY2xvc2VQYXRoKCl9dGhpcy5fZmlsbFN0cm9rZShoLHQpfX19LF91cGRhdGVDaXJjbGU6ZnVuY3Rpb24odCl7aWYodGhpcy5fZHJhd2luZyYmIXQuX2VtcHR5KCkpe3ZhciBlPXQuX3BvaW50LGk9dGhpcy5fY3R4LG49dC5fcmFkaXVzLG89KHQuX3JhZGl1c1l8fG4pL247dGhpcy5fZHJhd25MYXllcnNbdC5fbGVhZmxldF9pZF09dCwxIT09byYmKGkuc2F2ZSgpLGkuc2NhbGUoMSxvKSksaS5iZWdpblBhdGgoKSxpLmFyYyhlLngsZS55L28sbiwwLDIqTWF0aC5QSSwhMSksMSE9PW8mJmkucmVzdG9yZSgpLHRoaXMuX2ZpbGxTdHJva2UoaSx0KX19LF9maWxsU3Ryb2tlOmZ1bmN0aW9uKHQsZSl7dmFyIGk9ZS5vcHRpb25zO2kuZmlsbCYmKHQuZ2xvYmFsQWxwaGE9aS5maWxsT3BhY2l0eSx0LmZpbGxTdHlsZT1pLmZpbGxDb2xvcnx8aS5jb2xvcix0LmZpbGwoaS5maWxsUnVsZXx8XCJldmVub2RkXCIpKSxpLnN0cm9rZSYmMCE9PWkud2VpZ2h0JiYodC5nbG9iYWxBbHBoYT1pLm9wYWNpdHksdC5saW5lV2lkdGg9aS53ZWlnaHQsdC5zdHJva2VTdHlsZT1pLmNvbG9yLHQubGluZUNhcD1pLmxpbmVDYXAsdC5saW5lSm9pbj1pLmxpbmVKb2luLHQuc3Ryb2tlKCkpfSxfb25DbGljazpmdW5jdGlvbih0KXtmb3IodmFyIGUsaSxuPXRoaXMuX21hcC5tb3VzZUV2ZW50VG9MYXllclBvaW50KHQpLHM9dGhpcy5fZHJhd0ZpcnN0O3M7cz1zLm5leHQpZT1zLmxheWVyLGUub3B0aW9ucy5pbnRlcmFjdGl2ZSYmZS5fY29udGFpbnNQb2ludChuKSYmIXRoaXMuX21hcC5fZHJhZ2dhYmxlTW92ZWQoZSkmJihpPWUpO2kmJihvLkRvbUV2ZW50Ll9mYWtlU3RvcCh0KSx0aGlzLl9maXJlRXZlbnQoW2ldLHQpKX0sX29uTW91c2VNb3ZlOmZ1bmN0aW9uKHQpe2lmKHRoaXMuX21hcCYmIXRoaXMuX21hcC5kcmFnZ2luZy5tb3ZpbmcoKSYmIXRoaXMuX21hcC5fYW5pbWF0aW5nWm9vbSl7dmFyIGU9dGhpcy5fbWFwLm1vdXNlRXZlbnRUb0xheWVyUG9pbnQodCk7dGhpcy5faGFuZGxlTW91c2VIb3Zlcih0LGUpfX0sX2hhbmRsZU1vdXNlT3V0OmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2hvdmVyZWRMYXllcjtlJiYoby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2NvbnRhaW5lcixcImxlYWZsZXQtaW50ZXJhY3RpdmVcIiksdGhpcy5fZmlyZUV2ZW50KFtlXSx0LFwibW91c2VvdXRcIiksdGhpcy5faG92ZXJlZExheWVyPW51bGwpfSxfaGFuZGxlTW91c2VIb3ZlcjpmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSxuLHM9dGhpcy5fZHJhd0ZpcnN0O3M7cz1zLm5leHQpaT1zLmxheWVyLGkub3B0aW9ucy5pbnRlcmFjdGl2ZSYmaS5fY29udGFpbnNQb2ludChlKSYmKG49aSk7biE9PXRoaXMuX2hvdmVyZWRMYXllciYmKHRoaXMuX2hhbmRsZU1vdXNlT3V0KHQpLG4mJihvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1pbnRlcmFjdGl2ZVwiKSx0aGlzLl9maXJlRXZlbnQoW25dLHQsXCJtb3VzZW92ZXJcIiksdGhpcy5faG92ZXJlZExheWVyPW4pKSx0aGlzLl9ob3ZlcmVkTGF5ZXImJnRoaXMuX2ZpcmVFdmVudChbdGhpcy5faG92ZXJlZExheWVyXSx0KX0sX2ZpcmVFdmVudDpmdW5jdGlvbih0LGUsaSl7dGhpcy5fbWFwLl9maXJlRE9NRXZlbnQoZSxpfHxlLnR5cGUsdCl9LF9icmluZ1RvRnJvbnQ6ZnVuY3Rpb24odCl7dmFyIGU9dC5fb3JkZXIsaT1lLm5leHQsbj1lLnByZXY7aSYmKGkucHJldj1uLG4/bi5uZXh0PWk6aSYmKHRoaXMuX2RyYXdGaXJzdD1pKSxlLnByZXY9dGhpcy5fZHJhd0xhc3QsdGhpcy5fZHJhd0xhc3QubmV4dD1lLGUubmV4dD1udWxsLHRoaXMuX2RyYXdMYXN0PWUsdGhpcy5fcmVxdWVzdFJlZHJhdyh0KSl9LF9icmluZ1RvQmFjazpmdW5jdGlvbih0KXt2YXIgZT10Ll9vcmRlcixpPWUubmV4dCxuPWUucHJldjtuJiYobi5uZXh0PWksaT9pLnByZXY9bjpuJiYodGhpcy5fZHJhd0xhc3Q9biksZS5wcmV2PW51bGwsZS5uZXh0PXRoaXMuX2RyYXdGaXJzdCx0aGlzLl9kcmF3Rmlyc3QucHJldj1lLHRoaXMuX2RyYXdGaXJzdD1lLHRoaXMuX3JlcXVlc3RSZWRyYXcodCkpfX0pLG8uQnJvd3Nlci5jYW52YXM9ZnVuY3Rpb24oKXtyZXR1cm4hIWUuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0fSgpLG8uY2FudmFzPWZ1bmN0aW9uKHQpe3JldHVybiBvLkJyb3dzZXIuY2FudmFzP25ldyBvLkNhbnZhcyh0KTpudWxsfSxvLlBvbHlsaW5lLnByb3RvdHlwZS5fY29udGFpbnNQb2ludD1mdW5jdGlvbih0LGUpe3ZhciBpLG4scyxyLGEsaCxsPXRoaXMuX2NsaWNrVG9sZXJhbmNlKCk7aWYoIXRoaXMuX3B4Qm91bmRzLmNvbnRhaW5zKHQpKXJldHVybiExO2ZvcihpPTAscj10aGlzLl9wYXJ0cy5sZW5ndGg7aTxyO2krKylmb3IoaD10aGlzLl9wYXJ0c1tpXSxuPTAsYT1oLmxlbmd0aCxzPWEtMTtuPGE7cz1uKyspaWYoKGV8fDAhPT1uKSYmby5MaW5lVXRpbC5wb2ludFRvU2VnbWVudERpc3RhbmNlKHQsaFtzXSxoW25dKTw9bClyZXR1cm4hMDtyZXR1cm4hMX0sby5Qb2x5Z29uLnByb3RvdHlwZS5fY29udGFpbnNQb2ludD1mdW5jdGlvbih0KXt2YXIgZSxpLG4scyxyLGEsaCxsLHU9ITE7aWYoIXRoaXMuX3B4Qm91bmRzLmNvbnRhaW5zKHQpKXJldHVybiExO2ZvcihzPTAsaD10aGlzLl9wYXJ0cy5sZW5ndGg7czxoO3MrKylmb3IoZT10aGlzLl9wYXJ0c1tzXSxyPTAsbD1lLmxlbmd0aCxhPWwtMTtyPGw7YT1yKyspaT1lW3JdLG49ZVthXSxpLnk+dC55IT1uLnk+dC55JiZ0Lng8KG4ueC1pLngpKih0LnktaS55KS8obi55LWkueSkraS54JiYodT0hdSk7cmV0dXJuIHV8fG8uUG9seWxpbmUucHJvdG90eXBlLl9jb250YWluc1BvaW50LmNhbGwodGhpcyx0LCEwKX0sby5DaXJjbGVNYXJrZXIucHJvdG90eXBlLl9jb250YWluc1BvaW50PWZ1bmN0aW9uKHQpe3JldHVybiB0LmRpc3RhbmNlVG8odGhpcy5fcG9pbnQpPD10aGlzLl9yYWRpdXMrdGhpcy5fY2xpY2tUb2xlcmFuY2UoKX0sby5HZW9KU09OPW8uRmVhdHVyZUdyb3VwLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUpe28uc2V0T3B0aW9ucyh0aGlzLGUpLHRoaXMuX2xheWVycz17fSx0JiZ0aGlzLmFkZERhdGEodCl9LGFkZERhdGE6ZnVuY3Rpb24odCl7dmFyIGUsaSxuLHM9by5VdGlsLmlzQXJyYXkodCk/dDp0LmZlYXR1cmVzO2lmKHMpe2ZvcihlPTAsaT1zLmxlbmd0aDtlPGk7ZSsrKW49c1tlXSwobi5nZW9tZXRyaWVzfHxuLmdlb21ldHJ5fHxuLmZlYXR1cmVzfHxuLmNvb3JkaW5hdGVzKSYmdGhpcy5hZGREYXRhKG4pO3JldHVybiB0aGlzfXZhciByPXRoaXMub3B0aW9ucztpZihyLmZpbHRlciYmIXIuZmlsdGVyKHQpKXJldHVybiB0aGlzO3ZhciBhPW8uR2VvSlNPTi5nZW9tZXRyeVRvTGF5ZXIodCxyKTtyZXR1cm4gYT8oYS5mZWF0dXJlPW8uR2VvSlNPTi5hc0ZlYXR1cmUodCksYS5kZWZhdWx0T3B0aW9ucz1hLm9wdGlvbnMsdGhpcy5yZXNldFN0eWxlKGEpLHIub25FYWNoRmVhdHVyZSYmci5vbkVhY2hGZWF0dXJlKHQsYSksdGhpcy5hZGRMYXllcihhKSk6dGhpc30scmVzZXRTdHlsZTpmdW5jdGlvbih0KXtyZXR1cm4gdC5vcHRpb25zPW8uVXRpbC5leHRlbmQoe30sdC5kZWZhdWx0T3B0aW9ucyksdGhpcy5fc2V0TGF5ZXJTdHlsZSh0LHRoaXMub3B0aW9ucy5zdHlsZSksdGhpc30sc2V0U3R5bGU6ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuZWFjaExheWVyKGZ1bmN0aW9uKGUpe3RoaXMuX3NldExheWVyU3R5bGUoZSx0KX0sdGhpcyl9LF9zZXRMYXllclN0eWxlOmZ1bmN0aW9uKHQsZSl7XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmKGU9ZSh0LmZlYXR1cmUpKSx0LnNldFN0eWxlJiZ0LnNldFN0eWxlKGUpfX0pLG8uZXh0ZW5kKG8uR2VvSlNPTix7Z2VvbWV0cnlUb0xheWVyOmZ1bmN0aW9uKHQsZSl7dmFyIGksbixzLHIsYT1cIkZlYXR1cmVcIj09PXQudHlwZT90Lmdlb21ldHJ5OnQsaD1hP2EuY29vcmRpbmF0ZXM6bnVsbCxsPVtdLHU9ZSYmZS5wb2ludFRvTGF5ZXIsYz1lJiZlLmNvb3Jkc1RvTGF0TG5nfHx0aGlzLmNvb3Jkc1RvTGF0TG5nO2lmKCFoJiYhYSlyZXR1cm4gbnVsbDtzd2l0Y2goYS50eXBlKXtjYXNlXCJQb2ludFwiOnJldHVybiBpPWMoaCksdT91KHQsaSk6bmV3IG8uTWFya2VyKGkpO2Nhc2VcIk11bHRpUG9pbnRcIjpmb3Iocz0wLHI9aC5sZW5ndGg7czxyO3MrKylpPWMoaFtzXSksbC5wdXNoKHU/dSh0LGkpOm5ldyBvLk1hcmtlcihpKSk7cmV0dXJuIG5ldyBvLkZlYXR1cmVHcm91cChsKTtjYXNlXCJMaW5lU3RyaW5nXCI6Y2FzZVwiTXVsdGlMaW5lU3RyaW5nXCI6cmV0dXJuIG49dGhpcy5jb29yZHNUb0xhdExuZ3MoaCxcIkxpbmVTdHJpbmdcIj09PWEudHlwZT8wOjEsYyksbmV3IG8uUG9seWxpbmUobixlKTtjYXNlXCJQb2x5Z29uXCI6Y2FzZVwiTXVsdGlQb2x5Z29uXCI6cmV0dXJuIG49dGhpcy5jb29yZHNUb0xhdExuZ3MoaCxcIlBvbHlnb25cIj09PWEudHlwZT8xOjIsYyksbmV3IG8uUG9seWdvbihuLGUpO2Nhc2VcIkdlb21ldHJ5Q29sbGVjdGlvblwiOmZvcihzPTAscj1hLmdlb21ldHJpZXMubGVuZ3RoO3M8cjtzKyspe3ZhciBkPXRoaXMuZ2VvbWV0cnlUb0xheWVyKHtnZW9tZXRyeTphLmdlb21ldHJpZXNbc10sdHlwZTpcIkZlYXR1cmVcIixwcm9wZXJ0aWVzOnQucHJvcGVydGllc30sZSk7ZCYmbC5wdXNoKGQpfXJldHVybiBuZXcgby5GZWF0dXJlR3JvdXAobCk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEdlb0pTT04gb2JqZWN0LlwiKX19LGNvb3Jkc1RvTGF0TG5nOmZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5MYXRMbmcodFsxXSx0WzBdLHRbMl0pfSxjb29yZHNUb0xhdExuZ3M6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbixvPVtdLHM9MCxyPXQubGVuZ3RoO3M8cjtzKyspbj1lP3RoaXMuY29vcmRzVG9MYXRMbmdzKHRbc10sZS0xLGkpOihpfHx0aGlzLmNvb3Jkc1RvTGF0TG5nKSh0W3NdKSxvLnB1c2gobik7cmV0dXJuIG99LGxhdExuZ1RvQ29vcmRzOmZ1bmN0aW9uKHQpe3JldHVybiB0LmFsdCE9PWk/W3QubG5nLHQubGF0LHQuYWx0XTpbdC5sbmcsdC5sYXRdfSxsYXRMbmdzVG9Db29yZHM6ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj1bXSxzPTAscj10Lmxlbmd0aDtzPHI7cysrKW4ucHVzaChlP28uR2VvSlNPTi5sYXRMbmdzVG9Db29yZHModFtzXSxlLTEsaSk6by5HZW9KU09OLmxhdExuZ1RvQ29vcmRzKHRbc10pKTtyZXR1cm4hZSYmaSYmbi5wdXNoKG5bMF0pLG59LGdldEZlYXR1cmU6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdC5mZWF0dXJlP28uZXh0ZW5kKHt9LHQuZmVhdHVyZSx7Z2VvbWV0cnk6ZX0pOm8uR2VvSlNPTi5hc0ZlYXR1cmUoZSl9LGFzRmVhdHVyZTpmdW5jdGlvbih0KXtyZXR1cm5cIkZlYXR1cmVcIj09PXQudHlwZXx8XCJGZWF0dXJlQ29sbGVjdGlvblwiPT09dC50eXBlP3Q6e3R5cGU6XCJGZWF0dXJlXCIscHJvcGVydGllczp7fSxnZW9tZXRyeTp0fX19KTt2YXIgYT17dG9HZW9KU09OOmZ1bmN0aW9uKCl7cmV0dXJuIG8uR2VvSlNPTi5nZXRGZWF0dXJlKHRoaXMse3R5cGU6XCJQb2ludFwiLGNvb3JkaW5hdGVzOm8uR2VvSlNPTi5sYXRMbmdUb0Nvb3Jkcyh0aGlzLmdldExhdExuZygpKX0pfX07by5NYXJrZXIuaW5jbHVkZShhKSxvLkNpcmNsZS5pbmNsdWRlKGEpLG8uQ2lyY2xlTWFya2VyLmluY2x1ZGUoYSksby5Qb2x5bGluZS5wcm90b3R5cGUudG9HZW9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9IW8uUG9seWxpbmUuX2ZsYXQodGhpcy5fbGF0bG5ncyksZT1vLkdlb0pTT04ubGF0TG5nc1RvQ29vcmRzKHRoaXMuX2xhdGxuZ3MsdD8xOjApO3JldHVybiBvLkdlb0pTT04uZ2V0RmVhdHVyZSh0aGlzLHt0eXBlOih0P1wiTXVsdGlcIjpcIlwiKStcIkxpbmVTdHJpbmdcIixjb29yZGluYXRlczplfSl9LG8uUG9seWdvbi5wcm90b3R5cGUudG9HZW9KU09OPWZ1bmN0aW9uKCl7dmFyIHQ9IW8uUG9seWxpbmUuX2ZsYXQodGhpcy5fbGF0bG5ncyksZT10JiYhby5Qb2x5bGluZS5fZmxhdCh0aGlzLl9sYXRsbmdzWzBdKSxpPW8uR2VvSlNPTi5sYXRMbmdzVG9Db29yZHModGhpcy5fbGF0bG5ncyxlPzI6dD8xOjAsITApO3JldHVybiB0fHwoaT1baV0pLG8uR2VvSlNPTi5nZXRGZWF0dXJlKHRoaXMse3R5cGU6KGU/XCJNdWx0aVwiOlwiXCIpK1wiUG9seWdvblwiLGNvb3JkaW5hdGVzOml9KX0sby5MYXllckdyb3VwLmluY2x1ZGUoe3RvTXVsdGlQb2ludDpmdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0aGlzLmVhY2hMYXllcihmdW5jdGlvbihlKXt0LnB1c2goZS50b0dlb0pTT04oKS5nZW9tZXRyeS5jb29yZGluYXRlcyl9KSxvLkdlb0pTT04uZ2V0RmVhdHVyZSh0aGlzLHt0eXBlOlwiTXVsdGlQb2ludFwiLGNvb3JkaW5hdGVzOnR9KX0sdG9HZW9KU09OOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5mZWF0dXJlJiZ0aGlzLmZlYXR1cmUuZ2VvbWV0cnkmJnRoaXMuZmVhdHVyZS5nZW9tZXRyeS50eXBlO2lmKFwiTXVsdGlQb2ludFwiPT09dClyZXR1cm4gdGhpcy50b011bHRpUG9pbnQoKTt2YXIgZT1cIkdlb21ldHJ5Q29sbGVjdGlvblwiPT09dCxpPVtdO3JldHVybiB0aGlzLmVhY2hMYXllcihmdW5jdGlvbih0KXtpZih0LnRvR2VvSlNPTil7dmFyIG49dC50b0dlb0pTT04oKTtpLnB1c2goZT9uLmdlb21ldHJ5Om8uR2VvSlNPTi5hc0ZlYXR1cmUobikpfX0pLGU/by5HZW9KU09OLmdldEZlYXR1cmUodGhpcyx7Z2VvbWV0cmllczppLHR5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIn0pOnt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczppfX19KSxvLmdlb0pTT049ZnVuY3Rpb24odCxlKXtyZXR1cm4gbmV3IG8uR2VvSlNPTih0LGUpfSxvLmdlb0pzb249by5nZW9KU09OLG8uRHJhZ2dhYmxlPW8uRXZlbnRlZC5leHRlbmQoe29wdGlvbnM6e2NsaWNrVG9sZXJhbmNlOjN9LHN0YXRpY3M6e1NUQVJUOm8uQnJvd3Nlci50b3VjaD9bXCJ0b3VjaHN0YXJ0XCIsXCJtb3VzZWRvd25cIl06W1wibW91c2Vkb3duXCJdLEVORDp7bW91c2Vkb3duOlwibW91c2V1cFwiLHRvdWNoc3RhcnQ6XCJ0b3VjaGVuZFwiLHBvaW50ZXJkb3duOlwidG91Y2hlbmRcIixNU1BvaW50ZXJEb3duOlwidG91Y2hlbmRcIn0sTU9WRTp7bW91c2Vkb3duOlwibW91c2Vtb3ZlXCIsdG91Y2hzdGFydDpcInRvdWNobW92ZVwiLHBvaW50ZXJkb3duOlwidG91Y2htb3ZlXCIsTVNQb2ludGVyRG93bjpcInRvdWNobW92ZVwifX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUsaSl7dGhpcy5fZWxlbWVudD10LHRoaXMuX2RyYWdTdGFydFRhcmdldD1lfHx0LHRoaXMuX3ByZXZlbnRPdXRsaW5lPWl9LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuX2VuYWJsZWR8fChvLkRvbUV2ZW50Lm9uKHRoaXMuX2RyYWdTdGFydFRhcmdldCxvLkRyYWdnYWJsZS5TVEFSVC5qb2luKFwiIFwiKSx0aGlzLl9vbkRvd24sdGhpcyksdGhpcy5fZW5hYmxlZD0hMCl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLl9lbmFibGVkJiYoby5EcmFnZ2FibGUuX2RyYWdnaW5nPT09dGhpcyYmdGhpcy5maW5pc2hEcmFnKCksby5Eb21FdmVudC5vZmYodGhpcy5fZHJhZ1N0YXJ0VGFyZ2V0LG8uRHJhZ2dhYmxlLlNUQVJULmpvaW4oXCIgXCIpLHRoaXMuX29uRG93bix0aGlzKSx0aGlzLl9lbmFibGVkPSExLHRoaXMuX21vdmVkPSExKX0sX29uRG93bjpmdW5jdGlvbih0KXtpZighdC5fc2ltdWxhdGVkJiZ0aGlzLl9lbmFibGVkJiYodGhpcy5fbW92ZWQ9ITEsIW8uRG9tVXRpbC5oYXNDbGFzcyh0aGlzLl9lbGVtZW50LFwibGVhZmxldC16b29tLWFuaW1cIikmJiEoby5EcmFnZ2FibGUuX2RyYWdnaW5nfHx0LnNoaWZ0S2V5fHwxIT09dC53aGljaCYmMSE9PXQuYnV0dG9uJiYhdC50b3VjaGVzfHwoby5EcmFnZ2FibGUuX2RyYWdnaW5nPXRoaXMsdGhpcy5fcHJldmVudE91dGxpbmUmJm8uRG9tVXRpbC5wcmV2ZW50T3V0bGluZSh0aGlzLl9lbGVtZW50KSxvLkRvbVV0aWwuZGlzYWJsZUltYWdlRHJhZygpLG8uRG9tVXRpbC5kaXNhYmxlVGV4dFNlbGVjdGlvbigpLHRoaXMuX21vdmluZykpKSl7dGhpcy5maXJlKFwiZG93blwiKTt2YXIgaT10LnRvdWNoZXM/dC50b3VjaGVzWzBdOnQ7dGhpcy5fc3RhcnRQb2ludD1uZXcgby5Qb2ludChpLmNsaWVudFgsaS5jbGllbnRZKSxvLkRvbUV2ZW50Lm9uKGUsby5EcmFnZ2FibGUuTU9WRVt0LnR5cGVdLHRoaXMuX29uTW92ZSx0aGlzKS5vbihlLG8uRHJhZ2dhYmxlLkVORFt0LnR5cGVdLHRoaXMuX29uVXAsdGhpcyl9fSxfb25Nb3ZlOmZ1bmN0aW9uKGkpe2lmKCFpLl9zaW11bGF0ZWQmJnRoaXMuX2VuYWJsZWQpe2lmKGkudG91Y2hlcyYmaS50b3VjaGVzLmxlbmd0aD4xKXJldHVybiB2b2lkKHRoaXMuX21vdmVkPSEwKTt2YXIgbj1pLnRvdWNoZXMmJjE9PT1pLnRvdWNoZXMubGVuZ3RoP2kudG91Y2hlc1swXTppLHM9bmV3IG8uUG9pbnQobi5jbGllbnRYLG4uY2xpZW50WSkscj1zLnN1YnRyYWN0KHRoaXMuX3N0YXJ0UG9pbnQpOyhyLnh8fHIueSkmJihNYXRoLmFicyhyLngpK01hdGguYWJzKHIueSk8dGhpcy5vcHRpb25zLmNsaWNrVG9sZXJhbmNlfHwoby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdChpKSx0aGlzLl9tb3ZlZHx8KHRoaXMuZmlyZShcImRyYWdzdGFydFwiKSx0aGlzLl9tb3ZlZD0hMCx0aGlzLl9zdGFydFBvcz1vLkRvbVV0aWwuZ2V0UG9zaXRpb24odGhpcy5fZWxlbWVudCkuc3VidHJhY3Qociksby5Eb21VdGlsLmFkZENsYXNzKGUuYm9keSxcImxlYWZsZXQtZHJhZ2dpbmdcIiksdGhpcy5fbGFzdFRhcmdldD1pLnRhcmdldHx8aS5zcmNFbGVtZW50LHQuU1ZHRWxlbWVudEluc3RhbmNlJiZ0aGlzLl9sYXN0VGFyZ2V0IGluc3RhbmNlb2YgU1ZHRWxlbWVudEluc3RhbmNlJiYodGhpcy5fbGFzdFRhcmdldD10aGlzLl9sYXN0VGFyZ2V0LmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KSxvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fbGFzdFRhcmdldCxcImxlYWZsZXQtZHJhZy10YXJnZXRcIikpLHRoaXMuX25ld1Bvcz10aGlzLl9zdGFydFBvcy5hZGQociksdGhpcy5fbW92aW5nPSEwLG8uVXRpbC5jYW5jZWxBbmltRnJhbWUodGhpcy5fYW5pbVJlcXVlc3QpLHRoaXMuX2xhc3RFdmVudD1pLHRoaXMuX2FuaW1SZXF1ZXN0PW8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKHRoaXMuX3VwZGF0ZVBvc2l0aW9uLHRoaXMsITApKSl9fSxfdXBkYXRlUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgdD17b3JpZ2luYWxFdmVudDp0aGlzLl9sYXN0RXZlbnR9O3RoaXMuZmlyZShcInByZWRyYWdcIix0KSxvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fZWxlbWVudCx0aGlzLl9uZXdQb3MpLHRoaXMuZmlyZShcImRyYWdcIix0KX0sX29uVXA6ZnVuY3Rpb24odCl7IXQuX3NpbXVsYXRlZCYmdGhpcy5fZW5hYmxlZCYmdGhpcy5maW5pc2hEcmFnKCl9LGZpbmlzaERyYWc6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlQ2xhc3MoZS5ib2R5LFwibGVhZmxldC1kcmFnZ2luZ1wiKSx0aGlzLl9sYXN0VGFyZ2V0JiYoby5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX2xhc3RUYXJnZXQsXCJsZWFmbGV0LWRyYWctdGFyZ2V0XCIpLHRoaXMuX2xhc3RUYXJnZXQ9bnVsbCk7Zm9yKHZhciB0IGluIG8uRHJhZ2dhYmxlLk1PVkUpby5Eb21FdmVudC5vZmYoZSxvLkRyYWdnYWJsZS5NT1ZFW3RdLHRoaXMuX29uTW92ZSx0aGlzKS5vZmYoZSxvLkRyYWdnYWJsZS5FTkRbdF0sdGhpcy5fb25VcCx0aGlzKTtvLkRvbVV0aWwuZW5hYmxlSW1hZ2VEcmFnKCksby5Eb21VdGlsLmVuYWJsZVRleHRTZWxlY3Rpb24oKSx0aGlzLl9tb3ZlZCYmdGhpcy5fbW92aW5nJiYoby5VdGlsLmNhbmNlbEFuaW1GcmFtZSh0aGlzLl9hbmltUmVxdWVzdCksdGhpcy5maXJlKFwiZHJhZ2VuZFwiLHtkaXN0YW5jZTp0aGlzLl9uZXdQb3MuZGlzdGFuY2VUbyh0aGlzLl9zdGFydFBvcyl9KSksdGhpcy5fbW92aW5nPSExLG8uRHJhZ2dhYmxlLl9kcmFnZ2luZz0hMX19KSxvLkhhbmRsZXI9by5DbGFzcy5leHRlbmQoe2luaXRpYWxpemU6ZnVuY3Rpb24odCl7dGhpcy5fbWFwPXR9LGVuYWJsZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmFibGVkP3RoaXM6KHRoaXMuX2VuYWJsZWQ9ITAsdGhpcy5hZGRIb29rcygpLHRoaXMpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuYWJsZWQ/KHRoaXMuX2VuYWJsZWQ9ITEsdGhpcy5yZW1vdmVIb29rcygpLHRoaXMpOnRoaXN9LGVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX2VuYWJsZWR9fSksby5NYXAubWVyZ2VPcHRpb25zKHtkcmFnZ2luZzohMCxpbmVydGlhOiFvLkJyb3dzZXIuYW5kcm9pZDIzLGluZXJ0aWFEZWNlbGVyYXRpb246MzQwMCxpbmVydGlhTWF4U3BlZWQ6MS8wLGVhc2VMaW5lYXJpdHk6LjIsd29ybGRDb3B5SnVtcDohMSxtYXhCb3VuZHNWaXNjb3NpdHk6MH0pLG8uTWFwLkRyYWc9by5IYW5kbGVyLmV4dGVuZCh7YWRkSG9va3M6ZnVuY3Rpb24oKXtpZighdGhpcy5fZHJhZ2dhYmxlKXt2YXIgdD10aGlzLl9tYXA7dGhpcy5fZHJhZ2dhYmxlPW5ldyBvLkRyYWdnYWJsZSh0Ll9tYXBQYW5lLHQuX2NvbnRhaW5lciksdGhpcy5fZHJhZ2dhYmxlLm9uKHtkb3duOnRoaXMuX29uRG93bixkcmFnc3RhcnQ6dGhpcy5fb25EcmFnU3RhcnQsZHJhZzp0aGlzLl9vbkRyYWcsZHJhZ2VuZDp0aGlzLl9vbkRyYWdFbmR9LHRoaXMpLHRoaXMuX2RyYWdnYWJsZS5vbihcInByZWRyYWdcIix0aGlzLl9vblByZURyYWdMaW1pdCx0aGlzKSx0Lm9wdGlvbnMud29ybGRDb3B5SnVtcCYmKHRoaXMuX2RyYWdnYWJsZS5vbihcInByZWRyYWdcIix0aGlzLl9vblByZURyYWdXcmFwLHRoaXMpLHQub24oXCJ6b29tZW5kXCIsdGhpcy5fb25ab29tRW5kLHRoaXMpLHQud2hlblJlYWR5KHRoaXMuX29uWm9vbUVuZCx0aGlzKSl9by5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX21hcC5fY29udGFpbmVyLFwibGVhZmxldC1ncmFiIGxlYWZsZXQtdG91Y2gtZHJhZ1wiKSx0aGlzLl9kcmFnZ2FibGUuZW5hYmxlKCksdGhpcy5fcG9zaXRpb25zPVtdLHRoaXMuX3RpbWVzPVtdfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe28uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9tYXAuX2NvbnRhaW5lcixcImxlYWZsZXQtZ3JhYlwiKSxvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fbWFwLl9jb250YWluZXIsXCJsZWFmbGV0LXRvdWNoLWRyYWdcIiksdGhpcy5fZHJhZ2dhYmxlLmRpc2FibGUoKX0sbW92ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuX21vdmVkfSxtb3Zpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHJhZ2dhYmxlJiZ0aGlzLl9kcmFnZ2FibGUuX21vdmluZ30sX29uRG93bjpmdW5jdGlvbigpe3RoaXMuX21hcC5fc3RvcCgpfSxfb25EcmFnU3RhcnQ6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXA7aWYodGhpcy5fbWFwLm9wdGlvbnMubWF4Qm91bmRzJiZ0aGlzLl9tYXAub3B0aW9ucy5tYXhCb3VuZHNWaXNjb3NpdHkpe3ZhciBlPW8ubGF0TG5nQm91bmRzKHRoaXMuX21hcC5vcHRpb25zLm1heEJvdW5kcyk7dGhpcy5fb2Zmc2V0TGltaXQ9by5ib3VuZHModGhpcy5fbWFwLmxhdExuZ1RvQ29udGFpbmVyUG9pbnQoZS5nZXROb3J0aFdlc3QoKSkubXVsdGlwbHlCeSgtMSksdGhpcy5fbWFwLmxhdExuZ1RvQ29udGFpbmVyUG9pbnQoZS5nZXRTb3V0aEVhc3QoKSkubXVsdGlwbHlCeSgtMSkuYWRkKHRoaXMuX21hcC5nZXRTaXplKCkpKSx0aGlzLl92aXNjb3NpdHk9TWF0aC5taW4oMSxNYXRoLm1heCgwLHRoaXMuX21hcC5vcHRpb25zLm1heEJvdW5kc1Zpc2Nvc2l0eSkpfWVsc2UgdGhpcy5fb2Zmc2V0TGltaXQ9bnVsbDt0LmZpcmUoXCJtb3Zlc3RhcnRcIikuZmlyZShcImRyYWdzdGFydFwiKSx0Lm9wdGlvbnMuaW5lcnRpYSYmKHRoaXMuX3Bvc2l0aW9ucz1bXSx0aGlzLl90aW1lcz1bXSl9LF9vbkRyYWc6ZnVuY3Rpb24odCl7aWYodGhpcy5fbWFwLm9wdGlvbnMuaW5lcnRpYSl7dmFyIGU9dGhpcy5fbGFzdFRpbWU9K25ldyBEYXRlLGk9dGhpcy5fbGFzdFBvcz10aGlzLl9kcmFnZ2FibGUuX2Fic1Bvc3x8dGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3M7dGhpcy5fcG9zaXRpb25zLnB1c2goaSksdGhpcy5fdGltZXMucHVzaChlKSxlLXRoaXMuX3RpbWVzWzBdPjUwJiYodGhpcy5fcG9zaXRpb25zLnNoaWZ0KCksdGhpcy5fdGltZXMuc2hpZnQoKSl9dGhpcy5fbWFwLmZpcmUoXCJtb3ZlXCIsdCkuZmlyZShcImRyYWdcIix0KX0sX29uWm9vbUVuZDpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcC5nZXRTaXplKCkuZGl2aWRlQnkoMiksZT10aGlzLl9tYXAubGF0TG5nVG9MYXllclBvaW50KFswLDBdKTt0aGlzLl9pbml0aWFsV29ybGRPZmZzZXQ9ZS5zdWJ0cmFjdCh0KS54LHRoaXMuX3dvcmxkV2lkdGg9dGhpcy5fbWFwLmdldFBpeGVsV29ybGRCb3VuZHMoKS5nZXRTaXplKCkueH0sX3Zpc2NvdXNMaW1pdDpmdW5jdGlvbih0LGUpe3JldHVybiB0LSh0LWUpKnRoaXMuX3Zpc2Nvc2l0eX0sX29uUHJlRHJhZ0xpbWl0OmZ1bmN0aW9uKCl7aWYodGhpcy5fdmlzY29zaXR5JiZ0aGlzLl9vZmZzZXRMaW1pdCl7dmFyIHQ9dGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3Muc3VidHJhY3QodGhpcy5fZHJhZ2dhYmxlLl9zdGFydFBvcyksZT10aGlzLl9vZmZzZXRMaW1pdDt0Lng8ZS5taW4ueCYmKHQueD10aGlzLl92aXNjb3VzTGltaXQodC54LGUubWluLngpKSx0Lnk8ZS5taW4ueSYmKHQueT10aGlzLl92aXNjb3VzTGltaXQodC55LGUubWluLnkpKSx0Lng+ZS5tYXgueCYmKHQueD10aGlzLl92aXNjb3VzTGltaXQodC54LGUubWF4LngpKSx0Lnk+ZS5tYXgueSYmKHQueT10aGlzLl92aXNjb3VzTGltaXQodC55LGUubWF4LnkpKSx0aGlzLl9kcmFnZ2FibGUuX25ld1Bvcz10aGlzLl9kcmFnZ2FibGUuX3N0YXJ0UG9zLmFkZCh0KX19LF9vblByZURyYWdXcmFwOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fd29ybGRXaWR0aCxlPU1hdGgucm91bmQodC8yKSxpPXRoaXMuX2luaXRpYWxXb3JsZE9mZnNldCxuPXRoaXMuX2RyYWdnYWJsZS5fbmV3UG9zLngsbz0obi1lK2kpJXQrZS1pLHM9KG4rZStpKSV0LWUtaSxyPU1hdGguYWJzKG8raSk8TWF0aC5hYnMocytpKT9vOnM7dGhpcy5fZHJhZ2dhYmxlLl9hYnNQb3M9dGhpcy5fZHJhZ2dhYmxlLl9uZXdQb3MuY2xvbmUoKSx0aGlzLl9kcmFnZ2FibGUuX25ld1Bvcy54PXJ9LF9vbkRyYWdFbmQ6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLGk9ZS5vcHRpb25zLG49IWkuaW5lcnRpYXx8dGhpcy5fdGltZXMubGVuZ3RoPDI7aWYoZS5maXJlKFwiZHJhZ2VuZFwiLHQpLG4pZS5maXJlKFwibW92ZWVuZFwiKTtlbHNle3ZhciBzPXRoaXMuX2xhc3RQb3Muc3VidHJhY3QodGhpcy5fcG9zaXRpb25zWzBdKSxyPSh0aGlzLl9sYXN0VGltZS10aGlzLl90aW1lc1swXSkvMWUzLGE9aS5lYXNlTGluZWFyaXR5LGg9cy5tdWx0aXBseUJ5KGEvciksbD1oLmRpc3RhbmNlVG8oWzAsMF0pLHU9TWF0aC5taW4oaS5pbmVydGlhTWF4U3BlZWQsbCksYz1oLm11bHRpcGx5QnkodS9sKSxkPXUvKGkuaW5lcnRpYURlY2VsZXJhdGlvbiphKSxfPWMubXVsdGlwbHlCeSgtZC8yKS5yb3VuZCgpO18ueHx8Xy55PyhfPWUuX2xpbWl0T2Zmc2V0KF8sZS5vcHRpb25zLm1heEJvdW5kcyksby5VdGlsLnJlcXVlc3RBbmltRnJhbWUoZnVuY3Rpb24oKXtlLnBhbkJ5KF8se2R1cmF0aW9uOmQsZWFzZUxpbmVhcml0eTphLG5vTW92ZVN0YXJ0OiEwLGFuaW1hdGU6ITB9KX0pKTplLmZpcmUoXCJtb3ZlZW5kXCIpfX19KSxvLk1hcC5hZGRJbml0SG9vayhcImFkZEhhbmRsZXJcIixcImRyYWdnaW5nXCIsby5NYXAuRHJhZyksby5NYXAubWVyZ2VPcHRpb25zKHtkb3VibGVDbGlja1pvb206ITB9KSxvLk1hcC5Eb3VibGVDbGlja1pvb209by5IYW5kbGVyLmV4dGVuZCh7YWRkSG9va3M6ZnVuY3Rpb24oKXt0aGlzLl9tYXAub24oXCJkYmxjbGlja1wiLHRoaXMuX29uRG91YmxlQ2xpY2ssdGhpcyl9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7dGhpcy5fbWFwLm9mZihcImRibGNsaWNrXCIsdGhpcy5fb25Eb3VibGVDbGljayx0aGlzKX0sX29uRG91YmxlQ2xpY2s6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFwLGk9ZS5nZXRab29tKCksbj1lLm9wdGlvbnMuem9vbURlbHRhLG89dC5vcmlnaW5hbEV2ZW50LnNoaWZ0S2V5P2ktbjppK247XCJjZW50ZXJcIj09PWUub3B0aW9ucy5kb3VibGVDbGlja1pvb20/ZS5zZXRab29tKG8pOmUuc2V0Wm9vbUFyb3VuZCh0LmNvbnRhaW5lclBvaW50LG8pfX0pLG8uTWFwLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwiZG91YmxlQ2xpY2tab29tXCIsby5NYXAuRG91YmxlQ2xpY2tab29tKSxvLk1hcC5tZXJnZU9wdGlvbnMoe3Njcm9sbFdoZWVsWm9vbTohMCx3aGVlbERlYm91bmNlVGltZTo0MCx3aGVlbFB4UGVyWm9vbUxldmVsOjYwfSksby5NYXAuU2Nyb2xsV2hlZWxab29tPW8uSGFuZGxlci5leHRlbmQoe2FkZEhvb2tzOmZ1bmN0aW9uKCl7by5Eb21FdmVudC5vbih0aGlzLl9tYXAuX2NvbnRhaW5lcixcIm1vdXNld2hlZWxcIix0aGlzLl9vbldoZWVsU2Nyb2xsLHRoaXMpLHRoaXMuX2RlbHRhPTB9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7by5Eb21FdmVudC5vZmYodGhpcy5fbWFwLl9jb250YWluZXIsXCJtb3VzZXdoZWVsXCIsdGhpcy5fb25XaGVlbFNjcm9sbCx0aGlzKX0sX29uV2hlZWxTY3JvbGw6ZnVuY3Rpb24odCl7dmFyIGU9by5Eb21FdmVudC5nZXRXaGVlbERlbHRhKHQpLGk9dGhpcy5fbWFwLm9wdGlvbnMud2hlZWxEZWJvdW5jZVRpbWU7dGhpcy5fZGVsdGErPWUsdGhpcy5fbGFzdE1vdXNlUG9zPXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KSx0aGlzLl9zdGFydFRpbWV8fCh0aGlzLl9zdGFydFRpbWU9K25ldyBEYXRlKTt2YXIgbj1NYXRoLm1heChpLSgrbmV3IERhdGUtdGhpcy5fc3RhcnRUaW1lKSwwKTtjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpLHRoaXMuX3RpbWVyPXNldFRpbWVvdXQoby5iaW5kKHRoaXMuX3BlcmZvcm1ab29tLHRoaXMpLG4pLG8uRG9tRXZlbnQuc3RvcCh0KX0sX3BlcmZvcm1ab29tOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGU9dC5nZXRab29tKCksaT10aGlzLl9tYXAub3B0aW9ucy56b29tU25hcHx8MDt0Ll9zdG9wKCk7dmFyIG49dGhpcy5fZGVsdGEvKDQqdGhpcy5fbWFwLm9wdGlvbnMud2hlZWxQeFBlclpvb21MZXZlbCksbz00Kk1hdGgubG9nKDIvKDErTWF0aC5leHAoLU1hdGguYWJzKG4pKSkpL01hdGguTE4yLHM9aT9NYXRoLmNlaWwoby9pKSppOm8scj10Ll9saW1pdFpvb20oZSsodGhpcy5fZGVsdGE+MD9zOi1zKSktZTt0aGlzLl9kZWx0YT0wLHRoaXMuX3N0YXJ0VGltZT1udWxsLHImJihcImNlbnRlclwiPT09dC5vcHRpb25zLnNjcm9sbFdoZWVsWm9vbT90LnNldFpvb20oZStyKTp0LnNldFpvb21Bcm91bmQodGhpcy5fbGFzdE1vdXNlUG9zLGUrcikpfX0pLG8uTWFwLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwic2Nyb2xsV2hlZWxab29tXCIsby5NYXAuU2Nyb2xsV2hlZWxab29tKSxvLmV4dGVuZChvLkRvbUV2ZW50LHtfdG91Y2hzdGFydDpvLkJyb3dzZXIubXNQb2ludGVyP1wiTVNQb2ludGVyRG93blwiOm8uQnJvd3Nlci5wb2ludGVyP1wicG9pbnRlcmRvd25cIjpcInRvdWNoc3RhcnRcIixfdG91Y2hlbmQ6by5Ccm93c2VyLm1zUG9pbnRlcj9cIk1TUG9pbnRlclVwXCI6by5Ccm93c2VyLnBvaW50ZXI/XCJwb2ludGVydXBcIjpcInRvdWNoZW5kXCIsYWRkRG91YmxlVGFwTGlzdGVuZXI6ZnVuY3Rpb24odCxlLGkpe2Z1bmN0aW9uIG4odCl7dmFyIGU7aWYoby5Ccm93c2VyLnBvaW50ZXIpe2lmKCFvLkJyb3dzZXIuZWRnZXx8XCJtb3VzZVwiPT09dC5wb2ludGVyVHlwZSlyZXR1cm47ZT1vLkRvbUV2ZW50Ll9wb2ludGVyc0NvdW50fWVsc2UgZT10LnRvdWNoZXMubGVuZ3RoO2lmKCEoZT4xKSl7dmFyIGk9RGF0ZS5ub3coKSxuPWktKHJ8fGkpO2E9dC50b3VjaGVzP3QudG91Y2hlc1swXTp0LGg9bj4wJiZuPD1sLHI9aX19ZnVuY3Rpb24gcyh0KXtpZihoJiYhYS5jYW5jZWxCdWJibGUpe2lmKG8uQnJvd3Nlci5wb2ludGVyKXtpZighby5Ccm93c2VyLmVkZ2V8fFwibW91c2VcIj09PXQucG9pbnRlclR5cGUpcmV0dXJuO3ZhciBpLG4scz17fTtmb3IobiBpbiBhKWk9YVtuXSxzW25dPWkmJmkuYmluZD9pLmJpbmQoYSk6aTthPXN9YS50eXBlPVwiZGJsY2xpY2tcIixlKGEpLHI9bnVsbH19dmFyIHIsYSxoPSExLGw9MjUwLHU9XCJfbGVhZmxldF9cIixjPXRoaXMuX3RvdWNoc3RhcnQsZD10aGlzLl90b3VjaGVuZDtyZXR1cm4gdFt1K2MraV09bix0W3UrZCtpXT1zLHRbdStcImRibGNsaWNrXCIraV09ZSx0LmFkZEV2ZW50TGlzdGVuZXIoYyxuLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoZCxzLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLGUsITEpLHRoaXN9LHJlbW92ZURvdWJsZVRhcExpc3RlbmVyOmZ1bmN0aW9uKHQsZSl7dmFyIGk9XCJfbGVhZmxldF9cIixuPXRbaSt0aGlzLl90b3VjaHN0YXJ0K2VdLHM9dFtpK3RoaXMuX3RvdWNoZW5kK2VdLHI9dFtpK1wiZGJsY2xpY2tcIitlXTtyZXR1cm4gdC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX3RvdWNoc3RhcnQsbiwhMSksdC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuX3RvdWNoZW5kLHMsITEpLG8uQnJvd3Nlci5lZGdlfHx0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkYmxjbGlja1wiLHIsITEpLHRoaXN9fSksby5leHRlbmQoby5Eb21FdmVudCx7UE9JTlRFUl9ET1dOOm8uQnJvd3Nlci5tc1BvaW50ZXI/XCJNU1BvaW50ZXJEb3duXCI6XCJwb2ludGVyZG93blwiLFBPSU5URVJfTU9WRTpvLkJyb3dzZXIubXNQb2ludGVyP1wiTVNQb2ludGVyTW92ZVwiOlwicG9pbnRlcm1vdmVcIixQT0lOVEVSX1VQOm8uQnJvd3Nlci5tc1BvaW50ZXI/XCJNU1BvaW50ZXJVcFwiOlwicG9pbnRlcnVwXCIsUE9JTlRFUl9DQU5DRUw6by5Ccm93c2VyLm1zUG9pbnRlcj9cIk1TUG9pbnRlckNhbmNlbFwiOlwicG9pbnRlcmNhbmNlbFwiLFRBR19XSElURV9MSVNUOltcIklOUFVUXCIsXCJTRUxFQ1RcIixcIk9QVElPTlwiXSxfcG9pbnRlcnM6e30sX3BvaW50ZXJzQ291bnQ6MCxhZGRQb2ludGVyTGlzdGVuZXI6ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuXCJ0b3VjaHN0YXJ0XCI9PT1lP3RoaXMuX2FkZFBvaW50ZXJTdGFydCh0LGksbik6XCJ0b3VjaG1vdmVcIj09PWU/dGhpcy5fYWRkUG9pbnRlck1vdmUodCxpLG4pOlwidG91Y2hlbmRcIj09PWUmJnRoaXMuX2FkZFBvaW50ZXJFbmQodCxpLG4pLHRoaXN9LHJlbW92ZVBvaW50ZXJMaXN0ZW5lcjpmdW5jdGlvbih0LGUsaSl7dmFyIG49dFtcIl9sZWFmbGV0X1wiK2UraV07cmV0dXJuXCJ0b3VjaHN0YXJ0XCI9PT1lP3QucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfRE9XTixuLCExKTpcInRvdWNobW92ZVwiPT09ZT90LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX01PVkUsbiwhMSk6XCJ0b3VjaGVuZFwiPT09ZSYmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfVVAsbiwhMSksdC5yZW1vdmVFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9DQU5DRUwsbiwhMSkpLHRoaXN9LF9hZGRQb2ludGVyU3RhcnQ6ZnVuY3Rpb24odCxpLG4pe3ZhciBzPW8uYmluZChmdW5jdGlvbih0KXtpZihcIm1vdXNlXCIhPT10LnBvaW50ZXJUeXBlJiZ0Lk1TUE9JTlRFUl9UWVBFX01PVVNFJiZ0LnBvaW50ZXJUeXBlIT09dC5NU1BPSU5URVJfVFlQRV9NT1VTRSl7aWYoISh0aGlzLlRBR19XSElURV9MSVNULmluZGV4T2YodC50YXJnZXQudGFnTmFtZSk8MCkpcmV0dXJuO28uRG9tRXZlbnQucHJldmVudERlZmF1bHQodCl9dGhpcy5faGFuZGxlUG9pbnRlcih0LGkpfSx0aGlzKTtpZih0W1wiX2xlYWZsZXRfdG91Y2hzdGFydFwiK25dPXMsdC5hZGRFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9ET1dOLHMsITEpLCF0aGlzLl9wb2ludGVyRG9jTGlzdGVuZXIpe3ZhciByPW8uYmluZCh0aGlzLl9nbG9iYWxQb2ludGVyVXAsdGhpcyk7ZS5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfRE9XTixvLmJpbmQodGhpcy5fZ2xvYmFsUG9pbnRlckRvd24sdGhpcyksITApLGUuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX01PVkUsby5iaW5kKHRoaXMuX2dsb2JhbFBvaW50ZXJNb3ZlLHRoaXMpLCEwKSxlLmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9VUCxyLCEwKSxlLmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9DQU5DRUwsciwhMCksdGhpcy5fcG9pbnRlckRvY0xpc3RlbmVyPSEwfX0sX2dsb2JhbFBvaW50ZXJEb3duOmZ1bmN0aW9uKHQpe3RoaXMuX3BvaW50ZXJzW3QucG9pbnRlcklkXT10LHRoaXMuX3BvaW50ZXJzQ291bnQrK30sX2dsb2JhbFBvaW50ZXJNb3ZlOmZ1bmN0aW9uKHQpe3RoaXMuX3BvaW50ZXJzW3QucG9pbnRlcklkXSYmKHRoaXMuX3BvaW50ZXJzW3QucG9pbnRlcklkXT10KX0sX2dsb2JhbFBvaW50ZXJVcDpmdW5jdGlvbih0KXtkZWxldGUgdGhpcy5fcG9pbnRlcnNbdC5wb2ludGVySWRdLHRoaXMuX3BvaW50ZXJzQ291bnQtLX0sX2hhbmRsZVBvaW50ZXI6ZnVuY3Rpb24odCxlKXt0LnRvdWNoZXM9W107Zm9yKHZhciBpIGluIHRoaXMuX3BvaW50ZXJzKXQudG91Y2hlcy5wdXNoKHRoaXMuX3BvaW50ZXJzW2ldKTt0LmNoYW5nZWRUb3VjaGVzPVt0XSxlKHQpfSxfYWRkUG9pbnRlck1vdmU6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPW8uYmluZChmdW5jdGlvbih0KXsodC5wb2ludGVyVHlwZSE9PXQuTVNQT0lOVEVSX1RZUEVfTU9VU0UmJlwibW91c2VcIiE9PXQucG9pbnRlclR5cGV8fDAhPT10LmJ1dHRvbnMpJiZ0aGlzLl9oYW5kbGVQb2ludGVyKHQsZSl9LHRoaXMpO3RbXCJfbGVhZmxldF90b3VjaG1vdmVcIitpXT1uLHQuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLlBPSU5URVJfTU9WRSxuLCExKX0sX2FkZFBvaW50ZXJFbmQ6ZnVuY3Rpb24odCxlLGkpe3ZhciBuPW8uYmluZChmdW5jdGlvbih0KXt0aGlzLl9oYW5kbGVQb2ludGVyKHQsZSl9LHRoaXMpO3RbXCJfbGVhZmxldF90b3VjaGVuZFwiK2ldPW4sdC5hZGRFdmVudExpc3RlbmVyKHRoaXMuUE9JTlRFUl9VUCxuLCExKSx0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5QT0lOVEVSX0NBTkNFTCxuLCExKX19KSxvLk1hcC5tZXJnZU9wdGlvbnMoe3RvdWNoWm9vbTpvLkJyb3dzZXIudG91Y2gmJiFvLkJyb3dzZXIuYW5kcm9pZDIzLGJvdW5jZUF0Wm9vbUxpbWl0czohMH0pLG8uTWFwLlRvdWNoWm9vbT1vLkhhbmRsZXIuZXh0ZW5kKHthZGRIb29rczpmdW5jdGlvbigpe28uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9tYXAuX2NvbnRhaW5lcixcImxlYWZsZXQtdG91Y2gtem9vbVwiKSxvLkRvbUV2ZW50Lm9uKHRoaXMuX21hcC5fY29udGFpbmVyLFwidG91Y2hzdGFydFwiLHRoaXMuX29uVG91Y2hTdGFydCx0aGlzKX0scmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fbWFwLl9jb250YWluZXIsXCJsZWFmbGV0LXRvdWNoLXpvb21cIiksby5Eb21FdmVudC5vZmYodGhpcy5fbWFwLl9jb250YWluZXIsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Ub3VjaFN0YXJ0LHRoaXMpfSxfb25Ub3VjaFN0YXJ0OmZ1bmN0aW9uKHQpe3ZhciBpPXRoaXMuX21hcDtpZih0LnRvdWNoZXMmJjI9PT10LnRvdWNoZXMubGVuZ3RoJiYhaS5fYW5pbWF0aW5nWm9vbSYmIXRoaXMuX3pvb21pbmcpe3ZhciBuPWkubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodC50b3VjaGVzWzBdKSxzPWkubW91c2VFdmVudFRvQ29udGFpbmVyUG9pbnQodC50b3VjaGVzWzFdKTt0aGlzLl9jZW50ZXJQb2ludD1pLmdldFNpemUoKS5fZGl2aWRlQnkoMiksdGhpcy5fc3RhcnRMYXRMbmc9aS5jb250YWluZXJQb2ludFRvTGF0TG5nKHRoaXMuX2NlbnRlclBvaW50KSxcImNlbnRlclwiIT09aS5vcHRpb25zLnRvdWNoWm9vbSYmKHRoaXMuX3BpbmNoU3RhcnRMYXRMbmc9aS5jb250YWluZXJQb2ludFRvTGF0TG5nKG4uYWRkKHMpLl9kaXZpZGVCeSgyKSkpLHRoaXMuX3N0YXJ0RGlzdD1uLmRpc3RhbmNlVG8ocyksdGhpcy5fc3RhcnRab29tPWkuZ2V0Wm9vbSgpLHRoaXMuX21vdmVkPSExLHRoaXMuX3pvb21pbmc9ITAsaS5fc3RvcCgpLG8uRG9tRXZlbnQub24oZSxcInRvdWNobW92ZVwiLHRoaXMuX29uVG91Y2hNb3ZlLHRoaXMpLm9uKGUsXCJ0b3VjaGVuZFwiLHRoaXMuX29uVG91Y2hFbmQsdGhpcyksby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCh0KX19LF9vblRvdWNoTW92ZTpmdW5jdGlvbih0KXtpZih0LnRvdWNoZXMmJjI9PT10LnRvdWNoZXMubGVuZ3RoJiZ0aGlzLl96b29taW5nKXt2YXIgZT10aGlzLl9tYXAsaT1lLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQudG91Y2hlc1swXSksbj1lLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQudG91Y2hlc1sxXSkscz1pLmRpc3RhbmNlVG8obikvdGhpcy5fc3RhcnREaXN0O2lmKHRoaXMuX3pvb209ZS5nZXRTY2FsZVpvb20ocyx0aGlzLl9zdGFydFpvb20pLCFlLm9wdGlvbnMuYm91bmNlQXRab29tTGltaXRzJiYodGhpcy5fem9vbTxlLmdldE1pblpvb20oKSYmczwxfHx0aGlzLl96b29tPmUuZ2V0TWF4Wm9vbSgpJiZzPjEpJiYodGhpcy5fem9vbT1lLl9saW1pdFpvb20odGhpcy5fem9vbSkpLFwiY2VudGVyXCI9PT1lLm9wdGlvbnMudG91Y2hab29tKXtpZih0aGlzLl9jZW50ZXI9dGhpcy5fc3RhcnRMYXRMbmcsMT09PXMpcmV0dXJufWVsc2V7dmFyIHI9aS5fYWRkKG4pLl9kaXZpZGVCeSgyKS5fc3VidHJhY3QodGhpcy5fY2VudGVyUG9pbnQpO2lmKDE9PT1zJiYwPT09ci54JiYwPT09ci55KXJldHVybjt0aGlzLl9jZW50ZXI9ZS51bnByb2plY3QoZS5wcm9qZWN0KHRoaXMuX3BpbmNoU3RhcnRMYXRMbmcsdGhpcy5fem9vbSkuc3VidHJhY3QociksdGhpcy5fem9vbSl9dGhpcy5fbW92ZWR8fChlLl9tb3ZlU3RhcnQoITApLHRoaXMuX21vdmVkPSEwKSxvLlV0aWwuY2FuY2VsQW5pbUZyYW1lKHRoaXMuX2FuaW1SZXF1ZXN0KTt2YXIgYT1vLmJpbmQoZS5fbW92ZSxlLHRoaXMuX2NlbnRlcix0aGlzLl96b29tLHtwaW5jaDohMCxyb3VuZDohMX0pO3RoaXMuX2FuaW1SZXF1ZXN0PW8uVXRpbC5yZXF1ZXN0QW5pbUZyYW1lKGEsdGhpcywhMCksby5Eb21FdmVudC5wcmV2ZW50RGVmYXVsdCh0KX19LF9vblRvdWNoRW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vdmVkJiZ0aGlzLl96b29taW5nPyh0aGlzLl96b29taW5nPSExLG8uVXRpbC5jYW5jZWxBbmltRnJhbWUodGhpcy5fYW5pbVJlcXVlc3QpLG8uRG9tRXZlbnQub2ZmKGUsXCJ0b3VjaG1vdmVcIix0aGlzLl9vblRvdWNoTW92ZSkub2ZmKGUsXCJ0b3VjaGVuZFwiLHRoaXMuX29uVG91Y2hFbmQpLHZvaWQodGhpcy5fbWFwLm9wdGlvbnMuem9vbUFuaW1hdGlvbj90aGlzLl9tYXAuX2FuaW1hdGVab29tKHRoaXMuX2NlbnRlcix0aGlzLl9tYXAuX2xpbWl0Wm9vbSh0aGlzLl96b29tKSwhMCx0aGlzLl9tYXAub3B0aW9ucy56b29tU25hcCk6dGhpcy5fbWFwLl9yZXNldFZpZXcodGhpcy5fY2VudGVyLHRoaXMuX21hcC5fbGltaXRab29tKHRoaXMuX3pvb20pKSkpOnZvaWQodGhpcy5fem9vbWluZz0hMSl9fSksby5NYXAuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJ0b3VjaFpvb21cIixvLk1hcC5Ub3VjaFpvb20pLG8uTWFwLm1lcmdlT3B0aW9ucyh7dGFwOiEwLHRhcFRvbGVyYW5jZToxNX0pLG8uTWFwLlRhcD1vLkhhbmRsZXIuZXh0ZW5kKHthZGRIb29rczpmdW5jdGlvbigpe28uRG9tRXZlbnQub24odGhpcy5fbWFwLl9jb250YWluZXIsXCJ0b3VjaHN0YXJ0XCIsdGhpcy5fb25Eb3duLHRoaXMpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe28uRG9tRXZlbnQub2ZmKHRoaXMuX21hcC5fY29udGFpbmVyLFwidG91Y2hzdGFydFwiLHRoaXMuX29uRG93bix0aGlzKX0sX29uRG93bjpmdW5jdGlvbih0KXtpZih0LnRvdWNoZXMpe2lmKG8uRG9tRXZlbnQucHJldmVudERlZmF1bHQodCksdGhpcy5fZmlyZUNsaWNrPSEwLHQudG91Y2hlcy5sZW5ndGg+MSlyZXR1cm4gdGhpcy5fZmlyZUNsaWNrPSExLHZvaWQgY2xlYXJUaW1lb3V0KHRoaXMuX2hvbGRUaW1lb3V0KTt2YXIgaT10LnRvdWNoZXNbMF0sbj1pLnRhcmdldDt0aGlzLl9zdGFydFBvcz10aGlzLl9uZXdQb3M9bmV3IG8uUG9pbnQoaS5jbGllbnRYLGkuY2xpZW50WSksbi50YWdOYW1lJiZcImFcIj09PW4udGFnTmFtZS50b0xvd2VyQ2FzZSgpJiZvLkRvbVV0aWwuYWRkQ2xhc3MobixcImxlYWZsZXQtYWN0aXZlXCIpLHRoaXMuX2hvbGRUaW1lb3V0PXNldFRpbWVvdXQoby5iaW5kKGZ1bmN0aW9uKCl7dGhpcy5faXNUYXBWYWxpZCgpJiYodGhpcy5fZmlyZUNsaWNrPSExLHRoaXMuX29uVXAoKSx0aGlzLl9zaW11bGF0ZUV2ZW50KFwiY29udGV4dG1lbnVcIixpKSl9LHRoaXMpLDFlMyksdGhpcy5fc2ltdWxhdGVFdmVudChcIm1vdXNlZG93blwiLGkpLG8uRG9tRXZlbnQub24oZSx7dG91Y2htb3ZlOnRoaXMuX29uTW92ZSx0b3VjaGVuZDp0aGlzLl9vblVwfSx0aGlzKX19LF9vblVwOmZ1bmN0aW9uKHQpe2lmKGNsZWFyVGltZW91dCh0aGlzLl9ob2xkVGltZW91dCksby5Eb21FdmVudC5vZmYoZSx7dG91Y2htb3ZlOnRoaXMuX29uTW92ZSx0b3VjaGVuZDp0aGlzLl9vblVwfSx0aGlzKSx0aGlzLl9maXJlQ2xpY2smJnQmJnQuY2hhbmdlZFRvdWNoZXMpe3ZhciBpPXQuY2hhbmdlZFRvdWNoZXNbMF0sbj1pLnRhcmdldDtuJiZuLnRhZ05hbWUmJlwiYVwiPT09bi50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJm8uRG9tVXRpbC5yZW1vdmVDbGFzcyhuLFwibGVhZmxldC1hY3RpdmVcIiksdGhpcy5fc2ltdWxhdGVFdmVudChcIm1vdXNldXBcIixpKSx0aGlzLl9pc1RhcFZhbGlkKCkmJnRoaXMuX3NpbXVsYXRlRXZlbnQoXCJjbGlja1wiLGkpfX0sX2lzVGFwVmFsaWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmV3UG9zLmRpc3RhbmNlVG8odGhpcy5fc3RhcnRQb3MpPD10aGlzLl9tYXAub3B0aW9ucy50YXBUb2xlcmFuY2V9LF9vbk1vdmU6ZnVuY3Rpb24odCl7dmFyIGU9dC50b3VjaGVzWzBdO3RoaXMuX25ld1Bvcz1uZXcgby5Qb2ludChlLmNsaWVudFgsZS5jbGllbnRZKSxcclxudGhpcy5fc2ltdWxhdGVFdmVudChcIm1vdXNlbW92ZVwiLGUpfSxfc2ltdWxhdGVFdmVudDpmdW5jdGlvbihpLG4pe3ZhciBvPWUuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtvLl9zaW11bGF0ZWQ9ITAsbi50YXJnZXQuX3NpbXVsYXRlZENsaWNrPSEwLG8uaW5pdE1vdXNlRXZlbnQoaSwhMCwhMCx0LDEsbi5zY3JlZW5YLG4uc2NyZWVuWSxuLmNsaWVudFgsbi5jbGllbnRZLCExLCExLCExLCExLDAsbnVsbCksbi50YXJnZXQuZGlzcGF0Y2hFdmVudChvKX19KSxvLkJyb3dzZXIudG91Y2gmJiFvLkJyb3dzZXIucG9pbnRlciYmby5NYXAuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJ0YXBcIixvLk1hcC5UYXApLG8uTWFwLm1lcmdlT3B0aW9ucyh7Ym94Wm9vbTohMH0pLG8uTWFwLkJveFpvb209by5IYW5kbGVyLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLl9tYXA9dCx0aGlzLl9jb250YWluZXI9dC5fY29udGFpbmVyLHRoaXMuX3BhbmU9dC5fcGFuZXMub3ZlcmxheVBhbmV9LGFkZEhvb2tzOmZ1bmN0aW9uKCl7by5Eb21FdmVudC5vbih0aGlzLl9jb250YWluZXIsXCJtb3VzZWRvd25cIix0aGlzLl9vbk1vdXNlRG93bix0aGlzKX0scmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9mZih0aGlzLl9jb250YWluZXIsXCJtb3VzZWRvd25cIix0aGlzLl9vbk1vdXNlRG93bix0aGlzKX0sbW92ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW92ZWR9LF9yZXNldFN0YXRlOmZ1bmN0aW9uKCl7dGhpcy5fbW92ZWQ9ITF9LF9vbk1vdXNlRG93bjpmdW5jdGlvbih0KXtyZXR1cm4hKCF0LnNoaWZ0S2V5fHwxIT09dC53aGljaCYmMSE9PXQuYnV0dG9uKSYmKHRoaXMuX3Jlc2V0U3RhdGUoKSxvLkRvbVV0aWwuZGlzYWJsZVRleHRTZWxlY3Rpb24oKSxvLkRvbVV0aWwuZGlzYWJsZUltYWdlRHJhZygpLHRoaXMuX3N0YXJ0UG9pbnQ9dGhpcy5fbWFwLm1vdXNlRXZlbnRUb0NvbnRhaW5lclBvaW50KHQpLHZvaWQgby5Eb21FdmVudC5vbihlLHtjb250ZXh0bWVudTpvLkRvbUV2ZW50LnN0b3AsbW91c2Vtb3ZlOnRoaXMuX29uTW91c2VNb3ZlLG1vdXNldXA6dGhpcy5fb25Nb3VzZVVwLGtleWRvd246dGhpcy5fb25LZXlEb3dufSx0aGlzKSl9LF9vbk1vdXNlTW92ZTpmdW5jdGlvbih0KXt0aGlzLl9tb3ZlZHx8KHRoaXMuX21vdmVkPSEwLHRoaXMuX2JveD1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsXCJsZWFmbGV0LXpvb20tYm94XCIsdGhpcy5fY29udGFpbmVyKSxvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jcm9zc2hhaXJcIiksdGhpcy5fbWFwLmZpcmUoXCJib3h6b29tc3RhcnRcIikpLHRoaXMuX3BvaW50PXRoaXMuX21hcC5tb3VzZUV2ZW50VG9Db250YWluZXJQb2ludCh0KTt2YXIgZT1uZXcgby5Cb3VuZHModGhpcy5fcG9pbnQsdGhpcy5fc3RhcnRQb2ludCksaT1lLmdldFNpemUoKTtvLkRvbVV0aWwuc2V0UG9zaXRpb24odGhpcy5fYm94LGUubWluKSx0aGlzLl9ib3guc3R5bGUud2lkdGg9aS54K1wicHhcIix0aGlzLl9ib3guc3R5bGUuaGVpZ2h0PWkueStcInB4XCJ9LF9maW5pc2g6ZnVuY3Rpb24oKXt0aGlzLl9tb3ZlZCYmKG8uRG9tVXRpbC5yZW1vdmUodGhpcy5fYm94KSxvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jcm9zc2hhaXJcIikpLG8uRG9tVXRpbC5lbmFibGVUZXh0U2VsZWN0aW9uKCksby5Eb21VdGlsLmVuYWJsZUltYWdlRHJhZygpLG8uRG9tRXZlbnQub2ZmKGUse2NvbnRleHRtZW51Om8uRG9tRXZlbnQuc3RvcCxtb3VzZW1vdmU6dGhpcy5fb25Nb3VzZU1vdmUsbW91c2V1cDp0aGlzLl9vbk1vdXNlVXAsa2V5ZG93bjp0aGlzLl9vbktleURvd259LHRoaXMpfSxfb25Nb3VzZVVwOmZ1bmN0aW9uKHQpe2lmKCgxPT09dC53aGljaHx8MT09PXQuYnV0dG9uKSYmKHRoaXMuX2ZpbmlzaCgpLHRoaXMuX21vdmVkKSl7c2V0VGltZW91dChvLmJpbmQodGhpcy5fcmVzZXRTdGF0ZSx0aGlzKSwwKTt2YXIgZT1uZXcgby5MYXRMbmdCb3VuZHModGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXRMbmcodGhpcy5fc3RhcnRQb2ludCksdGhpcy5fbWFwLmNvbnRhaW5lclBvaW50VG9MYXRMbmcodGhpcy5fcG9pbnQpKTt0aGlzLl9tYXAuZml0Qm91bmRzKGUpLmZpcmUoXCJib3h6b29tZW5kXCIse2JveFpvb21Cb3VuZHM6ZX0pfX0sX29uS2V5RG93bjpmdW5jdGlvbih0KXsyNz09PXQua2V5Q29kZSYmdGhpcy5fZmluaXNoKCl9fSksby5NYXAuYWRkSW5pdEhvb2soXCJhZGRIYW5kbGVyXCIsXCJib3hab29tXCIsby5NYXAuQm94Wm9vbSksby5NYXAubWVyZ2VPcHRpb25zKHtrZXlib2FyZDohMCxrZXlib2FyZFBhbkRlbHRhOjgwfSksby5NYXAuS2V5Ym9hcmQ9by5IYW5kbGVyLmV4dGVuZCh7a2V5Q29kZXM6e2xlZnQ6WzM3XSxyaWdodDpbMzldLGRvd246WzQwXSx1cDpbMzhdLHpvb21JbjpbMTg3LDEwNyw2MSwxNzFdLHpvb21PdXQ6WzE4OSwxMDksNTQsMTczXX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLl9tYXA9dCx0aGlzLl9zZXRQYW5EZWx0YSh0Lm9wdGlvbnMua2V5Ym9hcmRQYW5EZWx0YSksdGhpcy5fc2V0Wm9vbURlbHRhKHQub3B0aW9ucy56b29tRGVsdGEpfSxhZGRIb29rczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuX21hcC5fY29udGFpbmVyO3QudGFiSW5kZXg8PTAmJih0LnRhYkluZGV4PVwiMFwiKSxvLkRvbUV2ZW50Lm9uKHQse2ZvY3VzOnRoaXMuX29uRm9jdXMsYmx1cjp0aGlzLl9vbkJsdXIsbW91c2Vkb3duOnRoaXMuX29uTW91c2VEb3dufSx0aGlzKSx0aGlzLl9tYXAub24oe2ZvY3VzOnRoaXMuX2FkZEhvb2tzLGJsdXI6dGhpcy5fcmVtb3ZlSG9va3N9LHRoaXMpfSxyZW1vdmVIb29rczpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZUhvb2tzKCksby5Eb21FdmVudC5vZmYodGhpcy5fbWFwLl9jb250YWluZXIse2ZvY3VzOnRoaXMuX29uRm9jdXMsYmx1cjp0aGlzLl9vbkJsdXIsbW91c2Vkb3duOnRoaXMuX29uTW91c2VEb3dufSx0aGlzKSx0aGlzLl9tYXAub2ZmKHtmb2N1czp0aGlzLl9hZGRIb29rcyxibHVyOnRoaXMuX3JlbW92ZUhvb2tzfSx0aGlzKX0sX29uTW91c2VEb3duOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2ZvY3VzZWQpe3ZhciBpPWUuYm9keSxuPWUuZG9jdW1lbnRFbGVtZW50LG89aS5zY3JvbGxUb3B8fG4uc2Nyb2xsVG9wLHM9aS5zY3JvbGxMZWZ0fHxuLnNjcm9sbExlZnQ7dGhpcy5fbWFwLl9jb250YWluZXIuZm9jdXMoKSx0LnNjcm9sbFRvKHMsbyl9fSxfb25Gb2N1czpmdW5jdGlvbigpe3RoaXMuX2ZvY3VzZWQ9ITAsdGhpcy5fbWFwLmZpcmUoXCJmb2N1c1wiKX0sX29uQmx1cjpmdW5jdGlvbigpe3RoaXMuX2ZvY3VzZWQ9ITEsdGhpcy5fbWFwLmZpcmUoXCJibHVyXCIpfSxfc2V0UGFuRGVsdGE6ZnVuY3Rpb24odCl7dmFyIGUsaSxuPXRoaXMuX3BhbktleXM9e30sbz10aGlzLmtleUNvZGVzO2ZvcihlPTAsaT1vLmxlZnQubGVuZ3RoO2U8aTtlKyspbltvLmxlZnRbZV1dPVstMSp0LDBdO2ZvcihlPTAsaT1vLnJpZ2h0Lmxlbmd0aDtlPGk7ZSsrKW5bby5yaWdodFtlXV09W3QsMF07Zm9yKGU9MCxpPW8uZG93bi5sZW5ndGg7ZTxpO2UrKyluW28uZG93bltlXV09WzAsdF07Zm9yKGU9MCxpPW8udXAubGVuZ3RoO2U8aTtlKyspbltvLnVwW2VdXT1bMCwtMSp0XX0sX3NldFpvb21EZWx0YTpmdW5jdGlvbih0KXt2YXIgZSxpLG49dGhpcy5fem9vbUtleXM9e30sbz10aGlzLmtleUNvZGVzO2ZvcihlPTAsaT1vLnpvb21Jbi5sZW5ndGg7ZTxpO2UrKyluW28uem9vbUluW2VdXT10O2ZvcihlPTAsaT1vLnpvb21PdXQubGVuZ3RoO2U8aTtlKyspbltvLnpvb21PdXRbZV1dPS10fSxfYWRkSG9va3M6ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9uKGUsXCJrZXlkb3duXCIsdGhpcy5fb25LZXlEb3duLHRoaXMpfSxfcmVtb3ZlSG9va3M6ZnVuY3Rpb24oKXtvLkRvbUV2ZW50Lm9mZihlLFwia2V5ZG93blwiLHRoaXMuX29uS2V5RG93bix0aGlzKX0sX29uS2V5RG93bjpmdW5jdGlvbih0KXtpZighKHQuYWx0S2V5fHx0LmN0cmxLZXl8fHQubWV0YUtleSkpe3ZhciBlLGk9dC5rZXlDb2RlLG49dGhpcy5fbWFwO2lmKGkgaW4gdGhpcy5fcGFuS2V5cyl7aWYobi5fcGFuQW5pbSYmbi5fcGFuQW5pbS5faW5Qcm9ncmVzcylyZXR1cm47ZT10aGlzLl9wYW5LZXlzW2ldLHQuc2hpZnRLZXkmJihlPW8ucG9pbnQoZSkubXVsdGlwbHlCeSgzKSksbi5wYW5CeShlKSxuLm9wdGlvbnMubWF4Qm91bmRzJiZuLnBhbkluc2lkZUJvdW5kcyhuLm9wdGlvbnMubWF4Qm91bmRzKX1lbHNlIGlmKGkgaW4gdGhpcy5fem9vbUtleXMpbi5zZXRab29tKG4uZ2V0Wm9vbSgpKyh0LnNoaWZ0S2V5PzM6MSkqdGhpcy5fem9vbUtleXNbaV0pO2Vsc2V7aWYoMjchPT1pKXJldHVybjtuLmNsb3NlUG9wdXAoKX1vLkRvbUV2ZW50LnN0b3AodCl9fX0pLG8uTWFwLmFkZEluaXRIb29rKFwiYWRkSGFuZGxlclwiLFwia2V5Ym9hcmRcIixvLk1hcC5LZXlib2FyZCksby5IYW5kbGVyLk1hcmtlckRyYWc9by5IYW5kbGVyLmV4dGVuZCh7aW5pdGlhbGl6ZTpmdW5jdGlvbih0KXt0aGlzLl9tYXJrZXI9dH0sYWRkSG9va3M6ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9tYXJrZXIuX2ljb247dGhpcy5fZHJhZ2dhYmxlfHwodGhpcy5fZHJhZ2dhYmxlPW5ldyBvLkRyYWdnYWJsZSh0LHQsITApKSx0aGlzLl9kcmFnZ2FibGUub24oe2RyYWdzdGFydDp0aGlzLl9vbkRyYWdTdGFydCxkcmFnOnRoaXMuX29uRHJhZyxkcmFnZW5kOnRoaXMuX29uRHJhZ0VuZH0sdGhpcykuZW5hYmxlKCksby5Eb21VdGlsLmFkZENsYXNzKHQsXCJsZWFmbGV0LW1hcmtlci1kcmFnZ2FibGVcIil9LHJlbW92ZUhvb2tzOmZ1bmN0aW9uKCl7dGhpcy5fZHJhZ2dhYmxlLm9mZih7ZHJhZ3N0YXJ0OnRoaXMuX29uRHJhZ1N0YXJ0LGRyYWc6dGhpcy5fb25EcmFnLGRyYWdlbmQ6dGhpcy5fb25EcmFnRW5kfSx0aGlzKS5kaXNhYmxlKCksdGhpcy5fbWFya2VyLl9pY29uJiZvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fbWFya2VyLl9pY29uLFwibGVhZmxldC1tYXJrZXItZHJhZ2dhYmxlXCIpfSxtb3ZlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kcmFnZ2FibGUmJnRoaXMuX2RyYWdnYWJsZS5fbW92ZWR9LF9vbkRyYWdTdGFydDpmdW5jdGlvbigpe3RoaXMuX29sZExhdExuZz10aGlzLl9tYXJrZXIuZ2V0TGF0TG5nKCksdGhpcy5fbWFya2VyLmNsb3NlUG9wdXAoKS5maXJlKFwibW92ZXN0YXJ0XCIpLmZpcmUoXCJkcmFnc3RhcnRcIil9LF9vbkRyYWc6ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWFya2VyLGk9ZS5fc2hhZG93LG49by5Eb21VdGlsLmdldFBvc2l0aW9uKGUuX2ljb24pLHM9ZS5fbWFwLmxheWVyUG9pbnRUb0xhdExuZyhuKTtpJiZvLkRvbVV0aWwuc2V0UG9zaXRpb24oaSxuKSxlLl9sYXRsbmc9cyx0LmxhdGxuZz1zLHQub2xkTGF0TG5nPXRoaXMuX29sZExhdExuZyxlLmZpcmUoXCJtb3ZlXCIsdCkuZmlyZShcImRyYWdcIix0KX0sX29uRHJhZ0VuZDpmdW5jdGlvbih0KXtkZWxldGUgdGhpcy5fb2xkTGF0TG5nLHRoaXMuX21hcmtlci5maXJlKFwibW92ZWVuZFwiKS5maXJlKFwiZHJhZ2VuZFwiLHQpfX0pLG8uQ29udHJvbD1vLkNsYXNzLmV4dGVuZCh7b3B0aW9uczp7cG9zaXRpb246XCJ0b3ByaWdodFwifSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe28uc2V0T3B0aW9ucyh0aGlzLHQpfSxnZXRQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnMucG9zaXRpb259LHNldFBvc2l0aW9uOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX21hcDtyZXR1cm4gZSYmZS5yZW1vdmVDb250cm9sKHRoaXMpLHRoaXMub3B0aW9ucy5wb3NpdGlvbj10LGUmJmUuYWRkQ29udHJvbCh0aGlzKSx0aGlzfSxnZXRDb250YWluZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29udGFpbmVyfSxhZGRUbzpmdW5jdGlvbih0KXt0aGlzLnJlbW92ZSgpLHRoaXMuX21hcD10O3ZhciBlPXRoaXMuX2NvbnRhaW5lcj10aGlzLm9uQWRkKHQpLGk9dGhpcy5nZXRQb3NpdGlvbigpLG49dC5fY29udHJvbENvcm5lcnNbaV07cmV0dXJuIG8uRG9tVXRpbC5hZGRDbGFzcyhlLFwibGVhZmxldC1jb250cm9sXCIpLGkuaW5kZXhPZihcImJvdHRvbVwiKSE9PS0xP24uaW5zZXJ0QmVmb3JlKGUsbi5maXJzdENoaWxkKTpuLmFwcGVuZENoaWxkKGUpLHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXA/KG8uRG9tVXRpbC5yZW1vdmUodGhpcy5fY29udGFpbmVyKSx0aGlzLm9uUmVtb3ZlJiZ0aGlzLm9uUmVtb3ZlKHRoaXMuX21hcCksdGhpcy5fbWFwPW51bGwsdGhpcyk6dGhpc30sX3JlZm9jdXNPbk1hcDpmdW5jdGlvbih0KXt0aGlzLl9tYXAmJnQmJnQuc2NyZWVuWD4wJiZ0LnNjcmVlblk+MCYmdGhpcy5fbWFwLmdldENvbnRhaW5lcigpLmZvY3VzKCl9fSksby5jb250cm9sPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5Db250cm9sKHQpfSxvLk1hcC5pbmNsdWRlKHthZGRDb250cm9sOmZ1bmN0aW9uKHQpe3JldHVybiB0LmFkZFRvKHRoaXMpLHRoaXN9LHJlbW92ZUNvbnRyb2w6ZnVuY3Rpb24odCl7cmV0dXJuIHQucmVtb3ZlKCksdGhpc30sX2luaXRDb250cm9sUG9zOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LHMpe3ZhciByPWkrdCtcIiBcIitpK3M7ZVt0K3NdPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixyLG4pfXZhciBlPXRoaXMuX2NvbnRyb2xDb3JuZXJzPXt9LGk9XCJsZWFmbGV0LVwiLG49dGhpcy5fY29udHJvbENvbnRhaW5lcj1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsaStcImNvbnRyb2wtY29udGFpbmVyXCIsdGhpcy5fY29udGFpbmVyKTt0KFwidG9wXCIsXCJsZWZ0XCIpLHQoXCJ0b3BcIixcInJpZ2h0XCIpLHQoXCJib3R0b21cIixcImxlZnRcIiksdChcImJvdHRvbVwiLFwicmlnaHRcIil9LF9jbGVhckNvbnRyb2xQb3M6ZnVuY3Rpb24oKXtvLkRvbVV0aWwucmVtb3ZlKHRoaXMuX2NvbnRyb2xDb250YWluZXIpfX0pLG8uQ29udHJvbC5ab29tPW8uQ29udHJvbC5leHRlbmQoe29wdGlvbnM6e3Bvc2l0aW9uOlwidG9wbGVmdFwiLHpvb21JblRleHQ6XCIrXCIsem9vbUluVGl0bGU6XCJab29tIGluXCIsem9vbU91dFRleHQ6XCItXCIsem9vbU91dFRpdGxlOlwiWm9vbSBvdXRcIn0sb25BZGQ6ZnVuY3Rpb24odCl7dmFyIGU9XCJsZWFmbGV0LWNvbnRyb2wtem9vbVwiLGk9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLGUrXCIgbGVhZmxldC1iYXJcIiksbj10aGlzLm9wdGlvbnM7cmV0dXJuIHRoaXMuX3pvb21JbkJ1dHRvbj10aGlzLl9jcmVhdGVCdXR0b24obi56b29tSW5UZXh0LG4uem9vbUluVGl0bGUsZStcIi1pblwiLGksdGhpcy5fem9vbUluKSx0aGlzLl96b29tT3V0QnV0dG9uPXRoaXMuX2NyZWF0ZUJ1dHRvbihuLnpvb21PdXRUZXh0LG4uem9vbU91dFRpdGxlLGUrXCItb3V0XCIsaSx0aGlzLl96b29tT3V0KSx0aGlzLl91cGRhdGVEaXNhYmxlZCgpLHQub24oXCJ6b29tZW5kIHpvb21sZXZlbHNjaGFuZ2VcIix0aGlzLl91cGRhdGVEaXNhYmxlZCx0aGlzKSxpfSxvblJlbW92ZTpmdW5jdGlvbih0KXt0Lm9mZihcInpvb21lbmQgem9vbWxldmVsc2NoYW5nZVwiLHRoaXMuX3VwZGF0ZURpc2FibGVkLHRoaXMpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkPSEwLHRoaXMuX3VwZGF0ZURpc2FibGVkKCksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Rpc2FibGVkPSExLHRoaXMuX3VwZGF0ZURpc2FibGVkKCksdGhpc30sX3pvb21JbjpmdW5jdGlvbih0KXshdGhpcy5fZGlzYWJsZWQmJnRoaXMuX21hcC5fem9vbTx0aGlzLl9tYXAuZ2V0TWF4Wm9vbSgpJiZ0aGlzLl9tYXAuem9vbUluKHRoaXMuX21hcC5vcHRpb25zLnpvb21EZWx0YSoodC5zaGlmdEtleT8zOjEpKX0sX3pvb21PdXQ6ZnVuY3Rpb24odCl7IXRoaXMuX2Rpc2FibGVkJiZ0aGlzLl9tYXAuX3pvb20+dGhpcy5fbWFwLmdldE1pblpvb20oKSYmdGhpcy5fbWFwLnpvb21PdXQodGhpcy5fbWFwLm9wdGlvbnMuem9vbURlbHRhKih0LnNoaWZ0S2V5PzM6MSkpfSxfY3JlYXRlQnV0dG9uOmZ1bmN0aW9uKHQsZSxpLG4scyl7dmFyIHI9by5Eb21VdGlsLmNyZWF0ZShcImFcIixpLG4pO3JldHVybiByLmlubmVySFRNTD10LHIuaHJlZj1cIiNcIixyLnRpdGxlPWUsci5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJidXR0b25cIiksci5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsZSksby5Eb21FdmVudC5vbihyLFwibW91c2Vkb3duIGRibGNsaWNrXCIsby5Eb21FdmVudC5zdG9wUHJvcGFnYXRpb24pLm9uKHIsXCJjbGlja1wiLG8uRG9tRXZlbnQuc3RvcCkub24ocixcImNsaWNrXCIscyx0aGlzKS5vbihyLFwiY2xpY2tcIix0aGlzLl9yZWZvY3VzT25NYXAsdGhpcykscn0sX3VwZGF0ZURpc2FibGVkOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGU9XCJsZWFmbGV0LWRpc2FibGVkXCI7by5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMuX3pvb21JbkJ1dHRvbixlKSxvLkRvbVV0aWwucmVtb3ZlQ2xhc3ModGhpcy5fem9vbU91dEJ1dHRvbixlKSwodGhpcy5fZGlzYWJsZWR8fHQuX3pvb209PT10LmdldE1pblpvb20oKSkmJm8uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl96b29tT3V0QnV0dG9uLGUpLCh0aGlzLl9kaXNhYmxlZHx8dC5fem9vbT09PXQuZ2V0TWF4Wm9vbSgpKSYmby5Eb21VdGlsLmFkZENsYXNzKHRoaXMuX3pvb21JbkJ1dHRvbixlKX19KSxvLk1hcC5tZXJnZU9wdGlvbnMoe3pvb21Db250cm9sOiEwfSksby5NYXAuYWRkSW5pdEhvb2soZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuem9vbUNvbnRyb2wmJih0aGlzLnpvb21Db250cm9sPW5ldyBvLkNvbnRyb2wuWm9vbSx0aGlzLmFkZENvbnRyb2wodGhpcy56b29tQ29udHJvbCkpfSksby5jb250cm9sLnpvb209ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBvLkNvbnRyb2wuWm9vbSh0KX0sby5Db250cm9sLkF0dHJpYnV0aW9uPW8uQ29udHJvbC5leHRlbmQoe29wdGlvbnM6e3Bvc2l0aW9uOlwiYm90dG9tcmlnaHRcIixwcmVmaXg6JzxhIGhyZWY9XCJodHRwOi8vbGVhZmxldGpzLmNvbVwiIHRpdGxlPVwiQSBKUyBsaWJyYXJ5IGZvciBpbnRlcmFjdGl2ZSBtYXBzXCI+TGVhZmxldDwvYT4nfSxpbml0aWFsaXplOmZ1bmN0aW9uKHQpe28uc2V0T3B0aW9ucyh0aGlzLHQpLHRoaXMuX2F0dHJpYnV0aW9ucz17fX0sb25BZGQ6ZnVuY3Rpb24odCl7dC5hdHRyaWJ1dGlvbkNvbnRyb2w9dGhpcyx0aGlzLl9jb250YWluZXI9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLFwibGVhZmxldC1jb250cm9sLWF0dHJpYnV0aW9uXCIpLG8uRG9tRXZlbnQmJm8uRG9tRXZlbnQuZGlzYWJsZUNsaWNrUHJvcGFnYXRpb24odGhpcy5fY29udGFpbmVyKTtmb3IodmFyIGUgaW4gdC5fbGF5ZXJzKXQuX2xheWVyc1tlXS5nZXRBdHRyaWJ1dGlvbiYmdGhpcy5hZGRBdHRyaWJ1dGlvbih0Ll9sYXllcnNbZV0uZ2V0QXR0cmlidXRpb24oKSk7cmV0dXJuIHRoaXMuX3VwZGF0ZSgpLHRoaXMuX2NvbnRhaW5lcn0sc2V0UHJlZml4OmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm9wdGlvbnMucHJlZml4PXQsdGhpcy5fdXBkYXRlKCksdGhpc30sYWRkQXR0cmlidXRpb246ZnVuY3Rpb24odCl7cmV0dXJuIHQ/KHRoaXMuX2F0dHJpYnV0aW9uc1t0XXx8KHRoaXMuX2F0dHJpYnV0aW9uc1t0XT0wKSx0aGlzLl9hdHRyaWJ1dGlvbnNbdF0rKyx0aGlzLl91cGRhdGUoKSx0aGlzKTp0aGlzfSxyZW1vdmVBdHRyaWJ1dGlvbjpmdW5jdGlvbih0KXtyZXR1cm4gdD8odGhpcy5fYXR0cmlidXRpb25zW3RdJiYodGhpcy5fYXR0cmlidXRpb25zW3RdLS0sdGhpcy5fdXBkYXRlKCkpLHRoaXMpOnRoaXN9LF91cGRhdGU6ZnVuY3Rpb24oKXtpZih0aGlzLl9tYXApe3ZhciB0PVtdO2Zvcih2YXIgZSBpbiB0aGlzLl9hdHRyaWJ1dGlvbnMpdGhpcy5fYXR0cmlidXRpb25zW2VdJiZ0LnB1c2goZSk7dmFyIGk9W107dGhpcy5vcHRpb25zLnByZWZpeCYmaS5wdXNoKHRoaXMub3B0aW9ucy5wcmVmaXgpLHQubGVuZ3RoJiZpLnB1c2godC5qb2luKFwiLCBcIikpLHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUw9aS5qb2luKFwiIHwgXCIpfX19KSxvLk1hcC5tZXJnZU9wdGlvbnMoe2F0dHJpYnV0aW9uQ29udHJvbDohMH0pLG8uTWFwLmFkZEluaXRIb29rKGZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmF0dHJpYnV0aW9uQ29udHJvbCYmKG5ldyBvLkNvbnRyb2wuQXR0cmlidXRpb24pLmFkZFRvKHRoaXMpfSksby5jb250cm9sLmF0dHJpYnV0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgby5Db250cm9sLkF0dHJpYnV0aW9uKHQpfSxvLkNvbnRyb2wuU2NhbGU9by5Db250cm9sLmV4dGVuZCh7b3B0aW9uczp7cG9zaXRpb246XCJib3R0b21sZWZ0XCIsbWF4V2lkdGg6MTAwLG1ldHJpYzohMCxpbXBlcmlhbDohMH0sb25BZGQ6ZnVuY3Rpb24odCl7dmFyIGU9XCJsZWFmbGV0LWNvbnRyb2wtc2NhbGVcIixpPW8uRG9tVXRpbC5jcmVhdGUoXCJkaXZcIixlKSxuPXRoaXMub3B0aW9ucztyZXR1cm4gdGhpcy5fYWRkU2NhbGVzKG4sZStcIi1saW5lXCIsaSksdC5vbihuLnVwZGF0ZVdoZW5JZGxlP1wibW92ZWVuZFwiOlwibW92ZVwiLHRoaXMuX3VwZGF0ZSx0aGlzKSx0LndoZW5SZWFkeSh0aGlzLl91cGRhdGUsdGhpcyksaX0sb25SZW1vdmU6ZnVuY3Rpb24odCl7dC5vZmYodGhpcy5vcHRpb25zLnVwZGF0ZVdoZW5JZGxlP1wibW92ZWVuZFwiOlwibW92ZVwiLHRoaXMuX3VwZGF0ZSx0aGlzKX0sX2FkZFNjYWxlczpmdW5jdGlvbih0LGUsaSl7dC5tZXRyaWMmJih0aGlzLl9tU2NhbGU9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLGUsaSkpLHQuaW1wZXJpYWwmJih0aGlzLl9pU2NhbGU9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLGUsaSkpfSxfdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fbWFwLGU9dC5nZXRTaXplKCkueS8yLGk9dC5kaXN0YW5jZSh0LmNvbnRhaW5lclBvaW50VG9MYXRMbmcoWzAsZV0pLHQuY29udGFpbmVyUG9pbnRUb0xhdExuZyhbdGhpcy5vcHRpb25zLm1heFdpZHRoLGVdKSk7dGhpcy5fdXBkYXRlU2NhbGVzKGkpfSxfdXBkYXRlU2NhbGVzOmZ1bmN0aW9uKHQpe3RoaXMub3B0aW9ucy5tZXRyaWMmJnQmJnRoaXMuX3VwZGF0ZU1ldHJpYyh0KSx0aGlzLm9wdGlvbnMuaW1wZXJpYWwmJnQmJnRoaXMuX3VwZGF0ZUltcGVyaWFsKHQpfSxfdXBkYXRlTWV0cmljOmZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2dldFJvdW5kTnVtKHQpLGk9ZTwxZTM/ZStcIiBtXCI6ZS8xZTMrXCIga21cIjt0aGlzLl91cGRhdGVTY2FsZSh0aGlzLl9tU2NhbGUsaSxlL3QpfSxfdXBkYXRlSW1wZXJpYWw6ZnVuY3Rpb24odCl7dmFyIGUsaSxuLG89My4yODA4Mzk5KnQ7bz41MjgwPyhlPW8vNTI4MCxpPXRoaXMuX2dldFJvdW5kTnVtKGUpLHRoaXMuX3VwZGF0ZVNjYWxlKHRoaXMuX2lTY2FsZSxpK1wiIG1pXCIsaS9lKSk6KG49dGhpcy5fZ2V0Um91bmROdW0obyksdGhpcy5fdXBkYXRlU2NhbGUodGhpcy5faVNjYWxlLG4rXCIgZnRcIixuL28pKX0sX3VwZGF0ZVNjYWxlOmZ1bmN0aW9uKHQsZSxpKXt0LnN0eWxlLndpZHRoPU1hdGgucm91bmQodGhpcy5vcHRpb25zLm1heFdpZHRoKmkpK1wicHhcIix0LmlubmVySFRNTD1lfSxfZ2V0Um91bmROdW06ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5wb3coMTAsKE1hdGguZmxvb3IodCkrXCJcIikubGVuZ3RoLTEpLGk9dC9lO3JldHVybiBpPWk+PTEwPzEwOmk+PTU/NTppPj0zPzM6aT49Mj8yOjEsZSppfX0pLG8uY29udHJvbC5zY2FsZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IG8uQ29udHJvbC5TY2FsZSh0KX0sby5Db250cm9sLkxheWVycz1vLkNvbnRyb2wuZXh0ZW5kKHtvcHRpb25zOntjb2xsYXBzZWQ6ITAscG9zaXRpb246XCJ0b3ByaWdodFwiLGF1dG9aSW5kZXg6ITAsaGlkZVNpbmdsZUJhc2U6ITEsc29ydExheWVyczohMSxzb3J0RnVuY3Rpb246ZnVuY3Rpb24odCxlLGksbil7cmV0dXJuIGk8bj8tMTpuPGk/MTowfX0saW5pdGlhbGl6ZTpmdW5jdGlvbih0LGUsaSl7by5zZXRPcHRpb25zKHRoaXMsaSksdGhpcy5fbGF5ZXJzPVtdLHRoaXMuX2xhc3RaSW5kZXg9MCx0aGlzLl9oYW5kbGluZ0NsaWNrPSExO2Zvcih2YXIgbiBpbiB0KXRoaXMuX2FkZExheWVyKHRbbl0sbik7Zm9yKG4gaW4gZSl0aGlzLl9hZGRMYXllcihlW25dLG4sITApfSxvbkFkZDpmdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5faW5pdExheW91dCgpLHRoaXMuX3VwZGF0ZSgpLHRoaXMuX21hcD10LHQub24oXCJ6b29tZW5kXCIsdGhpcy5fY2hlY2tEaXNhYmxlZExheWVycyx0aGlzKSx0aGlzLl9jb250YWluZXJ9LG9uUmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5fbWFwLm9mZihcInpvb21lbmRcIix0aGlzLl9jaGVja0Rpc2FibGVkTGF5ZXJzLHRoaXMpO2Zvcih2YXIgdD0wO3Q8dGhpcy5fbGF5ZXJzLmxlbmd0aDt0KyspdGhpcy5fbGF5ZXJzW3RdLmxheWVyLm9mZihcImFkZCByZW1vdmVcIix0aGlzLl9vbkxheWVyQ2hhbmdlLHRoaXMpfSxhZGRCYXNlTGF5ZXI6ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5fYWRkTGF5ZXIodCxlKSx0aGlzLl9tYXA/dGhpcy5fdXBkYXRlKCk6dGhpc30sYWRkT3ZlcmxheTpmdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLl9hZGRMYXllcih0LGUsITApLHRoaXMuX21hcD90aGlzLl91cGRhdGUoKTp0aGlzfSxyZW1vdmVMYXllcjpmdW5jdGlvbih0KXt0Lm9mZihcImFkZCByZW1vdmVcIix0aGlzLl9vbkxheWVyQ2hhbmdlLHRoaXMpO3ZhciBlPXRoaXMuX2dldExheWVyKG8uc3RhbXAodCkpO3JldHVybiBlJiZ0aGlzLl9sYXllcnMuc3BsaWNlKHRoaXMuX2xheWVycy5pbmRleE9mKGUpLDEpLHRoaXMuX21hcD90aGlzLl91cGRhdGUoKTp0aGlzfSxleHBhbmQ6ZnVuY3Rpb24oKXtvLkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5fY29udGFpbmVyLFwibGVhZmxldC1jb250cm9sLWxheWVycy1leHBhbmRlZFwiKSx0aGlzLl9mb3JtLnN0eWxlLmhlaWdodD1udWxsO3ZhciB0PXRoaXMuX21hcC5nZXRTaXplKCkueS0odGhpcy5fY29udGFpbmVyLm9mZnNldFRvcCs1MCk7cmV0dXJuIHQ8dGhpcy5fZm9ybS5jbGllbnRIZWlnaHQ/KG8uRG9tVXRpbC5hZGRDbGFzcyh0aGlzLl9mb3JtLFwibGVhZmxldC1jb250cm9sLWxheWVycy1zY3JvbGxiYXJcIiksdGhpcy5fZm9ybS5zdHlsZS5oZWlnaHQ9dCtcInB4XCIpOm8uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9mb3JtLFwibGVhZmxldC1jb250cm9sLWxheWVycy1zY3JvbGxiYXJcIiksdGhpcy5fY2hlY2tEaXNhYmxlZExheWVycygpLHRoaXN9LGNvbGxhcHNlOmZ1bmN0aW9uKCl7cmV0dXJuIG8uRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLl9jb250YWluZXIsXCJsZWFmbGV0LWNvbnRyb2wtbGF5ZXJzLWV4cGFuZGVkXCIpLHRoaXN9LF9pbml0TGF5b3V0OmZ1bmN0aW9uKCl7dmFyIHQ9XCJsZWFmbGV0LWNvbnRyb2wtbGF5ZXJzXCIsZT10aGlzLl9jb250YWluZXI9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQpLGk9dGhpcy5vcHRpb25zLmNvbGxhcHNlZDtlLnNldEF0dHJpYnV0ZShcImFyaWEtaGFzcG9wdXBcIiwhMCksby5Eb21FdmVudC5kaXNhYmxlQ2xpY2tQcm9wYWdhdGlvbihlKSxvLkJyb3dzZXIudG91Y2h8fG8uRG9tRXZlbnQuZGlzYWJsZVNjcm9sbFByb3BhZ2F0aW9uKGUpO3ZhciBuPXRoaXMuX2Zvcm09by5Eb21VdGlsLmNyZWF0ZShcImZvcm1cIix0K1wiLWxpc3RcIik7aSYmKHRoaXMuX21hcC5vbihcImNsaWNrXCIsdGhpcy5jb2xsYXBzZSx0aGlzKSxvLkJyb3dzZXIuYW5kcm9pZHx8by5Eb21FdmVudC5vbihlLHttb3VzZWVudGVyOnRoaXMuZXhwYW5kLG1vdXNlbGVhdmU6dGhpcy5jb2xsYXBzZX0sdGhpcykpO3ZhciBzPXRoaXMuX2xheWVyc0xpbms9by5Eb21VdGlsLmNyZWF0ZShcImFcIix0K1wiLXRvZ2dsZVwiLGUpO3MuaHJlZj1cIiNcIixzLnRpdGxlPVwiTGF5ZXJzXCIsby5Ccm93c2VyLnRvdWNoP28uRG9tRXZlbnQub24ocyxcImNsaWNrXCIsby5Eb21FdmVudC5zdG9wKS5vbihzLFwiY2xpY2tcIix0aGlzLmV4cGFuZCx0aGlzKTpvLkRvbUV2ZW50Lm9uKHMsXCJmb2N1c1wiLHRoaXMuZXhwYW5kLHRoaXMpLG8uRG9tRXZlbnQub24obixcImNsaWNrXCIsZnVuY3Rpb24oKXtzZXRUaW1lb3V0KG8uYmluZCh0aGlzLl9vbklucHV0Q2xpY2ssdGhpcyksMCl9LHRoaXMpLGl8fHRoaXMuZXhwYW5kKCksdGhpcy5fYmFzZUxheWVyc0xpc3Q9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCItYmFzZVwiLG4pLHRoaXMuX3NlcGFyYXRvcj1vLkRvbVV0aWwuY3JlYXRlKFwiZGl2XCIsdCtcIi1zZXBhcmF0b3JcIixuKSx0aGlzLl9vdmVybGF5c0xpc3Q9by5Eb21VdGlsLmNyZWF0ZShcImRpdlwiLHQrXCItb3ZlcmxheXNcIixuKSxlLmFwcGVuZENoaWxkKG4pfSxfZ2V0TGF5ZXI6ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLl9sYXllcnMubGVuZ3RoO2UrKylpZih0aGlzLl9sYXllcnNbZV0mJm8uc3RhbXAodGhpcy5fbGF5ZXJzW2VdLmxheWVyKT09PXQpcmV0dXJuIHRoaXMuX2xheWVyc1tlXX0sX2FkZExheWVyOmZ1bmN0aW9uKHQsZSxpKXt0Lm9uKFwiYWRkIHJlbW92ZVwiLHRoaXMuX29uTGF5ZXJDaGFuZ2UsdGhpcyksdGhpcy5fbGF5ZXJzLnB1c2goe2xheWVyOnQsbmFtZTplLG92ZXJsYXk6aX0pLHRoaXMub3B0aW9ucy5zb3J0TGF5ZXJzJiZ0aGlzLl9sYXllcnMuc29ydChvLmJpbmQoZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNvcnRGdW5jdGlvbih0LmxheWVyLGUubGF5ZXIsdC5uYW1lLGUubmFtZSl9LHRoaXMpKSx0aGlzLm9wdGlvbnMuYXV0b1pJbmRleCYmdC5zZXRaSW5kZXgmJih0aGlzLl9sYXN0WkluZGV4KyssdC5zZXRaSW5kZXgodGhpcy5fbGFzdFpJbmRleCkpfSxfdXBkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NvbnRhaW5lcilyZXR1cm4gdGhpcztvLkRvbVV0aWwuZW1wdHkodGhpcy5fYmFzZUxheWVyc0xpc3QpLG8uRG9tVXRpbC5lbXB0eSh0aGlzLl9vdmVybGF5c0xpc3QpO3ZhciB0LGUsaSxuLHM9MDtmb3IoaT0wO2k8dGhpcy5fbGF5ZXJzLmxlbmd0aDtpKyspbj10aGlzLl9sYXllcnNbaV0sdGhpcy5fYWRkSXRlbShuKSxlPWV8fG4ub3ZlcmxheSx0PXR8fCFuLm92ZXJsYXkscys9bi5vdmVybGF5PzA6MTtyZXR1cm4gdGhpcy5vcHRpb25zLmhpZGVTaW5nbGVCYXNlJiYodD10JiZzPjEsdGhpcy5fYmFzZUxheWVyc0xpc3Quc3R5bGUuZGlzcGxheT10P1wiXCI6XCJub25lXCIpLHRoaXMuX3NlcGFyYXRvci5zdHlsZS5kaXNwbGF5PWUmJnQ/XCJcIjpcIm5vbmVcIix0aGlzfSxfb25MYXllckNoYW5nZTpmdW5jdGlvbih0KXt0aGlzLl9oYW5kbGluZ0NsaWNrfHx0aGlzLl91cGRhdGUoKTt2YXIgZT10aGlzLl9nZXRMYXllcihvLnN0YW1wKHQudGFyZ2V0KSksaT1lLm92ZXJsYXk/XCJhZGRcIj09PXQudHlwZT9cIm92ZXJsYXlhZGRcIjpcIm92ZXJsYXlyZW1vdmVcIjpcImFkZFwiPT09dC50eXBlP1wiYmFzZWxheWVyY2hhbmdlXCI6bnVsbDtpJiZ0aGlzLl9tYXAuZmlyZShpLGUpfSxfY3JlYXRlUmFkaW9FbGVtZW50OmZ1bmN0aW9uKHQsaSl7dmFyIG49JzxpbnB1dCB0eXBlPVwicmFkaW9cIiBjbGFzcz1cImxlYWZsZXQtY29udHJvbC1sYXllcnMtc2VsZWN0b3JcIiBuYW1lPVwiJyt0KydcIicrKGk/JyBjaGVja2VkPVwiY2hlY2tlZFwiJzpcIlwiKStcIi8+XCIsbz1lLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIG8uaW5uZXJIVE1MPW4sby5maXJzdENoaWxkfSxfYWRkSXRlbTpmdW5jdGlvbih0KXt2YXIgaSxuPWUuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpLHM9dGhpcy5fbWFwLmhhc0xheWVyKHQubGF5ZXIpO3Qub3ZlcmxheT8oaT1lLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxpLnR5cGU9XCJjaGVja2JveFwiLGkuY2xhc3NOYW1lPVwibGVhZmxldC1jb250cm9sLWxheWVycy1zZWxlY3RvclwiLGkuZGVmYXVsdENoZWNrZWQ9cyk6aT10aGlzLl9jcmVhdGVSYWRpb0VsZW1lbnQoXCJsZWFmbGV0LWJhc2UtbGF5ZXJzXCIscyksaS5sYXllcklkPW8uc3RhbXAodC5sYXllciksby5Eb21FdmVudC5vbihpLFwiY2xpY2tcIix0aGlzLl9vbklucHV0Q2xpY2ssdGhpcyk7dmFyIHI9ZS5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtyLmlubmVySFRNTD1cIiBcIit0Lm5hbWU7dmFyIGE9ZS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uYXBwZW5kQ2hpbGQoYSksYS5hcHBlbmRDaGlsZChpKSxhLmFwcGVuZENoaWxkKHIpO3ZhciBoPXQub3ZlcmxheT90aGlzLl9vdmVybGF5c0xpc3Q6dGhpcy5fYmFzZUxheWVyc0xpc3Q7cmV0dXJuIGguYXBwZW5kQ2hpbGQobiksdGhpcy5fY2hlY2tEaXNhYmxlZExheWVycygpLG59LF9vbklucHV0Q2xpY2s6ZnVuY3Rpb24oKXt2YXIgdCxlLGksbj10aGlzLl9mb3JtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIiksbz1bXSxzPVtdO3RoaXMuX2hhbmRsaW5nQ2xpY2s9ITA7Zm9yKHZhciByPW4ubGVuZ3RoLTE7cj49MDtyLS0pdD1uW3JdLGU9dGhpcy5fZ2V0TGF5ZXIodC5sYXllcklkKS5sYXllcixpPXRoaXMuX21hcC5oYXNMYXllcihlKSx0LmNoZWNrZWQmJiFpP28ucHVzaChlKTohdC5jaGVja2VkJiZpJiZzLnB1c2goZSk7Zm9yKHI9MDtyPHMubGVuZ3RoO3IrKyl0aGlzLl9tYXAucmVtb3ZlTGF5ZXIoc1tyXSk7Zm9yKHI9MDtyPG8ubGVuZ3RoO3IrKyl0aGlzLl9tYXAuYWRkTGF5ZXIob1tyXSk7dGhpcy5faGFuZGxpbmdDbGljaz0hMSx0aGlzLl9yZWZvY3VzT25NYXAoKX0sX2NoZWNrRGlzYWJsZWRMYXllcnM6ZnVuY3Rpb24oKXtmb3IodmFyIHQsZSxuPXRoaXMuX2Zvcm0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJpbnB1dFwiKSxvPXRoaXMuX21hcC5nZXRab29tKCkscz1uLmxlbmd0aC0xO3M+PTA7cy0tKXQ9bltzXSxlPXRoaXMuX2dldExheWVyKHQubGF5ZXJJZCkubGF5ZXIsdC5kaXNhYmxlZD1lLm9wdGlvbnMubWluWm9vbSE9PWkmJm88ZS5vcHRpb25zLm1pblpvb218fGUub3B0aW9ucy5tYXhab29tIT09aSYmbz5lLm9wdGlvbnMubWF4Wm9vbX0sX2V4cGFuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmV4cGFuZCgpfSxfY29sbGFwc2U6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb2xsYXBzZSgpfX0pLG8uY29udHJvbC5sYXllcnM9ZnVuY3Rpb24odCxlLGkpe3JldHVybiBuZXcgby5Db250cm9sLkxheWVycyh0LGUsaSl9fSh3aW5kb3csZG9jdW1lbnQpOyIsIiFmdW5jdGlvbihhKXtpZihcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cyltb2R1bGUuZXhwb3J0cz1hKCk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKGEpO2Vsc2V7dmFyIGI7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz9iPXdpbmRvdzpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsP2I9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBzZWxmJiYoYj1zZWxmKSxiLnByb2o0PWEoKX19KGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGEoYixjLGQpe2Z1bmN0aW9uIGUoZyxoKXtpZighY1tnXSl7aWYoIWJbZ10pe3ZhciBpPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWgmJmkpcmV0dXJuIGkoZywhMCk7aWYoZilyZXR1cm4gZihnLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2crXCInXCIpfXZhciBqPWNbZ109e2V4cG9ydHM6e319O2JbZ11bMF0uY2FsbChqLmV4cG9ydHMsZnVuY3Rpb24oYSl7dmFyIGM9YltnXVsxXVthXTtyZXR1cm4gZShjP2M6YSl9LGosai5leHBvcnRzLGEsYixjLGQpfXJldHVybiBjW2ddLmV4cG9ydHN9Zm9yKHZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsZz0wO2c8ZC5sZW5ndGg7ZysrKWUoZFtnXSk7cmV0dXJuIGV9KHsxOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIFBvaW50KGEsYixjKXtpZighKHRoaXMgaW5zdGFuY2VvZiBQb2ludCkpcmV0dXJuIG5ldyBQb2ludChhLGIsYyk7aWYoQXJyYXkuaXNBcnJheShhKSl0aGlzLng9YVswXSx0aGlzLnk9YVsxXSx0aGlzLno9YVsyXXx8MDtlbHNlIGlmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXRoaXMueD1hLngsdGhpcy55PWEueSx0aGlzLno9YS56fHwwO2Vsc2UgaWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJlwidW5kZWZpbmVkXCI9PXR5cGVvZiBiKXt2YXIgZD1hLnNwbGl0KFwiLFwiKTt0aGlzLng9cGFyc2VGbG9hdChkWzBdLDEwKSx0aGlzLnk9cGFyc2VGbG9hdChkWzFdLDEwKSx0aGlzLno9cGFyc2VGbG9hdChkWzJdLDEwKXx8MH1lbHNlIHRoaXMueD1hLHRoaXMueT1iLHRoaXMuej1jfHwwO2NvbnNvbGUud2FybihcInByb2o0LlBvaW50IHdpbGwgYmUgcmVtb3ZlZCBpbiB2ZXJzaW9uIDMsIHVzZSBwcm9qNC50b1BvaW50XCIpfXZhciBjPWEoXCJtZ3JzXCIpO1BvaW50LmZyb21NR1JTPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgUG9pbnQoYy50b1BvaW50KGEpKX0sUG9pbnQucHJvdG90eXBlLnRvTUdSUz1mdW5jdGlvbihhKXtyZXR1cm4gYy5mb3J3YXJkKFt0aGlzLngsdGhpcy55XSxhKX0sYi5leHBvcnRzPVBvaW50fSx7bWdyczo2Nn1dLDI6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gUHJvamVjdGlvbihhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIFByb2plY3Rpb24pKXJldHVybiBuZXcgUHJvamVjdGlvbihhKTtiPWJ8fGZ1bmN0aW9uKGEpe2lmKGEpdGhyb3cgYX07dmFyIGU9YyhhKTtpZihcIm9iamVjdFwiIT10eXBlb2YgZSlyZXR1cm4gdm9pZCBiKGEpO3ZhciBnPWYoZSksaD1Qcm9qZWN0aW9uLnByb2plY3Rpb25zLmdldChnLnByb2pOYW1lKTtoPyhkKHRoaXMsZyksZCh0aGlzLGgpLHRoaXMuaW5pdCgpLGIobnVsbCx0aGlzKSk6YihhKX12YXIgYz1hKFwiLi9wYXJzZUNvZGVcIiksZD1hKFwiLi9leHRlbmRcIiksZT1hKFwiLi9wcm9qZWN0aW9uc1wiKSxmPWEoXCIuL2Rlcml2ZUNvbnN0YW50c1wiKTtQcm9qZWN0aW9uLnByb2plY3Rpb25zPWUsUHJvamVjdGlvbi5wcm9qZWN0aW9ucy5zdGFydCgpLGIuZXhwb3J0cz1Qcm9qZWN0aW9ufSx7XCIuL2Rlcml2ZUNvbnN0YW50c1wiOjMyLFwiLi9leHRlbmRcIjozMyxcIi4vcGFyc2VDb2RlXCI6MzYsXCIuL3Byb2plY3Rpb25zXCI6Mzh9XSwzOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9Yy54LGg9Yy55LGk9Yy56fHwwO2ZvcihmPTA7Mz5mO2YrKylpZighYnx8MiE9PWZ8fHZvaWQgMCE9PWMueilzd2l0Y2goMD09PWY/KGQ9ZyxlPVwieFwiKToxPT09Zj8oZD1oLGU9XCJ5XCIpOihkPWksZT1cInpcIiksYS5heGlzW2ZdKXtjYXNlXCJlXCI6Y1tlXT1kO2JyZWFrO2Nhc2VcIndcIjpjW2VdPS1kO2JyZWFrO2Nhc2VcIm5cIjpjW2VdPWQ7YnJlYWs7Y2FzZVwic1wiOmNbZV09LWQ7YnJlYWs7Y2FzZVwidVwiOnZvaWQgMCE9PWNbZV0mJihjLno9ZCk7YnJlYWs7Y2FzZVwiZFwiOnZvaWQgMCE9PWNbZV0mJihjLno9LWQpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIG51bGx9cmV0dXJuIGN9fSx7fV0sNDpbZnVuY3Rpb24oYSxiKXt2YXIgYz1NYXRoLlBJLzIsZD1hKFwiLi9zaWduXCIpO2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gTWF0aC5hYnMoYSk8Yz9hOmEtZChhKSpNYXRoLlBJfX0se1wiLi9zaWduXCI6MjF9XSw1OltmdW5jdGlvbihhLGIpe3ZhciBjPTIqTWF0aC5QSSxkPWEoXCIuL3NpZ25cIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyhhKTxNYXRoLlBJP2E6YS1kKGEpKmN9fSx7XCIuL3NpZ25cIjoyMX1dLDY6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiBNYXRoLmFicyhhKT4xJiYoYT1hPjE/MTotMSksTWF0aC5hc2luKGEpfX0se31dLDc6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiAxLS4yNSphKigxK2EvMTYqKDMrMS4yNSphKSl9fSx7fV0sODpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuLjM3NSphKigxKy4yNSphKigxKy40Njg3NSphKSl9fSx7fV0sOTpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7cmV0dXJuLjA1ODU5Mzc1KmEqYSooMSsuNzUqYSl9fSx7fV0sMTA6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEpe3JldHVybiBhKmEqYSooMzUvMzA3Mil9fSx7fV0sMTE6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iKmM7cmV0dXJuIGEvTWF0aC5zcXJ0KDEtZCpkKX19LHt9XSwxMjpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2Y9YS9iO2Zvcih2YXIgaD0wOzE1Pmg7aCsrKWlmKGc9KGEtKGIqZi1jKk1hdGguc2luKDIqZikrZCpNYXRoLnNpbig0KmYpLWUqTWF0aC5zaW4oNipmKSkpLyhiLTIqYypNYXRoLmNvcygyKmYpKzQqZCpNYXRoLmNvcyg0KmYpLTYqZSpNYXRoLmNvcyg2KmYpKSxmKz1nLE1hdGguYWJzKGcpPD0xZS0xMClyZXR1cm4gZjtyZXR1cm4gMC8wfX0se31dLDEzOltmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguUEkvMjtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiKXt2YXIgZD0xLSgxLWEqYSkvKDIqYSkqTWF0aC5sb2coKDEtYSkvKDErYSkpO2lmKE1hdGguYWJzKE1hdGguYWJzKGIpLWQpPDFlLTYpcmV0dXJuIDA+Yj8tMSpjOmM7Zm9yKHZhciBlLGYsZyxoLGk9TWF0aC5hc2luKC41KmIpLGo9MDszMD5qO2orKylpZihmPU1hdGguc2luKGkpLGc9TWF0aC5jb3MoaSksaD1hKmYsZT1NYXRoLnBvdygxLWgqaCwyKS8oMipnKSooYi8oMS1hKmEpLWYvKDEtaCpoKSsuNS9hKk1hdGgubG9nKCgxLWgpLygxK2gpKSksaSs9ZSxNYXRoLmFicyhlKTw9MWUtMTApcmV0dXJuIGk7cmV0dXJuIDAvMH19LHt9XSwxNDpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gYSplLWIqTWF0aC5zaW4oMiplKStjKk1hdGguc2luKDQqZSktZCpNYXRoLnNpbig2KmUpfX0se31dLDE1OltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSpiO3JldHVybiBjL01hdGguc3FydCgxLWQqZCl9fSx7fV0sMTY6W2Z1bmN0aW9uKGEsYil7dmFyIGM9TWF0aC5QSS8yO2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgZCxlLGY9LjUqYSxnPWMtMipNYXRoLmF0YW4oYiksaD0wOzE1Pj1oO2grKylpZihkPWEqTWF0aC5zaW4oZyksZT1jLTIqTWF0aC5hdGFuKGIqTWF0aC5wb3coKDEtZCkvKDErZCksZikpLWcsZys9ZSxNYXRoLmFicyhlKTw9MWUtMTApcmV0dXJuIGc7cmV0dXJuLTk5OTl9fSx7fV0sMTc6W2Z1bmN0aW9uKGEsYil7dmFyIGM9MSxkPS4yNSxlPS4wNDY4NzUsZj0uMDE5NTMxMjUsZz0uMDEwNjgxMTUyMzQzNzUsaD0uNzUsaT0uNDY4NzUsaj0uMDEzMDIwODMzMzMzMzMzMzM0LGs9LjAwNzEyMDc2ODIyOTE2NjY2NyxsPS4zNjQ1ODMzMzMzMzMzMzMzLG09LjAwNTY5NjYxNDU4MzMzMzMzMyxuPS4zMDc2MTcxODc1O2IuZXhwb3J0cz1mdW5jdGlvbihhKXt2YXIgYj1bXTtiWzBdPWMtYSooZCthKihlK2EqKGYrYSpnKSkpLGJbMV09YSooaC1hKihlK2EqKGYrYSpnKSkpO3ZhciBvPWEqYTtyZXR1cm4gYlsyXT1vKihpLWEqKGorYSprKSksbyo9YSxiWzNdPW8qKGwtYSptKSxiWzRdPW8qYSpuLGJ9fSx7fV0sMTg6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vcGpfbWxmblwiKSxkPTFlLTEwLGU9MjA7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYixmKXtmb3IodmFyIGc9MS8oMS1iKSxoPWEsaT1lO2k7LS1pKXt2YXIgaj1NYXRoLnNpbihoKSxrPTEtYipqKmo7aWYoaz0oYyhoLGosTWF0aC5jb3MoaCksZiktYSkqaypNYXRoLnNxcnQoaykqZyxoLT1rLE1hdGguYWJzKGspPGQpcmV0dXJuIGh9cmV0dXJuIGh9fSx7XCIuL3BqX21sZm5cIjoxOX1dLDE5OltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gYyo9YixiKj1iLGRbMF0qYS1jKihkWzFdK2IqKGRbMl0rYiooZFszXStiKmRbNF0pKSl9fSx7fV0sMjA6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM7cmV0dXJuIGE+MWUtNz8oYz1hKmIsKDEtYSphKSooYi8oMS1jKmMpLS41L2EqTWF0aC5sb2coKDEtYykvKDErYykpKSk6MipifX0se31dLDIxOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXtyZXR1cm4gMD5hPy0xOjF9fSx7fV0sMjI6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE1hdGgucG93KCgxLWEpLygxK2EpLGIpfX0se31dLDIzOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhKXt2YXIgYj17eDphWzBdLHk6YVsxXX07cmV0dXJuIGEubGVuZ3RoPjImJihiLno9YVsyXSksYS5sZW5ndGg+MyYmKGIubT1hWzNdKSxifX0se31dLDI0OltmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguUEkvMjtiLmV4cG9ydHM9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEqZCxmPS41KmE7cmV0dXJuIGU9TWF0aC5wb3coKDEtZSkvKDErZSksZiksTWF0aC50YW4oLjUqKGMtYikpL2V9fSx7fV0sMjU6W2Z1bmN0aW9uKGEsYixjKXtjLndnczg0PXt0b3dnczg0OlwiMCwwLDBcIixlbGxpcHNlOlwiV0dTODRcIixkYXR1bU5hbWU6XCJXR1M4NFwifSxjLmNoMTkwMz17dG93Z3M4NDpcIjY3NC4zNzQsMTUuMDU2LDQwNS4zNDZcIixlbGxpcHNlOlwiYmVzc2VsXCIsZGF0dW1OYW1lOlwic3dpc3NcIn0sYy5nZ3JzODc9e3Rvd2dzODQ6XCItMTk5Ljg3LDc0Ljc5LDI0Ni42MlwiLGVsbGlwc2U6XCJHUlM4MFwiLGRhdHVtTmFtZTpcIkdyZWVrX0dlb2RldGljX1JlZmVyZW5jZV9TeXN0ZW1fMTk4N1wifSxjLm5hZDgzPXt0b3dnczg0OlwiMCwwLDBcIixlbGxpcHNlOlwiR1JTODBcIixkYXR1bU5hbWU6XCJOb3J0aF9BbWVyaWNhbl9EYXR1bV8xOTgzXCJ9LGMubmFkMjc9e25hZGdyaWRzOlwiQGNvbnVzLEBhbGFza2EsQG50djJfMC5nc2IsQG50djFfY2FuLmRhdFwiLGVsbGlwc2U6XCJjbHJrNjZcIixkYXR1bU5hbWU6XCJOb3J0aF9BbWVyaWNhbl9EYXR1bV8xOTI3XCJ9LGMucG90c2RhbT17dG93Z3M4NDpcIjYwNi4wLDIzLjAsNDEzLjBcIixlbGxpcHNlOlwiYmVzc2VsXCIsZGF0dW1OYW1lOlwiUG90c2RhbSBSYXVlbmJlcmcgMTk1MCBESEROXCJ9LGMuY2FydGhhZ2U9e3Rvd2dzODQ6XCItMjYzLjAsNi4wLDQzMS4wXCIsZWxsaXBzZTpcImNsYXJrODBcIixkYXR1bU5hbWU6XCJDYXJ0aGFnZSAxOTM0IFR1bmlzaWFcIn0sYy5oZXJtYW5uc2tvZ2VsPXt0b3dnczg0OlwiNjUzLjAsLTIxMi4wLDQ0OS4wXCIsZWxsaXBzZTpcImJlc3NlbFwiLGRhdHVtTmFtZTpcIkhlcm1hbm5za29nZWxcIn0sYy5pcmU2NT17dG93Z3M4NDpcIjQ4Mi41MzAsLTEzMC41OTYsNTY0LjU1NywtMS4wNDIsLTAuMjE0LC0wLjYzMSw4LjE1XCIsZWxsaXBzZTpcIm1vZF9haXJ5XCIsZGF0dW1OYW1lOlwiSXJlbGFuZCAxOTY1XCJ9LGMucmFzc2FkaXJhbj17dG93Z3M4NDpcIi0xMzMuNjMsLTE1Ny41LC0xNTguNjJcIixlbGxpcHNlOlwiaW50bFwiLGRhdHVtTmFtZTpcIlJhc3NhZGlyYW5cIn0sYy5uemdkNDk9e3Rvd2dzODQ6XCI1OS40NywtNS4wNCwxODcuNDQsMC40NywtMC4xLDEuMDI0LC00LjU5OTNcIixlbGxpcHNlOlwiaW50bFwiLGRhdHVtTmFtZTpcIk5ldyBaZWFsYW5kIEdlb2RldGljIERhdHVtIDE5NDlcIn0sYy5vc2diMzY9e3Rvd2dzODQ6XCI0NDYuNDQ4LC0xMjUuMTU3LDU0Mi4wNjAsMC4xNTAyLDAuMjQ3MCwwLjg0MjEsLTIwLjQ4OTRcIixlbGxpcHNlOlwiYWlyeVwiLGRhdHVtTmFtZTpcIkFpcnkgMTgzMFwifSxjLnNfanRzaz17dG93Z3M4NDpcIjU4OSw3Niw0ODBcIixlbGxpcHNlOlwiYmVzc2VsXCIsZGF0dW1OYW1lOlwiUy1KVFNLIChGZXJybylcIn0sYy5iZWR1YXJhbT17dG93Z3M4NDpcIi0xMDYsLTg3LDE4OFwiLGVsbGlwc2U6XCJjbHJrODBcIixkYXR1bU5hbWU6XCJCZWR1YXJhbVwifSxjLmd1bnVuZ19zZWdhcmE9e3Rvd2dzODQ6XCItNDAzLDY4NCw0MVwiLGVsbGlwc2U6XCJiZXNzZWxcIixkYXR1bU5hbWU6XCJHdW51bmcgU2VnYXJhIEpha2FydGFcIn0sYy5ybmI3Mj17dG93Z3M4NDpcIjEwNi44NjksLTUyLjI5NzgsMTAzLjcyNCwtMC4zMzY1NywwLjQ1Njk1NSwtMS44NDIxOCwxXCIsZWxsaXBzZTpcImludGxcIixkYXR1bU5hbWU6XCJSZXNlYXUgTmF0aW9uYWwgQmVsZ2UgMTk3MlwifX0se31dLDI2OltmdW5jdGlvbihhLGIsYyl7Yy5NRVJJVD17YTo2Mzc4MTM3LHJmOjI5OC4yNTcsZWxsaXBzZU5hbWU6XCJNRVJJVCAxOTgzXCJ9LGMuU0dTODU9e2E6NjM3ODEzNixyZjoyOTguMjU3LGVsbGlwc2VOYW1lOlwiU292aWV0IEdlb2RldGljIFN5c3RlbSA4NVwifSxjLkdSUzgwPXthOjYzNzgxMzcscmY6Mjk4LjI1NzIyMjEwMSxlbGxpcHNlTmFtZTpcIkdSUyAxOTgwKElVR0csIDE5ODApXCJ9LGMuSUFVNzY9e2E6NjM3ODE0MCxyZjoyOTguMjU3LGVsbGlwc2VOYW1lOlwiSUFVIDE5NzZcIn0sYy5haXJ5PXthOjYzNzc1NjMuMzk2LGI6NjM1NjI1Ni45MSxlbGxpcHNlTmFtZTpcIkFpcnkgMTgzMFwifSxjLkFQTDQ9e2E6NjM3ODEzNyxyZjoyOTguMjUsZWxsaXBzZU5hbWU6XCJBcHBsLiBQaHlzaWNzLiAxOTY1XCJ9LGMuTldMOUQ9e2E6NjM3ODE0NSxyZjoyOTguMjUsZWxsaXBzZU5hbWU6XCJOYXZhbCBXZWFwb25zIExhYi4sIDE5NjVcIn0sYy5tb2RfYWlyeT17YTo2Mzc3MzQwLjE4OSxiOjYzNTYwMzQuNDQ2LGVsbGlwc2VOYW1lOlwiTW9kaWZpZWQgQWlyeVwifSxjLmFuZHJhZT17YTo2Mzc3MTA0LjQzLHJmOjMwMCxlbGxpcHNlTmFtZTpcIkFuZHJhZSAxODc2IChEZW4uLCBJY2xuZC4pXCJ9LGMuYXVzdF9TQT17YTo2Mzc4MTYwLHJmOjI5OC4yNSxlbGxpcHNlTmFtZTpcIkF1c3RyYWxpYW4gTmF0bCAmIFMuIEFtZXIuIDE5NjlcIn0sYy5HUlM2Nz17YTo2Mzc4MTYwLHJmOjI5OC4yNDcxNjc0MjcsZWxsaXBzZU5hbWU6XCJHUlMgNjcoSVVHRyAxOTY3KVwifSxjLmJlc3NlbD17YTo2Mzc3Mzk3LjE1NSxyZjoyOTkuMTUyODEyOCxlbGxpcHNlTmFtZTpcIkJlc3NlbCAxODQxXCJ9LGMuYmVzc19uYW09e2E6NjM3NzQ4My44NjUscmY6Mjk5LjE1MjgxMjgsZWxsaXBzZU5hbWU6XCJCZXNzZWwgMTg0MSAoTmFtaWJpYSlcIn0sYy5jbHJrNjY9e2E6NjM3ODIwNi40LGI6NjM1NjU4My44LGVsbGlwc2VOYW1lOlwiQ2xhcmtlIDE4NjZcIn0sYy5jbHJrODA9e2E6NjM3ODI0OS4xNDUscmY6MjkzLjQ2NjMsZWxsaXBzZU5hbWU6XCJDbGFya2UgMTg4MCBtb2QuXCJ9LGMuY2xyazU4PXthOjYzNzgyOTMuNjQ1MjA4NzU5LHJmOjI5NC4yNjA2NzYzNjkyNjU0LGVsbGlwc2VOYW1lOlwiQ2xhcmtlIDE4NThcIn0sYy5DUE09e2E6NjM3NTczOC43LHJmOjMzNC4yOSxlbGxpcHNlTmFtZTpcIkNvbW0uIGRlcyBQb2lkcyBldCBNZXN1cmVzIDE3OTlcIn0sYy5kZWxtYnI9e2E6NjM3NjQyOCxyZjozMTEuNSxlbGxpcHNlTmFtZTpcIkRlbGFtYnJlIDE4MTAgKEJlbGdpdW0pXCJ9LGMuZW5nZWxpcz17YTo2Mzc4MTM2LjA1LHJmOjI5OC4yNTY2LGVsbGlwc2VOYW1lOlwiRW5nZWxpcyAxOTg1XCJ9LGMuZXZyc3QzMD17YTo2Mzc3Mjc2LjM0NSxyZjozMDAuODAxNyxlbGxpcHNlTmFtZTpcIkV2ZXJlc3QgMTgzMFwifSxjLmV2cnN0NDg9e2E6NjM3NzMwNC4wNjMscmY6MzAwLjgwMTcsZWxsaXBzZU5hbWU6XCJFdmVyZXN0IDE5NDhcIn0sYy5ldnJzdDU2PXthOjYzNzczMDEuMjQzLHJmOjMwMC44MDE3LGVsbGlwc2VOYW1lOlwiRXZlcmVzdCAxOTU2XCJ9LGMuZXZyc3Q2OT17YTo2Mzc3Mjk1LjY2NCxyZjozMDAuODAxNyxlbGxpcHNlTmFtZTpcIkV2ZXJlc3QgMTk2OVwifSxjLmV2cnN0U1M9e2E6NjM3NzI5OC41NTYscmY6MzAwLjgwMTcsZWxsaXBzZU5hbWU6XCJFdmVyZXN0IChTYWJhaCAmIFNhcmF3YWspXCJ9LGMuZnNjaHI2MD17YTo2Mzc4MTY2LHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiRmlzY2hlciAoTWVyY3VyeSBEYXR1bSkgMTk2MFwifSxjLmZzY2hyNjBtPXthOjYzNzgxNTUscmY6Mjk4LjMsZWxsaXBzZU5hbWU6XCJGaXNjaGVyIDE5NjBcIn0sYy5mc2NocjY4PXthOjYzNzgxNTAscmY6Mjk4LjMsZWxsaXBzZU5hbWU6XCJGaXNjaGVyIDE5NjhcIn0sYy5oZWxtZXJ0PXthOjYzNzgyMDAscmY6Mjk4LjMsZWxsaXBzZU5hbWU6XCJIZWxtZXJ0IDE5MDZcIn0sYy5ob3VnaD17YTo2Mzc4MjcwLHJmOjI5NyxlbGxpcHNlTmFtZTpcIkhvdWdoXCJ9LGMuaW50bD17YTo2Mzc4Mzg4LHJmOjI5NyxlbGxpcHNlTmFtZTpcIkludGVybmF0aW9uYWwgMTkwOSAoSGF5Zm9yZClcIn0sYy5rYXVsYT17YTo2Mzc4MTYzLHJmOjI5OC4yNCxlbGxpcHNlTmFtZTpcIkthdWxhIDE5NjFcIn0sYy5sZXJjaD17YTo2Mzc4MTM5LHJmOjI5OC4yNTcsZWxsaXBzZU5hbWU6XCJMZXJjaCAxOTc5XCJ9LGMubXBydHM9e2E6NjM5NzMwMCxyZjoxOTEsZWxsaXBzZU5hbWU6XCJNYXVwZXJ0aXVzIDE3MzhcIn0sYy5uZXdfaW50bD17YTo2Mzc4MTU3LjUsYjo2MzU2NzcyLjIsZWxsaXBzZU5hbWU6XCJOZXcgSW50ZXJuYXRpb25hbCAxOTY3XCJ9LGMucGxlc3Npcz17YTo2Mzc2NTIzLHJmOjYzNTU4NjMsZWxsaXBzZU5hbWU6XCJQbGVzc2lzIDE4MTcgKEZyYW5jZSlcIn0sYy5rcmFzcz17YTo2Mzc4MjQ1LHJmOjI5OC4zLGVsbGlwc2VOYW1lOlwiS3Jhc3NvdnNreSwgMTk0MlwifSxjLlNFYXNpYT17YTo2Mzc4MTU1LGI6NjM1Njc3My4zMjA1LGVsbGlwc2VOYW1lOlwiU291dGhlYXN0IEFzaWFcIn0sYy53YWxiZWNrPXthOjYzNzY4OTYsYjo2MzU1ODM0Ljg0NjcsZWxsaXBzZU5hbWU6XCJXYWxiZWNrXCJ9LGMuV0dTNjA9e2E6NjM3ODE2NSxyZjoyOTguMyxlbGxpcHNlTmFtZTpcIldHUyA2MFwifSxjLldHUzY2PXthOjYzNzgxNDUscmY6Mjk4LjI1LGVsbGlwc2VOYW1lOlwiV0dTIDY2XCJ9LGMuV0dTNz17YTo2Mzc4MTM1LHJmOjI5OC4yNixlbGxpcHNlTmFtZTpcIldHUyA3MlwifSxjLldHUzg0PXthOjYzNzgxMzcscmY6Mjk4LjI1NzIyMzU2MyxlbGxpcHNlTmFtZTpcIldHUyA4NFwifSxjLnNwaGVyZT17YTo2MzcwOTk3LGI6NjM3MDk5NyxlbGxpcHNlTmFtZTpcIk5vcm1hbCBTcGhlcmUgKHI9NjM3MDk5NylcIn19LHt9XSwyNzpbZnVuY3Rpb24oYSxiLGMpe2MuZ3JlZW53aWNoPTAsYy5saXNib249LTkuMTMxOTA2MTExMTExLGMucGFyaXM9Mi4zMzcyMjkxNjY2NjcsYy5ib2dvdGE9LTc0LjA4MDkxNjY2NjY2NyxjLm1hZHJpZD0tMy42ODc5Mzg4ODg4ODksYy5yb21lPTEyLjQ1MjMzMzMzMzMzMyxjLmJlcm49Ny40Mzk1ODMzMzMzMzMsYy5qYWthcnRhPTEwNi44MDc3MTk0NDQ0NDQsYy5mZXJybz0tMTcuNjY2NjY2NjY2NjY3LGMuYnJ1c3NlbHM9NC4zNjc5NzUsYy5zdG9ja2hvbG09MTguMDU4Mjc3Nzc3Nzc4LGMuYXRoZW5zPTIzLjcxNjMzNzUsYy5vc2xvPTEwLjcyMjkxNjY2NjY2N30se31dLDI4OltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe3ZhciBkO3JldHVybiBBcnJheS5pc0FycmF5KGMpPyhkPWYoYSxiLGMpLDM9PT1jLmxlbmd0aD9bZC54LGQueSxkLnpdOltkLngsZC55XSk6ZihhLGIsYyl9ZnVuY3Rpb24gZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGU/YTphLm9Qcm9qP2Eub1Byb2o6ZShhKX1mdW5jdGlvbiBwcm9qNChhLGIsZSl7YT1kKGEpO3ZhciBmLGg9ITE7cmV0dXJuXCJ1bmRlZmluZWRcIj09dHlwZW9mIGI/KGI9YSxhPWcsaD0hMCk6KFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLnh8fEFycmF5LmlzQXJyYXkoYikpJiYoZT1iLGI9YSxhPWcsaD0hMCksYj1kKGIpLGU/YyhhLGIsZSk6KGY9e2ZvcndhcmQ6ZnVuY3Rpb24oZCl7cmV0dXJuIGMoYSxiLGQpfSxpbnZlcnNlOmZ1bmN0aW9uKGQpe3JldHVybiBjKGIsYSxkKX19LGgmJihmLm9Qcm9qPWIpLGYpfXZhciBlPWEoXCIuL1Byb2pcIiksZj1hKFwiLi90cmFuc2Zvcm1cIiksZz1lKFwiV0dTODRcIik7Yi5leHBvcnRzPXByb2o0fSx7XCIuL1Byb2pcIjoyLFwiLi90cmFuc2Zvcm1cIjo2NH1dLDI5OltmdW5jdGlvbihhLGIpe3ZhciBjPU1hdGguUEkvMixkPTEsZT0yLGY9MyxnPTQsaD01LGk9NDg0ODEzNjgxMTA5NTM2ZS0yMCxqPTEuMDAyNixrPS4zODI2ODM0MzIzNjUwODk4LGw9ZnVuY3Rpb24oYSl7aWYoISh0aGlzIGluc3RhbmNlb2YgbCkpcmV0dXJuIG5ldyBsKGEpO2lmKHRoaXMuZGF0dW1fdHlwZT1nLGEpe2lmKGEuZGF0dW1Db2RlJiZcIm5vbmVcIj09PWEuZGF0dW1Db2RlJiYodGhpcy5kYXR1bV90eXBlPWgpLGEuZGF0dW1fcGFyYW1zKXtmb3IodmFyIGI9MDtiPGEuZGF0dW1fcGFyYW1zLmxlbmd0aDtiKyspYS5kYXR1bV9wYXJhbXNbYl09cGFyc2VGbG9hdChhLmRhdHVtX3BhcmFtc1tiXSk7KDAhPT1hLmRhdHVtX3BhcmFtc1swXXx8MCE9PWEuZGF0dW1fcGFyYW1zWzFdfHwwIT09YS5kYXR1bV9wYXJhbXNbMl0pJiYodGhpcy5kYXR1bV90eXBlPWQpLGEuZGF0dW1fcGFyYW1zLmxlbmd0aD4zJiYoMCE9PWEuZGF0dW1fcGFyYW1zWzNdfHwwIT09YS5kYXR1bV9wYXJhbXNbNF18fDAhPT1hLmRhdHVtX3BhcmFtc1s1XXx8MCE9PWEuZGF0dW1fcGFyYW1zWzZdKSYmKHRoaXMuZGF0dW1fdHlwZT1lLGEuZGF0dW1fcGFyYW1zWzNdKj1pLGEuZGF0dW1fcGFyYW1zWzRdKj1pLGEuZGF0dW1fcGFyYW1zWzVdKj1pLGEuZGF0dW1fcGFyYW1zWzZdPWEuZGF0dW1fcGFyYW1zWzZdLzFlNisxKX10aGlzLmRhdHVtX3R5cGU9YS5ncmlkcz9mOnRoaXMuZGF0dW1fdHlwZSx0aGlzLmE9YS5hLHRoaXMuYj1hLmIsdGhpcy5lcz1hLmVzLHRoaXMuZXAyPWEuZXAyLHRoaXMuZGF0dW1fcGFyYW1zPWEuZGF0dW1fcGFyYW1zLHRoaXMuZGF0dW1fdHlwZT09PWYmJih0aGlzLmdyaWRzPWEuZ3JpZHMpfX07bC5wcm90b3R5cGU9e2NvbXBhcmVfZGF0dW1zOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmRhdHVtX3R5cGUhPT1hLmRhdHVtX3R5cGU/ITE6dGhpcy5hIT09YS5hfHxNYXRoLmFicyh0aGlzLmVzLWEuZXMpPjVlLTExPyExOnRoaXMuZGF0dW1fdHlwZT09PWQ/dGhpcy5kYXR1bV9wYXJhbXNbMF09PT1hLmRhdHVtX3BhcmFtc1swXSYmdGhpcy5kYXR1bV9wYXJhbXNbMV09PT1hLmRhdHVtX3BhcmFtc1sxXSYmdGhpcy5kYXR1bV9wYXJhbXNbMl09PT1hLmRhdHVtX3BhcmFtc1syXTp0aGlzLmRhdHVtX3R5cGU9PT1lP3RoaXMuZGF0dW1fcGFyYW1zWzBdPT09YS5kYXR1bV9wYXJhbXNbMF0mJnRoaXMuZGF0dW1fcGFyYW1zWzFdPT09YS5kYXR1bV9wYXJhbXNbMV0mJnRoaXMuZGF0dW1fcGFyYW1zWzJdPT09YS5kYXR1bV9wYXJhbXNbMl0mJnRoaXMuZGF0dW1fcGFyYW1zWzNdPT09YS5kYXR1bV9wYXJhbXNbM10mJnRoaXMuZGF0dW1fcGFyYW1zWzRdPT09YS5kYXR1bV9wYXJhbXNbNF0mJnRoaXMuZGF0dW1fcGFyYW1zWzVdPT09YS5kYXR1bV9wYXJhbXNbNV0mJnRoaXMuZGF0dW1fcGFyYW1zWzZdPT09YS5kYXR1bV9wYXJhbXNbNl06dGhpcy5kYXR1bV90eXBlPT09Znx8YS5kYXR1bV90eXBlPT09Zj90aGlzLm5hZGdyaWRzPT09YS5uYWRncmlkczohMH0sZ2VvZGV0aWNfdG9fZ2VvY2VudHJpYzpmdW5jdGlvbihhKXt2YXIgYixkLGUsZixnLGgsaSxqPWEueCxrPWEueSxsPWEuej9hLno6MCxtPTA7aWYoLWM+ayYmaz4tMS4wMDEqYylrPS1jO2Vsc2UgaWYoaz5jJiYxLjAwMSpjPmspaz1jO2Vsc2UgaWYoLWM+a3x8az5jKXJldHVybiBudWxsO3JldHVybiBqPk1hdGguUEkmJihqLT0yKk1hdGguUEkpLGc9TWF0aC5zaW4oayksaT1NYXRoLmNvcyhrKSxoPWcqZyxmPXRoaXMuYS9NYXRoLnNxcnQoMS10aGlzLmVzKmgpLGI9KGYrbCkqaSpNYXRoLmNvcyhqKSxkPShmK2wpKmkqTWF0aC5zaW4oaiksZT0oZiooMS10aGlzLmVzKStsKSpnLGEueD1iLGEueT1kLGEuej1lLG19LGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWM6ZnVuY3Rpb24oYSl7dmFyIGIsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0PTFlLTEyLHU9dCp0LHY9MzAsdz1hLngseD1hLnkseT1hLno/YS56OjA7aWYobz0hMSxiPU1hdGguc3FydCh3KncreCp4KSxkPU1hdGguc3FydCh3KncreCp4K3kqeSksYi90aGlzLmE8dCl7aWYobz0hMCxxPTAsZC90aGlzLmE8dClyZXR1cm4gcj1jLHZvaWQocz0tdGhpcy5iKX1lbHNlIHE9TWF0aC5hdGFuMih4LHcpO2U9eS9kLGY9Yi9kLGc9MS9NYXRoLnNxcnQoMS10aGlzLmVzKigyLXRoaXMuZXMpKmYqZiksaj1mKigxLXRoaXMuZXMpKmcsaz1lKmcscD0wO2RvIHArKyxpPXRoaXMuYS9NYXRoLnNxcnQoMS10aGlzLmVzKmsqaykscz1iKmoreSprLWkqKDEtdGhpcy5lcyprKmspLGg9dGhpcy5lcyppLyhpK3MpLGc9MS9NYXRoLnNxcnQoMS1oKigyLWgpKmYqZiksbD1mKigxLWgpKmcsbT1lKmcsbj1tKmotbCprLGo9bCxrPW07d2hpbGUobipuPnUmJnY+cCk7cmV0dXJuIHI9TWF0aC5hdGFuKG0vTWF0aC5hYnMobCkpLGEueD1xLGEueT1yLGEuej1zLGF9LGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWNfbm9uaXRlcjpmdW5jdGlvbihhKXt2YXIgYixkLGUsZixnLGgsaSxsLG0sbixvLHAscSxyLHMsdCx1LHY9YS54LHc9YS55LHg9YS56P2EuejowO2lmKHY9cGFyc2VGbG9hdCh2KSx3PXBhcnNlRmxvYXQodykseD1wYXJzZUZsb2F0KHgpLHU9ITEsMCE9PXYpYj1NYXRoLmF0YW4yKHcsdik7ZWxzZSBpZih3PjApYj1jO2Vsc2UgaWYoMD53KWI9LWM7ZWxzZSBpZih1PSEwLGI9MCx4PjApZD1jO2Vsc2V7aWYoISgwPngpKXJldHVybiBkPWMsdm9pZChlPS10aGlzLmIpO2Q9LWN9cmV0dXJuIGc9dip2K3cqdyxmPU1hdGguc3FydChnKSxoPXgqaixsPU1hdGguc3FydChoKmgrZyksbj1oL2wscD1mL2wsbz1uKm4qbixpPXgrdGhpcy5iKnRoaXMuZXAyKm8sdD1mLXRoaXMuYSp0aGlzLmVzKnAqcCpwLG09TWF0aC5zcXJ0KGkqaSt0KnQpLHE9aS9tLHI9dC9tLHM9dGhpcy5hL01hdGguc3FydCgxLXRoaXMuZXMqcSpxKSxlPXI+PWs/Zi9yLXM6LWs+PXI/Zi8tci1zOngvcStzKih0aGlzLmVzLTEpLHU9PT0hMSYmKGQ9TWF0aC5hdGFuKHEvcikpLGEueD1iLGEueT1kLGEuej1lLGF9LGdlb2NlbnRyaWNfdG9fd2dzODQ6ZnVuY3Rpb24oYSl7aWYodGhpcy5kYXR1bV90eXBlPT09ZClhLngrPXRoaXMuZGF0dW1fcGFyYW1zWzBdLGEueSs9dGhpcy5kYXR1bV9wYXJhbXNbMV0sYS56Kz10aGlzLmRhdHVtX3BhcmFtc1syXTtlbHNlIGlmKHRoaXMuZGF0dW1fdHlwZT09PWUpe3ZhciBiPXRoaXMuZGF0dW1fcGFyYW1zWzBdLGM9dGhpcy5kYXR1bV9wYXJhbXNbMV0sZj10aGlzLmRhdHVtX3BhcmFtc1syXSxnPXRoaXMuZGF0dW1fcGFyYW1zWzNdLGg9dGhpcy5kYXR1bV9wYXJhbXNbNF0saT10aGlzLmRhdHVtX3BhcmFtc1s1XSxqPXRoaXMuZGF0dW1fcGFyYW1zWzZdLGs9aiooYS54LWkqYS55K2gqYS56KStiLGw9aiooaSphLngrYS55LWcqYS56KStjLG09aiooLWgqYS54K2cqYS55K2EueikrZjthLng9ayxhLnk9bCxhLno9bX19LGdlb2NlbnRyaWNfZnJvbV93Z3M4NDpmdW5jdGlvbihhKXtpZih0aGlzLmRhdHVtX3R5cGU9PT1kKWEueC09dGhpcy5kYXR1bV9wYXJhbXNbMF0sYS55LT10aGlzLmRhdHVtX3BhcmFtc1sxXSxhLnotPXRoaXMuZGF0dW1fcGFyYW1zWzJdO2Vsc2UgaWYodGhpcy5kYXR1bV90eXBlPT09ZSl7dmFyIGI9dGhpcy5kYXR1bV9wYXJhbXNbMF0sYz10aGlzLmRhdHVtX3BhcmFtc1sxXSxmPXRoaXMuZGF0dW1fcGFyYW1zWzJdLGc9dGhpcy5kYXR1bV9wYXJhbXNbM10saD10aGlzLmRhdHVtX3BhcmFtc1s0XSxpPXRoaXMuZGF0dW1fcGFyYW1zWzVdLGo9dGhpcy5kYXR1bV9wYXJhbXNbNl0saz0oYS54LWIpL2osbD0oYS55LWMpL2osbT0oYS56LWYpL2o7YS54PWsraSpsLWgqbSxhLnk9LWkqaytsK2cqbSxhLno9aCprLWcqbCttfX19LGIuZXhwb3J0cz1sfSx7fV0sMzA6W2Z1bmN0aW9uKGEsYil7dmFyIGM9MSxkPTIsZT0zLGY9NSxnPTYzNzgxMzcsaD0uMDA2Njk0Mzc5OTkwMTQxMzE2O2IuZXhwb3J0cz1mdW5jdGlvbihhLGIsaSl7ZnVuY3Rpb24gaihhKXtyZXR1cm4gYT09PWN8fGE9PT1kfXZhciBrLGwsbTtpZihhLmNvbXBhcmVfZGF0dW1zKGIpKXJldHVybiBpO2lmKGEuZGF0dW1fdHlwZT09PWZ8fGIuZGF0dW1fdHlwZT09PWYpcmV0dXJuIGk7dmFyIG49YS5hLG89YS5lcyxwPWIuYSxxPWIuZXMscj1hLmRhdHVtX3R5cGU7aWYocj09PWUpaWYoMD09PXRoaXMuYXBwbHlfZ3JpZHNoaWZ0KGEsMCxpKSlhLmE9ZyxhLmVzPWg7ZWxzZXtpZighYS5kYXR1bV9wYXJhbXMpcmV0dXJuIGEuYT1uLGEuZXM9YS5lcyxpO2ZvcihrPTEsbD0wLG09YS5kYXR1bV9wYXJhbXMubGVuZ3RoO20+bDtsKyspayo9YS5kYXR1bV9wYXJhbXNbbF07aWYoMD09PWspcmV0dXJuIGEuYT1uLGEuZXM9YS5lcyxpO3I9YS5kYXR1bV9wYXJhbXMubGVuZ3RoPjM/ZDpjfXJldHVybiBiLmRhdHVtX3R5cGU9PT1lJiYoYi5hPWcsYi5lcz1oKSwoYS5lcyE9PWIuZXN8fGEuYSE9PWIuYXx8aihyKXx8aihiLmRhdHVtX3R5cGUpKSYmKGEuZ2VvZGV0aWNfdG9fZ2VvY2VudHJpYyhpKSxqKGEuZGF0dW1fdHlwZSkmJmEuZ2VvY2VudHJpY190b193Z3M4NChpKSxqKGIuZGF0dW1fdHlwZSkmJmIuZ2VvY2VudHJpY19mcm9tX3dnczg0KGkpLGIuZ2VvY2VudHJpY190b19nZW9kZXRpYyhpKSksYi5kYXR1bV90eXBlPT09ZSYmdGhpcy5hcHBseV9ncmlkc2hpZnQoYiwxLGkpLGEuYT1uLGEuZXM9byxiLmE9cCxiLmVzPXEsaX19LHt9XSwzMTpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3ZhciBiPXRoaXM7aWYoMj09PWFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPWFyZ3VtZW50c1sxXTtjW2FdPVwic3RyaW5nXCI9PXR5cGVvZiBkP1wiK1wiPT09ZFswXT9lKGFyZ3VtZW50c1sxXSk6Zihhcmd1bWVudHNbMV0pOmR9ZWxzZSBpZigxPT09YXJndW1lbnRzLmxlbmd0aCl7aWYoQXJyYXkuaXNBcnJheShhKSlyZXR1cm4gYS5tYXAoZnVuY3Rpb24oYSl7QXJyYXkuaXNBcnJheShhKT9jLmFwcGx5KGIsYSk6YyhhKX0pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihhIGluIGMpcmV0dXJuIGNbYV19ZWxzZVwiRVBTR1wiaW4gYT9jW1wiRVBTRzpcIithLkVQU0ddPWE6XCJFU1JJXCJpbiBhP2NbXCJFU1JJOlwiK2EuRVNSSV09YTpcIklBVTIwMDBcImluIGE/Y1tcIklBVTIwMDA6XCIrYS5JQVUyMDAwXT1hOmNvbnNvbGUubG9nKGEpO3JldHVybn19dmFyIGQ9YShcIi4vZ2xvYmFsXCIpLGU9YShcIi4vcHJvalN0cmluZ1wiKSxmPWEoXCIuL3drdFwiKTtkKGMpLGIuZXhwb3J0cz1jfSx7XCIuL2dsb2JhbFwiOjM0LFwiLi9wcm9qU3RyaW5nXCI6MzcsXCIuL3drdFwiOjY1fV0sMzI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9YShcIi4vY29uc3RhbnRzL0RhdHVtXCIpLGQ9YShcIi4vY29uc3RhbnRzL0VsbGlwc29pZFwiKSxlPWEoXCIuL2V4dGVuZFwiKSxmPWEoXCIuL2RhdHVtXCIpLGc9MWUtMTAsaD0uMTY2NjY2NjY2NjY2NjY2NjYsaT0uMDQ3MjIyMjIyMjIyMjIyMjIsaj0uMDIyMTU2MDg0NjU2MDg0NjU1O2IuZXhwb3J0cz1mdW5jdGlvbihhKXtpZihhLmRhdHVtQ29kZSYmXCJub25lXCIhPT1hLmRhdHVtQ29kZSl7dmFyIGI9Y1thLmRhdHVtQ29kZV07YiYmKGEuZGF0dW1fcGFyYW1zPWIudG93Z3M4ND9iLnRvd2dzODQuc3BsaXQoXCIsXCIpOm51bGwsYS5lbGxwcz1iLmVsbGlwc2UsYS5kYXR1bU5hbWU9Yi5kYXR1bU5hbWU/Yi5kYXR1bU5hbWU6YS5kYXR1bUNvZGUpfWlmKCFhLmEpe3ZhciBrPWRbYS5lbGxwc10/ZFthLmVsbHBzXTpkLldHUzg0O2UoYSxrKX1yZXR1cm4gYS5yZiYmIWEuYiYmKGEuYj0oMS0xL2EucmYpKmEuYSksKDA9PT1hLnJmfHxNYXRoLmFicyhhLmEtYS5iKTxnKSYmKGEuc3BoZXJlPSEwLGEuYj1hLmEpLGEuYTI9YS5hKmEuYSxhLmIyPWEuYiphLmIsYS5lcz0oYS5hMi1hLmIyKS9hLmEyLGEuZT1NYXRoLnNxcnQoYS5lcyksYS5SX0EmJihhLmEqPTEtYS5lcyooaCthLmVzKihpK2EuZXMqaikpLGEuYTI9YS5hKmEuYSxhLmIyPWEuYiphLmIsYS5lcz0wKSxhLmVwMj0oYS5hMi1hLmIyKS9hLmIyLGEuazB8fChhLmswPTEpLGEuYXhpc3x8KGEuYXhpcz1cImVudVwiKSxhLmRhdHVtfHwoYS5kYXR1bT1mKGEpKSxhfX0se1wiLi9jb25zdGFudHMvRGF0dW1cIjoyNSxcIi4vY29uc3RhbnRzL0VsbGlwc29pZFwiOjI2LFwiLi9kYXR1bVwiOjI5LFwiLi9leHRlbmRcIjozM31dLDMzOltmdW5jdGlvbihhLGIpe2IuZXhwb3J0cz1mdW5jdGlvbihhLGIpe2E9YXx8e307dmFyIGMsZDtpZighYilyZXR1cm4gYTtmb3IoZCBpbiBiKWM9YltkXSx2b2lkIDAhPT1jJiYoYVtkXT1jKTtyZXR1cm4gYX19LHt9XSwzNDpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7YShcIkVQU0c6NDMyNlwiLFwiK3RpdGxlPVdHUyA4NCAobG9uZy9sYXQpICtwcm9qPWxvbmdsYXQgK2VsbHBzPVdHUzg0ICtkYXR1bT1XR1M4NCArdW5pdHM9ZGVncmVlc1wiKSxhKFwiRVBTRzo0MjY5XCIsXCIrdGl0bGU9TkFEODMgKGxvbmcvbGF0KSArcHJvaj1sb25nbGF0ICthPTYzNzgxMzcuMCArYj02MzU2NzUyLjMxNDE0MDM2ICtlbGxwcz1HUlM4MCArZGF0dW09TkFEODMgK3VuaXRzPWRlZ3JlZXNcIiksYShcIkVQU0c6Mzg1N1wiLFwiK3RpdGxlPVdHUyA4NCAvIFBzZXVkby1NZXJjYXRvciArcHJvaj1tZXJjICthPTYzNzgxMzcgK2I9NjM3ODEzNyArbGF0X3RzPTAuMCArbG9uXzA9MC4wICt4XzA9MC4wICt5XzA9MCAraz0xLjAgK3VuaXRzPW0gK25hZGdyaWRzPUBudWxsICtub19kZWZzXCIpLGEuV0dTODQ9YVtcIkVQU0c6NDMyNlwiXSxhW1wiRVBTRzozNzg1XCJdPWFbXCJFUFNHOjM4NTdcIl0sYS5HT09HTEU9YVtcIkVQU0c6Mzg1N1wiXSxhW1wiRVBTRzo5MDA5MTNcIl09YVtcIkVQU0c6Mzg1N1wiXSxhW1wiRVBTRzoxMDIxMTNcIl09YVtcIkVQU0c6Mzg1N1wiXX19LHt9XSwzNTpbZnVuY3Rpb24oYSxiKXt2YXIgcHJvajQ9YShcIi4vY29yZVwiKTtwcm9qNC5kZWZhdWx0RGF0dW09XCJXR1M4NFwiLHByb2o0LlByb2o9YShcIi4vUHJvalwiKSxwcm9qNC5XR1M4ND1uZXcgcHJvajQuUHJvaihcIldHUzg0XCIpLHByb2o0LlBvaW50PWEoXCIuL1BvaW50XCIpLHByb2o0LnRvUG9pbnQ9YShcIi4vY29tbW9uL3RvUG9pbnRcIikscHJvajQuZGVmcz1hKFwiLi9kZWZzXCIpLHByb2o0LnRyYW5zZm9ybT1hKFwiLi90cmFuc2Zvcm1cIikscHJvajQubWdycz1hKFwibWdyc1wiKSxwcm9qNC52ZXJzaW9uPWEoXCIuLi9wYWNrYWdlLmpzb25cIikudmVyc2lvbixhKFwiLi9pbmNsdWRlZFByb2plY3Rpb25zXCIpKHByb2o0KSxiLmV4cG9ydHM9cHJvajR9LHtcIi4uL3BhY2thZ2UuanNvblwiOjY3LFwiLi9Qb2ludFwiOjEsXCIuL1Byb2pcIjoyLFwiLi9jb21tb24vdG9Qb2ludFwiOjIzLFwiLi9jb3JlXCI6MjgsXCIuL2RlZnNcIjozMSxcIi4vaW5jbHVkZWRQcm9qZWN0aW9uc1wiOlwiZ1dVUE5XXCIsXCIuL3RyYW5zZm9ybVwiOjY0LG1ncnM6NjZ9XSwzNjpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGEgaW4gaH1mdW5jdGlvbiBlKGEpe3ZhciBiPVtcIkdFT0dDU1wiLFwiR0VPQ0NTXCIsXCJQUk9KQ1NcIixcIkxPQ0FMX0NTXCJdO3JldHVybiBiLnJlZHVjZShmdW5jdGlvbihiLGMpe3JldHVybiBiKzErYS5pbmRleE9mKGMpfSwwKX1mdW5jdGlvbiBmKGEpe3JldHVyblwiK1wiPT09YVswXX1mdW5jdGlvbiBnKGEpe3JldHVybiBjKGEpP2QoYSk/aFthXTplKGEpP2koYSk6ZihhKT9qKGEpOnZvaWQgMDphfXZhciBoPWEoXCIuL2RlZnNcIiksaT1hKFwiLi93a3RcIiksaj1hKFwiLi9wcm9qU3RyaW5nXCIpO2IuZXhwb3J0cz1nfSx7XCIuL2RlZnNcIjozMSxcIi4vcHJvalN0cmluZ1wiOjM3LFwiLi93a3RcIjo2NX1dLDM3OltmdW5jdGlvbihhLGIpe3ZhciBjPS4wMTc0NTMyOTI1MTk5NDMyOTUsZD1hKFwiLi9jb25zdGFudHMvUHJpbWVNZXJpZGlhblwiKTtiLmV4cG9ydHM9ZnVuY3Rpb24oYSl7dmFyIGI9e30sZT17fTthLnNwbGl0KFwiK1wiKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudHJpbSgpfSkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiBhfSkuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYj1hLnNwbGl0KFwiPVwiKTtiLnB1c2goITApLGVbYlswXS50b0xvd2VyQ2FzZSgpXT1iWzFdfSk7dmFyIGYsZyxoLGk9e3Byb2o6XCJwcm9qTmFtZVwiLGRhdHVtOlwiZGF0dW1Db2RlXCIscmY6ZnVuY3Rpb24oYSl7Yi5yZj1wYXJzZUZsb2F0KGEsMTApfSxsYXRfMDpmdW5jdGlvbihhKXtiLmxhdDA9YSpjfSxsYXRfMTpmdW5jdGlvbihhKXtiLmxhdDE9YSpjfSxsYXRfMjpmdW5jdGlvbihhKXtiLmxhdDI9YSpjfSxsYXRfdHM6ZnVuY3Rpb24oYSl7Yi5sYXRfdHM9YSpjfSxsb25fMDpmdW5jdGlvbihhKXtiLmxvbmcwPWEqY30sbG9uXzE6ZnVuY3Rpb24oYSl7Yi5sb25nMT1hKmN9LGxvbl8yOmZ1bmN0aW9uKGEpe2IubG9uZzI9YSpjfSxhbHBoYTpmdW5jdGlvbihhKXtiLmFscGhhPXBhcnNlRmxvYXQoYSkqY30sbG9uYzpmdW5jdGlvbihhKXtiLmxvbmdjPWEqY30seF8wOmZ1bmN0aW9uKGEpe2IueDA9cGFyc2VGbG9hdChhLDEwKX0seV8wOmZ1bmN0aW9uKGEpe2IueTA9cGFyc2VGbG9hdChhLDEwKX0sa18wOmZ1bmN0aW9uKGEpe2IuazA9cGFyc2VGbG9hdChhLDEwKX0sazpmdW5jdGlvbihhKXtiLmswPXBhcnNlRmxvYXQoYSwxMCl9LHJfYTpmdW5jdGlvbigpe2IuUl9BPSEwfSx6b25lOmZ1bmN0aW9uKGEpe2Iuem9uZT1wYXJzZUludChhLDEwKX0sc291dGg6ZnVuY3Rpb24oKXtiLnV0bVNvdXRoPSEwfSx0b3dnczg0OmZ1bmN0aW9uKGEpe2IuZGF0dW1fcGFyYW1zPWEuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gcGFyc2VGbG9hdChhLDEwKX0pfSx0b19tZXRlcjpmdW5jdGlvbihhKXtiLnRvX21ldGVyPXBhcnNlRmxvYXQoYSwxMCl9LGZyb21fZ3JlZW53aWNoOmZ1bmN0aW9uKGEpe2IuZnJvbV9ncmVlbndpY2g9YSpjfSxwbTpmdW5jdGlvbihhKXtiLmZyb21fZ3JlZW53aWNoPShkW2FdP2RbYV06cGFyc2VGbG9hdChhLDEwKSkqY30sbmFkZ3JpZHM6ZnVuY3Rpb24oYSl7XCJAbnVsbFwiPT09YT9iLmRhdHVtQ29kZT1cIm5vbmVcIjpiLm5hZGdyaWRzPWF9LGF4aXM6ZnVuY3Rpb24oYSl7dmFyIGM9XCJld25zdWRcIjszPT09YS5sZW5ndGgmJi0xIT09Yy5pbmRleE9mKGEuc3Vic3RyKDAsMSkpJiYtMSE9PWMuaW5kZXhPZihhLnN1YnN0cigxLDEpKSYmLTEhPT1jLmluZGV4T2YoYS5zdWJzdHIoMiwxKSkmJihiLmF4aXM9YSl9fTtmb3IoZiBpbiBlKWc9ZVtmXSxmIGluIGk/KGg9aVtmXSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBoP2goZyk6YltoXT1nKTpiW2ZdPWc7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0dW1Db2RlJiZcIldHUzg0XCIhPT1iLmRhdHVtQ29kZSYmKGIuZGF0dW1Db2RlPWIuZGF0dW1Db2RlLnRvTG93ZXJDYXNlKCkpLGJ9fSx7XCIuL2NvbnN0YW50cy9QcmltZU1lcmlkaWFuXCI6Mjd9XSwzODpbZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgYz1nLmxlbmd0aDtyZXR1cm4gYS5uYW1lcz8oZ1tjXT1hLGEubmFtZXMuZm9yRWFjaChmdW5jdGlvbihhKXtmW2EudG9Mb3dlckNhc2UoKV09Y30pLHRoaXMpOihjb25zb2xlLmxvZyhiKSwhMCl9dmFyIGU9W2EoXCIuL3Byb2plY3Rpb25zL21lcmNcIiksYShcIi4vcHJvamVjdGlvbnMvbG9uZ2xhdFwiKV0sZj17fSxnPVtdO2MuYWRkPWQsYy5nZXQ9ZnVuY3Rpb24oYSl7aWYoIWEpcmV0dXJuITE7dmFyIGI9YS50b0xvd2VyQ2FzZSgpO3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBmW2JdJiZnW2ZbYl1dP2dbZltiXV06dm9pZCAwfSxjLnN0YXJ0PWZ1bmN0aW9uKCl7ZS5mb3JFYWNoKGQpfX0se1wiLi9wcm9qZWN0aW9ucy9sb25nbGF0XCI6NTAsXCIuL3Byb2plY3Rpb25zL21lcmNcIjo1MX1dLDM5OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9MWUtMTAsZT1hKFwiLi4vY29tbW9uL21zZm56XCIpLGY9YShcIi4uL2NvbW1vbi9xc2ZuelwiKSxnPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxoPWEoXCIuLi9jb21tb24vYXNpbnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7TWF0aC5hYnModGhpcy5sYXQxK3RoaXMubGF0Mik8ZHx8KHRoaXMudGVtcD10aGlzLmIvdGhpcy5hLHRoaXMuZXM9MS1NYXRoLnBvdyh0aGlzLnRlbXAsMiksdGhpcy5lMz1NYXRoLnNxcnQodGhpcy5lcyksdGhpcy5zaW5fcG89TWF0aC5zaW4odGhpcy5sYXQxKSx0aGlzLmNvc19wbz1NYXRoLmNvcyh0aGlzLmxhdDEpLHRoaXMudDE9dGhpcy5zaW5fcG8sdGhpcy5jb249dGhpcy5zaW5fcG8sdGhpcy5tczE9ZSh0aGlzLmUzLHRoaXMuc2luX3BvLHRoaXMuY29zX3BvKSx0aGlzLnFzMT1mKHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMuc2luX3BvPU1hdGguc2luKHRoaXMubGF0MiksdGhpcy5jb3NfcG89TWF0aC5jb3ModGhpcy5sYXQyKSx0aGlzLnQyPXRoaXMuc2luX3BvLHRoaXMubXMyPWUodGhpcy5lMyx0aGlzLnNpbl9wbyx0aGlzLmNvc19wbyksdGhpcy5xczI9Zih0aGlzLmUzLHRoaXMuc2luX3BvLHRoaXMuY29zX3BvKSx0aGlzLnNpbl9wbz1NYXRoLnNpbih0aGlzLmxhdDApLHRoaXMuY29zX3BvPU1hdGguY29zKHRoaXMubGF0MCksdGhpcy50Mz10aGlzLnNpbl9wbyx0aGlzLnFzMD1mKHRoaXMuZTMsdGhpcy5zaW5fcG8sdGhpcy5jb3NfcG8pLHRoaXMubnMwPU1hdGguYWJzKHRoaXMubGF0MS10aGlzLmxhdDIpPmQ/KHRoaXMubXMxKnRoaXMubXMxLXRoaXMubXMyKnRoaXMubXMyKS8odGhpcy5xczItdGhpcy5xczEpOnRoaXMuY29uLHRoaXMuYz10aGlzLm1zMSp0aGlzLm1zMSt0aGlzLm5zMCp0aGlzLnFzMSx0aGlzLnJoPXRoaXMuYSpNYXRoLnNxcnQodGhpcy5jLXRoaXMubnMwKnRoaXMucXMwKS90aGlzLm5zMCl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnk7dGhpcy5zaW5fcGhpPU1hdGguc2luKGMpLHRoaXMuY29zX3BoaT1NYXRoLmNvcyhjKTt2YXIgZD1mKHRoaXMuZTMsdGhpcy5zaW5fcGhpLHRoaXMuY29zX3BoaSksZT10aGlzLmEqTWF0aC5zcXJ0KHRoaXMuYy10aGlzLm5zMCpkKS90aGlzLm5zMCxoPXRoaXMubnMwKmcoYi10aGlzLmxvbmcwKSxpPWUqTWF0aC5zaW4oaCkrdGhpcy54MCxqPXRoaXMucmgtZSpNYXRoLmNvcyhoKSt0aGlzLnkwO3JldHVybiBhLng9aSxhLnk9aixhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixoO3JldHVybiBhLngtPXRoaXMueDAsYS55PXRoaXMucmgtYS55K3RoaXMueTAsdGhpcy5uczA+PTA/KGI9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSksZD0xKTooYj0tTWF0aC5zcXJ0KGEueCphLngrYS55KmEueSksZD0tMSksZT0wLDAhPT1iJiYoZT1NYXRoLmF0YW4yKGQqYS54LGQqYS55KSksZD1iKnRoaXMubnMwL3RoaXMuYSx0aGlzLnNwaGVyZT9oPU1hdGguYXNpbigodGhpcy5jLWQqZCkvKDIqdGhpcy5uczApKTooYz0odGhpcy5jLWQqZCkvdGhpcy5uczAsaD10aGlzLnBoaTF6KHRoaXMuZTMsYykpLGY9ZyhlL3RoaXMubnMwK3RoaXMubG9uZzApLGEueD1mLGEueT1oLGF9LGMucGhpMXo9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxpLGo9aCguNSpiKTtpZihkPmEpcmV0dXJuIGo7Zm9yKHZhciBrPWEqYSxsPTE7MjU+PWw7bCsrKWlmKGM9TWF0aC5zaW4oaiksZT1NYXRoLmNvcyhqKSxmPWEqYyxnPTEtZipmLGk9LjUqZypnL2UqKGIvKDEtayktYy9nKy41L2EqTWF0aC5sb2coKDEtZikvKDErZikpKSxqKz1pLE1hdGguYWJzKGkpPD0xZS03KXJldHVybiBqO3JldHVybiBudWxsfSxjLm5hbWVzPVtcIkFsYmVyc19Db25pY19FcXVhbF9BcmVhXCIsXCJBbGJlcnNcIixcImFlYVwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL2FzaW56XCI6NixcIi4uL2NvbW1vbi9tc2ZuelwiOjE1LFwiLi4vY29tbW9uL3FzZm56XCI6MjB9XSw0MDpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxlPU1hdGguUEkvMixmPTFlLTEwLGc9YShcIi4uL2NvbW1vbi9tbGZuXCIpLGg9YShcIi4uL2NvbW1vbi9lMGZuXCIpLGk9YShcIi4uL2NvbW1vbi9lMWZuXCIpLGo9YShcIi4uL2NvbW1vbi9lMmZuXCIpLGs9YShcIi4uL2NvbW1vbi9lM2ZuXCIpLGw9YShcIi4uL2NvbW1vbi9nTlwiKSxtPWEoXCIuLi9jb21tb24vYXNpbnpcIiksbj1hKFwiLi4vY29tbW9uL2ltbGZuXCIpO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMuc2luX3AxMj1NYXRoLnNpbih0aGlzLmxhdDApLHRoaXMuY29zX3AxMj1NYXRoLmNvcyh0aGlzLmxhdDApfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxtLG4sbyxwLHEscixzLHQsdSx2LHcseCx5LHosQSxCLEMsRCxFLEYsRyxIPWEueCxJPWEueSxKPU1hdGguc2luKGEueSksSz1NYXRoLmNvcyhhLnkpLEw9ZChILXRoaXMubG9uZzApO3JldHVybiB0aGlzLnNwaGVyZT9NYXRoLmFicyh0aGlzLnNpbl9wMTItMSk8PWY/KGEueD10aGlzLngwK3RoaXMuYSooZS1JKSpNYXRoLnNpbihMKSxhLnk9dGhpcy55MC10aGlzLmEqKGUtSSkqTWF0aC5jb3MoTCksYSk6TWF0aC5hYnModGhpcy5zaW5fcDEyKzEpPD1mPyhhLng9dGhpcy54MCt0aGlzLmEqKGUrSSkqTWF0aC5zaW4oTCksYS55PXRoaXMueTArdGhpcy5hKihlK0kpKk1hdGguY29zKEwpLGEpOihCPXRoaXMuc2luX3AxMipKK3RoaXMuY29zX3AxMipLKk1hdGguY29zKEwpLHo9TWF0aC5hY29zKEIpLEE9ei9NYXRoLnNpbih6KSxhLng9dGhpcy54MCt0aGlzLmEqQSpLKk1hdGguc2luKEwpLGEueT10aGlzLnkwK3RoaXMuYSpBKih0aGlzLmNvc19wMTIqSi10aGlzLnNpbl9wMTIqSypNYXRoLmNvcyhMKSksYSk6KGI9aCh0aGlzLmVzKSxjPWkodGhpcy5lcyksbT1qKHRoaXMuZXMpLG49ayh0aGlzLmVzKSxNYXRoLmFicyh0aGlzLnNpbl9wMTItMSk8PWY/KG89dGhpcy5hKmcoYixjLG0sbixlKSxwPXRoaXMuYSpnKGIsYyxtLG4sSSksYS54PXRoaXMueDArKG8tcCkqTWF0aC5zaW4oTCksYS55PXRoaXMueTAtKG8tcCkqTWF0aC5jb3MoTCksYSk6TWF0aC5hYnModGhpcy5zaW5fcDEyKzEpPD1mPyhvPXRoaXMuYSpnKGIsYyxtLG4sZSkscD10aGlzLmEqZyhiLGMsbSxuLEkpLGEueD10aGlzLngwKyhvK3ApKk1hdGguc2luKEwpLGEueT10aGlzLnkwKyhvK3ApKk1hdGguY29zKEwpLGEpOihxPUovSyxyPWwodGhpcy5hLHRoaXMuZSx0aGlzLnNpbl9wMTIpLHM9bCh0aGlzLmEsdGhpcy5lLEopLHQ9TWF0aC5hdGFuKCgxLXRoaXMuZXMpKnErdGhpcy5lcypyKnRoaXMuc2luX3AxMi8ocypLKSksdT1NYXRoLmF0YW4yKE1hdGguc2luKEwpLHRoaXMuY29zX3AxMipNYXRoLnRhbih0KS10aGlzLnNpbl9wMTIqTWF0aC5jb3MoTCkpLEM9MD09PXU/TWF0aC5hc2luKHRoaXMuY29zX3AxMipNYXRoLnNpbih0KS10aGlzLnNpbl9wMTIqTWF0aC5jb3ModCkpOk1hdGguYWJzKE1hdGguYWJzKHUpLU1hdGguUEkpPD1mPy1NYXRoLmFzaW4odGhpcy5jb3NfcDEyKk1hdGguc2luKHQpLXRoaXMuc2luX3AxMipNYXRoLmNvcyh0KSk6TWF0aC5hc2luKE1hdGguc2luKEwpKk1hdGguY29zKHQpL01hdGguc2luKHUpKSx2PXRoaXMuZSp0aGlzLnNpbl9wMTIvTWF0aC5zcXJ0KDEtdGhpcy5lcyksdz10aGlzLmUqdGhpcy5jb3NfcDEyKk1hdGguY29zKHUpL01hdGguc3FydCgxLXRoaXMuZXMpLHg9dip3LHk9dyp3LEQ9QypDLEU9RCpDLEY9RSpDLEc9RipDLHo9cipDKigxLUQqeSooMS15KS82K0UvOCp4KigxLTIqeSkrRi8xMjAqKHkqKDQtNyp5KS0zKnYqdiooMS03KnkpKS1HLzQ4KngpLGEueD10aGlzLngwK3oqTWF0aC5zaW4odSksYS55PXRoaXMueTAreipNYXRoLmNvcyh1KSxhKSl9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXthLngtPXRoaXMueDAsYS55LT10aGlzLnkwO3ZhciBiLGMsbyxwLHEscixzLHQsdSx2LHcseCx5LHosQSxCLEMsRCxFLEYsRyxILEk7aWYodGhpcy5zcGhlcmUpe2lmKGI9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSksYj4yKmUqdGhpcy5hKXJldHVybjtyZXR1cm4gYz1iL3RoaXMuYSxvPU1hdGguc2luKGMpLHA9TWF0aC5jb3MoYykscT10aGlzLmxvbmcwLE1hdGguYWJzKGIpPD1mP3I9dGhpcy5sYXQwOihyPW0ocCp0aGlzLnNpbl9wMTIrYS55Km8qdGhpcy5jb3NfcDEyL2IpLHM9TWF0aC5hYnModGhpcy5sYXQwKS1lLHE9ZChNYXRoLmFicyhzKTw9Zj90aGlzLmxhdDA+PTA/dGhpcy5sb25nMCtNYXRoLmF0YW4yKGEueCwtYS55KTp0aGlzLmxvbmcwLU1hdGguYXRhbjIoLWEueCxhLnkpOnRoaXMubG9uZzArTWF0aC5hdGFuMihhLngqbyxiKnRoaXMuY29zX3AxMipwLWEueSp0aGlzLnNpbl9wMTIqbykpKSxhLng9cSxhLnk9cixhfXJldHVybiB0PWgodGhpcy5lcyksdT1pKHRoaXMuZXMpLHY9aih0aGlzLmVzKSx3PWsodGhpcy5lcyksTWF0aC5hYnModGhpcy5zaW5fcDEyLTEpPD1mPyh4PXRoaXMuYSpnKHQsdSx2LHcsZSksYj1NYXRoLnNxcnQoYS54KmEueCthLnkqYS55KSx5PXgtYixyPW4oeS90aGlzLmEsdCx1LHYsdykscT1kKHRoaXMubG9uZzArTWF0aC5hdGFuMihhLngsLTEqYS55KSksYS54PXEsYS55PXIsYSk6TWF0aC5hYnModGhpcy5zaW5fcDEyKzEpPD1mPyh4PXRoaXMuYSpnKHQsdSx2LHcsZSksYj1NYXRoLnNxcnQoYS54KmEueCthLnkqYS55KSx5PWIteCxyPW4oeS90aGlzLmEsdCx1LHYsdykscT1kKHRoaXMubG9uZzArTWF0aC5hdGFuMihhLngsYS55KSksYS54PXEsYS55PXIsYSk6KGI9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSksQj1NYXRoLmF0YW4yKGEueCxhLnkpLHo9bCh0aGlzLmEsdGhpcy5lLHRoaXMuc2luX3AxMiksQz1NYXRoLmNvcyhCKSxEPXRoaXMuZSp0aGlzLmNvc19wMTIqQyxFPS1EKkQvKDEtdGhpcy5lcyksRj0zKnRoaXMuZXMqKDEtRSkqdGhpcy5zaW5fcDEyKnRoaXMuY29zX3AxMipDLygxLXRoaXMuZXMpLEc9Yi96LEg9Ry1FKigxK0UpKk1hdGgucG93KEcsMykvNi1GKigxKzMqRSkqTWF0aC5wb3coRyw0KS8yNCxJPTEtRSpIKkgvMi1HKkgqSCpILzYsQT1NYXRoLmFzaW4odGhpcy5zaW5fcDEyKk1hdGguY29zKEgpK3RoaXMuY29zX3AxMipNYXRoLnNpbihIKSpDKSxxPWQodGhpcy5sb25nMCtNYXRoLmFzaW4oTWF0aC5zaW4oQikqTWF0aC5zaW4oSCkvTWF0aC5jb3MoQSkpKSxyPU1hdGguYXRhbigoMS10aGlzLmVzKkkqdGhpcy5zaW5fcDEyL01hdGguc2luKEEpKSpNYXRoLnRhbihBKS8oMS10aGlzLmVzKSksYS54PXEsYS55PXIsYSl9LGMubmFtZXM9W1wiQXppbXV0aGFsX0VxdWlkaXN0YW50XCIsXCJhZXFkXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vYXNpbnpcIjo2LFwiLi4vY29tbW9uL2UwZm5cIjo3LFwiLi4vY29tbW9uL2UxZm5cIjo4LFwiLi4vY29tbW9uL2UyZm5cIjo5LFwiLi4vY29tbW9uL2UzZm5cIjoxMCxcIi4uL2NvbW1vbi9nTlwiOjExLFwiLi4vY29tbW9uL2ltbGZuXCI6MTIsXCIuLi9jb21tb24vbWxmblwiOjE0fV0sNDE6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL21sZm5cIiksZT1hKFwiLi4vY29tbW9uL2UwZm5cIiksZj1hKFwiLi4vY29tbW9uL2UxZm5cIiksZz1hKFwiLi4vY29tbW9uL2UyZm5cIiksaD1hKFwiLi4vY29tbW9uL2UzZm5cIiksaT1hKFwiLi4vY29tbW9uL2dOXCIpLGo9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGs9YShcIi4uL2NvbW1vbi9hZGp1c3RfbGF0XCIpLGw9YShcIi4uL2NvbW1vbi9pbWxmblwiKSxtPU1hdGguUEkvMixuPTFlLTEwO2MuaW5pdD1mdW5jdGlvbigpe3RoaXMuc3BoZXJlfHwodGhpcy5lMD1lKHRoaXMuZXMpLHRoaXMuZTE9Zih0aGlzLmVzKSx0aGlzLmUyPWcodGhpcy5lcyksdGhpcy5lMz1oKHRoaXMuZXMpLHRoaXMubWwwPXRoaXMuYSpkKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsdGhpcy5sYXQwKSl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjLGU9YS54LGY9YS55O2lmKGU9aihlLXRoaXMubG9uZzApLHRoaXMuc3BoZXJlKWI9dGhpcy5hKk1hdGguYXNpbihNYXRoLmNvcyhmKSpNYXRoLnNpbihlKSksYz10aGlzLmEqKE1hdGguYXRhbjIoTWF0aC50YW4oZiksTWF0aC5jb3MoZSkpLXRoaXMubGF0MCk7ZWxzZXt2YXIgZz1NYXRoLnNpbihmKSxoPU1hdGguY29zKGYpLGs9aSh0aGlzLmEsdGhpcy5lLGcpLGw9TWF0aC50YW4oZikqTWF0aC50YW4oZiksbT1lKk1hdGguY29zKGYpLG49bSptLG89dGhpcy5lcypoKmgvKDEtdGhpcy5lcykscD10aGlzLmEqZCh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLGYpO2I9ayptKigxLW4qbCooMS82LSg4LWwrOCpvKSpuLzEyMCkpLGM9cC10aGlzLm1sMCtrKmcvaCpuKiguNSsoNS1sKzYqbykqbi8yNCl9cmV0dXJuIGEueD1iK3RoaXMueDAsYS55PWMrdGhpcy55MCxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7YS54LT10aGlzLngwLGEueS09dGhpcy55MDt2YXIgYixjLGQ9YS54L3RoaXMuYSxlPWEueS90aGlzLmE7aWYodGhpcy5zcGhlcmUpe3ZhciBmPWUrdGhpcy5sYXQwO2I9TWF0aC5hc2luKE1hdGguc2luKGYpKk1hdGguY29zKGQpKSxjPU1hdGguYXRhbjIoTWF0aC50YW4oZCksTWF0aC5jb3MoZikpfWVsc2V7dmFyIGc9dGhpcy5tbDAvdGhpcy5hK2UsaD1sKGcsdGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyk7aWYoTWF0aC5hYnMoTWF0aC5hYnMoaCktbSk8PW4pcmV0dXJuIGEueD10aGlzLmxvbmcwLGEueT1tLDA+ZSYmKGEueSo9LTEpLGE7dmFyIG89aSh0aGlzLmEsdGhpcy5lLE1hdGguc2luKGgpKSxwPW8qbypvL3RoaXMuYS90aGlzLmEqKDEtdGhpcy5lcykscT1NYXRoLnBvdyhNYXRoLnRhbihoKSwyKSxyPWQqdGhpcy5hL28scz1yKnI7Yj1oLW8qTWF0aC50YW4oaCkvcCpyKnIqKC41LSgxKzMqcSkqcipyLzI0KSxjPXIqKDEtcyoocS8zKygxKzMqcSkqcSpzLzE1KSkvTWF0aC5jb3MoaCl9cmV0dXJuIGEueD1qKGMrdGhpcy5sb25nMCksYS55PWsoYiksYX0sYy5uYW1lcz1bXCJDYXNzaW5pXCIsXCJDYXNzaW5pX1NvbGRuZXJcIixcImNhc3NcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbGF0XCI6NCxcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9lMGZuXCI6NyxcIi4uL2NvbW1vbi9lMWZuXCI6OCxcIi4uL2NvbW1vbi9lMmZuXCI6OSxcIi4uL2NvbW1vbi9lM2ZuXCI6MTAsXCIuLi9jb21tb24vZ05cIjoxMSxcIi4uL2NvbW1vbi9pbWxmblwiOjEyLFwiLi4vY29tbW9uL21sZm5cIjoxNH1dLDQyOltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGU9YShcIi4uL2NvbW1vbi9xc2ZuelwiKSxmPWEoXCIuLi9jb21tb24vbXNmbnpcIiksZz1hKFwiLi4vY29tbW9uL2lxc2ZuelwiKTtjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLnNwaGVyZXx8KHRoaXMuazA9Zih0aGlzLmUsTWF0aC5zaW4odGhpcy5sYXRfdHMpLE1hdGguY29zKHRoaXMubGF0X3RzKSkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxmPWEueCxnPWEueSxoPWQoZi10aGlzLmxvbmcwKTtpZih0aGlzLnNwaGVyZSliPXRoaXMueDArdGhpcy5hKmgqTWF0aC5jb3ModGhpcy5sYXRfdHMpLGM9dGhpcy55MCt0aGlzLmEqTWF0aC5zaW4oZykvTWF0aC5jb3ModGhpcy5sYXRfdHMpO2Vsc2V7dmFyIGk9ZSh0aGlzLmUsTWF0aC5zaW4oZykpO2I9dGhpcy54MCt0aGlzLmEqdGhpcy5rMCpoLGM9dGhpcy55MCt0aGlzLmEqaSouNS90aGlzLmswfXJldHVybiBhLng9YixhLnk9YyxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7YS54LT10aGlzLngwLGEueS09dGhpcy55MDt2YXIgYixjO3JldHVybiB0aGlzLnNwaGVyZT8oYj1kKHRoaXMubG9uZzArYS54L3RoaXMuYS9NYXRoLmNvcyh0aGlzLmxhdF90cykpLGM9TWF0aC5hc2luKGEueS90aGlzLmEqTWF0aC5jb3ModGhpcy5sYXRfdHMpKSk6KGM9Zyh0aGlzLmUsMiphLnkqdGhpcy5rMC90aGlzLmEpLGI9ZCh0aGlzLmxvbmcwK2EueC8odGhpcy5hKnRoaXMuazApKSksYS54PWIsYS55PWMsYX0sYy5uYW1lcz1bXCJjZWFcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9pcXNmbnpcIjoxMyxcIi4uL2NvbW1vbi9tc2ZuelwiOjE1LFwiLi4vY29tbW9uL3FzZm56XCI6MjB9XSw0MzpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxlPWEoXCIuLi9jb21tb24vYWRqdXN0X2xhdFwiKTtjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLngwPXRoaXMueDB8fDAsdGhpcy55MD10aGlzLnkwfHwwLHRoaXMubGF0MD10aGlzLmxhdDB8fDAsdGhpcy5sb25nMD10aGlzLmxvbmcwfHwwLHRoaXMubGF0X3RzPXRoaXMubGF0X3RzfHwwLHRoaXMudGl0bGU9dGhpcy50aXRsZXx8XCJFcXVpZGlzdGFudCBDeWxpbmRyaWNhbCAoUGxhdGUgQ2FycmUpXCIsdGhpcy5yYz1NYXRoLmNvcyh0aGlzLmxhdF90cyl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnksZj1kKGItdGhpcy5sb25nMCksZz1lKGMtdGhpcy5sYXQwKTtyZXR1cm4gYS54PXRoaXMueDArdGhpcy5hKmYqdGhpcy5yYyxhLnk9dGhpcy55MCt0aGlzLmEqZyxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGI9YS54LGM9YS55O3JldHVybiBhLng9ZCh0aGlzLmxvbmcwKyhiLXRoaXMueDApLyh0aGlzLmEqdGhpcy5yYykpLGEueT1lKHRoaXMubGF0MCsoYy10aGlzLnkwKS90aGlzLmEpLGF9LGMubmFtZXM9W1wiRXF1aXJlY3Rhbmd1bGFyXCIsXCJFcXVpZGlzdGFudF9DeWxpbmRyaWNhbFwiLFwiZXFjXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xhdFwiOjQsXCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjV9XSw0NDpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vZTBmblwiKSxlPWEoXCIuLi9jb21tb24vZTFmblwiKSxmPWEoXCIuLi9jb21tb24vZTJmblwiKSxnPWEoXCIuLi9jb21tb24vZTNmblwiKSxoPWEoXCIuLi9jb21tb24vbXNmbnpcIiksaT1hKFwiLi4vY29tbW9uL21sZm5cIiksaj1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksaz1hKFwiLi4vY29tbW9uL2FkanVzdF9sYXRcIiksbD1hKFwiLi4vY29tbW9uL2ltbGZuXCIpLG09MWUtMTA7Yy5pbml0PWZ1bmN0aW9uKCl7TWF0aC5hYnModGhpcy5sYXQxK3RoaXMubGF0Mik8bXx8KHRoaXMubGF0Mj10aGlzLmxhdDJ8fHRoaXMubGF0MSx0aGlzLnRlbXA9dGhpcy5iL3RoaXMuYSx0aGlzLmVzPTEtTWF0aC5wb3codGhpcy50ZW1wLDIpLHRoaXMuZT1NYXRoLnNxcnQodGhpcy5lcyksdGhpcy5lMD1kKHRoaXMuZXMpLHRoaXMuZTE9ZSh0aGlzLmVzKSx0aGlzLmUyPWYodGhpcy5lcyksdGhpcy5lMz1nKHRoaXMuZXMpLHRoaXMuc2lucGhpPU1hdGguc2luKHRoaXMubGF0MSksdGhpcy5jb3NwaGk9TWF0aC5jb3ModGhpcy5sYXQxKSx0aGlzLm1zMT1oKHRoaXMuZSx0aGlzLnNpbnBoaSx0aGlzLmNvc3BoaSksdGhpcy5tbDE9aSh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MSksTWF0aC5hYnModGhpcy5sYXQxLXRoaXMubGF0Mik8bT90aGlzLm5zPXRoaXMuc2lucGhpOih0aGlzLnNpbnBoaT1NYXRoLnNpbih0aGlzLmxhdDIpLHRoaXMuY29zcGhpPU1hdGguY29zKHRoaXMubGF0MiksdGhpcy5tczI9aCh0aGlzLmUsdGhpcy5zaW5waGksdGhpcy5jb3NwaGkpLHRoaXMubWwyPWkodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyx0aGlzLmxhdDIpLHRoaXMubnM9KHRoaXMubXMxLXRoaXMubXMyKS8odGhpcy5tbDItdGhpcy5tbDEpKSx0aGlzLmc9dGhpcy5tbDErdGhpcy5tczEvdGhpcy5ucyx0aGlzLm1sMD1pKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsdGhpcy5sYXQwKSx0aGlzLnJoPXRoaXMuYSoodGhpcy5nLXRoaXMubWwwKSl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjPWEueCxkPWEueTtpZih0aGlzLnNwaGVyZSliPXRoaXMuYSoodGhpcy5nLWQpO2Vsc2V7dmFyIGU9aSh0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLGQpO2I9dGhpcy5hKih0aGlzLmctZSl9dmFyIGY9dGhpcy5ucypqKGMtdGhpcy5sb25nMCksZz10aGlzLngwK2IqTWF0aC5zaW4oZiksaD10aGlzLnkwK3RoaXMucmgtYipNYXRoLmNvcyhmKTtyZXR1cm4gYS54PWcsYS55PWgsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe2EueC09dGhpcy54MCxhLnk9dGhpcy5yaC1hLnkrdGhpcy55MDt2YXIgYixjLGQsZTt0aGlzLm5zPj0wPyhjPU1hdGguc3FydChhLngqYS54K2EueSphLnkpLGI9MSk6KGM9LU1hdGguc3FydChhLngqYS54K2EueSphLnkpLGI9LTEpO3ZhciBmPTA7aWYoMCE9PWMmJihmPU1hdGguYXRhbjIoYiphLngsYiphLnkpKSx0aGlzLnNwaGVyZSlyZXR1cm4gZT1qKHRoaXMubG9uZzArZi90aGlzLm5zKSxkPWsodGhpcy5nLWMvdGhpcy5hKSxhLng9ZSxhLnk9ZCxhO3ZhciBnPXRoaXMuZy1jL3RoaXMuYTtyZXR1cm4gZD1sKGcsdGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyksZT1qKHRoaXMubG9uZzArZi90aGlzLm5zKSxhLng9ZSxhLnk9ZCxhfSxjLm5hbWVzPVtcIkVxdWlkaXN0YW50X0NvbmljXCIsXCJlcWRjXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xhdFwiOjQsXCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vZTBmblwiOjcsXCIuLi9jb21tb24vZTFmblwiOjgsXCIuLi9jb21tb24vZTJmblwiOjksXCIuLi9jb21tb24vZTNmblwiOjEwLFwiLi4vY29tbW9uL2ltbGZuXCI6MTIsXCIuLi9jb21tb24vbWxmblwiOjE0LFwiLi4vY29tbW9uL21zZm56XCI6MTV9XSw0NTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU1hdGguUEkvNCxlPWEoXCIuLi9jb21tb24vc3JhdFwiKSxmPU1hdGguUEkvMixnPTIwO2MuaW5pdD1mdW5jdGlvbigpe3ZhciBhPU1hdGguc2luKHRoaXMubGF0MCksYj1NYXRoLmNvcyh0aGlzLmxhdDApO2IqPWIsdGhpcy5yYz1NYXRoLnNxcnQoMS10aGlzLmVzKS8oMS10aGlzLmVzKmEqYSksdGhpcy5DPU1hdGguc3FydCgxK3RoaXMuZXMqYipiLygxLXRoaXMuZXMpKSx0aGlzLnBoaWMwPU1hdGguYXNpbihhL3RoaXMuQyksdGhpcy5yYXRleHA9LjUqdGhpcy5DKnRoaXMuZSx0aGlzLks9TWF0aC50YW4oLjUqdGhpcy5waGljMCtkKS8oTWF0aC5wb3coTWF0aC50YW4oLjUqdGhpcy5sYXQwK2QpLHRoaXMuQykqZSh0aGlzLmUqYSx0aGlzLnJhdGV4cCkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS54LGM9YS55O3JldHVybiBhLnk9MipNYXRoLmF0YW4odGhpcy5LKk1hdGgucG93KE1hdGgudGFuKC41KmMrZCksdGhpcy5DKSplKHRoaXMuZSpNYXRoLnNpbihjKSx0aGlzLnJhdGV4cCkpLWYsYS54PXRoaXMuQypiLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MWUtMTQsYz1hLngvdGhpcy5DLGg9YS55LGk9TWF0aC5wb3coTWF0aC50YW4oLjUqaCtkKS90aGlzLkssMS90aGlzLkMpLGo9ZztqPjAmJihoPTIqTWF0aC5hdGFuKGkqZSh0aGlzLmUqTWF0aC5zaW4oYS55KSwtLjUqdGhpcy5lKSktZiwhKE1hdGguYWJzKGgtYS55KTxiKSk7LS1qKWEueT1oO3JldHVybiBqPyhhLng9YyxhLnk9aCxhKTpudWxsfSxjLm5hbWVzPVtcImdhdXNzXCJdfSx7XCIuLi9jb21tb24vc3JhdFwiOjIyfV0sNDY6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZT0xZS0xMCxmPWEoXCIuLi9jb21tb24vYXNpbnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zaW5fcDE0PU1hdGguc2luKHRoaXMubGF0MCksdGhpcy5jb3NfcDE0PU1hdGguY29zKHRoaXMubGF0MCksdGhpcy5pbmZpbml0eV9kaXN0PTFlMyp0aGlzLmEsdGhpcy5yYz0xfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxmLGcsaCxpLGosayxsPWEueCxtPWEueTtyZXR1cm4gZj1kKGwtdGhpcy5sb25nMCksYj1NYXRoLnNpbihtKSxjPU1hdGguY29zKG0pLGc9TWF0aC5jb3MoZiksaT10aGlzLnNpbl9wMTQqYit0aGlzLmNvc19wMTQqYypnLGg9MSxpPjB8fE1hdGguYWJzKGkpPD1lPyhqPXRoaXMueDArdGhpcy5hKmgqYypNYXRoLnNpbihmKS9pLGs9dGhpcy55MCt0aGlzLmEqaCoodGhpcy5jb3NfcDE0KmItdGhpcy5zaW5fcDE0KmMqZykvaSk6KGo9dGhpcy54MCt0aGlzLmluZmluaXR5X2Rpc3QqYypNYXRoLnNpbihmKSxrPXRoaXMueTArdGhpcy5pbmZpbml0eV9kaXN0Kih0aGlzLmNvc19wMTQqYi10aGlzLnNpbl9wMTQqYypnKSksYS54PWosYS55PWssYVxufSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYyxlLGcsaCxpO3JldHVybiBhLng9KGEueC10aGlzLngwKS90aGlzLmEsYS55PShhLnktdGhpcy55MCkvdGhpcy5hLGEueC89dGhpcy5rMCxhLnkvPXRoaXMuazAsKGI9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSkpPyhnPU1hdGguYXRhbjIoYix0aGlzLnJjKSxjPU1hdGguc2luKGcpLGU9TWF0aC5jb3MoZyksaT1mKGUqdGhpcy5zaW5fcDE0K2EueSpjKnRoaXMuY29zX3AxNC9iKSxoPU1hdGguYXRhbjIoYS54KmMsYip0aGlzLmNvc19wMTQqZS1hLnkqdGhpcy5zaW5fcDE0KmMpLGg9ZCh0aGlzLmxvbmcwK2gpKTooaT10aGlzLnBoaWMwLGg9MCksYS54PWgsYS55PWksYX0sYy5uYW1lcz1bXCJnbm9tXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vYXNpbnpcIjo2fV0sNDc6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5hPTYzNzczOTcuMTU1LHRoaXMuZXM9LjAwNjY3NDM3MjIzMDYxNCx0aGlzLmU9TWF0aC5zcXJ0KHRoaXMuZXMpLHRoaXMubGF0MHx8KHRoaXMubGF0MD0uODYzOTM3OTc5NzM3MTkzKSx0aGlzLmxvbmcwfHwodGhpcy5sb25nMD0uNDMzNDIzNDMwOTExOTI1MSksdGhpcy5rMHx8KHRoaXMuazA9Ljk5OTkpLHRoaXMuczQ1PS43ODUzOTgxNjMzOTc0NDgsdGhpcy5zOTA9Mip0aGlzLnM0NSx0aGlzLmZpMD10aGlzLmxhdDAsdGhpcy5lMj10aGlzLmVzLHRoaXMuZT1NYXRoLnNxcnQodGhpcy5lMiksdGhpcy5hbGZhPU1hdGguc3FydCgxK3RoaXMuZTIqTWF0aC5wb3coTWF0aC5jb3ModGhpcy5maTApLDQpLygxLXRoaXMuZTIpKSx0aGlzLnVxPTEuMDQyMTY4NTYzODA0NzQsdGhpcy51MD1NYXRoLmFzaW4oTWF0aC5zaW4odGhpcy5maTApL3RoaXMuYWxmYSksdGhpcy5nPU1hdGgucG93KCgxK3RoaXMuZSpNYXRoLnNpbih0aGlzLmZpMCkpLygxLXRoaXMuZSpNYXRoLnNpbih0aGlzLmZpMCkpLHRoaXMuYWxmYSp0aGlzLmUvMiksdGhpcy5rPU1hdGgudGFuKHRoaXMudTAvMit0aGlzLnM0NSkvTWF0aC5wb3coTWF0aC50YW4odGhpcy5maTAvMit0aGlzLnM0NSksdGhpcy5hbGZhKSp0aGlzLmcsdGhpcy5rMT10aGlzLmswLHRoaXMubjA9dGhpcy5hKk1hdGguc3FydCgxLXRoaXMuZTIpLygxLXRoaXMuZTIqTWF0aC5wb3coTWF0aC5zaW4odGhpcy5maTApLDIpKSx0aGlzLnMwPTEuMzcwMDgzNDYyODE1NTUsdGhpcy5uPU1hdGguc2luKHRoaXMuczApLHRoaXMucm8wPXRoaXMuazEqdGhpcy5uMC9NYXRoLnRhbih0aGlzLnMwKSx0aGlzLmFkPXRoaXMuczkwLXRoaXMudXF9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjLGUsZixnLGgsaSxqPWEueCxrPWEueSxsPWQoai10aGlzLmxvbmcwKTtyZXR1cm4gYj1NYXRoLnBvdygoMSt0aGlzLmUqTWF0aC5zaW4oaykpLygxLXRoaXMuZSpNYXRoLnNpbihrKSksdGhpcy5hbGZhKnRoaXMuZS8yKSxjPTIqKE1hdGguYXRhbih0aGlzLmsqTWF0aC5wb3coTWF0aC50YW4oay8yK3RoaXMuczQ1KSx0aGlzLmFsZmEpL2IpLXRoaXMuczQ1KSxlPS1sKnRoaXMuYWxmYSxmPU1hdGguYXNpbihNYXRoLmNvcyh0aGlzLmFkKSpNYXRoLnNpbihjKStNYXRoLnNpbih0aGlzLmFkKSpNYXRoLmNvcyhjKSpNYXRoLmNvcyhlKSksZz1NYXRoLmFzaW4oTWF0aC5jb3MoYykqTWF0aC5zaW4oZSkvTWF0aC5jb3MoZikpLGg9dGhpcy5uKmcsaT10aGlzLnJvMCpNYXRoLnBvdyhNYXRoLnRhbih0aGlzLnMwLzIrdGhpcy5zNDUpLHRoaXMubikvTWF0aC5wb3coTWF0aC50YW4oZi8yK3RoaXMuczQ1KSx0aGlzLm4pLGEueT1pKk1hdGguY29zKGgpLzEsYS54PWkqTWF0aC5zaW4oaCkvMSx0aGlzLmN6ZWNofHwoYS55Kj0tMSxhLngqPS0xKSxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkLGUsZixnLGgsaSxqPWEueDthLng9YS55LGEueT1qLHRoaXMuY3plY2h8fChhLnkqPS0xLGEueCo9LTEpLGc9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSksZj1NYXRoLmF0YW4yKGEueSxhLngpLGU9Zi9NYXRoLnNpbih0aGlzLnMwKSxkPTIqKE1hdGguYXRhbihNYXRoLnBvdyh0aGlzLnJvMC9nLDEvdGhpcy5uKSpNYXRoLnRhbih0aGlzLnMwLzIrdGhpcy5zNDUpKS10aGlzLnM0NSksYj1NYXRoLmFzaW4oTWF0aC5jb3ModGhpcy5hZCkqTWF0aC5zaW4oZCktTWF0aC5zaW4odGhpcy5hZCkqTWF0aC5jb3MoZCkqTWF0aC5jb3MoZSkpLGM9TWF0aC5hc2luKE1hdGguY29zKGQpKk1hdGguc2luKGUpL01hdGguY29zKGIpKSxhLng9dGhpcy5sb25nMC1jL3RoaXMuYWxmYSxoPWIsaT0wO3ZhciBrPTA7ZG8gYS55PTIqKE1hdGguYXRhbihNYXRoLnBvdyh0aGlzLmssLTEvdGhpcy5hbGZhKSpNYXRoLnBvdyhNYXRoLnRhbihiLzIrdGhpcy5zNDUpLDEvdGhpcy5hbGZhKSpNYXRoLnBvdygoMSt0aGlzLmUqTWF0aC5zaW4oaCkpLygxLXRoaXMuZSpNYXRoLnNpbihoKSksdGhpcy5lLzIpKS10aGlzLnM0NSksTWF0aC5hYnMoaC1hLnkpPDFlLTEwJiYoaT0xKSxoPWEueSxrKz0xO3doaWxlKDA9PT1pJiYxNT5rKTtyZXR1cm4gaz49MTU/bnVsbDphfSxjLm5hbWVzPVtcIktyb3Zha1wiLFwia3JvdmFrXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjV9XSw0ODpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU1hdGguUEkvMixlPU1hdGguUEkvNCxmPTFlLTEwLGc9YShcIi4uL2NvbW1vbi9xc2ZuelwiKSxoPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKTtjLlNfUE9MRT0xLGMuTl9QT0xFPTIsYy5FUVVJVD0zLGMuT0JMSVE9NCxjLmluaXQ9ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLmFicyh0aGlzLmxhdDApO2lmKHRoaXMubW9kZT1NYXRoLmFicyhhLWQpPGY/dGhpcy5sYXQwPDA/dGhpcy5TX1BPTEU6dGhpcy5OX1BPTEU6TWF0aC5hYnMoYSk8Zj90aGlzLkVRVUlUOnRoaXMuT0JMSVEsdGhpcy5lcz4wKXt2YXIgYjtzd2l0Y2godGhpcy5xcD1nKHRoaXMuZSwxKSx0aGlzLm1tZj0uNS8oMS10aGlzLmVzKSx0aGlzLmFwYT10aGlzLmF1dGhzZXQodGhpcy5lcyksdGhpcy5tb2RlKXtjYXNlIHRoaXMuTl9QT0xFOnRoaXMuZGQ9MTticmVhaztjYXNlIHRoaXMuU19QT0xFOnRoaXMuZGQ9MTticmVhaztjYXNlIHRoaXMuRVFVSVQ6dGhpcy5ycT1NYXRoLnNxcnQoLjUqdGhpcy5xcCksdGhpcy5kZD0xL3RoaXMucnEsdGhpcy54bWY9MSx0aGlzLnltZj0uNSp0aGlzLnFwO2JyZWFrO2Nhc2UgdGhpcy5PQkxJUTp0aGlzLnJxPU1hdGguc3FydCguNSp0aGlzLnFwKSxiPU1hdGguc2luKHRoaXMubGF0MCksdGhpcy5zaW5iMT1nKHRoaXMuZSxiKS90aGlzLnFwLHRoaXMuY29zYjE9TWF0aC5zcXJ0KDEtdGhpcy5zaW5iMSp0aGlzLnNpbmIxKSx0aGlzLmRkPU1hdGguY29zKHRoaXMubGF0MCkvKE1hdGguc3FydCgxLXRoaXMuZXMqYipiKSp0aGlzLnJxKnRoaXMuY29zYjEpLHRoaXMueW1mPSh0aGlzLnhtZj10aGlzLnJxKS90aGlzLmRkLHRoaXMueG1mKj10aGlzLmRkfX1lbHNlIHRoaXMubW9kZT09PXRoaXMuT0JMSVEmJih0aGlzLnNpbnBoMD1NYXRoLnNpbih0aGlzLmxhdDApLHRoaXMuY29zcGgwPU1hdGguY29zKHRoaXMubGF0MCkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxpLGosayxsLG0sbixvLHAscT1hLngscj1hLnk7aWYocT1oKHEtdGhpcy5sb25nMCksdGhpcy5zcGhlcmUpe2lmKGs9TWF0aC5zaW4ocikscD1NYXRoLmNvcyhyKSxpPU1hdGguY29zKHEpLHRoaXMubW9kZT09PXRoaXMuT0JMSVF8fHRoaXMubW9kZT09PXRoaXMuRVFVSVQpe2lmKGM9dGhpcy5tb2RlPT09dGhpcy5FUVVJVD8xK3AqaToxK3RoaXMuc2lucGgwKmsrdGhpcy5jb3NwaDAqcCppLGY+PWMpcmV0dXJuIG51bGw7Yz1NYXRoLnNxcnQoMi9jKSxiPWMqcCpNYXRoLnNpbihxKSxjKj10aGlzLm1vZGU9PT10aGlzLkVRVUlUP2s6dGhpcy5jb3NwaDAqay10aGlzLnNpbnBoMCpwKml9ZWxzZSBpZih0aGlzLm1vZGU9PT10aGlzLk5fUE9MRXx8dGhpcy5tb2RlPT09dGhpcy5TX1BPTEUpe2lmKHRoaXMubW9kZT09PXRoaXMuTl9QT0xFJiYoaT0taSksTWF0aC5hYnMocit0aGlzLnBoaTApPGYpcmV0dXJuIG51bGw7Yz1lLS41KnIsYz0yKih0aGlzLm1vZGU9PT10aGlzLlNfUE9MRT9NYXRoLmNvcyhjKTpNYXRoLnNpbihjKSksYj1jKk1hdGguc2luKHEpLGMqPWl9fWVsc2V7c3dpdGNoKG09MCxuPTAsbz0wLGk9TWF0aC5jb3MocSksaj1NYXRoLnNpbihxKSxrPU1hdGguc2luKHIpLGw9Zyh0aGlzLmUsayksKHRoaXMubW9kZT09PXRoaXMuT0JMSVF8fHRoaXMubW9kZT09PXRoaXMuRVFVSVQpJiYobT1sL3RoaXMucXAsbj1NYXRoLnNxcnQoMS1tKm0pKSx0aGlzLm1vZGUpe2Nhc2UgdGhpcy5PQkxJUTpvPTErdGhpcy5zaW5iMSptK3RoaXMuY29zYjEqbippO2JyZWFrO2Nhc2UgdGhpcy5FUVVJVDpvPTErbippO2JyZWFrO2Nhc2UgdGhpcy5OX1BPTEU6bz1kK3IsbD10aGlzLnFwLWw7YnJlYWs7Y2FzZSB0aGlzLlNfUE9MRTpvPXItZCxsPXRoaXMucXArbH1pZihNYXRoLmFicyhvKTxmKXJldHVybiBudWxsO3N3aXRjaCh0aGlzLm1vZGUpe2Nhc2UgdGhpcy5PQkxJUTpjYXNlIHRoaXMuRVFVSVQ6bz1NYXRoLnNxcnQoMi9vKSxjPXRoaXMubW9kZT09PXRoaXMuT0JMSVE/dGhpcy55bWYqbyoodGhpcy5jb3NiMSptLXRoaXMuc2luYjEqbippKToobz1NYXRoLnNxcnQoMi8oMStuKmkpKSkqbSp0aGlzLnltZixiPXRoaXMueG1mKm8qbipqO2JyZWFrO2Nhc2UgdGhpcy5OX1BPTEU6Y2FzZSB0aGlzLlNfUE9MRTpsPj0wPyhiPShvPU1hdGguc3FydChsKSkqaixjPWkqKHRoaXMubW9kZT09PXRoaXMuU19QT0xFP286LW8pKTpiPWM9MH19cmV0dXJuIGEueD10aGlzLmEqYit0aGlzLngwLGEueT10aGlzLmEqYyt0aGlzLnkwLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXthLngtPXRoaXMueDAsYS55LT10aGlzLnkwO3ZhciBiLGMsZSxnLGksaixrLGw9YS54L3RoaXMuYSxtPWEueS90aGlzLmE7aWYodGhpcy5zcGhlcmUpe3ZhciBuLG89MCxwPTA7aWYobj1NYXRoLnNxcnQobCpsK20qbSksYz0uNSpuLGM+MSlyZXR1cm4gbnVsbDtzd2l0Y2goYz0yKk1hdGguYXNpbihjKSwodGhpcy5tb2RlPT09dGhpcy5PQkxJUXx8dGhpcy5tb2RlPT09dGhpcy5FUVVJVCkmJihwPU1hdGguc2luKGMpLG89TWF0aC5jb3MoYykpLHRoaXMubW9kZSl7Y2FzZSB0aGlzLkVRVUlUOmM9TWF0aC5hYnMobik8PWY/MDpNYXRoLmFzaW4obSpwL24pLGwqPXAsbT1vKm47YnJlYWs7Y2FzZSB0aGlzLk9CTElROmM9TWF0aC5hYnMobik8PWY/dGhpcy5waGkwOk1hdGguYXNpbihvKnRoaXMuc2lucGgwK20qcCp0aGlzLmNvc3BoMC9uKSxsKj1wKnRoaXMuY29zcGgwLG09KG8tTWF0aC5zaW4oYykqdGhpcy5zaW5waDApKm47YnJlYWs7Y2FzZSB0aGlzLk5fUE9MRTptPS1tLGM9ZC1jO2JyZWFrO2Nhc2UgdGhpcy5TX1BPTEU6Yy09ZH1iPTAhPT1tfHx0aGlzLm1vZGUhPT10aGlzLkVRVUlUJiZ0aGlzLm1vZGUhPT10aGlzLk9CTElRP01hdGguYXRhbjIobCxtKTowfWVsc2V7aWYoaz0wLHRoaXMubW9kZT09PXRoaXMuT0JMSVF8fHRoaXMubW9kZT09PXRoaXMuRVFVSVQpe2lmKGwvPXRoaXMuZGQsbSo9dGhpcy5kZCxqPU1hdGguc3FydChsKmwrbSptKSxmPmopcmV0dXJuIGEueD0wLGEueT10aGlzLnBoaTAsYTtnPTIqTWF0aC5hc2luKC41KmovdGhpcy5ycSksZT1NYXRoLmNvcyhnKSxsKj1nPU1hdGguc2luKGcpLHRoaXMubW9kZT09PXRoaXMuT0JMSVE/KGs9ZSp0aGlzLnNpbmIxK20qZyp0aGlzLmNvc2IxL2osaT10aGlzLnFwKmssbT1qKnRoaXMuY29zYjEqZS1tKnRoaXMuc2luYjEqZyk6KGs9bSpnL2osaT10aGlzLnFwKmssbT1qKmUpfWVsc2UgaWYodGhpcy5tb2RlPT09dGhpcy5OX1BPTEV8fHRoaXMubW9kZT09PXRoaXMuU19QT0xFKXtpZih0aGlzLm1vZGU9PT10aGlzLk5fUE9MRSYmKG09LW0pLGk9bCpsK20qbSwhaSlyZXR1cm4gYS54PTAsYS55PXRoaXMucGhpMCxhO2s9MS1pL3RoaXMucXAsdGhpcy5tb2RlPT09dGhpcy5TX1BPTEUmJihrPS1rKX1iPU1hdGguYXRhbjIobCxtKSxjPXRoaXMuYXV0aGxhdChNYXRoLmFzaW4oayksdGhpcy5hcGEpfXJldHVybiBhLng9aCh0aGlzLmxvbmcwK2IpLGEueT1jLGF9LGMuUDAwPS4zMzMzMzMzMzMzMzMzMzMzLGMuUDAxPS4xNzIyMjIyMjIyMjIyMjIyMixjLlAwMj0uMTAyNTc5MzY1MDc5MzY1MDgsYy5QMTA9LjA2Mzg4ODg4ODg4ODg4ODg4LGMuUDExPS4wNjY0MDIxMTY0MDIxMTY0LGMuUDIwPS4wMTY0MTUwMTI5NDIxOTE1NDMsYy5hdXRoc2V0PWZ1bmN0aW9uKGEpe3ZhciBiLGM9W107cmV0dXJuIGNbMF09YSp0aGlzLlAwMCxiPWEqYSxjWzBdKz1iKnRoaXMuUDAxLGNbMV09Yip0aGlzLlAxMCxiKj1hLGNbMF0rPWIqdGhpcy5QMDIsY1sxXSs9Yip0aGlzLlAxMSxjWzJdPWIqdGhpcy5QMjAsY30sYy5hdXRobGF0PWZ1bmN0aW9uKGEsYil7dmFyIGM9YSthO3JldHVybiBhK2JbMF0qTWF0aC5zaW4oYykrYlsxXSpNYXRoLnNpbihjK2MpK2JbMl0qTWF0aC5zaW4oYytjK2MpfSxjLm5hbWVzPVtcIkxhbWJlcnQgQXppbXV0aGFsIEVxdWFsIEFyZWFcIixcIkxhbWJlcnRfQXppbXV0aGFsX0VxdWFsX0FyZWFcIixcImxhZWFcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9xc2ZuelwiOjIwfV0sNDk6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD0xZS0xMCxlPWEoXCIuLi9jb21tb24vbXNmbnpcIiksZj1hKFwiLi4vY29tbW9uL3RzZm56XCIpLGc9TWF0aC5QSS8yLGg9YShcIi4uL2NvbW1vbi9zaWduXCIpLGk9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGo9YShcIi4uL2NvbW1vbi9waGkyelwiKTtjLmluaXQ9ZnVuY3Rpb24oKXtpZih0aGlzLmxhdDJ8fCh0aGlzLmxhdDI9dGhpcy5sYXQxKSx0aGlzLmswfHwodGhpcy5rMD0xKSx0aGlzLngwPXRoaXMueDB8fDAsdGhpcy55MD10aGlzLnkwfHwwLCEoTWF0aC5hYnModGhpcy5sYXQxK3RoaXMubGF0Mik8ZCkpe3ZhciBhPXRoaXMuYi90aGlzLmE7dGhpcy5lPU1hdGguc3FydCgxLWEqYSk7dmFyIGI9TWF0aC5zaW4odGhpcy5sYXQxKSxjPU1hdGguY29zKHRoaXMubGF0MSksZz1lKHRoaXMuZSxiLGMpLGg9Zih0aGlzLmUsdGhpcy5sYXQxLGIpLGk9TWF0aC5zaW4odGhpcy5sYXQyKSxqPU1hdGguY29zKHRoaXMubGF0Miksaz1lKHRoaXMuZSxpLGopLGw9Zih0aGlzLmUsdGhpcy5sYXQyLGkpLG09Zih0aGlzLmUsdGhpcy5sYXQwLE1hdGguc2luKHRoaXMubGF0MCkpO3RoaXMubnM9TWF0aC5hYnModGhpcy5sYXQxLXRoaXMubGF0Mik+ZD9NYXRoLmxvZyhnL2spL01hdGgubG9nKGgvbCk6Yixpc05hTih0aGlzLm5zKSYmKHRoaXMubnM9YiksdGhpcy5mMD1nLyh0aGlzLm5zKk1hdGgucG93KGgsdGhpcy5ucykpLHRoaXMucmg9dGhpcy5hKnRoaXMuZjAqTWF0aC5wb3cobSx0aGlzLm5zKSx0aGlzLnRpdGxlfHwodGhpcy50aXRsZT1cIkxhbWJlcnQgQ29uZm9ybWFsIENvbmljXCIpfX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiPWEueCxjPWEueTtNYXRoLmFicygyKk1hdGguYWJzKGMpLU1hdGguUEkpPD1kJiYoYz1oKGMpKihnLTIqZCkpO3ZhciBlLGosaz1NYXRoLmFicyhNYXRoLmFicyhjKS1nKTtpZihrPmQpZT1mKHRoaXMuZSxjLE1hdGguc2luKGMpKSxqPXRoaXMuYSp0aGlzLmYwKk1hdGgucG93KGUsdGhpcy5ucyk7ZWxzZXtpZihrPWMqdGhpcy5ucywwPj1rKXJldHVybiBudWxsO2o9MH12YXIgbD10aGlzLm5zKmkoYi10aGlzLmxvbmcwKTtyZXR1cm4gYS54PXRoaXMuazAqaipNYXRoLnNpbihsKSt0aGlzLngwLGEueT10aGlzLmswKih0aGlzLnJoLWoqTWF0aC5jb3MobCkpK3RoaXMueTAsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsaD0oYS54LXRoaXMueDApL3RoaXMuazAsaz10aGlzLnJoLShhLnktdGhpcy55MCkvdGhpcy5rMDt0aGlzLm5zPjA/KGI9TWF0aC5zcXJ0KGgqaCtrKmspLGM9MSk6KGI9LU1hdGguc3FydChoKmgrayprKSxjPS0xKTt2YXIgbD0wO2lmKDAhPT1iJiYobD1NYXRoLmF0YW4yKGMqaCxjKmspKSwwIT09Ynx8dGhpcy5ucz4wKXtpZihjPTEvdGhpcy5ucyxkPU1hdGgucG93KGIvKHRoaXMuYSp0aGlzLmYwKSxjKSxlPWoodGhpcy5lLGQpLC05OTk5PT09ZSlyZXR1cm4gbnVsbH1lbHNlIGU9LWc7cmV0dXJuIGY9aShsL3RoaXMubnMrdGhpcy5sb25nMCksYS54PWYsYS55PWUsYX0sYy5uYW1lcz1bXCJMYW1iZXJ0IFRhbmdlbnRpYWwgQ29uZm9ybWFsIENvbmljIFByb2plY3Rpb25cIixcIkxhbWJlcnRfQ29uZm9ybWFsX0NvbmljXCIsXCJMYW1iZXJ0X0NvbmZvcm1hbF9Db25pY18yU1BcIixcImxjY1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL21zZm56XCI6MTUsXCIuLi9jb21tb24vcGhpMnpcIjoxNixcIi4uL2NvbW1vbi9zaWduXCI6MjEsXCIuLi9jb21tb24vdHNmbnpcIjoyNH1dLDUwOltmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtyZXR1cm4gYX1jLmluaXQ9ZnVuY3Rpb24oKXt9LGMuZm9yd2FyZD1kLGMuaW52ZXJzZT1kLGMubmFtZXM9W1wibG9uZ2xhdFwiLFwiaWRlbnRpdHlcIl19LHt9XSw1MTpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vbXNmbnpcIiksZT1NYXRoLlBJLzIsZj0xZS0xMCxnPTU3LjI5NTc3OTUxMzA4MjMyLGg9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGk9TWF0aC5QSS80LGo9YShcIi4uL2NvbW1vbi90c2ZuelwiKSxrPWEoXCIuLi9jb21tb24vcGhpMnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iL3RoaXMuYTt0aGlzLmVzPTEtYSphLFwieDBcImluIHRoaXN8fCh0aGlzLngwPTApLFwieTBcImluIHRoaXN8fCh0aGlzLnkwPTApLHRoaXMuZT1NYXRoLnNxcnQodGhpcy5lcyksdGhpcy5sYXRfdHM/dGhpcy5rMD10aGlzLnNwaGVyZT9NYXRoLmNvcyh0aGlzLmxhdF90cyk6ZCh0aGlzLmUsTWF0aC5zaW4odGhpcy5sYXRfdHMpLE1hdGguY29zKHRoaXMubGF0X3RzKSk6dGhpcy5rMHx8KHRoaXMuazA9dGhpcy5rP3RoaXMuazoxKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiPWEueCxjPWEueTtpZihjKmc+OTAmJi05MD5jKmcmJmIqZz4xODAmJi0xODA+YipnKXJldHVybiBudWxsO3ZhciBkLGs7aWYoTWF0aC5hYnMoTWF0aC5hYnMoYyktZSk8PWYpcmV0dXJuIG51bGw7aWYodGhpcy5zcGhlcmUpZD10aGlzLngwK3RoaXMuYSp0aGlzLmswKmgoYi10aGlzLmxvbmcwKSxrPXRoaXMueTArdGhpcy5hKnRoaXMuazAqTWF0aC5sb2coTWF0aC50YW4oaSsuNSpjKSk7ZWxzZXt2YXIgbD1NYXRoLnNpbihjKSxtPWoodGhpcy5lLGMsbCk7ZD10aGlzLngwK3RoaXMuYSp0aGlzLmswKmgoYi10aGlzLmxvbmcwKSxrPXRoaXMueTAtdGhpcy5hKnRoaXMuazAqTWF0aC5sb2cobSl9cmV0dXJuIGEueD1kLGEueT1rLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGQ9YS54LXRoaXMueDAsZj1hLnktdGhpcy55MDtpZih0aGlzLnNwaGVyZSljPWUtMipNYXRoLmF0YW4oTWF0aC5leHAoLWYvKHRoaXMuYSp0aGlzLmswKSkpO2Vsc2V7dmFyIGc9TWF0aC5leHAoLWYvKHRoaXMuYSp0aGlzLmswKSk7aWYoYz1rKHRoaXMuZSxnKSwtOTk5OT09PWMpcmV0dXJuIG51bGx9cmV0dXJuIGI9aCh0aGlzLmxvbmcwK2QvKHRoaXMuYSp0aGlzLmswKSksYS54PWIsYS55PWMsYX0sYy5uYW1lcz1bXCJNZXJjYXRvclwiLFwiUG9wdWxhciBWaXN1YWxpc2F0aW9uIFBzZXVkbyBNZXJjYXRvclwiLFwiTWVyY2F0b3JfMVNQXCIsXCJNZXJjYXRvcl9BdXhpbGlhcnlfU3BoZXJlXCIsXCJtZXJjXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjUsXCIuLi9jb21tb24vbXNmbnpcIjoxNSxcIi4uL2NvbW1vbi9waGkyelwiOjE2LFwiLi4vY29tbW9uL3RzZm56XCI6MjR9XSw1MjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKTtjLmluaXQ9ZnVuY3Rpb24oKXt9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYj1hLngsYz1hLnksZT1kKGItdGhpcy5sb25nMCksZj10aGlzLngwK3RoaXMuYSplLGc9dGhpcy55MCt0aGlzLmEqTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSS80K2MvMi41KSkqMS4yNTtyZXR1cm4gYS54PWYsYS55PWcsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe2EueC09dGhpcy54MCxhLnktPXRoaXMueTA7dmFyIGI9ZCh0aGlzLmxvbmcwK2EueC90aGlzLmEpLGM9Mi41KihNYXRoLmF0YW4oTWF0aC5leHAoLjgqYS55L3RoaXMuYSkpLU1hdGguUEkvNCk7cmV0dXJuIGEueD1iLGEueT1jLGF9LGMubmFtZXM9W1wiTWlsbGVyX0N5bGluZHJpY2FsXCIsXCJtaWxsXCJdfSx7XCIuLi9jb21tb24vYWRqdXN0X2xvblwiOjV9XSw1MzpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxlPTFlLTEwO2MuaW5pdD1mdW5jdGlvbigpe30sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLngsYz1hLnksZj1kKGItdGhpcy5sb25nMCksZz1jLGg9TWF0aC5QSSpNYXRoLnNpbihjKSxpPTA7ITA7aSsrKXt2YXIgaj0tKGcrTWF0aC5zaW4oZyktaCkvKDErTWF0aC5jb3MoZykpO2lmKGcrPWosTWF0aC5hYnMoaik8ZSlicmVha31nLz0yLE1hdGguUEkvMi1NYXRoLmFicyhjKTxlJiYoZj0wKTt2YXIgaz0uOTAwMzE2MzE2MTU4KnRoaXMuYSpmKk1hdGguY29zKGcpK3RoaXMueDAsbD0xLjQxNDIxMzU2MjM3MzEqdGhpcy5hKk1hdGguc2luKGcpK3RoaXMueTA7cmV0dXJuIGEueD1rLGEueT1sLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjO2EueC09dGhpcy54MCxhLnktPXRoaXMueTAsYz1hLnkvKDEuNDE0MjEzNTYyMzczMSp0aGlzLmEpLE1hdGguYWJzKGMpPi45OTk5OTk5OTk5OTkmJihjPS45OTk5OTk5OTk5OTkpLGI9TWF0aC5hc2luKGMpO3ZhciBlPWQodGhpcy5sb25nMCthLngvKC45MDAzMTYzMTYxNTgqdGhpcy5hKk1hdGguY29zKGIpKSk7ZTwtTWF0aC5QSSYmKGU9LU1hdGguUEkpLGU+TWF0aC5QSSYmKGU9TWF0aC5QSSksYz0oMipiK01hdGguc2luKDIqYikpL01hdGguUEksTWF0aC5hYnMoYyk+MSYmKGM9MSk7dmFyIGY9TWF0aC5hc2luKGMpO3JldHVybiBhLng9ZSxhLnk9ZixhfSxjLm5hbWVzPVtcIk1vbGx3ZWlkZVwiLFwibW9sbFwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1fV0sNTQ6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD00ODQ4MTM2ODExMDk1MzZlLTIwO2MuaXRlcmF0aW9ucz0xLGMuaW5pdD1mdW5jdGlvbigpe3RoaXMuQT1bXSx0aGlzLkFbMV09LjYzOTkxNzUwNzMsdGhpcy5BWzJdPS0uMTM1ODc5NzYxMyx0aGlzLkFbM109LjA2MzI5NDQwOSx0aGlzLkFbNF09LS4wMjUyNjg1Myx0aGlzLkFbNV09LjAxMTc4NzksdGhpcy5BWzZdPS0uMDA1NTE2MSx0aGlzLkFbN109LjAwMjY5MDYsdGhpcy5BWzhdPS0uMDAxMzMzLHRoaXMuQVs5XT02N2UtNSx0aGlzLkFbMTBdPS0zNGUtNSx0aGlzLkJfcmU9W10sdGhpcy5CX2ltPVtdLHRoaXMuQl9yZVsxXT0uNzU1Nzg1MzIyOCx0aGlzLkJfaW1bMV09MCx0aGlzLkJfcmVbMl09LjI0OTIwNDY0Nix0aGlzLkJfaW1bMl09LjAwMzM3MTUwNyx0aGlzLkJfcmVbM109LS4wMDE1NDE3MzksdGhpcy5CX2ltWzNdPS4wNDEwNTg1Nix0aGlzLkJfcmVbNF09LS4xMDE2MjkwNyx0aGlzLkJfaW1bNF09LjAxNzI3NjA5LHRoaXMuQl9yZVs1XT0tLjI2NjIzNDg5LHRoaXMuQl9pbVs1XT0tLjM2MjQ5MjE4LHRoaXMuQl9yZVs2XT0tLjY4NzA5ODMsdGhpcy5CX2ltWzZdPS0xLjE2NTE5NjcsdGhpcy5DX3JlPVtdLHRoaXMuQ19pbT1bXSx0aGlzLkNfcmVbMV09MS4zMjMxMjcwNDM5LHRoaXMuQ19pbVsxXT0wLHRoaXMuQ19yZVsyXT0tLjU3NzI0NTc4OSx0aGlzLkNfaW1bMl09LS4wMDc4MDk1OTgsdGhpcy5DX3JlWzNdPS41MDgzMDc1MTMsdGhpcy5DX2ltWzNdPS0uMTEyMjA4OTUyLHRoaXMuQ19yZVs0XT0tLjE1MDk0NzYyLHRoaXMuQ19pbVs0XT0uMTgyMDA2MDIsdGhpcy5DX3JlWzVdPTEuMDE0MTgxNzksdGhpcy5DX2ltWzVdPTEuNjQ0OTc2OTYsdGhpcy5DX3JlWzZdPTEuOTY2MDU0OSx0aGlzLkNfaW1bNl09Mi41MTI3NjQ1LHRoaXMuRD1bXSx0aGlzLkRbMV09MS41NjI3MDE0MjQzLHRoaXMuRFsyXT0uNTE4NTQwNjM5OCx0aGlzLkRbM109LS4wMzMzMzA5OCx0aGlzLkRbNF09LS4xMDUyOTA2LHRoaXMuRFs1XT0tLjAzNjg1OTQsdGhpcy5EWzZdPS4wMDczMTcsdGhpcy5EWzddPS4wMTIyLHRoaXMuRFs4XT0uMDAzOTQsdGhpcy5EWzldPS0uMDAxM30sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGM9YS54LGU9YS55LGY9ZS10aGlzLmxhdDAsZz1jLXRoaXMubG9uZzAsaD1mL2QqMWUtNSxpPWcsaj0xLGs9MDtmb3IoYj0xOzEwPj1iO2IrKylqKj1oLGsrPXRoaXMuQVtiXSpqO3ZhciBsLG0sbj1rLG89aSxwPTEscT0wLHI9MCxzPTA7Zm9yKGI9MTs2Pj1iO2IrKylsPXAqbi1xKm8sbT1xKm4rcCpvLHA9bCxxPW0scj1yK3RoaXMuQl9yZVtiXSpwLXRoaXMuQl9pbVtiXSpxLHM9cyt0aGlzLkJfaW1bYl0qcCt0aGlzLkJfcmVbYl0qcTtyZXR1cm4gYS54PXMqdGhpcy5hK3RoaXMueDAsYS55PXIqdGhpcy5hK3RoaXMueTAsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxmPWEueCxnPWEueSxoPWYtdGhpcy54MCxpPWctdGhpcy55MCxqPWkvdGhpcy5hLGs9aC90aGlzLmEsbD0xLG09MCxuPTAsbz0wO2ZvcihiPTE7Nj49YjtiKyspYz1sKmotbSprLGU9bSpqK2wqayxsPWMsbT1lLG49bit0aGlzLkNfcmVbYl0qbC10aGlzLkNfaW1bYl0qbSxvPW8rdGhpcy5DX2ltW2JdKmwrdGhpcy5DX3JlW2JdKm07Zm9yKHZhciBwPTA7cDx0aGlzLml0ZXJhdGlvbnM7cCsrKXt2YXIgcSxyLHM9bix0PW8sdT1qLHY9aztmb3IoYj0yOzY+PWI7YisrKXE9cypuLXQqbyxyPXQqbitzKm8scz1xLHQ9cix1Kz0oYi0xKSoodGhpcy5CX3JlW2JdKnMtdGhpcy5CX2ltW2JdKnQpLHYrPShiLTEpKih0aGlzLkJfaW1bYl0qcyt0aGlzLkJfcmVbYl0qdCk7cz0xLHQ9MDt2YXIgdz10aGlzLkJfcmVbMV0seD10aGlzLkJfaW1bMV07Zm9yKGI9Mjs2Pj1iO2IrKylxPXMqbi10Km8scj10Km4rcypvLHM9cSx0PXIsdys9YioodGhpcy5CX3JlW2JdKnMtdGhpcy5CX2ltW2JdKnQpLHgrPWIqKHRoaXMuQl9pbVtiXSpzK3RoaXMuQl9yZVtiXSp0KTt2YXIgeT13KncreCp4O249KHUqdyt2KngpL3ksbz0odip3LXUqeCkveX12YXIgej1uLEE9byxCPTEsQz0wO2ZvcihiPTE7OT49YjtiKyspQio9eixDKz10aGlzLkRbYl0qQjt2YXIgRD10aGlzLmxhdDArQypkKjFlNSxFPXRoaXMubG9uZzArQTtyZXR1cm4gYS54PUUsYS55PUQsYX0sYy5uYW1lcz1bXCJOZXdfWmVhbGFuZF9NYXBfR3JpZFwiLFwibnptZ1wiXX0se31dLDU1OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi90c2ZuelwiKSxlPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxmPWEoXCIuLi9jb21tb24vcGhpMnpcIiksZz1NYXRoLlBJLzIsaD1NYXRoLlBJLzQsaT0xZS0xMDtjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLm5vX29mZj10aGlzLm5vX29mZnx8ITEsdGhpcy5ub19yb3Q9dGhpcy5ub19yb3R8fCExLGlzTmFOKHRoaXMuazApJiYodGhpcy5rMD0xKTt2YXIgYT1NYXRoLnNpbih0aGlzLmxhdDApLGI9TWF0aC5jb3ModGhpcy5sYXQwKSxjPXRoaXMuZSphO3RoaXMuYmw9TWF0aC5zcXJ0KDErdGhpcy5lcy8oMS10aGlzLmVzKSpNYXRoLnBvdyhiLDQpKSx0aGlzLmFsPXRoaXMuYSp0aGlzLmJsKnRoaXMuazAqTWF0aC5zcXJ0KDEtdGhpcy5lcykvKDEtYypjKTt2YXIgZj1kKHRoaXMuZSx0aGlzLmxhdDAsYSksZz10aGlzLmJsL2IqTWF0aC5zcXJ0KCgxLXRoaXMuZXMpLygxLWMqYykpOzE+ZypnJiYoZz0xKTt2YXIgaCxpO2lmKGlzTmFOKHRoaXMubG9uZ2MpKXt2YXIgaj1kKHRoaXMuZSx0aGlzLmxhdDEsTWF0aC5zaW4odGhpcy5sYXQxKSksaz1kKHRoaXMuZSx0aGlzLmxhdDIsTWF0aC5zaW4odGhpcy5sYXQyKSk7dGhpcy5lbD10aGlzLmxhdDA+PTA/KGcrTWF0aC5zcXJ0KGcqZy0xKSkqTWF0aC5wb3coZix0aGlzLmJsKTooZy1NYXRoLnNxcnQoZypnLTEpKSpNYXRoLnBvdyhmLHRoaXMuYmwpO3ZhciBsPU1hdGgucG93KGosdGhpcy5ibCksbT1NYXRoLnBvdyhrLHRoaXMuYmwpO2g9dGhpcy5lbC9sLGk9LjUqKGgtMS9oKTt2YXIgbj0odGhpcy5lbCp0aGlzLmVsLW0qbCkvKHRoaXMuZWwqdGhpcy5lbCttKmwpLG89KG0tbCkvKG0rbCkscD1lKHRoaXMubG9uZzEtdGhpcy5sb25nMik7dGhpcy5sb25nMD0uNSoodGhpcy5sb25nMSt0aGlzLmxvbmcyKS1NYXRoLmF0YW4obipNYXRoLnRhbiguNSp0aGlzLmJsKnApL28pL3RoaXMuYmwsdGhpcy5sb25nMD1lKHRoaXMubG9uZzApO3ZhciBxPWUodGhpcy5sb25nMS10aGlzLmxvbmcwKTt0aGlzLmdhbW1hMD1NYXRoLmF0YW4oTWF0aC5zaW4odGhpcy5ibCpxKS9pKSx0aGlzLmFscGhhPU1hdGguYXNpbihnKk1hdGguc2luKHRoaXMuZ2FtbWEwKSl9ZWxzZSBoPXRoaXMubGF0MD49MD9nK01hdGguc3FydChnKmctMSk6Zy1NYXRoLnNxcnQoZypnLTEpLHRoaXMuZWw9aCpNYXRoLnBvdyhmLHRoaXMuYmwpLGk9LjUqKGgtMS9oKSx0aGlzLmdhbW1hMD1NYXRoLmFzaW4oTWF0aC5zaW4odGhpcy5hbHBoYSkvZyksdGhpcy5sb25nMD10aGlzLmxvbmdjLU1hdGguYXNpbihpKk1hdGgudGFuKHRoaXMuZ2FtbWEwKSkvdGhpcy5ibDt0aGlzLnVjPXRoaXMubm9fb2ZmPzA6dGhpcy5sYXQwPj0wP3RoaXMuYWwvdGhpcy5ibCpNYXRoLmF0YW4yKE1hdGguc3FydChnKmctMSksTWF0aC5jb3ModGhpcy5hbHBoYSkpOi0xKnRoaXMuYWwvdGhpcy5ibCpNYXRoLmF0YW4yKE1hdGguc3FydChnKmctMSksTWF0aC5jb3ModGhpcy5hbHBoYSkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxmLGo9YS54LGs9YS55LGw9ZShqLXRoaXMubG9uZzApO2lmKE1hdGguYWJzKE1hdGguYWJzKGspLWcpPD1pKWY9az4wPy0xOjEsYz10aGlzLmFsL3RoaXMuYmwqTWF0aC5sb2coTWF0aC50YW4oaCtmKnRoaXMuZ2FtbWEwKi41KSksYj0tMSpmKmcqdGhpcy5hbC90aGlzLmJsO2Vsc2V7dmFyIG09ZCh0aGlzLmUsayxNYXRoLnNpbihrKSksbj10aGlzLmVsL01hdGgucG93KG0sdGhpcy5ibCksbz0uNSoobi0xL24pLHA9LjUqKG4rMS9uKSxxPU1hdGguc2luKHRoaXMuYmwqbCkscj0obypNYXRoLnNpbih0aGlzLmdhbW1hMCktcSpNYXRoLmNvcyh0aGlzLmdhbW1hMCkpL3A7Yz1NYXRoLmFicyhNYXRoLmFicyhyKS0xKTw9aT9OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk6LjUqdGhpcy5hbCpNYXRoLmxvZygoMS1yKS8oMStyKSkvdGhpcy5ibCxiPU1hdGguYWJzKE1hdGguY29zKHRoaXMuYmwqbCkpPD1pP3RoaXMuYWwqdGhpcy5ibCpsOnRoaXMuYWwqTWF0aC5hdGFuMihvKk1hdGguY29zKHRoaXMuZ2FtbWEwKStxKk1hdGguc2luKHRoaXMuZ2FtbWEwKSxNYXRoLmNvcyh0aGlzLmJsKmwpKS90aGlzLmJsfXJldHVybiB0aGlzLm5vX3JvdD8oYS54PXRoaXMueDArYixhLnk9dGhpcy55MCtjKTooYi09dGhpcy51YyxhLng9dGhpcy54MCtjKk1hdGguY29zKHRoaXMuYWxwaGEpK2IqTWF0aC5zaW4odGhpcy5hbHBoYSksYS55PXRoaXMueTArYipNYXRoLmNvcyh0aGlzLmFscGhhKS1jKk1hdGguc2luKHRoaXMuYWxwaGEpKSxhfSxjLmludmVyc2U9ZnVuY3Rpb24oYSl7dmFyIGIsYzt0aGlzLm5vX3JvdD8oYz1hLnktdGhpcy55MCxiPWEueC10aGlzLngwKTooYz0oYS54LXRoaXMueDApKk1hdGguY29zKHRoaXMuYWxwaGEpLShhLnktdGhpcy55MCkqTWF0aC5zaW4odGhpcy5hbHBoYSksYj0oYS55LXRoaXMueTApKk1hdGguY29zKHRoaXMuYWxwaGEpKyhhLngtdGhpcy54MCkqTWF0aC5zaW4odGhpcy5hbHBoYSksYis9dGhpcy51Yyk7dmFyIGQ9TWF0aC5leHAoLTEqdGhpcy5ibCpjL3RoaXMuYWwpLGg9LjUqKGQtMS9kKSxqPS41KihkKzEvZCksaz1NYXRoLnNpbih0aGlzLmJsKmIvdGhpcy5hbCksbD0oaypNYXRoLmNvcyh0aGlzLmdhbW1hMCkraCpNYXRoLnNpbih0aGlzLmdhbW1hMCkpL2osbT1NYXRoLnBvdyh0aGlzLmVsL01hdGguc3FydCgoMStsKS8oMS1sKSksMS90aGlzLmJsKTtyZXR1cm4gTWF0aC5hYnMobC0xKTxpPyhhLng9dGhpcy5sb25nMCxhLnk9Zyk6TWF0aC5hYnMobCsxKTxpPyhhLng9dGhpcy5sb25nMCxhLnk9LTEqZyk6KGEueT1mKHRoaXMuZSxtKSxhLng9ZSh0aGlzLmxvbmcwLU1hdGguYXRhbjIoaCpNYXRoLmNvcyh0aGlzLmdhbW1hMCktaypNYXRoLnNpbih0aGlzLmdhbW1hMCksTWF0aC5jb3ModGhpcy5ibCpiL3RoaXMuYWwpKS90aGlzLmJsKSksYX0sYy5uYW1lcz1bXCJIb3RpbmVfT2JsaXF1ZV9NZXJjYXRvclwiLFwiSG90aW5lIE9ibGlxdWUgTWVyY2F0b3JcIixcIkhvdGluZV9PYmxpcXVlX01lcmNhdG9yX0F6aW11dGhfTmF0dXJhbF9PcmlnaW5cIixcIkhvdGluZV9PYmxpcXVlX01lcmNhdG9yX0F6aW11dGhfQ2VudGVyXCIsXCJvbWVyY1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL3BoaTJ6XCI6MTYsXCIuLi9jb21tb24vdHNmbnpcIjoyNH1dLDU2OltmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YShcIi4uL2NvbW1vbi9lMGZuXCIpLGU9YShcIi4uL2NvbW1vbi9lMWZuXCIpLGY9YShcIi4uL2NvbW1vbi9lMmZuXCIpLGc9YShcIi4uL2NvbW1vbi9lM2ZuXCIpLGg9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpLGk9YShcIi4uL2NvbW1vbi9hZGp1c3RfbGF0XCIpLGo9YShcIi4uL2NvbW1vbi9tbGZuXCIpLGs9MWUtMTAsbD1hKFwiLi4vY29tbW9uL2dOXCIpLG09MjA7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy50ZW1wPXRoaXMuYi90aGlzLmEsdGhpcy5lcz0xLU1hdGgucG93KHRoaXMudGVtcCwyKSx0aGlzLmU9TWF0aC5zcXJ0KHRoaXMuZXMpLHRoaXMuZTA9ZCh0aGlzLmVzKSx0aGlzLmUxPWUodGhpcy5lcyksdGhpcy5lMj1mKHRoaXMuZXMpLHRoaXMuZTM9Zyh0aGlzLmVzKSx0aGlzLm1sMD10aGlzLmEqaih0aGlzLmUwLHRoaXMuZTEsdGhpcy5lMix0aGlzLmUzLHRoaXMubGF0MCl9LGMuZm9yd2FyZD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZT1hLngsZj1hLnksZz1oKGUtdGhpcy5sb25nMCk7aWYoZD1nKk1hdGguc2luKGYpLHRoaXMuc3BoZXJlKU1hdGguYWJzKGYpPD1rPyhiPXRoaXMuYSpnLGM9LTEqdGhpcy5hKnRoaXMubGF0MCk6KGI9dGhpcy5hKk1hdGguc2luKGQpL01hdGgudGFuKGYpLGM9dGhpcy5hKihpKGYtdGhpcy5sYXQwKSsoMS1NYXRoLmNvcyhkKSkvTWF0aC50YW4oZikpKTtlbHNlIGlmKE1hdGguYWJzKGYpPD1rKWI9dGhpcy5hKmcsYz0tMSp0aGlzLm1sMDtlbHNle3ZhciBtPWwodGhpcy5hLHRoaXMuZSxNYXRoLnNpbihmKSkvTWF0aC50YW4oZik7Yj1tKk1hdGguc2luKGQpLGM9dGhpcy5hKmoodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxmKS10aGlzLm1sMCttKigxLU1hdGguY29zKGQpKX1yZXR1cm4gYS54PWIrdGhpcy54MCxhLnk9Yyt0aGlzLnkwLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaSxsLG47aWYoZD1hLngtdGhpcy54MCxlPWEueS10aGlzLnkwLHRoaXMuc3BoZXJlKWlmKE1hdGguYWJzKGUrdGhpcy5hKnRoaXMubGF0MCk8PWspYj1oKGQvdGhpcy5hK3RoaXMubG9uZzApLGM9MDtlbHNle2c9dGhpcy5sYXQwK2UvdGhpcy5hLGk9ZCpkL3RoaXMuYS90aGlzLmErZypnLGw9Zzt2YXIgbztmb3IoZj1tO2Y7LS1mKWlmKG89TWF0aC50YW4obCksbj0tMSooZyoobCpvKzEpLWwtLjUqKGwqbCtpKSpvKS8oKGwtZykvby0xKSxsKz1uLE1hdGguYWJzKG4pPD1rKXtjPWw7YnJlYWt9Yj1oKHRoaXMubG9uZzArTWF0aC5hc2luKGQqTWF0aC50YW4obCkvdGhpcy5hKS9NYXRoLnNpbihjKSl9ZWxzZSBpZihNYXRoLmFicyhlK3RoaXMubWwwKTw9ayljPTAsYj1oKHRoaXMubG9uZzArZC90aGlzLmEpO2Vsc2V7Zz0odGhpcy5tbDArZSkvdGhpcy5hLGk9ZCpkL3RoaXMuYS90aGlzLmErZypnLGw9Zzt2YXIgcCxxLHIscyx0O2ZvcihmPW07ZjstLWYpaWYodD10aGlzLmUqTWF0aC5zaW4obCkscD1NYXRoLnNxcnQoMS10KnQpKk1hdGgudGFuKGwpLHE9dGhpcy5hKmoodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxsKSxyPXRoaXMuZTAtMip0aGlzLmUxKk1hdGguY29zKDIqbCkrNCp0aGlzLmUyKk1hdGguY29zKDQqbCktNip0aGlzLmUzKk1hdGguY29zKDYqbCkscz1xL3RoaXMuYSxuPShnKihwKnMrMSktcy0uNSpwKihzKnMraSkpLyh0aGlzLmVzKk1hdGguc2luKDIqbCkqKHMqcytpLTIqZypzKS8oNCpwKSsoZy1zKSoocCpyLTIvTWF0aC5zaW4oMipsKSktciksbC09bixNYXRoLmFicyhuKTw9ayl7Yz1sO2JyZWFrfXA9TWF0aC5zcXJ0KDEtdGhpcy5lcypNYXRoLnBvdyhNYXRoLnNpbihjKSwyKSkqTWF0aC50YW4oYyksYj1oKHRoaXMubG9uZzArTWF0aC5hc2luKGQqcC90aGlzLmEpL01hdGguc2luKGMpKX1yZXR1cm4gYS54PWIsYS55PWMsYX0sYy5uYW1lcz1bXCJQb2x5Y29uaWNcIixcInBvbHlcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbGF0XCI6NCxcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9lMGZuXCI6NyxcIi4uL2NvbW1vbi9lMWZuXCI6OCxcIi4uL2NvbW1vbi9lMmZuXCI6OSxcIi4uL2NvbW1vbi9lM2ZuXCI6MTAsXCIuLi9jb21tb24vZ05cIjoxMSxcIi4uL2NvbW1vbi9tbGZuXCI6MTR9XSw1NzpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKSxlPWEoXCIuLi9jb21tb24vYWRqdXN0X2xhdFwiKSxmPWEoXCIuLi9jb21tb24vcGpfZW5mblwiKSxnPTIwLGg9YShcIi4uL2NvbW1vbi9wal9tbGZuXCIpLGk9YShcIi4uL2NvbW1vbi9wal9pbnZfbWxmblwiKSxqPU1hdGguUEkvMixrPTFlLTEwLGw9YShcIi4uL2NvbW1vbi9hc2luelwiKTtjLmluaXQ9ZnVuY3Rpb24oKXt0aGlzLnNwaGVyZT8odGhpcy5uPTEsdGhpcy5tPTAsdGhpcy5lcz0wLHRoaXMuQ195PU1hdGguc3FydCgodGhpcy5tKzEpL3RoaXMubiksdGhpcy5DX3g9dGhpcy5DX3kvKHRoaXMubSsxKSk6dGhpcy5lbj1mKHRoaXMuZXMpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxlPWEueCxmPWEueTtpZihlPWQoZS10aGlzLmxvbmcwKSx0aGlzLnNwaGVyZSl7aWYodGhpcy5tKWZvcih2YXIgaT10aGlzLm4qTWF0aC5zaW4oZiksaj1nO2o7LS1qKXt2YXIgbD0odGhpcy5tKmYrTWF0aC5zaW4oZiktaSkvKHRoaXMubStNYXRoLmNvcyhmKSk7aWYoZi09bCxNYXRoLmFicyhsKTxrKWJyZWFrfWVsc2UgZj0xIT09dGhpcy5uP01hdGguYXNpbih0aGlzLm4qTWF0aC5zaW4oZikpOmY7Yj10aGlzLmEqdGhpcy5DX3gqZSoodGhpcy5tK01hdGguY29zKGYpKSxjPXRoaXMuYSp0aGlzLkNfeSpmfWVsc2V7dmFyIG09TWF0aC5zaW4oZiksbj1NYXRoLmNvcyhmKTtjPXRoaXMuYSpoKGYsbSxuLHRoaXMuZW4pLGI9dGhpcy5hKmUqbi9NYXRoLnNxcnQoMS10aGlzLmVzKm0qbSl9cmV0dXJuIGEueD1iLGEueT1jLGF9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYixjLGYsZztyZXR1cm4gYS54LT10aGlzLngwLGY9YS54L3RoaXMuYSxhLnktPXRoaXMueTAsYj1hLnkvdGhpcy5hLHRoaXMuc3BoZXJlPyhiLz10aGlzLkNfeSxmLz10aGlzLkNfeCoodGhpcy5tK01hdGguY29zKGIpKSx0aGlzLm0/Yj1sKCh0aGlzLm0qYitNYXRoLnNpbihiKSkvdGhpcy5uKToxIT09dGhpcy5uJiYoYj1sKE1hdGguc2luKGIpL3RoaXMubikpLGY9ZChmK3RoaXMubG9uZzApLGI9ZShiKSk6KGI9aShhLnkvdGhpcy5hLHRoaXMuZXMsdGhpcy5lbiksZz1NYXRoLmFicyhiKSxqPmc/KGc9TWF0aC5zaW4oYiksYz10aGlzLmxvbmcwK2EueCpNYXRoLnNxcnQoMS10aGlzLmVzKmcqZykvKHRoaXMuYSpNYXRoLmNvcyhiKSksZj1kKGMpKTpqPmctayYmKGY9dGhpcy5sb25nMCkpLGEueD1mLGEueT1iLGF9LGMubmFtZXM9W1wiU2ludXNvaWRhbFwiLFwic2ludVwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sYXRcIjo0LFwiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL2FzaW56XCI6NixcIi4uL2NvbW1vbi9wal9lbmZuXCI6MTcsXCIuLi9jb21tb24vcGpfaW52X21sZm5cIjoxOCxcIi4uL2NvbW1vbi9wal9tbGZuXCI6MTl9XSw1ODpbZnVuY3Rpb24oYSxiLGMpe2MuaW5pdD1mdW5jdGlvbigpe3ZhciBhPXRoaXMubGF0MDt0aGlzLmxhbWJkYTA9dGhpcy5sb25nMDt2YXIgYj1NYXRoLnNpbihhKSxjPXRoaXMuYSxkPXRoaXMucmYsZT0xL2QsZj0yKmUtTWF0aC5wb3coZSwyKSxnPXRoaXMuZT1NYXRoLnNxcnQoZik7dGhpcy5SPXRoaXMuazAqYypNYXRoLnNxcnQoMS1mKS8oMS1mKk1hdGgucG93KGIsMikpLHRoaXMuYWxwaGE9TWF0aC5zcXJ0KDErZi8oMS1mKSpNYXRoLnBvdyhNYXRoLmNvcyhhKSw0KSksdGhpcy5iMD1NYXRoLmFzaW4oYi90aGlzLmFscGhhKTt2YXIgaD1NYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJLzQrdGhpcy5iMC8yKSksaT1NYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJLzQrYS8yKSksaj1NYXRoLmxvZygoMStnKmIpLygxLWcqYikpO3RoaXMuSz1oLXRoaXMuYWxwaGEqaSt0aGlzLmFscGhhKmcvMipqfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSS80LWEueS8yKSksYz10aGlzLmUvMipNYXRoLmxvZygoMSt0aGlzLmUqTWF0aC5zaW4oYS55KSkvKDEtdGhpcy5lKk1hdGguc2luKGEueSkpKSxkPS10aGlzLmFscGhhKihiK2MpK3RoaXMuSyxlPTIqKE1hdGguYXRhbihNYXRoLmV4cChkKSktTWF0aC5QSS80KSxmPXRoaXMuYWxwaGEqKGEueC10aGlzLmxhbWJkYTApLGc9TWF0aC5hdGFuKE1hdGguc2luKGYpLyhNYXRoLnNpbih0aGlzLmIwKSpNYXRoLnRhbihlKStNYXRoLmNvcyh0aGlzLmIwKSpNYXRoLmNvcyhmKSkpLGg9TWF0aC5hc2luKE1hdGguY29zKHRoaXMuYjApKk1hdGguc2luKGUpLU1hdGguc2luKHRoaXMuYjApKk1hdGguY29zKGUpKk1hdGguY29zKGYpKTtyZXR1cm4gYS55PXRoaXMuUi8yKk1hdGgubG9nKCgxK01hdGguc2luKGgpKS8oMS1NYXRoLnNpbihoKSkpK3RoaXMueTAsYS54PXRoaXMuUipnK3RoaXMueDAsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLngtdGhpcy54MCxjPWEueS10aGlzLnkwLGQ9Yi90aGlzLlIsZT0yKihNYXRoLmF0YW4oTWF0aC5leHAoYy90aGlzLlIpKS1NYXRoLlBJLzQpLGY9TWF0aC5hc2luKE1hdGguY29zKHRoaXMuYjApKk1hdGguc2luKGUpK01hdGguc2luKHRoaXMuYjApKk1hdGguY29zKGUpKk1hdGguY29zKGQpKSxnPU1hdGguYXRhbihNYXRoLnNpbihkKS8oTWF0aC5jb3ModGhpcy5iMCkqTWF0aC5jb3MoZCktTWF0aC5zaW4odGhpcy5iMCkqTWF0aC50YW4oZSkpKSxoPXRoaXMubGFtYmRhMCtnL3RoaXMuYWxwaGEsaT0wLGo9ZixrPS0xZTMsbD0wO01hdGguYWJzKGotayk+MWUtNzspe2lmKCsrbD4yMClyZXR1cm47aT0xL3RoaXMuYWxwaGEqKE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkvNCtmLzIpKS10aGlzLkspK3RoaXMuZSpNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJLzQrTWF0aC5hc2luKHRoaXMuZSpNYXRoLnNpbihqKSkvMikpLGs9aixqPTIqTWF0aC5hdGFuKE1hdGguZXhwKGkpKS1NYXRoLlBJLzJ9cmV0dXJuIGEueD1oLGEueT1qLGF9LGMubmFtZXM9W1wic29tZXJjXCJdfSx7fV0sNTk6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1NYXRoLlBJLzIsZT0xZS0xMCxmPWEoXCIuLi9jb21tb24vc2lnblwiKSxnPWEoXCIuLi9jb21tb24vbXNmbnpcIiksaD1hKFwiLi4vY29tbW9uL3RzZm56XCIpLGk9YShcIi4uL2NvbW1vbi9waGkyelwiKSxqPWEoXCIuLi9jb21tb24vYWRqdXN0X2xvblwiKTtjLnNzZm5fPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYio9YyxNYXRoLnRhbiguNSooZCthKSkqTWF0aC5wb3coKDEtYikvKDErYiksLjUqYyl9LGMuaW5pdD1mdW5jdGlvbigpe3RoaXMuY29zbGF0MD1NYXRoLmNvcyh0aGlzLmxhdDApLHRoaXMuc2lubGF0MD1NYXRoLnNpbih0aGlzLmxhdDApLHRoaXMuc3BoZXJlPzE9PT10aGlzLmswJiYhaXNOYU4odGhpcy5sYXRfdHMpJiZNYXRoLmFicyh0aGlzLmNvc2xhdDApPD1lJiYodGhpcy5rMD0uNSooMStmKHRoaXMubGF0MCkqTWF0aC5zaW4odGhpcy5sYXRfdHMpKSk6KE1hdGguYWJzKHRoaXMuY29zbGF0MCk8PWUmJih0aGlzLmNvbj10aGlzLmxhdDA+MD8xOi0xKSx0aGlzLmNvbnM9TWF0aC5zcXJ0KE1hdGgucG93KDErdGhpcy5lLDErdGhpcy5lKSpNYXRoLnBvdygxLXRoaXMuZSwxLXRoaXMuZSkpLDE9PT10aGlzLmswJiYhaXNOYU4odGhpcy5sYXRfdHMpJiZNYXRoLmFicyh0aGlzLmNvc2xhdDApPD1lJiYodGhpcy5rMD0uNSp0aGlzLmNvbnMqZyh0aGlzLmUsTWF0aC5zaW4odGhpcy5sYXRfdHMpLE1hdGguY29zKHRoaXMubGF0X3RzKSkvaCh0aGlzLmUsdGhpcy5jb24qdGhpcy5sYXRfdHMsdGhpcy5jb24qTWF0aC5zaW4odGhpcy5sYXRfdHMpKSksdGhpcy5tczE9Zyh0aGlzLmUsdGhpcy5zaW5sYXQwLHRoaXMuY29zbGF0MCksdGhpcy5YMD0yKk1hdGguYXRhbih0aGlzLnNzZm5fKHRoaXMubGF0MCx0aGlzLnNpbmxhdDAsdGhpcy5lKSktZCx0aGlzLmNvc1gwPU1hdGguY29zKHRoaXMuWDApLHRoaXMuc2luWDA9TWF0aC5zaW4odGhpcy5YMCkpfSxjLmZvcndhcmQ9ZnVuY3Rpb24oYSl7dmFyIGIsYyxmLGcsaSxrLGw9YS54LG09YS55LG49TWF0aC5zaW4obSksbz1NYXRoLmNvcyhtKSxwPWoobC10aGlzLmxvbmcwKTtyZXR1cm4gTWF0aC5hYnMoTWF0aC5hYnMobC10aGlzLmxvbmcwKS1NYXRoLlBJKTw9ZSYmTWF0aC5hYnMobSt0aGlzLmxhdDApPD1lPyhhLng9MC8wLGEueT0wLzAsYSk6dGhpcy5zcGhlcmU/KGI9Mip0aGlzLmswLygxK3RoaXMuc2lubGF0MCpuK3RoaXMuY29zbGF0MCpvKk1hdGguY29zKHApKSxhLng9dGhpcy5hKmIqbypNYXRoLnNpbihwKSt0aGlzLngwLGEueT10aGlzLmEqYioodGhpcy5jb3NsYXQwKm4tdGhpcy5zaW5sYXQwKm8qTWF0aC5jb3MocCkpK3RoaXMueTAsYSk6KGM9MipNYXRoLmF0YW4odGhpcy5zc2ZuXyhtLG4sdGhpcy5lKSktZCxnPU1hdGguY29zKGMpLGY9TWF0aC5zaW4oYyksTWF0aC5hYnModGhpcy5jb3NsYXQwKTw9ZT8oaT1oKHRoaXMuZSxtKnRoaXMuY29uLHRoaXMuY29uKm4pLGs9Mip0aGlzLmEqdGhpcy5rMCppL3RoaXMuY29ucyxhLng9dGhpcy54MCtrKk1hdGguc2luKGwtdGhpcy5sb25nMCksYS55PXRoaXMueTAtdGhpcy5jb24qaypNYXRoLmNvcyhsLXRoaXMubG9uZzApLGEpOihNYXRoLmFicyh0aGlzLnNpbmxhdDApPGU/KGI9Mip0aGlzLmEqdGhpcy5rMC8oMStnKk1hdGguY29zKHApKSxhLnk9YipmKTooYj0yKnRoaXMuYSp0aGlzLmswKnRoaXMubXMxLyh0aGlzLmNvc1gwKigxK3RoaXMuc2luWDAqZit0aGlzLmNvc1gwKmcqTWF0aC5jb3MocCkpKSxhLnk9YioodGhpcy5jb3NYMCpmLXRoaXMuc2luWDAqZypNYXRoLmNvcyhwKSkrdGhpcy55MCksYS54PWIqZypNYXRoLnNpbihwKSt0aGlzLngwLGEpKX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe2EueC09dGhpcy54MCxhLnktPXRoaXMueTA7dmFyIGIsYyxmLGcsaCxrPU1hdGguc3FydChhLngqYS54K2EueSphLnkpO2lmKHRoaXMuc3BoZXJlKXt2YXIgbD0yKk1hdGguYXRhbihrLyguNSp0aGlzLmEqdGhpcy5rMCkpO3JldHVybiBiPXRoaXMubG9uZzAsYz10aGlzLmxhdDAsZT49az8oYS54PWIsYS55PWMsYSk6KGM9TWF0aC5hc2luKE1hdGguY29zKGwpKnRoaXMuc2lubGF0MCthLnkqTWF0aC5zaW4obCkqdGhpcy5jb3NsYXQwL2spLGI9aihNYXRoLmFicyh0aGlzLmNvc2xhdDApPGU/dGhpcy5sYXQwPjA/dGhpcy5sb25nMCtNYXRoLmF0YW4yKGEueCwtMSphLnkpOnRoaXMubG9uZzArTWF0aC5hdGFuMihhLngsYS55KTp0aGlzLmxvbmcwK01hdGguYXRhbjIoYS54Kk1hdGguc2luKGwpLGsqdGhpcy5jb3NsYXQwKk1hdGguY29zKGwpLWEueSp0aGlzLnNpbmxhdDAqTWF0aC5zaW4obCkpKSxhLng9YixhLnk9YyxhKX1pZihNYXRoLmFicyh0aGlzLmNvc2xhdDApPD1lKXtpZihlPj1rKXJldHVybiBjPXRoaXMubGF0MCxiPXRoaXMubG9uZzAsYS54PWIsYS55PWMsYTthLngqPXRoaXMuY29uLGEueSo9dGhpcy5jb24sZj1rKnRoaXMuY29ucy8oMip0aGlzLmEqdGhpcy5rMCksYz10aGlzLmNvbippKHRoaXMuZSxmKSxiPXRoaXMuY29uKmoodGhpcy5jb24qdGhpcy5sb25nMCtNYXRoLmF0YW4yKGEueCwtMSphLnkpKX1lbHNlIGc9MipNYXRoLmF0YW4oayp0aGlzLmNvc1gwLygyKnRoaXMuYSp0aGlzLmswKnRoaXMubXMxKSksYj10aGlzLmxvbmcwLGU+PWs/aD10aGlzLlgwOihoPU1hdGguYXNpbihNYXRoLmNvcyhnKSp0aGlzLnNpblgwK2EueSpNYXRoLnNpbihnKSp0aGlzLmNvc1gwL2spLGI9aih0aGlzLmxvbmcwK01hdGguYXRhbjIoYS54Kk1hdGguc2luKGcpLGsqdGhpcy5jb3NYMCpNYXRoLmNvcyhnKS1hLnkqdGhpcy5zaW5YMCpNYXRoLnNpbihnKSkpKSxjPS0xKmkodGhpcy5lLE1hdGgudGFuKC41KihkK2gpKSk7cmV0dXJuIGEueD1iLGEueT1jLGF9LGMubmFtZXM9W1wic3RlcmVcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9tc2ZuelwiOjE1LFwiLi4vY29tbW9uL3BoaTJ6XCI6MTYsXCIuLi9jb21tb24vc2lnblwiOjIxLFwiLi4vY29tbW9uL3RzZm56XCI6MjR9XSw2MDpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEoXCIuL2dhdXNzXCIpLGU9YShcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCIpO2MuaW5pdD1mdW5jdGlvbigpe2QuaW5pdC5hcHBseSh0aGlzKSx0aGlzLnJjJiYodGhpcy5zaW5jMD1NYXRoLnNpbih0aGlzLnBoaWMwKSx0aGlzLmNvc2MwPU1hdGguY29zKHRoaXMucGhpYzApLHRoaXMuUjI9Mip0aGlzLnJjLHRoaXMudGl0bGV8fCh0aGlzLnRpdGxlPVwiT2JsaXF1ZSBTdGVyZW9ncmFwaGljIEFsdGVybmF0aXZlXCIpKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZixnO3JldHVybiBhLng9ZShhLngtdGhpcy5sb25nMCksZC5mb3J3YXJkLmFwcGx5KHRoaXMsW2FdKSxiPU1hdGguc2luKGEueSksYz1NYXRoLmNvcyhhLnkpLGY9TWF0aC5jb3MoYS54KSxnPXRoaXMuazAqdGhpcy5SMi8oMSt0aGlzLnNpbmMwKmIrdGhpcy5jb3NjMCpjKmYpLGEueD1nKmMqTWF0aC5zaW4oYS54KSxhLnk9ZyoodGhpcy5jb3NjMCpiLXRoaXMuc2luYzAqYypmKSxhLng9dGhpcy5hKmEueCt0aGlzLngwLGEueT10aGlzLmEqYS55K3RoaXMueTAsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZixnLGg7aWYoYS54PShhLngtdGhpcy54MCkvdGhpcy5hLGEueT0oYS55LXRoaXMueTApL3RoaXMuYSxhLngvPXRoaXMuazAsYS55Lz10aGlzLmswLGg9TWF0aC5zcXJ0KGEueCphLngrYS55KmEueSkpe3ZhciBpPTIqTWF0aC5hdGFuMihoLHRoaXMuUjIpO2I9TWF0aC5zaW4oaSksYz1NYXRoLmNvcyhpKSxnPU1hdGguYXNpbihjKnRoaXMuc2luYzArYS55KmIqdGhpcy5jb3NjMC9oKSxmPU1hdGguYXRhbjIoYS54KmIsaCp0aGlzLmNvc2MwKmMtYS55KnRoaXMuc2luYzAqYil9ZWxzZSBnPXRoaXMucGhpYzAsZj0wO3JldHVybiBhLng9ZixhLnk9ZyxkLmludmVyc2UuYXBwbHkodGhpcyxbYV0pLGEueD1lKGEueCt0aGlzLmxvbmcwKSxhfSxjLm5hbWVzPVtcIlN0ZXJlb2dyYXBoaWNfTm9ydGhfUG9sZVwiLFwiT2JsaXF1ZV9TdGVyZW9ncmFwaGljXCIsXCJQb2xhcl9TdGVyZW9ncmFwaGljXCIsXCJzdGVyZWFcIixcIk9ibGlxdWUgU3RlcmVvZ3JhcGhpYyBBbHRlcm5hdGl2ZVwiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi9nYXVzc1wiOjQ1fV0sNjE6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2UwZm5cIiksZT1hKFwiLi4vY29tbW9uL2UxZm5cIiksZj1hKFwiLi4vY29tbW9uL2UyZm5cIiksZz1hKFwiLi4vY29tbW9uL2UzZm5cIiksaD1hKFwiLi4vY29tbW9uL21sZm5cIiksaT1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksaj1NYXRoLlBJLzIsaz0xZS0xMCxsPWEoXCIuLi9jb21tb24vc2lnblwiKSxtPWEoXCIuLi9jb21tb24vYXNpbnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5lMD1kKHRoaXMuZXMpLHRoaXMuZTE9ZSh0aGlzLmVzKSx0aGlzLmUyPWYodGhpcy5lcyksdGhpcy5lMz1nKHRoaXMuZXMpLHRoaXMubWwwPXRoaXMuYSpoKHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsdGhpcy5sYXQwKX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPWEueCxmPWEueSxnPWkoZS10aGlzLmxvbmcwKSxqPU1hdGguc2luKGYpLGs9TWF0aC5jb3MoZik7aWYodGhpcy5zcGhlcmUpe3ZhciBsPWsqTWF0aC5zaW4oZyk7aWYoTWF0aC5hYnMoTWF0aC5hYnMobCktMSk8MWUtMTApcmV0dXJuIDkzO2M9LjUqdGhpcy5hKnRoaXMuazAqTWF0aC5sb2coKDErbCkvKDEtbCkpLGI9TWF0aC5hY29zKGsqTWF0aC5jb3MoZykvTWF0aC5zcXJ0KDEtbCpsKSksMD5mJiYoYj0tYiksZD10aGlzLmEqdGhpcy5rMCooYi10aGlzLmxhdDApfWVsc2V7dmFyIG09aypnLG49TWF0aC5wb3cobSwyKSxvPXRoaXMuZXAyKk1hdGgucG93KGssMikscD1NYXRoLnRhbihmKSxxPU1hdGgucG93KHAsMik7Yj0xLXRoaXMuZXMqTWF0aC5wb3coaiwyKTt2YXIgcj10aGlzLmEvTWF0aC5zcXJ0KGIpLHM9dGhpcy5hKmgodGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxmKTtjPXRoaXMuazAqciptKigxK24vNiooMS1xK28rbi8yMCooNS0xOCpxK01hdGgucG93KHEsMikrNzIqby01OCp0aGlzLmVwMikpKSt0aGlzLngwLGQ9dGhpcy5rMCoocy10aGlzLm1sMCtyKnAqbiooLjUrbi8yNCooNS1xKzkqbys0Kk1hdGgucG93KG8sMikrbi8zMCooNjEtNTgqcStNYXRoLnBvdyhxLDIpKzYwMCpvLTMzMCp0aGlzLmVwMikpKSkrdGhpcy55MH1yZXR1cm4gYS54PWMsYS55PWQsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPTY7aWYodGhpcy5zcGhlcmUpe3ZhciBuPU1hdGguZXhwKGEueC8odGhpcy5hKnRoaXMuazApKSxvPS41KihuLTEvbikscD10aGlzLmxhdDArYS55Lyh0aGlzLmEqdGhpcy5rMCkscT1NYXRoLmNvcyhwKTtiPU1hdGguc3FydCgoMS1xKnEpLygxK28qbykpLGY9bShiKSwwPnAmJihmPS1mKSxnPTA9PT1vJiYwPT09cT90aGlzLmxvbmcwOmkoTWF0aC5hdGFuMihvLHEpK3RoaXMubG9uZzApfWVsc2V7dmFyIHI9YS54LXRoaXMueDAscz1hLnktdGhpcy55MDtmb3IoYj0odGhpcy5tbDArcy90aGlzLmswKS90aGlzLmEsYz1iLGU9MDshMCYmKGQ9KGIrdGhpcy5lMSpNYXRoLnNpbigyKmMpLXRoaXMuZTIqTWF0aC5zaW4oNCpjKSt0aGlzLmUzKk1hdGguc2luKDYqYykpL3RoaXMuZTAtYyxjKz1kLCEoTWF0aC5hYnMoZCk8PWspKTtlKyspaWYoZT49aClyZXR1cm4gOTU7aWYoTWF0aC5hYnMoYyk8ail7dmFyIHQ9TWF0aC5zaW4oYyksdT1NYXRoLmNvcyhjKSx2PU1hdGgudGFuKGMpLHc9dGhpcy5lcDIqTWF0aC5wb3codSwyKSx4PU1hdGgucG93KHcsMikseT1NYXRoLnBvdyh2LDIpLHo9TWF0aC5wb3coeSwyKTtiPTEtdGhpcy5lcypNYXRoLnBvdyh0LDIpO3ZhciBBPXRoaXMuYS9NYXRoLnNxcnQoYiksQj1BKigxLXRoaXMuZXMpL2IsQz1yLyhBKnRoaXMuazApLEQ9TWF0aC5wb3coQywyKTtmPWMtQSp2KkQvQiooLjUtRC8yNCooNSszKnkrMTAqdy00KngtOSp0aGlzLmVwMi1ELzMwKig2MSs5MCp5KzI5OCp3KzQ1KnotMjUyKnRoaXMuZXAyLTMqeCkpKSxnPWkodGhpcy5sb25nMCtDKigxLUQvNiooMSsyKnkrdy1ELzIwKig1LTIqdysyOCp5LTMqeCs4KnRoaXMuZXAyKzI0KnopKSkvdSl9ZWxzZSBmPWoqbChzKSxnPXRoaXMubG9uZzB9cmV0dXJuIGEueD1nLGEueT1mLGF9LGMubmFtZXM9W1wiVHJhbnN2ZXJzZV9NZXJjYXRvclwiLFwiVHJhbnN2ZXJzZSBNZXJjYXRvclwiLFwidG1lcmNcIl19LHtcIi4uL2NvbW1vbi9hZGp1c3RfbG9uXCI6NSxcIi4uL2NvbW1vbi9hc2luelwiOjYsXCIuLi9jb21tb24vZTBmblwiOjcsXCIuLi9jb21tb24vZTFmblwiOjgsXCIuLi9jb21tb24vZTJmblwiOjksXCIuLi9jb21tb24vZTNmblwiOjEwLFwiLi4vY29tbW9uL21sZm5cIjoxNCxcIi4uL2NvbW1vbi9zaWduXCI6MjF9XSw2MjpbZnVuY3Rpb24oYSxiLGMpe3ZhciBkPS4wMTc0NTMyOTI1MTk5NDMyOTUsZT1hKFwiLi90bWVyY1wiKTtjLmRlcGVuZHNPbj1cInRtZXJjXCIsYy5pbml0PWZ1bmN0aW9uKCl7dGhpcy56b25lJiYodGhpcy5sYXQwPTAsdGhpcy5sb25nMD0oNipNYXRoLmFicyh0aGlzLnpvbmUpLTE4MykqZCx0aGlzLngwPTVlNSx0aGlzLnkwPXRoaXMudXRtU291dGg/MWU3OjAsdGhpcy5rMD0uOTk5NixlLmluaXQuYXBwbHkodGhpcyksdGhpcy5mb3J3YXJkPWUuZm9yd2FyZCx0aGlzLmludmVyc2U9ZS5pbnZlcnNlKX0sYy5uYW1lcz1bXCJVbml2ZXJzYWwgVHJhbnN2ZXJzZSBNZXJjYXRvciBTeXN0ZW1cIixcInV0bVwiXX0se1wiLi90bWVyY1wiOjYxfV0sNjM6W2Z1bmN0aW9uKGEsYixjKXt2YXIgZD1hKFwiLi4vY29tbW9uL2FkanVzdF9sb25cIiksZT1NYXRoLlBJLzIsZj0xZS0xMCxnPWEoXCIuLi9jb21tb24vYXNpbnpcIik7Yy5pbml0PWZ1bmN0aW9uKCl7dGhpcy5SPXRoaXMuYX0sYy5mb3J3YXJkPWZ1bmN0aW9uKGEpe3ZhciBiLGMsaD1hLngsaT1hLnksaj1kKGgtdGhpcy5sb25nMCk7TWF0aC5hYnMoaSk8PWYmJihiPXRoaXMueDArdGhpcy5SKmosYz10aGlzLnkwKTt2YXIgaz1nKDIqTWF0aC5hYnMoaS9NYXRoLlBJKSk7KE1hdGguYWJzKGopPD1mfHxNYXRoLmFicyhNYXRoLmFicyhpKS1lKTw9ZikmJihiPXRoaXMueDAsYz1pPj0wP3RoaXMueTArTWF0aC5QSSp0aGlzLlIqTWF0aC50YW4oLjUqayk6dGhpcy55MCtNYXRoLlBJKnRoaXMuUiotTWF0aC50YW4oLjUqaykpO3ZhciBsPS41Kk1hdGguYWJzKE1hdGguUEkvai1qL01hdGguUEkpLG09bCpsLG49TWF0aC5zaW4oayksbz1NYXRoLmNvcyhrKSxwPW8vKG4rby0xKSxxPXAqcCxyPXAqKDIvbi0xKSxzPXIqcix0PU1hdGguUEkqdGhpcy5SKihsKihwLXMpK01hdGguc3FydChtKihwLXMpKihwLXMpLShzK20pKihxLXMpKSkvKHMrbSk7MD5qJiYodD0tdCksYj10aGlzLngwK3Q7dmFyIHU9bStwO3JldHVybiB0PU1hdGguUEkqdGhpcy5SKihyKnUtbCpNYXRoLnNxcnQoKHMrbSkqKG0rMSktdSp1KSkvKHMrbSksYz1pPj0wP3RoaXMueTArdDp0aGlzLnkwLXQsYS54PWIsYS55PWMsYX0sYy5pbnZlcnNlPWZ1bmN0aW9uKGEpe3ZhciBiLGMsZSxnLGgsaSxqLGssbCxtLG4sbyxwO3JldHVybiBhLngtPXRoaXMueDAsYS55LT10aGlzLnkwLG49TWF0aC5QSSp0aGlzLlIsZT1hLngvbixnPWEueS9uLGg9ZSplK2cqZyxpPS1NYXRoLmFicyhnKSooMStoKSxqPWktMipnKmcrZSplLGs9LTIqaSsxKzIqZypnK2gqaCxwPWcqZy9rKygyKmoqaipqL2svay9rLTkqaSpqL2svaykvMjcsbD0oaS1qKmovMy9rKS9rLG09MipNYXRoLnNxcnQoLWwvMyksbj0zKnAvbC9tLE1hdGguYWJzKG4pPjEmJihuPW4+PTA/MTotMSksbz1NYXRoLmFjb3MobikvMyxjPWEueT49MD8oLW0qTWF0aC5jb3MobytNYXRoLlBJLzMpLWovMy9rKSpNYXRoLlBJOi0oLW0qTWF0aC5jb3MobytNYXRoLlBJLzMpLWovMy9rKSpNYXRoLlBJLGI9TWF0aC5hYnMoZSk8Zj90aGlzLmxvbmcwOmQodGhpcy5sb25nMCtNYXRoLlBJKihoLTErTWF0aC5zcXJ0KDErMiooZSplLWcqZykraCpoKSkvMi9lKSxhLng9YixhLnk9YyxhfSxjLm5hbWVzPVtcIlZhbl9kZXJfR3JpbnRlbl9JXCIsXCJWYW5EZXJHcmludGVuXCIsXCJ2YW5kZ1wiXX0se1wiLi4vY29tbW9uL2FkanVzdF9sb25cIjo1LFwiLi4vY29tbW9uL2FzaW56XCI6Nn1dLDY0OltmdW5jdGlvbihhLGIpe3ZhciBjPS4wMTc0NTMyOTI1MTk5NDMyOTUsZD01Ny4yOTU3Nzk1MTMwODIzMixlPTEsZj0yLGc9YShcIi4vZGF0dW1fdHJhbnNmb3JtXCIpLGg9YShcIi4vYWRqdXN0X2F4aXNcIiksaT1hKFwiLi9Qcm9qXCIpLGo9YShcIi4vY29tbW9uL3RvUG9pbnRcIik7Yi5leHBvcnRzPWZ1bmN0aW9uIGsoYSxiLGwpe2Z1bmN0aW9uIG0oYSxiKXtyZXR1cm4oYS5kYXR1bS5kYXR1bV90eXBlPT09ZXx8YS5kYXR1bS5kYXR1bV90eXBlPT09ZikmJlwiV0dTODRcIiE9PWIuZGF0dW1Db2RlfXZhciBuO3JldHVybiBBcnJheS5pc0FycmF5KGwpJiYobD1qKGwpKSxhLmRhdHVtJiZiLmRhdHVtJiYobShhLGIpfHxtKGIsYSkpJiYobj1uZXcgaShcIldHUzg0XCIpLGsoYSxuLGwpLGE9biksXCJlbnVcIiE9PWEuYXhpcyYmaChhLCExLGwpLFwibG9uZ2xhdFwiPT09YS5wcm9qTmFtZT8obC54Kj1jLGwueSo9Yyk6KGEudG9fbWV0ZXImJihsLngqPWEudG9fbWV0ZXIsbC55Kj1hLnRvX21ldGVyKSxhLmludmVyc2UobCkpLGEuZnJvbV9ncmVlbndpY2gmJihsLngrPWEuZnJvbV9ncmVlbndpY2gpLGw9ZyhhLmRhdHVtLGIuZGF0dW0sbCksYi5mcm9tX2dyZWVud2ljaCYmKGwueC09Yi5mcm9tX2dyZWVud2ljaCksXCJsb25nbGF0XCI9PT1iLnByb2pOYW1lPyhsLngqPWQsbC55Kj1kKTooYi5mb3J3YXJkKGwpLGIudG9fbWV0ZXImJihsLngvPWIudG9fbWV0ZXIsbC55Lz1iLnRvX21ldGVyKSksXCJlbnVcIiE9PWIuYXhpcyYmaChiLCEwLGwpLGx9fSx7XCIuL1Byb2pcIjoyLFwiLi9hZGp1c3RfYXhpc1wiOjMsXCIuL2NvbW1vbi90b1BvaW50XCI6MjMsXCIuL2RhdHVtX3RyYW5zZm9ybVwiOjMwfV0sNjU6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7YVtiXT1jLm1hcChmdW5jdGlvbihhKXt2YXIgYj17fTtyZXR1cm4gZChhLGIpLGJ9KS5yZWR1Y2UoZnVuY3Rpb24oYSxiKXtyZXR1cm4gaShhLGIpfSx7fSl9ZnVuY3Rpb24gZChhLGIpe3ZhciBlO3JldHVybiBBcnJheS5pc0FycmF5KGEpPyhlPWEuc2hpZnQoKSxcIlBBUkFNRVRFUlwiPT09ZSYmKGU9YS5zaGlmdCgpKSwxPT09YS5sZW5ndGg/QXJyYXkuaXNBcnJheShhWzBdKT8oYltlXT17fSxkKGFbMF0sYltlXSkpOmJbZV09YVswXTphLmxlbmd0aD9cIlRPV0dTODRcIj09PWU/YltlXT1hOihiW2VdPXt9LFtcIlVOSVRcIixcIlBSSU1FTVwiLFwiVkVSVF9EQVRVTVwiXS5pbmRleE9mKGUpPi0xPyhiW2VdPXtuYW1lOmFbMF0udG9Mb3dlckNhc2UoKSxjb252ZXJ0OmFbMV19LDM9PT1hLmxlbmd0aCYmKGJbZV0uYXV0aD1hWzJdKSk6XCJTUEhFUk9JRFwiPT09ZT8oYltlXT17bmFtZTphWzBdLGE6YVsxXSxyZjphWzJdfSw0PT09YS5sZW5ndGgmJihiW2VdLmF1dGg9YVszXSkpOltcIkdFT0dDU1wiLFwiR0VPQ0NTXCIsXCJEQVRVTVwiLFwiVkVSVF9DU1wiLFwiQ09NUERfQ1NcIixcIkxPQ0FMX0NTXCIsXCJGSVRURURfQ1NcIixcIkxPQ0FMX0RBVFVNXCJdLmluZGV4T2YoZSk+LTE/KGFbMF09W1wibmFtZVwiLGFbMF1dLGMoYixlLGEpKTphLmV2ZXJ5KGZ1bmN0aW9uKGEpe3JldHVybiBBcnJheS5pc0FycmF5KGEpfSk/YyhiLGUsYSk6ZChhLGJbZV0pKTpiW2VdPSEwLHZvaWQgMCk6dm9pZChiW2FdPSEwKX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9YlswXSxkPWJbMV07IShjIGluIGEpJiZkIGluIGEmJihhW2NdPWFbZF0sMz09PWIubGVuZ3RoJiYoYVtjXT1iWzJdKGFbY10pKSl9ZnVuY3Rpb24gZihhKXtyZXR1cm4gYSpofWZ1bmN0aW9uIGcoYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLnRvX21ldGVyfHwxO3JldHVybiBwYXJzZUZsb2F0KGIsMTApKmN9XCJHRU9HQ1NcIj09PWEudHlwZT9hLnByb2pOYW1lPVwibG9uZ2xhdFwiOlwiTE9DQUxfQ1NcIj09PWEudHlwZT8oYS5wcm9qTmFtZT1cImlkZW50aXR5XCIsYS5sb2NhbD0hMCk6YS5wcm9qTmFtZT1cIm9iamVjdFwiPT10eXBlb2YgYS5QUk9KRUNUSU9OP09iamVjdC5rZXlzKGEuUFJPSkVDVElPTilbMF06YS5QUk9KRUNUSU9OLGEuVU5JVCYmKGEudW5pdHM9YS5VTklULm5hbWUudG9Mb3dlckNhc2UoKSxcIm1ldHJlXCI9PT1hLnVuaXRzJiYoYS51bml0cz1cIm1ldGVyXCIpLGEuVU5JVC5jb252ZXJ0JiYoYS50b19tZXRlcj1wYXJzZUZsb2F0KGEuVU5JVC5jb252ZXJ0LDEwKSkpLGEuR0VPR0NTJiYoYS5kYXR1bUNvZGU9YS5HRU9HQ1MuREFUVU0/YS5HRU9HQ1MuREFUVU0ubmFtZS50b0xvd2VyQ2FzZSgpOmEuR0VPR0NTLm5hbWUudG9Mb3dlckNhc2UoKSxcImRfXCI9PT1hLmRhdHVtQ29kZS5zbGljZSgwLDIpJiYoYS5kYXR1bUNvZGU9YS5kYXR1bUNvZGUuc2xpY2UoMikpLChcIm5ld196ZWFsYW5kX2dlb2RldGljX2RhdHVtXzE5NDlcIj09PWEuZGF0dW1Db2RlfHxcIm5ld196ZWFsYW5kXzE5NDlcIj09PWEuZGF0dW1Db2RlKSYmKGEuZGF0dW1Db2RlPVwibnpnZDQ5XCIpLFwid2dzXzE5ODRcIj09PWEuZGF0dW1Db2RlJiYoXCJNZXJjYXRvcl9BdXhpbGlhcnlfU3BoZXJlXCI9PT1hLlBST0pFQ1RJT04mJihhLnNwaGVyZT0hMCksYS5kYXR1bUNvZGU9XCJ3Z3M4NFwiKSxcIl9mZXJyb1wiPT09YS5kYXR1bUNvZGUuc2xpY2UoLTYpJiYoYS5kYXR1bUNvZGU9YS5kYXR1bUNvZGUuc2xpY2UoMCwtNikpLFwiX2pha2FydGFcIj09PWEuZGF0dW1Db2RlLnNsaWNlKC04KSYmKGEuZGF0dW1Db2RlPWEuZGF0dW1Db2RlLnNsaWNlKDAsLTgpKSx+YS5kYXR1bUNvZGUuaW5kZXhPZihcImJlbGdlXCIpJiYoYS5kYXR1bUNvZGU9XCJybmI3MlwiKSxhLkdFT0dDUy5EQVRVTSYmYS5HRU9HQ1MuREFUVU0uU1BIRVJPSUQmJihhLmVsbHBzPWEuR0VPR0NTLkRBVFVNLlNQSEVST0lELm5hbWUucmVwbGFjZShcIl8xOVwiLFwiXCIpLnJlcGxhY2UoL1tDY11sYXJrZVxcXzE4LyxcImNscmtcIiksXCJpbnRlcm5hdGlvbmFsXCI9PT1hLmVsbHBzLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwxMykmJihhLmVsbHBzPVwiaW50bFwiKSxhLmE9YS5HRU9HQ1MuREFUVU0uU1BIRVJPSUQuYSxhLnJmPXBhcnNlRmxvYXQoYS5HRU9HQ1MuREFUVU0uU1BIRVJPSUQucmYsMTApKSx+YS5kYXR1bUNvZGUuaW5kZXhPZihcIm9zZ2JfMTkzNlwiKSYmKGEuZGF0dW1Db2RlPVwib3NnYjM2XCIpKSxhLmImJiFpc0Zpbml0ZShhLmIpJiYoYS5iPWEuYSk7XG52YXIgYz1mdW5jdGlvbihiKXtyZXR1cm4gZShhLGIpfSxkPVtbXCJzdGFuZGFyZF9wYXJhbGxlbF8xXCIsXCJTdGFuZGFyZF9QYXJhbGxlbF8xXCJdLFtcInN0YW5kYXJkX3BhcmFsbGVsXzJcIixcIlN0YW5kYXJkX1BhcmFsbGVsXzJcIl0sW1wiZmFsc2VfZWFzdGluZ1wiLFwiRmFsc2VfRWFzdGluZ1wiXSxbXCJmYWxzZV9ub3J0aGluZ1wiLFwiRmFsc2VfTm9ydGhpbmdcIl0sW1wiY2VudHJhbF9tZXJpZGlhblwiLFwiQ2VudHJhbF9NZXJpZGlhblwiXSxbXCJsYXRpdHVkZV9vZl9vcmlnaW5cIixcIkxhdGl0dWRlX09mX09yaWdpblwiXSxbXCJzY2FsZV9mYWN0b3JcIixcIlNjYWxlX0ZhY3RvclwiXSxbXCJrMFwiLFwic2NhbGVfZmFjdG9yXCJdLFtcImxhdGl0dWRlX29mX2NlbnRlclwiLFwiTGF0aXR1ZGVfb2ZfY2VudGVyXCJdLFtcImxhdDBcIixcImxhdGl0dWRlX29mX2NlbnRlclwiLGZdLFtcImxvbmdpdHVkZV9vZl9jZW50ZXJcIixcIkxvbmdpdHVkZV9PZl9DZW50ZXJcIl0sW1wibG9uZ2NcIixcImxvbmdpdHVkZV9vZl9jZW50ZXJcIixmXSxbXCJ4MFwiLFwiZmFsc2VfZWFzdGluZ1wiLGJdLFtcInkwXCIsXCJmYWxzZV9ub3J0aGluZ1wiLGJdLFtcImxvbmcwXCIsXCJjZW50cmFsX21lcmlkaWFuXCIsZl0sW1wibGF0MFwiLFwibGF0aXR1ZGVfb2Zfb3JpZ2luXCIsZl0sW1wibGF0MFwiLFwic3RhbmRhcmRfcGFyYWxsZWxfMVwiLGZdLFtcImxhdDFcIixcInN0YW5kYXJkX3BhcmFsbGVsXzFcIixmXSxbXCJsYXQyXCIsXCJzdGFuZGFyZF9wYXJhbGxlbF8yXCIsZl0sW1wiYWxwaGFcIixcImF6aW11dGhcIixmXSxbXCJzcnNDb2RlXCIsXCJuYW1lXCJdXTtkLmZvckVhY2goYyksYS5sb25nMHx8IWEubG9uZ2N8fFwiQWxiZXJzX0NvbmljX0VxdWFsX0FyZWFcIiE9PWEuUFJPSkVDVElPTiYmXCJMYW1iZXJ0X0F6aW11dGhhbF9FcXVhbF9BcmVhXCIhPT1hLlBST0pFQ1RJT058fChhLmxvbmcwPWEubG9uZ2MpfXZhciBoPS4wMTc0NTMyOTI1MTk5NDMyOTUsaT1hKFwiLi9leHRlbmRcIik7Yi5leHBvcnRzPWZ1bmN0aW9uKGEsYil7dmFyIGM9SlNPTi5wYXJzZSgoXCIsXCIrYSkucmVwbGFjZSgvXFxzKlxcLFxccyooW0EtWl8wLTldKz8pKFxcWykvZywnLFtcIiQxXCIsJykuc2xpY2UoMSkucmVwbGFjZSgvXFxzKlxcLFxccyooW0EtWl8wLTldKz8pXFxdL2csJyxcIiQxXCJdJykpLGU9Yy5zaGlmdCgpLGY9Yy5zaGlmdCgpO2MudW5zaGlmdChbXCJuYW1lXCIsZl0pLGMudW5zaGlmdChbXCJ0eXBlXCIsZV0pLGMudW5zaGlmdChcIm91dHB1dFwiKTt2YXIgaD17fTtyZXR1cm4gZChjLGgpLGcoaC5vdXRwdXQpLGkoYixoLm91dHB1dCl9fSx7XCIuL2V4dGVuZFwiOjMzfV0sNjY6W2Z1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe3JldHVybiBhKihNYXRoLlBJLzE4MCl9ZnVuY3Rpb24gZShhKXtyZXR1cm4gMTgwKihhL01hdGguUEkpfWZ1bmN0aW9uIGYoYSl7dmFyIGIsYyxlLGYsZyxpLGosayxsLG09YS5sYXQsbj1hLmxvbixvPTYzNzgxMzcscD0uMDA2Njk0MzgscT0uOTk5NixyPWQobSkscz1kKG4pO2w9TWF0aC5mbG9vcigobisxODApLzYpKzEsMTgwPT09biYmKGw9NjApLG0+PTU2JiY2ND5tJiZuPj0zJiYxMj5uJiYobD0zMiksbT49NzImJjg0Pm0mJihuPj0wJiY5Pm4/bD0zMTpuPj05JiYyMT5uP2w9MzM6bj49MjEmJjMzPm4/bD0zNTpuPj0zMyYmNDI+biYmKGw9MzcpKSxiPTYqKGwtMSktMTgwKzMsaz1kKGIpLGM9cC8oMS1wKSxlPW8vTWF0aC5zcXJ0KDEtcCpNYXRoLnNpbihyKSpNYXRoLnNpbihyKSksZj1NYXRoLnRhbihyKSpNYXRoLnRhbihyKSxnPWMqTWF0aC5jb3MocikqTWF0aC5jb3MociksaT1NYXRoLmNvcyhyKSoocy1rKSxqPW8qKCgxLXAvNC0zKnAqcC82NC01KnAqcCpwLzI1Nikqci0oMypwLzgrMypwKnAvMzIrNDUqcCpwKnAvMTAyNCkqTWF0aC5zaW4oMipyKSsoMTUqcCpwLzI1Nis0NSpwKnAqcC8xMDI0KSpNYXRoLnNpbig0KnIpLTM1KnAqcCpwLzMwNzIqTWF0aC5zaW4oNipyKSk7dmFyIHQ9cSplKihpKygxLWYrZykqaSppKmkvNisoNS0xOCpmK2YqZis3MipnLTU4KmMpKmkqaSppKmkqaS8xMjApKzVlNSx1PXEqKGorZSpNYXRoLnRhbihyKSooaSppLzIrKDUtZis5KmcrNCpnKmcpKmkqaSppKmkvMjQrKDYxLTU4KmYrZipmKzYwMCpnLTMzMCpjKSppKmkqaSppKmkqaS83MjApKTtyZXR1cm4gMD5tJiYodSs9MWU3KSx7bm9ydGhpbmc6TWF0aC5yb3VuZCh1KSxlYXN0aW5nOk1hdGgucm91bmQodCksem9uZU51bWJlcjpsLHpvbmVMZXR0ZXI6aChtKX19ZnVuY3Rpb24gZyhhKXt2YXIgYj1hLm5vcnRoaW5nLGM9YS5lYXN0aW5nLGQ9YS56b25lTGV0dGVyLGY9YS56b25lTnVtYmVyO2lmKDA+Znx8Zj42MClyZXR1cm4gbnVsbDt2YXIgaCxpLGosayxsLG0sbixvLHAscSxyPS45OTk2LHM9NjM3ODEzNyx0PS4wMDY2OTQzOCx1PSgxLU1hdGguc3FydCgxLXQpKS8oMStNYXRoLnNxcnQoMS10KSksdj1jLTVlNSx3PWI7XCJOXCI+ZCYmKHctPTFlNyksbz02KihmLTEpLTE4MCszLGg9dC8oMS10KSxuPXcvcixwPW4vKHMqKDEtdC80LTMqdCp0LzY0LTUqdCp0KnQvMjU2KSkscT1wKygzKnUvMi0yNyp1KnUqdS8zMikqTWF0aC5zaW4oMipwKSsoMjEqdSp1LzE2LTU1KnUqdSp1KnUvMzIpKk1hdGguc2luKDQqcCkrMTUxKnUqdSp1Lzk2Kk1hdGguc2luKDYqcCksaT1zL01hdGguc3FydCgxLXQqTWF0aC5zaW4ocSkqTWF0aC5zaW4ocSkpLGo9TWF0aC50YW4ocSkqTWF0aC50YW4ocSksaz1oKk1hdGguY29zKHEpKk1hdGguY29zKHEpLGw9cyooMS10KS9NYXRoLnBvdygxLXQqTWF0aC5zaW4ocSkqTWF0aC5zaW4ocSksMS41KSxtPXYvKGkqcik7dmFyIHg9cS1pKk1hdGgudGFuKHEpL2wqKG0qbS8yLSg1KzMqaisxMCprLTQqayprLTkqaCkqbSptKm0qbS8yNCsoNjErOTAqaisyOTgqays0NSpqKmotMjUyKmgtMyprKmspKm0qbSptKm0qbSptLzcyMCk7eD1lKHgpO3ZhciB5PShtLSgxKzIqaitrKSptKm0qbS82Kyg1LTIqaysyOCpqLTMqayprKzgqaCsyNCpqKmopKm0qbSptKm0qbS8xMjApL01hdGguY29zKHEpO3k9bytlKHkpO3ZhciB6O2lmKGEuYWNjdXJhY3kpe3ZhciBBPWcoe25vcnRoaW5nOmEubm9ydGhpbmcrYS5hY2N1cmFjeSxlYXN0aW5nOmEuZWFzdGluZythLmFjY3VyYWN5LHpvbmVMZXR0ZXI6YS56b25lTGV0dGVyLHpvbmVOdW1iZXI6YS56b25lTnVtYmVyfSk7ej17dG9wOkEubGF0LHJpZ2h0OkEubG9uLGJvdHRvbTp4LGxlZnQ6eX19ZWxzZSB6PXtsYXQ6eCxsb246eX07cmV0dXJuIHp9ZnVuY3Rpb24gaChhKXt2YXIgYj1cIlpcIjtyZXR1cm4gODQ+PWEmJmE+PTcyP2I9XCJYXCI6NzI+YSYmYT49NjQ/Yj1cIldcIjo2ND5hJiZhPj01Nj9iPVwiVlwiOjU2PmEmJmE+PTQ4P2I9XCJVXCI6NDg+YSYmYT49NDA/Yj1cIlRcIjo0MD5hJiZhPj0zMj9iPVwiU1wiOjMyPmEmJmE+PTI0P2I9XCJSXCI6MjQ+YSYmYT49MTY/Yj1cIlFcIjoxNj5hJiZhPj04P2I9XCJQXCI6OD5hJiZhPj0wP2I9XCJOXCI6MD5hJiZhPj0tOD9iPVwiTVwiOi04PmEmJmE+PS0xNj9iPVwiTFwiOi0xNj5hJiZhPj0tMjQ/Yj1cIktcIjotMjQ+YSYmYT49LTMyP2I9XCJKXCI6LTMyPmEmJmE+PS00MD9iPVwiSFwiOi00MD5hJiZhPj0tNDg/Yj1cIkdcIjotNDg+YSYmYT49LTU2P2I9XCJGXCI6LTU2PmEmJmE+PS02ND9iPVwiRVwiOi02ND5hJiZhPj0tNzI/Yj1cIkRcIjotNzI+YSYmYT49LTgwJiYoYj1cIkNcIiksYn1mdW5jdGlvbiBpKGEsYil7dmFyIGM9XCJcIithLmVhc3RpbmcsZD1cIlwiK2Eubm9ydGhpbmc7cmV0dXJuIGEuem9uZU51bWJlcithLnpvbmVMZXR0ZXIraihhLmVhc3RpbmcsYS5ub3J0aGluZyxhLnpvbmVOdW1iZXIpK2Muc3Vic3RyKGMubGVuZ3RoLTUsYikrZC5zdWJzdHIoZC5sZW5ndGgtNSxiKX1mdW5jdGlvbiBqKGEsYixjKXt2YXIgZD1rKGMpLGU9TWF0aC5mbG9vcihhLzFlNSksZj1NYXRoLmZsb29yKGIvMWU1KSUyMDtyZXR1cm4gbChlLGYsZCl9ZnVuY3Rpb24gayhhKXt2YXIgYj1hJXE7cmV0dXJuIDA9PT1iJiYoYj1xKSxifWZ1bmN0aW9uIGwoYSxiLGMpe3ZhciBkPWMtMSxlPXIuY2hhckNvZGVBdChkKSxmPXMuY2hhckNvZGVBdChkKSxnPWUrYS0xLGg9ZitiLGk9ITE7Zz54JiYoZz1nLXgrdC0xLGk9ITApLChnPT09dXx8dT5lJiZnPnV8fChnPnV8fHU+ZSkmJmkpJiZnKyssKGc9PT12fHx2PmUmJmc+dnx8KGc+dnx8dj5lKSYmaSkmJihnKyssZz09PXUmJmcrKyksZz54JiYoZz1nLXgrdC0xKSxoPnc/KGg9aC13K3QtMSxpPSEwKTppPSExLChoPT09dXx8dT5mJiZoPnV8fChoPnV8fHU+ZikmJmkpJiZoKyssKGg9PT12fHx2PmYmJmg+dnx8KGg+dnx8dj5mKSYmaSkmJihoKyssaD09PXUmJmgrKyksaD53JiYoaD1oLXcrdC0xKTt2YXIgaj1TdHJpbmcuZnJvbUNoYXJDb2RlKGcpK1N0cmluZy5mcm9tQ2hhckNvZGUoaCk7cmV0dXJuIGp9ZnVuY3Rpb24gbShhKXtpZihhJiYwPT09YS5sZW5ndGgpdGhyb3dcIk1HUlNQb2ludCBjb3ZlcnRpbmcgZnJvbSBub3RoaW5nXCI7Zm9yKHZhciBiLGM9YS5sZW5ndGgsZD1udWxsLGU9XCJcIixmPTA7IS9bQS1aXS8udGVzdChiPWEuY2hhckF0KGYpKTspe2lmKGY+PTIpdGhyb3dcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIithO2UrPWIsZisrfXZhciBnPXBhcnNlSW50KGUsMTApO2lmKDA9PT1mfHxmKzM+Yyl0aHJvd1wiTUdSU1BvaW50IGJhZCBjb252ZXJzaW9uIGZyb206IFwiK2E7dmFyIGg9YS5jaGFyQXQoZisrKTtpZihcIkFcIj49aHx8XCJCXCI9PT1ofHxcIllcIj09PWh8fGg+PVwiWlwifHxcIklcIj09PWh8fFwiT1wiPT09aCl0aHJvd1wiTUdSU1BvaW50IHpvbmUgbGV0dGVyIFwiK2grXCIgbm90IGhhbmRsZWQ6IFwiK2E7ZD1hLnN1YnN0cmluZyhmLGYrPTIpO2Zvcih2YXIgaT1rKGcpLGo9bihkLmNoYXJBdCgwKSxpKSxsPW8oZC5jaGFyQXQoMSksaSk7bDxwKGgpOylsKz0yZTY7dmFyIG09Yy1mO2lmKG0lMiE9PTApdGhyb3dcIk1HUlNQb2ludCBoYXMgdG8gaGF2ZSBhbiBldmVuIG51bWJlciBcXG5vZiBkaWdpdHMgYWZ0ZXIgdGhlIHpvbmUgbGV0dGVyIGFuZCB0d28gMTAwa20gbGV0dGVycyAtIGZyb250IFxcbmhhbGYgZm9yIGVhc3RpbmcgbWV0ZXJzLCBzZWNvbmQgaGFsZiBmb3IgXFxubm9ydGhpbmcgbWV0ZXJzXCIrYTt2YXIgcSxyLHMsdCx1LHY9bS8yLHc9MCx4PTA7cmV0dXJuIHY+MCYmKHE9MWU1L01hdGgucG93KDEwLHYpLHI9YS5zdWJzdHJpbmcoZixmK3YpLHc9cGFyc2VGbG9hdChyKSpxLHM9YS5zdWJzdHJpbmcoZit2KSx4PXBhcnNlRmxvYXQocykqcSksdD13K2osdT14K2wse2Vhc3Rpbmc6dCxub3J0aGluZzp1LHpvbmVMZXR0ZXI6aCx6b25lTnVtYmVyOmcsYWNjdXJhY3k6cX19ZnVuY3Rpb24gbihhLGIpe2Zvcih2YXIgYz1yLmNoYXJDb2RlQXQoYi0xKSxkPTFlNSxlPSExO2MhPT1hLmNoYXJDb2RlQXQoMCk7KXtpZihjKyssYz09PXUmJmMrKyxjPT09diYmYysrLGM+eCl7aWYoZSl0aHJvd1wiQmFkIGNoYXJhY3RlcjogXCIrYTtjPXQsZT0hMH1kKz0xZTV9cmV0dXJuIGR9ZnVuY3Rpb24gbyhhLGIpe2lmKGE+XCJWXCIpdGhyb3dcIk1HUlNQb2ludCBnaXZlbiBpbnZhbGlkIE5vcnRoaW5nIFwiK2E7Zm9yKHZhciBjPXMuY2hhckNvZGVBdChiLTEpLGQ9MCxlPSExO2MhPT1hLmNoYXJDb2RlQXQoMCk7KXtpZihjKyssYz09PXUmJmMrKyxjPT09diYmYysrLGM+dyl7aWYoZSl0aHJvd1wiQmFkIGNoYXJhY3RlcjogXCIrYTtjPXQsZT0hMH1kKz0xZTV9cmV0dXJuIGR9ZnVuY3Rpb24gcChhKXt2YXIgYjtzd2l0Y2goYSl7Y2FzZVwiQ1wiOmI9MTFlNTticmVhaztjYXNlXCJEXCI6Yj0yZTY7YnJlYWs7Y2FzZVwiRVwiOmI9MjhlNTticmVhaztjYXNlXCJGXCI6Yj0zN2U1O2JyZWFrO2Nhc2VcIkdcIjpiPTQ2ZTU7YnJlYWs7Y2FzZVwiSFwiOmI9NTVlNTticmVhaztjYXNlXCJKXCI6Yj02NGU1O2JyZWFrO2Nhc2VcIktcIjpiPTczZTU7YnJlYWs7Y2FzZVwiTFwiOmI9ODJlNTticmVhaztjYXNlXCJNXCI6Yj05MWU1O2JyZWFrO2Nhc2VcIk5cIjpiPTA7YnJlYWs7Y2FzZVwiUFwiOmI9OGU1O2JyZWFrO2Nhc2VcIlFcIjpiPTE3ZTU7YnJlYWs7Y2FzZVwiUlwiOmI9MjZlNTticmVhaztjYXNlXCJTXCI6Yj0zNWU1O2JyZWFrO2Nhc2VcIlRcIjpiPTQ0ZTU7YnJlYWs7Y2FzZVwiVVwiOmI9NTNlNTticmVhaztjYXNlXCJWXCI6Yj02MmU1O2JyZWFrO2Nhc2VcIldcIjpiPTdlNjticmVhaztjYXNlXCJYXCI6Yj03OWU1O2JyZWFrO2RlZmF1bHQ6Yj0tMX1pZihiPj0wKXJldHVybiBiO3Rocm93XCJJbnZhbGlkIHpvbmUgbGV0dGVyOiBcIithfXZhciBxPTYscj1cIkFKU0FKU1wiLHM9XCJBRkFGQUZcIix0PTY1LHU9NzMsdj03OSx3PTg2LHg9OTA7Yy5mb3J3YXJkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9Ynx8NSxpKGYoe2xhdDphWzFdLGxvbjphWzBdfSksYil9LGMuaW52ZXJzZT1mdW5jdGlvbihhKXt2YXIgYj1nKG0oYS50b1VwcGVyQ2FzZSgpKSk7cmV0dXJuW2IubGVmdCxiLmJvdHRvbSxiLnJpZ2h0LGIudG9wXX0sYy50b1BvaW50PWZ1bmN0aW9uKGEpe3ZhciBiPWMuaW52ZXJzZShhKTtyZXR1cm5bKGJbMl0rYlswXSkvMiwoYlszXStiWzFdKS8yXX19LHt9XSw2NzpbZnVuY3Rpb24oYSxiKXtiLmV4cG9ydHM9e25hbWU6XCJwcm9qNFwiLHZlcnNpb246XCIyLjIuMlwiLGRlc2NyaXB0aW9uOlwiUHJvajRqcyBpcyBhIEphdmFTY3JpcHQgbGlicmFyeSB0byB0cmFuc2Zvcm0gcG9pbnQgY29vcmRpbmF0ZXMgZnJvbSBvbmUgY29vcmRpbmF0ZSBzeXN0ZW0gdG8gYW5vdGhlciwgaW5jbHVkaW5nIGRhdHVtIHRyYW5zZm9ybWF0aW9ucy5cIixtYWluOlwibGliL2luZGV4LmpzXCIsZGlyZWN0b3JpZXM6e3Rlc3Q6XCJ0ZXN0XCIsZG9jOlwiZG9jc1wifSxzY3JpcHRzOnt0ZXN0OlwiLi9ub2RlX21vZHVsZXMvaXN0YW5idWwvbGliL2NsaS5qcyB0ZXN0IC4vbm9kZV9tb2R1bGVzL21vY2hhL2Jpbi9fbW9jaGEgdGVzdC90ZXN0LmpzXCJ9LHJlcG9zaXRvcnk6e3R5cGU6XCJnaXRcIix1cmw6XCJnaXQ6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcy5naXRcIn0sYXV0aG9yOlwiXCIsbGljZW5zZTpcIk1JVFwiLGphbTp7bWFpbjpcImRpc3QvcHJvajQuanNcIixpbmNsdWRlOltcImRpc3QvcHJvajQuanNcIixcIlJFQURNRS5tZFwiLFwiQVVUSE9SU1wiLFwiTElDRU5TRS5tZFwiXX0sZGV2RGVwZW5kZW5jaWVzOntcImdydW50LWNsaVwiOlwifjAuMS4xM1wiLGdydW50OlwifjAuNC4yXCIsXCJncnVudC1jb250cmliLWNvbm5lY3RcIjpcIn4wLjYuMFwiLFwiZ3J1bnQtY29udHJpYi1qc2hpbnRcIjpcIn4wLjguMFwiLGNoYWk6XCJ+MS44LjFcIixtb2NoYTpcIn4xLjE3LjFcIixcImdydW50LW1vY2hhLXBoYW50b21qc1wiOlwifjAuNC4wXCIsYnJvd3NlcmlmeTpcIn4zLjI0LjVcIixcImdydW50LWJyb3dzZXJpZnlcIjpcIn4xLjMuMFwiLFwiZ3J1bnQtY29udHJpYi11Z2xpZnlcIjpcIn4wLjMuMlwiLGN1cmw6XCJnaXQ6Ly9naXRodWIuY29tL2N1am9qcy9jdXJsLmdpdFwiLGlzdGFuYnVsOlwifjAuMi40XCIsdGluOlwifjAuNC4wXCJ9LGRlcGVuZGVuY2llczp7bWdyczpcIjAuMC4wXCJ9fX0se31dLFwiLi9pbmNsdWRlZFByb2plY3Rpb25zXCI6W2Z1bmN0aW9uKGEsYil7Yi5leHBvcnRzPWEoXCJnV1VQTldcIil9LHt9XSxnV1VQTlc6W2Z1bmN0aW9uKGEsYil7dmFyIGM9W2EoXCIuL2xpYi9wcm9qZWN0aW9ucy90bWVyY1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvdXRtXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9zdGVyZWFcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL3N0ZXJlXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9zb21lcmNcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL29tZXJjXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9sY2NcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2tyb3Zha1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvY2Fzc1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvbGFlYVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvYWVhXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9nbm9tXCIpLGEoXCIuL2xpYi9wcm9qZWN0aW9ucy9jZWFcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2VxY1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvcG9seVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvbnptZ1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvbWlsbFwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvc2ludVwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvbW9sbFwiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvZXFkY1wiKSxhKFwiLi9saWIvcHJvamVjdGlvbnMvdmFuZGdcIiksYShcIi4vbGliL3Byb2plY3Rpb25zL2FlcWRcIildO2IuZXhwb3J0cz1mdW5jdGlvbihwcm9qNCl7Yy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3Byb2o0LlByb2oucHJvamVjdGlvbnMuYWRkKGEpfSl9fSx7XCIuL2xpYi9wcm9qZWN0aW9ucy9hZWFcIjozOSxcIi4vbGliL3Byb2plY3Rpb25zL2FlcWRcIjo0MCxcIi4vbGliL3Byb2plY3Rpb25zL2Nhc3NcIjo0MSxcIi4vbGliL3Byb2plY3Rpb25zL2NlYVwiOjQyLFwiLi9saWIvcHJvamVjdGlvbnMvZXFjXCI6NDMsXCIuL2xpYi9wcm9qZWN0aW9ucy9lcWRjXCI6NDQsXCIuL2xpYi9wcm9qZWN0aW9ucy9nbm9tXCI6NDYsXCIuL2xpYi9wcm9qZWN0aW9ucy9rcm92YWtcIjo0NyxcIi4vbGliL3Byb2plY3Rpb25zL2xhZWFcIjo0OCxcIi4vbGliL3Byb2plY3Rpb25zL2xjY1wiOjQ5LFwiLi9saWIvcHJvamVjdGlvbnMvbWlsbFwiOjUyLFwiLi9saWIvcHJvamVjdGlvbnMvbW9sbFwiOjUzLFwiLi9saWIvcHJvamVjdGlvbnMvbnptZ1wiOjU0LFwiLi9saWIvcHJvamVjdGlvbnMvb21lcmNcIjo1NSxcIi4vbGliL3Byb2plY3Rpb25zL3BvbHlcIjo1NixcIi4vbGliL3Byb2plY3Rpb25zL3NpbnVcIjo1NyxcIi4vbGliL3Byb2plY3Rpb25zL3NvbWVyY1wiOjU4LFwiLi9saWIvcHJvamVjdGlvbnMvc3RlcmVcIjo1OSxcIi4vbGliL3Byb2plY3Rpb25zL3N0ZXJlYVwiOjYwLFwiLi9saWIvcHJvamVjdGlvbnMvdG1lcmNcIjo2MSxcIi4vbGliL3Byb2plY3Rpb25zL3V0bVwiOjYyLFwiLi9saWIvcHJvamVjdGlvbnMvdmFuZGdcIjo2M31dfSx7fSxbMzVdKSgzNSl9KTsiLCIhZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSxlKTtlbHNle3ZhciBvO1widW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/bz13aW5kb3c6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9vPWdsb2JhbDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygc2VsZiYmKG89c2VsZiksby5nZW9qc29uMnN2Zz1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfWZvcih2YXIgaT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZXhwbG9kZShnKXtyZXR1cm4gbXVsdGllcy5pbmRleE9mKGcudHlwZSk+LTE/Zy5jb29yZGluYXRlcy5tYXAoZnVuY3Rpb24ocGFydCl7dmFyIHNpbmdsZT17fTtyZXR1cm4gc2luZ2xlLnR5cGU9Zy50eXBlLnJlcGxhY2UoXCJNdWx0aVwiLFwiXCIpLHNpbmdsZS5jb29yZGluYXRlcz1wYXJ0LGcuY3JzJiYoc2luZ2xlLmNycz1nLmNycyksc2luZ2xlfSk6ITF9ZnVuY3Rpb24gaW1wbG9kZShncyl7dmFyIHNhbWVUeXBlPWdzLmV2ZXJ5KGZ1bmN0aW9uKGcpe3JldHVybiBzaW5nbGVzLmluZGV4T2YoZy50eXBlKT4tMX0pLGNycz1nc1swXS5jcnN8fDAsc2FtZUNycz1ncy5ldmVyeShmdW5jdGlvbihnKXt2YXIgZ2Nycz1nLmNyc3x8MDtyZXR1cm4gZ2Nycz09Y3JzfSk7aWYoc2FtZVR5cGUmJnNhbWVDcnMpe3ZhciBtdWx0aT17fTtyZXR1cm4gbXVsdGkudHlwZT1cIk11bHRpXCIrZ3NbMF0udHlwZSxtdWx0aS5jb29yZGluYXRlcz1bXSwwIT1jcnMmJihtdWx0aS5jcnM9Y3JzKSxncy5mb3JFYWNoKGZ1bmN0aW9uKGcpe211bHRpLmNvb3JkaW5hdGVzLnB1c2goZy5jb29yZGluYXRlcyl9KSxtdWx0aX1yZXR1cm4hMX12YXIgc2luZ2xlcz1bXCJQb2ludFwiLFwiTGluZVN0cmluZ1wiLFwiUG9seWdvblwiXSxtdWx0aWVzPVtcIk11bHRpUG9pbnRcIixcIk11bHRpTGluZVN0cmluZ1wiLFwiTXVsdGlQb2x5Z29uXCJdLG11bHRpZ2VvanNvbj17ZXhwbG9kZTpleHBsb2RlLGltcGxvZGU6aW1wbG9kZX07XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9bXVsdGlnZW9qc29uOndpbmRvdyYmKHdpbmRvdy5tdWx0aWdlb2pzb249bXVsdGlnZW9qc29uKX0oKX0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe2Z1bmN0aW9uIGdldENvb3JkU3RyaW5nKGNvb3JkcyxyZXMsb3JpZ2luKXt2YXIgY29vcmRTdHI9Y29vcmRzLm1hcChmdW5jdGlvbihjb29yZCl7cmV0dXJuKGNvb3JkWzBdLW9yaWdpbi54KS9yZXMrXCIsXCIrKG9yaWdpbi55LWNvb3JkWzFdKS9yZXN9KTtyZXR1cm4gY29vcmRTdHIuam9pbihcIiBcIil9ZnVuY3Rpb24gcG9pbnQoZ2VvbSxyZXMsb3JpZ2luLG9wdCl7dmFyIHI9b3B0JiZvcHQucj9vcHQucjoxLHBvaW50QXNDaXJjbGU9b3B0JiZvcHQuaGFzT3duUHJvcGVydHkoXCJwb2ludEFzQ2lyY2xlXCIpP29wdC5wb2ludEFzQ2lyY2xlOiExLGNvb3Jkcz1nZXRDb29yZFN0cmluZyhbZ2VvbS5jb29yZGluYXRlc10scmVzLG9yaWdpbik7cmV0dXJuIHBvaW50QXNDaXJjbGU/W2Nvb3Jkc106W1wiTVwiK2Nvb3JkcytcIiBtXCIrLXIrXCIsMCBhXCIrcitcIixcIityK1wiIDAgMSwxIFwiKzIqcitcIiwwIGFcIityK1wiLFwiK3IrXCIgMCAxLDEgXCIrLTIqcitcIiwwXCJdfWZ1bmN0aW9uIG11bHRpUG9pbnQoZ2VvbSxyZXMsb3JpZ2luLG9wdCl7dmFyIGV4cGxvZGU9b3B0JiZvcHQuaGFzT3duUHJvcGVydHkoXCJleHBsb2RlXCIpP29wdC5leHBsb2RlOiExLHBhdGhzPW11bHRpLmV4cGxvZGUoZ2VvbSkubWFwKGZ1bmN0aW9uKHNpbmdsZSl7cmV0dXJuIHBvaW50KHNpbmdsZSxyZXMsb3JpZ2luLG9wdClbMF19KTtyZXR1cm4gZXhwbG9kZT9wYXRoczpbcGF0aHMuam9pbihcIiBcIildfWZ1bmN0aW9uIGxpbmVTdHJpbmcoZ2VvbSxyZXMsb3JpZ2luLG90cCl7dmFyIGNvb3Jkcz1nZXRDb29yZFN0cmluZyhnZW9tLmNvb3JkaW5hdGVzLHJlcyxvcmlnaW4pLHBhdGg9XCJNXCIrY29vcmRzO3JldHVybltwYXRoXX1mdW5jdGlvbiBtdWx0aUxpbmVTdHJpbmcoZ2VvbSxyZXMsb3JpZ2luLG9wdCl7dmFyIGV4cGxvZGU9b3B0JiZvcHQuaGFzT3duUHJvcGVydHkoXCJleHBsb2RlXCIpP29wdC5leHBsb2RlOiExLHBhdGhzPW11bHRpLmV4cGxvZGUoZ2VvbSkubWFwKGZ1bmN0aW9uKHNpbmdsZSl7cmV0dXJuIGxpbmVTdHJpbmcoc2luZ2xlLHJlcyxvcmlnaW4sb3B0KVswXX0pO3JldHVybiBleHBsb2RlP3BhdGhzOltwYXRocy5qb2luKFwiIFwiKV19ZnVuY3Rpb24gcG9seWdvbihnZW9tLHJlcyxvcmlnaW4sb3B0KXt2YXIgbWFpblN0cixob2xlczttYWluU3RyPWdldENvb3JkU3RyaW5nKGdlb20uY29vcmRpbmF0ZXNbMF0scmVzLG9yaWdpbiksZ2VvbS5jb29yZGluYXRlcy5sZW5ndGg+MSYmKGhvbGVzPWdlb20uY29vcmRpbmF0ZXMuc2xpY2UoMSxnZW9tLmNvb3JkaW5hdGVzLmxlbmd0aCkpO3ZhciBwYXRoPVwiTVwiK21haW5TdHI7aWYoaG9sZXMpZm9yKHZhciBpPTA7aTxob2xlcy5sZW5ndGg7aSsrKXBhdGgrPVwiIE1cIitnZXRDb29yZFN0cmluZyhob2xlc1tpXSxyZXMsb3JpZ2luKTtyZXR1cm4gcGF0aCs9XCJaXCIsW3BhdGhdfWZ1bmN0aW9uIG11bHRpUG9seWdvbihnZW9tLHJlcyxvcmlnaW4sb3B0KXt2YXIgZXhwbG9kZT1vcHQuaGFzT3duUHJvcGVydHkoXCJleHBsb2RlXCIpP29wdC5leHBsb2RlOiExLHBhdGhzPW11bHRpLmV4cGxvZGUoZ2VvbSkubWFwKGZ1bmN0aW9uKHNpbmdsZSl7cmV0dXJuIHBvbHlnb24oc2luZ2xlLHJlcyxvcmlnaW4sb3B0KVswXX0pO3JldHVybiBleHBsb2RlP3BhdGhzOltwYXRocy5qb2luKFwiIFwiKS5yZXBsYWNlKC9aL2csXCJcIikrXCJaXCJdfXZhciBtdWx0aT1yZXF1aXJlKFwibXVsdGlnZW9qc29uXCIpO21vZHVsZS5leHBvcnRzPXtQb2ludDpwb2ludCxNdWx0aVBvaW50Om11bHRpUG9pbnQsTGluZVN0cmluZzpsaW5lU3RyaW5nLE11bHRpTGluZVN0cmluZzptdWx0aUxpbmVTdHJpbmcsUG9seWdvbjpwb2x5Z29uLE11bHRpUG9seWdvbjptdWx0aVBvbHlnb259fSx7bXVsdGlnZW9qc29uOjF9XSwzOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihhLGIpe3ZhciBjPXt9O3JldHVybiBPYmplY3Qua2V5cyhhKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7Y1trZXldPWFba2V5XX0pLE9iamVjdC5rZXlzKGIpLmZvckVhY2goZnVuY3Rpb24oa2V5KXtjW2tleV09YltrZXldfSksY319LHt9XSw0OltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtmdW5jdGlvbiBwYXRoVG9TdmdKc29uKHBhdGgsdHlwZSxhdHRyaWJ1dGVzLG9wdCl7dmFyIHN2Zz17fSxwb2ludEFzQ2lyY2xlPW9wdCYmb3B0Lmhhc093blByb3BlcnR5KFwicG9pbnRBc0NpcmNsZVwiKT9vcHQucG9pbnRBc0NpcmNsZTohMTtcIlBvaW50XCIhPXR5cGUmJlwiTXVsdGlQb2ludFwiIT10eXBlfHwhcG9pbnRBc0NpcmNsZT8oc3ZnPXtkOnBhdGh9LChcIlBvbHlnb25cIj09dHlwZXx8XCJNdWx0aVBvbHlnb25cIj09dHlwZSkmJlwiZXZlbm9kZFwiPT1zdmdbXCJmaWxsLXJ1bGVcIl0pOihzdmcuY3g9cGF0aC5zcGxpdChcIixcIilbMF0sc3ZnLmN5PXBhdGguc3BsaXQoXCIsXCIpWzFdLHN2Zy5yPW9wdCYmb3B0LnI/b3B0LnI6XCIxXCIpO2Zvcih2YXIga2V5IGluIGF0dHJpYnV0ZXMpc3ZnW2tleV09YXR0cmlidXRlc1trZXldO3JldHVybiBzdmd9ZnVuY3Rpb24ganNvblRvU3ZnRWxlbWVudChqc29uLHR5cGUsb3B0KXt2YXIgcG9pbnRBc0NpcmNsZT1vcHQmJm9wdC5oYXNPd25Qcm9wZXJ0eShcInBvaW50QXNDaXJjbGVcIik/b3B0LnBvaW50QXNDaXJjbGU6ITEsZWxlPVwiPHBhdGhcIjtcIlBvaW50XCIhPXR5cGUmJlwiTXVsdGlQb2ludFwiIT10eXBlfHwhcG9pbnRBc0NpcmNsZXx8KGVsZT1cIjxjaXJjbGVcIik7Zm9yKHZhciBrZXkgaW4ganNvbillbGUrPVwiIFwiK2tleSsnPVwiJytqc29uW2tleV0rJ1wiJztyZXR1cm4gZWxlKz1cIi8+XCJ9ZnVuY3Rpb24gdmFsdWVBdChvYmoscGF0aCl7ZnVuY3Rpb24gaW5kZXgocHJldixjdXIsaSxhcnIpe2lmKHByZXYuaGFzT3duUHJvcGVydHkoY3VyKSlyZXR1cm4gcHJldltjdXJdO3Rocm93IG5ldyBFcnJvcihhcnIuc2xpY2UoMCxpKzEpLmpvaW4oXCIuXCIpK1wiIGlzIG5vdCBhIHZhbGlkIHByb3BlcnR5IHBhdGhcIil9cmV0dXJuIHBhdGguc3BsaXQoXCIuXCIpLnJlZHVjZShpbmRleCxvYmopfXZhciBleHRlbmQ9cmVxdWlyZShcIi4vZXh0ZW5kLmpzXCIpLGNvbnZlcnRlcj1yZXF1aXJlKFwiLi9jb252ZXJ0ZXIuanNcIiksZzJzdmc9ZnVuY3Rpb24ob3B0aW9ucyl7dGhpcy5vcHRpb25zPW9wdGlvbnN8fHt9LHRoaXMudmlld3BvcnRTaXplPXRoaXMub3B0aW9ucy52aWV3cG9ydFNpemV8fHt3aWR0aDoyNTYsaGVpZ2h0OjI1Nn0sdGhpcy5tYXBFeHRlbnQ9dGhpcy5vcHRpb25zLm1hcEV4dGVudHx8e2xlZnQ6LTIwMDM3NTA4LjM0Mjc4OTI0NCxyaWdodDoyMDAzNzUwOC4zNDI3ODkyNDQsYm90dG9tOi0yMDAzNzUwOC4zNDI3ODkyNDQsdG9wOjIwMDM3NTA4LjM0Mjc4OTI0NH0sdGhpcy5yZXM9dGhpcy5jYWxSZXNvbHV0aW9uKHRoaXMubWFwRXh0ZW50LHRoaXMudmlld3BvcnRTaXplLHRoaXMub3B0aW9ucy5maXRUbyl9O2cyc3ZnLnByb3RvdHlwZS5jYWxSZXNvbHV0aW9uPWZ1bmN0aW9uKGV4dGVudCxzaXplLGZpdFRvKXt2YXIgeHJlcz0oZXh0ZW50LnJpZ2h0LWV4dGVudC5sZWZ0KS9zaXplLndpZHRoLHlyZXM9KGV4dGVudC50b3AtZXh0ZW50LmJvdHRvbSkvc2l6ZS5oZWlnaHQ7aWYoZml0VG8pe2lmKFwid2lkdGhcIj09PWZpdFRvLnRvTG93ZXJDYXNlKCkpcmV0dXJuIHhyZXM7aWYoXCJoZWlnaHRcIj09PWZpdFRvLnRvTG93ZXJDYXNlKCkpcmV0dXJuIHlyZXM7dGhyb3cgbmV3IEVycm9yKCdcImZpdFRvXCIgb3B0aW9uIHNob3VsZCBiZSBcIndpZHRoXCIgb3IgXCJoZWlnaHRcIiAnKX1yZXR1cm4gTWF0aC5tYXgoeHJlcyx5cmVzKX0sZzJzdmcucHJvdG90eXBlLmNvbnZlcnQ9ZnVuY3Rpb24oZ2VvanNvbixvcHRpb25zKXt2YXIgb3B0PWV4dGVuZCh0aGlzLm9wdGlvbnMsb3B0aW9uc3x8e30pLHN2Z0VsZW1lbnRzPVtdO2lmKFwiRmVhdHVyZUNvbGxlY3Rpb25cIj09Z2VvanNvbi50eXBlKWZvcih2YXIgaT0wO2k8Z2VvanNvbi5mZWF0dXJlcy5sZW5ndGg7aSsrKXN2Z0VsZW1lbnRzPXN2Z0VsZW1lbnRzLmNvbmNhdCh0aGlzLmNvbnZlcnRGZWF0dXJlKGdlb2pzb24uZmVhdHVyZXNbaV0sb3B0KSk7ZWxzZSBpZihcIkZlYXR1cmVcIj09Z2VvanNvbi50eXBlKXN2Z0VsZW1lbnRzPXRoaXMuY29udmVydEZlYXR1cmUoZ2VvanNvbixvcHQpO2Vsc2UgaWYoXCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09Z2VvanNvbi50eXBlKWZvcih2YXIgaT0wO2k8Z2VvanNvbi5nZW9tZXRyaWVzLmxlbmd0aDtpKyspc3ZnRWxlbWVudHM9c3ZnRWxlbWVudHMuY29uY2F0KHRoaXMuY29udmVydEdlb21ldHJ5KGdlb2pzb24uZ2VvbWV0cmllc1tpXSxvcHQpKTtlbHNle2lmKCFjb252ZXJ0ZXJbZ2VvanNvbi50eXBlXSlyZXR1cm47c3ZnRWxlbWVudHM9dGhpcy5jb252ZXJ0R2VvbWV0cnkoZ2VvanNvbixvcHQpfXJldHVybiBvcHQuY2FsbGJhY2smJm9wdC5jYWxsYmFjay5jYWxsKHRoaXMsc3ZnRWxlbWVudHMpLHN2Z0VsZW1lbnRzfSxnMnN2Zy5wcm90b3R5cGUuY29udmVydEZlYXR1cmU9ZnVuY3Rpb24oZmVhdHVyZSxvcHRpb25zKXtpZihmZWF0dXJlfHxmZWF0dXJlLmdlb21ldHJ5KXt2YXIgb3B0PWV4dGVuZCh0aGlzLm9wdGlvbnMsb3B0aW9uc3x8e30pO2lmKG9wdC5hdHRyaWJ1dGVzJiZvcHQuYXR0cmlidXRlcyBpbnN0YW5jZW9mIEFycmF5KXt2YXIgYXJyPW9wdC5hdHRyaWJ1dGVzO29wdC5hdHRyaWJ1dGVzPWFyci5yZWR1Y2UoZnVuY3Rpb24oc3VtLHByb3BlcnR5KXtpZihcInN0cmluZ1wiPT10eXBlb2YgcHJvcGVydHkpe3ZhciB2YWwsa2V5PXByb3BlcnR5LnNwbGl0KFwiLlwiKS5wb3AoKTt0cnl7dmFsPXZhbHVlQXQoZmVhdHVyZSxwcm9wZXJ0eSl9Y2F0Y2goZSl7dmFsPSExfXZhbCYmKHN1bVtrZXldPXZhbCl9ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgcHJvcGVydHkmJnByb3BlcnR5LnR5cGUmJnByb3BlcnR5LnByb3BlcnR5KWlmKFwiZHluYW1pY1wiPT09cHJvcGVydHkudHlwZSl7dmFyIHZhbCxrZXk9cHJvcGVydHkua2V5P3Byb3BlcnR5LmtleTpwcm9wZXJ0eS5wcm9wZXJ0eS5zcGxpdChcIi5cIikucG9wKCk7dHJ5e3ZhbD12YWx1ZUF0KGZlYXR1cmUscHJvcGVydHkucHJvcGVydHkpfWNhdGNoKGUpe3ZhbD0hMX12YWwmJihzdW1ba2V5XT12YWwpfWVsc2VcInN0YXRpY1wiPT09cHJvcGVydHkudHlwZSYmcHJvcGVydHkudmFsdWUmJihzdW1bcHJvcGVydHkucHJvcGVydHldPXByb3BlcnR5LnZhbHVlKTtyZXR1cm4gc3VtfSx7fSl9ZWxzZSBvcHQuYXR0cmlidXRlcz1vcHQuYXR0cmlidXRlc3x8e307dmFyIGlkPW9wdC5hdHRyaWJ1dGVzLmlkfHxmZWF0dXJlLmlkfHwoZmVhdHVyZS5wcm9wZXJ0aWVzJiZmZWF0dXJlLnByb3BlcnRpZXMuaWQ/ZmVhdHVyZS5wcm9wZXJ0aWVzLmlkOm51bGwpO3JldHVybiBpZCYmKG9wdC5hdHRyaWJ1dGVzLmlkPWlkKSx0aGlzLmNvbnZlcnRHZW9tZXRyeShmZWF0dXJlLmdlb21ldHJ5LG9wdCl9fSxnMnN2Zy5wcm90b3R5cGUuY29udmVydEdlb21ldHJ5PWZ1bmN0aW9uKGdlb20sb3B0aW9ucyl7aWYoY29udmVydGVyW2dlb20udHlwZV0pe3ZhciBzdmdKc29ucyxzdmdFbGVzLG9wdD1leHRlbmQodGhpcy5vcHRpb25zLG9wdGlvbnN8fHt9KSxvdXRwdXQ9b3B0Lm91dHB1dHx8XCJzdmdcIixwYXRocz1jb252ZXJ0ZXJbZ2VvbS50eXBlXS5jYWxsKHRoaXMsZ2VvbSx0aGlzLnJlcyx7eDp0aGlzLm1hcEV4dGVudC5sZWZ0LHk6dGhpcy5tYXBFeHRlbnQudG9wfSxvcHQpO3JldHVyblwic3ZnXCI9PW91dHB1dC50b0xvd2VyQ2FzZSgpPyhzdmdKc29ucz1wYXRocy5tYXAoZnVuY3Rpb24ocGF0aCl7cmV0dXJuIHBhdGhUb1N2Z0pzb24ocGF0aCxnZW9tLnR5cGUsb3B0LmF0dHJpYnV0ZXMsb3B0KX0pLHN2Z0VsZXM9c3ZnSnNvbnMubWFwKGZ1bmN0aW9uKGpzb24pe3JldHVybiBqc29uVG9TdmdFbGVtZW50KGpzb24sZ2VvbS50eXBlLG9wdCl9KSk6cGF0aHN9fSxtb2R1bGUuZXhwb3J0cz1nMnN2Z30se1wiLi9jb252ZXJ0ZXIuanNcIjoyLFwiLi9leHRlbmQuanNcIjozfV0sNTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7dmFyIGcyc3ZnPXJlcXVpcmUoXCIuL2luc3RhbmNlLmpzXCIpLGdlb2pzb24yc3ZnPWZ1bmN0aW9uKG9wdGlvbnMpe3JldHVybiBuZXcgZzJzdmcob3B0aW9ucyl9O21vZHVsZS5leHBvcnRzPWdlb2pzb24yc3ZnfSx7XCIuL2luc3RhbmNlLmpzXCI6NH1dfSx7fSxbNV0pKDUpfSk7IiwiXHJcbmZ1bmN0aW9uIGdldEpTT04odXJsLCBjYikge1xyXG4gICAgdmFyIHhtbGh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIHZhciBvbkVycm9yID0gd2luZG93Lm9ucy5ub3RpZmljYXRpb24uYWxlcnQuYmluZCh3aW5kb3cub25zLm5vdGlmaWNhdGlvbiwge1xyXG4gICAgICAgIG1lc3NhZ2U6ICdKZSBiZW50IG5pZXQgdmVyYm9uZGVuIG1ldCBkZSBzZXJ2ZXIuIERlIGdlZ2V2ZW5zIGRpZSB3b3JkZW4gd2VlcmdlZ2V2ZW4gemlqbiBtb2dlbGlqayB2ZXJvdWRlcmQuJyxcclxuICAgIH0pO1xyXG5cclxuICAgIHhtbGh0dHAub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IDQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG15QXJyID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICBjYihKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgeG1saHR0cC5vbmVycm9yID0gb25FcnJvcjtcclxuICAgIHhtbGh0dHAub3BlbihcIkdFVFwiLCB1cmwsIHRydWUpO1xyXG4gICAgeG1saHR0cC5zZW5kKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBfcHJvbWlzZSgpIHtcclxuICAgIHZhciBkb25lID0gZmFsc2U7XHJcbiAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xyXG4gICAgdmFyIGNicyA9IFtdO1xyXG4gICAgdmFyIGQgPSBmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICBkb25lID0gdHJ1ZTtcclxuICAgICAgICByZXMgPSByZXN1bHQ7IFxyXG4gICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjYnMubGVuZ3RoOyBpKyspIGNic1tpXShyZXN1bHQpO1xyXG4gICAgfVxyXG4gICAgZC50aGVuID0gZnVuY3Rpb24oY2IpIHtcclxuICAgICAgICBpZiAoZG9uZSkgY2IocmVzKTtcclxuICAgICAgICBlbHNlIGNicy5wdXNoKGNiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBkO1xyXG59XHJcblxyXG4iLCJ2YXIgY29yZG92YV9yZWFkeSA9IGZhbHNlO1xyXG5cclxudmFyIGlzT25saW5lID0gZnVuY3Rpb24gKCkge1xyXG5cclxufSwgaXNPZmZsaW5lID0gZnVuY3Rpb24gKCkge1xyXG5cdHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLmFsZXJ0KHtcclxuXHRcdG1lc3NhZ2U6ICdKZSBiZW50IG5pZXQgdmVyYm9uZGVuIG1ldCBkZSBzZXJ2ZXIuIERlIGdlZ2V2ZW5zIGRpZSB3b3JkZW4gd2VlcmdlZ2V2ZW4gemlqbiBtb2dlbGlqayB2ZXJvdWRlcmQuJyxcclxuXHR9KTtcclxufTtcclxuXHJcbndpbmRvdy5vbnMuZGlzYWJsZUF1dG9TdGF0dXNCYXJGaWxsKCk7XHJcblxyXG5pZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHtcclxuXHQvKlxyXG5cdFx0V29ya3Mgd2VsbCBpbiBGaXJlZm94IGFuZCBPcGVyYSB3aXRoIHRoZSBcclxuXHRcdFdvcmsgT2ZmbGluZSBvcHRpb24gaW4gdGhlIEZpbGUgbWVudS5cclxuXHRcdFB1bGxpbmcgdGhlIGV0aGVybmV0IGNhYmxlIGRvZXNuJ3Qgc2VlbSB0byB0cmlnZ2VyIGl0LlxyXG5cdFx0TGF0ZXIgR29vZ2xlIENocm9tZSBhbmQgU2FmYXJpIHNlZW0gdG8gdHJpZ2dlciBpdCB3ZWxsXHJcblx0Ki9cclxuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCBpc09ubGluZSwgZmFsc2UpO1xyXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCBpc09mZmxpbmUsIGZhbHNlKTtcclxufVxyXG5lbHNlIHtcclxuXHQvKlxyXG5cdFx0V29ya3MgaW4gSUUgd2l0aCB0aGUgV29yayBPZmZsaW5lIG9wdGlvbiBpbiB0aGUgXHJcblx0XHRGaWxlIG1lbnUgYW5kIHB1bGxpbmcgdGhlIGV0aGVybmV0IGNhYmxlXHJcblx0Ki9cclxuXHRkb2N1bWVudC5ib2R5Lm9ub25saW5lID0gaXNPbmxpbmU7XHJcblx0ZG9jdW1lbnQuYm9keS5vbm9mZmxpbmUgPSBpc09mZmxpbmU7XHJcbn1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXN1bWVcIiwgZnVuY3Rpb24gKCkge1xyXG5cdGlmIChuYXZpZ2F0b3Iub25MaW5lID09PSBmYWxzZSkge1xyXG5cdFx0d2luZG93Lm9ucy5ub3RpZmljYXRpb24uYWxlcnQoe1xyXG5cdFx0XHRtZXNzYWdlOiAnSmUgYmVudCBuaWV0IHZlcmJvbmRlbiBtZXQgZGUgc2VydmVyLiBEZSBnZWdldmVucyBkaWUgd29yZGVuIHdlZXJnZWdldmVuIHppam4gbW9nZWxpamsgdmVyb3VkZXJkLicsXHJcblx0XHR9KTtcclxuXHR9XHJcbn0sIGZhbHNlKVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5pdCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG5cdHZhciBwYWdlID0gZXZlbnQudGFyZ2V0O1xyXG5cdC8vY29uc29sZS5sb2coXCJidXR0b24gcHJlc3NlZFwiKTtcclxuXHJcblx0aWYgKHBhZ2UuaWQgPT09ICdzcGxpdHRlcicpIHtcclxuXHJcblx0fVxyXG5cclxuXHRpZiAocGFnZS5pZCA9PT0gJ21hcC1wYWdlJykge1xyXG5cdFx0d2luZG93LmluaXRNYXAocGFnZSk7XHJcblx0fVxyXG5cclxuXHRlbHNlIGlmIChwYWdlLmlkID09PSAnZGV0YWlscycpIHtcclxuXHRcdHdpbmRvdy5pbml0RGV0YWlscyhwYWdlKTtcclxuXHR9XHJcblxyXG5cdGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdkZXRhaWxzLWdlbmVyYWwnKSB7XHJcblx0XHR3aW5kb3cuaW5pdERldGFpbHNHZW5lcmFsKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0ZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2RldGFpbHMtcGFuZGVuJykge1xyXG5cdFx0d2luZG93LmluaXREZXRhaWxzUGFuZGVuKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0ZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2RldGFpbHMtdmVyYmxpamZwbGFhdHNlbicpIHtcclxuXHRcdHdpbmRvdy5pbml0RGV0YWlsc1ZlcmJsaWpmc1BsYWF0c2VuKHBhZ2UpO1xyXG5cdH1cclxuXHJcblx0ZWxzZSBpZiAocGFnZS5pZCA9PT0gJ2RldGFpbHMtbWlzYycpIHtcclxuXHRcdHdpbmRvdy5pbml0RGV0YWlsc01pc2MocGFnZSk7XHJcblx0fVxyXG5cclxuXHRlbHNlIGlmIChwYWdlLmlkID09PSAnZGV0YWlscy12ZXJibGlqZm9iamVjdC1kZXRhaWwnKSB7XHJcblx0XHR3aW5kb3cuaW5pdERldGFpbHNWZXJibGlqZk9iamVjdERldGFpbChwYWdlKTtcclxuXHR9XHJcblxyXG5cdGVsc2UgaWYgKHBhZ2UuaWQgPT09ICdzZWFyY2gtcGFnZScpIHtcclxuXHRcdHdpbmRvdy5pbml0U2VhcmNoUGFnZShwYWdlKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZXJlYWR5XCIsIGZ1bmN0aW9uICgpIHtcclxuXHRjb3Jkb3ZhX3JlYWR5ID0gdHJ1ZTtcclxuXHRpZiAoY29yZG92YS5wbGF0Zm9ybUlkID09PSAnYnJvd3NlcicpIHtcclxuXHRcdGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpLnNyYyA9ICcuL2pzL2Jyb3dzZXIuanMnO1xyXG5cdH1cclxuXHRpZiAobmF2aWdhdG9yLm9uTGluZSA9PT0gZmFsc2UpIHtcclxuXHRcdHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLmFsZXJ0KHtcclxuXHRcdFx0bWVzc2FnZTogJ0plIGJlbnQgbmlldCB2ZXJib25kZW4gbWV0IGRlIHNlcnZlci4gRGUgZ2VnZXZlbnMgZGllIHdvcmRlbiB3ZWVyZ2VnZXZlbiB6aWpuIG1vZ2VsaWprIHZlcm91ZGVyZC5uJyxcclxuXHRcdH0pO1xyXG5cdH1cclxufSwgZmFsc2UpO1xyXG5cclxud2luZG93LmZuID0ge307XHJcblxyXG53aW5kb3cuZm4ub3BlbiA9IGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgbWVudSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtZW51Jyk7XHJcblx0bWVudS5vcGVuKCk7XHJcbn07XHJcblxyXG53aW5kb3cuZm4ubG9hZCA9IGZ1bmN0aW9uIChwYWdlKSB7XHJcblx0dmFyIGNvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGVudCcpO1xyXG5cdHZhciBtZW51ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUnKTtcclxuXHRjb250ZW50LmxvYWQocGFnZSlcclxuXHRcdC50aGVuKG1lbnUuY2xvc2UuYmluZChtZW51KSk7XHJcbn07XHJcblxyXG53aW5kb3cuZm4ubG9hZGthYXJ0ID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKHdpbmRvdy5mbi5tYXAgJiYgd2luZG93LmZuLmxheWVyKSB7XHJcblx0XHRpZiAod2luZG93LmZuLmxheWVyVHlwZSA9PT0gJ3NhdCcpIHtcclxuXHRcdFx0d2luZG93LmZuLmxheWVyLnJlbW92ZSgpO1xyXG5cdFx0XHRsb2FkS2FhcnQoKTtcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUnKS5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHR3aW5kb3cuZm4ubGF5ZXJUeXBlID0gJ2thYXJ0JztcclxuXHRcdHdpbmRvdy5mbi5sb2FkKCd2aWV3cy9tYXAuaHRtbCcpO1xyXG5cdH1cclxufVxyXG5cclxud2luZG93LmZuLmxvYWRsdWNodGZvdG8gPSBmdW5jdGlvbiAoKSB7XHJcblx0aWYgKHdpbmRvdy5mbi5tYXAgJiYgd2luZG93LmZuLmxheWVyKSB7XHJcblx0XHRpZiAod2luZG93LmZuLmxheWVyVHlwZSA9PT0gJ2thYXJ0Jykge1xyXG5cdFx0XHR3aW5kb3cuZm4ubGF5ZXIucmVtb3ZlKCk7XHJcblx0XHRcdGxvYWRTYXQoKTtcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lbnUnKS5jbG9zZSgpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHR3aW5kb3cuZm4ubGF5ZXJUeXBlID0gJ3NhdCc7XHJcblx0XHR3aW5kb3cuZm4ubG9hZCgndmlld3MvbWFwLmh0bWwnKTtcclxuXHR9XHJcbn07XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG5cdHZhciBnZW1lZW50ZUNvZGVzO1xyXG5cdHZhciBjYnMgPSBbXTtcclxuXHRnZXRKU09OKCdkYXRhL2dlbWVlbnRlLWNvZGVzLmpzb24nLCBmdW5jdGlvbiAoY29kZXMpIHtcclxuXHRcdGdlbWVlbnRlQ29kZXMgPSBjb2RlcztcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgY2JzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdGNicyhjb2Rlcyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHdpbmRvdy5mbi5nZXRHZW1lZW50ZUNvZGVzID0gZnVuY3Rpb24gKGNiKSB7XHJcblx0XHRpZiAoZ2VtZWVudGVDb2RlcykgY2IoZ2VtZWVudGVDb2Rlcyk7XHJcblx0XHRlbHNlIGNicy5wdXNoKGNiKTtcclxuXHR9XHJcbn0pKCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiZnVuY3Rpb24gaW5pdE1hcChwYWdlKSB7XHJcblxyXG4gICAgdmFyIGludGVyYWN0ZWQgPSBmYWxzZTtcclxuICAgIHZhciB6b29tZWRMb3dFbm91Z2ggPSBmYWxzZTtcclxuICAgIHZhciBMID0gd2luZG93Lkw7XHJcblxyXG4gICAgdmFyIG1hcCA9IHdpbmRvdy5mbi5tYXAgPSBMLm1hcCgnbWFwJywge1xyXG4gICAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcclxuICAgICAgICBtYXhab29tOiAyMSxcclxuICAgICAgICBib3VuY2VBdFpvb21MaW1pdHM6IGZhbHNlLFxyXG4gICAgfSk7XHJcbiAgICBMLmNvbnRyb2wuem9vbSh7XHJcbiAgICAgICAgcG9zaXRpb246ICd0b3ByaWdodCcsXHJcbiAgICB9KS5hZGRUbyhtYXApO1xyXG4gICAgXHJcbiAgICBtYXAuc2V0VmlldyhbNTMuMjMyLCA2LjU2OV0sIDE2KTtcclxuXHJcbiAgICBpZiAod2luZG93LmZuLmxheWVyVHlwZSA9PT0gJ3NhdCcpIGxvYWRTYXQoKTtcclxuICAgIGVsc2UgbG9hZEthYXJ0KCk7XHJcblxyXG4gICAgTC50aWxlTGF5ZXIud21zKCdodHRwczovL2dlb2RhdGEubmF0aW9uYWFsZ2VvcmVnaXN0ZXIubmwva2FkYXN0cmFsZWthYXJ0djMvd21zPycsIHtcclxuICAgICAgICBsYXllcnM6ICdrYWRhc3RyYWxla2FhcnR2MzprYWRhc3RyYWxlZ3JlbnMscGVyY2VlbCcsXHJcbiAgICAgICAgZm9ybWF0OiAnaW1hZ2UvcG5nJyxcclxuICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcclxuICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxyXG4gICAgICAgIGF0dHJpYnV0aW9uOiBcInd3dy5uYXRpb25hYWxnZW9yZWdpc3Rlci5ubFwiLFxyXG4gICAgICAgIG1heFpvb206IDIxLFxyXG4gICAgICAgIG1pblpvb206IDEwXHJcbiAgICB9KS5hZGRUbyhtYXApO1xyXG5cclxuICAgIHZhciBnZW9Kc29uID0gTC5nZW9Kc29uKHVuZGVmaW5lZCwgeyBvbkVhY2hGZWF0dXJlOiBvbkVhY2hGZWF0dXJlIH0pO1xyXG4gICAgZ2VvSnNvbi5hZGRUbyhtYXApO1xyXG5cclxuICAgIHZhciBnZW9Kc29uMiA9IEwuZ2VvSnNvbih1bmRlZmluZWQsIHsgb25FYWNoRmVhdHVyZTogb25FYWNoRmVhdHVyZTIgfSk7XHJcbiAgICBnZW9Kc29uMi5hZGRUbyhtYXApO1xyXG5cclxuICAgIHZhciBjaXR5ID0gd2luZG93LmZuLmNpdHk7XHJcbiAgICBpZiAoY2l0eSkge1xyXG4gICAgICAgIHdpbmRvdy5mbi5jaXR5ID0gbnVsbDtcclxuICAgICAgICBnZXRKU09OKGNpdHkuX2xpbmtzWydjaXR5Oml0ZW0nXS5ocmVmLCBmdW5jdGlvbiAoY2l0eUluZm8pIHtcclxuICAgICAgICAgICAgdmFyIGxhdExvbiA9IGNpdHlJbmZvLmxvY2F0aW9uLmxhdGxvbjtcclxuICAgICAgICAgICAgbWFwLnNldFZpZXcobmV3IEwuTGF0TG5nKGxhdExvbi5sYXRpdHVkZSwgbGF0TG9uLmxvbmdpdHVkZSksIDEzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWFwLmxvY2F0ZSh7IHNldFZpZXc6IHRydWUsIG1heFpvb206IDMwIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBtYXAub24oXCJtb3ZlZW5kXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgem9vbSA9IG1hcC5nZXRab29tKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coem9vbSlcclxuICAgICAgICBpbnRlcmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICB2YXIgem9vbVBlcmNlbnRhZ2UgPSAxMDAgLSBNYXRoLm1pbigxMDAsIHpvb20gLyAxNykgKiAxMDA7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3pvb21sZXZlbC1wcm9ncmVzcycpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAndG9wOiAnICsgem9vbVBlcmNlbnRhZ2UgKyAnJScpO1xyXG4gICAgICAgIGlmICh6b29tIDwgMTcpIHtcclxuICAgICAgICAgICAgZ2VvSnNvbi5jbGVhckxheWVycygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHpvb21lZExvd0Vub3VnaCA9IHRydWU7XHJcbiAgICAgICAgLy8gdmFyIHZpZXdCb3VuZHMgPSBtYXAuZ2V0Qm91bmRzKCk7XHJcbiAgICAgICAgLy8gdmFyIHVybCA9ICdodHRwczovL2dlb2RhdGEubmF0aW9uYWFsZ2VvcmVnaXN0ZXIubmwva2FkYXN0cmFsZWthYXJ0djMvd2ZzPyc7XHJcbiAgICAgICAgLy8gdmFyIHBhcmFtcyA9ICdzZXJ2aWNlPXdmcyYnO1xyXG4gICAgICAgIC8vIHBhcmFtcyArPSAndmVyc2lvbj0zLjAuMCYnO1xyXG4gICAgICAgIC8vIHBhcmFtcyArPSAncmVxdWVzdD1HZXRGZWF0dXJlJic7XHJcbiAgICAgICAgLy8gcGFyYW1zICs9ICd0eXBlTmFtZT1rYWRhc3RyYWxla2FhcnR2MzpwZXJjZWVsJic7XHJcbiAgICAgICAgLy8gcGFyYW1zICs9ICdvdXRwdXRGb3JtYXQ9anNvbiYnO1xyXG4gICAgICAgIC8vIHBhcmFtcyArPSAnc3JzTmFtZT1FUFNHOjQzMjYmJztcclxuICAgICAgICAvLyBwYXJhbXMgKz0gYEJCT1g9JHt2aWV3Qm91bmRzLl9zb3V0aFdlc3QubG5nfSwke3ZpZXdCb3VuZHMuX3NvdXRoV2VzdC5sYXR9LCR7dmlld0JvdW5kcy5fbm9ydGhFYXN0LmxuZ30sJHt2aWV3Qm91bmRzLl9ub3J0aEVhc3QubGF0fSxFUFNHOjQzMjYmYDtcclxuICAgICAgICAvLyBwYXJhbXMgKz0gJ2NvdW50PTEwMDAwJztcclxuXHJcbiAgICAgICAgLy8gZ2V0SlNPTih1cmwgKyBwYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgIC8vICAgICBnZW9Kc29uLmNsZWFyTGF5ZXJzKCk7XHJcbiAgICAgICAgLy8gICAgIGdlb0pzb24uYWRkRGF0YShkYXRhLmZlYXR1cmVzKTtcclxuICAgICAgICAvLyB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIG1hcC5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGljaycsIGUpO1xyXG4gICAgICAgIHZhciBsYXRMb25nID0gZS5sYXRsbmc7XHJcbiAgICAgICAgY29uc29sZS5sb2cobGF0TG9uZyk7XHJcbiAgICAgICAgc2hvd0xvY2F0aW9uT25NYXAobGF0TG9uZyk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgIGZ1bmN0aW9uIG9uRWFjaEZlYXR1cmUoZmVhdHVyZSwgbGF5ZXIpIHtcclxuICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gW107XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMua2FkYXN0cmFsZUdlbWVlbnRlQ29kZSlcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnR2VtZWVudGUgQ29kZTogJyArIGZlYXR1cmUucHJvcGVydGllcy5rYWRhc3RyYWxlR2VtZWVudGVDb2RlKTtcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy50eXBlKVxyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKCdUeXBlOiAnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLnR5cGUgfHwgXCJcIilcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy5rYWRhc3RyYWxlZ3Jvb3R0ZSlcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnS2FkYXN0cmFsZSBncm9vdHRlOiAnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLmthZGFzdHJhbGVncm9vdHRlICsgJ208c3VwPjI8L3N1cD4nKVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLmxvZ2lzY2h0aWpkc3RpcE9udHN0YWFuKVxyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKCdMb2dpc2NoIHRpamRzdGlwIG9udHN0YWFuOiAnICsgKGZlYXR1cmUucHJvcGVydGllcy5sb2dpc2NodGlqZHN0aXBPbnRzdGFhbiBcclxuICAgICAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKGZlYXR1cmUucHJvcGVydGllcy5sb2dpc2NodGlqZHN0aXBPbnRzdGFhbiApLnRvTG9jYWxlRGF0ZVN0cmluZygnbmwtTkwnKVxyXG4gICAgICAgICAgICAgICAgICAgIDogJ05pZXQgYmVzY2hpa2JhYXInKSk7XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMubG9naXNjaHRpamRzdGlwVmVydmFsbGVuKVxyXG4gICAgICAgICAgICAgICAgcHJvcGVydGllcy5wdXNoKCdMb2dpc2NoIHRpamRzdGlwIHZlcnZhbGxlbjogJyArIGZlYXR1cmUucHJvcGVydGllcy5sb2dpc2NodGlqZHN0aXBWZXJ2YWxsZW4gfHwgXCJcIilcclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy5sb2thYWxJRClcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnTG9rYWFsSUQ6ICcgKyBmZWF0dXJlLnByb3BlcnRpZXMubG9rYWFsSUQgfHwgXCJcIik7XHJcbiAgICAgICAgICAgIGlmIChmZWF0dXJlLnByb3BlcnRpZXMucGVyY2VlbG51bW1lcilcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnUGVyY2VlbCBudW1tZXI6ICcgKyBmZWF0dXJlLnByb3BlcnRpZXMucGVyY2VlbG51bW1lciB8fCBcIlwiKVxyXG4gICAgICAgICAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzLnNlY3RpZSlcclxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaCgnU2VjdGllOiAnICsgZmVhdHVyZS5wcm9wZXJ0aWVzLnNlY3RpZSB8fCBcIlwiKVxyXG5cclxuICAgICAgICAgICAgdmFyIGlkID0gJ3BvcHVwLWRldGFpbHMtJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpO1xyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzLnB1c2goJzxicj48b25zLWJ1dHRvbiBpZD1cIicgKyBpZCArICdcIiBjbGFzcz1cImJ1dHRvbiBwb3B1cC1kZXRhaWxzXCI+RGV0YWlsczwvb25zLWJ1dHRvbj4nKTtcclxuXHJcbiAgICAgICAgICAgIGxheWVyLm9uKCdhZGQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS50YXJnZXQub3BlblBvcHVwKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgICAgICAgICAgYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYXZpZ2F0b3InKS5wdXNoUGFnZSgndmlld3MvZGV0YWlscy5odG1sJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsYXllci5iaW5kUG9wdXAocHJvcGVydGllcy5qb2luKCc8YnI+JykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnlfbmFtZSA9PT0gXCJwbGFhdHNjb29yZGluYXRlblwiKSB7XHJcbiAgICAgICAgICAgIGxheWVyLm9uKHtcclxuICAgICAgICAgICAgICAgIGNsaWNrOiBoaWdobGlnaHRGZWF0dXJlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBvbkVhY2hGZWF0dXJlMigpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0xvY2F0aW9uT25NYXAobGF0TG9uZykge1xyXG4gICAgICAgIGlmIChtYXAuZ2V0Wm9vbSgpIDwgMTcpIHtcclxuICAgICAgICAgICAgZ2VvSnNvbi5jbGVhckxheWVycygpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdldEpTT04oJ2h0dHBzOi8vZXBzZy5pby90cmFucz9kYXRhPScgKyBsYXRMb25nLmxuZyArICcsJyArIGxhdExvbmcubGF0ICsgJyZzX3Nycz00MzI2JiZ0X3Nycz0yODk5MicsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlc3BnMjg5OTIgPSByZXNbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0gJ3JlcXVlc3Q9Z2V0RmVhdHVyZSYnO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICdzcnNOYW1lPUVQU0c6NDMyNiYnO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICd2ZXJzaW9uPTIuMC4wJic7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgKz0gJ3R5cGVuYW1lcz1rYWRhc3RyYWxla2FhcnR2MzpwZXJjZWVsJic7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgKz0gJ291dHB1dEZvcm1hdD1hcHBsaWNhdGlvbi9qc29uJic7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMgKz0gJ2NxbF9maWx0ZXI9Q09OVEFJTlMoYmVncmVuemluZ3BlcmNlZWwlMkNQT0lOVCgnICsgZXNwZzI4OTkyLnggKyAnICcgKyBlc3BnMjg5OTIueSArICcpKSdcclxuICAgICAgICAgICAgICAgIGdldEpTT04oJ2h0dHBzOi8vZ2VvZGF0YS5uYXRpb25hYWxnZW9yZWdpc3Rlci5ubC9rYWRhc3RyYWxla2FhcnR2My93ZnM/JyArIHBhcmFtcywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBnZW9Kc29uLmNsZWFyTGF5ZXJzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2VvSnNvbi5hZGREYXRhKGRhdGEuZmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGluZm8gPSBMLmNvbnRyb2woKTtcclxuXHJcbiAgICBpbmZvLm9uQWRkID0gZnVuY3Rpb24gKG1hcCkge1xyXG4gICAgICAgIHRoaXMuX2RpdiA9IEwuRG9tVXRpbC5jcmVhdGUoJ2RpdicsICdpbmZvJyk7IC8vIGNyZWF0ZSBhIGRpdiB3aXRoIGEgY2xhc3MgXCJpbmZvXCJcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXY7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIG1ldGhvZCB0aGF0IHdlIHdpbGwgdXNlIHRvIHVwZGF0ZSB0aGUgY29udHJvbCBiYXNlZCBvbiBmZWF0dXJlIHByb3BlcnRpZXMgcGFzc2VkXHJcbiAgICBpbmZvLnVwZGF0ZSA9IGZ1bmN0aW9uIChwcm9wcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHByb3BzKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgaWYgKHByb3BzKSB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gXCI8aDQ+RWlnZW5zY2hhcHBlbjo8L2g0PlwiO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHByb3BzKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50ICs9IChcIjxiciAvPlwiICsgcCArIFwiOiBcIiArIHByb3BzW3BdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGl2LmlubmVySFRNTCA9IFwiPGJyIC8+U2VsZWN0ZWVyIGVlbiBwZXJjZWVsXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9kaXYuaW5uZXJIVE1MID0gY29udGVudDtcclxuICAgIH07XHJcblxyXG4gICAgaW5mby5hZGRUbyhtYXApO1xyXG5cclxuICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHpvb21lZExvd0Vub3VnaCkgcmV0dXJuO1xyXG4gICAgICAgIHdpbmRvdy5vbnMubm90aWZpY2F0aW9uLnRvYXN0KCdab29tIGluIG9tIGthZGFzdGVyIGluZm9ybWF0aWUgdGUgYmVraWprZW4uJywgeyB0aW1lb3V0OiA0MDAwLCBhbmltYXRpb246ICdmYWxsJyB9KTtcclxuICAgIH0sIDYwMDApO1xyXG5cclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignaGlkZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnbWFwIGhpZGUnKTtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICB9KVxyXG5cclxuICAgIHBhZ2UuYWRkRXZlbnRMaXN0ZW5lcignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBtYXAuZWFjaExheWVyKGZ1bmN0aW9uIChsYXllcikge1xyXG4gICAgICAgICAgICBsYXllci5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBtYXAucmVtb3ZlKCk7XHJcbiAgICAgICAgd2luZG93LmZuLm1hcCA9IG51bGw7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpKTtcclxuICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0vL1xyXG5cclxuICAgIGZ1bmN0aW9uIGhpZ2hsaWdodEZlYXR1cmUoZSkge1xyXG5cclxuICAgICAgICByZXNldEhpZ2hsaWdodChlKTtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZ2VvSnNvbjIuYWRkRGF0YShlLnRhcmdldC5mZWF0dXJlLnByb3BlcnRpZXMuYmVncmVuemluZ3BlcmNlZWwpO1xyXG5cclxuICAgICAgICBtYXAuZml0Qm91bmRzKHRhcmdldC5nZXRCb3VuZHMoKSk7XHJcbiAgICAgICAgaW5mby51cGRhdGUoZS50YXJnZXQuZmVhdHVyZS5wcm9wZXJ0aWVzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZXNldEhpZ2hsaWdodChlKSB7XHJcbiAgICAgICAgaW5mby51cGRhdGUoKTtcclxuICAgICAgICBnZW9Kc29uMi5jbGVhckxheWVycygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkS2FhcnQoKSB7XHJcbiAgICAvLyBsb2FkIE9wZW5TdHJlZXRNYXAgYmFzZW1hcFxyXG4gICAgdmFyIGthYXJ0ID0gd2luZG93LkwudGlsZUxheWVyKCdodHRwczovL3tzfS50aWxlLm9wZW5zdHJlZXRtYXAub3JnL3t6fS97eH0ve3l9LnBuZycsIHtcclxuICAgICAgICBmb3JtYXQ6ICdpbWFnZS9wbmcnLFxyXG4gICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxyXG4gICAgICAgIHpJbmRleDogMCxcclxuICAgICAgICBtYXhab29tOiAyMSxcclxuICAgIH0pO1xyXG4gICAgd2luZG93LmZuLmxheWVyVHlwZSA9ICdrYWFydCc7XHJcbiAgICB3aW5kb3cuZm4ubGF5ZXIgPSBrYWFydDtcclxuICAgIHdpbmRvdy5mbi5tYXAuYWRkTGF5ZXIoa2FhcnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkU2F0KCkge1xyXG4gICAgdmFyIGdvb2dsZVNhdCA9IHdpbmRvdy5MLnRpbGVMYXllcignaHR0cHM6Ly97c30uZ29vZ2xlLmNvbS92dC9seXJzPXMmeD17eH0meT17eX0mej17en0nLCB7XHJcbiAgICAgICAgbWF4Wm9vbTogMjAsXHJcbiAgICAgICAgekluZGV4OiAwLFxyXG4gICAgICAgIHN1YmRvbWFpbnM6IFsnbXQwJywgJ210MScsICdtdDInLCAnbXQzJ11cclxuICAgIH0pO1xyXG4gICAgd2luZG93LmZuLmxheWVyVHlwZSA9ICdzYXQnO1xyXG4gICAgd2luZG93LmZuLmxheWVyID0gZ29vZ2xlU2F0O1xyXG4gICAgd2luZG93LmZuLm1hcC5hZGRMYXllcihnb29nbGVTYXQpO1xyXG59XHJcblxyXG5cclxuIiwiXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIF9wcm9qNF9wcm9qX2Vwc2c0MzI2ID0gbmV3IHdpbmRvdy5wcm9qNC5Qcm9qKCdFUFNHOjQzMjYnKTsgICAgLy9zb3VyY2UgY29vcmRpbmF0ZXMgd2lsbCBiZSBpbiBMb25naXR1ZGUvTGF0aXR1ZGUsIFdHUzg0XHJcbiAgICB2YXIgX3Byb2o0X3Byb2pfZXBzZzM3ODUgPSBuZXcgd2luZG93LnByb2o0LlByb2ooJ0VQU0c6Mzc4NScpO1xyXG5cclxuICAgIHZhciBwYW5kZW5Qcm9taXNlO1xyXG4gICAgdmFyIHZlcmJsaWpmUGxhYXRzZW5Qcm9taXNlO1xyXG4gICAgdmFyIGxpZ1BsYWF0c2VuUHJvbWlzZTtcclxuICAgIHZhciBzdGFuZFBsYWF0c2VuUHJvbWlzZTtcclxuICAgIHZhciB3b29uUGxhYXRzZW5Qcm9taXNlO1xyXG5cclxuICAgIHZhciBmZWF0dXJlO1xyXG4gICAgdmFyIGdlb2pzb24zODU3O1xyXG4gICAgdmFyIHhNYXg7XHJcbiAgICB2YXIgeE1pbjtcclxuICAgIHZhciB5TWF4O1xyXG4gICAgdmFyIHlNaW47XHJcbiAgICB2YXIgcGFuZGVuO1xyXG4gICAgdmFyIGRldGFpbHNQYWdlO1xyXG4gICAgdmFyIHZlcmJsaWpmc09iamVjdGVuO1xyXG4gICAgdmFyIGxpZ1BsYWF0c2VuO1xyXG4gICAgdmFyIHN0YW5kUGxhYXRzZW47XHJcbiAgICB2YXIgd29vbnBQbGFhdHNlbjtcclxuICAgIHZhciBzdmdIVE1MO1xyXG5cclxuICAgIHdpbmRvdy5pbml0RGV0YWlsc01pc2MgPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgIHdvb25QbGFhdHNlblByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxpZ1BsYWF0c2VuUHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHN0YW5kUGxhYXRzZW5Qcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHVwRGV0YWlsTWlzY1BhZ2UocGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2V0dXBEZXRhaWxNaXNjUGFnZShwYWdlKSB7XHJcbiAgICAgICAgdmFyIHdvb25wbGFhdHNlbkxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd29vbnBsYWF0cy1taXNjLWxpc3QtaXRlbS1jb250YWluZXInKTtcclxuICAgICAgICB2YXIgbGlnUGxhYXRzZW5MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpZ3BsYWF0c2VuLW1pc2MtbGlzdC1pdGVtLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHZhciBzdGFuZFBsYWF0c2VuTGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFuZHBsYWF0c2VuLW1pc2MtbGlzdC1pdGVtLWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICB3b29ucFBsYWF0c2VuLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BzID0gZmVhdHVyZS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgbGlzdEl0ZW0uaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICc8b25zLWxpc3QtaXRlbT48ZGl2IGNsYXNzPVwibGVmdFwiPicgKyBwcm9wcy53b29ucGxhYXRzICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj48ZGl2IGNsYXNzPVwicmlnaHRcIj48c21hbGw+JyArIGZlYXR1cmUuaWQucmVwbGFjZSgnLicsICcgJykgKyAnLCAnICsgJ0lkZW50aWZpY2F0aWU6ICcgKyAncHJvcHMuaWRlbnRpZmljYXRpZScgK1xyXG4gICAgICAgICAgICAgICAgJywgU3RhdHVzOiAnICsgcHJvcHMuc3RhdHVzICsgJzwvc21hbGw+PC9kaXY+PC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIHdvb25wbGFhdHNlbkxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAod29vbnBQbGFhdHNlbi5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgd29vbnBsYWF0c2VuTGlzdC5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICAgICAgJzxvbnMtbGlzdC1pdGVtPkdlZW4gd29vbnBsYWF0c2VuIGdldm9uZGVuPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsaWdQbGFhdHNlbi5mZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uIChmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9wcyA9IGZlYXR1cmUucHJvcGVydGllcztcclxuICAgICAgICAgICAgdmFyIGh0bWwgPSAnPG9ucy1saXN0LWl0ZW0gZXhwYW5kYWJsZT4nO1xyXG4gICAgICAgICAgICBodG1sICs9IGZlYXR1cmUuaWQucmVwbGFjZSgnLicsICcgJyk7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJleHBhbmRhYmxlLWNvbnRlbnRcIj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkFjdHVhbGl0ZWl0c2RhdHVtOjwvYj4gJyArIChwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bVxyXG4gICAgICAgICAgICAgICAgPyBuZXcgRGF0ZShwcm9wcy5hY3R1YWxpdGVpdHNkYXR1bSkudG9Mb2NhbGVEYXRlU3RyaW5nKCdubC1OTCcpXHJcbiAgICAgICAgICAgICAgICA6ICdOaWV0IGJlc2NoaWtiYWFyJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5IdWlzbGV0dGVyPC9iPiAnICsgKHByb3BzLmh1aXNsZXR0ZXIgfHwgJycpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+SHVpc251bW1lcjo8L2I+ICcgKyBwcm9wcy5odWlzbnVtbWVyICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+SWRlbnRpZmljYXRpZTo8L2I+ICcgKyBwcm9wcy5pZGVudGlmaWNhdGllICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+T3BlbmJhcmUgcnVpbXRlOjwvYj4gJyArIHByb3BzLm9wZW5iYXJlX3J1aW10ZSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPlBvc3Rjb2RlOjwvYj4gJyArIHByb3BzLnBvc3Rjb2RlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+U3RhdHVzOjwvYj4gJyArIHByb3BzLnN0YXR1cyArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPlRvZXZvZWdpbmc6PC9iPiAnICsgKHByb3BzLnRvZXZvZWdpbmcgfHwgJycpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+V29vbnBsYWF0czo8L2I+ICcgKyBwcm9wcy53b29ucGxhYXRzICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgICAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgICAgICBsaWdQbGFhdHNlbkxpc3QuYXBwZW5kQ2hpbGQoZGl2KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGxpZ1BsYWF0c2VuLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBsaWdQbGFhdHNlbkxpc3QuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICc8b25zLWxpc3QtaXRlbT5HZWVuIGxpZ3BsYWF0c2VuIGdldm9uZGVuPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzdGFuZFBsYWF0c2VuLmZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24gKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgdmFyIHByb3BzID0gZmVhdHVyZS5wcm9wZXJ0aWVzO1xyXG4gICAgICAgICAgICB2YXIgaHRtbCA9ICc8b25zLWxpc3QtaXRlbSBleHBhbmRhYmxlPic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gZmVhdHVyZS5pZC5yZXBsYWNlKCcuJywgJyAnKTtcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImV4cGFuZGFibGUtY29udGVudFwiPic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+QWN0dWFsaXRlaXRzZGF0dW06PC9iPiAnICsgKHByb3BzLmFjdHVhbGl0ZWl0c2RhdHVtXHJcbiAgICAgICAgICAgICAgICA/IG5ldyBEYXRlKHByb3BzLmFjdHVhbGl0ZWl0c2RhdHVtKS50b0xvY2FsZURhdGVTdHJpbmcoJ25sLU5MJylcclxuICAgICAgICAgICAgICAgIDogJ05pZXQgYmVzY2hpa2JhYXInKSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkh1aXNsZXR0ZXI8L2I+ICcgKyAocHJvcHMuaHVpc2xldHRlciB8fCAnJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5IdWlzbnVtbWVyOjwvYj4gJyArIHByb3BzLmh1aXNudW1tZXIgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5JZGVudGlmaWNhdGllOjwvYj4gJyArIHByb3BzLmlkZW50aWZpY2F0aWUgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5PcGVuYmFyZSBydWltdGU6PC9iPiAnICsgcHJvcHMub3BlbmJhcmVfcnVpbXRlICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+UG9zdGNvZGU6PC9iPiAnICsgcHJvcHMucG9zdGNvZGUgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5TdGF0dXM6PC9iPiAnICsgcHJvcHMuc3RhdHVzICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+VG9ldm9lZ2luZzo8L2I+ICcgKyAocHJvcHMudG9ldm9lZ2luZyB8fCAnJykgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5Xb29ucGxhYXRzOjwvYj4gJyArIHByb3BzLndvb25wbGFhdHMgKyAnPC9kaXY+JztcclxuICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+PC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGh0bWw7XHJcbiAgICAgICAgICAgIHN0YW5kUGxhYXRzZW5MaXN0LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChzdGFuZFBsYWF0c2VuLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBzdGFuZFBsYWF0c2VuTGlzdC5pbm5lckhUTUwgPVxyXG4gICAgICAgICAgICAgICAgJzxvbnMtbGlzdC1pdGVtPkdlZW4gc3RhbmRwbGFhdHNlbiBnZXZvbmRlbjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ21pc2MnLCB3b29ucFBsYWF0c2VuLCBsaWdQbGFhdHNlbiwgc3RhbmRQbGFhdHNlbik7XHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LmluaXREZXRhaWxzVmVyYmxpamZPYmplY3REZXRhaWwgPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgIHZhciB2ZXJibGlqZnNvYmplY3QgPSBwYWdlLmRhdGEudmVyYmxpamZvYmplY3Q7XHJcbiAgICAgICAgdmFyIHByb3BzID0gdmVyYmxpamZzb2JqZWN0LnByb3BlcnRpZXM7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLWFjdHVhbGl0ZWl0c2RhdHVtJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMuYWN0dWFsaXRlaXRzZGF0dW1cclxuICAgICAgICAgICAgICAgID8gbmV3IERhdGUocHJvcHMuYWN0dWFsaXRlaXRzZGF0dW0pLnRvTG9jYWxlRGF0ZVN0cmluZygnbmwtTkwnKVxyXG4gICAgICAgICAgICAgICAgOiAnTmlldCBiZXNjaGlrYmFhcic7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLWJvdXdqYWFyJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMuYm91d2phYXIgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1nZWJydWlrc2RvZWwnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5nZWJydWlrc2RvZWwgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1odWlzbGV0dGVyJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMuaHVpc2xldHRlciB8fCAnTmlldCB2YW4gdG9lcGFzc2luZyc7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLWh1aXNudW1tZXInKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5odWlzbnVtbWVyIHx8ICdOaWV0IGJlc2NoaWtiYWFyJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8taWRlbnRpZmljYXRpZScpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLmlkZW50aWZpY2F0aWUgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1vcGVuYmFyZS1ydWltdGUnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5vcGVuYmFyZV9ydWltdGUgfHwgJ05pZXQgYmVzY2hpa2JhYXInO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by1vcHBlcnZsYWt0ZScpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLm9wcGVydmxha3RlIHx8ICdOaWV0IGJlc2NoaWtiYWFyJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tcGFuZGlkZW50aWZpY2F0aWUnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5wYW5kaWRlbnRpZmljYXRpZSB8fCAnTmlldCBiZXNjaGlrYmFhcic7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZvLXBhbmRzdGF0dXMnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5wYW5kc3RhdHVzIHx8ICdOaWV0IGJlc2NoaWtiYWFyJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tcG9zdGNvZGUnKS5pbm5lclRleHQgPVxyXG4gICAgICAgICAgICBwcm9wcy5wb3N0Y29kZTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tc3RhdHVzJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMuc3RhdHVzIHx8ICdOaWV0IGJlc2NoaWtiYWFyJztcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdm8tdG9ldm9lZ2luZycpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgIHByb3BzLnRvZXZvZWdpbmcgfHwgJ05pZXQgdmFuIHRvZXBhc3NpbmcnO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGV0YWlscy12by13b29ucGxhYXRzJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgcHJvcHMud29vbnBsYWF0cztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LmluaXREZXRhaWxzUGFuZGVuID0gZnVuY3Rpb24gKHBhZ2UpIHtcclxuICAgICAgICBwYW5kZW5Qcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXBhbmRlbi1saXN0LWNvbnRlbnQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBodG1sID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFuZGVuLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBwYW5kZW4uZmVhdHVyZXNbaV0ucHJvcGVydGllcztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvbnMtbGlzdC1pdGVtIGV4cGFuZGFibGU+JztcclxuICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IHRvU1ZHUGF0aHNBcnIocGFuZGVuLmZlYXR1cmVzW2ldLCAyNTAsIDI1MCwge1xyXG4gICAgICAgICAgICAgICAgICAgICdzdHlsZSc6ICdzdHJva2U6IzY2MDAwMDsgZmlsbDogI0YwRjhGRjtzdHJva2Utd2lkdGg6MC41cHg7JyxcclxuICAgICAgICAgICAgICAgICAgICAndmVjdG9yLWVmZmVjdCc6ICdub24tc2NhbGluZy1zdHJva2UnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gcGFuZGVuLmZlYXR1cmVzW2ldLmlkLnJlcGxhY2UoJy4nLCAnICcpO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImV4cGFuZGFibGUtY29udGVudFwiPic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8c3ZnIGNsYXNzPVwicGFuZC1zdmdcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwMFwiIHZpZXdCb3g9XCIwIDAgMjUwIDI1MFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj4nO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSBwYXRocy5qb2luKCcnKTtcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvc3ZnPic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPk9wcGVydmxha3RlIChtaW4pOjwvYj4gJyArIHByb3BzLm9wcGVydmxha3RlX21pbiArICdtPHN1cD4yPC9zdWI+PC9kaXY+JztcclxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXY+PGI+T3BwZXJ2bGFrdGUgKG1heCk6PC9iPiAnICsgcHJvcHMub3BwZXJ2bGFrdGVfbWF4ICsgJ208c3VwPjI8L3N1Yj48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5BY3R1YWxpdGVpdHNkYXR1bTo8L2I+ICcgKyAocHJvcHMuYWN0dWFsaXRlaXRzZGF0dW0gfHwgJ05pZXQgYmVzY2hpa2JhYXInKSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5HZWJydWlrc2RvZWw6PC9iPiAnICsgKHByb3BzLmdlYnJ1aWtzZG9lbCB8fCAnTmlldCBiZXNjaGlrYmFhci92YW4gdG9lcGFzc2luZycpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPkJvdXdqYWFyOjwvYj4gJyArIChwcm9wcy5ib3V3amFhciB8fCAnTmlldCBiZXNjaGlrYmFhcicpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2PjxiPklkZW50aWZpY2F0aWU6PC9iPiAnICsgKHByb3BzLmlkZW50aWZpY2F0aWUgfHwgJ05pZXQgYmVzY2hpa2JhYXInKSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdj48Yj5TdGF0dXM6PC9iPiAnICsgKHByb3BzLnN0YXR1cyB8fCAnTmlldCBiZXNjaGlrYmFhcicpICsgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj48L29ucy1saXN0LWl0ZW0+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFuZGVuLmZlYXR1cmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGgzPkdlZW4gcGFuZGVuIG9wIGRpdCBwZXJjZWVsLjwvaDM+J1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGQuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChkKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cuaW5pdERldGFpbHNWZXJibGlqZnNQbGFhdHNlbiA9IGZ1bmN0aW9uIChwYWdlKSB7XHJcbiAgICAgICAgdmVyYmxpamZQbGFhdHNlblByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtdmVyYmxpamZwbGFhdHNlbi1saXN0Jyk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVyYmxpamZzT2JqZWN0ZW4uZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZlcmJsaWpmb2JqZWN0ID0gdmVyYmxpamZzT2JqZWN0ZW4uZmVhdHVyZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHByb3BzID0gdmVyYmxpamZvYmplY3QucHJvcGVydGllcztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGF0aHMgPSB0b1NWR1BhdGhzQXJyKHsgdHlwZTogdmVyYmxpamZvYmplY3QudHlwZSwgZ2VvbWV0cnk6IHByb3BzLnBhbmRnZW9tZXRyaWUgfSwgMjUwLCAyNTAsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0eWxlJzogJ3N0cm9rZTojNjYwMDAwOyBmaWxsOiAjRjBGOEZGO3N0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndmVjdG9yLWVmZmVjdCc6ICdub24tc2NhbGluZy1zdHJva2UnXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSAnPG9ucy1saXN0LWl0ZW0gdGFwcGFibGU+JztcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwibGVmdFwiPidcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8c3ZnIGNsYXNzPVwicGFuZC1zdmdcIiB3aWR0aD1cIjQwXCIgaGVpZ2h0PVwiNDBcIiB2aWV3Qm94PVwiMCAwIDI1MCAyNTBcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+JztcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9IHBhdGhzLmpvaW4oJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvc3ZnPjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNlbnRlclwiPic7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSBbcHJvcHMub3BlbmJhcmVfcnVpbXRlLCBwcm9wcy5odWlzbnVtbWVyICsgcHJvcHMuaHVpc2xldHRlciArIChwcm9wcy50b2V2b2VnaW5nIHx8ICcnKSArICcsJywgcHJvcHMucG9zdGNvZGUgKyAnLCcsIHByb3BzLndvb25wbGFhdHNdLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj48L29ucy1saXN0LWl0ZW0+JztcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlQ2xvc3VyZSA9IHZlcmJsaWpmc09iamVjdGVuLmZlYXR1cmVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLmZpcnN0Q2hpbGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2aWdhdG9yJykucHVzaFBhZ2UoJ3ZpZXdzL2RldGFpbHMtdmVyYmxpamZvYmplY3QtZGV0YWlsLmh0bWwnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IHZlcmJsaWpmb2JqZWN0OiB2ZXJibGlqZm9iamVjdCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodmVyYmxpamZzT2JqZWN0ZW4uZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG4gICAgICAgICAgICAgICAgZWwuaW5uZXJUZXh0ID0gJ0dlZW4gdmVyYmxpamZwbGFhdHNlbiBvcCBkaXQgcGVyY2VlbC4nO1xyXG4gICAgICAgICAgICAgICAgbGlzdC5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cuaW5pdERldGFpbHNHZW5lcmFsID0gZnVuY3Rpb24gaW5pdERldGFpbHNHZW5lcmFsKHBhZ2UpIHtcclxuICAgICAgICBwYW5kZW5Qcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGV0YWlsc1N2ZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXN2ZycpO1xyXG4gICAgICAgICAgICBkZXRhaWxzU3ZnLmlubmVySFRNTCA9IHN2Z0hUTUw7XHJcblxyXG4gICAgICAgICAgICB3aW5kb3cuZm4uZ2V0R2VtZWVudGVDb2RlcyhmdW5jdGlvbiAoY29kZXMpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW1lZW50ZScpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZXNbZmVhdHVyZS5wcm9wZXJ0aWVzLmthZGFzdHJhbGVHZW1lZW50ZUNvZGVdO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnZW1lZW50ZS1jb2RlJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllcy5rYWRhc3RyYWxlR2VtZWVudGVDb2RlO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thZGFzdHJhbGUtZ3Jvb3R0ZScpLmlubmVySFRNTCA9XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMua2FkYXN0cmFsZWdyb290dGUudG9Mb2NhbGVTdHJpbmcoKSArICdtPHN1cD4yPC9zdWI+JztcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpc2NoLW9udHN0YWFuJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgIG5ldyBEYXRlKGZlYXR1cmUucHJvcGVydGllcy5sb2dpc2NodGlqZHN0aXBPbnRzdGFhbilcclxuICAgICAgICAgICAgICAgICAgICAudG9Mb2NhbGVEYXRlU3RyaW5nKCdubC1OTCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcy5sb2dpc2NodGlqZHN0aXBWZXJ2YWxsZW4pIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2dpc2NoLXZlcnZhbGxlbicpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IERhdGUoZmVhdHVyZS5wcm9wZXJ0aWVzLmxvZ2lzY2h0aWpkc3RpcE9udHN0YWFuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudG9Mb2NhbGVEYXRlU3RyaW5nKCdubC1OTCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvZ2lzY2gtdmVydmFsbGVuJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgICAgICAnTmlldCB2YW4gdG9lcGFzc2luZyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJjZWVsLW51bW1lcicpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMucGVyY2VlbG51bW1lclxyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlZWwtbG9uJykuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllcy5wbGFhdHNjb29yZGluYXRlbi5jb29yZGluYXRlc1swXTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJjZWVsLWxhdCcpLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXMucGxhYXRzY29vcmRpbmF0ZW4uY29vcmRpbmF0ZXNbMV07XHJcblxyXG4gICAgICAgICAgICB2YXIgZG1zID0gY29udmVydERNUyhmZWF0dXJlLnByb3BlcnRpZXMucGxhYXRzY29vcmRpbmF0ZW4uY29vcmRpbmF0ZXNbMV0sIGZlYXR1cmUucHJvcGVydGllcy5wbGFhdHNjb29yZGluYXRlbi5jb29yZGluYXRlc1swXSk7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVyY2VlbC1sb24tZG1zJykuaW5uZXJUZXh0ID0gZG1zWzFdO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlcmNlZWwtbGF0LWRtcycpLmlubmVyVGV4dCA9IGRtc1swXTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJjZWVsLXNlY3RpZScpLmlubmVyVGV4dCA9IGZlYXR1cmUucHJvcGVydGllcy5zZWN0aWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHdpbmRvdy5pbml0RGV0YWlscyA9IGZ1bmN0aW9uIGluaXREZXRhaWxzKHBhZ2UpIHtcclxuICAgICAgICBkZXRhaWxzUGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2luaXQgZGV0YWlscycsIHBhZ2UsIHBhZ2UuZGF0YSk7XHJcbiAgICAgICAgcGFuZGVuUHJvbWlzZSA9IF9wcm9taXNlKCk7XHJcbiAgICAgICAgdmVyYmxpamZQbGFhdHNlblByb21pc2UgPSBfcHJvbWlzZSgpO1xyXG4gICAgICAgIHdvb25QbGFhdHNlblByb21pc2UgPSBfcHJvbWlzZSgpO1xyXG4gICAgICAgIGxpZ1BsYWF0c2VuUHJvbWlzZSA9IF9wcm9taXNlKCk7XHJcbiAgICAgICAgc3RhbmRQbGFhdHNlblByb21pc2UgPSBfcHJvbWlzZSgpO1xyXG5cclxuICAgICAgICBmZWF0dXJlID0gcGFnZS5kYXRhLmZlYXR1cmU7XHJcblxyXG5cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ3RyYW5zZm9ybScsIGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMF1bMF0pO1xyXG4gICAgICAgIHRyYW5zZm9ybVRvRXNwZzM4NTdPblNwb3QoZmVhdHVyZSk7XHJcbiAgICAgICAgdmFyIGdlb2pzb24zODU3ID0gZmVhdHVyZTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coZ2VvanNvbjM4NTcpO1xyXG4gICAgICAgIHhNaW4gPSBJbmZpbml0eTtcclxuICAgICAgICB4TWF4ID0gLUluZmluaXR5O1xyXG4gICAgICAgIHlNaW4gPSBJbmZpbml0eTtcclxuICAgICAgICB5TWF4ID0gLUluZmluaXR5O1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvanNvbjM4NTcuZ2VvbWV0cnkuY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBnZW9qc29uMzg1Ny5nZW9tZXRyeS5jb29yZGluYXRlc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHggPSBnZW9qc29uMzg1Ny5nZW9tZXRyeS5jb29yZGluYXRlc1tpXVtqXVswXSxcclxuICAgICAgICAgICAgICAgICAgICB5ID0gZ2VvanNvbjM4NTcuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbaV1bal1bMV07XHJcbiAgICAgICAgICAgICAgICBpZiAoeCA8IHhNaW4pIHhNaW4gPSB4O1xyXG4gICAgICAgICAgICAgICAgaWYgKHggPiB4TWF4KSB4TWF4ID0geDtcclxuICAgICAgICAgICAgICAgIGlmICh5IDwgeU1pbikgeU1pbiA9IHk7XHJcbiAgICAgICAgICAgICAgICBpZiAoeSA+IHlNYXgpIHlNYXggPSB5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgZ2VvanNvbjJzdmdfY29udmVydGVyID0gd2luZG93Lmdlb2pzb24yc3ZnKHtcclxuICAgICAgICAgICAgdmlld3BvcnRTaXplOiB7IHdpZHRoOiAyNTAsIGhlaWdodDogMjUwIH0sXHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcclxuICAgICAgICAgICAgICAgICdzdHlsZSc6ICdzdHJva2U6IzAwNjYwMDsgZmlsbDogI0YwRjhGRjtzdHJva2Utd2lkdGg6MC41cHg7JyxcclxuICAgICAgICAgICAgICAgICd2ZWN0b3ItZWZmZWN0JzogJ25vbi1zY2FsaW5nLXN0cm9rZSdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbWFwRXh0ZW50OiB7XHJcbiAgICAgICAgICAgICAgICBsZWZ0OiB4TWluLFxyXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHhNYXgsXHJcbiAgICAgICAgICAgICAgICBib3R0b206IHlNaW4sXHJcbiAgICAgICAgICAgICAgICB0b3A6IHlNYXhcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdmFyIHN2Z1N0cmluZ3MgPSBnZW9qc29uMnN2Z19jb252ZXJ0ZXIuY29udmVydChnZW9qc29uMzg1Nyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coc3ZnU3RyaW5ncyk7XHJcblxyXG4gICAgICAgIHN2Z0hUTUwgPSBzdmdTdHJpbmdzLmpvaW4oJycpO1xyXG5cclxuICAgICAgICB2YXIgdmVyYmxpamZzb2JqZWN0ZW5VUkwgPSBnZXRCYWdUeXBlc1VSTChbeE1pbiwgeU1pbiwgeE1heCwgeU1heF0sICd2ZXJibGlqZnNvYmplY3QnLCAnRVBTRzozODU3JylcclxuICAgICAgICBnZXRKU09OKHZlcmJsaWpmc29iamVjdGVuVVJMLCBmdW5jdGlvbiAodm8pIHtcclxuICAgICAgICAgICAgdmVyYmxpamZzT2JqZWN0ZW4gPSB2bztcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3ZlcmJsaWpmb2JqZWN0ZW4nLCB2ZXJibGlqZnNPYmplY3Rlbik7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXRhaWxzLXZlcmJsaWpmcGxhYXRzZW4tdGFiJykuc2V0QXR0cmlidXRlKCdiYWRnZScsIHZvLmZlYXR1cmVzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHZlcmJsaWpmUGxhYXRzZW5Qcm9taXNlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBsaWdQbGFhdHNlblVSTCA9IGdldEJhZ1R5cGVzVVJMKFt4TWluLCB5TWluLCB4TWF4LCB5TWF4XSwgJ2xpZ3BsYWF0cycsICdFUFNHOjM4NTcnKTtcclxuICAgICAgICBnZXRKU09OKGxpZ1BsYWF0c2VuVVJMLCBmdW5jdGlvbiAobHApIHtcclxuICAgICAgICAgICAgbGlnUGxhYXRzZW4gPSBscDtcclxuICAgICAgICAgICAgbGlnUGxhYXRzZW5Qcm9taXNlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHZhciBzdGFuZFBsYWF0c2VuVVJMID0gZ2V0QmFnVHlwZXNVUkwoW3hNaW4sIHlNaW4sIHhNYXgsIHlNYXhdLCAnc3RhbmRwbGFhdHMnLCAnRVBTRzozODU3Jyk7XHJcbiAgICAgICAgZ2V0SlNPTihzdGFuZFBsYWF0c2VuVVJMLCBmdW5jdGlvbiAobHApIHtcclxuICAgICAgICAgICAgc3RhbmRQbGFhdHNlbiA9IGxwO1xyXG4gICAgICAgICAgICBzdGFuZFBsYWF0c2VuUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgd29vblBsYWF0c2VuVVJMID0gZ2V0QmFnVHlwZXNVUkwoW3hNaW4sIHlNaW4sIHhNYXgsIHlNYXhdLCAnd29vbnBsYWF0cycsICdFUFNHOjM4NTcnKTtcclxuICAgICAgICBnZXRKU09OKHdvb25QbGFhdHNlblVSTCwgZnVuY3Rpb24gKHdwKSB7XHJcbiAgICAgICAgICAgIHdvb25wUGxhYXRzZW4gPSB3cDtcclxuICAgICAgICAgICAgd29vblBsYWF0c2VuUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB2YXIgcGFuZGVuVVJMID0gZ2V0QmFnVHlwZXNVUkwoW3hNaW4sIHlNaW4sIHhNYXgsIHlNYXhdLCAncGFuZCcsICdFUFNHOjM4NTcnKTtcclxuICAgICAgICBnZXRKU09OKHBhbmRlblVSTCwgZnVuY3Rpb24gKHApIHtcclxuICAgICAgICAgICAgcGFuZGVuID0gcDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BhbmRlbicsIHBhbmRlbik7XHJcbiAgICAgICAgICAgIHZhciBwYW5kZW5TVkcgPSBnZW9qc29uMnN2Z19jb252ZXJ0ZXIuY29udmVydChwYW5kZW4sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3R5bGUnOiAnc3Ryb2tlOiM2NjAwMDA7IGZpbGw6dHJhbnNwYXJlbnQ7IHN0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndmVjdG9yLWVmZmVjdCc6ICdub24tc2NhbGluZy1zdHJva2UnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBzdmdIVE1MICs9IHBhbmRlblNWRy5qb2luKCcnKTtcclxuICAgICAgICAgICAgc3ZnSFRNTCArPSAnPHRleHQgeD1cIjEyMFwiIHk9XCIxMjBcIiB0cmFuc2Zvcm09XCJyb3RhdGUoJyArIC1mZWF0dXJlLnByb3BlcnRpZXMucGVyY2VlbG51bW1lcl9yb3RhdGllICsgJywgMTIwLCAxMjApXCI+JyArIGZlYXR1cmUucHJvcGVydGllcy5wZXJjZWVsbnVtbWVyICsgJzwvdGV4dD4nO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RldGFpbHMtcGFuZGVuLXRhYicpLnNldEF0dHJpYnV0ZSgnYmFkZ2UnLCBwYW5kZW4uZmVhdHVyZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgcGFuZGVuUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvRGVncmVlc01pbnV0ZXNBbmRTZWNvbmRzKGNvb3JkaW5hdGUpIHtcclxuICAgICAgICB2YXIgYWJzb2x1dGUgPSBNYXRoLmFicyhjb29yZGluYXRlKTtcclxuICAgICAgICB2YXIgZGVncmVlcyA9IE1hdGguZmxvb3IoYWJzb2x1dGUpO1xyXG4gICAgICAgIHZhciBtaW51dGVzTm90VHJ1bmNhdGVkID0gKGFic29sdXRlIC0gZGVncmVlcykgKiA2MDtcclxuICAgICAgICB2YXIgbWludXRlcyA9IE1hdGguZmxvb3IobWludXRlc05vdFRydW5jYXRlZCk7XHJcbiAgICAgICAgdmFyIHNlY29uZHMgPSBNYXRoLmZsb29yKChtaW51dGVzTm90VHJ1bmNhdGVkIC0gbWludXRlcykgKiA2MCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWdyZWVzICsgXCLCsCBcIiArIG1pbnV0ZXMgKyBcIicgXCIgKyBzZWNvbmRzICsgJ1wiJztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb252ZXJ0RE1TKGxhdCwgbG5nKSB7XHJcbiAgICAgICAgdmFyIGxhdGl0dWRlID0gdG9EZWdyZWVzTWludXRlc0FuZFNlY29uZHMobGF0KTtcclxuICAgICAgICB2YXIgbGF0aXR1ZGVDYXJkaW5hbCA9IE1hdGguc2lnbihsYXQpID49IDAgPyBcIk5cIiA6IFwiU1wiO1xyXG5cclxuICAgICAgICB2YXIgbG9uZ2l0dWRlID0gdG9EZWdyZWVzTWludXRlc0FuZFNlY29uZHMobG5nKTtcclxuICAgICAgICB2YXIgbG9uZ2l0dWRlQ2FyZGluYWwgPSBNYXRoLnNpZ24obG5nKSA+PSAwID8gXCJFXCIgOiBcIldcIjtcclxuXHJcbiAgICAgICAgcmV0dXJuIFtsYXRpdHVkZSArIFwiIFwiICsgbGF0aXR1ZGVDYXJkaW5hbCwgbG9uZ2l0dWRlICsgXCIgXCIgKyBsb25naXR1ZGVDYXJkaW5hbF07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0QmFnVHlwZXNVUkwoYmJveCwgdHlwZSwgc3JzKSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAncmVxdWVzdD1nZXRGZWF0dXJlJztcclxuICAgICAgICBvcHRpb25zICs9ICcmdmVyc2lvbj0yLjAuMCc7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnR5cGVuYW1lcz1iYWc6JyArIHR5cGU7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnNyc05hbWU9JyArIHNycztcclxuICAgICAgICBvcHRpb25zICs9ICcmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gXCImY3FsX2ZpbHRlcj1CQk9YKGdlb21ldHJpZSwgXCIgKyBiYm94LmpvaW4oJywnKSArIFwiLCdcIiArIHNycyArIFwiJylcIjtcclxuICAgICAgICByZXR1cm4gJ2h0dHBzOi8vZ2VvZGF0YS5uYXRpb25hYWxnZW9yZWdpc3Rlci5ubC9iYWcvd2ZzPycgKyBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFBlcmNlZWxJbWFnZVVSTChwZXJjZWVsTnVtbWVyLCBsYXRMb25CYm94KSB7XHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSAncmVxdWVzdD1HZXRNYXAnO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZsYXllcnM9cGVyY2VlbCc7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnN0eWxlcz0nO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZmb3JtYXQ9aW1hZ2UvcG5nJztcclxuICAgICAgICBvcHRpb25zICs9ICcmdHJhbnNwYXJlbnQ9dHJ1ZSc7XHJcbiAgICAgICAgb3B0aW9ucyArPSAnJnZlcnNpb249MS4zLjAnO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZ3aWR0aD0yNTYnO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZoZWlnaHQ9MjU2JztcclxuICAgICAgICBvcHRpb25zICs9ICcmY3JzPUVQU0c6Mjg5OTInO1xyXG4gICAgICAgIG9wdGlvbnMgKz0gJyZjcWxfZmlsdGVyPXBlcmNlZWxudW1tZXIlMjAlM0QlMjAnICsgcGVyY2VlbE51bW1lcjtcclxuICAgICAgICBvcHRpb25zICs9ICcmYmJveD0nICsgbGF0TG9uQmJveC5qb2luKCcsJyk7XHJcbiAgICAgICAgcmV0dXJuICdodHRwczovL2dlb2RhdGEubmF0aW9uYWFsZ2VvcmVnaXN0ZXIubmwva2FkYXN0cmFsZWthYXJ0djMvd21zPycgKyBvcHRpb25zO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHRvU1ZHUGF0aHNBcnIoZ2VvanNvbjM4NTcsIHZid2lkdGgsIHZiaGVpZ2h0LCBhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgeE1pbiA9IEluZmluaXR5O1xyXG4gICAgICAgIHhNYXggPSAtSW5maW5pdHk7XHJcbiAgICAgICAgeU1pbiA9IEluZmluaXR5O1xyXG4gICAgICAgIHlNYXggPSAtSW5maW5pdHk7XHJcbiAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZ2VvanNvbjM4NTcuZ2VvbWV0cnkuY29vcmRpbmF0ZXM7XHJcbiAgICAgICAgaWYgKGdlb2pzb24zODU3Lmdlb21ldHJ5LnR5cGUgIT09IFwiTXVsdGlQb2x5Z29uXCIpIGNvb3JkaW5hdGVzID0gW2Nvb3JkaW5hdGVzXVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjb29yZGluYXRlc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjb29yZGluYXRlc1tpXVtqXS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gY29vcmRpbmF0ZXNbaV1bal1ba11bMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBjb29yZGluYXRlc1tpXVtqXVtrXVsxXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA8IHhNaW4pIHhNaW4gPSB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID4geE1heCkgeE1heCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHkgPCB5TWluKSB5TWluID0geTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IHlNYXgpIHlNYXggPSB5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBnZW9qc29uMnN2Z19jb252ZXJ0ZXIgPSB3aW5kb3cuZ2VvanNvbjJzdmcoe1xyXG4gICAgICAgICAgICB2aWV3cG9ydFNpemU6IHsgd2lkdGg6IDI1MCwgaGVpZ2h0OiAyNTAgfSxcclxuICAgICAgICAgICAgYXR0cmlidXRlczogYXR0cmlidXRlcyxcclxuICAgICAgICAgICAgLy8gYXR0cmlidXRlczoge1xyXG4gICAgICAgICAgICAvLyAgICAgJ3N0eWxlJzogJ3N0cm9rZTojMDBmZjAwOyBmaWxsOiAjRjBGOEZGO3N0cm9rZS13aWR0aDowLjVweDsnLFxyXG4gICAgICAgICAgICAvLyAgICAgJ3ZlY3Rvci1lZmZlY3QnOiAnbm9uLXNjYWxpbmctc3Ryb2tlJ1xyXG4gICAgICAgICAgICAvLyB9LFxyXG4gICAgICAgICAgICBtYXBFeHRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHhNaW4sXHJcbiAgICAgICAgICAgICAgICByaWdodDogeE1heCxcclxuICAgICAgICAgICAgICAgIGJvdHRvbTogeU1pbixcclxuICAgICAgICAgICAgICAgIHRvcDogeU1heFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBnZW9qc29uMnN2Z19jb252ZXJ0ZXIuY29udmVydChnZW9qc29uMzg1Nyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdHJhbnNmb3JtVG9Fc3BnMzg1N09uU3BvdChmZWF0dXJlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaCA9IDA7IGggPCBmZWF0dXJlLmdlb21ldHJ5LmNvb3JkaW5hdGVzLmxlbmd0aDsgaCsrKSB7XHJcbiAgICAgICAgICAgIHZhciBjMiA9IGZlYXR1cmUuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbaF07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYzIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbmV3IHdpbmRvdy5wcm9qNC5Qb2ludChjMltpXVswXSwgYzJbaV1bMV0pOyAgIC8vYW55IG9iamVjdCB3aWxsIGRvIGFzIGxvbmcgYXMgaXQgaGFzICd4JyBhbmQgJ3knIHByb3BlcnRpZXNcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5wcm9qNC50cmFuc2Zvcm0oX3Byb2o0X3Byb2pfZXBzZzQzMjYsIF9wcm9qNF9wcm9qX2Vwc2czNzg1LCBwKTtcclxuICAgICAgICAgICAgICAgIGMyW2ldWzBdID0gcC54O1xyXG4gICAgICAgICAgICAgICAgYzJbaV1bMV0gPSBwLnk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59KSgpO1xyXG5cclxuXHJcbiIsIlxyXG5mdW5jdGlvbiBpbml0U2VhcmNoUGFnZShwYWdlKSB7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2F0aW9uLXNlYXJjaCcpXHJcbiAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHRlcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYXRpb24tc2VhcmNoLWlucHV0JykudmFsdWU7XHJcbiAgICAgICAgICAgIGdldEpTT04oJ2h0dHBzOi8vYXBpLnRlbGVwb3J0Lm9yZy9hcGkvY2l0aWVzLz9zZWFyY2g9JyArIHRlcm0sIGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcmVzLl9lbWJlZGRlZFsnY2l0eTpzZWFyY2gtcmVzdWx0cyddO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlzdFtpXS5tYXRjaGluZ19mdWxsX25hbWUubWF0Y2goL25ldGhlcmxhbmRzJC9pKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGxpc3RbaV0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGFuZGxlU2VhcmNoKGZpbHRlcmVkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gaGFuZGxlU2VhcmNoKHJlc3VsdHMpIHtcclxuICAgICAgICB2YXIgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbi1zZWFyY2gtcmVzdWx0cycpO1xyXG4gICAgICAgIHdoaWxlIChsaXN0LmZpcnN0Q2hpbGQpIGxpc3QucmVtb3ZlQ2hpbGQobGlzdC5maXJzdENoaWxkKTtcclxuICAgICAgICByZXN1bHRzLmZvckVhY2goZnVuY3Rpb24gKGNpdHkpIHtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB2YXIgY2l0eU5hbWUgPSBjaXR5Lm1hdGNoaW5nX2Z1bGxfbmFtZS5zcGxpdCgnLCAnKS5zbGljZSgwLCAyKS5qb2luKCcsICcpO1xyXG4gICAgICAgICAgICBkaXYuaW5uZXJIVE1MID1cclxuICAgICAgICAgICAgICAgICc8b25zLWxpc3QtaXRlbSB0YXBwYWJsZT4nICsgY2l0eU5hbWUgKyAnPC9vbnMtbGlzdC1pdGVtPic7XHJcbiAgICAgICAgICAgIGRpdi5maXJzdENoaWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmZuLmNpdHkgPSBjaXR5O1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmZuLmxvYWQoJ3ZpZXdzL21hcC5odG1sJylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGl2LmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NhdGlvbi1zZWFyY2gtY2FyZCcpLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnJyk7XHJcbiAgICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGxpc3QuaW5uZXJIVE1MID0gJzxvbnMtbGlzdC1pdGVtPkdlZW4gcmVzdWx0YXRlbjwvb25zLWxpc3QtaXRlbT4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=
